import{v as P,r as d,j as t}from"./components-BmgQfFUx.js";import{a as _,C as j}from"./Button-BQzjmXH6.js";import{aF as S,aG as E,aH as I,aI as D,aJ as $,aK as G,aL as F,aM as M,aN as x,aO as O,aP as T}from"./Header-C4AWQck-.js";import"./index-OZm5mEcS.js";import"./logs-DZu2vR68.js";import"./mobile-BXmnRaCS.js";const B=["node_modules/**",".git/**",".github/**",".vscode/**","**/*.jpg","**/*.jpeg","**/*.png","dist/**","build/**",".next/**","coverage/**",".cache/**",".vscode/**",".idea/**","**/*.log","**/.DS_Store","**/npm-debug.log*","**/yarn-debug.log*","**/yarn-error.log*","**/*lock.yaml"];function H(){const[y]=P(),{ready:r,importChat:m}=S(),{ready:o,gitClone:v}=E(),[g,w]=d.useState(!1),[R,f]=d.useState(!0),b=async s=>{if(!(!o&&!r)&&s){const n=G().add(B);try{const{workdir:i,data:h}=await v(s);if(m){const C=Object.keys(h).filter(a=>!n.ignores(a)),N=new TextDecoder("utf-8"),p=C.map(a=>{const{data:l,encoding:A}=h[a];return{path:a,content:A==="utf8"?l:l instanceof Uint8Array?N.decode(l):""}}).filter(a=>a.content),k=await F(p),u=M(k),c=[{role:"assistant",content:`Cloning the repo ${s} into ${i}
<boltArtifact id="imported-files" title="Git Cloned Files"  type="bundled">
${p.map(a=>`<boltAction type="file" filePath="${a.path}">
${O(a.content)}
</boltAction>`).join(`
`)}
</boltArtifact>`,id:x(),createdAt:new Date}];u&&(c.push({role:"user",id:x(),content:"Setup the codebase and Start the application"}),c.push(u)),await m(`Git Project:${s.split("/").slice(-1)[0]}`,c,{gitUrl:s})}}catch(i){console.error("Error during import:",i),_.error("Failed to import repository"),f(!1),window.location.href="/";return}}};return d.useEffect(()=>{if(!r||!o||g)return;const s=y.get("url");if(!s){window.location.href="/";return}b(s).catch(n=>{console.error("Error importing repo:",n),_.error("Failed to import repository"),f(!1),window.location.href="/"}),w(!0)},[y,r,o,g]),t.jsx(j,{fallback:t.jsx($,{}),children:()=>t.jsxs(t.Fragment,{children:[t.jsx(I,{}),R&&t.jsx(D,{message:"Please wait while we clone the repository..."})]})})}const L="_rayContainer_5f5ei_1",z="_lightRay_5f5ei_22",J="_ray1_5f5ei_34",K="_ray2_5f5ei_46",q="_ray3_5f5ei_58",Q="_ray4_5f5ei_69",V="_ray5_5f5ei_80",W="_ray6_5f5ei_92",X="_ray7_5f5ei_104",Y="_ray8_5f5ei_116",e={rayContainer:L,lightRay:z,ray1:J,ray2:K,ray3:q,ray4:Q,ray5:V,ray6:W,ray7:X,ray8:Y},Z=()=>t.jsxs("div",{className:`${e.rayContainer} `,children:[t.jsx("div",{className:`${e.lightRay} ${e.ray1}`}),t.jsx("div",{className:`${e.lightRay} ${e.ray2}`}),t.jsx("div",{className:`${e.lightRay} ${e.ray3}`}),t.jsx("div",{className:`${e.lightRay} ${e.ray4}`}),t.jsx("div",{className:`${e.lightRay} ${e.ray5}`}),t.jsx("div",{className:`${e.lightRay} ${e.ray6}`}),t.jsx("div",{className:`${e.lightRay} ${e.ray7}`}),t.jsx("div",{className:`${e.lightRay} ${e.ray8}`})]}),nt=()=>[{title:"Devonz"},{name:"description",content:"Talk with Devonz, an AI-powered development assistant"}];function it(){return t.jsxs("div",{className:"flex flex-col h-full w-full bg-bolt-elements-background-depth-1",children:[t.jsx(Z,{}),t.jsx(T,{}),t.jsx(j,{fallback:t.jsx($,{}),children:()=>t.jsx(H,{})})]})}export{it as default,nt as meta};
