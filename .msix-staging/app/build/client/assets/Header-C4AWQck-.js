const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProfileTab-BnJyo4VP.js","assets/components-BmgQfFUx.js","assets/Button-BQzjmXH6.js","assets/logs-DZu2vR68.js","assets/mobile-BXmnRaCS.js","assets/SettingsTab-BWuIxoZm.js","assets/Switch-Ce5GRzG7.js","assets/NotificationsTab-DhOVS74B.js","assets/FeaturesTab-B4HbLDEd.js","assets/stripIndent-ZXzdX4u1.js","assets/DataTab-kqu5mVRV.js","assets/Card-BJ5ZEwCc.js","assets/index-OZm5mEcS.js","assets/EventLogsTab-CFGoYfnP.js","assets/index-BbP3371Q.js","assets/GitHubTab-DHJBmDc-.js","assets/formatSize-D-zwpqud.js","assets/GitLabTab-cosXf8ut.js","assets/SupabaseTab-m1V-FS9_.js","assets/VercelTab-B5dsYj5x.js","assets/NetlifyTab-dRXRhNGx.js","assets/netlify-chCXiqNy.js","assets/Badge-Bv7eozhH.js","assets/CloudProvidersTab-BW-sC38K.js","assets/LocalProvidersTab-Cd3BYLyR.js","assets/McpTab-D88pfDks.js","assets/ProjectMemoryTab-C2J5BtKI.js","assets/OrchestratorTab-DxQRX5I8.js","assets/debugLogger-CLwoOrVR.js","assets/index-DPTfyjiD.js","assets/index-DsGapVyo.js","assets/index-cjGe1Xqk.js","assets/index-BXWfFN9l.js","assets/index-DdmY0o-O.js","assets/index-xx_buS9h.js","assets/index-BktfIhHm.js","assets/index-DgQ-67Py.js","assets/index-BzeziZS4.js","assets/index-CGqOpL4I.js","assets/index-BqkQDTWv.js","assets/angular-html-LfdN0zeE.js","assets/html-C2L_23MC.js","assets/javascript-ySlJ1b_l.js","assets/css-BPhBrDlE.js","assets/angular-ts-CKsD7JZE.js","assets/scss-C31hgJw-.js","assets/apl-BBq3IX1j.js","assets/xml-e3z08dGr.js","assets/java-xI-RfyKK.js","assets/json-BQoSv7ci.js","assets/astro-CqkE3fuf.js","assets/typescript-Dj6nwHGl.js","assets/postcss-B3ZDOciz.js","assets/blade-a8OxSdnT.js","assets/sql-COK4E0Yg.js","assets/bsl-Dgyn0ogV.js","assets/sdbl-BLhTXw86.js","assets/cairo--RitsXJZ.js","assets/python-DhUJRlN_.js","assets/cobol-PTqiYgYu.js","assets/coffee-dyiR41kL.js","assets/cpp-BksuvNSY.js","assets/regexp-DWJ3fJO_.js","assets/glsl-DBO2IWDn.js","assets/c-C3t2pwGQ.js","assets/crystal-DtDmRg-F.js","assets/shellscript-atvbtKCR.js","assets/dotenv-BkjVzoyG.js","assets/edge-D5gP-w-T.js","assets/html-derivative-CSfWNPLT.js","assets/elixir-CLiX3zqd.js","assets/elm-CmHSxxaM.js","assets/erb-BYTLMnw6.js","assets/ruby-DeZ3UC14.js","assets/haml-B2EZWmdv.js","assets/graphql-cDcHW_If.js","assets/jsx-BAng5TT0.js","assets/tsx-B6W0miNI.js","assets/lua-CvWAzNxB.js","assets/yaml-CVw76BM1.js","assets/fortran-fixed-form-TqA4NnZg.js","assets/fortran-free-form-DKXYxT9g.js","assets/fsharp-XplgxFYe.js","assets/markdown-UIAJJxZW.js","assets/gdresource-BHYsBjWJ.js","assets/gdshader-SKMF96pI.js","assets/gdscript-DfxzS6Rs.js","assets/git-commit-i4q6IMui.js","assets/diff-BgYniUM_.js","assets/git-rebase-B-v9cOL2.js","assets/glimmer-js-D-cwc0-E.js","assets/glimmer-ts-pgjy16dm.js","assets/hack-D1yCygmZ.js","assets/handlebars-BQGss363.js","assets/http-FRrOvY1W.js","assets/hxml-TIA70rKU.js","assets/haxe-C5wWYbrZ.js","assets/imba-bv_oIlVt.js","assets/jinja-DGy0s7-h.js","assets/jison-BqZprYcd.js","assets/julia-BBuGR-5E.js","assets/r-CwjWoCRV.js","assets/latex-C-cWTeAZ.js","assets/tex-rYs2v40G.js","assets/liquid-D3W5UaiH.js","assets/marko-z0MBrx5-.js","assets/less-BfCpw3nA.js","assets/mdc-DB_EDNY_.js","assets/nginx-D_VnBJ67.js","assets/nim-ZlGxZxc3.js","assets/perl-CHQXSrWU.js","assets/php-B5ebYQev.js","assets/pug-CM9l7STV.js","assets/qml-D8XfuvdV.js","assets/razor-CNLDkMZG.js","assets/csharp-D9R-vmeu.js","assets/rst-4NLicBqY.js","assets/cmake-DbXoA79R.js","assets/sas-BmTFh92c.js","assets/shaderlab-B7qAK45m.js","assets/hlsl-ifBTmRxC.js","assets/shellsession-C_rIy8kc.js","assets/soy-C-lX7w71.js","assets/sparql-bYkjHRlG.js","assets/turtle-BMR_PYu6.js","assets/stata-DorPZHa4.js","assets/svelte-MSaWC3Je.js","assets/templ-dwX3ZSMB.js","assets/go-B1SYOhNW.js","assets/ts-tags-CipyTH0X.js","assets/twig-NC5TFiHP.js","assets/vue-BuYVFjOK.js","assets/vue-html-xdeiXROB.js","assets/xsl-Dd0NUgwM.js","assets/DeployButton-Fl2eF0d8.js"])))=>i.map(i=>d[i]);
import{D as kr,x as gl,r as k,j as p,F as Qy,t as UM,G as fK,b as jC,u as pK,v as HM,H as mK,w as Yr,z as zM,I as gK}from"./components-BmgQfFUx.js";import{c as ye,e as Kt,B as Rt,b as He,t as If,f as WM,a as Ie,u as Ms,C as Yl,s as N2}from"./Button-BQzjmXH6.js";import{e as D2,b as bt,p as xr,l as Jt,m as js,_ as Z,d as Qt,c as Et,a as du,f as Id,r as bK}from"./logs-DZu2vR68.js";import{P as ev,q as yK,S as vK,Z as _t,t as _K,W as us,B as U1,v as qe,j as O2,h as xK,T as Xm,w as wK,x as SK,y as EK,M as CK,z as TK,A as kK,C as Mo,D as AK,E as RK,F as ch}from"./mobile-BXmnRaCS.js";const PK=5,Yc=6,Jm=10;let IK=(t,e,r,n)=>(t.events=t.events||{},t.events[r+Jm]||(t.events[r+Jm]=n(s=>{t.events[r].reduceRight((i,o)=>(o(i),i),{shared:{},...s})})),t.events[r]=t.events[r]||[],t.events[r].push(e),()=>{let s=t.events[r],i=s.indexOf(e);s.splice(i,1),s.length||(delete t.events[r],t.events[r+Jm](),delete t.events[r+Jm])}),NK=1e3,DK=(t,e)=>IK(t,n=>{let s=e(n);s&&t.events[Yc].push(s)},PK,n=>{let s=t.listen;t.listen=(...o)=>(!t.lc&&!t.active&&(t.active=!0,n()),s(...o));let i=t.off;t.events[Yc]=[],t.off=()=>{i(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let o of t.events[Yc])o();t.events[Yc]=[]}},NK)};{let o=t[D2];t[D2]=()=>{for(let a of t.events[Yc])a();t.events[Yc]=[],t.active=!1,o()}}return()=>{t.listen=s,t.off=i}}),OK=(t,e,r)=>{Array.isArray(t)||(t=[t]);let n,s=0,i=()=>{let l=t.map(c=>c.get());if(n===void 0||l.some((c,u)=>c!==n[u])){let c=++s;n=l;let u=e(...l);u&&u.then&&u.t?u.then(d=>{c===s&&o.set(d)}):o.set(u)}},o=bt(void 0,Math.max(...t.map(l=>l.l))+1),a=i;return DK(o,()=>{let l=t.map(c=>c.listen(a,-1/o.l));return i(),()=>{for(let c of l)c()}}),o},Fr=(t,e)=>OK(t,e);var VM=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==s||a.enumerable!==!0)return!1}return!0},LK=VM,MK=function(){return LK()&&!!Symbol.toStringTag},GM=Object,jK=Error,FK=EvalError,BK=RangeError,$K=ReferenceError,qM=SyntaxError,N_,L2;function Dp(){return L2||(L2=1,N_=TypeError),N_}var UK=URIError,HK=Math.abs,zK=Math.floor,WK=Math.max,VK=Math.min,GK=Math.pow,qK=Math.round,KK=Number.isNaN||function(e){return e!==e},YK=KK,XK=function(e){return YK(e)||e===0?e:e<0?-1:1},JK=Object.getOwnPropertyDescriptor,x0=JK;if(x0)try{x0([],"length")}catch{x0=null}var Op=x0,w0=Object.defineProperty||!1;if(w0)try{w0({},"a",{value:1})}catch{w0=!1}var tv=w0,D_,M2;function ZK(){if(M2)return D_;M2=1;var t=typeof Symbol<"u"&&Symbol,e=VM;return D_=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},D_}var KM=typeof Reflect<"u"&&Reflect.getPrototypeOf||null,QK=GM,YM=QK.getPrototypeOf||null,eY="Function.prototype.bind called on incompatible ",tY=Object.prototype.toString,rY=Math.max,nY="[object Function]",j2=function(e,r){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},sY=function(e,r){for(var n=[],s=r,i=0;s<e.length;s+=1,i+=1)n[i]=e[s];return n},iY=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},oY=function(e){var r=this;if(typeof r!="function"||tY.apply(r)!==nY)throw new TypeError(eY+r);for(var n=sY(arguments,1),s,i=function(){if(this instanceof s){var u=r.apply(this,j2(n,arguments));return Object(u)===u?u:this}return r.apply(e,j2(n,arguments))},o=rY(0,r.length-n.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(s=Function("binder","return function ("+iY(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,s.prototype=new c,c.prototype=null}return s},aY=oY,Lp=Function.prototype.bind||aY,FC=Function.prototype.call,BC=Function.prototype.apply,lY=typeof Reflect<"u"&&Reflect&&Reflect.apply,cY=Lp,uY=BC,dY=FC,hY=lY,XM=hY||cY.call(dY,uY),fY=Lp,pY=Dp(),mY=FC,gY=XM,$C=function(e){if(e.length<1||typeof e[0]!="function")throw new pY("a function is required");return gY(fY,mY,e)},bY=$C,F2=Op,JM;try{JM=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var O_=!!JM&&F2&&F2(Object.prototype,"__proto__"),ZM=Object,B2=ZM.getPrototypeOf,yY=O_&&typeof O_.get=="function"?bY([O_.get]):typeof B2=="function"?function(e){return B2(e==null?e:ZM(e))}:!1,$2=KM,U2=YM,H2=yY,QM=$2?function(e){return $2(e)}:U2?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return U2(e)}:H2?function(e){return H2(e)}:null,vY=Function.prototype.call,_Y=Object.prototype.hasOwnProperty,xY=Lp,wY=xY.call(vY,_Y),Nt,SY=GM,EY=jK,CY=FK,TY=BK,kY=$K,sd=qM,Mu=Dp(),AY=UK,RY=HK,PY=zK,IY=WK,NY=VK,DY=GK,OY=qK,LY=XK,ej=Function,L_=function(t){try{return ej('"use strict"; return ('+t+").constructor;")()}catch{}},Nf=Op,MY=tv,M_=function(){throw new Mu},jY=Nf?function(){try{return arguments.callee,M_}catch{try{return Nf(arguments,"callee").get}catch{return M_}}}():M_,Xc=ZK()(),on=QM,FY=YM,BY=KM,tj=BC,Mp=FC,hu={},$Y=typeof Uint8Array>"u"||!on?Nt:on(Uint8Array),oc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Nt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Nt:ArrayBuffer,"%ArrayIteratorPrototype%":Xc&&on?on([][Symbol.iterator]()):Nt,"%AsyncFromSyncIteratorPrototype%":Nt,"%AsyncFunction%":hu,"%AsyncGenerator%":hu,"%AsyncGeneratorFunction%":hu,"%AsyncIteratorPrototype%":hu,"%Atomics%":typeof Atomics>"u"?Nt:Atomics,"%BigInt%":typeof BigInt>"u"?Nt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Nt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Nt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Nt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":EY,"%eval%":eval,"%EvalError%":CY,"%Float16Array%":typeof Float16Array>"u"?Nt:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Nt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Nt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Nt:FinalizationRegistry,"%Function%":ej,"%GeneratorFunction%":hu,"%Int8Array%":typeof Int8Array>"u"?Nt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Nt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Nt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Xc&&on?on(on([][Symbol.iterator]())):Nt,"%JSON%":typeof JSON=="object"?JSON:Nt,"%Map%":typeof Map>"u"?Nt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Xc||!on?Nt:on(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":SY,"%Object.getOwnPropertyDescriptor%":Nf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Nt:Promise,"%Proxy%":typeof Proxy>"u"?Nt:Proxy,"%RangeError%":TY,"%ReferenceError%":kY,"%Reflect%":typeof Reflect>"u"?Nt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Nt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Xc||!on?Nt:on(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Nt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Xc&&on?on(""[Symbol.iterator]()):Nt,"%Symbol%":Xc?Symbol:Nt,"%SyntaxError%":sd,"%ThrowTypeError%":jY,"%TypedArray%":$Y,"%TypeError%":Mu,"%Uint8Array%":typeof Uint8Array>"u"?Nt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Nt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Nt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Nt:Uint32Array,"%URIError%":AY,"%WeakMap%":typeof WeakMap>"u"?Nt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Nt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Nt:WeakSet,"%Function.prototype.call%":Mp,"%Function.prototype.apply%":tj,"%Object.defineProperty%":MY,"%Object.getPrototypeOf%":FY,"%Math.abs%":RY,"%Math.floor%":PY,"%Math.max%":IY,"%Math.min%":NY,"%Math.pow%":DY,"%Math.round%":OY,"%Math.sign%":LY,"%Reflect.getPrototypeOf%":BY};if(on)try{null.error}catch(t){var UY=on(on(t));oc["%Error.prototype%"]=UY}var HY=function t(e){var r;if(e==="%AsyncFunction%")r=L_("async function () {}");else if(e==="%GeneratorFunction%")r=L_("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=L_("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&on&&(r=on(s.prototype))}return oc[e]=r,r},z2={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jp=Lp,cb=wY,zY=jp.call(Mp,Array.prototype.concat),WY=jp.call(tj,Array.prototype.splice),W2=jp.call(Mp,String.prototype.replace),ub=jp.call(Mp,String.prototype.slice),VY=jp.call(Mp,RegExp.prototype.exec),GY=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,qY=/\\(\\)?/g,KY=function(e){var r=ub(e,0,1),n=ub(e,-1);if(r==="%"&&n!=="%")throw new sd("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new sd("invalid intrinsic syntax, expected opening `%`");var s=[];return W2(e,GY,function(i,o,a,l){s[s.length]=a?W2(l,qY,"$1"):o||i}),s},YY=function(e,r){var n=e,s;if(cb(z2,n)&&(s=z2[n],n="%"+s[0]+"%"),cb(oc,n)){var i=oc[n];if(i===hu&&(i=HY(n)),typeof i>"u"&&!r)throw new Mu("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new sd("intrinsic "+e+" does not exist!")},rj=function(e,r){if(typeof e!="string"||e.length===0)throw new Mu("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Mu('"allowMissing" argument must be a boolean');if(VY(/^%?[^%]*%?$/,e)===null)throw new sd("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=KY(e),s=n.length>0?n[0]:"",i=YY("%"+s+"%",r),o=i.name,a=i.value,l=!1,c=i.alias;c&&(s=c[0],WY(n,zY([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],f=ub(h,0,1),b=ub(h,-1);if((f==='"'||f==="'"||f==="`"||b==='"'||b==="'"||b==="`")&&f!==b)throw new sd("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),s+="."+h,o="%"+s+"%",cb(oc,o))a=oc[o];else if(a!=null){if(!(h in a)){if(!r)throw new Mu("base intrinsic for "+e+" exists, but the property is not available.");return}if(Nf&&u+1>=n.length){var m=Nf(a,h);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[h]}else d=cb(a,h),a=a[h];d&&!l&&(oc[o]=a)}}return a},nj=rj,sj=$C,XY=sj([nj("%String.prototype.indexOf%")]),ij=function(e,r){var n=nj(e,!!r);return typeof n=="function"&&XY(e,".prototype.")>-1?sj([n]):n},oj=Function.prototype.toString,yu=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,H1,S0;if(typeof yu=="function"&&typeof Object.defineProperty=="function")try{H1=Object.defineProperty({},"length",{get:function(){throw S0}}),S0={},yu(function(){throw 42},null,H1)}catch(t){t!==S0&&(yu=null)}else yu=null;var JY=/^\s*class\b/,z1=function(e){try{var r=oj.call(e);return JY.test(r)}catch{return!1}},j_=function(e){try{return z1(e)?!1:(oj.call(e),!0)}catch{return!1}},E0=Object.prototype.toString,ZY="[object Object]",QY="[object Function]",eX="[object GeneratorFunction]",tX="[object HTMLAllCollection]",rX="[object HTML document.all class]",nX="[object HTMLCollection]",sX=typeof Symbol=="function"&&!!Symbol.toStringTag,iX=!(0 in[,]),W1=function(){return!1};if(typeof document=="object"){var oX=document.all;E0.call(oX)===E0.call(document.all)&&(W1=function(e){if((iX||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=E0.call(e);return(r===tX||r===rX||r===nX||r===ZY)&&e("")==null}catch{}return!1})}var aX=yu?function(e){if(W1(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{yu(e,null,H1)}catch(r){if(r!==S0)return!1}return!z1(e)&&j_(e)}:function(e){if(W1(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(sX)return j_(e);if(z1(e))return!1;var r=E0.call(e);return r!==QY&&r!==eX&&!/^\[object HTML/.test(r)?!1:j_(e)},lX=aX,cX=Object.prototype.toString,aj=Object.prototype.hasOwnProperty,uX=function(e,r,n){for(var s=0,i=e.length;s<i;s++)aj.call(e,s)&&(n==null?r(e[s],s,e):r.call(n,e[s],s,e))},dX=function(e,r,n){for(var s=0,i=e.length;s<i;s++)n==null?r(e.charAt(s),s,e):r.call(n,e.charAt(s),s,e)},hX=function(e,r,n){for(var s in e)aj.call(e,s)&&(n==null?r(e[s],s,e):r.call(n,e[s],s,e))};function fX(t){return cX.call(t)==="[object Array]"}var pX=function(e,r,n){if(!lX(r))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=n),fX(e)?uX(e,r,s):typeof e=="string"?dX(e,r,s):hX(e,r,s)},mX=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],F_=mX,gX=typeof globalThis>"u"?kr:globalThis,bX=function(){for(var e=[],r=0;r<F_.length;r++)typeof gX[F_[r]]=="function"&&(e[e.length]=F_[r]);return e},lj={exports:{}},V2=tv,yX=qM,Jc=Dp(),G2=Op,vX=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Jc("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Jc("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Jc("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Jc("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Jc("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Jc("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!G2&&G2(e,r);if(V2)V2(e,r,{configurable:o===null&&l?l.configurable:!o,enumerable:s===null&&l?l.enumerable:!s,value:n,writable:i===null&&l?l.writable:!i});else if(a||!s&&!i&&!o)e[r]=n;else throw new yX("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},V1=tv,cj=function(){return!!V1};cj.hasArrayLengthDefineBug=function(){if(!V1)return null;try{return V1([],"length",{value:1}).length!==1}catch{return!0}};var _X=cj,xX=rj,q2=vX,wX=_X(),K2=Op,Y2=Dp(),SX=xX("%Math.floor%"),EX=function(e,r){if(typeof e!="function")throw new Y2("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||SX(r)!==r)throw new Y2("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],s=!0,i=!0;if("length"in e&&K2){var o=K2(e,"length");o&&!o.configurable&&(s=!1),o&&!o.writable&&(i=!1)}return(s||i||!n)&&(wX?q2(e,"length",r,!0,!0):q2(e,"length",r)),e},CX=Lp,TX=BC,kX=XM,AX=function(){return kX(CX,TX,arguments)};(function(t){var e=EX,r=tv,n=$C,s=AX;t.exports=function(o){var a=n(arguments),l=o.length-(arguments.length-1);return e(a,1+(l>0?l:0),!0)},r?r(t.exports,"apply",{value:s}):t.exports.apply=s})(lj);var RX=lj.exports,db=pX,PX=bX,X2=RX,UC=ij,C0=Op,Zm=QM,IX=UC("Object.prototype.toString"),uj=MK(),J2=typeof globalThis>"u"?kr:globalThis,G1=PX(),HC=UC("String.prototype.slice"),NX=UC("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},hb={__proto__:null};uj&&C0&&Zm?db(G1,function(t){var e=new J2[t];if(Symbol.toStringTag in e&&Zm){var r=Zm(e),n=C0(r,Symbol.toStringTag);if(!n&&r){var s=Zm(r);n=C0(s,Symbol.toStringTag)}if(n&&n.get){var i=X2(n.get);hb["$"+t]=i}}}):db(G1,function(t){var e=new J2[t],r=e.slice||e.set;if(r){var n=X2(r);hb["$"+t]=n}});var DX=function(e){var r=!1;return db(hb,function(n,s){if(!r)try{"$"+n(e)===s&&(r=HC(s,1))}catch{}}),r},OX=function(e){var r=!1;return db(hb,function(n,s){if(!r)try{n(e),r=HC(s,1)}catch{}}),r},LX=function(e){if(!e||typeof e!="object")return!1;if(!uj){var r=HC(IX(e),8,-1);return NX(G1,r)>-1?r:r!=="Object"?!1:OX(e)}return C0?DX(e):null},MX=LX,jX=function(e){return!!MX(e)},q1={exports:{}};typeof Object.create=="function"?q1.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:q1.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var FX=q1.exports;function Fi(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Z2(t,e){for(var r="",n=0,s=-1,i=0,o,a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),s=a,i=0;continue}}else if(r.length===2||r.length===1){r="",n=0,s=a,i=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(s+1,a):r=t.slice(s+1,a),n=a-s-1;s=a,i=0}else o===46&&i!==-1?++i:i=-1}return r}function BX(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var ju={resolve:function(){for(var e="",r=!1,n,s=arguments.length-1;s>=-1&&!r;s--){var i;s>=0?i=arguments[s]:(n===void 0&&(n=xr.cwd()),i=n),Fi(i),i.length!==0&&(e=i+"/"+e,r=i.charCodeAt(0)===47)}return e=Z2(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Fi(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Z2(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return Fi(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];Fi(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":ju.normalize(e)},relative:function(e,r){if(Fi(e),Fi(r),e===r||(e=ju.resolve(e),r=ju.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var s=e.length,i=s-n,o=1;o<r.length&&r.charCodeAt(o)===47;++o);for(var a=r.length,l=a-o,c=i<l?i:l,u=-1,d=0;d<=c;++d){if(d===c){if(l>c){if(r.charCodeAt(o+d)===47)return r.slice(o+d+1);if(d===0)return r.slice(o+d)}else i>c&&(e.charCodeAt(n+d)===47?u=d:d===0&&(u=0));break}var h=e.charCodeAt(n+d),f=r.charCodeAt(o+d);if(h!==f)break;h===47&&(u=d)}var b="";for(d=n+u+1;d<=s;++d)(d===s||e.charCodeAt(d)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+r.slice(o+u):(o+=u,r.charCodeAt(o)===47&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Fi(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,s=-1,i=!0,o=e.length-1;o>=1;--o)if(r=e.charCodeAt(o),r===47){if(!i){s=o;break}}else i=!1;return s===-1?n?"/":".":n&&s===1?"//":e.slice(0,s)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');Fi(e);var n=0,s=-1,i=!0,o;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,l=-1;for(o=e.length-1;o>=0;--o){var c=e.charCodeAt(o);if(c===47){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===r.charCodeAt(a)?--a===-1&&(s=o):(a=-1,s=l))}return n===s?s=l:s===-1&&(s=e.length),e.slice(n,s)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!i){n=o+1;break}}else s===-1&&(i=!1,s=o+1);return s===-1?"":e.slice(n,s)}},extname:function(e){Fi(e);for(var r=-1,n=0,s=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!i){n=a+1;break}continue}s===-1&&(i=!1,s=a+1),l===46?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||s===-1||o===0||o===1&&r===s-1&&r===n+1?"":e.slice(r,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return BX("/",e)},parse:function(e){Fi(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),s=n===47,i;s?(r.root="/",i=1):i=0;for(var o=-1,a=0,l=-1,c=!0,u=e.length-1,d=0;u>=i;--u){if(n=e.charCodeAt(u),n===47){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),n===46?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||l===-1||d===0||d===1&&o===l-1&&o===a+1?l!==-1&&(a===0&&s?r.base=r.name=e.slice(1,l):r.base=r.name=e.slice(a,l)):(a===0&&s?(r.name=e.slice(1,o),r.base=e.slice(1,l)):(r.name=e.slice(a,o),r.base=e.slice(a,l)),r.ext=e.slice(o,l)),a>0?r.dir=e.slice(0,a-1):s&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};ju.posix=ju;var $X=ju;const No=gl($X),zC=k.createContext({});function Df(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const rv=k.createContext(null),WC=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class UX extends k.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function HX({children:t,isPresent:e}){const r=k.useId(),n=k.useRef(null),s=k.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=k.useContext(WC);return k.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(e||!n.current||!o||!a)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),p.jsx(UX,{isPresent:e,childRef:n,sizeRef:s,children:k.cloneElement(t,{ref:n})})}const zX=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=Df(WX),l=k.useId(),c=k.useCallback(d=>{a.set(d,!0);for(const h of a.values())if(!h)return;n&&n()},[a,n]),u=k.useMemo(()=>({id:l,initial:e,isPresent:r,custom:s,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),i?[Math.random(),c]:[r,c]);return k.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[r]),k.useEffect(()=>{!r&&!a.size&&n&&n()},[r]),o==="popLayout"&&(t=p.jsx(HX,{isPresent:r,children:t})),p.jsx(rv.Provider,{value:u,children:t})};function WX(){return new Map}function dj(t=!0){const e=k.useContext(rv);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,i=k.useId();k.useEffect(()=>{t&&s(i)},[t]);const o=k.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,o]:[!0]}const Qm=t=>t.key||"";function Q2(t){const e=[];return k.Children.forEach(t,r=>{k.isValidElement(r)&&e.push(r)}),e}const VC=typeof window<"u",hj=VC?k.useLayoutEffect:k.useEffect,Nr=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[a,l]=dj(o),c=k.useMemo(()=>Q2(t),[t]),u=o&&!a?[]:c.map(Qm),d=k.useRef(!0),h=k.useRef(c),f=Df(()=>new Map),[b,m]=k.useState(c),[g,y]=k.useState(c);hj(()=>{d.current=!1,h.current=c;for(let x=0;x<g.length;x++){const w=Qm(g[x]);u.includes(w)?f.delete(w):f.get(w)!==!0&&f.set(w,!1)}},[g,u.length,u.join("-")]);const v=[];if(c!==b){let x=[...c];for(let w=0;w<g.length;w++){const S=g[w],T=Qm(S);u.includes(T)||(x.splice(w,0,S),v.push(S))}i==="wait"&&v.length&&(x=v),y(Q2(x)),m(c);return}i==="wait"&&g.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:_}=k.useContext(zC);return p.jsx(p.Fragment,{children:g.map(x=>{const w=Qm(x),S=o&&!a?!1:c===g||u.includes(w),T=()=>{if(f.has(w))f.set(w,!0);else return;let E=!0;f.forEach(C=>{C||(E=!1)}),E&&(_?.(),y(h.current),o&&l?.(),n&&n())};return p.jsx(zX,{isPresent:S,initial:!d.current||r?void 0:!1,custom:S?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:S?void 0:T,children:x},w)})})},fs=t=>t;let Nd=fs,wo=fs;Nd=(t,e)=>{!t&&typeof console<"u"&&console.warn(e)},wo=(t,e)=>{if(!t)throw new Error(e)};function GC(t){let e;return()=>(e===void 0&&(e=t()),e)}const fc=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},xi=t=>t*1e3,mo=t=>t/1e3,VX={useManualTiming:!1};function GX(t){let e=new Set,r=new Set,n=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const f=d&&n?e:r;return u&&i.add(c),f.has(c)||f.add(c),c},cancel:c=>{r.delete(c),i.delete(c)},process:c=>{if(o=c,n){s=!0;return}n=!0,[e,r]=[r,e],e.forEach(a),e.clear(),n=!1,s&&(s=!1,l.process(c))}};return l}const eg=["read","resolveKeyframes","update","preRender","render","postRender"],qX=40;function fj(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=eg.reduce((y,v)=>(y[v]=GX(i),y),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=o,f=()=>{const y=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(y-s.timestamp,qX),1),s.timestamp=y,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(f))},b=()=>{r=!0,n=!0,s.isProcessing||t(f)};return{schedule:eg.reduce((y,v)=>{const _=o[v];return y[v]=(x,w=!1,S=!1)=>(r||b(),_.schedule(x,w,S)),y},{}),cancel:y=>{for(let v=0;v<eg.length;v++)o[eg[v]].cancel(y)},state:s,steps:o}}const{schedule:pr,cancel:tl,state:gn,steps:B_}=fj(typeof requestAnimationFrame<"u"?requestAnimationFrame:fs,!0),pj=k.createContext({strict:!1}),eR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},id={};for(const t in eR)id[t]={isEnabled:e=>eR[t].some(r=>!!e[r])};function KX(t){for(const e in t)id[e]={...id[e],...t[e]}}const YX=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fb(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||YX.has(t)}let mj=t=>!fb(t);function XX(t){t&&(mj=e=>e.startsWith("on")?!fb(e):t(e))}try{XX(require("@emotion/is-prop-valid").default)}catch{}function JX(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(mj(s)||r===!0&&fb(s)||!e&&!fb(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}const tR=new Set;function nv(t,e,r){t||tR.has(e)||(console.warn(e),tR.add(e))}function ZX(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>(nv(!1,"motion() is deprecated. Use motion.create() instead."),t(...n));return new Proxy(r,{get:(n,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const sv=k.createContext({});function Of(t){return typeof t=="string"||Array.isArray(t)}function iv(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const qC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],KC=["initial",...qC];function ov(t){return iv(t.animate)||KC.some(e=>Of(t[e]))}function gj(t){return!!(ov(t)||t.variants)}function QX(t,e){if(ov(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Of(r)?r:void 0,animate:Of(n)?n:void 0}}return t.inherit!==!1?e:{}}function eJ(t){const{initial:e,animate:r}=QX(t,k.useContext(sv));return k.useMemo(()=>({initial:e,animate:r}),[rR(e),rR(r)])}function rR(t){return Array.isArray(t)?t.join(" "):t}const tJ=Symbol.for("motionComponentSymbol");function vu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rJ(t,e,r){return k.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):vu(r)&&(r.current=n))},[e])}const YC=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nJ="framerAppearId",bj="data-"+YC(nJ),{schedule:XC}=fj(queueMicrotask,!1),yj=k.createContext({});function sJ(t,e,r,n,s){var i,o;const{visualElement:a}=k.useContext(sv),l=k.useContext(pj),c=k.useContext(rv),u=k.useContext(WC).reducedMotion,d=k.useRef(null);n=n||l.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:a,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,f=k.useContext(yj);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&iJ(d.current,r,s,f);const b=k.useRef(!1);k.useInsertionEffect(()=>{h&&b.current&&h.update(r,c)});const m=r[bj],g=k.useRef(!!m&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,m))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,m)));return hj(()=>{h&&(b.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),XC.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())}),k.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,m)}),g.current=!1))}),h}function iJ(t,e,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:vj(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&vu(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:c})}function vj(t){if(t)return t.options.allowProjection!==!1?t.projection:vj(t.parent)}function oJ({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:s}){var i,o;t&&KX(t);function a(c,u){let d;const h={...k.useContext(WC),...c,layoutId:aJ(c)},{isStatic:f}=h,b=eJ(c),m=n(c,f);if(!f&&VC){lJ(h,t);const g=cJ(h);d=g.MeasureLayout,b.visualElement=sJ(s,m,h,e,g.ProjectionNode)}return p.jsxs(sv.Provider,{value:b,children:[d&&b.visualElement?p.jsx(d,{visualElement:b.visualElement,...h}):null,r(s,c,rJ(m,b.visualElement,u),m,f,b.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=k.forwardRef(a);return l[tJ]=s,l}function aJ({layoutId:t}){const e=k.useContext(zC).id;return e&&t!==void 0?e+"-"+t:t}function lJ(t,e){const r=k.useContext(pj).strict;if(e&&r){const n="You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.";t.ignoreStrict?Nd(!1,n):wo(!1,n)}}function cJ(t){const{drag:e,layout:r}=id;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e?.isEnabled(t)||r?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const uJ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function JC(t){return typeof t!="string"||t.includes("-")?!1:!!(uJ.indexOf(t)>-1||/[A-Z]/u.test(t))}function nR(t){const e=[{},{}];return t?.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function ZC(t,e,r,n){if(typeof e=="function"){const[s,i]=nR(n);e=e(r!==void 0?r:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=nR(n);e=e(r!==void 0?r:t.custom,s,i)}return e}const K1=t=>Array.isArray(t),dJ=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),hJ=t=>K1(t)?t[t.length-1]||0:t,cn=t=>!!(t&&t.getVelocity);function T0(t){const e=cn(t)?t.get():t;return dJ(e)?e.toValue():e}function fJ({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:r},n,s,i){const o={latestValues:pJ(n,s,i,t),renderState:e()};return r&&(o.onMount=a=>r({props:n,current:a,...o}),o.onUpdate=a=>r(a)),o}const _j=t=>(e,r)=>{const n=k.useContext(sv),s=k.useContext(rv),i=()=>fJ(t,e,n,s);return r?i():Df(i)};function pJ(t,e,r,n){const s={},i=n(t,{});for(const h in i)s[h]=T0(i[h]);let{initial:o,animate:a}=t;const l=ov(t),c=gj(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!iv(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const b=ZC(t,h[f]);if(b){const{transitionEnd:m,transition:g,...y}=b;for(const v in y){let _=y[v];if(Array.isArray(_)){const x=u?_.length-1:0;_=_[x]}_!==null&&(s[v]=_)}for(const v in m)s[v]=m[v]}}}return s}const Dd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Dc=new Set(Dd),xj=t=>e=>typeof e=="string"&&e.startsWith(t),wj=xj("--"),mJ=xj("var(--"),QC=t=>mJ(t)?gJ.test(t.split("/*")[0].trim()):!1,gJ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sj=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ta=(t,e,r)=>r>e?e:r<t?t:r,Od={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Lf={...Od,transform:t=>ta(0,1,t)},tg={...Od,default:1},Fp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Aa=Fp("deg"),go=Fp("%"),ht=Fp("px"),bJ=Fp("vh"),yJ=Fp("vw"),sR={...go,parse:t=>go.parse(t)/100,transform:t=>go.transform(t*100)},vJ={borderWidth:ht,borderTopWidth:ht,borderRightWidth:ht,borderBottomWidth:ht,borderLeftWidth:ht,borderRadius:ht,radius:ht,borderTopLeftRadius:ht,borderTopRightRadius:ht,borderBottomRightRadius:ht,borderBottomLeftRadius:ht,width:ht,maxWidth:ht,height:ht,maxHeight:ht,top:ht,right:ht,bottom:ht,left:ht,padding:ht,paddingTop:ht,paddingRight:ht,paddingBottom:ht,paddingLeft:ht,margin:ht,marginTop:ht,marginRight:ht,marginBottom:ht,marginLeft:ht,backgroundPositionX:ht,backgroundPositionY:ht},_J={rotate:Aa,rotateX:Aa,rotateY:Aa,rotateZ:Aa,scale:tg,scaleX:tg,scaleY:tg,scaleZ:tg,skew:Aa,skewX:Aa,skewY:Aa,distance:ht,translateX:ht,translateY:ht,translateZ:ht,x:ht,y:ht,z:ht,perspective:ht,transformPerspective:ht,opacity:Lf,originX:sR,originY:sR,originZ:ht},iR={...Od,transform:Math.round},eT={...vJ,..._J,zIndex:iR,size:ht,fillOpacity:Lf,strokeOpacity:Lf,numOctaves:iR},xJ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wJ=Dd.length;function SJ(t,e,r){let n="",s=!0;for(let i=0;i<wJ;i++){const o=Dd[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||r){const c=Sj(a,eT[o]);if(!l){s=!1;const u=xJ[o]||o;n+=`${u}(${c}) `}r&&(e[o]=c)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function tT(t,e,r){const{style:n,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Dc.has(l)){o=!0;continue}else if(wj(l)){s[l]=c;continue}else{const u=Sj(c,eT[l]);l.startsWith("origin")?(a=!0,i[l]=u):n[l]=u}}if(e.transform||(o||r?n.transform=SJ(e,t.transform,r):n.transform&&(n.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;n.transformOrigin=`${l} ${c} ${u}`}}const EJ={offset:"stroke-dashoffset",array:"stroke-dasharray"},CJ={offset:"strokeDashoffset",array:"strokeDasharray"};function TJ(t,e,r=1,n=0,s=!0){t.pathLength=1;const i=s?EJ:CJ;t[i.offset]=ht.transform(-n);const o=ht.transform(e),a=ht.transform(r);t[i.array]=`${o} ${a}`}function oR(t,e,r){return typeof t=="string"?t:ht.transform(e+r*t)}function kJ(t,e,r){const n=oR(e,t.x,t.width),s=oR(r,t.y,t.height);return`${n} ${s}`}function rT(t,{attrX:e,attrY:r,attrScale:n,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(tT(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f,dimensions:b}=t;h.transform&&(b&&(f.transform=h.transform),delete h.transform),b&&(s!==void 0||i!==void 0||f.transform)&&(f.transformOrigin=kJ(b,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(h.x=e),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),o!==void 0&&TJ(h,o,a,l,!1)}const nT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Ej=()=>({...nT(),attrs:{}}),sT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Cj(t,{style:e,vars:r},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const Tj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kj(t,e,r,n){Cj(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(Tj.has(s)?s:YC(s),e.attrs[s])}const pb={};function AJ(t){Object.assign(pb,t)}function Aj(t,{layout:e,layoutId:r}){return Dc.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!pb[t]||t==="opacity")}function iT(t,e,r){var n;const{style:s}=t,i={};for(const o in s)(cn(s[o])||e.style&&cn(e.style[o])||Aj(o,t)||((n=r?.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function Rj(t,e,r){const n=iT(t,e,r);for(const s in t)if(cn(t[s])||cn(e[s])){const i=Dd.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=t[s]}return n}function RJ(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const aR=["x","y","width","height","cx","cy","r"],PJ={useVisualState:_j({scrapeMotionValuesFromProps:Rj,createRenderState:Ej,onUpdate:({props:t,prevProps:e,current:r,renderState:n,latestValues:s})=>{if(!r)return;let i=!!t.drag;if(!i){for(const a in s)if(Dc.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<aR.length;a++){const l=aR[a];t[l]!==e[l]&&(o=!0)}o&&pr.read(()=>{RJ(r,n),pr.render(()=>{rT(n,s,sT(r.tagName),t.transformTemplate),kj(r,n)})})}})},IJ={useVisualState:_j({scrapeMotionValuesFromProps:iT,createRenderState:nT})};function Pj(t,e,r){for(const n in e)!cn(e[n])&&!Aj(n,r)&&(t[n]=e[n])}function NJ({transformTemplate:t},e){return k.useMemo(()=>{const r=nT();return tT(r,e,t),Object.assign({},r.vars,r.style)},[e])}function DJ(t,e){const r=t.style||{},n={};return Pj(n,r,t),Object.assign(n,NJ(t,e)),n}function OJ(t,e){const r={},n=DJ(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}function LJ(t,e,r,n){const s=k.useMemo(()=>{const i=Ej();return rT(i,e,sT(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Pj(i,t.style,t),s.style={...i,...s.style}}return s}function MJ(t=!1){return(r,n,s,{latestValues:i},o)=>{const l=(JC(r)?LJ:OJ)(n,i,o,r),c=JX(n,typeof r=="string",t),u=r!==k.Fragment?{...c,...l,ref:s}:{},{children:d}=n,h=k.useMemo(()=>cn(d)?d.get():d,[d]);return k.createElement(r,{...u,children:h})}}function jJ(t,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...JC(n)?PJ:IJ,preloadedFeatures:t,useRender:MJ(s),createVisualElement:e,Component:n};return oJ(o)}}function Ij(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function av(t,e,r){const n=t.getProps();return ZC(n,e,r!==void 0?r:n.custom,t)}const FJ=GC(()=>window.ScrollTimeline!==void 0);class BJ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e,r){const n=this.animations.map(s=>{if(FJ()&&s.attachTimeline)return s.attachTimeline(e);if(typeof r=="function")return r(s)});return()=>{n.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Nj extends BJ{then(e,r){return Promise.all(this.animations).then(e).catch(r)}}function oT(t,e){return t?t[e]||t.default||t:void 0}const mb=2e4;function aT(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<mb;)e+=r,n=t.next(e);return e>=mb?1/0:e}function $J(t,e=100,r){const n=r({...t,keyframes:[0,e]}),s=Math.min(aT(n),mb);return{type:"keyframes",ease:i=>n.next(s*i).value/e,duration:mo(s)}}function lv(t){return typeof t=="function"}function lR(t,e){t.timeline=e,t.onfinish=null}const lT=t=>Array.isArray(t)&&typeof t[0]=="number",UJ={linearEasing:void 0};function HJ(t,e){const r=GC(t);return()=>{var n;return(n=UJ[e])!==null&&n!==void 0?n:r()}}const gb=HJ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Dj=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let i=0;i<s;i++)n+=t(fc(0,s-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function Oj(t){return!!(typeof t=="function"&&gb()||!t||typeof t=="string"&&(t in Y1||gb())||lT(t)||Array.isArray(t)&&t.every(Oj))}const Nh=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,Y1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nh([0,.65,.55,1]),circOut:Nh([.55,0,1,.45]),backIn:Nh([.31,.01,.66,-.59]),backOut:Nh([.33,1.53,.69,.99])};function Lj(t,e){if(t)return typeof t=="function"&&gb()?Dj(t,e):lT(t)?Nh(t):Array.isArray(t)?t.map(r=>Lj(r,e)||Y1.easeOut):Y1[t]}const fi={x:!1,y:!1};function Mj(){return fi.x||fi.y}function jj(t,e,r){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;e&&(s=e.current);const i=(n=r?.[t])!==null&&n!==void 0?n:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function Fj(t,e){const r=jj(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function cR(t){return e=>{e.pointerType==="touch"||Mj()||t(e)}}function zJ(t,e,r={}){const[n,s,i]=Fj(t,r),o=cR(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=cR(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,s)});return n.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const Bj=(t,e)=>e?t===e?!0:Bj(t,e.parentElement):!1,cT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,WJ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function VJ(t){return WJ.has(t.tagName)||t.tabIndex!==-1}const Dh=new WeakSet;function uR(t){return e=>{e.key==="Enter"&&t(e)}}function $_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const GJ=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=uR(()=>{if(Dh.has(r))return;$_(r,"down");const s=uR(()=>{$_(r,"up")}),i=()=>$_(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",i,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function dR(t){return cT(t)&&!Mj()}function qJ(t,e,r={}){const[n,s,i]=Fj(t,r),o=a=>{const l=a.currentTarget;if(!dR(a)||Dh.has(l))return;Dh.add(l);const c=e(a),u=(f,b)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!dR(f)||!Dh.has(l))&&(Dh.delete(l),typeof c=="function"&&c(f,{success:b}))},d=f=>{u(f,r.useGlobalTarget||Bj(l,f.target))},h=f=>{u(f,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",h,s)};return n.forEach(a=>{!VJ(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(r.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>GJ(c,s),s)}),i}function KJ(t){return t==="x"||t==="y"?fi[t]?null:(fi[t]=!0,()=>{fi[t]=!1}):fi.x||fi.y?null:(fi.x=fi.y=!0,()=>{fi.x=fi.y=!1})}const $j=new Set(["width","height","top","left","right","bottom",...Dd]);let k0;function YJ(){k0=void 0}const bo={now:()=>(k0===void 0&&bo.set(gn.isProcessing||VX.useManualTiming?gn.timestamp:performance.now()),k0),set:t=>{k0=t,queueMicrotask(YJ)}};function uT(t,e){t.indexOf(e)===-1&&t.push(e)}function cv(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class dT{constructor(){this.subscriptions=[]}add(e){return uT(this.subscriptions,e),()=>cv(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Uj(t,e){return e?t*(1e3/e):0}const hR=30,XJ=t=>!isNaN(parseFloat(t));class JJ{constructor(e,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const i=bo.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=bo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=XJ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return nv(!1,'value.onChange(callback) is deprecated. Switch to value.on("change", callback).'),this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new dT);const n=this.events[e].add(r);return e==="change"?()=>{n(),pr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>hR)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,hR);return Uj(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mf(t,e){return new JJ(t,e)}function ZJ(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Mf(r))}function QJ(t,e){const r=av(t,e);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const a=hJ(i[o]);ZJ(t,o,a)}}function eZ(t){return!!(cn(t)&&t.add)}function X1(t,e){const r=t.getValue("willChange");if(eZ(r))return r.add(e)}function Hj(t){return t.props[bj]}const zj=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,tZ=1e-7,rZ=12;function nZ(t,e,r,n,s){let i,o,a=0;do o=e+(r-e)/2,i=zj(o,n,s)-t,i>0?r=o:e=o;while(Math.abs(i)>tZ&&++a<rZ);return o}function Oc(t,e,r,n){if(t===e&&r===n)return fs;const s=i=>nZ(i,0,1,t,r);return i=>i===0||i===1?i:zj(s(i),e,n)}const Wj=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Vj=t=>e=>1-t(1-e),Gj=Oc(.33,1.53,.69,.99),hT=Vj(Gj),qj=Wj(hT),Kj=t=>(t*=2)<1?.5*hT(t):.5*(2-Math.pow(2,-10*(t-1))),fT=t=>1-Math.sin(Math.acos(t)),Yj=Vj(fT),Xj=Wj(fT),Jj=t=>/^0[^.\s]+$/u.test(t);function sZ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Jj(t):!0}const Yh=t=>Math.round(t*1e5)/1e5,pT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function iZ(t){return t==null}const oZ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,mT=(t,e)=>r=>!!(typeof r=="string"&&oZ.test(r)&&r.startsWith(t)||e&&!iZ(r)&&Object.prototype.hasOwnProperty.call(r,e)),Zj=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,a]=n.match(pT);return{[t]:parseFloat(s),[e]:parseFloat(i),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},aZ=t=>ta(0,255,t),U_={...Od,transform:t=>Math.round(aZ(t))},Xl={test:mT("rgb","red"),parse:Zj("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+U_.transform(t)+", "+U_.transform(e)+", "+U_.transform(r)+", "+Yh(Lf.transform(n))+")"};function lZ(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const J1={test:mT("#"),parse:lZ,transform:Xl.transform},_u={test:mT("hsl","hue"),parse:Zj("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+go.transform(Yh(e))+", "+go.transform(Yh(r))+", "+Yh(Lf.transform(n))+")"},An={test:t=>Xl.test(t)||J1.test(t)||_u.test(t),parse:t=>Xl.test(t)?Xl.parse(t):_u.test(t)?_u.parse(t):J1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xl.transform(t):_u.transform(t)},cZ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uZ(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(pT))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(cZ))===null||r===void 0?void 0:r.length)||0)>0}const Qj="number",e5="color",dZ="var",hZ="var(",fR="${}",fZ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jf(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(fZ,l=>(An.test(l)?(n.color.push(i),s.push(e5),r.push(An.parse(l))):l.startsWith(hZ)?(n.var.push(i),s.push(dZ),r.push(l)):(n.number.push(i),s.push(Qj),r.push(parseFloat(l))),++i,fR)).split(fR);return{values:r,split:a,indexes:n,types:s}}function t5(t){return jf(t).values}function r5(t){const{split:e,types:r}=jf(t),n=e.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],s[o]!==void 0){const a=r[o];a===Qj?i+=Yh(s[o]):a===e5?i+=An.transform(s[o]):i+=s[o]}return i}}const pZ=t=>typeof t=="number"?0:t;function mZ(t){const e=t5(t);return r5(t)(e.map(pZ))}const rl={test:uZ,parse:t5,createTransformer:r5,getAnimatableNone:mZ},gZ=new Set(["brightness","contrast","saturate","opacity"]);function bZ(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(pT)||[];if(!n)return t;const s=r.replace(n,"");let i=gZ.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+s+")"}const yZ=/\b([a-z-]*)\(.*?\)/gu,Z1={...rl,getAnimatableNone:t=>{const e=t.match(yZ);return e?e.map(bZ).join(" "):t}},vZ={...eT,color:An,backgroundColor:An,outlineColor:An,fill:An,stroke:An,borderColor:An,borderTopColor:An,borderRightColor:An,borderBottomColor:An,borderLeftColor:An,filter:Z1,WebkitFilter:Z1},gT=t=>vZ[t];function n5(t,e){let r=gT(t);return r!==Z1&&(r=rl),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const _Z=new Set(["auto","none","0"]);function xZ(t,e,r){let n=0,s;for(;n<t.length&&!s;){const i=t[n];typeof i=="string"&&!_Z.has(i)&&jf(i).values.length&&(s=t[n]),n++}if(s&&r)for(const i of e)t[i]=n5(r,s)}const pR=t=>t===Od||t===ht,mR=(t,e)=>parseFloat(t.split(", ")[e]),gR=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/u);if(s)return mR(s[1],e);{const i=n.match(/^matrix\((.+)\)$/u);return i?mR(i[1],t):0}},wZ=new Set(["x","y","z"]),SZ=Dd.filter(t=>!wZ.has(t));function EZ(t){const e=[];return SZ.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const od={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:gR(4,13),y:gR(5,14)};od.translateX=od.x;od.translateY=od.y;const ac=new Set;let Q1=!1,eS=!1;function s5(){if(eS){const t=Array.from(ac).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=EZ(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var a;(a=n.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}eS=!1,Q1=!1,ac.forEach(t=>t.complete()),ac.clear()}function i5(){ac.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(eS=!0)})}function CZ(){i5(),s5()}class bT{constructor(e,r,n,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ac.add(this),Q1||(Q1=!0,pr.read(i5),pr.resolveKeyframes(s5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&r){const l=n.readValue(r,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ac.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ac.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const o5=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),TZ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kZ(t){const e=TZ.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}const AZ=4;function a5(t,e,r=1){wo(r<=AZ,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);const[n,s]=kZ(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return o5(o)?parseFloat(o):o}return QC(s)?a5(s,e,r+1):s}const l5=t=>e=>e.test(t),RZ={test:t=>t==="auto",parse:t=>t},c5=[Od,ht,go,Aa,yJ,bJ,RZ],bR=t=>c5.find(l5(t));class u5 extends bT{constructor(e,r,n,s,i){super(e,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),QC(c))){const u=a5(c,r.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!$j.has(n)||e.length!==2)return;const[s,i]=e,o=bR(s),a=bR(i);if(o!==a)if(pR(o)&&pR(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)sZ(e[s])&&n.push(s);n.length&&xZ(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=od[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var e;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=od[n](r.measureViewportBox(),window.getComputedStyle(r.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{r.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const yR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(rl.test(t)||t==="0")&&!t.startsWith("url("));function PZ(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function IZ(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=yR(s,e),a=yR(i,e);return Nd(o===a,`You are trying to animate ${e} from "${s}" to "${i}". ${s} is not an animatable value - to enable this animation set ${s} to a value animatable to ${i} via the \`style\` property.`),!o||!a?!1:PZ(t)||(r==="spring"||lv(r))&&n}const NZ=t=>t!==null;function uv(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(NZ),i=e&&r!=="loop"&&e%2===1?0:s.length-1;return!i||n===void 0?s[i]:n}const DZ=40;class d5{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=bo.now(),this.options={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>DZ?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&CZ(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=bo.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!IZ(e,n,s,i))if(o)this.options.duration=0;else{l&&l(uv(e,this.options,r)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,r);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...u},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const wr=(t,e,r)=>t+(e-t)*r;function H_(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function OZ({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,i=0,o=0;if(!e)s=i=o=r;else{const a=r<.5?r*(1+e):r+e-r*e,l=2*r-a;s=H_(l,a,t+1/3),i=H_(l,a,t),o=H_(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function bb(t,e){return r=>r>0?e:t}const z_=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},LZ=[J1,Xl,_u],MZ=t=>LZ.find(e=>e.test(t));function vR(t){const e=MZ(t);if(Nd(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`),!e)return!1;let r=e.parse(t);return e===_u&&(r=OZ(r)),r}const _R=(t,e)=>{const r=vR(t),n=vR(e);if(!r||!n)return bb(t,e);const s={...r};return i=>(s.red=z_(r.red,n.red,i),s.green=z_(r.green,n.green,i),s.blue=z_(r.blue,n.blue,i),s.alpha=wr(r.alpha,n.alpha,i),Xl.transform(s))},jZ=(t,e)=>r=>e(t(r)),Bp=(...t)=>t.reduce(jZ),tS=new Set(["none","hidden"]);function FZ(t,e){return tS.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function BZ(t,e){return r=>wr(t,e,r)}function yT(t){return typeof t=="number"?BZ:typeof t=="string"?QC(t)?bb:An.test(t)?_R:HZ:Array.isArray(t)?h5:typeof t=="object"?An.test(t)?_R:$Z:bb}function h5(t,e){const r=[...t],n=r.length,s=t.map((i,o)=>yT(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function $Z(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=yT(t[s])(t[s],e[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function UZ(t,e){var r;const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(r=t.values[a])!==null&&r!==void 0?r:0;n[i]=l,s[o]++}return n}const HZ=(t,e)=>{const r=rl.createTransformer(e),n=jf(t),s=jf(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?tS.has(t)&&!s.values.length||tS.has(e)&&!n.values.length?FZ(t,e):Bp(h5(UZ(n,s),s.values),r):(Nd(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),bb(t,e))};function f5(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?wr(t,e,r):yT(t)(t,e)}const zZ=5;function p5(t,e,r){const n=Math.max(e-zZ,0);return Uj(r-t(n),e-n)}const Tr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},W_=.001;function WZ({duration:t=Tr.duration,bounce:e=Tr.bounce,velocity:r=Tr.velocity,mass:n=Tr.mass}){let s,i;Nd(t<=xi(Tr.maxDuration),"Spring duration must be 10 seconds or less");let o=1-e;o=ta(Tr.minDamping,Tr.maxDamping,o),t=ta(Tr.minDuration,Tr.maxDuration,mo(t)),o<1?(s=c=>{const u=c*o,d=u*t,h=u-r,f=rS(c,o),b=Math.exp(-d);return W_-h/f*b},i=c=>{const d=c*o*t,h=d*r+r,f=Math.pow(o,2)*Math.pow(c,2)*t,b=Math.exp(-d),m=rS(Math.pow(c,2),o);return(-s(c)+W_>0?-1:1)*((h-f)*b)/m}):(s=c=>{const u=Math.exp(-c*t),d=(c-r)*t+1;return-W_+u*d},i=c=>{const u=Math.exp(-c*t),d=(r-c)*(t*t);return u*d});const a=5/t,l=GZ(s,i,a);if(t=xi(t),isNaN(l))return{stiffness:Tr.stiffness,damping:Tr.damping,duration:t};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:t}}}const VZ=12;function GZ(t,e,r){let n=r;for(let s=1;s<VZ;s++)n=n-t(n)/e(n);return n}function rS(t,e){return t*Math.sqrt(1-e*e)}const qZ=["duration","bounce"],KZ=["stiffness","damping","mass"];function xR(t,e){return e.some(r=>t[r]!==void 0)}function YZ(t){let e={velocity:Tr.velocity,stiffness:Tr.stiffness,damping:Tr.damping,mass:Tr.mass,isResolvedFromDuration:!1,...t};if(!xR(t,KZ)&&xR(t,qZ))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*ta(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Tr.mass,stiffness:s,damping:i}}else{const r=WZ(t);e={...e,...r,mass:Tr.mass},e.isResolvedFromDuration=!0}return e}function vT(t=Tr.visualDuration,e=Tr.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=YZ({...r,velocity:-mo(r.velocity||0)}),b=h||0,m=c/(2*Math.sqrt(l*u)),g=o-i,y=mo(Math.sqrt(l/u)),v=Math.abs(g)<5;n||(n=v?Tr.restSpeed.granular:Tr.restSpeed.default),s||(s=v?Tr.restDelta.granular:Tr.restDelta.default);let _;if(m<1){const w=rS(y,m);_=S=>{const T=Math.exp(-m*y*S);return o-T*((b+m*y*g)/w*Math.sin(w*S)+g*Math.cos(w*S))}}else if(m===1)_=w=>o-Math.exp(-y*w)*(g+(b+y*g)*w);else{const w=y*Math.sqrt(m*m-1);_=S=>{const T=Math.exp(-m*y*S),E=Math.min(w*S,300);return o-T*((b+m*y*g)*Math.sinh(E)+w*g*Math.cosh(E))/w}}const x={calculatedDuration:f&&d||null,next:w=>{const S=_(w);if(f)a.done=w>=d;else{let T=0;m<1&&(T=w===0?xi(b):p5(_,w,S));const E=Math.abs(T)<=n,C=Math.abs(o-S)<=s;a.done=E&&C}return a.value=a.done?o:S,a},toString:()=>{const w=Math.min(aT(x),mb),S=Dj(T=>x.next(w*T).value,w,30);return w+"ms "+S}};return x}function wR({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},f=E=>a!==void 0&&E<a||l!==void 0&&E>l,b=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let m=r*e;const g=d+m,y=o===void 0?g:o(g);y!==g&&(m=y-d);const v=E=>-m*Math.exp(-E/n),_=E=>y+v(E),x=E=>{const C=v(E),A=_(E);h.done=Math.abs(C)<=c,h.value=h.done?y:A};let w,S;const T=E=>{f(h.value)&&(w=E,S=vT({keyframes:[h.value,b(h.value)],velocity:p5(_,E,h.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:E=>{let C=!1;return!S&&w===void 0&&(C=!0,x(E),T(E)),w!==void 0&&E>=w?S.next(E-w):(!C&&x(E),h)}}}const XZ=Oc(.42,0,1,1),JZ=Oc(0,0,.58,1),m5=Oc(.42,0,.58,1),g5=t=>Array.isArray(t)&&typeof t[0]!="number",SR={linear:fs,easeIn:XZ,easeInOut:m5,easeOut:JZ,circIn:fT,circInOut:Xj,circOut:Yj,backIn:hT,backInOut:qj,backOut:Gj,anticipate:Kj},ER=t=>{if(lT(t)){wo(t.length===4,"Cubic bezier arrays must contain four numerical values.");const[e,r,n,s]=t;return Oc(e,r,n,s)}else if(typeof t=="string")return wo(SR[t]!==void 0,`Invalid easing type '${t}'`),SR[t];return t};function ZZ(t,e,r){const n=[],s=r||f5,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||fs:e;a=Bp(l,a)}n.push(a)}return n}function QZ(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const i=t.length;if(wo(i===e.length,"Both input and output ranges must be the same length"),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=ZZ(e,n,s),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=fc(t[d],t[d+1],u);return a[d](h)};return r?u=>c(ta(t[0],t[i-1],u)):c}function b5(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=fc(0,e,n);t.push(wr(r,1,s))}}function y5(t){const e=[0];return b5(e,t.length-1),e}function eQ(t,e){return t.map(r=>r*e)}function tQ(t,e){return t.map(()=>e||m5).splice(0,t.length-1)}function yb({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=g5(n)?n.map(ER):ER(n),i={done:!1,value:e[0]},o=eQ(r&&r.length===e.length?r:y5(e),t),a=QZ(o,e,{ease:Array.isArray(s)?s:tQ(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const rQ=t=>{const e=({timestamp:r})=>t(r);return{start:()=>pr.update(e,!0),stop:()=>tl(e),now:()=>gn.isProcessing?gn.timestamp:bo.now()}},nQ={decay:wR,inertia:wR,tween:yb,keyframes:yb,spring:vT},sQ=t=>t/100;class _T extends d5{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:r,motionValue:n,element:s,keyframes:i}=this.options,o=s?.KeyframeResolver||bT,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,r,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=lv(r)?r:nQ[r]||yb;let l,c;a!==yb&&typeof e[0]!="number"&&(wo(e.length===2,`Only two keyframes currently supported with spring and inertia animations. Trying to animate ${e}`),l=Bp(sQ,f5(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=aT(u));const{calculatedDuration:d}=u,h=d+s,f=h*(n+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:n}=this;if(!n){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=n;if(this.startTime===null)return i.next(0);const{delay:h,repeat:f,repeatType:b,repeatDelay:m,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-h*(this.speed>=0?1:-1),v=this.speed>=0?y<0:y>u;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let _=this.currentTime,x=i;if(f){const E=Math.min(this.currentTime,u)/d;let C=Math.floor(E),A=E%1;!A&&E>=1&&(A=1),A===1&&C--,C=Math.min(C,f+1),!!(C%2)&&(b==="reverse"?(A=1-A,m&&(A-=m/d)):b==="mirror"&&(x=o)),_=ta(0,1,A)*d}const w=v?{done:!1,value:l[0]}:x.next(_);a&&(w.value=a(w.value));let{done:S}=w;!v&&c!==null&&(S=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return T&&s!==void 0&&(w.value=uv(l,this.options,s)),g&&g(w.value),T&&this.finish(),w}get duration(){const{resolved:e}=this;return e?mo(e.calculatedDuration):0}get time(){return mo(this.currentTime)}set time(e){e=xi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=mo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=rQ,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),r&&r();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const iQ=new Set(["opacity","clipPath","filter","transform"]);function oQ(t,e,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:r};l&&(c.offset=l);const u=Lj(a,s);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:n,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const aQ=GC(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),vb=10,lQ=2e4;function cQ(t){return lv(t.type)||t.type==="spring"||!Oj(t.ease)}function uQ(t,e){const r=new _T({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const s=[];let i=0;for(;!n.done&&i<lQ;)n=r.sample(i),s.push(n.value),i+=vb;return{times:void 0,keyframes:s,duration:i-vb,ease:"linear"}}const v5={anticipate:Kj,backInOut:qj,circInOut:Xj};function dQ(t){return t in v5}class CR extends d5{constructor(e){super(e);const{name:r,motionValue:n,element:s,keyframes:i}=this.options;this.resolver=new u5(i,(o,a)=>this.onKeyframesResolved(o,a),r,n,s),this.resolver.scheduleResolve()}initPlayback(e,r){let{duration:n=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&gb()&&dQ(i)&&(i=v5[i]),cQ(this.options)){const{onComplete:d,onUpdate:h,motionValue:f,element:b,...m}=this.options,g=uQ(e,m);e=g.keyframes,e.length===1&&(e[1]=e[0]),n=g.duration,s=g.times,i=g.ease,o="keyframes"}const u=oQ(a.owner.current,l,e,{...this.options,duration:n,times:s,ease:i});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(lR(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(uv(e,this.options,r)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return mo(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return mo(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=xi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return fs;const{animation:n}=r;lR(n,e)}return fs}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:n,duration:s,type:i,ease:o,times:a}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:h,...f}=this.options,b=new _T({...f,keyframes:n,duration:s,type:i,ease:o,times:a,isGenerator:!0}),m=xi(this.time);c.setWithVelocity(b.sample(m-vb).value,b.sample(m).value,vb)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:n,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=r.owner.getProps();return aQ()&&n&&iQ.has(n)&&!l&&!c&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const hQ={type:"spring",stiffness:500,damping:25,restSpeed:10},fQ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),pQ={type:"keyframes",duration:.8},mQ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},gQ=(t,{keyframes:e})=>e.length>2?pQ:Dc.has(t)?t.startsWith("scale")?fQ(e[1]):hQ:mQ;function bQ({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const xT=(t,e,r,n={},s,i)=>o=>{const a=oT(n,t)||{},l=a.delay||n.delay||0;let{elapsed:c=0}=n;c=c-xi(l);let u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};bQ(a)||(u={...u,...gQ(t,u)}),u.duration&&(u.duration=xi(u.duration)),u.repeatDelay&&(u.repeatDelay=xi(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!i&&e.get()!==void 0){const h=uv(u.keyframes,a);if(h!==void 0)return pr.update(()=>{u.onUpdate(h),u.onComplete()}),new Nj([])}return!i&&CR.supports(u)?new CR(u):new _T(u)};function yQ({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function wT(t,e,{delay:r=0,transitionOverride:n,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;n&&(o=n);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const h=t.getValue(d,(i=t.latestValues[d])!==null&&i!==void 0?i:null),f=l[d];if(f===void 0||u&&yQ(u,d))continue;const b={delay:r,...oT(o||{},d)};let m=!1;if(window.MotionHandoffAnimation){const y=Hj(t);if(y){const v=window.MotionHandoffAnimation(y,d,pr);v!==null&&(b.startTime=v,m=!0)}}X1(t,d),h.start(xT(d,h,f,t.shouldReduceMotion&&$j.has(d)?{type:!1}:b,t,m));const g=h.animation;g&&c.push(g)}return a&&Promise.all(c).then(()=>{pr.update(()=>{a&&QJ(t,a)})}),c}function nS(t,e,r={}){var n;const s=av(t,e,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const o=s?()=>Promise.all(wT(t,s,r)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return vQ(t,e,u+c,d,h,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(r.delay)])}function vQ(t,e,r=0,n=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*n,l=s===1?(c=0)=>c*n:(c=0)=>a-c*n;return Array.from(t.variantChildren).sort(_Q).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(nS(c,e,{...i,delay:r+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function _Q(t,e){return t.sortNodePosition(e)}function xQ(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(i=>nS(t,i,r));n=Promise.all(s)}else if(typeof e=="string")n=nS(t,e,r);else{const s=typeof e=="function"?av(t,e,r.custom):e;n=Promise.all(wT(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const wQ=KC.length;function _5(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?_5(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<wQ;r++){const n=KC[r],s=t.props[n];(Of(s)||s===!1)&&(e[n]=s)}return e}const SQ=[...qC].reverse(),EQ=qC.length;function CQ(t){return e=>Promise.all(e.map(({animation:r,options:n})=>xQ(t,r,n)))}function TQ(t){let e=CQ(t),r=TR(),n=!0;const s=l=>(c,u)=>{var d;const h=av(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:b,...m}=h;c={...c,...m,...b}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,u=_5(t.parent)||{},d=[],h=new Set;let f={},b=1/0;for(let g=0;g<EQ;g++){const y=SQ[g],v=r[y],_=c[y]!==void 0?c[y]:u[y],x=Of(_),w=y===l?v.isActive:null;w===!1&&(b=g);let S=_===u[y]&&_!==c[y]&&x;if(S&&n&&t.manuallyAnimateOnMount&&(S=!1),v.protectedKeys={...f},!v.isActive&&w===null||!_&&!v.prevProp||iv(_)||typeof _=="boolean")continue;const T=kQ(v.prevProp,_);let E=T||y===l&&v.isActive&&!S&&x||g>b&&x,C=!1;const A=Array.isArray(_)?_:[_];let I=A.reduce(s(y),{});w===!1&&(I={});const{prevResolvedValues:P={}}=v,D={...P,...I},R=z=>{E=!0,h.has(z)&&(C=!0,h.delete(z)),v.needsAnimating[z]=!0;const K=t.getValue(z);K&&(K.liveStyle=!1)};for(const z in D){const K=I[z],L=P[z];if(f.hasOwnProperty(z))continue;let O=!1;K1(K)&&K1(L)?O=!Ij(K,L):O=K!==L,O?K!=null?R(z):h.add(z):K!==void 0&&h.has(z)?R(z):v.protectedKeys[z]=!0}v.prevProp=_,v.prevResolvedValues=I,v.isActive&&(f={...f,...I}),n&&t.blockInitialAnimation&&(E=!1),E&&(!(S&&T)||C)&&d.push(...A.map(z=>({animation:z,options:{type:y}})))}if(h.size){const g={};h.forEach(y=>{const v=t.getBaseTarget(y),_=t.getValue(y);_&&(_.liveStyle=!0),g[y]=v??null}),d.push({animation:g})}let m=!!d.length;return n&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(m=!1),n=!1,m?e(d):Promise.resolve()}function a(l,c){var u;if(r[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var f;return(f=h.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),r[l].isActive=c;const d=o(l);for(const h in r)r[h].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>r,reset:()=>{r=TR(),n=!0}}}function kQ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ij(e,t):!1}function Pl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function TR(){return{animate:Pl(!0),whileInView:Pl(),whileHover:Pl(),whileTap:Pl(),whileDrag:Pl(),whileFocus:Pl(),exit:Pl()}}class bl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AQ extends bl{constructor(e){super(e),e.animationState||(e.animationState=TQ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();iv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let RQ=0;class PQ extends bl{constructor(){super(...arguments),this.id=RQ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const IQ={animation:{Feature:AQ},exit:{Feature:PQ}};function Ff(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function $p(t){return{point:{x:t.pageX,y:t.pageY}}}const NQ=t=>e=>cT(e)&&t(e,$p(e));function Xh(t,e,r,n){return Ff(t,e,NQ(r),n)}const kR=(t,e)=>Math.abs(t-e);function DQ(t,e){const r=kR(t.x,e.x),n=kR(t.y,e.y);return Math.sqrt(r**2+n**2)}class x5{constructor(e,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=G_(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=DQ(d.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:b}=d,{timestamp:m}=gn;this.history.push({...b,timestamp:m});const{onStart:g,onMove:y}=this.handlers;h||(g&&g(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=V_(h,this.transformPagePoint),pr.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:f,onSessionEnd:b,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=G_(d.type==="pointercancel"?this.lastMoveEventInfo:V_(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,g),b&&b(d,g)},!cT(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const o=$p(e),a=V_(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=gn;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=r;u&&u(e,G_(a,this.history)),this.removeListeners=Bp(Xh(this.contextWindow,"pointermove",this.handlePointerMove),Xh(this.contextWindow,"pointerup",this.handlePointerUp),Xh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),tl(this.updatePoint)}}function V_(t,e){return e?{point:e(t.point)}:t}function AR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function G_({point:t},e){return{point:t,delta:AR(t,w5(e)),offset:AR(t,OQ(e)),velocity:LQ(e,.1)}}function OQ(t){return t[0]}function w5(t){return t[t.length-1]}function LQ(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=w5(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>xi(e)));)r--;if(!n)return{x:0,y:0};const i=mo(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const S5=1e-4,MQ=1-S5,jQ=1+S5,E5=.01,FQ=0-E5,BQ=0+E5;function Ls(t){return t.max-t.min}function $Q(t,e,r){return Math.abs(t-e)<=r}function RR(t,e,r,n=.5){t.origin=n,t.originPoint=wr(e.min,e.max,t.origin),t.scale=Ls(r)/Ls(e),t.translate=wr(r.min,r.max,t.origin)-t.originPoint,(t.scale>=MQ&&t.scale<=jQ||isNaN(t.scale))&&(t.scale=1),(t.translate>=FQ&&t.translate<=BQ||isNaN(t.translate))&&(t.translate=0)}function Jh(t,e,r,n){RR(t.x,e.x,r.x,n?n.originX:void 0),RR(t.y,e.y,r.y,n?n.originY:void 0)}function PR(t,e,r){t.min=r.min+e.min,t.max=t.min+Ls(e)}function UQ(t,e,r){PR(t.x,e.x,r.x),PR(t.y,e.y,r.y)}function IR(t,e,r){t.min=e.min-r.min,t.max=t.min+Ls(e)}function Zh(t,e,r){IR(t.x,e.x,r.x),IR(t.y,e.y,r.y)}function HQ(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?wr(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?wr(r,t,n.max):Math.min(t,r)),t}function NR(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function zQ(t,{top:e,left:r,bottom:n,right:s}){return{x:NR(t.x,r,s),y:NR(t.y,e,n)}}function DR(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function WQ(t,e){return{x:DR(t.x,e.x),y:DR(t.y,e.y)}}function VQ(t,e){let r=.5;const n=Ls(t),s=Ls(e);return s>n?r=fc(e.min,e.max-n,t.min):n>s&&(r=fc(t.min,t.max-s,e.min)),ta(0,1,r)}function GQ(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const sS=.35;function qQ(t=sS){return t===!1?t=0:t===!0&&(t=sS),{x:OR(t,"left","right"),y:OR(t,"top","bottom")}}function OR(t,e,r){return{min:LR(t,e),max:LR(t,r)}}function LR(t,e){return typeof t=="number"?t:t[e]||0}const MR=()=>({translate:0,scale:1,origin:0,originPoint:0}),xu=()=>({x:MR(),y:MR()}),jR=()=>({min:0,max:0}),Pr=()=>({x:jR(),y:jR()});function zs(t){return[t("x"),t("y")]}function C5({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function KQ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function YQ(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function q_(t){return t===void 0||t===1}function iS({scale:t,scaleX:e,scaleY:r}){return!q_(t)||!q_(e)||!q_(r)}function Fl(t){return iS(t)||T5(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function T5(t){return FR(t.x)||FR(t.y)}function FR(t){return t&&t!=="0%"}function _b(t,e,r){const n=t-r,s=e*n;return r+s}function BR(t,e,r,n,s){return s!==void 0&&(t=_b(t,s,n)),_b(t,r,n)+e}function oS(t,e=0,r=1,n,s){t.min=BR(t.min,e,r,n,s),t.max=BR(t.max,e,r,n,s)}function k5(t,{x:e,y:r}){oS(t.x,e.translate,e.scale,e.originPoint),oS(t.y,r.translate,r.scale,r.originPoint)}const $R=.999999999999,UR=1.0000000000001;function XQ(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=r[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Su(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,k5(t,o)),n&&Fl(i.latestValues)&&Su(t,i.latestValues))}e.x<UR&&e.x>$R&&(e.x=1),e.y<UR&&e.y>$R&&(e.y=1)}function wu(t,e){t.min=t.min+e,t.max=t.max+e}function HR(t,e,r,n,s=.5){const i=wr(t.min,t.max,s);oS(t,e,r,i,n)}function Su(t,e){HR(t.x,e.x,e.scaleX,e.scale,e.originX),HR(t.y,e.y,e.scaleY,e.scale,e.originY)}function A5(t,e){return C5(YQ(t.getBoundingClientRect(),e))}function JQ(t,e,r){const n=A5(t,r),{scroll:s}=e;return s&&(wu(n.x,s.offset.x),wu(n.y,s.offset.y)),n}const R5=({current:t})=>t?t.ownerDocument.defaultView:null,ZQ=new WeakMap;class QQ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pr(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor($p(u).point)},i=(u,d)=>{const{drag:h,dragPropagation:f,onDragStart:b}=this.getProps();if(h&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=KJ(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zs(g=>{let y=this.getAxisMotionValue(g).get()||0;if(go.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const _=v.layout.layoutBox[g];_&&(y=Ls(_)*(parseFloat(y)/100))}}this.originPoint[g]=y}),b&&pr.postRender(()=>b(u,d)),X1(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:b,onDrag:m}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:g}=d;if(f&&this.currentDirection===null){this.currentDirection=eee(g),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),m&&m(u,d)},a=(u,d)=>this.stop(u,d),l=()=>zs(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new x5(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:R5(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&pr.postRender(()=>i(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!rg(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=HQ(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;r&&vu(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=zQ(s.layoutBox,r):this.constraints=!1,this.elastic=qQ(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&zs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=GQ(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!vu(e))return!1;const n=e.current;wo(n!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=JQ(n,s.root,this.visualElement.getTransformPagePoint());let o=WQ(s.layout.layoutBox,i);if(r){const a=r(KQ(o));this.hasMutatedConstraints=!!a,a&&(o=C5(a))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=zs(u=>{if(!rg(u,r,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const h=s?200:1e6,f=s?40:1e7,b={type:"inertia",velocity:n?e[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,b)});return Promise.all(c).then(a)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return X1(this.visualElement,e),n.start(xT(e,n,0,r,this.visualElement,!1))}stopAnimation(){zs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zs(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){zs(r=>{const{drag:n}=this.getProps();if(!rg(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[r];i.set(e[r]-wr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!vu(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};zs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=VQ({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),zs(o=>{if(!rg(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(wr(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;ZQ.set(this.visualElement,this);const e=this.visualElement.current,r=Xh(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();vu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),pr.read(n);const o=Ff(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(zs(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=sS,dragMomentum:a=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function rg(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function eee(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class tee extends bl{constructor(e){super(e),this.removeGroupControls=fs,this.removeListeners=fs,this.controls=new QQ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fs}unmount(){this.removeGroupControls(),this.removeListeners()}}const zR=t=>(e,r)=>{t&&pr.postRender(()=>t(e,r))};class ree extends bl{constructor(){super(...arguments),this.removePointerDownListener=fs}onPointerDown(e){this.session=new x5(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:R5(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:zR(e),onStart:zR(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&pr.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Xh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const A0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const uh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ht.test(t))t=parseFloat(t);else return t;const r=WR(t,e.target.x),n=WR(t,e.target.y);return`${r}% ${n}%`}},nee={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=rl.parse(t);if(s.length>5)return n;const i=rl.createTransformer(t),o=typeof s[0]!="number"?1:0,a=r.x.scale*e.x,l=r.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=wr(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class see extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;AJ(iee),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),A0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||pr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),XC.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function P5(t){const[e,r]=dj(),n=k.useContext(zC);return p.jsx(see,{...t,layoutGroup:n,switchLayoutGroup:k.useContext(yj),isPresent:e,safeToRemove:r})}const iee={borderRadius:{...uh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uh,borderTopRightRadius:uh,borderBottomLeftRadius:uh,borderBottomRightRadius:uh,boxShadow:nee};function I5(t,e,r){const n=cn(t)?t:Mf(t);return n.start(xT("",n,e,r)),n.animation}function N5(t){return t instanceof SVGElement&&t.tagName!=="svg"}const oee=(t,e)=>t.depth-e.depth;class aee{constructor(){this.children=[],this.isDirty=!1}add(e){uT(this.children,e),this.isDirty=!0}remove(e){cv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(oee),this.isDirty=!1,this.children.forEach(e)}}function lee(t,e){const r=bo.now(),n=({timestamp:s})=>{const i=s-r;i>=e&&(tl(n),t(i-e))};return pr.read(n,!0),()=>tl(n)}const D5=["TopLeft","TopRight","BottomLeft","BottomRight"],cee=D5.length,VR=t=>typeof t=="string"?parseFloat(t):t,GR=t=>typeof t=="number"||ht.test(t);function uee(t,e,r,n,s,i){s?(t.opacity=wr(0,r.opacity!==void 0?r.opacity:1,dee(n)),t.opacityExit=wr(e.opacity!==void 0?e.opacity:1,0,hee(n))):i&&(t.opacity=wr(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<cee;o++){const a=`border${D5[o]}Radius`;let l=qR(e,a),c=qR(r,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||GR(l)===GR(c)?(t[a]=Math.max(wr(VR(l),VR(c),n),0),(go.test(c)||go.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||r.rotate)&&(t.rotate=wr(e.rotate||0,r.rotate||0,n))}function qR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const dee=O5(0,.5,Yj),hee=O5(.5,.95,fs);function O5(t,e,r){return n=>n<t?0:n>e?1:r(fc(t,e,n))}function KR(t,e){t.min=e.min,t.max=e.max}function $s(t,e){KR(t.x,e.x),KR(t.y,e.y)}function YR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function XR(t,e,r,n,s){return t-=e,t=_b(t,1/r,n),s!==void 0&&(t=_b(t,1/s,n)),t}function fee(t,e=0,r=1,n=.5,s,i=t,o=t){if(go.test(e)&&(e=parseFloat(e),e=wr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=wr(i.min,i.max,n);t===i&&(a-=e),t.min=XR(t.min,e,r,a,s),t.max=XR(t.max,e,r,a,s)}function JR(t,e,[r,n,s],i,o){fee(t,e[r],e[n],e[s],e.scale,i,o)}const pee=["x","scaleX","originX"],mee=["y","scaleY","originY"];function ZR(t,e,r,n){JR(t.x,e,pee,r?r.x:void 0,n?n.x:void 0),JR(t.y,e,mee,r?r.y:void 0,n?n.y:void 0)}function QR(t){return t.translate===0&&t.scale===1}function L5(t){return QR(t.x)&&QR(t.y)}function eP(t,e){return t.min===e.min&&t.max===e.max}function gee(t,e){return eP(t.x,e.x)&&eP(t.y,e.y)}function tP(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function M5(t,e){return tP(t.x,e.x)&&tP(t.y,e.y)}function rP(t){return Ls(t.x)/Ls(t.y)}function nP(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class bee{constructor(){this.members=[]}add(e){uT(this.members,e),e.scheduleRender()}remove(e){if(cv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yee(t,e,r){let n="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=r?.z||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:f,skewY:b}=r;c&&(n=`perspective(${c}px) ${n}`),u&&(n+=`rotate(${u}deg) `),d&&(n+=`rotateX(${d}deg) `),h&&(n+=`rotateY(${h}deg) `),f&&(n+=`skewX(${f}deg) `),b&&(n+=`skewY(${b}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const Bl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Oh=typeof window<"u"&&window.MotionDebug!==void 0,K_=["","X","Y","Z"],vee={visibility:"hidden"},sP=1e3;let _ee=0;function Y_(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function j5(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=Hj(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",pr,!(s||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&j5(n)}function F5({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},a=e?.()){this.id=_ee++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Oh&&(Bl.totalNodes=Bl.resolvedTargetDeltas=Bl.recalculatedProjection=0),this.nodes.forEach(See),this.nodes.forEach(Aee),this.nodes.forEach(Ree),this.nodes.forEach(Eee),Oh&&window.MotionDebug.record(Bl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new aee)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new dT),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=N5(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=lee(h,250),A0.hasAnimatedSinceResize&&(A0.hasAnimatedSinceResize=!1,this.nodes.forEach(oP))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||Oee,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=u.getProps(),v=!this.targetLayout||!M5(this.targetLayout,b)||f,_=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const x={...oT(m,"layout"),onPlay:g,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else h||oP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,tl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Pee),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&j5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iP);return}this.isUpdating||this.nodes.forEach(Tee),this.isUpdating=!1,this.nodes.forEach(kee),this.nodes.forEach(xee),this.nodes.forEach(wee),this.clearAllSnapshots();const a=bo.now();gn.delta=ta(0,1e3/60,a-gn.timestamp),gn.timestamp=a,gn.isProcessing=!0,B_.update.process(gn),B_.preRender.process(gn),B_.render.process(gn),gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,XC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Cee),this.sharedNodes.forEach(Iee)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!L5(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Fl(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Lee(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Pr();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Mee))){const{scroll:u}=this.root;u&&(wu(l.x,u.offset.x),wu(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Pr();if($s(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&$s(l,o),wu(l.x,d.offset.x),wu(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Pr();$s(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Su(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Fl(u.latestValues)&&Su(l,u.latestValues)}return Fl(this.latestValues)&&Su(l,this.latestValues),l}removeTransform(o){const a=Pr();$s(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Fl(c.latestValues))continue;iS(c.latestValues)&&c.updateSnapshot();const u=Pr(),d=c.measurePageBox();$s(u,d),ZR(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Fl(this.latestValues)&&ZR(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=gn.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pr(),this.relativeTargetOrigin=Pr(),Zh(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),$s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Pr(),this.targetWithTransforms=Pr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),UQ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$s(this.target,this.layout.layoutBox),k5(this.target,this.targetDelta)):$s(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pr(),this.relativeTargetOrigin=Pr(),Zh(this.relativeTargetOrigin,this.target,f.target),$s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Oh&&Bl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||iS(this.parent.latestValues)||T5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===gn.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;$s(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;XQ(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Pr());const{target:b}=a;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(YR(this.prevProjectionDelta.x,this.projectionDelta.x),YR(this.prevProjectionDelta.y,this.projectionDelta.y)),Jh(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!nP(this.projectionDelta.x,this.prevProjectionDelta.x)||!nP(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Oh&&Bl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xu(),this.projectionDelta=xu(),this.projectionDeltaWithTransform=xu()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=xu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Pr(),f=l?l.source:void 0,b=this.layout?this.layout.source:void 0,m=f!==b,g=this.getStack(),y=!g||g.members.length<=1,v=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(Dee));this.animationProgress=0;let _;this.mixTargetDelta=x=>{const w=x/1e3;aP(d.x,o.x,w),aP(d.y,o.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zh(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Nee(this.relativeTarget,this.relativeTargetOrigin,h,w),_&&gee(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Pr()),$s(_,this.relativeTarget)),m&&(this.animationValues=u,uee(u,c,this.latestValues,w,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(tl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pr.update(()=>{A0.hasAnimatedSinceResize=!0,this.currentAnimation=I5(0,sP,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&B5(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Pr();const d=Ls(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=Ls(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}$s(a,l),Su(a,u),Jh(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new bee),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Y_("z",o,c,this.animationValues);for(let u=0;u<K_.length;u++)Y_(`rotate${K_[u]}`,o,c,this.animationValues),Y_(`skew${K_[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return vee;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=T0(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=T0(o?.pointerEvents)||""),this.hasProjected&&!Fl(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=yee(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:f,y:b}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${b.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const m in pb){if(h[m]===void 0)continue;const{correct:g,applyTo:y}=pb[m],v=c.transform==="none"?h[m]:g(h[m],d);if(y){const _=y.length;for(let x=0;x<_;x++)c[y[x]]=v}else c[m]=v}return this.options.layoutId&&(c.pointerEvents=d===this?T0(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(iP),this.root.sharedNodes.clear()}}}function xee(t){t.updateLayout()}function wee(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,o=r.source!==t.layout.source;i==="size"?zs(d=>{const h=o?r.measuredBox[d]:r.layoutBox[d],f=Ls(h);h.min=n[d].min,h.max=h.min+f}):B5(i,r.layoutBox,n)&&zs(d=>{const h=o?r.measuredBox[d]:r.layoutBox[d],f=Ls(n[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const a=xu();Jh(a,n,r.layoutBox);const l=xu();o?Jh(l,t.applyTransform(s,!0),r.measuredBox):Jh(l,n,r.layoutBox);const c=!L5(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const b=Pr();Zh(b,r.layoutBox,h.layoutBox);const m=Pr();Zh(m,n,f.layoutBox),M5(b,m)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=b,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function See(t){Oh&&Bl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Eee(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Cee(t){t.clearSnapshot()}function iP(t){t.clearMeasurements()}function Tee(t){t.isLayoutDirty=!1}function kee(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function oP(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Aee(t){t.resolveTargetDelta()}function Ree(t){t.calcProjection()}function Pee(t){t.resetSkewAndRotation()}function Iee(t){t.removeLeadSnapshot()}function aP(t,e,r){t.translate=wr(e.translate,0,r),t.scale=wr(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function lP(t,e,r,n){t.min=wr(e.min,r.min,n),t.max=wr(e.max,r.max,n)}function Nee(t,e,r,n){lP(t.x,e.x,r.x,n),lP(t.y,e.y,r.y,n)}function Dee(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Oee={duration:.45,ease:[.4,0,.1,1]},cP=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),uP=cP("applewebkit/")&&!cP("chrome/")?Math.round:fs;function dP(t){t.min=uP(t.min),t.max=uP(t.max)}function Lee(t){dP(t.x),dP(t.y)}function B5(t,e,r){return t==="position"||t==="preserve-aspect"&&!$Q(rP(e),rP(r),.2)}function Mee(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const jee=F5({attachResizeListener:(t,e)=>Ff(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),X_={current:void 0},$5=F5({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!X_.current){const t=new jee({});t.mount(window),t.setOptions({layoutScroll:!0}),X_.current=t}return X_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Fee={pan:{Feature:ree},drag:{Feature:tee,ProjectionNode:$5,MeasureLayout:P5}};function hP(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&pr.postRender(()=>i(e,$p(e)))}class Bee extends bl{mount(){const{current:e}=this.node;e&&(this.unmount=zJ(e,r=>(hP(this.node,r,"Start"),n=>hP(this.node,n,"End"))))}unmount(){}}class $ee extends bl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bp(Ff(this.node.current,"focus",()=>this.onFocus()),Ff(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fP(t,e,r){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&pr.postRender(()=>i(e,$p(e)))}class Uee extends bl{mount(){const{current:e}=this.node;e&&(this.unmount=qJ(e,r=>(fP(this.node,r,"Start"),(n,{success:s})=>fP(this.node,n,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const aS=new WeakMap,J_=new WeakMap,Hee=t=>{const e=aS.get(t.target);e&&e(t)},zee=t=>{t.forEach(Hee)};function Wee({root:t,...e}){const r=t||document;J_.has(r)||J_.set(r,{});const n=J_.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(zee,{root:t,...e})),n[s]}function Vee(t,e,r){const n=Wee(e);return aS.set(t,r),n.observe(t),()=>{aS.delete(t),n.unobserve(t)}}const Gee={some:0,all:1};class qee extends bl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:Gee[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return Vee(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(Kee(e,r))&&this.startObserver()}unmount(){}}function Kee({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const Yee={inView:{Feature:qee},tap:{Feature:Uee},focus:{Feature:$ee},hover:{Feature:Bee}},Xee={layout:{ProjectionNode:$5,MeasureLayout:P5}},lS={current:null},U5={current:!1};function Jee(){if(U5.current=!0,!!VC)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>lS.current=t.matches;t.addListener(e),e()}else lS.current=!1}const Zee=[...c5,An,rl],Qee=t=>Zee.find(l5(t)),ad=new WeakMap;function ete(t,e,r){for(const n in e){const s=e[n],i=r[n];if(cn(s))t.addValue(n,s),nv(s.version==="11.18.2",`Attempting to mix Motion versions ${s.version} with 11.18.2 may not work as expected.`);else if(cn(i))t.addValue(n,Mf(s,{owner:t}));else if(i!==s)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(n);t.addValue(n,Mf(o!==void 0?o:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const pP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class H5{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=bo.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,pr.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=ov(r),this.isVariantNode=gj(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const b=h[f];l[f]!==void 0&&cn(b)&&b.set(l[f],!1)}}mount(e){this.current=e,ad.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),U5.current||Jee(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lS.current,nv(this.shouldReduceMotion!==!0,"You have Reduced Motion enabled on your device. Animations may not appear as expected."),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ad.delete(this.current),this.projection&&this.projection.unmount(),tl(this.notifyUpdate),tl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Dc.has(e),s=r.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&pr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in id){const r=id[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<pP.length;n++){const s=pP[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=ete(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Mf(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){var n;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(o5(s)||Jj(s))?s=parseFloat(s):!Qee(s)&&rl.test(r)&&(s=n5(e,r)),this.setBaseTarget(e,cn(s)?s.get():s)),cn(s)?s.get():s}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=ZC(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(s=o[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!cn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new dT),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class z5 extends H5{constructor(){super(...arguments),this.KeyframeResolver=u5}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;cn(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function tte(t){return window.getComputedStyle(t)}class W5 extends z5{constructor(){super(...arguments),this.type="html",this.renderInstance=Cj}readValueFromInstance(e,r){if(Dc.has(r)){const n=gT(r);return n&&n.default||0}else{const n=tte(e),s=(wj(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return A5(e,r)}build(e,r,n){tT(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return iT(e,r,n)}}class V5 extends z5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pr}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Dc.has(r)){const n=gT(r);return n&&n.default||0}return r=Tj.has(r)?r:YC(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return Rj(e,r,n)}build(e,r,n){rT(e,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,r,n,s){kj(e,r,n,s)}mount(e){this.isSVGTag=sT(e.tagName),super.mount(e)}}const rte=(t,e)=>JC(t)?new V5(e):new W5(e,{allowProjection:t!==k.Fragment}),nte=jJ({...IQ,...Yee,...Fee,...Xee},rte),rt=ZX(nte);function ste(t){return k.useEffect(()=>()=>t(),[])}const ite=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function G5(t,e){return g5(t)?t[ite(0,t.length,e)]:t}function ST(t){return typeof t=="object"&&!Array.isArray(t)}function q5(t,e,r,n){return typeof t=="string"&&ST(e)?jj(t,r,n):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function ote(t,e,r){return t*(e+1)}function mP(t,e,r,n){var s;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?r:(s=n.get(e))!==null&&s!==void 0?s:t}function ate(t,e,r){for(let n=0;n<t.length;n++){const s=t[n];s.at>e&&s.at<r&&(cv(t,s),n--)}}function lte(t,e,r,n,s,i){ate(t,s,i);for(let o=0;o<e.length;o++)t.push({value:e[o],at:wr(s,i,n[o]),easing:G5(r,o)})}function cte(t,e){for(let r=0;r<t.length;r++)t[r]=t[r]/(e+1)}function ute(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const dte="easeInOut",hte=20;function fte(t,{defaultTransition:e={},...r}={},n,s){const i=e.duration||.3,o=new Map,a=new Map,l={},c=new Map;let u=0,d=0,h=0;for(let f=0;f<t.length;f++){const b=t[f];if(typeof b=="string"){c.set(b,d);continue}else if(!Array.isArray(b)){c.set(b.name,mP(d,b.at,u,c));continue}let[m,g,y={}]=b;y.at!==void 0&&(d=mP(d,y.at,u,c));let v=0;const _=(x,w,S,T=0,E=0)=>{const C=pte(x),{delay:A=0,times:I=y5(C),type:P="keyframes",repeat:D,repeatType:R,repeatDelay:F=0,...G}=w;let{ease:z=e.ease||"easeOut",duration:K}=w;const L=typeof A=="function"?A(T,E):A,O=C.length,$=lv(P)?P:s?.[P];if(O<=2&&$){let X=100;if(O===2&&bte(C)){const j=C[1]-C[0];X=Math.abs(j)}const ge={...G};K!==void 0&&(ge.duration=xi(K));const J=$J(ge,X,$);z=J.ease,K=J.duration}K??(K=i);const H=d+L;I.length===1&&I[0]===0&&(I[1]=1);const U=I.length-C.length;if(U>0&&b5(I,U),C.length===1&&C.unshift(null),D){wo(D<hte,"Repeat count too high, must be less than 20"),K=ote(K,D);const X=[...C],ge=[...I];z=Array.isArray(z)?[...z]:[z];const J=[...z];for(let j=0;j<D;j++){C.push(...X);for(let Y=0;Y<X.length;Y++)I.push(ge[Y]+(j+1)),z.push(Y===0?"linear":G5(J,Y-1))}cte(I,D)}const ee=H+K;lte(S,C,z,I,H,ee),v=Math.max(L+K,v),h=Math.max(ee,h)};if(cn(m)){const x=gP(m,a);_(g,y,bP("default",x))}else{const x=q5(m,g,n,l),w=x.length;for(let S=0;S<w;S++){g=g,y=y;const T=x[S],E=gP(T,a);for(const C in g)_(g[C],mte(y,C),bP(C,E),S,w)}}u=d,d+=v}return a.forEach((f,b)=>{for(const m in f){const g=f[m];g.sort(ute);const y=[],v=[],_=[];for(let w=0;w<g.length;w++){const{at:S,value:T,easing:E}=g[w];y.push(T),v.push(fc(0,h,S)),_.push(E||"easeOut")}v[0]!==0&&(v.unshift(0),y.unshift(y[0]),_.unshift(dte)),v[v.length-1]!==1&&(v.push(1),y.push(null)),o.has(b)||o.set(b,{keyframes:{},transition:{}});const x=o.get(b);x.keyframes[m]=y,x.transition[m]={...e,duration:h,ease:_,times:v,...r}}}),o}function gP(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function bP(t,e){return e[t]||(e[t]=[]),e[t]}function pte(t){return Array.isArray(t)?t:[t]}function mte(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const gte=t=>typeof t=="number",bte=t=>t.every(gte);function yte(t,e){return t in e}class vte extends H5{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,r){if(yte(r,e)){const n=e[r];if(typeof n=="string"||typeof n=="number")return n}}getBaseTargetFromProps(){}removeValueFromRenderState(e,r){delete r.output[e]}measureInstanceViewportBox(){return Pr()}build(e,r){Object.assign(e.output,r)}renderInstance(e,{output:r}){Object.assign(e,r)}sortInstanceNodePosition(){return 0}}function _te(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},r=N5(t)?new V5(e):new W5(e);r.mount(t),ad.set(t,r)}function xte(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},r=new vte(e);r.mount(t),ad.set(t,r)}function wte(t,e){return cn(t)||typeof t=="number"||typeof t=="string"&&!ST(e)}function K5(t,e,r,n){const s=[];if(wte(t,e))s.push(I5(t,ST(e)&&e.default||e,r&&(r.default||r)));else{const i=q5(t,e,n),o=i.length;wo(!!o,"No valid elements provided.");for(let a=0;a<o;a++){const l=i[a],c=l instanceof Element?_te:xte;ad.has(l)||c(l);const u=ad.get(l),d={...r};"delay"in d&&typeof d.delay=="function"&&(d.delay=d.delay(a,o)),s.push(...wT(u,{...e,transition:d},{}))}}return s}function Ste(t,e,r){const n=[];return fte(t,e,r,{spring:vT}).forEach(({keyframes:i,transition:o},a)=>{n.push(...K5(a,i,o))}),n}function Ete(t){return Array.isArray(t)&&t.some(Array.isArray)}function Cte(t){function e(r,n,s){let i=[];Ete(r)?i=Ste(r,n,t):i=K5(r,n,s,t);const o=new Nj(i);return t&&t.animations.push(o),o}return e}function Tte(){const t=Df(()=>({current:null,animations:[]})),e=Df(()=>Cte(t));return ste(()=>{t.animations.forEach(r=>r.stop())}),[t,e]}function it(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t?.(s),r===!1||!s.defaultPrevented)return e?.(s)}}function yP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Up(...t){return e=>{let r=!1;const n=t.map(s=>{const i=yP(s,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():yP(t[s],null)}}}}function Sr(...t){return k.useCallback(Up(...t),t)}function kte(t,e){const r=k.createContext(e),n=i=>{const{children:o,...a}=i,l=k.useMemo(()=>a,Object.values(a));return p.jsx(r.Provider,{value:l,children:o})};n.displayName=t+"Provider";function s(i){const o=k.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,s]}function ai(t,e=[]){let r=[];function n(i,o){const a=k.createContext(o),l=r.length;r=[...r,o];const c=d=>{const{scope:h,children:f,...b}=d,m=h?.[t]?.[l]||a,g=k.useMemo(()=>b,Object.values(b));return p.jsx(m.Provider,{value:g,children:f})};c.displayName=i+"Provider";function u(d,h){const f=h?.[t]?.[l]||a,b=k.useContext(f);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=r.map(o=>k.createContext(o));return function(a){const l=a?.[t]||i;return k.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[n,Ate(s,...e)]}function Ate(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var ra=globalThis?.document?k.useLayoutEffect:()=>{},Rte=Qy[" useId ".trim().toString()]||(()=>{}),Pte=0;function yo(t){const[e,r]=k.useState(Rte());return ra(()=>{r(n=>n??String(Pte++))},[t]),t||(e?`radix-${e}`:"")}var Ite=Qy[" useInsertionEffect ".trim().toString()]||ra;function yl({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,i,o]=Nte({defaultProp:e,onChange:r}),a=t!==void 0,l=a?t:s;{const u=k.useRef(t!==void 0);k.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,n])}const c=k.useCallback(u=>{if(a){const d=Dte(u)?u(t):u;d!==t&&o.current?.(d)}else i(u)},[a,t,i,o]);return[l,c]}function Nte({defaultProp:t,onChange:e}){const[r,n]=k.useState(t),s=k.useRef(r),i=k.useRef(e);return Ite(()=>{i.current=e},[e]),k.useEffect(()=>{s.current!==r&&(i.current?.(r),s.current=r)},[r,s]),[r,n,i]}function Dte(t){return typeof t=="function"}function ld(t){const e=Ote(t),r=k.forwardRef((n,s)=>{const{children:i,...o}=n,a=k.Children.toArray(i),l=a.find(Mte);if(l){const c=l.props.children,u=a.map(d=>d===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:d);return p.jsx(e,{...o,ref:s,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return p.jsx(e,{...o,ref:s,children:i})});return r.displayName=`${t}.Slot`,r}function Ote(t){const e=k.forwardRef((r,n)=>{const{children:s,...i}=r;if(k.isValidElement(s)){const o=Fte(s),a=jte(i,s.props);return s.type!==k.Fragment&&(a.ref=n?Up(n,o):o),k.cloneElement(s,a)}return k.Children.count(s)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Y5=Symbol("radix.slottable");function Lte(t){const e=({children:r})=>p.jsx(p.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=Y5,e}function Mte(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Y5}function jte(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function Fte(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Bte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ft=Bte.reduce((t,e)=>{const r=ld(`Primitive.${e}`),n=k.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function X5(t,e){t&&UM.flushSync(()=>t.dispatchEvent(e))}function So(t){const e=k.useRef(t);return k.useEffect(()=>{e.current=t}),k.useMemo(()=>(...r)=>e.current?.(...r),[])}function $te(t,e=globalThis?.document){const r=So(t);k.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var Ute="DismissableLayer",cS="dismissableLayer.update",Hte="dismissableLayer.pointerDownOutside",zte="dismissableLayer.focusOutside",vP,J5=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Hp=k.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=k.useContext(J5),[u,d]=k.useState(null),h=u?.ownerDocument??globalThis?.document,[,f]=k.useState({}),b=Sr(e,T=>d(T)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),v=u?m.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,x=v>=y,w=Gte(T=>{const E=T.target,C=[...c.branches].some(A=>A.contains(E));!x||C||(s?.(T),o?.(T),T.defaultPrevented||a?.())},h),S=qte(T=>{const E=T.target;[...c.branches].some(A=>A.contains(E))||(i?.(T),o?.(T),T.defaultPrevented||a?.())},h);return $te(T=>{v===c.layers.size-1&&(n?.(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},h),k.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(vP=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),_P(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=vP)}},[u,h,r,c]),k.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),_P())},[u,c]),k.useEffect(()=>{const T=()=>f({});return document.addEventListener(cS,T),()=>document.removeEventListener(cS,T)},[]),p.jsx(Ft.div,{...l,ref:b,style:{pointerEvents:_?x?"auto":"none":void 0,...t.style},onFocusCapture:it(t.onFocusCapture,S.onFocusCapture),onBlurCapture:it(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:it(t.onPointerDownCapture,w.onPointerDownCapture)})});Hp.displayName=Ute;var Wte="DismissableLayerBranch",Vte=k.forwardRef((t,e)=>{const r=k.useContext(J5),n=k.useRef(null),s=Sr(e,n);return k.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),p.jsx(Ft.div,{...t,ref:s})});Vte.displayName=Wte;function Gte(t,e=globalThis?.document){const r=So(t),n=k.useRef(!1),s=k.useRef(()=>{});return k.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){Z5(Hte,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function qte(t,e=globalThis?.document){const r=So(t),n=k.useRef(!1);return k.useEffect(()=>{const s=i=>{i.target&&!n.current&&Z5(zte,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function _P(){const t=new CustomEvent(cS);document.dispatchEvent(t)}function Z5(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?X5(s,i):s.dispatchEvent(i)}var Z_="focusScope.autoFocusOnMount",Q_="focusScope.autoFocusOnUnmount",xP={bubbles:!1,cancelable:!0},Kte="FocusScope",dv=k.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=k.useState(null),c=So(s),u=So(i),d=k.useRef(null),h=Sr(e,m=>l(m)),f=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(n){let m=function(_){if(f.paused||!a)return;const x=_.target;a.contains(x)?d.current=x:Ra(d.current,{select:!0})},g=function(_){if(f.paused||!a)return;const x=_.relatedTarget;x!==null&&(a.contains(x)||Ra(d.current,{select:!0}))},y=function(_){if(document.activeElement===document.body)for(const w of _)w.removedNodes.length>0&&Ra(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const v=new MutationObserver(y);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),v.disconnect()}}},[n,a,f.paused]),k.useEffect(()=>{if(a){SP.add(f);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(Z_,xP);a.addEventListener(Z_,c),a.dispatchEvent(y),y.defaultPrevented||(Yte(ere(Q5(a)),{select:!0}),document.activeElement===m&&Ra(a))}return()=>{a.removeEventListener(Z_,c),setTimeout(()=>{const y=new CustomEvent(Q_,xP);a.addEventListener(Q_,u),a.dispatchEvent(y),y.defaultPrevented||Ra(m??document.body,{select:!0}),a.removeEventListener(Q_,u),SP.remove(f)},0)}}},[a,c,u,f]);const b=k.useCallback(m=>{if(!r&&!n||f.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(g&&y){const v=m.currentTarget,[_,x]=Xte(v);_&&x?!m.shiftKey&&y===x?(m.preventDefault(),r&&Ra(_,{select:!0})):m.shiftKey&&y===_&&(m.preventDefault(),r&&Ra(x,{select:!0})):y===v&&m.preventDefault()}},[r,n,f.paused]);return p.jsx(Ft.div,{tabIndex:-1,...o,ref:h,onKeyDown:b})});dv.displayName=Kte;function Yte(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Ra(n,{select:e}),document.activeElement!==r)return}function Xte(t){const e=Q5(t),r=wP(e,t),n=wP(e.reverse(),t);return[r,n]}function Q5(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function wP(t,e){for(const r of t)if(!Jte(r,{upTo:e}))return r}function Jte(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Zte(t){return t instanceof HTMLInputElement&&"select"in t}function Ra(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&Zte(t)&&e&&t.select()}}var SP=Qte();function Qte(){let t=[];return{add(e){const r=t[0];e!==r&&r?.pause(),t=EP(t,e),t.unshift(e)},remove(e){t=EP(t,e),t[0]?.resume()}}}function EP(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function ere(t){return t.filter(e=>e.tagName!=="A")}var tre="Portal",zp=k.forwardRef((t,e)=>{const{container:r,...n}=t,[s,i]=k.useState(!1);ra(()=>i(!0),[]);const o=r||s&&globalThis?.document?.body;return o?fK.createPortal(p.jsx(Ft.div,{...n,ref:e}),o):null});zp.displayName=tre;function rre(t,e){return k.useReducer((r,n)=>e[r][n]??r,t)}var Jn=t=>{const{present:e,children:r}=t,n=nre(e),s=typeof r=="function"?r({present:n.isPresent}):k.Children.only(r),i=Sr(n.ref,sre(s));return typeof r=="function"||n.isPresent?k.cloneElement(s,{ref:i}):null};Jn.displayName="Presence";function nre(t){const[e,r]=k.useState(),n=k.useRef(null),s=k.useRef(t),i=k.useRef("none"),o=t?"mounted":"unmounted",[a,l]=rre(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const c=ng(n.current);i.current=a==="mounted"?c:"none"},[a]),ra(()=>{const c=n.current,u=s.current;if(u!==t){const h=i.current,f=ng(c);t?l("MOUNT"):f==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),ra(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=f=>{const m=ng(n.current).includes(CSS.escape(f.animationName));if(f.target===e&&m&&(l("ANIMATION_END"),!s.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},h=f=>{f.target===e&&(i.current=ng(n.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:k.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function ng(t){return t?.animationName||"none"}function sre(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var ex=0;function ET(){k.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??CP()),document.body.insertAdjacentElement("beforeend",t[1]??CP()),ex++,()=>{ex===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ex--}},[])}function CP(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var to=function(){return to=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},to.apply(this,arguments)};function e4(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function ire(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var R0="right-scroll-bar-position",P0="width-before-scroll-bar",ore="with-scroll-bars-hidden",are="--removed-body-scroll-bar-size";function tx(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function lre(t,e){var r=k.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var cre=typeof window<"u"?k.useLayoutEffect:k.useEffect,TP=new WeakMap;function ure(t,e){var r=lre(null,function(n){return t.forEach(function(s){return tx(s,n)})});return cre(function(){var n=TP.get(r);if(n){var s=new Set(n),i=new Set(t),o=r.current;s.forEach(function(a){i.has(a)||tx(a,null)}),i.forEach(function(a){s.has(a)||tx(a,o)})}TP.set(r,t)},[t]),r}function dre(t){return t}function hre(t,e){e===void 0&&(e=dre);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=e(i,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(a){return i(a)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(i),o=r}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),r}}}};return s}function fre(t){t===void 0&&(t={});var e=hre(null);return e.options=to({async:!0,ssr:!1},t),e}var t4=function(t){var e=t.sideCar,r=e4(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return k.createElement(n,to({},r))};t4.isSideCarExport=!0;function pre(t,e){return t.useMedium(e),t4}var r4=fre(),rx=function(){},hv=k.forwardRef(function(t,e){var r=k.useRef(null),n=k.useState({onScrollCapture:rx,onWheelCapture:rx,onTouchMoveCapture:rx}),s=n[0],i=n[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,f=t.noRelative,b=t.noIsolation,m=t.inert,g=t.allowPinchZoom,y=t.as,v=y===void 0?"div":y,_=t.gapMode,x=e4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,S=ure([r,e]),T=to(to({},x),s);return k.createElement(k.Fragment,null,u&&k.createElement(w,{sideCar:r4,removeScrollBar:c,shards:d,noRelative:f,noIsolation:b,inert:m,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:_}),o?k.cloneElement(k.Children.only(a),to(to({},T),{ref:S})):k.createElement(v,to({},T,{className:l,ref:S}),a))});hv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hv.classNames={fullWidth:P0,zeroRight:R0};var mre=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gre(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=mre();return e&&t.setAttribute("nonce",e),t}function bre(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function yre(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var vre=function(){var t=0,e=null;return{add:function(r){t==0&&(e=gre())&&(bre(e,r),yre(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},_re=function(){var t=vre();return function(e,r){k.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},n4=function(){var t=_re(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},xre={left:0,top:0,right:0,gap:0},nx=function(t){return parseInt(t||"",10)||0},wre=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[nx(r),nx(n),nx(s)]},Sre=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return xre;var e=wre(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},Ere=n4(),Fu="data-scroll-locked",Cre=function(t,e,r,n){var s=t.left,i=t.top,o=t.right,a=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(ore,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Fu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(R0,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(P0,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(R0," .").concat(R0,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(P0," .").concat(P0,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Fu,`] {
    `).concat(are,": ").concat(a,`px;
  }
`)},kP=function(){var t=parseInt(document.body.getAttribute(Fu)||"0",10);return isFinite(t)?t:0},Tre=function(){k.useEffect(function(){return document.body.setAttribute(Fu,(kP()+1).toString()),function(){var t=kP()-1;t<=0?document.body.removeAttribute(Fu):document.body.setAttribute(Fu,t.toString())}},[])},kre=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;Tre();var i=k.useMemo(function(){return Sre(s)},[s]);return k.createElement(Ere,{styles:Cre(i,!e,s,r?"":"!important")})},uS=!1;if(typeof window<"u")try{var sg=Object.defineProperty({},"passive",{get:function(){return uS=!0,!0}});window.addEventListener("test",sg,sg),window.removeEventListener("test",sg,sg)}catch{uS=!1}var Zc=uS?{passive:!1}:!1,Are=function(t){return t.tagName==="TEXTAREA"},s4=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!Are(t)&&r[e]==="visible")},Rre=function(t){return s4(t,"overflowY")},Pre=function(t){return s4(t,"overflowX")},AP=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=i4(t,n);if(s){var i=o4(t,n),o=i[1],a=i[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Ire=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},Nre=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},i4=function(t,e){return t==="v"?Rre(e):Pre(e)},o4=function(t,e){return t==="v"?Ire(e):Nre(e)},Dre=function(t,e){return t==="h"&&e==="rtl"?-1:1},Ore=function(t,e,r,n,s){var i=Dre(t,window.getComputedStyle(e).direction),o=i*n,a=r.target,l=e.contains(a),c=!1,u=o>0,d=0,h=0;do{if(!a)break;var f=o4(t,a),b=f[0],m=f[1],g=f[2],y=m-g-i*b;(b||y)&&i4(t,a)&&(d+=y,h+=b);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},ig=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},RP=function(t){return[t.deltaX,t.deltaY]},PP=function(t){return t&&"current"in t?t.current:t},Lre=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Mre=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},jre=0,Qc=[];function Fre(t){var e=k.useRef([]),r=k.useRef([0,0]),n=k.useRef(),s=k.useState(jre++)[0],i=k.useState(n4)[0],o=k.useRef(t);k.useEffect(function(){o.current=t},[t]),k.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=ire([t.lockRef.current],(t.shards||[]).map(PP),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=k.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=ig(m),v=r.current,_="deltaX"in m?m.deltaX:v[0]-y[0],x="deltaY"in m?m.deltaY:v[1]-y[1],w,S=m.target,T=Math.abs(_)>Math.abs(x)?"h":"v";if("touches"in m&&T==="h"&&S.type==="range")return!1;var E=window.getSelection(),C=E&&E.anchorNode,A=C?C===S||C.contains(S):!1;if(A)return!1;var I=AP(T,S);if(!I)return!0;if(I?w=T:(w=T==="v"?"h":"v",I=AP(T,S)),!I)return!1;if(!n.current&&"changedTouches"in m&&(_||x)&&(n.current=w),!w)return!0;var P=n.current||w;return Ore(P,g,m,P==="h"?_:x)},[]),l=k.useCallback(function(m){var g=m;if(!(!Qc.length||Qc[Qc.length-1]!==i)){var y="deltaY"in g?RP(g):ig(g),v=e.current.filter(function(w){return w.name===g.type&&(w.target===g.target||g.target===w.shadowParent)&&Lre(w.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(PP).filter(Boolean).filter(function(w){return w.contains(g.target)}),x=_.length>0?a(g,_[0]):!o.current.noIsolation;x&&g.cancelable&&g.preventDefault()}}},[]),c=k.useCallback(function(m,g,y,v){var _={name:m,delta:g,target:y,should:v,shadowParent:Bre(y)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(x){return x!==_})},1)},[]),u=k.useCallback(function(m){r.current=ig(m),n.current=void 0},[]),d=k.useCallback(function(m){c(m.type,RP(m),m.target,a(m,t.lockRef.current))},[]),h=k.useCallback(function(m){c(m.type,ig(m),m.target,a(m,t.lockRef.current))},[]);k.useEffect(function(){return Qc.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Zc),document.addEventListener("touchmove",l,Zc),document.addEventListener("touchstart",u,Zc),function(){Qc=Qc.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,Zc),document.removeEventListener("touchmove",l,Zc),document.removeEventListener("touchstart",u,Zc)}},[]);var f=t.removeScrollBar,b=t.inert;return k.createElement(k.Fragment,null,b?k.createElement(i,{styles:Mre(s)}):null,f?k.createElement(kre,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Bre(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const $re=pre(r4,Fre);var fv=k.forwardRef(function(t,e){return k.createElement(hv,to({},t,{ref:e,sideCar:$re}))});fv.classNames=hv.classNames;var Ure=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},eu=new WeakMap,og=new WeakMap,ag={},sx=0,a4=function(t){return t&&(t.host||a4(t.parentNode))},Hre=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=a4(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},zre=function(t,e,r,n){var s=Hre(e,Array.isArray(t)?t:[t]);ag[r]||(ag[r]=new WeakMap);var i=ag[r],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var f=h.getAttribute(n),b=f!==null&&f!=="false",m=(eu.get(h)||0)+1,g=(i.get(h)||0)+1;eu.set(h,m),i.set(h,g),o.push(h),m===1&&b&&og.set(h,!0),g===1&&h.setAttribute(r,"true"),b||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(e),a.clear(),sx++,function(){o.forEach(function(d){var h=eu.get(d)-1,f=i.get(d)-1;eu.set(d,h),i.set(d,f),h||(og.has(d)||d.removeAttribute(n),og.delete(d)),f||d.removeAttribute(r)}),sx--,sx||(eu=new WeakMap,eu=new WeakMap,og=new WeakMap,ag={})}},CT=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=Ure(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),zre(n,s,r,"aria-hidden")):function(){return null}},pv="Dialog",[l4]=ai(pv),[Wre,Pi]=l4(pv),c4=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=k.useRef(null),l=k.useRef(null),[c,u]=yl({prop:n,defaultProp:s??!1,onChange:i,caller:pv});return p.jsx(Wre,{scope:e,triggerRef:a,contentRef:l,contentId:yo(),titleId:yo(),descriptionId:yo(),open:c,onOpenChange:u,onOpenToggle:k.useCallback(()=>u(d=>!d),[u]),modal:o,children:r})};c4.displayName=pv;var u4="DialogTrigger",Vre=k.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Pi(u4,r),i=Sr(e,s.triggerRef);return p.jsx(Ft.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":AT(s.open),...n,ref:i,onClick:it(t.onClick,s.onOpenToggle)})});Vre.displayName=u4;var TT="DialogPortal",[Gre,d4]=l4(TT,{forceMount:void 0}),h4=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,i=Pi(TT,e);return p.jsx(Gre,{scope:e,forceMount:r,children:k.Children.map(n,o=>p.jsx(Jn,{present:r||i.open,children:p.jsx(zp,{asChild:!0,container:s,children:o})}))})};h4.displayName=TT;var xb="DialogOverlay",f4=k.forwardRef((t,e)=>{const r=d4(xb,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=Pi(xb,t.__scopeDialog);return i.modal?p.jsx(Jn,{present:n||i.open,children:p.jsx(Kre,{...s,ref:e})}):null});f4.displayName=xb;var qre=ld("DialogOverlay.RemoveScroll"),Kre=k.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Pi(xb,r);return p.jsx(fv,{as:qre,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(Ft.div,{"data-state":AT(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),pc="DialogContent",p4=k.forwardRef((t,e)=>{const r=d4(pc,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=Pi(pc,t.__scopeDialog);return p.jsx(Jn,{present:n||i.open,children:i.modal?p.jsx(Yre,{...s,ref:e}):p.jsx(Xre,{...s,ref:e})})});p4.displayName=pc;var Yre=k.forwardRef((t,e)=>{const r=Pi(pc,t.__scopeDialog),n=k.useRef(null),s=Sr(e,r.contentRef,n);return k.useEffect(()=>{const i=n.current;if(i)return CT(i)},[]),p.jsx(m4,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(t.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:it(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:it(t.onFocusOutside,i=>i.preventDefault())})}),Xre=k.forwardRef((t,e)=>{const r=Pi(pc,t.__scopeDialog),n=k.useRef(!1),s=k.useRef(!1);return p.jsx(m4,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),m4=k.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Pi(pc,r),l=k.useRef(null),c=Sr(e,l);return ET(),p.jsxs(p.Fragment,{children:[p.jsx(dv,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(Hp,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":AT(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(Jre,{titleId:a.titleId}),p.jsx(Qre,{contentRef:l,descriptionId:a.descriptionId})]})]})}),kT="DialogTitle",g4=k.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Pi(kT,r);return p.jsx(Ft.h2,{id:s.titleId,...n,ref:e})});g4.displayName=kT;var b4="DialogDescription",y4=k.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Pi(b4,r);return p.jsx(Ft.p,{id:s.descriptionId,...n,ref:e})});y4.displayName=b4;var v4="DialogClose",_4=k.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Pi(v4,r);return p.jsx(Ft.button,{type:"button",...n,ref:e,onClick:it(t.onClick,()=>s.onOpenChange(!1))})});_4.displayName=v4;function AT(t){return t?"open":"closed"}var x4="DialogTitleWarning",[qBe,w4]=kte(x4,{contentName:pc,titleName:kT,docsSlug:"dialog"}),Jre=({titleId:t})=>{const e=w4(x4),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Zre="DialogDescriptionWarning",Qre=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${w4(Zre).contentName}}.`;return k.useEffect(()=>{const s=t.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},Ii=c4,mv=h4,gv=f4,bv=p4,RT=g4,PT=y4,Bf=_4;const Dn=Oc(.8,0,.2,1);function $f(){return $f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$f.apply(null,arguments)}function IP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dS(t,e){return dS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},dS(t,e)}function ene(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,dS(t,e)}var NP=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function tne(t,e){return!!(t===e||NP(t)&&NP(e))}function rne(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!tne(t[r],e[r]))return!1;return!0}function ix(t,e){e===void 0&&(e=rne);var r,n=[],s,i=!1;function o(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return i&&r===this&&e(a,n)||(s=t.apply(this,a),i=!0,r=this,n=a),s}return o}var nne=typeof performance=="object"&&typeof performance.now=="function",DP=nne?function(){return performance.now()}:function(){return Date.now()};function OP(t){cancelAnimationFrame(t.id)}function sne(t,e){var r=DP();function n(){DP()-r>=e?t.call(null):s.id=requestAnimationFrame(n)}var s={id:requestAnimationFrame(n)};return s}var ox=-1;function LP(t){if(t===void 0&&(t=!1),ox===-1||t){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(e),ox=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return ox}var tu=null;function MP(t){if(t===void 0&&(t=!1),tu===null||t){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),s=n.style;return s.width="100px",s.height="100px",e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?tu="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?tu="negative":tu="positive-ascending"),document.body.removeChild(e),tu}return tu}var ine=150,one=function(e,r){return e},I0=null,N0=null;typeof window<"u"&&typeof window.WeakSet<"u"&&(I0=new WeakSet,N0=new WeakSet);function ane(t){var e,r=t.getItemOffset,n=t.getEstimatedTotalSize,s=t.getItemSize,i=t.getOffsetForIndexAndAlignment,o=t.getStartIndexForOffset,a=t.getStopIndexForStartIndex,l=t.initInstanceProps,c=t.shouldResetStyleCacheOnItemSizeChange,u=t.validateProps;return e=function(d){ene(h,d);function h(b){var m;return m=d.call(this,b)||this,m._instanceProps=l(m.props,IP(m)),m._outerRef=void 0,m._resetIsScrollingTimeoutId=null,m.state={instance:IP(m),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof m.props.initialScrollOffset=="number"?m.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},m._callOnItemsRendered=void 0,m._callOnItemsRendered=ix(function(g,y,v,_){return m.props.onItemsRendered({overscanStartIndex:g,overscanStopIndex:y,visibleStartIndex:v,visibleStopIndex:_})}),m._callOnScroll=void 0,m._callOnScroll=ix(function(g,y,v){return m.props.onScroll({scrollDirection:g,scrollOffset:y,scrollUpdateWasRequested:v})}),m._getItemStyle=void 0,m._getItemStyle=function(g){var y=m.props,v=y.direction,_=y.itemSize,x=y.layout,w=m._getItemStyleCache(c&&_,c&&x,c&&v),S;if(w.hasOwnProperty(g))S=w[g];else{var T=r(m.props,g,m._instanceProps),E=s(m.props,g,m._instanceProps),C=v==="horizontal"||x==="horizontal",A=v==="rtl",I=C?T:0;w[g]=S={position:"absolute",left:A?void 0:I,right:A?I:void 0,top:C?0:T,height:C?"100%":E,width:C?E:"100%"}}return S},m._getItemStyleCache=void 0,m._getItemStyleCache=ix(function(g,y,v){return{}}),m._onScrollHorizontal=function(g){var y=g.currentTarget,v=y.clientWidth,_=y.scrollLeft,x=y.scrollWidth;m.setState(function(w){if(w.scrollOffset===_)return null;var S=m.props.direction,T=_;if(S==="rtl")switch(MP()){case"negative":T=-_;break;case"positive-descending":T=x-v-_;break}return T=Math.max(0,Math.min(T,x-v)),{isScrolling:!0,scrollDirection:w.scrollOffset<T?"forward":"backward",scrollOffset:T,scrollUpdateWasRequested:!1}},m._resetIsScrollingDebounced)},m._onScrollVertical=function(g){var y=g.currentTarget,v=y.clientHeight,_=y.scrollHeight,x=y.scrollTop;m.setState(function(w){if(w.scrollOffset===x)return null;var S=Math.max(0,Math.min(x,_-v));return{isScrolling:!0,scrollDirection:w.scrollOffset<S?"forward":"backward",scrollOffset:S,scrollUpdateWasRequested:!1}},m._resetIsScrollingDebounced)},m._outerRefSetter=function(g){var y=m.props.outerRef;m._outerRef=g,typeof y=="function"?y(g):y!=null&&typeof y=="object"&&y.hasOwnProperty("current")&&(y.current=g)},m._resetIsScrollingDebounced=function(){m._resetIsScrollingTimeoutId!==null&&OP(m._resetIsScrollingTimeoutId),m._resetIsScrollingTimeoutId=sne(m._resetIsScrolling,ine)},m._resetIsScrolling=function(){m._resetIsScrollingTimeoutId=null,m.setState({isScrolling:!1},function(){m._getItemStyleCache(-1,null)})},m}h.getDerivedStateFromProps=function(m,g){return lne(m,g),u(m),null};var f=h.prototype;return f.scrollTo=function(m){m=Math.max(0,m),this.setState(function(g){return g.scrollOffset===m?null:{scrollDirection:g.scrollOffset<m?"forward":"backward",scrollOffset:m,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},f.scrollToItem=function(m,g){g===void 0&&(g="auto");var y=this.props,v=y.itemCount,_=y.layout,x=this.state.scrollOffset;m=Math.max(0,Math.min(m,v-1));var w=0;if(this._outerRef){var S=this._outerRef;_==="vertical"?w=S.scrollWidth>S.clientWidth?LP():0:w=S.scrollHeight>S.clientHeight?LP():0}this.scrollTo(i(this.props,m,g,x,this._instanceProps,w))},f.componentDidMount=function(){var m=this.props,g=m.direction,y=m.initialScrollOffset,v=m.layout;if(typeof y=="number"&&this._outerRef!=null){var _=this._outerRef;g==="horizontal"||v==="horizontal"?_.scrollLeft=y:_.scrollTop=y}this._callPropsCallbacks()},f.componentDidUpdate=function(){var m=this.props,g=m.direction,y=m.layout,v=this.state,_=v.scrollOffset,x=v.scrollUpdateWasRequested;if(x&&this._outerRef!=null){var w=this._outerRef;if(g==="horizontal"||y==="horizontal")if(g==="rtl")switch(MP()){case"negative":w.scrollLeft=-_;break;case"positive-ascending":w.scrollLeft=_;break;default:var S=w.clientWidth,T=w.scrollWidth;w.scrollLeft=T-S-_;break}else w.scrollLeft=_;else w.scrollTop=_}this._callPropsCallbacks()},f.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&OP(this._resetIsScrollingTimeoutId)},f.render=function(){var m=this.props,g=m.children,y=m.className,v=m.direction,_=m.height,x=m.innerRef,w=m.innerElementType,S=m.innerTagName,T=m.itemCount,E=m.itemData,C=m.itemKey,A=C===void 0?one:C,I=m.layout,P=m.outerElementType,D=m.outerTagName,R=m.style,F=m.useIsScrolling,G=m.width,z=this.state.isScrolling,K=v==="horizontal"||I==="horizontal",L=K?this._onScrollHorizontal:this._onScrollVertical,O=this._getRangeToRender(),$=O[0],H=O[1],U=[];if(T>0)for(var ee=$;ee<=H;ee++)U.push(k.createElement(g,{data:E,key:A(ee,E),index:ee,isScrolling:F?z:void 0,style:this._getItemStyle(ee)}));var X=n(this.props,this._instanceProps);return k.createElement(P||D||"div",{className:y,onScroll:L,ref:this._outerRefSetter,style:$f({position:"relative",height:_,width:G,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:v},R)},k.createElement(w||S||"div",{children:U,ref:x,style:{height:K?"100%":X,pointerEvents:z?"none":void 0,width:K?X:"100%"}}))},f._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var m=this.props.itemCount;if(m>0){var g=this._getRangeToRender(),y=g[0],v=g[1],_=g[2],x=g[3];this._callOnItemsRendered(y,v,_,x)}}if(typeof this.props.onScroll=="function"){var w=this.state,S=w.scrollDirection,T=w.scrollOffset,E=w.scrollUpdateWasRequested;this._callOnScroll(S,T,E)}},f._getRangeToRender=function(){var m=this.props,g=m.itemCount,y=m.overscanCount,v=this.state,_=v.isScrolling,x=v.scrollDirection,w=v.scrollOffset;if(g===0)return[0,0,0,0];var S=o(this.props,w,this._instanceProps),T=a(this.props,S,w,this._instanceProps),E=!_||x==="backward"?Math.max(1,y):1,C=!_||x==="forward"?Math.max(1,y):1;return[Math.max(0,S-E),Math.max(0,Math.min(g-1,T+C)),S,T]},h}(k.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var lne=function(e,r){var n=e.children,s=e.direction,i=e.height,o=e.layout,a=e.innerTagName,l=e.outerTagName,c=e.width,u=r.instance;{(a!=null||l!=null)&&N0&&!N0.has(u)&&(N0.add(u),console.warn("The innerTagName and outerTagName props have been deprecated. Please use the innerElementType and outerElementType props instead."));var d=s==="horizontal"||o==="horizontal";switch(s){case"horizontal":case"vertical":I0&&!I0.has(u)&&(I0.add(u),console.warn('The direction prop should be either "ltr" (default) or "rtl". Please use the layout prop to specify "vertical" (default) or "horizontal" orientation.'));break;case"ltr":case"rtl":break;default:throw Error('An invalid "direction" prop has been specified. Value should be either "ltr" or "rtl". '+('"'+s+'" was specified.'))}switch(o){case"horizontal":case"vertical":break;default:throw Error('An invalid "layout" prop has been specified. Value should be either "horizontal" or "vertical". '+('"'+o+'" was specified.'))}if(n==null)throw Error('An invalid "children" prop has been specified. Value should be a React component. '+('"'+(n===null?"null":typeof n)+'" was specified.'));if(d&&typeof c!="number")throw Error('An invalid "width" prop has been specified. Horizontal lists must specify a number for width. '+('"'+(c===null?"null":typeof c)+'" was specified.'));if(!d&&typeof i!="number")throw Error('An invalid "height" prop has been specified. Vertical lists must specify a number for height. '+('"'+(i===null?"null":typeof i)+'" was specified.'))}},cne=ane({getItemOffset:function(e,r){var n=e.itemSize;return r*n},getItemSize:function(e,r){var n=e.itemSize;return n},getEstimatedTotalSize:function(e){var r=e.itemCount,n=e.itemSize;return n*r},getOffsetForIndexAndAlignment:function(e,r,n,s,i,o){var a=e.direction,l=e.height,c=e.itemCount,u=e.itemSize,d=e.layout,h=e.width,f=a==="horizontal"||d==="horizontal",b=f?h:l,m=Math.max(0,c*u-b),g=Math.min(m,r*u),y=Math.max(0,r*u-b+u+o);switch(n==="smart"&&(s>=y-b&&s<=g+b?n="auto":n="center"),n){case"start":return g;case"end":return y;case"center":{var v=Math.round(y+(g-y)/2);return v<Math.ceil(b/2)?0:v>m+Math.floor(b/2)?m:v}case"auto":default:return s>=y&&s<=g?s:s<y?y:g}},getStartIndexForOffset:function(e,r){var n=e.itemCount,s=e.itemSize;return Math.max(0,Math.min(n-1,Math.floor(r/s)))},getStopIndexForStartIndex:function(e,r,n){var s=e.direction,i=e.height,o=e.itemCount,a=e.itemSize,l=e.layout,c=e.width,u=s==="horizontal"||l==="horizontal",d=r*a,h=u?c:i,f=Math.ceil((h+n-d)/a);return Math.max(0,Math.min(o-1,r+f-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){var r=e.itemSize;if(typeof r!="number")throw Error('An invalid "itemSize" prop has been specified. Value should be a number. '+('"'+(r===null?"null":typeof r)+'" was specified.'))}});function une(t){const e=k.useRef({value:t,previous:t});return k.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function S4(t){const[e,r]=k.useState(void 0);return ra(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;r({width:o,height:a})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var yv="Checkbox",[dne]=ai(yv),[hne,IT]=dne(yv);function fne(t){const{__scopeCheckbox:e,checked:r,children:n,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=t,[h,f]=yl({prop:r,defaultProp:s??!1,onChange:l,caller:yv}),[b,m]=k.useState(null),[g,y]=k.useState(null),v=k.useRef(!1),_=b?!!o||!!b.closest("form"):!0,x={checked:h,disabled:i,setChecked:f,control:b,setControl:m,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:v,required:c,defaultChecked:Ya(s)?!1:s,isFormControl:_,bubbleInput:g,setBubbleInput:y};return p.jsx(hne,{scope:e,...x,children:pne(d)?d(x):n})}var E4="CheckboxTrigger",C4=k.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:r,...n},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:f,bubbleInput:b}=IT(E4,t),m=Sr(s,u),g=k.useRef(l);return k.useEffect(()=>{const y=i?.form;if(y){const v=()=>d(g.current);return y.addEventListener("reset",v),()=>y.removeEventListener("reset",v)}},[i,d]),p.jsx(Ft.button,{type:"button",role:"checkbox","aria-checked":Ya(l)?"mixed":l,"aria-required":c,"data-state":I4(l),"data-disabled":a?"":void 0,disabled:a,value:o,...n,ref:m,onKeyDown:it(e,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:it(r,y=>{d(v=>Ya(v)?!0:!v),b&&f&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});C4.displayName=E4;var T4=k.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...d}=t;return p.jsx(fne,{__scopeCheckbox:r,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:n,form:u,value:l,internal_do_not_use_render:({isFormControl:h})=>p.jsxs(p.Fragment,{children:[p.jsx(C4,{...d,ref:e,__scopeCheckbox:r}),h&&p.jsx(P4,{__scopeCheckbox:r})]})})});T4.displayName=yv;var k4="CheckboxIndicator",A4=k.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...s}=t,i=IT(k4,r);return p.jsx(Jn,{present:n||Ya(i.checked)||i.checked===!0,children:p.jsx(Ft.span,{"data-state":I4(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});A4.displayName=k4;var R4="CheckboxBubbleInput",P4=k.forwardRef(({__scopeCheckbox:t,...e},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:d,bubbleInput:h,setBubbleInput:f}=IT(R4,t),b=Sr(r,f),m=une(i),g=S4(n);k.useEffect(()=>{const v=h;if(!v)return;const _=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(_,"checked").set,S=!s.current;if(m!==i&&w){const T=new Event("click",{bubbles:S});v.indeterminate=Ya(i),w.call(v,Ya(i)?!1:i),v.dispatchEvent(T)}},[h,m,i,s]);const y=k.useRef(Ya(i)?!1:i);return p.jsx(Ft.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:a,disabled:l,name:c,value:u,form:d,...e,tabIndex:-1,ref:b,style:{...e.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});P4.displayName=R4;function pne(t){return typeof t=="function"}function Ya(t){return t==="indeterminate"}function I4(t){return Ya(t)?"indeterminate":t?"checked":"unchecked"}const Uf=k.forwardRef(({className:t,...e},r)=>p.jsx(T4,{ref:r,className:ye("peer h-4 w-4 shrink-0 rounded-sm border transition-colors","bg-transparent dark:bg-transparent","border-gray-400 dark:border-gray-600","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:ring-blue-500 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-950","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-blue-600 dark:data-[state=checked]:bg-blue-600","data-[state=checked]:border-blue-600 dark:data-[state=checked]:border-blue-600","data-[state=checked]:text-white",t),...e,children:p.jsx(A4,{className:"flex items-center justify-center text-current",children:p.jsx("div",{className:"i-ph:check h-3 w-3"})})}));Uf.displayName="Checkbox";var mne=Symbol.for("react.lazy"),wb=Qy[" use ".trim().toString()];function gne(t){return typeof t=="object"&&t!==null&&"then"in t}function N4(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===mne&&"_payload"in t&&gne(t._payload)}function bne(t){const e=yne(t),r=k.forwardRef((n,s)=>{let{children:i,...o}=n;N4(i)&&typeof wb=="function"&&(i=wb(i._payload));const a=k.Children.toArray(i),l=a.find(_ne);if(l){const c=l.props.children,u=a.map(d=>d===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:d);return p.jsx(e,{...o,ref:s,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return p.jsx(e,{...o,ref:s,children:i})});return r.displayName=`${t}.Slot`,r}function yne(t){const e=k.forwardRef((r,n)=>{let{children:s,...i}=r;if(N4(s)&&typeof wb=="function"&&(s=wb(s._payload)),k.isValidElement(s)){const o=wne(s),a=xne(i,s.props);return s.type!==k.Fragment&&(a.ref=n?Up(n,o):o),k.cloneElement(s,a)}return k.Children.count(s)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var vne=Symbol("radix.slottable");function _ne(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===vne}function xne(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function wne(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Sne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],D4=Sne.reduce((t,e)=>{const r=bne(`Primitive.${e}`),n=k.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),Ene="Label",O4=k.forwardRef((t,e)=>p.jsx(D4.label,{...t,ref:e,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));O4.displayName=Ene;var L4=O4;const M4=k.forwardRef(({className:t,...e},r)=>p.jsx(L4,{ref:r,className:ye("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));M4.displayName=L4.displayName;const Ha=k.memo(({type:t,children:e,onClick:r,disabled:n})=>p.jsx("button",{className:ye("inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-colors",t==="primary"?"bg-bolt-elements-button-primary-background text-bolt-elements-button-primary-text hover:bg-bolt-elements-button-primary-backgroundHover":t==="secondary"?"bg-transparent text-bolt-elements-textSecondary hover:bg-bolt-elements-item-backgroundActive hover:text-bolt-elements-textPrimary":"bg-transparent text-bolt-elements-button-danger-text hover:bg-bolt-elements-button-danger-background/10"),onClick:r,disabled:n,children:e})),Ci=k.memo(({className:t,children:e,...r})=>p.jsx(RT,{className:ye("text-lg font-medium text-bolt-elements-textPrimary flex items-center gap-2",t),...r,children:e})),mc=k.memo(({className:t,children:e,...r})=>p.jsx(PT,{className:ye("text-sm text-bolt-elements-textSecondary mt-1",t),...r,children:e})),Sb={duration:.15,ease:Dn},NT={closed:{opacity:0,transition:Sb},open:{opacity:1,transition:Sb}},j4={closed:{x:"-50%",y:"-40%",scale:.96,opacity:0,transition:Sb},open:{x:"-50%",y:"-50%",scale:1,opacity:1,transition:Sb}},vl=k.memo(({children:t,className:e,showCloseButton:r=!0,onClose:n,onBackdrop:s})=>p.jsxs(mv,{children:[p.jsx(gv,{asChild:!0,children:p.jsx(rt.div,{className:ye("fixed inset-0 z-[9999] bg-black/70 dark:bg-black/80 backdrop-blur-sm"),initial:"closed",animate:"open",exit:"closed",variants:NT,onClick:s})}),p.jsx(bv,{asChild:!0,children:p.jsx(rt.div,{className:ye("fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-bolt-elements-bg-depth-1 rounded-xl shadow-xl border border-bolt-elements-borderColor z-[9999] w-[520px] focus:outline-none acrylic-surface",e),initial:"closed",animate:"open",exit:"closed",variants:j4,children:p.jsxs("div",{className:"flex flex-col",children:[t,r&&p.jsx(Bf,{asChild:!0,onClick:n,children:p.jsx(Kt,{icon:"i-ph:x",className:"absolute top-3 right-3 text-bolt-elements-textTertiary hover:text-bolt-elements-textSecondary"})})]})})})]}));function KBe({isOpen:t,onClose:e,title:r,description:n,confirmLabel:s="Confirm",cancelLabel:i="Cancel",variant:o="default",isLoading:a=!1,onConfirm:l}){return p.jsx(Ii,{open:t,onOpenChange:e,children:p.jsx(vl,{showCloseButton:!1,children:p.jsxs("div",{className:"p-6 bg-bolt-elements-bg-depth-1 relative z-10",children:[p.jsx(Ci,{children:r}),p.jsx(mc,{className:"mb-4",children:n}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx(Rt,{variant:"outline",onClick:e,disabled:a,type:"button",children:i}),p.jsx(Rt,{variant:o,onClick:l,disabled:a,type:"button",children:a?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph-spinner-gap-bold animate-spin w-4 h-4 mr-2"}),s]}):s})]})]})})})}function YBe({title:t,items:e,isOpen:r,onClose:n,onConfirm:s,confirmLabel:i="Confirm",maxHeight:o="60vh"}){const[a,l]=k.useState([]),[c,u]=k.useState(!1);k.useEffect(()=>{r&&(l([]),u(!1))},[r]);const d=g=>{l(y=>y.includes(g)?y.filter(v=>v!==g):[...y,g])},h=()=>{a.length===e.length?(l([]),u(!1)):(l(e.map(g=>g.id)),u(!0))},f=()=>{s(a),n()},b=Math.min(e.length*60,parseInt(o.replace("vh",""))*window.innerHeight*.01-40),m=({index:g,style:y})=>{const v=e[g];return p.jsxs("div",{className:ye("flex items-start space-x-3 p-2 rounded-md transition-colors w-full box-border",a.includes(v.id)?"bg-bolt-elements-item-backgroundAccent":"bg-bolt-elements-bg-depth-2 hover:bg-bolt-elements-item-backgroundActive"),style:y,children:[p.jsx(Uf,{id:`item-${v.id}`,checked:a.includes(v.id),onCheckedChange:()=>d(v.id)}),p.jsxs("div",{className:"grid gap-1.5 leading-none",children:[p.jsx(M4,{htmlFor:`item-${v.id}`,className:ye("text-sm font-medium cursor-pointer",a.includes(v.id)?"text-bolt-elements-item-contentAccent":"text-bolt-elements-textPrimary"),children:v.label}),v.description&&p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary",children:v.description})]})]},v.id)};return p.jsx(Ii,{open:r,onOpenChange:n,children:p.jsx(vl,{showCloseButton:!1,children:p.jsxs("div",{className:"p-6 bg-bolt-elements-bg-depth-1 relative z-10",children:[p.jsx(Ci,{children:t}),p.jsxs(mc,{className:"mt-2 mb-4",children:["Select the items you want to include and click"," ",p.jsx("span",{className:"text-bolt-elements-item-contentAccent font-medium",children:i}),"."]}),p.jsxs("div",{className:"py-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("span",{className:"text-sm font-medium text-bolt-elements-textSecondary",children:[a.length," of ",e.length," selected"]}),p.jsx(Rt,{variant:"ghost",size:"sm",onClick:h,className:"text-xs h-8 px-2 text-bolt-elements-textPrimary hover:text-bolt-elements-item-contentAccent hover:bg-bolt-elements-item-backgroundAccent bg-bolt-elements-bg-depth-2 dark:bg-transparent",type:"button",children:c?"Deselect All":"Select All"})]}),p.jsx("div",{className:"pr-2 border rounded-md border-bolt-elements-borderColor bg-bolt-elements-bg-depth-2",style:{maxHeight:o||"400px"},children:e.length>0?p.jsx(cne,{height:b,width:"100%",itemCount:e.length,itemSize:60,className:"scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-bolt-elements-bg-depth-3",children:m}):p.jsx("div",{className:"text-center py-4 text-sm text-bolt-elements-textTertiary",children:"No items to display"})})]}),p.jsxs("div",{className:"flex justify-between mt-6",children:[p.jsx(Rt,{variant:"outline",onClick:n,className:"border-bolt-elements-borderColor text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive",type:"button",children:"Cancel"}),p.jsx(Rt,{onClick:f,disabled:a.length===0,className:"bg-accent-500 text-white hover:bg-accent-600 disabled:opacity-50 disabled:pointer-events-none",type:"button",children:i})]})]})})})}const Cne=k.memo(({className:t})=>{const e=He(If),[r,n]=k.useState(!1);return k.useEffect(()=>{n(!0)},[]),r&&p.jsx(Kt,{className:t,icon:e==="dark"?"i-ph-sun-dim-duotone":"i-ph-moon-stars-duotone",size:"xl",title:"Toggle Theme",onClick:WM})}),Tne=async()=>[{id:"feature-1",name:"Dark Mode",description:"Enable dark mode for better night viewing",viewed:!0,releaseDate:"2024-03-15"},{id:"feature-2",name:"Tab Management",description:"Customize your tab layout",viewed:!1,releaseDate:"2024-03-20"}],jP=async t=>{},F4="devonz_viewed_features",kne=()=>{try{const t=localStorage.getItem(F4);return t?JSON.parse(t):[]}catch{return[]}},FP=t=>{try{localStorage.setItem(F4,JSON.stringify(t))}catch(e){console.error("Failed to persist viewed features:",e)}},Ane=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState([]),[s,i]=k.useState(()=>kne());return k.useEffect(()=>{(async()=>{try{const u=(await Tne()).filter(d=>!s.includes(d.id));n(u),e(u.length>0)}catch(c){console.error("Failed to check for new features:",c)}})()},[s]),{hasNewFeatures:t,unviewedFeatures:r,acknowledgeFeature:async l=>{try{await jP(l);const c=[...s,l];i(c),FP(c),n(u=>u.filter(d=>d.id!==l)),e(r.length>1)}catch(c){console.error("Failed to acknowledge feature:",c)}},acknowledgeAllFeatures:async()=>{try{await Promise.all(r.map(c=>jP(c.id)));const l=[...s,...r.map(c=>c.id)];i(l),FP(l),n([]),e(!1)}catch(l){console.error("Failed to acknowledge all features:",l)}}}},BP=async()=>Object.values(Jt.logs.get()).filter(e=>e.category!=="system").map(e=>({id:e.id,title:e.details?.title||e.message.split(`
`)[0],message:e.message,type:e.level,timestamp:e.timestamp,read:Jt.isRead(e.id),details:e.details})).sort((e,r)=>new Date(r.timestamp).getTime()-new Date(e.timestamp).getTime()),$P=async t=>{Jt.markAsRead(t)},Rne=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState([]),s=He(Jt.logs),i=async()=>{try{const c=(await BP()).filter(u=>!Jt.isRead(u.id));n(c),e(c.length>0)}catch(l){console.error("Failed to check notifications:",l)}};return k.useEffect(()=>{i();const l=setInterval(i,60*1e3);return()=>clearInterval(l)},[s]),{hasUnreadNotifications:t,unreadNotifications:r,markAsRead:async l=>{try{await $P(l),await i()}catch(c){console.error("Failed to mark notification as read:",c)}},markAllAsRead:async()=>{try{const l=await BP();await Promise.all(l.map(c=>$P(c.id))),await i()}catch(l){console.error("Failed to mark all notifications as read:",l)}}}},Pne=async()=>{try{if(!navigator.onLine)return{connected:!1,latency:0,lastChecked:new Date().toISOString()};const e=["/api/health","/","/favicon.ico"];let r=0,n=!1;for(const s of e)try{const i=performance.now(),o=await fetch(s,{method:"HEAD",cache:"no-cache"}),a=performance.now();if(o.ok){r=Math.round(a-i),n=!0;break}}catch(i){console.debug(`Failed to connect to ${s}:`,i);continue}return{connected:n,latency:r,lastChecked:new Date().toISOString()}}catch(t){return console.error("Connection check failed:",t),{connected:!1,latency:0,lastChecked:new Date().toISOString()}}},Ine="devonz_acknowledged_connection_issue",Nne=()=>{try{return localStorage.getItem(Ine)}catch{return null}},Dne=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState(null),[s,i]=k.useState(()=>Nne()),o=async()=>{try{const c=await Pne(),u=c.connected?c.latency>1e3?"high-latency":null:"disconnected";n(u),e(u!==null&&u!==s)}catch(c){console.error("Failed to check connection:",c),n("disconnected"),e(!0)}};return k.useEffect(()=>{o();const c=setInterval(o,10*1e3);return()=>clearInterval(c)},[s]),{hasConnectionIssues:t,currentIssue:r,acknowledgeIssue:()=>{i(r),i(r),e(!1)},resetAcknowledgment:()=>{i(null),i(null),o()}}},Us=t=>({className:e})=>p.jsx("div",{className:ye(t,e)}),One=({className:t})=>p.jsx("svg",{viewBox:"0 0 24 24",className:ye("w-4 h-4",t),children:p.jsx("path",{fill:"currentColor",d:"M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"})}),Lne=({className:t})=>p.jsx("svg",{viewBox:"0 0 24 24",className:ye("w-4 h-4",t),children:p.jsx("path",{fill:"currentColor",d:"M12 2L2 19.777h20L12 2z"})}),Mne=({className:t})=>p.jsx("svg",{viewBox:"0 0 24 24",className:ye("w-4 h-4",t),children:p.jsx("path",{fill:"currentColor",d:"M16.934 8.519a1.044 1.044 0 0 1 .303-.23l2.349-1.045a.983.983 0 0 1 .905 0c.264.12.49.328.651.599l.518 1.065c.17.35.17.761 0 1.11l-.518 1.065a1.119 1.119 0 0 1-.651.599l-2.35 1.045a1.013 1.013 0 0 1-.904 0l-2.35-1.045a1.119 1.119 0 0 1-.651-.599L13.718 9.02a1.2 1.2 0 0 1 0-1.11l.518-1.065a1.119 1.119 0 0 1 .651-.599l2.35-1.045a.983.983 0 0 1 .697-.061zm-6.051 5.751a1.044 1.044 0 0 1 .303-.23l2.349-1.045a.983.983 0 0 1 .905 0c.264.12.49.328.651.599l.518 1.065c.17.35.17.761 0 1.11l-.518 1.065a1.119 1.119 0 0 1-.651.599l-2.35 1.045a1.013 1.013 0 0 1-.904 0l-2.35-1.045a1.119 1.119 0 0 1-.651-.599l-.518-1.065a1.2 1.2 0 0 1 0-1.11l.518-1.065a1.119 1.119 0 0 1 .651-.599l2.35-1.045a.983.983 0 0 1 .697-.061z"})}),jne=({className:t})=>p.jsx("svg",{viewBox:"0 0 24 24",className:ye("w-4 h-4",t),children:p.jsx("path",{fill:"currentColor",d:"M21.362 9.354H12V.396a.396.396 0 0 0-.716-.233L2.203 12.424l-.401.562a1.04 1.04 0 0 0 .836 1.659H12V21.6a.396.396 0 0 0 .716.233l9.081-12.261.401-.562a1.04 1.04 0 0 0-.836-1.656z"})}),Fne={profile:Us("i-ph:user"),settings:Us("i-ph:gear"),notifications:Us("i-ph:bell"),features:Us("i-ph:star"),data:Us("i-ph:database"),"cloud-providers":Us("i-ph:cloud"),"local-providers":Us("i-ph:laptop"),github:Us("i-ph:github-logo"),gitlab:One,netlify:Mne,vercel:Lne,supabase:jne,"event-logs":Us("i-ph:list"),mcp:Us("i-ph:wrench"),"project-memory":Us("i-ph:book-open"),orchestrator:Us("i-ph:share-network")},UP={profile:"Profile",settings:"Settings",notifications:"Notifications",features:"Features",data:"Data Management","cloud-providers":"Cloud Providers","local-providers":"Local Providers",github:"GitHub",gitlab:"GitLab",netlify:"Netlify",vercel:"Vercel",supabase:"Supabase","event-logs":"Event Logs",mcp:"MCP Servers","project-memory":"Project Memory",orchestrator:"Agent Orchestration"},B4=[{id:"features",visible:!0,window:"user",order:0},{id:"data",visible:!0,window:"user",order:1},{id:"orchestrator",visible:!0,window:"user",order:2},{id:"cloud-providers",visible:!0,window:"user",order:3},{id:"local-providers",visible:!0,window:"user",order:4},{id:"github",visible:!0,window:"user",order:5},{id:"gitlab",visible:!0,window:"user",order:6},{id:"netlify",visible:!0,window:"user",order:7},{id:"vercel",visible:!0,window:"user",order:8},{id:"supabase",visible:!0,window:"user",order:9},{id:"notifications",visible:!0,window:"user",order:10},{id:"event-logs",visible:!0,window:"user",order:11},{id:"mcp",visible:!0,window:"user",order:12},{id:"project-memory",visible:!0,window:"user",order:13}];class Bne{versions=js({});currentVersionId=bt(null);createVersion(e,r,n,s,i){const o=`ver-${this._generateShortId()}`,a=Date.now(),l=this.versions.get();for(const[u,d]of Object.entries(l))d.isLatest&&this.versions.setKey(u,{...d,isLatest:!1});const c={id:o,messageId:e,title:r,description:n,timestamp:a,files:s,thumbnail:i,isLatest:!0};return this.versions.setKey(o,c),this.currentVersionId.set(o),c}getAllVersions(){return Object.values(this.versions.get()).sort((r,n)=>n.timestamp-r.timestamp)}getVersion(e){return this.versions.get()[e]}getLatestVersion(){const e=this.getAllVersions();return e.find(r=>r.isLatest)||e[0]}restoreVersion(e){const r=this.getVersion(e);if(r)return this.currentVersionId.set(e),r}_generateShortId(){const e="abcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let n=0;n<8;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}formatRelativeTime(e){const n=Date.now()-e,s=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5),a=Math.floor(n/2592e6);return s<1?"Just now":s<60?`${s}m ago`:i<24?`${i}h ago`:o<30?`${o}d ago`:`${a}mo ago`}async capturePreviewThumbnail(){try{const{requestPreviewScreenshot:e}=await Z(async()=>{const{requestPreviewScreenshot:n}=await Promise.resolve().then(()=>Iwe);return{requestPreviewScreenshot:n}},void 0);return await e({width:320,height:200},5e3)||void 0}catch(e){return console.warn("Failed to capture preview thumbnail:",e),this._generateFallbackThumbnail()}}_generateFallbackThumbnail(){try{const n=document.createElement("canvas");n.width=320,n.height=200;const s=n.getContext("2d");if(!s)return;const i=s.createLinearGradient(0,0,0,200);i.addColorStop(0,"#1a1f2e"),i.addColorStop(1,"#0f1219"),s.fillStyle=i,s.fillRect(0,0,320,200),s.fillStyle="#252a38",s.fillRect(0,0,320,28),s.fillStyle="#ff5f57",s.beginPath(),s.arc(12,14,5,0,Math.PI*2),s.fill(),s.fillStyle="#febc2e",s.beginPath(),s.arc(28,14,5,0,Math.PI*2),s.fill(),s.fillStyle="#28c840",s.beginPath(),s.arc(44,14,5,0,Math.PI*2),s.fill(),s.fillStyle="#1a1f2e",s.roundRect(60,6,250,16,4),s.fill();const o=38;return s.fillStyle="#2d3548",s.fillRect(0,o,320,32),s.fillStyle="#3b82f6",s.beginPath(),s.roundRect(10,o+8,60,16,3),s.fill(),s.fillStyle="rgba(255,255,255,0.3)",s.fillRect(200,o+12,30,8),s.fillRect(240,o+12,30,8),s.fillRect(280,o+12,25,8),s.fillStyle="rgba(255,255,255,0.15)",s.fillRect(20,o+50,320*.6,20),s.fillStyle="rgba(255,255,255,0.08)",s.fillRect(20,o+78,320*.45,12),s.fillRect(20,o+95,320*.5,12),s.fillStyle="#3b82f6",s.beginPath(),s.roundRect(20,o+115,70,24,4),s.fill(),s.fillStyle="rgba(255,255,255,0.05)",s.beginPath(),s.roundRect(230,o+50,70,90,4),s.fill(),s.strokeStyle="rgba(255,255,255,0.08)",s.lineWidth=1,s.strokeRect(.5,.5,319,199),n.toDataURL("image/png",.8)}catch(e){console.warn("Failed to capture preview thumbnail:",e);return}}syncFromMessages(e){this.versions.set({}),this.currentVersionId.set(null);const r=/<boltArtifact[^>]*title="([^"]*)"[^>]*>/gi;let n=null;for(const s of e){if(s.role!=="assistant")continue;const o=[...(typeof s.content=="string"?s.content:"").matchAll(r)];if(o.length===0)continue;const a=o[0][1]||"Project Update",l=`ver-${this._generateShortId()}`,c=s.createdAt?new Date(s.createdAt).getTime():Date.now(),u={id:l,messageId:s.id,title:a,description:`From message: ${s.id.substring(0,8)}...`,timestamp:c,files:{},isLatest:!1};this.versions.setKey(l,u),n=l}if(n){const s=this.versions.get()[n];s&&(this.versions.setKey(n,{...s,isLatest:!0}),this.currentVersionId.set(n))}}}const Yo=new Bne,ft=Qt("StagingStore"),$ne=["package-lock.json","pnpm-lock.yaml","yarn.lock","*.lock","node_modules/**",".git/**","*.log"],HP={isEnabled:!0,autoApproveEnabled:!0,autoApprovePatterns:$ne,requireDeleteConfirmation:!0,showInlineDiffPreview:!0,autoCheckpointOnAccept:!0},gt=js({changes:{},selectedChangePath:null,isDiffModalOpen:!1,settings:qne(),pendingCommands:[],isPreviewMode:!1,lastAcceptedMessageId:null}),ha=Fr(gt,t=>Object.values(t.changes).filter(e=>e.status==="pending")),$4=Fr(ha,t=>t.length),hS=Fr($4,t=>t>0),Une=Fr(ha,t=>({create:t.filter(e=>e.type==="create"),modify:t.filter(e=>e.type==="modify"),delete:t.filter(e=>e.type==="delete")})),Hne=Fr(gt,t=>{const e=Object.values(t.changes),r=e.filter(i=>i.status==="pending"),n=e.filter(i=>i.status==="accepted"),s=e.filter(i=>i.status==="rejected");return{total:e.length,pending:r.length,accepted:n.length,rejected:s.length,reviewed:n.length+s.length}}),zne=Fr(gt,t=>t.selectedChangePath?t.changes[t.selectedChangePath]??null:null),U4=Fr(gt,t=>t.pendingCommands),H4=Fr(U4,t=>t.length),Wne=Fr(H4,t=>t>0);function z4(){return`change-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}const Vne=[/tailwind\.config\.(js|ts|mjs|cjs)$/i,/vite\.config\.(js|ts|mjs|cjs)$/i,/postcss\.config\.(js|cjs|mjs)$/i,/webpack\.config\.(js|ts)$/i,/babel\.config\.(js|json|cjs)$/i,/\.babelrc(\.json)?$/i,/next\.config\.(js|ts|mjs)$/i,/svelte\.config\.js$/i,/nuxt\.config\.(js|ts)$/i,/astro\.config\.(js|ts|mjs)$/i,/remix\.config\.(js|ts)$/i,/angular\.json$/i,/tsconfig(\.[^/]+)?\.json$/i,/jsconfig\.json$/i,/\.env(\.[^/]+)?$/i];function Gne(t){const e=t.split("/").pop()||"";return Vne.some(r=>r.test(e))}function qne(){try{if(typeof localStorage<"u"){const t=localStorage.getItem("devonz-staging-settings");if(t){const e=JSON.parse(t);return{...HP,...e}}}}catch(t){ft.error("Failed to load staging settings from localStorage",t)}return HP}function Kne(t){try{typeof localStorage<"u"&&localStorage.setItem("devonz-staging-settings",JSON.stringify(t))}catch(e){ft.error("Failed to save staging settings to localStorage",e)}}function W4(t,e){const r=t.replace(/\\/g,"/");for(const n of e)if(n.includes("**")){const s=n.split("**");if(s.length===2){const[i,o]=s;if(r.startsWith(i)&&r.endsWith(o))return!0}}else if(n.includes("*")){const s=new RegExp("^"+n.replace(/\./g,"\\.").replace(/\*/g,".*")+"$"),i=r.split("/").pop()??"";if(s.test(r)||s.test(i))return!0}else{const s=r.split("/").pop()??"";if(r===n||s===n)return!0}return!1}function Yne(){return gt.get().lastAcceptedMessageId}function Xne(t){const e=gt.get(),{settings:r}=e;if(!r.isEnabled)return ft.debug(`Staging disabled, skipping: ${t.filePath}`),null;let n=!1;r.autoApproveEnabled&&(t.type==="delete"&&r.requireDeleteConfirmation?n=!1:n=W4(t.filePath,r.autoApprovePatterns));const s={...t,id:z4(),timestamp:Date.now(),status:n?"accepted":"pending",autoApproved:n};return gt.setKey("changes",{...e.changes,[t.filePath]:s}),ft.info(`Staged change: ${t.type} ${t.filePath}${n?" (auto-approved)":""}`),s}function V4(t){const e=gt.get();let r,n;if(e.changes[t])r=e.changes[t],n=t;else for(const[i,o]of Object.entries(e.changes))if(o.id===t){r=o,n=i;break}if(!r||!n||r.status!=="pending")return null;const s={...r,status:"accepted"};return gt.setKey("changes",{...e.changes,[n]:s}),ft.info(`Accepted change: ${r.type} ${n}`),s}function G4(t){const e=gt.get();let r,n;if(e.changes[t])r=e.changes[t],n=t;else for(const[i,o]of Object.entries(e.changes))if(o.id===t){r=o,n=i;break}if(!r||!n||r.status!=="pending")return null;const s={...r,status:"rejected"};return gt.setKey("changes",{...e.changes,[n]:s}),ft.info(`Rejected change: ${r.type} ${n}`),s}function q4(){const t=gt.get(),e=[],r={...t.changes};let n=null;for(const[s,i]of Object.entries(t.changes))if(i.status==="pending"){const o={...i,status:"accepted"};r[s]=o,e.push(o),i.messageId&&(n=i.messageId)}return e.length>0&&(gt.setKey("changes",r),n&&(gt.setKey("lastAcceptedMessageId",n),ft.info(`Updated lastAcceptedMessageId to: ${n}`)),ft.info(`Accepted ${e.length} changes`)),e}function K4(){const t=gt.get(),e=[],r={...t.changes};for(const[n,s]of Object.entries(t.changes))if(s.status==="pending"){const i={...s,status:"rejected"};r[n]=i,e.push(i)}return e.length>0&&(gt.setKey("changes",r),ft.info(`Rejected ${e.length} changes`)),e}function Jne(t,e){const r=e.command.trim().replace(/\r\n/g,`
`);return t.some(n=>{const s=n.command.trim().replace(/\r\n/g,`
`);return n.type===e.type&&s===r})}function zP(t){const e=gt.get();if(Jne(e.pendingCommands,t))return ft.debug(`Skipping duplicate ${t.type} command: ${t.command.substring(0,50)}...`),null;const r={...t,id:z4(),timestamp:Date.now()};return gt.setKey("pendingCommands",[...e.pendingCommands,r]),ft.info(`Queued ${t.type} command: ${t.command.substring(0,50)}...`),r}function WP(){gt.setKey("pendingCommands",[]),ft.info("Pending commands cleared")}function DT(t){return gt.get().changes[t]??null}function Zne(){return Object.values(gt.get().changes).filter(t=>t.status==="accepted")}function Y4(){return Object.values(gt.get().changes).filter(t=>t.status==="rejected")}async function Qne(t){const e=Zne(),r=[],n=[];ft.info(`Applying ${e.length} accepted changes to WebContainer`);const s=await Promise.all(e.map(async i=>{try{const o=i.filePath.replace(/^\/home\/project\/?/,"");if(i.type==="delete")await t.fs.rm(o,{recursive:!1}),ft.debug(`Deleted file: ${o}`);else{const l=o.split("/").slice(0,-1).join("/");if(l)try{await t.fs.mkdir(l,{recursive:!0})}catch{}await t.fs.writeFile(o,i.newContent),ft.debug(`Wrote file: ${o}`)}return{path:i.filePath,success:!0}}catch(o){const a=o instanceof Error?o.message:String(o);return ft.error(`Failed to apply change: ${i.filePath}`,o),{path:i.filePath,success:!1,error:a}}}));for(const i of s)i.success?(r.push(i.path),OT(i.path)):n.push({path:i.path,error:i.error||"Unknown error"});return ft.info(`Applied ${r.length} changes, ${n.length} failed`),{applied:r,failed:n}}async function ese(t){const e=Y4(),r=[],n=[];ft.info(`Reverting ${e.length} rejected changes in WebContainer`);for(const s of e)try{const i=s.filePath.replace(/^\/home\/project\/?/,"");if(s.type==="create")ft.debug(`Removing staged new file from tracking: ${i}`);else if(s.type==="delete"&&s.originalContent!==null){const a=i.split("/").slice(0,-1).join("/");if(a)try{await t.fs.mkdir(a,{recursive:!0})}catch{}await t.fs.writeFile(i,s.originalContent),ft.debug(`Restored deleted file: ${i}`)}else s.originalContent!==null&&(await t.fs.writeFile(i,s.originalContent),ft.debug(`Restored original content: ${i}`));r.push(s.filePath),OT(s.filePath)}catch(i){const o=i instanceof Error?i.message:String(i);n.push({path:s.filePath,error:o}),ft.error(`Failed to revert change: ${s.filePath}`,i)}return ft.info(`Reverted ${r.length} changes, ${n.length} failed`),{reverted:r,failed:n}}async function tse(t,e){const r=DT(t);if(!r)return{success:!1,error:"Change not found"};if(r.status!=="rejected")return{success:!1,error:"Change is not rejected"};try{const n=r.filePath.replace(/^\/home\/project\/?/,"");if(r.type==="create")ft.debug(`Removing staged new file from tracking: ${n}`);else if(r.type==="delete"&&r.originalContent!==null){const i=n.split("/").slice(0,-1).join("/");if(i)try{await e.fs.mkdir(i,{recursive:!0})}catch{}await e.fs.writeFile(n,r.originalContent),ft.debug(`Restored deleted file: ${n}`)}else r.originalContent!==null&&(await e.fs.writeFile(n,r.originalContent),ft.debug(`Restored original content: ${n}`));return OT(t),{success:!0}}catch(n){const s=n instanceof Error?n.message:String(n);return ft.error(`Failed to revert change: ${t}`,n),{success:!1,error:s}}}function OT(t){const e=gt.get(),{[t]:r,...n}=e.changes;r&&(gt.setKey("changes",n),e.selectedChangePath===t&&gt.setKey("selectedChangePath",null),ft.debug(`Removed change: ${t}`))}async function rse(t){if(gt.get().isPreviewMode)return ft.debug("Already in preview mode"),{applied:[],failed:[],requiresHardRefresh:!1};const r=ha.get(),n=[],s=[];let i=!1;ft.info(`Entering preview mode: applying ${r.length} pending changes temporarily`);for(const o of r)try{const a=o.filePath.replace(/^\/home\/project\/?/,"");if(ft.info(`[PREVIEW DEBUG] Processing change: ${a}`),ft.info(`[PREVIEW DEBUG] Change type: ${o.type}`),ft.info(`[PREVIEW DEBUG] Has newContent: ${!!o.newContent}`),ft.info(`[PREVIEW DEBUG] newContent length: ${o.newContent?.length??0}`),o.newContent){const l=o.newContent.substring(0,200).replace(/\n/g,"\\n");ft.info(`[PREVIEW DEBUG] newContent preview: ${l}...`)}if(Gne(a)&&(i=!0,ft.debug(`Preview: config file detected, will require hard refresh: ${a}`)),o.type==="delete")ft.debug(`Preview: skipping delete for ${a} (preview only)`);else{const c=a.split("/").slice(0,-1).join("/");if(c)try{await t.fs.mkdir(c,{recursive:!0})}catch{}ft.info(`[PREVIEW DEBUG] Writing file to WebContainer: ${a}`),await t.fs.writeFile(a,o.newContent),ft.info(`[PREVIEW DEBUG] Successfully wrote file: ${a}`)}n.push(o.filePath)}catch(a){const l=a instanceof Error?a.message:String(a);s.push({path:o.filePath,error:l}),ft.error(`[PREVIEW DEBUG] Failed to apply ${o.filePath}: ${l}`,a)}return gt.setKey("isPreviewMode",!0),ft.info(`Entered preview mode: ${n.length} files applied, ${s.length} failed, requiresHardRefresh: ${i}`),{applied:n,failed:s,requiresHardRefresh:i}}async function VP(t){if(!gt.get().isPreviewMode)return ft.debug("Not in preview mode"),{restored:[],failed:[]};const r=ha.get(),n=[],s=[];ft.info(`Exiting preview mode: restoring ${r.length} files to original state`);for(const i of r)try{const o=i.filePath.replace(/^\/home\/project\/?/,"");i.type==="create"?ft.debug(`Preview exit: skipping cleanup of new file ${o}`):i.originalContent!==null&&(await t.fs.writeFile(o,i.originalContent),ft.debug(`Preview exit: restored ${o}`)),n.push(i.filePath)}catch(o){const a=o instanceof Error?o.message:String(o);s.push({path:i.filePath,error:a}),ft.error(`Preview exit: failed to restore ${i.filePath}`,o)}return gt.setKey("isPreviewMode",!1),ft.info(`Exited preview mode: ${n.length} files restored, ${s.length} failed`),{restored:n,failed:s}}function Eb(t){gt.setKey("selectedChangePath",t)}function X4(t){gt.set({...gt.get(),selectedChangePath:t,isDiffModalOpen:!0})}function lg(){gt.setKey("isDiffModalOpen",!1)}function fu(){const t=ha.get();if(t.length===0)return null;const e=gt.get().selectedChangePath;if(!e){const i=t[0].filePath;return Eb(i),i}const n=(t.findIndex(i=>i.filePath===e)+1)%t.length,s=t[n].filePath;return Eb(s),s}function fS(){const t=ha.get();if(t.length===0)return null;const e=gt.get().selectedChangePath;if(!e){const i=t[t.length-1].filePath;return Eb(i),i}const r=t.findIndex(i=>i.filePath===e),n=r<=0?t.length-1:r-1,s=t[n].filePath;return Eb(s),s}function XBe(t){const r={...gt.get().settings,...t};gt.setKey("settings",r),Kne(r),ft.info("Staging settings updated")}function nse(){const t=ha.get();if(t.length===0||!gt.get().settings.autoCheckpointOnAccept)return null;const r=t.map(i=>`${i.type}: ${i.filePath.split("/").pop()}`).join(", "),n={};for(const i of t)i.originalContent!==null&&(n[i.filePath]={content:i.originalContent,type:"file"});const s=Yo.createVersion(`checkpoint-${Date.now()}`,`Before accepting ${t.length} changes`,r,n);return ft.info(`Created checkpoint: ${s.id}`),s.id}function sse(){const t=nse();return{accepted:q4(),checkpointId:t}}const JBe=["Ollama","LMStudio","OpenAILike"],LT=["OpenAILike","LMStudio","Ollama"],ise=js({toggleTheme:{key:"d",metaKey:!0,altKey:!0,shiftKey:!0,action:()=>WM(),description:"Toggle theme",isPreventDefault:!0},toggleTerminal:{key:"`",ctrlOrMetaKey:!0,action:()=>{},description:"Toggle terminal",isPreventDefault:!0},acceptAllChanges:{key:"Enter",ctrlOrMetaKey:!0,shiftKey:!0,action:()=>{hS.get()&&sse()},description:"Accept all pending changes",isPreventDefault:!0},rejectAllChanges:{key:"Backspace",ctrlOrMetaKey:!0,shiftKey:!0,action:()=>{hS.get()&&K4()},description:"Reject all pending changes",isPreventDefault:!0},openDiffPreview:{key:"d",ctrlOrMetaKey:!0,shiftKey:!0,action:()=>{const t=ha.get();t.length>0&&X4(t[0].filePath)},description:"Open diff preview for first pending change",isPreventDefault:!0},nextChange:{key:"]",ctrlOrMetaKey:!1,action:()=>{fu()},description:"Navigate to next pending change",isPreventDefault:!1},previousChange:{key:"[",ctrlOrMetaKey:!1,action:()=>{fS()},description:"Navigate to previous pending change",isPreventDefault:!1}}),Cb="provider_settings",Qh="auto_enabled_providers",Xa=typeof window<"u",ose=async()=>{try{const t=await fetch("/api/configured-providers");if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);return(await t.json()).providers||[]}catch(t){return console.error("Error fetching configured providers:",t),[]}},ase=()=>{const t={};if(ev.forEach(e=>{t[e.name]={...e,settings:{enabled:!LT.includes(e.name)}}}),Xa){const e=localStorage.getItem(Cb);if(e)try{const r=JSON.parse(e);Object.entries(r).forEach(([n,s])=>{t[n]&&(t[n].settings=s.settings)})}catch(r){console.error("Error parsing saved provider settings:",r)}}return t},lse=async()=>{if(Xa)try{const t=await ose(),e=lc.get(),r=localStorage.getItem(Cb),n=localStorage.getItem(Qh),s=n?JSON.parse(n):[],i=[];let o=!1;if(t.forEach(({name:a,isConfigured:l,configMethod:c})=>{if(l&&c==="environment"&&LT.includes(a)){const u=e[a];if(u){const d=r!==null,h=s.includes(a);!u.settings.enabled&&(!d||h)&&(e[a]={...u,settings:{...u.settings,enabled:!0}},i.push(a),o=!0)}}}),o){lc.set(e),localStorage.setItem(Cb,JSON.stringify(e));const a=[...new Set([...s,...i])];localStorage.setItem(Qh,JSON.stringify(a)),console.log(`Auto-enabled providers: ${i.join(", ")}`)}}catch(t){console.error("Error auto-enabling configured providers:",t)}},lc=js(ase());Xa&&setTimeout(()=>{lse()},100);const cse=(t,e)=>{const r=lc.get(),n={...r[t],settings:{...r[t].settings,...e}};lc.setKey(t,n);const s=lc.get();localStorage.setItem(Cb,JSON.stringify(s)),LT.includes(t)&&n.settings.enabled!==void 0&&use(t,n.settings.enabled)},use=(t,e)=>{if(Xa)try{const r=localStorage.getItem(Qh),n=r?JSON.parse(r):[];if(e)n.includes(t)||(n.push(t),localStorage.setItem(Qh,JSON.stringify(n)));else{const s=n.filter(i=>i!==t);localStorage.setItem(Qh,JSON.stringify(s))}}catch(r){console.error("Error updating auto-enabled tracking:",r)}},GP=bt(!1),Un={LATEST_BRANCH:"isLatestBranch",AUTO_SELECT_TEMPLATE:"autoSelectTemplate",CONTEXT_OPTIMIZATION:"contextOptimizationEnabled",EVENT_LOGS:"isEventLogsEnabled",PROMPT_ID:"promptId",DEVELOPER_MODE:"isDeveloperMode",AUTO_SWITCH_TO_FILE:"autoSwitchToFile",ORCHESTRATOR_SETTINGS:"devonz_orchestrator_settings"},dse=()=>{const t=(e,r)=>{if(!Xa)return r;const n=localStorage.getItem(e);if(n===null)return r;try{return JSON.parse(n)}catch{return r}};return{latestBranch:t(Un.LATEST_BRANCH,!1),autoSelectTemplate:t(Un.AUTO_SELECT_TEMPLATE,!0),contextOptimization:t(Un.CONTEXT_OPTIMIZATION,!0),eventLogs:t(Un.EVENT_LOGS,!0),promptId:Xa&&localStorage.getItem(Un.PROMPT_ID)||"default",developerMode:t(Un.DEVELOPER_MODE,!1),autoSwitchToFile:t(Un.AUTO_SWITCH_TO_FILE,!1),orchestrator:(()=>{if(!Xa)return{enabled:!1,mode:"fast",coordinatorModel:"gpt-5.2",researcherModel:"gemini-3.0-flash",architectModel:"claude-4-opus"};const e=localStorage.getItem(Un.ORCHESTRATOR_SETTINGS);if(e)try{return JSON.parse(e)}catch{}return{enabled:!1,mode:"fast",coordinatorModel:"gpt-5.2",researcherModel:"gemini-3.0-flash",architectModel:"claude-4-opus"}})()}},Lc=dse(),J4=bt(Lc.latestBranch),Z4=bt(Lc.autoSelectTemplate),Q4=bt(Lc.contextOptimization),eF=bt(Lc.eventLogs),tF=bt(Lc.promptId),MT=bt(Lc.autoSwitchToFile),pS=bt(Lc.orchestrator),hse=t=>{J4.set(t),localStorage.setItem(Un.LATEST_BRANCH,JSON.stringify(t))},fse=t=>{MT.set(t),localStorage.setItem(Un.AUTO_SWITCH_TO_FILE,JSON.stringify(t))},pse=t=>{Z4.set(t),localStorage.setItem(Un.AUTO_SELECT_TEMPLATE,JSON.stringify(t))},mse=t=>{Q4.set(t),localStorage.setItem(Un.CONTEXT_OPTIMIZATION,JSON.stringify(t))},gse=t=>{eF.set(t),localStorage.setItem(Un.EVENT_LOGS,JSON.stringify(t))},bse=t=>{tF.set(t),localStorage.setItem(Un.PROMPT_ID,t)},yse=t=>{const r={...pS.get(),...t};pS.set(r),localStorage.setItem(Un.ORCHESTRATOR_SETTINGS,JSON.stringify(r))},vse=()=>{const t={userTabs:B4.filter(e=>e.window==="user")};if(!Xa)return t;try{const e=localStorage.getItem("devonz_tab_configuration");if(!e)return t;const r=JSON.parse(e);return r?.userTabs?{userTabs:r.userTabs.filter(n=>n.window==="user")}:t}catch(e){return console.warn("Failed to parse tab configuration:",e),t}},jT=js(vse()),rF=()=>{const t={userTabs:B4.filter(e=>e.window==="user")};jT.set(t),localStorage.setItem("devonz_tab_configuration",JSON.stringify(t))},qP=typeof window<"u"?localStorage.getItem("devonz_profile"):null,_se=qP?JSON.parse(qP):{username:"",bio:"",avatar:""},Bu=bt(_se),ZBe=t=>{Bu.set({...Bu.get(),...t}),typeof window<"u"&&localStorage.setItem("devonz_profile",JSON.stringify(Bu.get()))},xse=k.lazy(()=>Z(()=>import("./ProfileTab-BnJyo4VP.js"),__vite__mapDeps([0,1,2,3,4]))),wse=k.lazy(()=>Z(()=>import("./SettingsTab-BWuIxoZm.js"),__vite__mapDeps([5,1,2,3,6,4]))),Sse=k.lazy(()=>Z(()=>import("./NotificationsTab-DhOVS74B.js"),__vite__mapDeps([7,1,3,2,4]))),Ese=k.lazy(()=>Z(()=>import("./FeaturesTab-B4HbLDEd.js"),__vite__mapDeps([8,1,6,2,3,4,9]))),Cse=k.lazy(()=>Z(()=>import("./DataTab-kqu5mVRV.js"),__vite__mapDeps([10,1,2,3,11,12,4])).then(t=>({default:t.DataTab}))),Tse=k.lazy(()=>Z(()=>import("./EventLogsTab-CFGoYfnP.js").then(t=>t.E),__vite__mapDeps([13,1,6,2,3,14])).then(t=>({default:t.EventLogsTab}))),kse=k.lazy(()=>Z(()=>import("./GitHubTab-DHJBmDc-.js"),__vite__mapDeps([15,1,2,3,16,4]))),Ase=k.lazy(()=>Z(()=>import("./GitLabTab-cosXf8ut.js"),__vite__mapDeps([17,1,2,3,4]))),Rse=k.lazy(()=>Z(()=>import("./SupabaseTab-m1V-FS9_.js"),__vite__mapDeps([18,1,2,3,4]))),Pse=k.lazy(()=>Z(()=>import("./VercelTab-B5dsYj5x.js"),__vite__mapDeps([19,1,2,3,4]))),Ise=k.lazy(()=>Z(()=>import("./NetlifyTab-dRXRhNGx.js"),__vite__mapDeps([20,1,2,3,21,22,4]))),Nse=k.lazy(()=>Z(()=>import("./CloudProvidersTab-BW-sC38K.js"),__vite__mapDeps([23,1,6,2,3,4]))),Dse=k.lazy(()=>Z(()=>import("./LocalProvidersTab-Cd3BYLyR.js"),__vite__mapDeps([24,1,6,2,3,11,4]))),Ose=k.lazy(()=>Z(()=>import("./McpTab-D88pfDks.js"),__vite__mapDeps([25,1,2,3,4]))),Lse=k.lazy(()=>Z(()=>import("./ProjectMemoryTab-C2J5BtKI.js"),__vite__mapDeps([26,1,2,3,4]))),Mse=k.lazy(()=>Z(()=>import("./OrchestratorTab-DxQRX5I8.js"),__vite__mapDeps([27,1,6,2,3,4]))),jse=()=>p.jsx("div",{className:"flex items-center justify-center h-64",children:p.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full"})}),Fse=new Set(["local-providers","mcp"]),nF=({open:t,onClose:e})=>{const[r,n]=k.useState(null),s=He(jT),i=He(Bu),{hasNewFeatures:o,acknowledgeAllFeatures:a}=Ane(),{hasUnreadNotifications:l,markAllAsRead:c}=Rne(),{hasConnectionIssues:u,acknowledgeIssue:d}=Dne(),h=k.useMemo(()=>{if(!s?.userTabs||!Array.isArray(s.userTabs))return console.warn("Invalid tab configuration, resetting to defaults"),rF(),[];const y=i?.preferences?.notifications===!1;return s.userTabs.filter(v=>!v?.id||v.id==="notifications"&&y?!1:v.visible&&v.window==="user").sort((v,_)=>v.order-_.order)},[s,i?.preferences?.notifications]);k.useEffect(()=>{t||n(null)},[t]);const f=k.useCallback(()=>{n(null),e()},[e]),b=k.useCallback(y=>{const v={profile:p.jsx(xse,{}),settings:p.jsx(wse,{}),notifications:p.jsx(Sse,{}),features:p.jsx(Ese,{}),data:p.jsx(Cse,{}),"cloud-providers":p.jsx(Nse,{}),"local-providers":p.jsx(Dse,{}),github:p.jsx(kse,{}),gitlab:p.jsx(Ase,{}),supabase:p.jsx(Rse,{}),vercel:p.jsx(Pse,{}),netlify:p.jsx(Ise,{}),"event-logs":p.jsx(Tse,{}),mcp:p.jsx(Ose,{}),"project-memory":p.jsx(Lse,{}),orchestrator:p.jsx(Mse,{})};return p.jsx(k.Suspense,{fallback:p.jsx(jse,{}),children:v[y]||null})},[]),m=y=>{switch(y){case"features":return o;case"notifications":return l;case"github":case"gitlab":case"supabase":case"vercel":case"netlify":return u;default:return!1}},g=y=>{switch(n(y),y){case"features":a();break;case"notifications":c();break;case"github":case"gitlab":case"supabase":case"vercel":case"netlify":d();break}};return p.jsx(Ii,{open:t,children:p.jsx(mv,{children:p.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-[100]",children:[p.jsx(gv,{className:"absolute inset-0 bg-black/80",onClick:f}),p.jsxs(bv,{"aria-describedby":void 0,onEscapeKeyDown:f,className:"dark relative z-[101] w-[1000px] h-[80vh] rounded-xl shadow-2xl border border-[#333] flex overflow-hidden control-panel-dialog",children:[p.jsxs("div",{className:"w-48 border-r border-[#333] flex flex-col control-panel-sidebar",children:[p.jsx("div",{className:"px-4 py-4 border-b border-[#333] control-panel-sidebar-header",children:p.jsx("h2",{className:"text-sm font-semibold text-white",children:"Settings"})}),p.jsx("nav",{className:"flex-1 overflow-y-auto py-1 control-panel-sidebar-nav",children:h.map(y=>{const v=Fne[y.id],_=m(y.id),x=r===y.id;return p.jsxs("button",{onClick:()=>g(y.id),className:`w-full flex items-center gap-3 px-4 py-2.5 text-left text-sm ${x?"control-panel-nav-item--active":"control-panel-nav-item"}`,children:[p.jsx(v,{className:"w-4 h-4 shrink-0"}),p.jsx("span",{className:"truncate",children:UP[y.id]}),_&&p.jsx("span",{className:"ml-auto w-2 h-2 rounded-full bg-purple-500"}),Fse.has(y.id)&&p.jsx("span",{className:"ml-auto text-[10px] px-1.5 py-0.5 rounded bg-purple-500/20 text-purple-400",children:"BETA"})]},y.id)})})]}),p.jsxs("div",{className:"flex-1 flex flex-col min-w-0 control-panel-main",children:[p.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-[#333] control-panel-header",children:[p.jsx(Ci,{className:"text-sm font-semibold text-white",children:r?UP[r]:"Select a setting"}),p.jsx("button",{onClick:f,className:"p-1.5 rounded hover:bg-[#333] transition-colors control-panel-close-btn",title:"Close settings","aria-label":"Close settings",children:p.jsx("div",{className:"i-ph:x w-4 h-4 text-gray-400"})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-6 control-panel-content",children:r?b(r):p.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Select a setting from the sidebar"})})]})]})]})})})},Bse=k.memo(({onClick:t})=>p.jsx(Kt,{onClick:t,icon:"i-ph:gear",size:"xl",title:"Settings","data-testid":"settings-button",className:"text-[#666] hover:text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive/10 transition-colors"}));k.memo(({onClick:t})=>p.jsx(Kt,{onClick:t,icon:"i-ph:question",size:"xl",title:"Help & Documentation","data-testid":"help-button",className:"text-[#666] hover:text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive/10 transition-colors"}));const sF=typeof window<"u"&&typeof localStorage<"u";function $se(t){if(!sF)return null;try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.error(`Error reading from localStorage key "${t}":`,e),null}}function Use(t,e){if(sF)try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error(`Error writing to localStorage key "${t}":`,r)}}const KP=Qt("Encryption"),YP=new TextEncoder,Hse=new TextDecoder,zse="dev-encryption-key-2026-secret-32",ax="AES-GCM",Wse=12;class Eu{static _instance;_key=null;constructor(){}static getInstance(){return Eu._instance||(Eu._instance=new Eu),Eu._instance}async _getKey(){if(this._key)return this._key;const e=YP.encode(zse),r=await crypto.subtle.digest("SHA-256",e);return this._key=await crypto.subtle.importKey("raw",r,ax,!1,["encrypt","decrypt"]),this._key}async encrypt(e){try{const r=await this._getKey(),n=crypto.getRandomValues(new Uint8Array(Wse)),s=YP.encode(e),i=await crypto.subtle.encrypt({name:ax,iv:n},r,s),o=Array.from(n).map(l=>l.toString(16).padStart(2,"0")).join(""),a=Array.from(new Uint8Array(i)).map(l=>l.toString(16).padStart(2,"0")).join("");return`${o}:${a}`}catch(r){throw KP.error("Encryption failed",r),new Error("Data encryption failed")}}async decrypt(e){try{const r=e.split(":"),[n,s]=r;if(!n||!s)throw new Error("Invalid encrypted data format");const i=await this._getKey(),o=new Uint8Array(n.match(/.{1,2}/g).map(c=>parseInt(c,16))),a=new Uint8Array(s.match(/.{1,2}/g).map(c=>parseInt(c,16))),l=await crypto.subtle.decrypt({name:ax,iv:o},i,a);return Hse.decode(l)}catch(r){throw KP.error("Decryption failed",r),new Error("Data decryption failed (likely invalid key or tampered data)")}}}const iF=Eu.getInstance(),XP=Qt("DataIntegrity"),JP=new TextEncoder,Vse="dev-integrity-secret-2026";class Cu{static _instance;_key=null;constructor(){}static getInstance(){return Cu._instance||(Cu._instance=new Cu),Cu._instance}async _getKey(){if(this._key)return this._key;const e=JP.encode(Vse);return this._key=await crypto.subtle.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!1,["sign","verify"]),this._key}async sign(e){try{const r=await this._getKey(),n=JSON.stringify(e),s=JP.encode(n),i=await crypto.subtle.sign("HMAC",r,s);return Array.from(new Uint8Array(i)).map(o=>o.toString(16).padStart(2,"0")).join("")}catch(r){throw XP.error("Signing failed",r),r}}async verify(e,r){try{return await this.sign(e)===r}catch(n){return XP.error("Verification failed",n),!1}}async wrapWithIntegrity(e){const r=await this.sign(e);return{data:e,metadata:{signature:r,timestamp:new Date().toISOString(),algorithm:"HMAC-SHA256"}}}}const oF=Cu.getInstance(),FT=Qt("ChatHistory");async function Tb(t){if(typeof t.messages=="string")try{const e=await iF.decrypt(t.messages);t.messages=JSON.parse(e)}catch(e){FT.error(`Failed to decrypt chat ${t.id}`,e),t.messages=[],t.description=`(Decryption Error) ${t.description||""}`}return t}async function Gse(){if(typeof indexedDB>"u"){console.error("indexedDB is not available in this environment.");return}return new Promise(t=>{const e=indexedDB.open("boltHistory",3);e.onupgradeneeded=r=>{const n=r.target.result,s=r.oldVersion;if(s<1&&!n.objectStoreNames.contains("chats")){const i=n.createObjectStore("chats",{keyPath:"id"});i.createIndex("id","id",{unique:!0}),i.createIndex("urlId","urlId",{unique:!0})}if(s<2&&(n.objectStoreNames.contains("snapshots")||n.createObjectStore("snapshots",{keyPath:"chatId"})),s<3&&n.objectStoreNames.contains("chats")){const i=e.transaction.objectStore("chats");i.indexNames.contains("timestamp")||i.createIndex("timestamp","timestamp",{unique:!1})}},e.onsuccess=r=>{t(r.target.result)},e.onerror=r=>{t(void 0),FT.error(r.target.error)}})}async function aF(t,e){return new Promise((r,n)=>{const i=t.transaction("chats","readonly").objectStore("chats"),o=e?.index?i.index(e.index).openCursor(null,e.direction):i.openCursor(null,e?.direction),a=[];let l=!1,c=0;o.onsuccess=async u=>{const d=u.target.result;if(!d){const h=await Promise.all(a.map(Tb));r(h);return}if(e?.offset&&!l){l=!0,d.advance(e.offset);return}if(a.push(d.value),c++,e?.limit&&c>=e.limit){const h=await Promise.all(a.map(Tb));r(h);return}d.continue()},o.onerror=()=>n(o.error)})}async function kb(t,e,r,n,s,i,o){if(i&&isNaN(Date.parse(i)))throw new Error("Invalid timestamp");const a=JSON.stringify(r),l=await iF.encrypt(a);return new Promise((c,u)=>{const h=t.transaction("chats","readwrite").objectStore("chats");try{const f=h.put({id:e,messages:l,urlId:n,description:s,timestamp:i??new Date().toISOString(),metadata:o});f.onsuccess=()=>c(),f.onerror=()=>u(f.error)}catch(f){u(f)}})}async function cd(t,e){return await Kse(t,e)||await qse(t,e)}async function qse(t,e){return new Promise((r,n)=>{const a=t.transaction("chats","readonly").objectStore("chats").index("urlId").get(e);a.onsuccess=async()=>{if(!a.result){r(a.result);return}try{const l=await Tb(a.result);r(l)}catch(l){n(l)}},a.onerror=()=>n(a.error)})}async function Kse(t,e){return new Promise((r,n)=>{const o=t.transaction("chats","readonly").objectStore("chats").get(e);o.onsuccess=async()=>{if(!o.result){r(o.result);return}try{const a=await Tb(o.result);r(a)}catch(a){n(a)}},o.onerror=()=>n(o.error)})}async function Yse(t,e){return new Promise((r,n)=>{const s=t.transaction(["chats","snapshots"],"readwrite"),i=s.objectStore("chats"),o=s.objectStore("snapshots"),a=i.delete(e),l=o.delete(e);let c=!1,u=!1;const d=()=>{c&&u&&r(void 0)};a.onsuccess=()=>{c=!0,d()},a.onerror=()=>n(a.error),l.onsuccess=()=>{u=!0,d()},l.onerror=h=>{h.target.error?.name==="NotFoundError"?(u=!0,d()):n(l.error)},s.oncomplete=()=>{},s.onerror=()=>n(s.error)})}async function lF(t){return new Promise((e,r)=>{const i=t.transaction("chats","readonly").objectStore("chats").getAllKeys();i.onsuccess=()=>{const o=i.result.reduce((a,l)=>Math.max(+a,+l),0);e(String(+o+1))},i.onerror=()=>r(i.error)})}async function cF(t,e){const r=await Xse(t);if(r.includes(e)){let n=2;for(;r.includes(`${e}-${n}`);)n++;return`${e}-${n}`}else return e}async function Xse(t){return new Promise((e,r)=>{const s=t.transaction("chats","readonly").objectStore("chats"),i=[],o=s.openCursor();o.onsuccess=a=>{const l=a.target.result;l?(i.push(l.value.urlId),l.continue()):e(i)},o.onerror=()=>{r(o.error)}})}async function Jse(t,e,r){const n=await cd(t,e);if(!n)throw new Error("Chat not found");const s=n.messages.findIndex(o=>o.id===r);if(s===-1)throw new Error("Message not found");const i=n.messages.slice(0,s+1);return BT(t,n.description?`${n.description} (fork)`:"Forked chat",i)}async function Zse(t,e){const r=await cd(t,e);if(!r)throw new Error("Chat not found");return BT(t,`${r.description||"Chat"} (copy)`,r.messages)}async function BT(t,e,r,n){const s=await lF(t),i=await cF(t,s);return await kb(t,s,r,i,e,void 0,n),i}async function Qse(t,e,r){const n=await cd(t,e);if(!n)throw new Error("Chat not found");if(!r.trim())throw new Error("Description cannot be empty");await kb(t,e,n.messages,n.urlId,r,n.timestamp,n.metadata)}async function eie(t,e){return new Promise((r,n)=>{const o=t.transaction("snapshots","readonly").objectStore("snapshots").get(e);o.onsuccess=async()=>{if(!o.result?.snapshot){r(void 0);return}const a=o.result.snapshot;a.metadata?.signature&&a.data?await oF.verify(a.data,a.metadata.signature)?r(a.data):(FT.error(`Snapshot integrity verification failed for chat ${e}`),r(void 0)):r(a)},o.onerror=()=>n(o.error)})}async function uF(t,e,r){const n=await oF.wrapWithIntegrity(r);return new Promise((s,i)=>{const a=t.transaction("snapshots","readwrite").objectStore("snapshots");try{const l=a.put({chatId:e,snapshot:n});l.onsuccess=()=>s(),l.onerror=()=>i(l.error)}catch(l){i(l)}})}var dF="vercel.ai.error",tie=Symbol.for(dF),hF,rie=class fF extends Error{constructor({name:e,message:r,cause:n}){super(r),this[hF]=!0,this.name=e,this.cause=n}static isInstance(e){return fF.hasMarker(e,dF)}static hasMarker(e,r){const n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};hF=tie;var ud=rie;function pF(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var mF="AI_InvalidArgumentError",gF=`vercel.ai.error.${mF}`,nie=Symbol.for(gF),bF,sie=class extends ud{constructor({message:t,cause:e,argument:r}){super({name:mF,message:t,cause:e}),this[bF]=!0,this.argument=r}static isInstance(t){return ud.hasMarker(t,gF)}};bF=nie;var yF="AI_JSONParseError",vF=`vercel.ai.error.${yF}`,iie=Symbol.for(vF),_F,ZP=class extends ud{constructor({text:t,cause:e}){super({name:yF,message:`JSON parsing failed: Text: ${t}.
Error message: ${pF(e)}`,cause:e}),this[_F]=!0,this.text=t}static isInstance(t){return ud.hasMarker(t,vF)}};_F=iie;var xF="AI_TypeValidationError",wF=`vercel.ai.error.${xF}`,oie=Symbol.for(wF),SF,aie=class mS extends ud{constructor({value:e,cause:r}){super({name:xF,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${pF(r)}`,cause:r}),this[SF]=!0,this.value=e}static isInstance(e){return ud.hasMarker(e,wF)}static wrap({value:e,cause:r}){return mS.isInstance(r)&&r.value===e?r:new mS({value:e,cause:r})}};SF=oie;var QP=aie;function QBe(t){return new ReadableStream({async pull(e){try{const{value:r,done:n}=await t.next();n?e.close():e.enqueue(r)}catch(r){e.error(r)}},cancel(){}})}var lie=({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{const s=yK(r,e);if(t==null)return s;if(r.includes(n))throw new sie({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return i=>`${t}${n}${s(i)}`},$T=lie(),Ab=Symbol.for("vercel.ai.validator");function cie(t){return{[Ab]:!0,validate:t}}function uie(t){return typeof t=="object"&&t!==null&&Ab in t&&t[Ab]===!0&&"validate"in t}function die(t){return uie(t)?t:hie(t)}function hie(t){return cie(e=>{const r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function fie({value:t,schema:e}){const r=die(e);try{if(r.validate==null)return{success:!0,value:t};const n=r.validate(t);return n.success?n:{success:!1,error:QP.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:QP.wrap({value:t,cause:n})}}}function eI({text:t,schema:e}){try{const r=vK.parse(t);if(e==null)return{success:!0,value:r,rawValue:r};const n=fie({value:r,schema:e});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:ZP.isInstance(r)?r:new ZP({text:t,cause:r})}}}const pie=Symbol("Let zodToJsonSchema decide on which parser to use"),tI={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},mie=t=>typeof t=="string"?{...tI,name:t}:{...tI,...t},gie=t=>{const e=mie(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function EF(t,e,r,n){n?.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function Xt(t,e,r,n,s){t[e]=r,EF(t,e,n,s)}const CF=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")};function gs(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?CF(e,t.currentPath):e.join("/")}}function bie(t,e){const r={type:"array"};return t.type?._def&&t.type?._def?.typeName!==_t.ZodAny&&(r.items=Gt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Xt(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Xt(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Xt(r,"minItems",t.exactLength.value,t.exactLength.message,e),Xt(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function yie(t,e){const r={type:"integer",format:"int64"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?Xt(r,"minimum",n.value,n.message,e):Xt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),Xt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Xt(r,"maximum",n.value,n.message,e):Xt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),Xt(r,"maximum",n.value,n.message,e));break;case"multipleOf":Xt(r,"multipleOf",n.value,n.message,e);break}return r}function vie(){return{type:"boolean"}}function TF(t,e){return Gt(t.type._def,e)}const _ie=(t,e)=>Gt(t.innerType._def,e);function kF(t,e,r){const n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((s,i)=>kF(t,e,s))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return xie(t,e)}}const xie=(t,e)=>{const r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(const n of t.checks)switch(n.kind){case"min":Xt(r,"minimum",n.value,n.message,e);break;case"max":Xt(r,"maximum",n.value,n.message,e);break}return r};function wie(t,e){return{...Gt(t.innerType._def,e),default:t.defaultValue()}}function Sie(t,e){return e.effectStrategy==="input"?Gt(t.schema._def,e):gs(e)}function Eie(t){return{type:"string",enum:Array.from(t.values)}}const Cie=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function Tie(t,e){const r=[Gt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Gt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i);let n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return r.forEach(i=>{if(Cie(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(n=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:a,...l}=i;o=l}else n=void 0;s.push(o)}}),s.length?{allOf:s,...n}:void 0}function kie(t,e){const r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}let lx;const di={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(lx===void 0&&(lx=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),lx),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function AF(t,e){const r={type:"string"};if(t.checks)for(const n of t.checks)switch(n.kind){case"min":Xt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":Xt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":hi(r,"email",n.message,e);break;case"format:idn-email":hi(r,"idn-email",n.message,e);break;case"pattern:zod":Bn(r,di.email,n.message,e);break}break;case"url":hi(r,"uri",n.message,e);break;case"uuid":hi(r,"uuid",n.message,e);break;case"regex":Bn(r,n.regex,n.message,e);break;case"cuid":Bn(r,di.cuid,n.message,e);break;case"cuid2":Bn(r,di.cuid2,n.message,e);break;case"startsWith":Bn(r,RegExp(`^${cx(n.value,e)}`),n.message,e);break;case"endsWith":Bn(r,RegExp(`${cx(n.value,e)}$`),n.message,e);break;case"datetime":hi(r,"date-time",n.message,e);break;case"date":hi(r,"date",n.message,e);break;case"time":hi(r,"time",n.message,e);break;case"duration":hi(r,"duration",n.message,e);break;case"length":Xt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),Xt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{Bn(r,RegExp(cx(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&hi(r,"ipv4",n.message,e),n.version!=="v4"&&hi(r,"ipv6",n.message,e);break}case"base64url":Bn(r,di.base64url,n.message,e);break;case"jwt":Bn(r,di.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&Bn(r,di.ipv4Cidr,n.message,e),n.version!=="v4"&&Bn(r,di.ipv6Cidr,n.message,e);break}case"emoji":Bn(r,di.emoji(),n.message,e);break;case"ulid":{Bn(r,di.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{hi(r,"binary",n.message,e);break}case"contentEncoding:base64":{Xt(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{Bn(r,di.base64,n.message,e);break}}break}case"nanoid":Bn(r,di.nanoid,n.message,e)}return r}function cx(t,e){return e.patternStrategy==="escape"?Rie(t):t}const Aie=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Rie(t){let e="";for(let r=0;r<t.length;r++)Aie.has(t[r])||(e+="\\"),e+=t[r];return e}function hi(t,e,r,n){t.format||t.anyOf?.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):Xt(t,"format",e,r,n)}function Bn(t,e,r,n){t.pattern||t.allOf?.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:rI(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):Xt(t,"pattern",rI(e,n),r,n)}function rI(t,e){if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source;let s="",i=!1,o=!1,a=!1;for(let l=0;l<n.length;l++){if(i){s+=n[l],i=!1;continue}if(r.i){if(o){if(n[l].match(/[a-z]/)){a?(s+=n[l],s+=`${n[l-2]}-${n[l]}`.toUpperCase(),a=!1):n[l+1]==="-"&&n[l+2]?.match(/[a-z]/)?(s+=n[l],a=!0):s+=`${n[l]}${n[l].toUpperCase()}`;continue}}else if(n[l].match(/[a-z]/)){s+=`[${n[l]}${n[l].toUpperCase()}]`;continue}}if(r.m){if(n[l]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(n[l]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&n[l]==="."){s+=o?`${n[l]}\r
`:`[${n[l]}\r
]`;continue}s+=n[l],n[l]==="\\"?i=!0:o&&n[l]==="]"?o=!1:!o&&n[l]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return s}function RF(t,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&t.keyType?._def.typeName===_t.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((n,s)=>({...n,[s]:Gt(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",s]})??gs(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const r={type:"object",additionalProperties:Gt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return r;if(t.keyType?._def.typeName===_t.ZodString&&t.keyType._def.checks?.length){const{type:n,...s}=AF(t.keyType._def,e);return{...r,propertyNames:s}}else{if(t.keyType?._def.typeName===_t.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(t.keyType?._def.typeName===_t.ZodBranded&&t.keyType._def.type._def.typeName===_t.ZodString&&t.keyType._def.type._def.checks?.length){const{type:n,...s}=TF(t.keyType._def,e);return{...r,propertyNames:s}}}return r}function Pie(t,e){if(e.mapStrategy==="record")return RF(t,e);const r=Gt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||gs(e),n=Gt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||gs(e);return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function Iie(t){const e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),s=Array.from(new Set(n.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:n}}function Nie(t){return t.target==="openAi"?void 0:{not:gs({...t,currentPath:[...t.currentPath,"not"]})}}function Die(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Rb={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Oie(t,e){if(e.target==="openApi3")return nI(t,e);const r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in Rb&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((s,i)=>{const o=Rb[i._def.typeName];return o&&!s.includes(o)?[...s,o]:s},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((s,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...s,o];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(n.length===r.length){const s=n.filter((i,o,a)=>a.indexOf(i)===o);return{type:s.length>1?s:s[0],enum:r.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,s)=>[...n,...s._def.values.filter(i=>!n.includes(i))],[])};return nI(t,e)}const nI=(t,e)=>{const r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,s)=>Gt(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function Lie(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Rb[t.innerType._def.typeName],nullable:!0}:{type:[Rb[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const n=Gt(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const r=Gt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Mie(t,e){const r={type:"number"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"int":r.type="integer",EF(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?Xt(r,"minimum",n.value,n.message,e):Xt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),Xt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Xt(r,"maximum",n.value,n.message,e):Xt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),Xt(r,"maximum",n.value,n.message,e));break;case"multipleOf":Xt(r,"multipleOf",n.value,n.message,e);break}return r}function jie(t,e){const r=e.target==="openAi",n={type:"object",properties:{}},s=[],i=t.shape();for(const a in i){let l=i[a];if(l===void 0||l._def===void 0)continue;let c=Bie(l);c&&r&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const u=Gt(l._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});u!==void 0&&(n.properties[a]=u,c||s.push(a))}s.length&&(n.required=s);const o=Fie(t,e);return o!==void 0&&(n.additionalProperties=o),n}function Fie(t,e){if(t.catchall._def.typeName!=="ZodNever")return Gt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function Bie(t){try{return t.isOptional()}catch{return!0}}const $ie=(t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return Gt(t.innerType._def,e);const r=Gt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:gs(e)},r]}:gs(e)},Uie=(t,e)=>{if(e.pipeStrategy==="input")return Gt(t.in._def,e);if(e.pipeStrategy==="output")return Gt(t.out._def,e);const r=Gt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=Gt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(s=>s!==void 0)}};function Hie(t,e){return Gt(t.type._def,e)}function zie(t,e){const n={type:"array",uniqueItems:!0,items:Gt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Xt(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Xt(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function Wie(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>Gt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Gt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>Gt(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function Vie(t){return{not:gs(t)}}function Gie(t){return gs(t)}const qie=(t,e)=>Gt(t.innerType._def,e),Kie=(t,e,r)=>{switch(e){case _t.ZodString:return AF(t,r);case _t.ZodNumber:return Mie(t,r);case _t.ZodObject:return jie(t,r);case _t.ZodBigInt:return yie(t,r);case _t.ZodBoolean:return vie();case _t.ZodDate:return kF(t,r);case _t.ZodUndefined:return Vie(r);case _t.ZodNull:return Die(r);case _t.ZodArray:return bie(t,r);case _t.ZodUnion:case _t.ZodDiscriminatedUnion:return Oie(t,r);case _t.ZodIntersection:return Tie(t,r);case _t.ZodTuple:return Wie(t,r);case _t.ZodRecord:return RF(t,r);case _t.ZodLiteral:return kie(t,r);case _t.ZodEnum:return Eie(t);case _t.ZodNativeEnum:return Iie(t);case _t.ZodNullable:return Lie(t,r);case _t.ZodOptional:return $ie(t,r);case _t.ZodMap:return Pie(t,r);case _t.ZodSet:return zie(t,r);case _t.ZodLazy:return()=>t.getter()._def;case _t.ZodPromise:return Hie(t,r);case _t.ZodNaN:case _t.ZodNever:return Nie(r);case _t.ZodEffects:return Sie(t,r);case _t.ZodAny:return gs(r);case _t.ZodUnknown:return Gie(r);case _t.ZodDefault:return wie(t,r);case _t.ZodBranded:return TF(t,r);case _t.ZodReadonly:return qie(t,r);case _t.ZodCatch:return _ie(t,r);case _t.ZodPipeline:return Uie(t,r);case _t.ZodFunction:case _t.ZodVoid:case _t.ZodSymbol:return;default:return(n=>{})()}};function Gt(t,e,r=!1){const n=e.seen.get(t);if(e.override){const a=e.override?.(t,e,n,r);if(a!==pie)return a}if(n&&!r){const a=Yie(n,e);if(a!==void 0)return a}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const i=Kie(t,t.typeName,e),o=typeof i=="function"?Gt(i(),e):i;if(o&&Xie(t,e,o),e.postProcess){const a=e.postProcess(o,t,e);return s.jsonSchema=o,a}return s.jsonSchema=o,o}const Yie=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:CF(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),gs(e)):e.$refStrategy==="seen"?gs(e):void 0}},Xie=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r),Jie=(t,e)=>{const r=gie(e);let n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[c,u])=>({...l,[c]:Gt(u._def,{...r,currentPath:[...r.basePath,r.definitionPath,c]},!0)??gs(r)}),{}):void 0;const s=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,i=Gt(t._def,s===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1)??gs(r),o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(i.title=o),r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:r.$refStrategy==="relative"?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));const a=s===void 0?n?{...i,[r.definitionPath]:n}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...n,[s]:i}};return r.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};var Hf={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},zf={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},Wf={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},Vf={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},Gf={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},Zie=[Hf,zf,Wf,Vf,Gf];Hf.code+"",zf.code+"",Wf.code+"",Vf.code+"",Gf.code+"";Hf.name+"",Hf.code,zf.name+"",zf.code,Wf.name+"",Wf.code,Vf.name+"",Vf.code,Gf.name+"",Gf.code;Zie.map(t=>t.code);function Qie({promptTokens:t,completionTokens:e}){return{promptTokens:t,completionTokens:e,totalTokens:t+e}}function eoe(t){const e=["ROOT"];let r=-1,n=null;function s(l,c,u){switch(l){case'"':{r=c,e.pop(),e.push(u),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=c,n=c,e.pop(),e.push(u),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=c,e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"{":{r=c,e.pop(),e.push(u),e.push("INSIDE_OBJECT_START");break}case"[":{r=c,e.pop(),e.push(u),e.push("INSIDE_ARRAY_START");break}}}function i(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=c,e.pop();break}}}function o(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=c,e.pop();break}}}for(let l=0;l<t.length;l++){const c=t[l];switch(e[e.length-1]){case"ROOT":s(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{r=l,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{e.pop(),r=l;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:r=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{r=l,e.pop();break}default:{r=l,s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=l,e.pop();break}default:{r=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),r=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=l;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{const d=t.substring(n,l+1);!"false".startsWith(d)&&!"true".startsWith(d)&&!"null".startsWith(d)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,l):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l)):r=l;break}}}let a=t.slice(0,r+1);for(let l=e.length-1;l>=0;l--)switch(e[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=t.substring(n,t.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}function toe(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=eI({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=eI({text:eoe(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var roe={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},noe={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},soe={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},ioe={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},ooe={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},aoe={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},loe={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},coe={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},uoe={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},doe={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},hoe={code:"f",name:"start_step",parse:t=>{if(t==null||typeof t!="object"||!("messageId"in t)||typeof t.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:t.messageId}}}},foe={code:"g",name:"reasoning",parse:t=>{if(typeof t!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:t}}},poe={code:"h",name:"source",parse:t=>{if(t==null||typeof t!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:t}}},moe={code:"i",name:"redacted_reasoning",parse:t=>{if(t==null||typeof t!="object"||!("data"in t)||typeof t.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:t.data}}}},goe={code:"j",name:"reasoning_signature",parse:t=>{if(t==null||typeof t!="object"||!("signature"in t)||typeof t.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:t.signature}}}},boe={code:"k",name:"file",parse:t=>{if(t==null||typeof t!="object"||!("data"in t)||typeof t.data!="string"||!("mimeType"in t)||typeof t.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:t}}},vv=[roe,noe,soe,ioe,ooe,aoe,loe,coe,uoe,doe,hoe,foe,poe,moe,goe,boe],yoe=Object.fromEntries(vv.map(t=>[t.code,t]));Object.fromEntries(vv.map(t=>[t.name,t.code]));var voe=vv.map(t=>t.code),_oe=t=>{const e=t.indexOf(":");if(e===-1)throw new Error("Failed to parse stream string. No separator found.");const r=t.slice(0,e);if(!voe.includes(r))throw new Error(`Failed to parse stream string. Invalid code ${r}.`);const n=r,s=t.slice(e+1),i=JSON.parse(s);return yoe[n].parse(i)};function e8e(t,e){const r=vv.find(n=>n.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}var xoe=10;function woe(t,e){const r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return t.length=0,r}async function Soe({stream:t,onTextPart:e,onReasoningPart:r,onReasoningSignaturePart:n,onRedactedReasoningPart:s,onSourcePart:i,onFilePart:o,onDataPart:a,onErrorPart:l,onToolCallStreamingStartPart:c,onToolCallDeltaPart:u,onToolCallPart:d,onToolResultPart:h,onMessageAnnotationsPart:f,onFinishMessagePart:b,onFinishStepPart:m,onStartStepPart:g}){const y=t.getReader(),v=new TextDecoder,_=[];let x=0;for(;;){const{value:w}=await y.read();if(w&&(_.push(w),x+=w.length,w[w.length-1]!==xoe))continue;if(_.length===0)break;const S=woe(_,x);x=0;const T=v.decode(S,{stream:!0}).split(`
`).filter(E=>E!=="").map(_oe);for(const{type:E,value:C}of T)switch(E){case"text":await e?.(C);break;case"reasoning":await r?.(C);break;case"reasoning_signature":await n?.(C);break;case"redacted_reasoning":await s?.(C);break;case"file":await o?.(C);break;case"source":await i?.(C);break;case"data":await a?.(C);break;case"error":await l?.(C);break;case"message_annotations":await f?.(C);break;case"tool_call_streaming_start":await c?.(C);break;case"tool_call_delta":await u?.(C);break;case"tool_call":await d?.(C);break;case"tool_result":await h?.(C);break;case"finish_message":await b?.(C);break;case"finish_step":await m?.(C);break;case"start_step":await g?.(C);break;default:{const A=E;throw new Error(`Unknown stream part type: ${A}`)}}}}async function Eoe({stream:t,update:e,onToolCall:r,onFinish:n,generateId:s=$T,getCurrentDate:i=()=>new Date,lastMessage:o}){var a,l;const c=o?.role==="assistant";let u=c?1+((l=(a=o.toolInvocations)==null?void 0:a.reduce((S,T)=>{var E;return Math.max(S,(E=T.step)!=null?E:0)},0))!=null?l:0):0;const d=c?structuredClone(o):{id:s(),createdAt:i(),role:"assistant",content:"",parts:[]};let h,f,b;function m(S,T){const E=d.parts.find(C=>C.type==="tool-invocation"&&C.toolInvocation.toolCallId===S);E!=null?E.toolInvocation=T:d.parts.push({type:"tool-invocation",toolInvocation:T})}const g=[];let y=c?o?.annotations:void 0;const v={};let _={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},x="unknown";function w(){const S=[...g];y?.length&&(d.annotations=y);const T={...structuredClone(d),revisionId:s()};e({message:T,data:S,replaceLastMessage:c})}await Soe({stream:t,onTextPart(S){h==null?(h={type:"text",text:S},d.parts.push(h)):h.text+=S,d.content+=S,w()},onReasoningPart(S){var T;b==null?(b={type:"text",text:S},f?.details.push(b)):b.text+=S,f==null?(f={type:"reasoning",reasoning:S,details:[b]},d.parts.push(f)):f.reasoning+=S,d.reasoning=((T=d.reasoning)!=null?T:"")+S,w()},onReasoningSignaturePart(S){b!=null&&(b.signature=S.signature)},onRedactedReasoningPart(S){f==null&&(f={type:"reasoning",reasoning:"",details:[]},d.parts.push(f)),f.details.push({type:"redacted",data:S.data}),b=void 0,w()},onFilePart(S){d.parts.push({type:"file",mimeType:S.mimeType,data:S.data}),w()},onSourcePart(S){d.parts.push({type:"source",source:S}),w()},onToolCallStreamingStartPart(S){d.toolInvocations==null&&(d.toolInvocations=[]),v[S.toolCallId]={text:"",step:u,toolName:S.toolName,index:d.toolInvocations.length};const T={state:"partial-call",step:u,toolCallId:S.toolCallId,toolName:S.toolName,args:void 0};d.toolInvocations.push(T),m(S.toolCallId,T),w()},onToolCallDeltaPart(S){const T=v[S.toolCallId];T.text+=S.argsTextDelta;const{value:E}=toe(T.text),C={state:"partial-call",step:T.step,toolCallId:S.toolCallId,toolName:T.toolName,args:E};d.toolInvocations[T.index]=C,m(S.toolCallId,C),w()},async onToolCallPart(S){const T={state:"call",step:u,...S};if(v[S.toolCallId]!=null?d.toolInvocations[v[S.toolCallId].index]=T:(d.toolInvocations==null&&(d.toolInvocations=[]),d.toolInvocations.push(T)),m(S.toolCallId,T),w(),r){const E=await r({toolCall:S});if(E!=null){const C={state:"result",step:u,...S,result:E};d.toolInvocations[d.toolInvocations.length-1]=C,m(S.toolCallId,C),w()}}},onToolResultPart(S){const T=d.toolInvocations;if(T==null)throw new Error("tool_result must be preceded by a tool_call");const E=T.findIndex(A=>A.toolCallId===S.toolCallId);if(E===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");const C={...T[E],state:"result",...S};T[E]=C,m(S.toolCallId,C),w()},onDataPart(S){g.push(...S),w()},onMessageAnnotationsPart(S){y==null?y=[...S]:y.push(...S),w()},onFinishStepPart(S){u+=1,h=S.isContinued?h:void 0,f=void 0,b=void 0},onStartStepPart(S){c||(d.id=S.messageId),d.parts.push({type:"step-start"}),w()},onFinishMessagePart(S){x=S.finishReason,S.usage!=null&&(_=Qie(S.usage))},onErrorPart(S){throw new Error(S)}}),n?.({message:d,finishReason:x,usage:_})}async function Coe({stream:t,onTextPart:e}){const r=t.pipeThrough(new TextDecoderStream).getReader();for(;;){const{done:n,value:s}=await r.read();if(n)break;await e(s)}}async function Toe({stream:t,update:e,onFinish:r,getCurrentDate:n=()=>new Date,generateId:s=$T}){const i={type:"text",text:""},o={id:s(),createdAt:n(),role:"assistant",content:"",parts:[i]};await Coe({stream:t,onTextPart:a=>{o.content+=a,i.text+=a,e({message:{...o},data:[],replaceLastMessage:!1})}}),r?.(o,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"})}var koe=()=>fetch;async function Aoe({api:t,body:e,streamProtocol:r="data",credentials:n,headers:s,abortController:i,restoreMessagesOnFailure:o,onResponse:a,onUpdate:l,onFinish:c,onToolCall:u,generateId:d,fetch:h=koe(),lastMessage:f,requestType:b="generate"}){var m,g,y;const _=await(b==="resume"?h(`${t}?chatId=${e.id}`,{method:"GET",headers:{"Content-Type":"application/json",...s},signal:(m=i?.())==null?void 0:m.signal,credentials:n}):h(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",...s},signal:(g=i?.())==null?void 0:g.signal,credentials:n})).catch(x=>{throw o(),x});if(a)try{await a(_)}catch(x){throw x}if(!_.ok)throw o(),new Error((y=await _.text())!=null?y:"Failed to fetch the chat response.");if(!_.body)throw new Error("The response body is empty.");switch(r){case"text":{await Toe({stream:_.body,update:l,onFinish:c,generateId:d});return}case"data":{await Eoe({stream:_.body,update:l,lastMessage:f,onToolCall:u,onFinish({message:x,finishReason:w,usage:S}){c&&x!=null&&c(x,{usage:S,finishReason:w})},generateId:d});return}default:{const x=r;throw new Error(`Unknown stream protocol: ${x}`)}}}function gS(t){return t?.reduce((e,r)=>{var n;return Math.max(e,(n=r.step)!=null?n:0)},0)}function PF(t){var e;return(e=t.parts)!=null?e:[...t.toolInvocations?t.toolInvocations.map(r=>({type:"tool-invocation",toolInvocation:r})):[],...t.reasoning?[{type:"reasoning",reasoning:t.reasoning,details:[{type:"text",text:t.reasoning}]}]:[],...t.content?[{type:"text",text:t.content}]:[]]}function ux(t){return t.map(e=>({...e,parts:PF(e)}))}function bS(t,e){if(t===e)return!0;if(t==null||e==null)return!1;if(typeof t!="object"&&typeof e!="object")return t===e;if(t.constructor!==e.constructor)return!1;if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(Array.isArray(t)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!bS(t[s],e[s]))return!1;return!0}const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r)if(!n.includes(s)||!bS(t[s],e[s]))return!1;return!0}async function sI(t){if(!t)return[];if(globalThis.FileList&&t instanceof globalThis.FileList)return Promise.all(Array.from(t).map(async e=>{const{name:r,type:n}=e,s=await new Promise((i,o)=>{const a=new FileReader;a.onload=l=>{var c;i((c=l.target)==null?void 0:c.result)},a.onerror=l=>o(l),a.readAsDataURL(e)});return{name:r,contentType:n,url:s}}));if(Array.isArray(t))return t;throw new Error("Invalid attachments type")}function Roe(t,e){var r;const n=(r=void 0)!=null?r:!1;return Poe(Jie(t,{$refStrategy:n?"root":"none",target:"jsonSchema7"}),{validate:s=>{const i=t.safeParse(s);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var yS=Symbol.for("vercel.ai.schema");function Poe(t,{validate:e}={}){return{[yS]:!0,_type:void 0,[Ab]:!0,jsonSchema:t,validate:e}}function Ioe(t){return typeof t=="object"&&t!==null&&yS in t&&t[yS]===!0&&"jsonSchema"in t&&"validate"in t}function t8e(t){return Ioe(t)?t:Roe(t)}function Noe({originalMaxToolInvocationStep:t,originalMessageCount:e,maxSteps:r,messages:n}){var s;const i=n[n.length-1];return r>1&&i!=null&&(n.length>e||gS(i.toolInvocations)!==t)&&IF(i)&&((s=gS(i.toolInvocations))!=null?s:0)<r}function IF(t){if(t.role!=="assistant")return!1;const e=t.parts.reduce((n,s,i)=>s.type==="step-start"?i:n,-1),r=t.parts.slice(e+1).filter(n=>n.type==="tool-invocation");return r.length>0&&r.every(n=>"result"in n.toolInvocation)}function Doe({messages:t,toolCallId:e,toolResult:r}){var n;const s=t[t.length-1],i=s.parts.find(a=>a.type==="tool-invocation"&&a.toolInvocation.toolCallId===e);if(i==null)return;const o={...i.toolInvocation,state:"result",result:r};i.toolInvocation=o,s.toolInvocations=(n=s.toolInvocations)==null?void 0:n.map(a=>a.toolCallId===e?o:a)}const $r={join:(...t)=>No.join(...t),dirname:t=>No.dirname(t),basename:(t,e)=>No.basename(t,e),extname:t=>No.extname(t),relative:(t,e)=>No.relative(t,e),isAbsolute:t=>No.isAbsolute(t),normalize:t=>No.normalize(t),parse:t=>No.parse(t),format:t=>No.format(t)};function Es(t){throw new Error(`Unreachable: ${t}`)}const NF={isActive:!1,tasks:[],currentTaskId:null,approvedByUser:!1,planTitle:void 0},ri=js(NF),DF=Fr(ri,t=>{if(t.tasks.length===0)return 0;const e=t.tasks.filter(r=>r.status==="completed").length;return Math.round(e/t.tasks.length*100)});Fr(ri,t=>t.currentTaskId?t.tasks.find(e=>e.id===t.currentTaskId)??null:null);Fr(ri,t=>t.tasks.length===0?!1:t.tasks.every(e=>e.status==="completed"));Fr(ri,t=>t.tasks.filter(e=>e.status!=="completed").length);function Ooe(t,e){ri.set({isActive:!0,tasks:t.map(r=>({...r,status:r.status||"not-started"})),currentTaskId:null,approvedByUser:!1,planTitle:e})}function Loe(t,e){const r=ri.get(),n=r.tasks.findIndex(o=>o.id===t);if(n===-1){console.warn(`[PlanStore] Task with id "${t}" not found`);return}const s=[...r.tasks];s[n]={...s[n],status:e};const i=e==="in-progress"?t:r.currentTaskId;ri.set({...r,tasks:s,currentTaskId:i})}function OF(){const t=ri.get();ri.set({...t,approvedByUser:!0})}function LF(){ri.set(NF)}const Wt=Qt("ActionRunner");class zl extends Error{_output;_header;constructor(e,r){const n=`Failed To Execute Shell Command: ${e}

Output:
${r}`;super(n),this._header=e,this._output=r,Object.setPrototypeOf(this,zl.prototype),this.name="ActionCommandError"}get output(){return this._output}get header(){return this._header}}class Moe{#r;#e=Promise.resolve();#n;runnerId=bt(`${Date.now()}`);actions=js({});onAlert;onSupabaseAlert;onDeployAlert;buildOutput;constructor(e,r,n,s,i){this.#r=e,this.#n=r,this.onAlert=n,this.onSupabaseAlert=s,this.onDeployAlert=i}addAction(e){const{actionId:r,messageId:n}=e;if(this.actions.get()[r])return;const o=new AbortController;this.actions.setKey(r,{...e.action,status:"pending",executed:!1,messageId:n,abort:()=>{o.abort(),this.#a(r,{status:"aborted"})},abortSignal:o.signal}),this.#e.then(()=>{this.#a(r,{status:"running"})})}async runAction(e,r=!1){const{actionId:n}=e,s=this.actions.get()[n];s||Es(`Action ${n} not found`),!s.executed&&(r&&s.type!=="file"||(this.#a(n,{...s,...e.action,executed:!r}),this.#e=this.#e.then(()=>this.#t(n,r)).catch(i=>{Wt.error("Action execution promise failed:",i)}),await this.#e))}async#t(e,r=!1){const n=this.actions.get()[e];this.#a(e,{status:"running"});try{switch(n.type){case"shell":{await this.#s(n);break}case"file":{await this.#i(n);break}case"supabase":{try{await this.handleSupabaseAction(n)}catch(s){this.#a(e,{status:"failed",error:s instanceof Error?s.message:"Supabase action failed"});return}break}case"build":{const s=await this.#d(n);this.buildOutput=s;break}case"start":{this.#o(n).then(()=>this.#a(e,{status:"complete"})).catch(s=>{n.abortSignal.aborted||(this.#a(e,{status:"failed",error:"Action failed"}),Wt.error(`[${n.type}]:Action failed

`,s),s instanceof zl&&this.onAlert?.({type:"error",title:"Dev Server Failed",description:s.header,content:s.output}))}),await new Promise(s=>setTimeout(s,2e3));return}case"plan":{await this.#p(n);break}case"task-update":{await this.#m(n);break}}this.#a(e,{status:r?"running":n.abortSignal.aborted?"aborted":"complete"})}catch(s){if(n.abortSignal.aborted||(this.#a(e,{status:"failed",error:"Action failed"}),Wt.error(`[${n.type}]:Action failed

`,s),!(s instanceof zl)))return;throw this.onAlert?.({type:"error",title:"Dev Server Failed",description:s.header,content:s.output}),s}}async#s(e){if(e.type!=="shell"&&Es("Expected shell action"),gt.get().settings.isEnabled){zP({type:"shell",command:e.content,artifactId:"pending-artifact",title:`Shell: ${e.content.substring(0,40)}${e.content.length>40?"...":""}`})?Wt.info(`Queued shell command for staging: ${e.content.substring(0,50)}...`):Wt.debug(`Skipped duplicate shell command: ${e.content.substring(0,50)}...`);return}const n=this.#n();await n.ready(),(!n||!n.terminal||!n.process)&&Es("Shell terminal not found");const s=await this.#h(e.content);s.shouldModify&&s.modifiedCommand&&(Wt.debug(`Modified command: ${e.content} -> ${s.modifiedCommand}`),e.content=s.modifiedCommand);const i=await n.executeCommand(this.runnerId.get(),e.content,()=>{Wt.debug(`[${e.type}]:Aborting Action

`,e),e.abort()});if(Wt.debug(`${e.type} Shell Response: [exit code:${i?.exitCode}]`),i?.exitCode!=0){const o=this.#f(e.content,i?.exitCode,i?.output);throw new zl(o.title,o.details)}}async#o(e){if(e.type!=="start"&&Es("Expected shell action"),gt.get().settings.isEnabled){zP({type:"start",command:e.content,artifactId:"pending-artifact",title:`Start: ${e.content.substring(0,40)}${e.content.length>40?"...":""}`})?Wt.info(`Queued start command for staging: ${e.content.substring(0,50)}...`):Wt.debug(`Skipped duplicate start command: ${e.content.substring(0,50)}...`);return}this.#n||Es("Shell terminal not found");const n=this.#n();await n.ready(),(!n||!n.terminal||!n.process)&&Es("Shell terminal not found");const s=await n.executeCommand(this.runnerId.get(),e.content,()=>{Wt.debug(`[${e.type}]:Aborting Action

`,e),e.abort()});if(Wt.debug(`${e.type} Shell Response: [exit code:${s?.exitCode}]`),s?.exitCode!=0)throw new zl("Failed To Start Application",s?.output||"No Output Available");return s}async#i(e){e.type!=="file"&&Es("Expected file action");const r=await this.#r,n=$r.relative(r.workdir,e.filePath);if(gt.get().settings.isEnabled&&!this.#l(e.filePath)){let o=null,a="create";try{o=await r.fs.readFile(n,"utf-8"),a="modify"}catch{a="create"}Xne({filePath:e.filePath,type:a,originalContent:o,newContent:e.content,actionId:e.id??`action-${Date.now()}`,messageId:e.messageId,description:`${a==="create"?"Create":"Modify"} ${n}`}),Wt.debug(`File change staged: ${n} (${a})`);return}await this.#c(e,r,n)}#l(e){const{settings:r}=gt.get();return r.autoApproveEnabled?W4(e,r.autoApprovePatterns):!1}async#c(e,r,n){e.type!=="file"&&Es("Expected file action");let s=$r.dirname(n);if(s=s.replace(/\/+$/g,""),s!==".")try{await r.fs.mkdir(s,{recursive:!0}),Wt.debug("Created folder",s)}catch(i){Wt.error(`Failed to create folder

`,i)}try{await r.fs.writeFile(n,e.content),Wt.debug(`File written ${n}`)}catch(i){Wt.error(`Failed to write file

`,i)}}async applyAcceptedChange(e,r){try{const n=await this.#r,s=$r.relative(n.workdir,e);let i=$r.dirname(s);return i=i.replace(/\/+$/g,""),i!=="."&&await n.fs.mkdir(i,{recursive:!0}),await n.fs.writeFile(s,r),Wt.info(`Accepted change applied: ${s}`),!0}catch(n){return Wt.error(`Failed to apply accepted change: ${e}`,n),!1}}async deleteFile(e){try{const r=await this.#r,n=$r.relative(r.workdir,e);return await r.fs.rm(n),Wt.info(`File deleted: ${n}`),!0}catch(r){return Wt.error(`Failed to delete file: ${e}`,r),!1}}#a(e,r){const n=this.actions.get();this.actions.setKey(e,{...n[e],...r})}async getFileHistory(e){try{const r=await this.#r,n=this.#u(e),s=await r.fs.readFile(n,"utf-8");return JSON.parse(s)}catch(r){return Wt.error("Failed to get file history:",r),null}}async saveFileHistory(e,r){const n=this.#u(e);await this.#i({type:"file",filePath:n,content:JSON.stringify(r),changeSource:"auto-save"})}#u(e){return $r.join(".history",e)}async#d(e){e.type!=="build"&&Es("Expected build action"),this.onDeployAlert?.({type:"info",title:"Building Application",description:"Building your application...",stage:"building",buildStatus:"running",deployStatus:"pending",source:"netlify"});const r=await this.#r,n=await r.spawn("npm",["run","build"]);let s="";n.output.pipeTo(new WritableStream({write(l){s+=l}}));const i=await n.exit;if(i!==0)throw this.onDeployAlert?.({type:"error",title:"Build Failed",description:"Your application build failed",content:s||"No build output available",stage:"building",buildStatus:"failed",deployStatus:"pending",source:"netlify"}),new zl("Build Failed",s||"No Output Available");this.onDeployAlert?.({type:"success",title:"Build Completed",description:"Your application was built successfully",stage:"deploying",buildStatus:"complete",deployStatus:"running",source:"netlify"});const o=["dist","build","out","output",".next","public"];let a="";for(const l of o){const c=$r.join(r.workdir,l);try{await r.fs.readdir(c),a=c;break}catch{continue}}return a||(a=$r.join(r.workdir,"dist")),{path:a,exitCode:i,output:s}}async handleSupabaseAction(e){const{operation:r,content:n,filePath:s}=e;switch(Wt.debug("[Supabase Action]:",{operation:r,filePath:s,content:n}),r){case"migration":if(!s)throw new Error("Migration requires a filePath");return this.onSupabaseAlert?.({type:"info",title:"Supabase Migration",description:`Create migration file: ${s}`,content:n,source:"supabase"}),await this.#i({type:"file",filePath:s,content:n,changeSource:"supabase"}),{success:!0};case"query":return this.onSupabaseAlert?.({type:"info",title:"Supabase Query",description:"Execute database query",content:n,source:"supabase"}),{pending:!0};default:throw new Error(`Unknown operation: ${r}`)}}handleDeployAction(e,r,n){if(!this.onDeployAlert){Wt.debug("No deploy alert handler registered");return}const s=r==="failed"?"error":r==="complete"?"success":"info",i=e==="building"?"Building Application":e==="deploying"?"Deploying Application":"Deployment Complete",o=r==="failed"?`${e==="building"?"Build":"Deployment"} failed`:r==="running"?`${e==="building"?"Building":"Deploying"} your application...`:r==="complete"?`${e==="building"?"Build":"Deployment"} completed successfully`:`Preparing to ${e==="building"?"build":"deploy"} your application`,a=e==="building"?r:e==="deploying"||e==="complete"?"complete":"pending",l=e==="building"?"pending":r;this.onDeployAlert({type:s,title:i,description:o,content:n?.error||"",url:n?.url,stage:e,buildStatus:a,deployStatus:l,source:n?.source||"netlify"})}async#h(e){const r=e.trim();if(r.startsWith("rm ")&&!r.includes(" -f")){const n=r.match(/^rm\s+(.+)$/);if(n){const s=n[1].split(/\s+/);try{const i=await this.#r,o=[];for(const a of s)if(!a.startsWith("-"))try{await i.fs.readFile(a),o.push(a)}catch{}if(o.length===0)return{shouldModify:!0,modifiedCommand:`rm -f ${s.join(" ")}`,warning:"Added -f flag to rm command as target files do not exist"};if(o.length<s.length)return{shouldModify:!0,modifiedCommand:`rm -f ${s.join(" ")}`,warning:"Added -f flag to rm command as some target files do not exist"}}catch(i){Wt.debug("Could not validate rm command files:",i)}}}if(r.startsWith("cd ")){const n=r.match(/^cd\s+(.+)$/);if(n){const s=n[1].trim();try{await(await this.#r).fs.readdir(s)}catch{return{shouldModify:!0,modifiedCommand:`mkdir -p ${s} && cd ${s}`,warning:"Directory does not exist, created it first"}}}}if(r.match(/^(cp|mv)\s+/)){const n=r.split(/\s+/);if(n.length>=3){const s=n[1];try{await(await this.#r).fs.readFile(s)}catch{return{shouldModify:!1,warning:`Source file '${s}' does not exist`}}}}return{shouldModify:!1}}#f(e,r,n){const s=e.trim(),i=s.split(/\s+/)[0],o=[{pattern:/cannot remove.*No such file or directory/,title:"File Not Found",getMessage:()=>{const l=n?.match(/'([^']+)'/);return`The file '${l?l[1]:"file"}' does not exist and cannot be removed.

Suggestion: Use 'ls' to check what files exist, or use 'rm -f' to ignore missing files.`}},{pattern:/No such file or directory/,title:"File or Directory Not Found",getMessage:()=>{if(s.startsWith("cd ")){const l=s.match(/cd\s+(.+)/),c=l?l[1]:"directory";return`The directory '${c}' does not exist.

Suggestion: Use 'mkdir -p ${c}' to create it first, or check available directories with 'ls'.`}return`The specified file or directory does not exist.

Suggestion: Check the path and use 'ls' to see available files.`}},{pattern:/Permission denied/,title:"Permission Denied",getMessage:()=>`Permission denied for '${i}'.

Suggestion: The file may not be executable. Try 'chmod +x filename' first.`},{pattern:/command not found/,title:"Command Not Found",getMessage:()=>`The command '${i}' is not available in WebContainer.

Suggestion: Check available commands or use a package manager to install it.`},{pattern:/Is a directory/,title:"Target is a Directory",getMessage:()=>`Cannot perform this operation - target is a directory.

Suggestion: Use 'ls' to list directory contents or add appropriate flags.`},{pattern:/File exists/,title:"File Already Exists",getMessage:()=>`File already exists.

Suggestion: Use a different name or add '-f' flag to overwrite.`}];for(const l of o)if(n&&l.pattern.test(n))return{title:l.title,details:l.getMessage()};let a="";return s.startsWith("npm ")?a=`

Suggestion: Try running "npm install" first or check package.json.`:s.startsWith("git ")?a=`

Suggestion: Check if you're in a git repository or if remote is configured.`:s.match(/^(ls|cat|rm|cp|mv)/)&&(a=`

Suggestion: Check file paths and use "ls" to see available files.`),{title:`Command Failed (exit code: ${r})`,details:`Command: ${s}

Output: ${n||"No output available"}${a}`}}async#p(e){try{const r=e.content.trim(),n=JSON.parse(r);if(!n.tasks||!Array.isArray(n.tasks)){Wt.error("[Plan] Invalid plan data: tasks array is required");return}const s=n.tasks.map(i=>({id:i.id,title:i.title,description:i.description,status:"not-started",fileActions:i.fileActions}));Ooe(s,e.planTitle||n.title),Wt.info(`[Plan] Created plan with ${s.length} tasks`)}catch(r){Wt.error("[Plan] Failed to parse plan action:",r)}}async#m(e){try{const{taskId:r,taskStatus:n}=e;if(!r||!n){Wt.error("[TaskUpdate] Missing taskId or taskStatus");return}Loe(r,n),Wt.info(`[TaskUpdate] Updated task ${r} to status: ${n}`)}catch(r){Wt.error("[TaskUpdate] Failed to update task:",r)}}}const joe="https://stackblitz.com",Foe=new Error;Foe.stack="";const dx={};let cg=null;const hx={get editorOrigin(){return cg==null&&(cg=new URL(globalThis.WEBCONTAINER_API_IFRAME_URL??joe).origin),cg},set editorOrigin(t){cg=new URL(t).origin},setQueryParam(t,e){dx[t]=e},get url(){const t=new URL(this.editorOrigin);t.pathname="/headless";for(const e in dx)t.searchParams.set(e,dx[e]);return t.searchParams.set("version","1.6.1-internal.1"),t}};function Boe(){let t,e;function r(){e=new Promise(n=>t=n)}return r(),{get promise(){return e},resolve(n){return t(n)},reset:r}}Boe();var ef;(function(t){t.UncaughtException="PREVIEW_UNCAUGHT_EXCEPTION",t.UnhandledRejection="PREVIEW_UNHANDLED_REJECTION",t.ConsoleError="PREVIEW_CONSOLE_ERROR"})(ef||(ef={}));var $oe=Object.defineProperty,Uoe=(t,e)=>{for(var r in e)$oe(t,r,{get:e[r],enumerable:!0})},ps={};Uoe(ps,{createEndpoint:()=>MF,expose:()=>zT,proxy:()=>zF,proxyMarker:()=>UT,releaseProxy:()=>jF,transfer:()=>HF,transferHandlers:()=>HT,windowEndpoint:()=>Goe,wrap:()=>$F});var UT=Symbol("Comlink.proxy"),MF=Symbol("Comlink.endpoint"),jF=Symbol("Comlink.releaseProxy"),vS=Symbol("Comlink.thrown"),FF=t=>typeof t=="object"&&t!==null||typeof t=="function",Hoe={canHandle:t=>FF(t)&&t[UT],serialize(t){const{port1:e,port2:r}=new MessageChannel;return zT(t,e),[r,[r]]},deserialize(t){return t.start(),$F(t)}},zoe={canHandle:t=>FF(t)&&vS in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},HT=new Map([["proxy",Hoe],["throw",zoe]]);function zT(t,e=self){e.addEventListener("message",function r(n){if(!n||!n.data)return;const{id:s,type:i,path:o}=Object.assign({path:[]},n.data),a=(n.data.argumentList||[]).map(Wl);let l;try{const c=o.slice(0,-1).reduce((d,h)=>d[h],t),u=o.reduce((d,h)=>d[h],t);switch(i){case 0:l=u;break;case 1:c[o.slice(-1)[0]]=Wl(n.data.value),l=!0;break;case 2:l=u.apply(c,a);break;case 3:{const d=new u(...a);l=zF(d)}break;case 4:{const{port1:d,port2:h}=new MessageChannel;zT(t,h),l=HF(d,[d])}break;case 5:l=void 0;break}}catch(c){l={value:c,[vS]:0}}Promise.resolve(l).catch(c=>({value:c,[vS]:0})).then(c=>{const[u,d]=WT(c);e.postMessage(Object.assign(Object.assign({},u),{id:s}),d),i===5&&(e.removeEventListener("message",r),BF(e))})}),e.start&&e.start()}function Woe(t){return t.constructor.name==="MessagePort"}function BF(t){Woe(t)&&t.close()}function $F(t,e){return _S(t,[],e)}function ug(t){if(t)throw new Error("Proxy has been released and is not useable")}function _S(t,e=[],r=function(){}){let n=!1;const s=new Proxy(r,{get(i,o){if(ug(n),o===jF)return()=>ru(t,{type:5,path:e.map(a=>a.toString())}).then(()=>{BF(t),n=!0});if(o==="then"){if(e.length===0)return{then:()=>s};const a=ru(t,{type:0,path:e.map(l=>l.toString())}).then(Wl);return a.then.bind(a)}return _S(t,[...e,o])},set(i,o,a){ug(n);const[l,c]=WT(a);return ru(t,{type:1,path:[...e,o].map(u=>u.toString()),value:l},c).then(Wl)},apply(i,o,a){ug(n);const l=e[e.length-1];if(l===MF)return ru(t,{type:4}).then(Wl);if(l==="bind")return _S(t,e.slice(0,-1));const[c,u]=iI(a);return ru(t,{type:2,path:e.map(d=>d.toString()),argumentList:c},u).then(Wl)},construct(i,o){ug(n);const[a,l]=iI(o);return ru(t,{type:3,path:e.map(c=>c.toString()),argumentList:a},l).then(Wl)}});return s}function Voe(t){return Array.prototype.concat.apply([],t)}function iI(t){const e=t.map(WT);return[e.map(r=>r[0]),Voe(e.map(r=>r[1]))]}var UF=new WeakMap;function HF(t,e){return UF.set(t,e),t}function zF(t){return Object.assign(t,{[UT]:!0})}function Goe(t,e=self,r="*"){return{postMessage:(n,s)=>t.postMessage(n,r,s),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function WT(t){for(const[e,r]of HT)if(r.canHandle(t)){const[n,s]=r.serialize(t);return[{type:3,name:e,value:n},s]}return[{type:0,value:t},UF.get(t)||[]]}function Wl(t){switch(t.type){case 3:return HT.get(t.name).deserialize(t.value);case 0:return t.value}}function ru(t,e,r){return new Promise(n=>{const s=qoe();t.addEventListener("message",function i(o){!o.data||!o.data.id||o.data.id!==s||(t.removeEventListener("message",i),n(o.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),r)})}function qoe(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const Koe=[ef.ConsoleError,ef.UncaughtException,ef.UnhandledRejection];function Yoe(t){return!(t==null||typeof t!="object"||!("type"in t)||!Koe.includes(t.type))}function nu(t){const e=Object.create(null);return t?Object.assign(e,t):e}const Xoe=new TextDecoder("latin1");function WF(t){const e={d:{}};for(const r of Object.keys(t)){const n=t[r];if("file"in n){if("symlink"in n.file){e.d[r]={f:{l:n.file.symlink}};continue}const i=n.file.contents,o=typeof i=="string"?i:Xoe.decode(i),a=typeof i=="string"?{}:{b:!0};e.d[r]={f:{c:o,...a}};continue}const s=WF(n.directory);e.d[r]=s}return e}function VF(t){const e=nu();if("f"in t)throw new Error("It is not possible to export a single file in the JSON format.");if("d"in t)for(const r of Object.keys(t.d)){const n=t.d[r];"d"in n?e[r]=nu({directory:VF(n)}):"f"in n&&("c"in n.f?e[r]=nu({file:nu({contents:n.f.b?Joe(n.f.c):n.f.c})}):"l"in n.f&&(e[r]=nu({file:nu({symlink:n.f.l})})))}return e}function Joe(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t[r].charCodeAt(0);return e}let dg=null,hg=null,fx={};const GF=new TextDecoder,Zoe=new TextEncoder;class jo{_instance;_runtimeInfo;fs;internal;static _instance=null;static _teardownPromise=null;_tornDown=!1;_unsubscribeFromTokenChangedListener=()=>{};constructor(e,r,n,s){this._instance=e,this._runtimeInfo=s,this.fs=new iae(r);const i=new oae(n);this.internal=new Qoe(i,e)}async spawn(e,r,n){let s=[];Array.isArray(r)?s=r:n=r;let i,o=new ReadableStream;if(n?.output!==!1){const m=mx();i=m.push,o=m.stream}let a,l,c,u;if(l=new ReadableStream,u=new ReadableStream,n?.stdout){const m=mx();a=m.push,l=m.stream}if(n?.stderr){const m=mx();c=m.push,u=m.stream}const d=D0(px(i)),h=D0(px(a)),f=D0(px(c)),b=await this._instance.run({command:e,args:s,cwd:n?.cwd,env:n?.env,terminal:n?.terminal},h,f,d);return new sae(b,o,l,u)}async export(e,r){const n={format:r?.format??"json",includes:r?.includes,excludes:r?.excludes,external:!0},s=await this._instance.serialize(e,n);if(n.format==="json"){const i=JSON.parse(GF.decode(s));return VF(i)}return s}on(e,r){if(e==="preview-message"){const i=r;r=o=>{Yoe(o)&&i(o)}}const{listener:n,subscribe:s}=Pb(r);return s(this._instance.on(e,ps.proxy(n)))}mount(e,r){const n=e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):Zoe.encode(JSON.stringify(WF(e)));return this._instance.loadFiles(ps.transfer(n,[n.buffer]),{mountPoints:r?.mountPoint})}setPreviewScript(e,r){return this._instance.setPreviewScript(e,r)}get path(){return this._runtimeInfo.path}get workdir(){return this._runtimeInfo.cwd}teardown(){if(this._tornDown)throw new Error("WebContainer already torn down");this._tornDown=!0,this._unsubscribeFromTokenChangedListener();const e=async()=>{try{await this.fs._teardown(),await this._instance.teardown()}finally{this._instance[ps.releaseProxy](),jo._instance===this&&(jo._instance=null)}};jo._teardownPromise=e()}static async boot(e={}){await this._teardownPromise,jo._teardownPromise=null;const{workdirName:r}=e;if(window.crossOriginIsolated&&e.coep==="none"&&console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.
Set the 'coep' option to 'require-corp'.`),r?.includes("/")||r===".."||r===".")throw new Error("workdirName should be a valid folder name");for(;dg;)await dg;if(jo._instance)throw new Error("Only a single WebContainer instance can be booted");const n=aae(e);dg=n.catch(()=>{});try{const s=await n;return jo._instance=s,s}finally{dg=null}}}class Qoe{previewScript;_instance;constructor(e,r){this.previewScript=e,this._instance=r}watchPaths(e,r){const{listener:n,subscribe:s}=Pb(r);return s(this._instance.watchPaths(e,ps.proxy(n)))}fileSearch(e,r,n){return this._instance.fileSearch(e,r,n)}textSearch(e,r,n){return this._instance.textSearch(e,r,ps.proxy(n))}getProcesses(){return this._instance.getProcesses()}onProcessesRemove(e){const{listener:r,subscribe:n}=Pb(e);return n(this._instance.onProcessesRemove(ps.proxy(r)))}serialize(e,r){return this._instance.serialize(e,r)}setCORSProxy(e){return this._instance.setCORSProxy(e)}setCORSAuthToken(e){return this._instance.setCORSAuthToken(e)}}const eae=1,tae=2;class rae{name;_type;constructor(e,r){this.name=e,this._type=r}isFile(){return this._type===eae}isDirectory(){return this._type===tae}}class nae{_apiClient;_path;_options;_listener;_wrappedListener;_watcher;_closed=!1;constructor(e,r,n,s){this._apiClient=e,this._path=r,this._options=n,this._listener=s,this._apiClient._watchers.add(this),this._wrappedListener=(i,o)=>{this._listener&&!this._closed&&this._listener(i,o)},this._apiClient._fs.watch(this._path,this._options,D0(this._wrappedListener)).then(i=>{if(this._watcher=i,this._closed)return this._teardown()}).catch(console.error)}async close(){this._closed||(this._closed=!0,this._apiClient._watchers.delete(this),await this._teardown())}async _teardown(){await this._watcher?.close().finally(()=>{this._watcher?.[ps.releaseProxy]()})}}class sae{output;input;exit;_process;stdout;stderr;constructor(e,r,n,s){this.output=r,this._process=e,this.input=new WritableStream({write:i=>{this._getProcess()?.write(i).catch(()=>{})}}),this.exit=this._onExit(),this.stdout=n,this.stderr=s}kill(){this._process?.kill()}resize(e){this._getProcess()?.resize(e)}async _onExit(){try{return await this._process.onExit}finally{this._process?.[ps.releaseProxy](),this._process=null}}_getProcess(){return this._process==null&&console.warn("This process already exited"),this._process}}class iae{_fs;_watchers=new Set([]);constructor(e){this._fs=e}rm(...e){return this._fs.rm(...e)}async readFile(e,r){return await this._fs.readFile(e,r)}async rename(e,r){return await this._fs.rename(e,r)}async writeFile(e,r,n){if(r instanceof Uint8Array){const s=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength);r=ps.transfer(new Uint8Array(s),[s])}await this._fs.writeFile(e,r,n)}async readdir(e,r){const n=await this._fs.readdir(e,r);return cae(n)||uae(n)?n:n.map(i=>new rae(i.name,i["Symbol(type)"]))}async mkdir(e,r){return await this._fs.mkdir(e,r)}watch(e,r,n){return typeof r=="function"&&(n=r,r=null),new nae(this,e,r,n)}async _teardown(){this._fs[ps.releaseProxy](),await Promise.all([...this._watchers].map(e=>e.close()))}}class oae{_previewScript;_listeners=new Map;storage={set:e=>{this._previewScript.storageSet(structuredClone(e))},get:()=>this._previewScript.storageGet(),on:(e,r)=>this._on("storage:change",r)};constructor(e){this._previewScript=e}broadcast(e){this._previewScript.broadcast(structuredClone(e))}on(e,r){return this._on(e,r)}_on(e,r){let n=this._listeners.get(e);if(!n){const s=new Set,{listener:i,subscribe:o}=Pb(a=>{s.forEach(l=>l(a))});n={localListeners:s,remoteUnsubscribe:o(this._previewScript.on(e,ps.proxy(i)))},this._listeners.set(e,n)}return n.localListeners.add(r),()=>{const{localListeners:s,remoteUnsubscribe:i}=n;s.delete(r),s.size===0&&(i(),this._listeners.delete(e))}}}async function aae(t){const{serverPromise:e}=lae(t),n=await(await e).build({host:window.location.host,version:"1.6.1-internal.1",workdirName:t.workdirName,forwardPreviewErrors:t.forwardPreviewErrors}),[s,i,o]=await Promise.all([n.fs(),n.previewScript(),n.runtimeInfo()]);return new jo(n,s,i,o)}function px(t){if(t!=null)return e=>{e instanceof Uint8Array?t(GF.decode(e)):e==null&&t(null)}}function D0(t){if(t!=null)return ps.proxy(t)}function lae(t){if(hg!=null)return t.coep!==fx.coep&&(console.warn(`Attempting to boot WebContainer with 'coep: ${t.coep}'`),console.warn(`First boot had 'coep: ${fx.coep}', new settings will not take effect!`)),{serverPromise:hg};t.coep&&hx.setQueryParam("coep",t.coep),t.experimentalNode&&hx.setQueryParam("experimental_node","1");const e=document.createElement("iframe");e.style.display="none",e.setAttribute("allow","cross-origin-isolated");const r=hx.url;e.src=r.toString();const{origin:n}=r;return fx={...t},hg=new Promise(s=>{const i=o=>{if(o.origin!==n)return;const{data:a}=o;if(a.type==="init"){s(ps.wrap(o.ports[0]));return}if(a.type==="warning"){console[a.level].call(console,a.message);return}};window.addEventListener("message",i)}),document.body.insertBefore(e,null),{serverPromise:hg}}function cae(t){return typeof t[0]=="string"}function uae(t){return t[0]instanceof Uint8Array}function mx(){let t=null;return{stream:new ReadableStream({start(n){t=n}}),push:n=>{n!=null?t?.enqueue(n):(t?.close(),t=null)}}}function Pb(t){let e=!1,r=()=>{};return{subscribe(s){return s.then(i=>{r=i,e&&r()}),()=>{e=!0,r()}},listener:(...s)=>{e||t(...s)}}}function dae(t){const e=r=>{if(!/^https?:\/\/[^\/]+\.webcontainer-api\.io(\/.*)?$/.test(r))return r;const s=/^https?:\/\/[^\/]+\.webcontainer-api\.io\/(.*?)$/;return r.match(s)?.[1]||""};return t.split(`
`).map(r=>r.replace(/(https?:\/\/[^\/]+\.webcontainer-api\.io\/[^\s\)]+)/g,n=>e(n))).join(`
`)}const hae=[{pattern:/source\s*map.*404|\.map\s+404|failed.*source\s*map/i,reason:"Source map loading failures are development-only and non-actionable",categories:["preview","network"]},{pattern:/Failed to load resource:.*\.map$/i,reason:"Source map files missing is a non-critical issue",categories:["preview","network"]},{pattern:/Data read,?\s*but end of buffer not reached/i,reason:"Spline/3D library internal parsing - usually self-recovers",categories:["preview"]},{pattern:/splinetool.*buffer|three\.?js.*buffer/i,reason:"Known 3D library buffer handling issue",categories:["preview"]},{pattern:/prod\.spline\.design.*403|spline.*forbidden/i,reason:"Spline CDN blocked in WebContainer - expected behavior",categories:["preview","network"]},{pattern:/@splinetool\/.*error|splinetool.*failed/i,reason:"Spline library loading issue in WebContainer environment",categories:["preview"]},{pattern:/Invalid URI\. Load of media resource.*failed/i,reason:"Media resource loading failure - common with 3D assets",categories:["preview","network"]},{pattern:/\[hmr\].*failed|hmr.*update.*failed/i,reason:"HMR failures auto-recover on next save",categories:["preview","terminal"]},{pattern:/\[vite\].*hmr.*invalidate/i,reason:"HMR invalidation is normal development behavior",categories:["preview"]},{pattern:/websocket.*connection.*closed|ws:\/\/.*failed/i,reason:"WebSocket reconnection is automatic",categories:["preview","network"]},{pattern:/chrome-extension:\/\/|moz-extension:\/\//i,reason:"Browser extension errors are not from user code",categories:["preview"]},{pattern:/React\.StrictMode|strictMode.*double/i,reason:"Strict mode behavior is intentional and informational",categories:["preview"]},{pattern:/Download the React DevTools|React does not recognize the/i,reason:"Development hints, not errors",categories:["preview"]},{pattern:/Failed to decode downloaded font|OTS parsing error/i,reason:"Font loading failures have fallbacks",categories:["preview","network"]},{pattern:/favicon\.ico.*404|Failed to load.*favicon/i,reason:"Missing favicon is non-critical",categories:["preview","network"]}],fae=[{pattern:/Cannot find module ['"](.+?)['"]/i,title:"Missing Dependency",description:"A required package is not installed.",suggestion:'Try running "npm install" or check if the package name is correct.',severity:"critical"},{pattern:/Failed to resolve import ['"](.+?)['"]/i,title:"Import Not Found",description:"Unable to find the imported file or module.",suggestion:"Check the import path and ensure the file exists.",severity:"critical"},{pattern:/Module not found/i,title:"Module Not Found",description:"A module could not be located.",suggestion:"Verify the module is installed and the import path is correct.",severity:"critical"},{pattern:/SyntaxError:\s*(.+)/i,title:"Syntax Error",description:"There is a syntax mistake in the code.",suggestion:"Check for missing brackets, quotes, or typos.",severity:"critical"},{pattern:/Unexpected token/i,title:"Unexpected Token",description:"The code contains an unexpected character or symbol.",suggestion:"Look for misplaced punctuation or incomplete statements.",severity:"critical"},{pattern:/error TS\d+:/i,title:"TypeScript Error",description:"TypeScript found a type-related issue.",suggestion:"Review the type annotations and ensure they match.",severity:"critical"},{pattern:/Type ['"](.+?)['"] is not assignable/i,title:"Type Mismatch",description:"The types do not match what is expected.",suggestion:"Check if you are using the correct type.",severity:"warning"},{pattern:/Invalid hook call/i,title:"Invalid Hook Call",description:"React hooks are being used incorrectly.",suggestion:"Hooks must be called at the top level of a function component.",severity:"critical"},{pattern:/not valid inside a JSX element/i,title:"JSX Syntax Error",description:"Invalid character found in JSX.",suggestion:"Check for unescaped characters like < or > in text.",severity:"critical"},{pattern:/fetch.*failed|network.*error|ERR_NETWORK/i,title:"Network Error",description:"Unable to connect to the network.",suggestion:"Check your internet connection or the API endpoint.",severity:"warning"},{pattern:/CORS.*error|blocked by CORS/i,title:"CORS Error",description:"Cross-origin request was blocked.",suggestion:"The API may need to allow requests from your domain.",severity:"warning"},{pattern:/Build failed/i,title:"Build Failed",description:"The project could not be built.",suggestion:"Check the error details above for specific issues.",severity:"critical"},{pattern:/Port \d+ is.*in use/i,title:"Port Already in Use",description:"Another application is using the required port.",suggestion:"Close the other application or use a different port.",severity:"warning"},{pattern:/TypeError:\s*(.+)/i,title:"Type Error",description:"A value was used in an unexpected way.",suggestion:"Check if variables are defined and have the expected type.",severity:"critical"},{pattern:/ReferenceError:\s*(.+)/i,title:"Reference Error",description:"Trying to use a variable that does not exist.",suggestion:"Make sure the variable is defined before using it.",severity:"critical"},{pattern:/RangeError:\s*(.+)/i,title:"Range Error",description:"A number is outside its allowed range.",suggestion:"Check array indices and numeric operations.",severity:"critical"}],pae={critical:{priority:3,showAlert:!0,icon:"i-ph:x-circle-duotone",color:"text-red-500"},warning:{priority:2,showAlert:!0,icon:"i-ph:warning-duotone",color:"text-yellow-500"},info:{priority:1,showAlert:!1,icon:"i-ph:info-duotone",color:"text-blue-500"}},mae=[/SyntaxError.*module|module.*SyntaxError/i,/does not provide an export named/i,/Cannot find module/i,/Module not found/i,/Failed to resolve import/i,/TypeError.*undefined|TypeError.*null/i,/ReferenceError/i];function gae(t,e="preview"){return mae.some(n=>n.test(t))?!1:hae.some(({pattern:n,categories:s})=>n.test(t)&&s.includes(e))}function qF(t){for(const e of fae)if(e.pattern.test(t))return{title:e.title,description:e.description,suggestion:e.suggestion,severity:e.severity};return null}function bae(t,e){const r=`${t} ${e||""}`,n=qF(t);return n?n.severity:/error|failed|cannot|unable|exception/i.test(t)?"critical":/warning|deprecated|warn/i.test(r)?"warning":"info"}const yi=Qt("AutoFixStore"),gx={isEnabled:!0,maxRetries:3,delayBetweenAttempts:1e3,showNotifications:!0};function yae(){if(typeof window>"u")return gx;try{const t=localStorage.getItem("devonz_autofix_settings");if(t){const e=JSON.parse(t);return{...gx,...e}}}catch(t){yi.error("Failed to load auto-fix settings:",t)}return gx}function vae(t){if(!(typeof window>"u"))try{localStorage.setItem("devonz_autofix_settings",JSON.stringify(t))}catch(e){yi.error("Failed to save auto-fix settings:",e)}}const KF={settings:yae(),currentRetries:0,isFixing:!1,currentError:null,fixHistory:[],sessionStartTime:null},dn=js(KF),_ae=bt(KF.settings.isEnabled),YF=bt(!1),XF=bt(0);dn.subscribe(t=>{_ae.set(t.settings.isEnabled),YF.set(t.isFixing),XF.set(t.currentRetries)});function r8e(t){const e=dn.get(),r={...e.settings,...t};dn.set({...e,settings:r}),vae(r),yi.info("Auto-fix settings updated:",t)}function JF(t){const e=dn.get();return e.settings.isEnabled?e.currentRetries>=e.settings.maxRetries?(yi.warn(`Max retries (${e.settings.maxRetries}) reached, stopping auto-fix`),!1):e.isFixing?(yi.debug("Already fixing, queuing error"),!1):(dn.set({...e,isFixing:!0,currentError:t,currentRetries:e.currentRetries+1,sessionStartTime:e.sessionStartTime??Date.now()}),yi.info(`Starting auto-fix attempt ${e.currentRetries+1}/${e.settings.maxRetries}`,{errorType:t.type,source:t.source}),!0):(yi.debug("Auto-fix is disabled, skipping"),!1)}function ZF(t){const e=dn.get();if(!e.currentError){yi.warn("No current error to record fix attempt for");return}const r={timestamp:Date.now(),errorType:e.currentError.type,errorMessage:e.currentError.message,errorContent:e.currentError.content,wasSuccessful:t,duration:e.sessionStartTime?Date.now()-e.sessionStartTime:void 0};dn.set({...e,isFixing:!1,currentError:t?null:e.currentError,fixHistory:[...e.fixHistory,r]}),t?(yi.info("Auto-fix successful!"),QF()):yi.info(`Auto-fix attempt failed, ${e.settings.maxRetries-e.currentRetries} retries remaining`)}function xae(){ZF(!0)}function QF(){const t=dn.get();dn.set({...t,currentRetries:0,isFixing:!1,currentError:null,fixHistory:[],sessionStartTime:null}),yi.debug("Auto-fix session reset")}function e6(){const t=dn.get();return t.settings.isEnabled&&!t.isFixing&&t.currentRetries<t.settings.maxRetries}function t6(){const t=dn.get();return t.currentRetries>=t.settings.maxRetries}function wae(){const t=dn.get();return t.fixHistory.length===0?"":`
**Previous Fix Attempts:**
${t.fixHistory.map((r,n)=>`Attempt ${n+1}: ${r.wasSuccessful?"Success":"Failed"} - ${r.errorType}: ${r.errorMessage}`).join(`
`)}`}function r6(){const t=dn.get();return{isActive:t.isFixing,currentAttempt:t.currentRetries,maxAttempts:t.settings.maxRetries,errorType:t.currentError?.type??null}}const Ws=Qt("PreviewErrorHandler");let tf=null;function Sae(t){tf=t,Ws.debug("Preview auto-fix callback registered")}function Eae(){tf=null,Ws.debug("Preview auto-fix callback unregistered")}function Cae(t){let e=0;const r=t.replace(/\d+/g,"N").slice(0,200);for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);e=(e<<5)-e+s,e=e&e}return e.toString(16)}class Tae{#r=0;#e=new Set;#n=!0;#t=null;#s=5e3;#o=6e4;constructor(){this.#t=setInterval(()=>this.#l(),this.#o)}destroy(){this.#t&&(clearInterval(this.#t),this.#t=null),this.#e.clear(),Ws.debug("PreviewErrorHandler destroyed")}setEnabled(e){this.#n=e,Ws.debug(`Preview error handling ${e?"enabled":"disabled"}`)}async handlePreviewMessage(e){if(!this.#n||e.type!=="PREVIEW_UNCAUGHT_EXCEPTION"&&e.type!=="PREVIEW_UNHANDLED_REJECTION")return;const r=Date.now(),n=e.message||"Unknown error",s=`${n} ${e.stack||""}`,i=e.type==="PREVIEW_UNHANDLED_REJECTION";if(gae(s,"preview")){Ws.debug(`Suppressing non-actionable preview error: ${n.slice(0,100)}`);return}const o=bae(n,e.stack);if(!pae[o].showAlert){Ws.debug(`Skipping ${o} severity preview error (no alert): ${n.slice(0,100)}`);return}const a=Cae(n+(e.stack||""));if(r-this.#r<this.#s){Ws.debug("Skipping preview alert due to cooldown");return}if(this.#e.has(a)){Ws.debug("Skipping duplicate preview error");return}this.#e.add(a),this.#r=r;const l=qF(n),c=l?.title||(i?"Unhandled Promise Rejection":"Uncaught Exception"),u=l?.description||n,d=l?.suggestion||"",h=[];h.push(`Error occurred at ${e.pathname||"/"}${e.search||""}${e.hash||""}`),h.push(`Port: ${e.port||"unknown"}`),d&&h.push(`
 Suggestion: ${d}`),h.push(`

Stack trace:
${dae(e.stack||"")}`);const f=h.join(`
`),b=this.#i(n);if(b&&e6()&&tf&&JF({source:"preview",type:o,message:u,content:f})&&tf){Ws.info(`Auto-fix triggered for preview error: ${c}`);const v=dn.get();setTimeout(()=>{tf?.({source:"preview",type:o,message:u,content:f})},v.settings.delayBetweenAttempts);return}b&&t6()&&Ws.warn("Max auto-fix retries exceeded for preview error, showing alert to user");const{workbenchStore:g}=await Z(async()=>{const{workbenchStore:y}=await Promise.resolve().then(()=>Ece);return{workbenchStore:y}},void 0);g.actionAlert.set({type:"preview",title:c,description:u,content:f,source:"preview"}),Ws.info(`Preview error detected [${o}]: ${c} - ${n.slice(0,100)}`)}#i(e){return[/SyntaxError/i,/TypeError/i,/ReferenceError/i,/Cannot find module/i,/Module not found/i,/does not provide an export/i,/Failed to resolve import/i,/Unexpected token/i,/is not defined/i,/is not a function/i,/Cannot read propert/i].some(n=>n.test(e))}reset(){this.#e.clear(),this.#r=0,Ws.debug("Preview error handler reset")}#l(){this.#e.size>50&&this.#e.clear()}}let bx=null;function Ib(){return bx||(bx=new Tae),bx}function n6(){Ib().reset()}let ls=new Promise(()=>{});ls=Promise.resolve().then(()=>jo.boot({coep:"credentialless",workdirName:_K,forwardPreviewErrors:!0})).then(async t=>{const r=await(await fetch("/inspector-script.js")).text();return await t.setPreviewScript(r),t.on("preview-message",n=>{console.log("WebContainer preview message:",n),Ib().handlePreviewMessage(n)}),t});const kae=Qt("EditorStore");class Aae{#r;selectedFile=bt();documents=js({});currentDocument=Fr([this.documents,this.selectedFile],(e,r)=>{if(r)return e[r]});constructor(e){this.#r=e}setDocuments(e){const r=this.documents.value;this.documents.set(Object.fromEntries(Object.entries(e).map(([n,s])=>{if(s===void 0||s.type!=="file")return;const i=r?.[n];return[n,{value:s.content,filePath:n,isBinary:s.isBinary,scroll:i?.scroll}]}).filter(Boolean)))}setSelectedFile(e){this.selectedFile.set(e)}updateScrollPosition(e,r){const s=this.documents.get()[e];s&&this.documents.setKey(e,{...s,scroll:r})}updateFile(e,r){const s=this.documents.get()[e];if(!s)return;if(this.#r.getFile(e)?.isLocked){kae.warn(`Attempted to update locked file: ${e}`);return}s.value!==r&&this.documents.setKey(e,{...s,value:r})}}function O0(t,e){if(!t)return null;const r="utf8",n="binary",s=e?.chunkLength??24;let i=e?.chunkBegin??0;if(e?.chunkBegin==null){let o=O0(t,{chunkLength:s,chunkBegin:i});return o===r&&(i=Math.max(0,Math.floor(t.length/2)-s),o=O0(t,{chunkLength:s,chunkBegin:i}),o===r&&(i=Math.max(0,t.length-s),o=O0(t,{chunkLength:s,chunkBegin:i}))),o}else{if(i=Rae(t,i),i===-1)return n;const o=Pae(t,Math.min(t.length,i+s));if(o>t.length)return n;const a=t.toString(r,i,o);for(let l=0;l<a.length;++l){const c=a.charCodeAt(l);if(c===65533||c<=8)return n}return r}}function Rae(t,e){if(e===0)return 0;if(!Iae(t[e]))return e;let r=e-3;return r>=0&&$u(t[r])||(r=e-2,r>=0&&($u(t[r])||Nb(t[r])))||(r=e-1,r>=0&&($u(t[r])||Nb(t[r])||s6(t[r])))?r:-1}function Pae(t,e){if(e===t.length)return e;let r=e-3;if(r>=0&&$u(t[r]))return e+1;if(r=e-2,r>=0){if($u(t[r]))return e+2;if(Nb(t[r]))return e+1}if(r=e-1,r>=0){if($u(t[r]))return e+3;if(Nb(t[r]))return e+2;if(s6(t[r]))return e+1}return e}function $u(t){return t>>3===30}function Nb(t){return t>>4===14}function s6(t){return t>>5===6}function Iae(t){return t>>6===2}function Nae(t,e){let r,n=[],s=Promise.resolve();const i=()=>{r=self.setTimeout(async()=>{await s,n.length>0&&(s=Promise.resolve(e(n))),r=void 0,n=[]},t)};return(...o)=>{n.push(o),r||i()}}function _l(){}_l.prototype={diff:function(e,r){var n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=s.callback;typeof s=="function"&&(i=s,s={}),this.options=s;var o=this;function a(x){return i?(setTimeout(function(){i(void 0,x)},0),!0):x}e=this.castInput(e),r=this.castInput(r),e=this.removeEmpty(this.tokenize(e)),r=this.removeEmpty(this.tokenize(r));var l=r.length,c=e.length,u=1,d=l+c;s.maxEditLength&&(d=Math.min(d,s.maxEditLength));var h=(n=s.timeout)!==null&&n!==void 0?n:1/0,f=Date.now()+h,b=[{oldPos:-1,lastComponent:void 0}],m=this.extractCommon(b[0],r,e,0);if(b[0].oldPos+1>=c&&m+1>=l)return a([{value:this.join(r),count:r.length}]);var g=-1/0,y=1/0;function v(){for(var x=Math.max(g,-u);x<=Math.min(y,u);x+=2){var w=void 0,S=b[x-1],T=b[x+1];S&&(b[x-1]=void 0);var E=!1;if(T){var C=T.oldPos-x;E=T&&0<=C&&C<l}var A=S&&S.oldPos+1<c;if(!E&&!A){b[x]=void 0;continue}if(!A||E&&S.oldPos+1<T.oldPos?w=o.addToPath(T,!0,void 0,0):w=o.addToPath(S,void 0,!0,1),m=o.extractCommon(w,r,e,x),w.oldPos+1>=c&&m+1>=l)return a(Dae(o,w.lastComponent,r,e,o.useLongestToken));b[x]=w,w.oldPos+1>=c&&(y=Math.min(y,x-1)),m+1>=l&&(g=Math.max(g,x+1))}u++}if(i)(function x(){setTimeout(function(){if(u>d||Date.now()>f)return i();v()||x()},0)})();else for(;u<=d&&Date.now()<=f;){var _=v();if(_)return _}},addToPath:function(e,r,n,s){var i=e.lastComponent;return i&&i.added===r&&i.removed===n?{oldPos:e.oldPos+s,lastComponent:{count:i.count+1,added:r,removed:n,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+s,lastComponent:{count:1,added:r,removed:n,previousComponent:i}}},extractCommon:function(e,r,n,s){for(var i=r.length,o=n.length,a=e.oldPos,l=a-s,c=0;l+1<i&&a+1<o&&this.equals(r[l+1],n[a+1]);)l++,a++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=a,l},equals:function(e,r){return this.options.comparator?this.options.comparator(e,r):e===r||this.options.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function Dae(t,e,r,n,s){for(var i=[],o;e;)i.push(e),o=e.previousComponent,delete e.previousComponent,e=o;i.reverse();for(var a=0,l=i.length,c=0,u=0;a<l;a++){var d=i[a];if(d.removed){if(d.value=t.join(n.slice(u,u+d.count)),u+=d.count,a&&i[a-1].added){var f=i[a-1];i[a-1]=i[a],i[a]=f}}else{if(!d.added&&s){var h=r.slice(c,c+d.count);h=h.map(function(m,g){var y=n[u+g];return y.length>m.length?y:m}),d.value=t.join(h)}else d.value=t.join(r.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var b=i[l-1];return l>1&&typeof b.value=="string"&&(b.added||b.removed)&&t.equals("",b.value)&&(i[l-2].value+=b.value,i.pop()),i}var oI=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,aI=/\S/,i6=new _l;i6.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!aI.test(t)&&!aI.test(e)};i6.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<e.length-1;r++)!e[r+1]&&e[r+2]&&oI.test(e[r])&&oI.test(e[r+2])&&(e[r]+=e[r+2],e.splice(r+1,2),r--);return e};var VT=new _l;VT.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var s=r[n];n%2&&!this.options.newlineIsToken?e[e.length-1]+=s:(this.options.ignoreWhitespace&&(s=s.trim()),e.push(s))}return e};function GT(t,e,r){return VT.diff(t,e,r)}var Oae=new _l;Oae.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var Lae=new _l;Lae.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function L0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L0=function(e){return typeof e}:L0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L0(t)}function yx(t){return Mae(t)||jae(t)||Fae(t)||Bae()}function Mae(t){if(Array.isArray(t))return xS(t)}function jae(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Fae(t,e){if(t){if(typeof t=="string")return xS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xS(t,e)}}function xS(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $ae=Object.prototype.toString,qf=new _l;qf.useLongestToken=!0;qf.tokenize=VT.tokenize;qf.castInput=function(t){var e=this.options,r=e.undefinedReplacement,n=e.stringifyReplacer,s=n===void 0?function(i,o){return typeof o>"u"?r:o}:n;return typeof t=="string"?t:JSON.stringify(wS(t,null,null,s),s,"  ")};qf.equals=function(t,e){return _l.prototype.equals.call(qf,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function wS(t,e,r,n,s){e=e||[],r=r||[],n&&(t=n(s,t));var i;for(i=0;i<e.length;i+=1)if(e[i]===t)return r[i];var o;if($ae.call(t)==="[object Array]"){for(e.push(t),o=new Array(t.length),r.push(o),i=0;i<t.length;i+=1)o[i]=wS(t[i],e,r,n,s);return e.pop(),r.pop(),o}if(t&&t.toJSON&&(t=t.toJSON()),L0(t)==="object"&&t!==null){e.push(t),o={},r.push(o);var a=[],l;for(l in t)t.hasOwnProperty(l)&&a.push(l);for(a.sort(),i=0;i<a.length;i+=1)l=a[i],o[l]=wS(t[l],e,r,n,l);e.pop(),r.pop()}else o=t;return o}var SS=new _l;SS.tokenize=function(t){return t.slice()};SS.join=SS.removeEmpty=function(t){return t};function Uae(t,e,r,n,s,i,o){o||(o={}),typeof o.context>"u"&&(o.context=4);var a=GT(r,n,o);if(!a)return;a.push({value:"",lines:[]});function l(y){return y.map(function(v){return" "+v})}for(var c=[],u=0,d=0,h=[],f=1,b=1,m=function(v){var _=a[v],x=_.lines||_.value.replace(/\n$/,"").split(`
`);if(_.lines=x,_.added||_.removed){var w;if(!u){var S=a[v-1];u=f,d=b,S&&(h=o.context>0?l(S.lines.slice(-o.context)):[],u-=h.length,d-=h.length)}(w=h).push.apply(w,yx(x.map(function(R){return(_.added?"+":"-")+R}))),_.added?b+=x.length:f+=x.length}else{if(u)if(x.length<=o.context*2&&v<a.length-2){var T;(T=h).push.apply(T,yx(l(x)))}else{var E,C=Math.min(x.length,o.context);(E=h).push.apply(E,yx(l(x.slice(0,C))));var A={oldStart:u,oldLines:f-u+C,newStart:d,newLines:b-d+C,lines:h};if(v>=a.length-2&&x.length<=o.context){var I=/\n$/.test(r),P=/\n$/.test(n),D=x.length==0&&h.length>A.oldLines;!I&&D&&r.length>0&&h.splice(A.oldLines,0,"\\ No newline at end of file"),(!I&&!D||!P)&&h.push("\\ No newline at end of file")}c.push(A),u=0,d=0,h=[]}f+=x.length,b+=x.length}},g=0;g<a.length;g++)m(g);return{oldFileName:t,newFileName:e,oldHeader:s,newHeader:i,hunks:c}}function o6(t){if(Array.isArray(t))return t.map(o6).join(`
`);var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader>"u"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader>"u"?"":"	"+t.newHeader));for(var r=0;r<t.hunks.length;r++){var n=t.hunks[r];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),e.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@"),e.push.apply(e,n.lines)}return e.join(`
`)+`
`}function Hae(t,e,r,n,s,i,o){return o6(Uae(t,e,r,n,s,i,o))}function zae(t,e){const r={};let n=!1;for(const[s,i]of e){const o=t[s];if(o?.type!=="file")continue;const a=Wae(s,i,o.content);a&&(n=!0,a.length>o.content.length?r[s]={type:"file",content:o.content}:r[s]={type:"diff",content:a})}if(n)return r}function Wae(t,e,r){let n=Hae(t,t,e,r);const s=`--- ${t}
+++ ${t}
`,i=n.indexOf(s);if(i>=0&&(n=n.slice(i+s.length)),n!=="")return n}const Vae=new RegExp(`^${us}/`);function fg(t){return t.replace(Vae,"")}const na=Qt("LockedFiles"),_v="bolt.lockedFiles";let Ho=null;const za=new Map;let vx=null;const Gae=300;function Wp(t,e=!1){return e&&!za.has(t)&&za.set(t,new Map),za.get(t)}function qae(){if(Ho!==null)return Ho;try{if(typeof localStorage<"u"){const t=localStorage.getItem(_v);if(t){const r=JSON.parse(t).map(n=>({...n,isFolder:n.isFolder!==void 0?n.isFolder:!1}));return Ho=r,a6(r),r}}return Ho=[],[]}catch(t){return na.error("Failed to initialize locked items cache",t),Ho=[],[]}}function a6(t){za.clear();for(const e of t)za.has(e.chatId)||za.set(e.chatId,new Map),za.get(e.chatId).set(e.path,e)}function qT(t){Ho=[...t],a6(t),vx&&clearTimeout(vx),vx=setTimeout(()=>{try{typeof localStorage<"u"&&(localStorage.setItem(_v,JSON.stringify(t)),na.info(`Saved ${t.length} locked items to localStorage`))}catch(e){na.error("Failed to save locked items to localStorage",e)}},Gae)}function xv(){return Ho!==null?Ho:qae()}function l6(t,e,r=!1){const n=xv(),s={chatId:t,path:e,isFolder:r};Wp(t,!0).set(e,s);const o=n.filter(a=>!(a.chatId===t&&a.path===e));o.push(s),qT(o),na.info(`Added locked ${r?"folder":"file"}: ${e} for chat: ${t}`)}function Kae(t,e){l6(t,e)}function Yae(t,e){l6(t,e)}function c6(t,e){const r=xv(),n=Wp(t);n&&n.delete(e);const s=r.filter(i=>!(i.chatId===t&&i.path===e));qT(s),na.info(`Removed lock for: ${e} in chat: ${t}`)}function Xae(t,e){c6(t,e)}function Jae(t,e){c6(t,e)}function Zae(t,e){xv();const r=Wp(t);if(r){const n=r.get(e);if(n&&!n.isFolder)return{locked:!0,lockedBy:e}}return u6(t,e)}function u6(t,e){const r=Wp(t);if(!r)return{locked:!1};const n=e.split("/");let s="";for(let i=0;i<n.length-1;i++){s=s?`${s}/${n[i]}`:n[i];const o=r.get(s);if(o&&o.isFolder)return{locked:!0,lockedBy:s}}return{locked:!1}}function KT(t){const e=xv(),r=Wp(t);return r?Array.from(r.values()):e.filter(n=>n.chatId===t)}function Qae(t){return KT(t).filter(r=>!r.isFolder)}function ele(t){return KT(t).filter(r=>r.isFolder)}function d6(t,e){return u6(t,e)}function lI(t){try{if(YT(),typeof localStorage<"u"){const e=localStorage.getItem(_v);if(e){const r=JSON.parse(e);if(Array.isArray(r)){let n=!1;const s=r.map(i=>!i.chatId||i.isFolder===void 0?(n=!0,{...i,chatId:i.chatId||t,isFolder:i.isFolder!==void 0?i.isFolder:!1}):i);n&&(qT(s),na.info(`Migrated ${s.length} legacy locks to chat ID: ${t}`))}}}}catch(e){na.error("Failed to migrate legacy locks",e)}}function YT(){Ho=null,za.clear(),na.info("Cleared locked items cache")}typeof window<"u"&&window.addEventListener("storage",t=>{t.key===_v&&(na.info("Detected localStorage change for locked items, refreshing cache"),YT())});const h6=Qt("FileLocks");function kn(){try{if(typeof window<"u"){const t=window.location.pathname.match(/\/chat\/([^/]+)/);if(t&&t[1])return t[1]}return"default"}catch(t){return h6.error("Failed to get current chat ID",t),"default"}}function XT(t,e){try{const r=e||kn(),n=Zae(r,t);if(!n.locked){const s=d6(r,t);if(s.locked)return s}return n}catch(r){return h6.error("Failed to check if file is locked",r),{locked:!1}}}const fr=Qt("FilesStore"),tle=new TextDecoder("utf8",{fatal:!0});class rle{#r;#e=0;#n=new Map;#t=new Set;files=js({});get filesCount(){return this.#e}constructor(e){this.#r=e;try{if(typeof localStorage<"u"){const r=localStorage.getItem("devonz-deleted-paths");if(r){const n=JSON.parse(r);Array.isArray(n)&&n.forEach(s=>this.#t.add(s))}}}catch(r){fr.error("Failed to load deleted paths from localStorage",r)}if(this.#s(),typeof window<"u"){let r=kn();const n=()=>{const o=kn();o!==r&&(fr.info(`Chat ID changed from ${r} to ${o}, reloading locks`),r=o,this.#s(o))};window.addEventListener("popstate",n),window.addEventListener("hashchange",n);const s=history.pushState.bind(history),i=history.replaceState.bind(history);history.pushState=(...o)=>{s(...o),n()},history.replaceState=(...o)=>{i(...o),n()}}this.#i()}#s(e){try{const r=e||kn(),n=performance.now();lI(r);const s=KT(r),i=s.filter(u=>!u.isFolder),o=s.filter(u=>u.isFolder);if(s.length===0){fr.info(`No locked items found for chat ID: ${r}`);return}fr.info(`Found ${i.length} locked files and ${o.length} locked folders for chat ID: ${r}`);const a=this.files.get(),l={};for(const u of i){const d=a[u.path];d?.type==="file"&&(l[u.path]={...d,isLocked:!0})}for(const u of o){const d=a[u.path];d?.type==="folder"&&(l[u.path]={...d,isLocked:!0},this.#o(a,l,u.path))}Object.keys(l).length>0&&this.files.set({...a,...l});const c=performance.now();fr.info(`Loaded locked items in ${Math.round(c-n)}ms`)}catch(r){fr.error("Failed to load locked files from localStorage",r)}}#o(e,r,n){const s=n.endsWith("/")?n:`${n}/`;Object.entries(e).forEach(([i,o])=>{i.startsWith(s)&&o&&(o.type==="file"?r[i]={...o,isLocked:!0,lockedByFolder:n}:o.type==="folder"&&(r[i]={...o,isLocked:!0,lockedByFolder:n}))})}lockFile(e,r){const n=this.getFile(e),s=r||kn();return n?(this.files.setKey(e,{...n,isLocked:!0}),Kae(s,e),fr.info(`File locked: ${e} for chat: ${s}`),!0):(fr.error(`Cannot lock non-existent file: ${e}`),!1)}lockFolder(e,r){const n=this.getFileOrFolder(e),s=this.files.get(),i=r||kn();if(!n||n.type!=="folder")return fr.error(`Cannot lock non-existent folder: ${e}`),!1;const o={};return o[e]={type:n.type,isLocked:!0},this.#o(s,o,e),this.files.set({...s,...o}),Yae(i,e),fr.info(`Folder locked: ${e} for chat: ${i}`),!0}unlockFile(e,r){const n=this.getFile(e),s=r||kn();return n?(this.files.setKey(e,{...n,isLocked:!1,lockedByFolder:void 0}),Xae(s,e),fr.info(`File unlocked: ${e} for chat: ${s}`),!0):(fr.error(`Cannot unlock non-existent file: ${e}`),!1)}unlockFolder(e,r){const n=this.getFileOrFolder(e),s=this.files.get(),i=r||kn();if(!n||n.type!=="folder")return fr.error(`Cannot unlock non-existent folder: ${e}`),!1;const o={};o[e]={type:n.type,isLocked:!1};const a=e.endsWith("/")?e:`${e}/`;return Object.entries(s).forEach(([l,c])=>{l.startsWith(a)&&c&&(c.type==="file"&&c.lockedByFolder===e?o[l]={...c,isLocked:!1,lockedByFolder:void 0}:c.type==="folder"&&c.lockedByFolder===e&&(o[l]={type:c.type,isLocked:!1,lockedByFolder:void 0}))}),this.files.set({...s,...o}),Jae(i,e),fr.info(`Folder unlocked: ${e} for chat: ${i}`),!0}isFileLocked(e,r){const n=this.getFile(e),s=r||kn();if(!n)return{locked:!1};if(n.isLocked)return n.lockedByFolder?{locked:!0,lockedBy:n.lockedByFolder}:{locked:!0,lockedBy:e};if(Qae(s).find(l=>l.path===e))return this.files.setKey(e,{...n,isLocked:!0}),{locked:!0,lockedBy:e};const a=this.isFileInLockedFolder(e,s);return a.locked?(this.files.setKey(e,{...n,isLocked:!0,lockedByFolder:a.lockedBy}),a):{locked:!1}}isFileInLockedFolder(e,r){const n=r||kn();return d6(n,e)}isFolderLocked(e,r){const n=this.getFileOrFolder(e),s=r||kn();return!n||n.type!=="folder"?{isLocked:!1}:n.isLocked?{isLocked:!0,lockedBy:e}:ele(s).find(a=>a.path===e)?(this.files.setKey(e,{type:n.type,isLocked:!0}),{isLocked:!0,lockedBy:e}):{isLocked:!1}}getFile(e){const r=this.files.get()[e];if(r&&r.type==="file")return r}getFileOrFolder(e){return this.files.get()[e]}getFileModifications(){return zae(this.files.get(),this.#n)}getModifiedFiles(){let e;for(const[r,n]of this.#n){const s=this.files.get()[r];s?.type==="file"&&s.content!==n&&(e||(e={}),e[r]=s)}return e}resetFileModifications(){this.#n.clear()}async saveFile(e,r){const n=await this.#r;try{const s=$r.relative(n.workdir,e);if(!s)throw new Error(`EINVAL: invalid file path, write '${s}'`);const i=this.getFile(e)?.content;!i&&i!==""&&Es("Expected content to be defined"),await n.fs.writeFile(s,r),this.#n.has(e)||this.#n.set(e,i);const o=this.files.get()[e],a=o?.type==="file"?o.isLocked:!1;this.files.setKey(e,{type:"file",content:r,isBinary:!1,isLocked:a}),fr.info("File updated")}catch(s){throw fr.error(`Failed to update file content

`,s),s}}async#i(){const e=await this.#r;if(!e||!e.internal){console.warn("[FilesStore] WebContainer not available, skipping init");return}this.#l(),e.internal.watchPaths({include:[`${us}/**`],exclude:["**/node_modules",".git","**/package-lock.json"],includeContent:!0},Nae(100,this.#c.bind(this)));const r=kn();lI(r),this.#s(r),setTimeout(()=>{this.#s(r)},2e3),setInterval(()=>{YT();const n=kn();this.#s(n)},3e4)}#l(){if(this.#t.size===0)return;const e=this.files.get(),r=new Set,n=[...this.#t].map(s=>s+"/");for(const[s,i]of Object.entries(e))if(i){if(this.#t.has(s)){r.add(s);continue}for(const o of n)if(s.startsWith(o)){r.add(s);break}}if(r.size>0){const s={};for(const i of r){const o=e[i];s[i]=void 0,o?.type==="file"&&(this.#e--,this.#n.has(i)&&this.#n.delete(i))}this.files.set({...e,...s})}}#c(e){const r=e.flat(2);for(const{type:n,path:s,buffer:i}of r){const o=s.replace(/\/+$/g,"");switch(n){case"add_dir":{this.files.setKey(o,{type:"folder"});break}case"remove_dir":{this.files.setKey(o,void 0);for(const[a]of Object.entries(this.files))a.startsWith(o)&&this.files.setKey(a,void 0);break}case"add_file":case"change":{n==="add_file"&&this.#e++;let a="";const l=nle(i);l||(a=this.#a(i)),this.files.setKey(o,{type:"file",content:a,isBinary:l});break}case"remove_file":{this.#e--,this.files.setKey(o,void 0);break}}}}#a(e){if(!e||e.byteLength===0)return"";try{return tle.decode(e)}catch(r){return console.log(r),""}}async createFile(e,r=""){const n=await this.#r;try{const s=$r.relative(n.workdir,e);if(!s)throw new Error(`EINVAL: invalid file path, create '${s}'`);const i=$r.dirname(s);if(i!=="."&&await n.fs.mkdir(i,{recursive:!0}),r instanceof Uint8Array){await n.fs.writeFile(s,U1.from(r));const a=U1.from(r).toString("base64");this.files.setKey(e,{type:"file",content:a,isBinary:!0,isLocked:!1}),this.#n.set(e,a)}else{const a=r.length===0?" ":r;await n.fs.writeFile(s,a),this.files.setKey(e,{type:"file",content:r,isBinary:!1,isLocked:!1}),this.#n.set(e,r)}return fr.info(`File created: ${e}`),!0}catch(s){throw fr.error(`Failed to create file

`,s),s}}async createFolder(e){const r=await this.#r;try{const n=$r.relative(r.workdir,e);if(!n)throw new Error(`EINVAL: invalid folder path, create '${n}'`);return await r.fs.mkdir(n,{recursive:!0}),this.files.setKey(e,{type:"folder"}),fr.info(`Folder created: ${e}`),!0}catch(n){throw fr.error(`Failed to create folder

`,n),n}}async deleteFile(e){const r=await this.#r;try{const n=$r.relative(r.workdir,e);if(!n)throw new Error(`EINVAL: invalid file path, delete '${n}'`);return await r.fs.rm(n),this.#t.add(e),this.files.setKey(e,void 0),this.#e--,this.#n.has(e)&&this.#n.delete(e),this.#u(),fr.info(`File deleted: ${e}`),!0}catch(n){throw fr.error(`Failed to delete file

`,n),n}}async deleteFolder(e){const r=await this.#r;try{const n=$r.relative(r.workdir,e);if(!n)throw new Error(`EINVAL: invalid folder path, delete '${n}'`);await r.fs.rm(n,{recursive:!0}),this.#t.add(e),this.files.setKey(e,void 0);const s=this.files.get();for(const[i,o]of Object.entries(s))i.startsWith(e+"/")&&(this.files.setKey(i,void 0),this.#t.add(i),o?.type==="file"&&this.#e--,o?.type==="file"&&this.#n.has(i)&&this.#n.delete(i));return this.#u(),fr.info(`Folder deleted: ${e}`),!0}catch(n){throw fr.error(`Failed to delete folder

`,n),n}}#u(){try{typeof localStorage<"u"&&localStorage.setItem("devonz-deleted-paths",JSON.stringify([...this.#t]))}catch(e){fr.error("Failed to persist deleted paths to localStorage",e)}}}function nle(t){return t===void 0?!1:O0(sle(t),{chunkLength:100})==="binary"}function sle(t){return U1.from(t.buffer,t.byteOffset,t.byteLength)}const ile="preview-updates";class f6{#r=new Map;#e;#n;#t=new Map;#s=new Set;#o=new Map;#i=300;#l;previews=bt([]);constructor(e){if(this.#e=e,this.#n=this.#c(ile),this.#l=this.#c("storage-sync-channel"),this.#n&&(this.#n.onmessage=r=>{const{type:n,previewId:s}=r.data;if(n==="file-change"){const i=r.data.timestamp,o=this.#t.get(s)||0;i>o&&(this.#t.set(s,i),this.refreshPreview(s))}}),this.#l&&(this.#l.onmessage=r=>{const{storage:n,source:s}=r.data;n&&s!==this._getTabId()&&this._syncStorage(n)}),typeof window<"u"){const r=localStorage.setItem;localStorage.setItem=(...n)=>{r.apply(localStorage,n),this._broadcastStorageSync()}}this.#a()}#c(e){if(typeof globalThis>"u")return;const r=globalThis.BroadcastChannel;if(typeof r=="function")try{return new r(e)}catch(n){console.warn("[Preview] BroadcastChannel unavailable:",n);return}}_getTabId(){return typeof window<"u"?(window._tabId||(window._tabId=Math.random().toString(36).substring(2,15)),window._tabId):""}_syncStorage(e){if(typeof window<"u"&&(Object.entries(e).forEach(([n,s])=>{try{Object.getPrototypeOf(localStorage).setItem.call(localStorage,n,s)}catch(i){console.error("[Preview] Error syncing storage:",i)}}),this.previews.get().forEach(n=>{const s=this.getPreviewId(n.baseUrl);s&&this.refreshPreview(s)}),typeof window<"u"&&window.location)){const n=document.querySelector("iframe");n&&(n.src=n.src)}}_broadcastStorageSync(){if(typeof window<"u"){const e={};for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);n&&(e[n]=localStorage.getItem(n)||"")}this.#l?.postMessage({type:"storage-sync",storage:e,source:this._getTabId(),timestamp:Date.now()})}}async#a(){const e=await this.#e;if(!e||typeof e.on!="function"){console.warn("[Preview] WebContainer not available, skipping init");return}e.on("server-ready",(r,n)=>{console.log("[Preview] Server ready on port:",r,n),this.broadcastUpdate(n),this._broadcastStorageSync()}),e.on("port",(r,n,s)=>{let i=this.#r.get(r);if(n==="close"&&i){this.#r.delete(r),this.previews.set(this.previews.get().filter(a=>a.port!==r));return}const o=this.previews.get();i||(i={port:r,ready:n==="open",baseUrl:s},this.#r.set(r,i),o.push(i)),i.ready=n==="open",i.baseUrl=s,this.previews.set([...o]),n==="open"&&this.broadcastUpdate(s)})}getPreviewId(e){const r=e.match(/^https?:\/\/([^.]+)\.local-credentialless\.webcontainer-api\.io/);return r?r[1]:null}broadcastStateChange(e){const r=Date.now();this.#t.set(e,r),this.#n?.postMessage({type:"state-change",previewId:e,timestamp:r})}broadcastFileChange(e){const r=Date.now();this.#t.set(e,r),this.#n?.postMessage({type:"file-change",previewId:e,timestamp:r})}broadcastUpdate(e){const r=this.getPreviewId(e);if(r){const n=Date.now();this.#t.set(r,n),this.#n?.postMessage({type:"file-change",previewId:r,timestamp:n})}}refreshPreview(e){const r=this.#o.get(e);r&&clearTimeout(r);const n=setTimeout(()=>{const s=this.previews.get(),i=s.find(o=>this.getPreviewId(o.baseUrl)===e);i&&(i.ready=!1,this.previews.set([...s]),requestAnimationFrame(()=>{i.ready=!0,this.previews.set([...s])})),this.#o.delete(e)},this.#i);this.#o.set(e,n)}refreshAllPreviews(){const e=this.previews.get();for(const r of e){const n=this.getPreviewId(r.baseUrl);n&&this.broadcastFileChange(n)}}hardRefreshAllPreviews(){const e=this.previews.get();for(const r of e){const n=this.getPreviewId(r.baseUrl);if(n){const s=Date.now();this.#t.set(n,s),this.#n?.postMessage({type:"hard-refresh",previewId:n,timestamp:s})}}console.log("[PreviewsStore] Broadcasted hard-refresh to all previews")}}let _x=null;function p6(){return _x||(_x=new f6(Promise.resolve({}))),_x}function m6(){if(typeof Promise.withResolvers=="function")return Promise.withResolvers();let t,e;const r=new Promise((n,s)=>{t=n,e=s});return{resolve:t,reject:e,promise:r}}const Kf=bt(null),La=Qt("TerminalErrorDetector");let rf=null;function ole(t){rf=t,La.debug("Auto-fix callback registered")}function ale(){rf=null,La.debug("Auto-fix callback unregistered")}const lle=[{pattern:/does not provide an export named ["'](.+?)["']/i,type:"module",severity:"error",title:"Invalid Export",autoFixable:!0,extractDetails:(t,e)=>{const r=e.indexOf(t[0]),n=Math.min(e.length,r+500);return`Export "${t[1]}" does not exist. ${e.slice(Math.max(0,r-100),n).trim()}`}},{pattern:/\[hmr\]\s*(?:Failed to reload|failed).*?\/(.+?)(?:\.|$)/i,type:"build",severity:"error",title:"HMR Reload Failed",autoFixable:!0,extractDetails:(t,e)=>{const r=e.indexOf(t[0]),n=Math.max(0,r-300),s=Math.min(e.length,r+500),o=e.slice(n,s).match(/SyntaxError[:\s]+(.+?)(?:\n|$)/i);return o?`HMR failed for ${t[1]}: ${o[1]}`:`HMR failed to reload ${t[1]}. Check for syntax or import errors.`}},{pattern:/X\s+ERROR\s+(.+?)(?:\n|$)/i,type:"build",severity:"error",title:"Build Error",autoFixable:!0,extractDetails:(t,e)=>{const r=e.indexOf(t[0]),n=Math.min(e.length,r+800);return e.slice(r,n).trim()}},{pattern:/The character "(.+?)" is not valid inside a JSX element/i,type:"syntax",severity:"error",title:"JSX Syntax Error",autoFixable:!0,extractDetails:(t,e)=>{const r=e.indexOf(t[0]),n=Math.min(e.length,r+600);return e.slice(Math.max(0,r-50),n).trim()}},{pattern:/\[vite\]\s*(?:Internal server error|Error):\s*(.+?)(?:\n|$)/i,type:"build",severity:"error",title:"Vite Build Error",autoFixable:!0,extractDetails:(t,e)=>{const r=e.indexOf(t[0]),n=Math.max(0,r-100),s=Math.min(e.length,r+t[0].length+500);return e.slice(n,s).trim()}},{pattern:/\[plugin:vite:css\].*?\[postcss\]\s*(.+?)(?:\n|$)/i,type:"build",severity:"error",title:"CSS/PostCSS Error",autoFixable:!0,extractDetails:(t,e)=>{const r=e.indexOf(t[0]),n=Math.min(e.length,r+800);return e.slice(r,n).trim()}},{pattern:/\[plugin:vite:[^\]]+\]\s*(.+?)(?:\n|$)/i,type:"build",severity:"error",title:"Vite Plugin Error",autoFixable:!0,extractDetails:(t,e)=>{const r=e.indexOf(t[0]),n=Math.min(e.length,r+600);return e.slice(r,n).trim()}},{pattern:/The [`'](.+?)[`']\s*class does not exist/i,type:"build",severity:"error",title:"Tailwind CSS Error",autoFixable:!0,extractDetails:t=>`The class "${t[1]}" does not exist. Make sure it is defined in your Tailwind config or use a valid utility class.`},{pattern:/CssSyntaxError:\s*(.+?)(?:\n|$)/i,type:"syntax",severity:"error",title:"CSS Syntax Error",autoFixable:!0},{pattern:/Failed to resolve import ["'](.+?)["'].*?from ["'](.+?)["']/i,type:"module",severity:"error",title:"Import Resolution Failed",autoFixable:!0,extractDetails:t=>`Cannot resolve import "${t[1]}" from "${t[2]}"`},{pattern:/Module not found:\s*(?:Error:\s*)?(?:Can't resolve\s*)?["']?(.+?)["']?(?:\s+in\s+["']?(.+?)["']?)?/i,type:"module",severity:"error",title:"Module Not Found",autoFixable:!0},{pattern:/Cannot find module ["'](.+?)["']/i,type:"module",severity:"error",title:"Module Not Found",autoFixable:!0,extractDetails:t=>`Cannot find module "${t[1]}"`},{pattern:/error TS(\d+):\s*(.+?)(?:\n|$)/i,type:"syntax",severity:"error",title:"TypeScript Error",autoFixable:!0,extractDetails:t=>`TS${t[1]}: ${t[2]}`},{pattern:/Type\s+["'](.+?)["']\s+is not assignable to type\s+["'](.+?)["']/i,type:"syntax",severity:"error",title:"TypeScript Type Error",autoFixable:!0},{pattern:/SyntaxError:\s*(.+?)(?:\n|$)/i,type:"syntax",severity:"error",title:"Syntax Error",autoFixable:!0,extractDetails:t=>t[1]},{pattern:/TypeError:\s*(.+?)(?:\n|$)/i,type:"runtime",severity:"error",title:"Type Error",autoFixable:!0,extractDetails:t=>t[1]},{pattern:/ReferenceError:\s*(.+?)(?:\n|$)/i,type:"runtime",severity:"error",title:"Reference Error",autoFixable:!0,extractDetails:t=>t[1]},{pattern:/npm ERR!\s*(.+?)(?:\n|$)/i,type:"package",severity:"error",title:"npm Error",autoFixable:!0,extractDetails:(t,e)=>e.split(`
`).filter(s=>s.includes("npm ERR!")).slice(0,10).join(`
`)},{pattern:/pnpm ERR!\s*(.+?)(?:\n|$)/i,type:"package",severity:"error",title:"pnpm Error",autoFixable:!0},{pattern:/ENOENT:\s*no such file or directory[,\s]*(?:open\s*)?["']?(.+?)["']?/i,type:"build",severity:"error",title:"File Not Found",autoFixable:!0,extractDetails:t=>`File not found: ${t[1]}`},{pattern:/\s*(\d+)\s+(?:error|problem)s?/i,type:"syntax",severity:"error",title:"ESLint Errors",autoFixable:!0,extractDetails:t=>`${t[1]} ESLint error(s) found`},{pattern:/Build failed with (\d+) errors?/i,type:"build",severity:"error",title:"Build Failed",autoFixable:!0,extractDetails:t=>`Build failed with ${t[1]} error(s)`},{pattern:/error\s+during\s+build/i,type:"build",severity:"error",title:"Build Error",autoFixable:!0},{pattern:/Failed to scan for dependencies/i,type:"build",severity:"error",title:"Dependency Scan Failed",autoFixable:!0,extractDetails:(t,e)=>{const r=e.indexOf("Failed to scan"),n=Math.min(e.length,r+300);return e.slice(Math.max(0,r-50),n).trim()}},{pattern:/Port\s+(\d+)\s+is\s+(?:already\s+)?in\s+use/i,type:"runtime",severity:"error",title:"Port In Use",autoFixable:!1,extractDetails:t=>`Port ${t[1]} is already in use. Close the process using this port or use a different port.`}],cle=[/deprecat(?:ed|ion)/i,/peer\s+dep/i,/optional\s+dependency/i,/\[INFO\]/i,/\[DEBUG\]/i,/successfully/i,/completed/i];function ule(t){let e=0;const r=t.replace(/\d+/g,"N").slice(0,200);for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);e=(e<<5)-e+s,e=e&e}return e.toString(16)}class dle{#r="";#e=[];#n=0;#t=new Set;#s=null;#o=!0;#i=null;#l=500;#c=3e3;#a=1e4;#u=3e4;constructor(){this.#i=setInterval(()=>this.#g(),this.#u)}destroy(){this.#i&&(clearInterval(this.#i),this.#i=null),this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r="",this.#e=[],this.#t.clear(),La.debug("TerminalErrorDetector destroyed")}setEnabled(e){this.#o=e,La.debug(`Error detection ${e?"enabled":"disabled"}`)}processOutput(e){this.#o&&(this.#r+=e,this.#r.length>this.#a&&(this.#r=this.#r.slice(-this.#a/2)),this.#d())}#d(){this.#s&&clearTimeout(this.#s),this.#s=setTimeout(()=>{this.#h()},this.#l)}#h(){const e=this.#m(this.#r);cle.some(n=>n.test(e));const r=[];for(const n of lle){const s=e.match(n.pattern);if(s){const i=s[1]||s[0],o=n.extractDetails?n.extractDetails(s,e):s[0],a=ule(i+n.title);if(this.#t.has(a))continue;const l={type:n.type,severity:n.severity,title:n.title,message:i,details:o,timestamp:Date.now(),hash:a,autoFixable:n.autoFixable??!0};r.push(l),this.#t.add(a)}}r.length>0&&(this.#e.push(...r),this.#f()),this.#r=""}#f(){const e=Date.now();if(e-this.#n<this.#c){La.debug("Skipping alert due to cooldown");return}if(this.#e.length===0)return;this.#n=e;const r=this.#e[this.#e.length-1],n=this.#p(),s=dn.get();if(r.autoFixable&&e6()&&rf&&JF({source:"terminal",type:r.type,message:r.message,content:n})&&rf){La.info(`Auto-fix triggered for: ${r.title}`),setTimeout(()=>{rf?.({source:"terminal",type:r.type,message:r.message,content:n})},s.settings.delayBetweenAttempts),this.#e=[];return}r.autoFixable&&t6()&&La.warn("Max auto-fix retries exceeded, showing alert to user"),Pe.actionAlert.set({type:"error",title:r.title,description:r.message,content:n,source:"terminal"}),La.info(`Terminal error detected: ${r.title}`),this.#e=[]}#p(){if(this.#e.length===1)return this.#e[0].details;const e=[];e.push(`Found ${this.#e.length} error(s):
`);for(const r of this.#e.slice(0,5))e.push(` ${r.title}: ${r.message}`);return this.#e.length>5&&e.push(`
... and ${this.#e.length-5} more error(s)`),e.push(`

--- Details ---
`),e.push(this.#e[0].details),e.join(`
`)}#m(e){return e.replace(/\x1b\[[0-9;]*[mGKHF]/g,"").replace(/\x1b\][^\x07]*\x07/g,"")}#g(){this.#t.size>100&&this.#t.clear()}reset(){this.#r="",this.#e=[],this.#t.clear(),this.#s&&(clearTimeout(this.#s),this.#s=null)}dismissAlert(){Pe.clearAlert()}}let xx=null;function g6(){return xx||(xx=new dle),xx}function b6(t){g6().processOutput(t)}function y6(){g6().reset()}async function hle(t,e){const r=[],n=await t.spawn("/bin/jsh",["--osc",...r],{terminal:{cols:e.cols??80,rows:e.rows??15}}),s=n.input.getWriter(),i=n.output,o=m6();let a=!1;return i.pipeTo(new WritableStream({write(l){if(!a){const[,c]=l.match(/\x1b\]654;([^\x07]+)\x07/)||[];c==="interactive"&&(a=!0,o.resolve())}e.write(l);try{b6(l)}catch{}try{Z(async()=>{const{captureTerminalLog:c}=await import("./debugLogger-CLwoOrVR.js");return{captureTerminalLog:c}},__vite__mapDeps([28,3,4,1])).then(({captureTerminalLog:c})=>{const u=l.replace(/\x1b\[[0-9;]*[mG]/g,"").trim();u&&c(u,"output")}).catch(()=>{})}catch{}}})),e.onData(l=>{if(a){s.write(l);try{Z(async()=>{const{captureTerminalLog:c}=await import("./debugLogger-CLwoOrVR.js");return{captureTerminalLog:c}},__vite__mapDeps([28,3,4,1])).then(({captureTerminalLog:c})=>{const u=l.replace(/\x1b\[[0-9;]*[A-Z]/g,"").trim();u&&u!=="\r"&&u!==`
`&&c(u,"input")}).catch(()=>{})}catch{}}}),await o.promise,n}class fle{#r;#e;#n;#t;#s;executionState=bt();#o;#i;constructor(){this.#e=new Promise(e=>{this.#r=e})}ready(){return this.#e}async init(e,r){this.#n=e,this.#t=r;const{process:n,commandStream:s,expoUrlStream:i}=await this.newBoltShellProcess(e,r);this.#s=n,this.#o=s.getReader(),this._watchExpoUrlInBackground(i),await this.waitTillOscCode("interactive"),this.#r?.()}async newBoltShellProcess(e,r){const n=[],s=await e.spawn("/bin/jsh",["--osc",...n],{terminal:{cols:r.cols??80,rows:r.rows??15}}),i=s.input.getWriter();this.#i=i;const[o,a]=s.output.tee(),[l,c]=a.tee(),u=m6();let d=!1;return o.pipeTo(new WritableStream({write(h){if(!d){const[,f]=h.match(/\x1b\]654;([^\x07]+)\x07/)||[];f==="interactive"&&(d=!0,u.resolve())}r.write(h);try{b6(h)}catch{}}})),r.onData(h=>{d&&i.write(h)}),await u.promise,{process:s,terminalStream:o,commandStream:l,expoUrlStream:c}}async _watchExpoUrlInBackground(e){const r=e.getReader();let n="";const s=/(exp:\/\/[^\s]+)/;for(;;){const{value:i,done:o}=await r.read();if(o)break;n+=i||"";const a=n.match(s);if(a){const l=a[1].replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,"").replace(/[^\x20-\x7E]+$/g,"");Kf.set(l),n=n.slice(n.indexOf(a[1])+a[1].length)}n.length>2048&&(n=n.slice(-2048))}}interruptExecution(){this.#t&&this.#t.input("")}get terminal(){return this.#t}get process(){return this.#s}async executeCommand(e,r,n){if(!this.process||!this.terminal)return;const s=this.executionState.get();s?.active&&s.abort&&s.abort(),this.terminal.input(""),await this.waitTillOscCode("prompt"),s&&s.executionPrms&&await s.executionPrms,this.terminal.input(r.trim()+`
`);const i=this.getCurrentExecutionResult();this.executionState.set({sessionId:e,active:!0,executionPrms:i,abort:n});const o=await i;if(this.executionState.set({sessionId:e,active:!1}),o)try{o.output=ple(o.output)}catch(a){console.log("failed to format terminal output",a)}return o}async getCurrentExecutionResult(){const{output:e,exitCode:r}=await this.waitTillOscCode("exit");return{output:e,exitCode:r}}onQRCodeDetected;async waitTillOscCode(e){let r="",n=0,s="";if(!this.#o)return{output:r,exitCode:n};const i=this.#o,o=/(exp:\/\/[^\s]+)/;for(;;){const{value:a,done:l}=await i.read();if(l)break;const c=a||"";r+=c,s+=c;const u=s.match(o);if(u){const f=u[1].replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,"").replace(/[^\x20-\x7E]+$/g,"");Kf.set(f),s=s.slice(s.indexOf(u[1])+u[1].length)}const[,d,,,h]=c.match(/\x1b\]654;([^\x07=]+)=?((-?\d+):(\d+))?\x07/)||[];if(d==="exit"&&(n=parseInt(h,10)),d===e)break}return{output:r,exitCode:n}}}function ple(t){return t.replace(/\x1b\](\d+;[^\x07\x1b]*|\d+[^\x07\x1b]*)\x07/g,"").replace(/\](\d+;[^\n]*|\d+[^\n]*)/g,"").replace(/\u001b\[[\?]?[0-9;]*[a-zA-Z]/g,"").replace(/\x1b\[[\?]?[0-9;]*[a-zA-Z]/g,"").replace(/\u001b\[[0-9;]*m/g,"").replace(/\x1b\[[0-9;]*m/g,"").replace(/\u001b/g,"").replace(/\x1b/g,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/^([~\/][^\n]+)/m,`$1
`).replace(/(?<!^|\n)>/g,`
>`).replace(/(?<!^|\n|\w)(error|failed|warning|Error|Failed|Warning):/g,`
$1:`).replace(/(?<!^|\n|\/)(at\s+(?!async|sync))/g,`
at `).replace(/\bat\s+async/g,"at async").replace(/(?<!^|\n)(npm ERR!)/g,`
$1`).split(`
`).map(o=>o.trim()).filter(o=>o.length>0).join(`
`).replace(/\n{3,}/g,`

`).replace(/:\s+/g,": ").replace(/\s{2,}/g," ").replace(/^\s+|\s+$/g,"").replace(/\u0000/g,"")}function mle(){return new fle}const gle="\x1B[0m",ble={red:"\x1B[1;31m"},pg={red:t=>`${ble.red}${t}${gle}`};class yle{#r;#e=[];#n=mle();showTerminal=bt(!0);constructor(e){this.#r=e}get boltTerminal(){return this.#n}toggleTerminal(e){this.showTerminal.set(e!==void 0?e:!this.showTerminal.get())}async attachBoltTerminal(e){try{const r=await this.#r;if(!r){e.write(pg.red(`WebContainer not available
`));return}await this.#n.init(r,e)}catch(r){e.write(pg.red(`Failed to spawn bolt shell

`)+r.message);return}}async attachTerminal(e){try{const r=await this.#r;if(!r){e.write(pg.red(`WebContainer not available
`));return}const n=await hle(r,e);this.#e.push({terminal:e,process:n})}catch(r){e.write(pg.red(`Failed to spawn shell

`)+r.message);return}}onTerminalResize(e,r){for(const{process:n}of this.#e)n.resize({cols:e,rows:r})}async detachTerminal(e){const r=this.#e.findIndex(n=>n.terminal===e);if(r!==-1){const{process:n}=this.#e[r];try{n.kill()}catch(s){console.warn("Failed to kill terminal process:",s)}this.#e.splice(r,1)}}}function mg(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var v6={exports:{}};(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,s,i){function o(c,u){if(!s[c]){if(!n[c]){var d=typeof mg=="function"&&mg;if(!u&&d)return d(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var f=s[c]={exports:{}};n[c][0].call(f.exports,function(b){var m=n[c][1][b];return o(m||b)},f,f.exports,r,n,s,i)}return s[c].exports}for(var a=typeof mg=="function"&&mg,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(r,n,s){var i=r("./utils"),o=r("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var c,u,d,h,f,b,m,g=[],y=0,v=l.length,_=v,x=i.getTypeOf(l)!=="string";y<l.length;)_=v-y,d=x?(c=l[y++],u=y<v?l[y++]:0,y<v?l[y++]:0):(c=l.charCodeAt(y++),u=y<v?l.charCodeAt(y++):0,y<v?l.charCodeAt(y++):0),h=c>>2,f=(3&c)<<4|u>>4,b=1<_?(15&u)<<2|d>>6:64,m=2<_?63&d:64,g.push(a.charAt(h)+a.charAt(f)+a.charAt(b)+a.charAt(m));return g.join("")},s.decode=function(l){var c,u,d,h,f,b,m=0,g=0,y="data:";if(l.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var v,_=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&_--,l.charAt(l.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|_):new Array(0|_);m<l.length;)c=a.indexOf(l.charAt(m++))<<2|(h=a.indexOf(l.charAt(m++)))>>4,u=(15&h)<<4|(f=a.indexOf(l.charAt(m++)))>>2,d=(3&f)<<6|(b=a.indexOf(l.charAt(m++))),v[g++]=c,f!==64&&(v[g++]=u),b!==64&&(v[g++]=d);return v}},{"./support":30,"./utils":32}],2:[function(r,n,s){var i=r("./external"),o=r("./stream/DataWorker"),a=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function c(u,d,h,f,b){this.compressedSize=u,this.uncompressedSize=d,this.crc32=h,this.compression=f,this.compressedContent=b}c.prototype={getContentWorker:function(){var u=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,d,h){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,s){var i=r("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,s){var i=r("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();n.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(c,u,d,h){var f=o,b=h+d;c^=-1;for(var m=h;m<b;m++)c=c>>>8^f[255&(c^u[m])];return-1^c}(0|l,a,a.length,0):function(c,u,d,h){var f=o,b=h+d;c^=-1;for(var m=h;m<b;m++)c=c>>>8^f[255&(c^u.charCodeAt(m))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(r,n,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(r,n,s){var i=null;i=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:i}},{lie:37}],7:[function(r,n,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),a=r("./utils"),l=r("./stream/GenericWorker"),c=i?"uint8array":"array";function u(d,h){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}s.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,d.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},s.compressWorker=function(d){return new u("Deflate",d)},s.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,s){function i(f,b){var m,g="";for(m=0;m<b;m++)g+=String.fromCharCode(255&f),f>>>=8;return g}function o(f,b,m,g,y,v){var _,x,w=f.file,S=f.compression,T=v!==c.utf8encode,E=a.transformTo("string",v(w.name)),C=a.transformTo("string",c.utf8encode(w.name)),A=w.comment,I=a.transformTo("string",v(A)),P=a.transformTo("string",c.utf8encode(A)),D=C.length!==w.name.length,R=P.length!==A.length,F="",G="",z="",K=w.dir,L=w.date,O={crc32:0,compressedSize:0,uncompressedSize:0};b&&!m||(O.crc32=f.crc32,O.compressedSize=f.compressedSize,O.uncompressedSize=f.uncompressedSize);var $=0;b&&($|=8),T||!D&&!R||($|=2048);var H=0,U=0;K&&(H|=16),y==="UNIX"?(U=798,H|=function(X,ge){var J=X;return X||(J=ge?16893:33204),(65535&J)<<16}(w.unixPermissions,K)):(U=20,H|=function(X){return 63&(X||0)}(w.dosPermissions)),_=L.getUTCHours(),_<<=6,_|=L.getUTCMinutes(),_<<=5,_|=L.getUTCSeconds()/2,x=L.getUTCFullYear()-1980,x<<=4,x|=L.getUTCMonth()+1,x<<=5,x|=L.getUTCDate(),D&&(G=i(1,1)+i(u(E),4)+C,F+="up"+i(G.length,2)+G),R&&(z=i(1,1)+i(u(I),4)+P,F+="uc"+i(z.length,2)+z);var ee="";return ee+=`
\0`,ee+=i($,2),ee+=S.magic,ee+=i(_,2),ee+=i(x,2),ee+=i(O.crc32,4),ee+=i(O.compressedSize,4),ee+=i(O.uncompressedSize,4),ee+=i(E.length,2),ee+=i(F.length,2),{fileRecord:d.LOCAL_FILE_HEADER+ee+E+F,dirRecord:d.CENTRAL_FILE_HEADER+i(U,2)+ee+i(I.length,2)+"\0\0\0\0"+i(H,4)+i(g,4)+E+F+I}}var a=r("../utils"),l=r("../stream/GenericWorker"),c=r("../utf8"),u=r("../crc32"),d=r("../signature");function h(f,b,m,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=m,this.encodeFileName=g,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(f){var b=f.meta.percent||0,m=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:m?(b+100*(m-g-1))/m:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var b=this.streamFiles&&!f.file.dir;if(b){var m=o(f,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var b=this.streamFiles&&!f.file.dir,m=o(f,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),b)this.push({data:function(g){return d.DATA_DESCRIPTOR+i(g.crc32,4)+i(g.compressedSize,4)+i(g.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var m=this.bytesWritten-f,g=function(y,v,_,x,w){var S=a.transformTo("string",w(x));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(y,2)+i(y,2)+i(v,4)+i(_,4)+i(S.length,2)+S}(this.dirRecords.length,m,f,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var b=this;return f.on("data",function(m){b.processChunk(m)}),f.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),f.on("error",function(m){b.error(m)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var b=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var m=0;m<b.length;m++)try{b[m].error(f)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,b=0;b<f.length;b++)f[b].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,s){var i=r("../compressions"),o=r("./ZipFileWorker");s.generateWorker=function(a,l,c){var u=new o(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{a.forEach(function(h,f){d++;var b=function(v,_){var x=v||_,w=i[x];if(!w)throw new Error(x+" is not a valid compression method !");return w}(f.options.compression,l.compression),m=f.options.compressionOptions||l.compressionOptions||{},g=f.dir,y=f.date;f._compressWorker(b,m).withStreamInfo("file",{name:h,dir:g,date:y,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=r("./object")).loadAsync=r("./load"),i.support=r("./support"),i.defaults=r("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=r("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,s){var i=r("./utils"),o=r("./external"),a=r("./utf8"),l=r("./zipEntries"),c=r("./stream/Crc32Probe"),u=r("./nodejsUtils");function d(h){return new o.Promise(function(f,b){var m=h.decompressed.getContentWorker().pipe(new c);m.on("error",function(g){b(g)}).on("end",function(){m.streamInfo.crc32!==h.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}n.exports=function(h,f){var b=this;return f=i.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(m){var g=new l(f);return g.load(m),g}).then(function(m){var g=[o.Promise.resolve(m)],y=m.files;if(f.checkCRC32)for(var v=0;v<y.length;v++)g.push(d(y[v]));return o.Promise.all(g)}).then(function(m){for(var g=m.shift(),y=g.files,v=0;v<y.length;v++){var _=y[v],x=_.fileNameStr,w=i.resolve(_.fileNameStr);b.file(w,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:f.createFolders}),_.dir||(b.file(w).unsafeOriginalName=x)}return g.zipComment.length&&(b.comment=g.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,s){var i=r("../utils"),o=r("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,s){var i=r("readable-stream").Readable;function o(a,l,c){i.call(this,l),this._helper=a;var u=this;a.on("data",function(d,h){u.push(d)||u._helper.pause(),c&&c(h)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}r("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,n,s){n.exports={isNode:typeof qe<"u",newBufferFrom:function(i,o){if(qe.from&&qe.from!==Uint8Array.from)return qe.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new qe(i,o)},allocBuffer:function(i){if(qe.alloc)return qe.alloc(i);var o=new qe(i);return o.fill(0),o},isBuffer:function(i){return qe.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(r,n,s){function i(w,S,T){var E,C=a.getTypeOf(S),A=a.extend(T||{},u);A.date=A.date||new Date,A.compression!==null&&(A.compression=A.compression.toUpperCase()),typeof A.unixPermissions=="string"&&(A.unixPermissions=parseInt(A.unixPermissions,8)),A.unixPermissions&&16384&A.unixPermissions&&(A.dir=!0),A.dosPermissions&&16&A.dosPermissions&&(A.dir=!0),A.dir&&(w=y(w)),A.createFolders&&(E=g(w))&&v.call(this,E,!0);var I=C==="string"&&A.binary===!1&&A.base64===!1;T&&T.binary!==void 0||(A.binary=!I),(S instanceof d&&S.uncompressedSize===0||A.dir||!S||S.length===0)&&(A.base64=!1,A.binary=!0,S="",A.compression="STORE",C="string");var P=null;P=S instanceof d||S instanceof l?S:b.isNode&&b.isStream(S)?new m(w,S):a.prepareContent(w,S,A.binary,A.optimizedBinaryString,A.base64);var D=new h(w,P,A);this.files[w]=D}var o=r("./utf8"),a=r("./utils"),l=r("./stream/GenericWorker"),c=r("./stream/StreamHelper"),u=r("./defaults"),d=r("./compressedObject"),h=r("./zipObject"),f=r("./generate"),b=r("./nodejsUtils"),m=r("./nodejs/NodejsStreamInputAdapter"),g=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var S=w.lastIndexOf("/");return 0<S?w.substring(0,S):""},y=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},v=function(w,S){return S=S!==void 0?S:u.createFolders,w=y(w),this.files[w]||i.call(this,w,null,{dir:!0,createFolders:S}),this.files[w]};function _(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var S,T,E;for(S in this.files)E=this.files[S],(T=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&w(T,E)},filter:function(w){var S=[];return this.forEach(function(T,E){w(T,E)&&S.push(E)}),S},file:function(w,S,T){if(arguments.length!==1)return w=this.root+w,i.call(this,w,S,T),this;if(_(w)){var E=w;return this.filter(function(A,I){return!I.dir&&E.test(A)})}var C=this.files[this.root+w];return C&&!C.dir?C:null},folder:function(w){if(!w)return this;if(_(w))return this.filter(function(C,A){return A.dir&&w.test(C)});var S=this.root+w,T=v.call(this,S),E=this.clone();return E.root=T.name,E},remove:function(w){w=this.root+w;var S=this.files[w];if(S||(w.slice(-1)!=="/"&&(w+="/"),S=this.files[w]),S&&!S.dir)delete this.files[w];else for(var T=this.filter(function(C,A){return A.name.slice(0,w.length)===w}),E=0;E<T.length;E++)delete this.files[T[E].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var S,T={};try{if((T=a.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");a.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var E=T.comment||this.comment||"";S=f.generateWorker(this,T,E)}catch(C){(S=new l("error")).error(C)}return new c(S,T.type||"string",T.mimeType)},generateAsync:function(w,S){return this.generateInternalStream(w).accumulate(S)},generateNodeStream:function(w,S){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(S)}};n.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,s){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,s){var i=r("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}r("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===c&&this.data[h+2]===u&&this.data[h+3]===d)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&c===h[1]&&u===h[2]&&d===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,n,s){var i=r("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,s){var i=r("./Uint8ArrayReader");function o(a){i.call(this,a)}r("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,s){var i=r("./DataReader");function o(a){i.call(this,a)}r("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,n,s){var i=r("./ArrayReader");function o(a){i.call(this,a)}r("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,s){var i=r("../utils"),o=r("../support"),a=r("./ArrayReader"),l=r("./StringReader"),c=r("./NodeBufferReader"),u=r("./Uint8ArrayReader");n.exports=function(d){var h=i.getTypeOf(d);return i.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new c(d):o.uint8array?new u(i.transformTo("uint8array",d)):new a(i.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,s){var i=r("./GenericWorker"),o=r("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,s){var i=r("./GenericWorker"),o=r("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,s){var i=r("../utils"),o=r("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,s){var i=r("../utils"),o=r("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=i.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=i},{}],29:[function(r,n,s){var i=r("../utils"),o=r("./ConvertWorker"),a=r("./GenericWorker"),l=r("../base64"),c=r("../support"),u=r("../external"),d=null;if(c.nodestream)try{d=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(b,m){return new u.Promise(function(g,y){var v=[],_=b._internalType,x=b._outputType,w=b._mimeType;b.on("data",function(S,T){v.push(S),m&&m(T)}).on("error",function(S){v=[],y(S)}).on("end",function(){try{var S=function(T,E,C){switch(T){case"blob":return i.newBlob(i.transformTo("arraybuffer",E),C);case"base64":return l.encode(E);default:return i.transformTo(T,E)}}(x,function(T,E){var C,A=0,I=null,P=0;for(C=0;C<E.length;C++)P+=E[C].length;switch(T){case"string":return E.join("");case"array":return Array.prototype.concat.apply([],E);case"uint8array":for(I=new Uint8Array(P),C=0;C<E.length;C++)I.set(E[C],A),A+=E[C].length;return I;case"nodebuffer":return qe.concat(E);default:throw new Error("concat : unsupported type '"+T+"'")}}(_,v),w);g(S)}catch(T){y(T)}v=[]}).resume()})}function f(b,m,g){var y=m;switch(m){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=m,this._mimeType=g,i.checkSupport(y),this._worker=b.pipe(new o(y)),b.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}f.prototype={accumulate:function(b){return h(this,b)},on:function(b,m){var g=this;return b==="data"?this._worker.on(b,function(y){m.call(g,y.data,y.meta)}):this._worker.on(b,function(){i.delay(m,arguments,g)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},b)}},n.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof qe<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!r("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,s){for(var i=r("./utils"),o=r("./support"),a=r("./nodejsUtils"),l=r("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}s.utf8encode=function(f){return o.nodebuffer?a.newBufferFrom(f,"utf-8"):function(b){var m,g,y,v,_,x=b.length,w=0;for(v=0;v<x;v++)(64512&(g=b.charCodeAt(v)))==55296&&v+1<x&&(64512&(y=b.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),v++),w+=g<128?1:g<2048?2:g<65536?3:4;for(m=o.uint8array?new Uint8Array(w):new Array(w),v=_=0;_<w;v++)(64512&(g=b.charCodeAt(v)))==55296&&v+1<x&&(64512&(y=b.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),v++),g<128?m[_++]=g:(g<2048?m[_++]=192|g>>>6:(g<65536?m[_++]=224|g>>>12:(m[_++]=240|g>>>18,m[_++]=128|g>>>12&63),m[_++]=128|g>>>6&63),m[_++]=128|63&g);return m}(f)},s.utf8decode=function(f){return o.nodebuffer?i.transformTo("nodebuffer",f).toString("utf-8"):function(b){var m,g,y,v,_=b.length,x=new Array(2*_);for(m=g=0;m<_;)if((y=b[m++])<128)x[g++]=y;else if(4<(v=c[y]))x[g++]=65533,m+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&m<_;)y=y<<6|63&b[m++],v--;1<v?x[g++]=65533:y<65536?x[g++]=y:(y-=65536,x[g++]=55296|y>>10&1023,x[g++]=56320|1023&y)}return x.length!==g&&(x.subarray?x=x.subarray(0,g):x.length=g),i.applyFromCharCode(x)}(f=i.transformTo(o.uint8array?"uint8array":"array",f))},i.inherits(d,l),d.prototype.processChunk=function(f){var b=i.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=b;(b=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),b.set(m,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var g=function(v,_){var x;for((_=_||v.length)>v.length&&(_=v.length),x=_-1;0<=x&&(192&v[x])==128;)x--;return x<0||x===0?_:x+c[v[x]]>_?x:_}(b),y=b;g!==b.length&&(o.uint8array?(y=b.subarray(0,g),this.leftOver=b.subarray(g,b.length)):(y=b.slice(0,g),this.leftOver=b.slice(g,b.length))),this.push({data:s.utf8decode(y),meta:f.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=d,i.inherits(h,l),h.prototype.processChunk=function(f){this.push({data:s.utf8encode(f.data),meta:f.meta})},s.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,s){var i=r("./support"),o=r("./base64"),a=r("./nodejsUtils"),l=r("./external");function c(m){return m}function u(m,g){for(var y=0;y<m.length;++y)g[y]=255&m.charCodeAt(y);return g}r("setimmediate"),s.newBlob=function(m,g){s.checkSupport("blob");try{return new Blob([m],{type:g})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(m),y.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(m,g,y){var v=[],_=0,x=m.length;if(x<=y)return String.fromCharCode.apply(null,m);for(;_<x;)g==="array"||g==="nodebuffer"?v.push(String.fromCharCode.apply(null,m.slice(_,Math.min(_+y,x)))):v.push(String.fromCharCode.apply(null,m.subarray(_,Math.min(_+y,x)))),_+=y;return v.join("")},stringifyByChar:function(m){for(var g="",y=0;y<m.length;y++)g+=String.fromCharCode(m[y]);return g},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(m){var g=65536,y=s.getTypeOf(m),v=!0;if(y==="uint8array"?v=d.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=d.applyCanBeUsed.nodebuffer),v)for(;1<g;)try{return d.stringifyByChunk(m,y,g)}catch{g=Math.floor(g/2)}return d.stringifyByChar(m)}function f(m,g){for(var y=0;y<m.length;y++)g[y]=m[y];return g}s.applyFromCharCode=h;var b={};b.string={string:c,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return b.string.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:function(m){return u(m,a.allocBuffer(m.length))}},b.array={string:h,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},b.arraybuffer={string:function(m){return h(new Uint8Array(m))},array:function(m){return f(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},b.uint8array={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return a.newBufferFrom(m)}},b.nodebuffer={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return b.nodebuffer.uint8array(m).buffer},uint8array:function(m){return f(m,new Uint8Array(m.length))},nodebuffer:c},s.transformTo=function(m,g){if(g=g||"",!m)return g;s.checkSupport(m);var y=s.getTypeOf(g);return b[y][m](g)},s.resolve=function(m){for(var g=m.split("/"),y=[],v=0;v<g.length;v++){var _=g[v];_==="."||_===""&&v!==0&&v!==g.length-1||(_===".."?y.pop():y.push(_))}return y.join("/")},s.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(m)?"nodebuffer":i.uint8array&&m instanceof Uint8Array?"uint8array":i.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(m){if(!i[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(m){var g,y,v="";for(y=0;y<(m||"").length;y++)v+="\\x"+((g=m.charCodeAt(y))<16?"0":"")+g.toString(16).toUpperCase();return v},s.delay=function(m,g,y){setImmediate(function(){m.apply(y||null,g||[])})},s.inherits=function(m,g){function y(){}y.prototype=g.prototype,m.prototype=new y},s.extend=function(){var m,g,y={};for(m=0;m<arguments.length;m++)for(g in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],g)&&y[g]===void 0&&(y[g]=arguments[m][g]);return y},s.prepareContent=function(m,g,y,v,_){return l.Promise.resolve(g).then(function(x){return i.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new l.Promise(function(w,S){var T=new FileReader;T.onload=function(E){w(E.target.result)},T.onerror=function(E){S(E.target.error)},T.readAsArrayBuffer(x)}):x}).then(function(x){var w=s.getTypeOf(x);return w?(w==="arraybuffer"?x=s.transformTo("uint8array",x):w==="string"&&(_?x=o.decode(x):y&&v!==!0&&(x=function(S){return u(S,i.uint8array?new Uint8Array(S.length):new Array(S.length))}(x))),x):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,s){var i=r("./reader/readerFor"),o=r("./utils"),a=r("./signature"),l=r("./zipEntry"),c=r("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(d)+")")}},isSignature:function(d,h){var f=this.reader.index;this.reader.setIndex(d);var b=this.reader.readString(4)===h;return this.reader.setIndex(f),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",f=o.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,f,b=this.zip64EndOfCentralSize-44;0<b;)d=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var b=h-f;if(0<b)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(d){this.reader=i(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,s){var i=r("./reader/readerFor"),o=r("./utils"),a=r("./compressedObject"),l=r("./crc32"),c=r("./utf8"),u=r("./compressions"),d=r("./support");function h(f,b){this.options=f,this.loadOptions=b}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var b,m;if(f.skip(22),this.fileNameLength=f.readInt(2),m=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(g){for(var y in u)if(Object.prototype.hasOwnProperty.call(u,y)&&u[y].magic===g)return u[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,b,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var b=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(b),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var b,m,g,y=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<y;)b=f.readInt(2),m=f.readInt(2),g=f.readData(m),this.extraFields[b]={id:b,length:m,value:g};f.setIndex(y)},handleUTF8:function(){var f=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var m=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var y=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var b=i(f.value);return b.readInt(1)!==1||l(this.fileName)!==b.readInt(4)?null:c.utf8decode(b.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var b=i(f.value);return b.readInt(1)!==1||l(this.fileComment)!==b.readInt(4)?null:c.utf8decode(b.readData(f.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,s){function i(b,m,g){this.name=b,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=m,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var o=r("./stream/StreamHelper"),a=r("./stream/DataWorker"),l=r("./utf8"),c=r("./compressedObject"),u=r("./stream/GenericWorker");i.prototype={internalStream:function(b){var m=null,g="string";try{if(!b)throw new Error("No output type specified.");var y=(g=b.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),m=this._decompressWorker();var v=!this._dataBinary;v&&!y&&(m=m.pipe(new l.Utf8EncodeWorker)),!v&&y&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(_){(m=new u("error")).error(_)}return new o(m,g,"")},async:function(b,m){return this.internalStream(b).accumulate(m)},nodeStream:function(b,m){return this.internalStream(b||"nodebuffer").toNodejsStream(m)},_compressWorker:function(b,m){if(this._data instanceof c&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(g,b,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<d.length;f++)i.prototype[d[f]]=h;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,u=new l(b),d=i.document.createTextNode("");u.observe(d,{characterData:!0}),o=function(){d.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var m=i.document.createElement("script");m.onreadystatechange=function(){b(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},i.document.documentElement.appendChild(m)}:function(){setTimeout(b,0)};else{var h=new i.MessageChannel;h.port1.onmessage=b,o=function(){h.port2.postMessage(0)}}var f=[];function b(){var m,g;a=!0;for(var y=f.length;y;){for(g=f,f=[],m=-1;++m<y;)g[m]();y=f.length}a=!1}n.exports=function(m){f.push(m)!==1||a||o()}}).call(this,typeof kr<"u"?kr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,s){var i=r("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function d(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,y!==o&&m(this,y)}function h(y,v,_){this.promise=y,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function f(y,v,_){i(function(){var x;try{x=v(_)}catch(w){return a.reject(y,w)}x===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,x)})}function b(y){var v=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof v=="function")return function(){v.apply(y,arguments)}}function m(y,v){var _=!1;function x(T){_||(_=!0,a.reject(y,T))}function w(T){_||(_=!0,a.resolve(y,T))}var S=g(function(){v(w,x)});S.status==="error"&&x(S.value)}function g(y,v){var _={};try{_.value=y(v),_.status="success"}catch(x){_.status="error",_.value=x}return _}(n.exports=d).prototype.finally=function(y){if(typeof y!="function")return this;var v=this.constructor;return this.then(function(_){return v.resolve(y()).then(function(){return _})},function(_){return v.resolve(y()).then(function(){throw _})})},d.prototype.catch=function(y){return this.then(null,y)},d.prototype.then=function(y,v){if(typeof y!="function"&&this.state===c||typeof v!="function"&&this.state===l)return this;var _=new this.constructor(o);return this.state!==u?f(_,this.state===c?y:v,this.outcome):this.queue.push(new h(_,y,v)),_},h.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},h.prototype.otherCallFulfilled=function(y){f(this.promise,this.onFulfilled,y)},h.prototype.callRejected=function(y){a.reject(this.promise,y)},h.prototype.otherCallRejected=function(y){f(this.promise,this.onRejected,y)},a.resolve=function(y,v){var _=g(b,v);if(_.status==="error")return a.reject(y,_.value);var x=_.value;if(x)m(y,x);else{y.state=c,y.outcome=v;for(var w=-1,S=y.queue.length;++w<S;)y.queue[w].callFulfilled(v)}return y},a.reject=function(y,v){y.state=l,y.outcome=v;for(var _=-1,x=y.queue.length;++_<x;)y.queue[_].callRejected(v);return y},d.resolve=function(y){return y instanceof this?y:a.resolve(new this(o),y)},d.reject=function(y){var v=new this(o);return a.reject(v,y)},d.all=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,x=!1;if(!_)return this.resolve([]);for(var w=new Array(_),S=0,T=-1,E=new this(o);++T<_;)C(y[T],T);return E;function C(A,I){v.resolve(A).then(function(P){w[I]=P,++S!==_||x||(x=!0,a.resolve(E,w))},function(P){x||(x=!0,a.reject(E,P))})}},d.race=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,x=!1;if(!_)return this.resolve([]);for(var w=-1,S=new this(o);++w<_;)T=y[w],v.resolve(T).then(function(E){x||(x=!0,a.resolve(S,E))},function(E){x||(x=!0,a.reject(S,E))});var T;return S}},{immediate:36}],38:[function(r,n,s){var i={};(0,r("./lib/utils/common").assign)(i,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,s){var i=r("./zlib/deflate"),o=r("./utils/common"),a=r("./utils/strings"),l=r("./zlib/messages"),c=r("./zlib/zstream"),u=Object.prototype.toString,d=0,h=-1,f=0,b=8;function m(y){if(!(this instanceof m))return new m(y);this.options=o.assign({level:h,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},y||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var _=i.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(_!==d)throw new Error(l[_]);if(v.header&&i.deflateSetHeader(this.strm,v.header),v.dictionary){var x;if(x=typeof v.dictionary=="string"?a.string2buf(v.dictionary):u.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(_=i.deflateSetDictionary(this.strm,x))!==d)throw new Error(l[_]);this._dict_set=!0}}function g(y,v){var _=new m(v);if(_.push(y,!0),_.err)throw _.msg||l[_.err];return _.result}m.prototype.push=function(y,v){var _,x,w=this.strm,S=this.options.chunkSize;if(this.ended)return!1;x=v===~~v?v:v===!0?4:0,typeof y=="string"?w.input=a.string2buf(y):u.call(y)==="[object ArrayBuffer]"?w.input=new Uint8Array(y):w.input=y,w.next_in=0,w.avail_in=w.input.length;do{if(w.avail_out===0&&(w.output=new o.Buf8(S),w.next_out=0,w.avail_out=S),(_=i.deflate(w,x))!==1&&_!==d)return this.onEnd(_),!(this.ended=!0);w.avail_out!==0&&(w.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(w.output,w.next_out))):this.onData(o.shrinkBuf(w.output,w.next_out)))}while((0<w.avail_in||w.avail_out===0)&&_!==1);return x===4?(_=i.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===d):x!==2||(this.onEnd(d),!(w.avail_out=0))},m.prototype.onData=function(y){this.chunks.push(y)},m.prototype.onEnd=function(y){y===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},s.Deflate=m,s.deflate=g,s.deflateRaw=function(y,v){return(v=v||{}).raw=!0,g(y,v)},s.gzip=function(y,v){return(v=v||{}).gzip=!0,g(y,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,s){var i=r("./zlib/inflate"),o=r("./utils/common"),a=r("./utils/strings"),l=r("./zlib/constants"),c=r("./zlib/messages"),u=r("./zlib/zstream"),d=r("./zlib/gzheader"),h=Object.prototype.toString;function f(m){if(!(this instanceof f))return new f(m);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},m||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||m&&m.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var y=i.inflateInit2(this.strm,g.windowBits);if(y!==l.Z_OK)throw new Error(c[y]);this.header=new d,i.inflateGetHeader(this.strm,this.header)}function b(m,g){var y=new f(g);if(y.push(m,!0),y.err)throw y.msg||c[y.err];return y.result}f.prototype.push=function(m,g){var y,v,_,x,w,S,T=this.strm,E=this.options.chunkSize,C=this.options.dictionary,A=!1;if(this.ended)return!1;v=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?T.input=a.binstring2buf(m):h.call(m)==="[object ArrayBuffer]"?T.input=new Uint8Array(m):T.input=m,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(E),T.next_out=0,T.avail_out=E),(y=i.inflate(T,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&C&&(S=typeof C=="string"?a.string2buf(C):h.call(C)==="[object ArrayBuffer]"?new Uint8Array(C):C,y=i.inflateSetDictionary(this.strm,S)),y===l.Z_BUF_ERROR&&A===!0&&(y=l.Z_OK,A=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&y!==l.Z_STREAM_END&&(T.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(T.output,T.next_out),x=T.next_out-_,w=a.buf2string(T.output,_),T.next_out=x,T.avail_out=E-x,x&&o.arraySet(T.output,T.output,_,x,0),this.onData(w)):this.onData(o.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(A=!0)}while((0<T.avail_in||T.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(y=i.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(T.avail_out=0))},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},s.Inflate=f,s.inflate=b,s.inflateRaw=function(m,g){return(g=g||{}).raw=!0,b(m,g)},s.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(l[d]=u[d])}}return l},s.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,u,d,h){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+d),h);else for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){var c,u,d,h,f,b;for(c=d=0,u=l.length;c<u;c++)d+=l[c].length;for(b=new Uint8Array(d),c=h=0,u=l.length;c<u;c++)f=l[c],b.set(f,h),h+=f.length;return b}},a={arraySet:function(l,c,u,d,h){for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(r,n,s){var i=r("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(d,h){if(h<65537&&(d.subarray&&a||!d.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(d,h));for(var f="",b=0;b<h;b++)f+=String.fromCharCode(d[b]);return f}l[254]=l[254]=1,s.string2buf=function(d){var h,f,b,m,g,y=d.length,v=0;for(m=0;m<y;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<y&&(64512&(b=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(b-56320),m++),v+=f<128?1:f<2048?2:f<65536?3:4;for(h=new i.Buf8(v),m=g=0;g<v;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<y&&(64512&(b=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(b-56320),m++),f<128?h[g++]=f:(f<2048?h[g++]=192|f>>>6:(f<65536?h[g++]=224|f>>>12:(h[g++]=240|f>>>18,h[g++]=128|f>>>12&63),h[g++]=128|f>>>6&63),h[g++]=128|63&f);return h},s.buf2binstring=function(d){return u(d,d.length)},s.binstring2buf=function(d){for(var h=new i.Buf8(d.length),f=0,b=h.length;f<b;f++)h[f]=d.charCodeAt(f);return h},s.buf2string=function(d,h){var f,b,m,g,y=h||d.length,v=new Array(2*y);for(f=b=0;f<y;)if((m=d[f++])<128)v[b++]=m;else if(4<(g=l[m]))v[b++]=65533,f+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&f<y;)m=m<<6|63&d[f++],g--;1<g?v[b++]=65533:m<65536?v[b++]=m:(m-=65536,v[b++]=55296|m>>10&1023,v[b++]=56320|1023&m)}return u(v,b)},s.utf8border=function(d,h){var f;for((h=h||d.length)>d.length&&(h=d.length),f=h-1;0<=f&&(192&d[f])==128;)f--;return f<0||f===0?h:f+l[d[f]]>h?f:h}},{"./common":41}],43:[function(r,n,s){n.exports=function(i,o,a,l){for(var c=65535&i|0,u=i>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;u=u+(c=c+o[l++]|0)|0,--d;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(r,n,s){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();n.exports=function(o,a,l,c){var u=i,d=c+l;o^=-1;for(var h=c;h<d;h++)o=o>>>8^u[255&(o^a[h])];return-1^o}},{}],46:[function(r,n,s){var i,o=r("../utils/common"),a=r("./trees"),l=r("./adler32"),c=r("./crc32"),u=r("./messages"),d=0,h=4,f=0,b=-2,m=-1,g=4,y=2,v=8,_=9,x=286,w=30,S=19,T=2*x+1,E=15,C=3,A=258,I=A+C+1,P=42,D=113,R=1,F=2,G=3,z=4;function K(M,oe){return M.msg=u[oe],oe}function L(M){return(M<<1)-(4<M?9:0)}function O(M){for(var oe=M.length;0<=--oe;)M[oe]=0}function $(M){var oe=M.state,le=oe.pending;le>M.avail_out&&(le=M.avail_out),le!==0&&(o.arraySet(M.output,oe.pending_buf,oe.pending_out,le,M.next_out),M.next_out+=le,oe.pending_out+=le,M.total_out+=le,M.avail_out-=le,oe.pending-=le,oe.pending===0&&(oe.pending_out=0))}function H(M,oe){a._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,oe),M.block_start=M.strstart,$(M.strm)}function U(M,oe){M.pending_buf[M.pending++]=oe}function ee(M,oe){M.pending_buf[M.pending++]=oe>>>8&255,M.pending_buf[M.pending++]=255&oe}function X(M,oe){var le,q,V=M.max_chain_length,ae=M.strstart,xe=M.prev_length,Te=M.nice_match,fe=M.strstart>M.w_size-I?M.strstart-(M.w_size-I):0,ke=M.window,Me=M.w_mask,Re=M.prev,de=M.strstart+A,be=ke[ae+xe-1],Se=ke[ae+xe];M.prev_length>=M.good_match&&(V>>=2),Te>M.lookahead&&(Te=M.lookahead);do if(ke[(le=oe)+xe]===Se&&ke[le+xe-1]===be&&ke[le]===ke[ae]&&ke[++le]===ke[ae+1]){ae+=2,le++;do;while(ke[++ae]===ke[++le]&&ke[++ae]===ke[++le]&&ke[++ae]===ke[++le]&&ke[++ae]===ke[++le]&&ke[++ae]===ke[++le]&&ke[++ae]===ke[++le]&&ke[++ae]===ke[++le]&&ke[++ae]===ke[++le]&&ae<de);if(q=A-(de-ae),ae=de-A,xe<q){if(M.match_start=oe,Te<=(xe=q))break;be=ke[ae+xe-1],Se=ke[ae+xe]}}while((oe=Re[oe&Me])>fe&&--V!=0);return xe<=M.lookahead?xe:M.lookahead}function ge(M){var oe,le,q,V,ae,xe,Te,fe,ke,Me,Re=M.w_size;do{if(V=M.window_size-M.lookahead-M.strstart,M.strstart>=Re+(Re-I)){for(o.arraySet(M.window,M.window,Re,Re,0),M.match_start-=Re,M.strstart-=Re,M.block_start-=Re,oe=le=M.hash_size;q=M.head[--oe],M.head[oe]=Re<=q?q-Re:0,--le;);for(oe=le=Re;q=M.prev[--oe],M.prev[oe]=Re<=q?q-Re:0,--le;);V+=Re}if(M.strm.avail_in===0)break;if(xe=M.strm,Te=M.window,fe=M.strstart+M.lookahead,ke=V,Me=void 0,Me=xe.avail_in,ke<Me&&(Me=ke),le=Me===0?0:(xe.avail_in-=Me,o.arraySet(Te,xe.input,xe.next_in,Me,fe),xe.state.wrap===1?xe.adler=l(xe.adler,Te,Me,fe):xe.state.wrap===2&&(xe.adler=c(xe.adler,Te,Me,fe)),xe.next_in+=Me,xe.total_in+=Me,Me),M.lookahead+=le,M.lookahead+M.insert>=C)for(ae=M.strstart-M.insert,M.ins_h=M.window[ae],M.ins_h=(M.ins_h<<M.hash_shift^M.window[ae+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[ae+C-1])&M.hash_mask,M.prev[ae&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=ae,ae++,M.insert--,!(M.lookahead+M.insert<C)););}while(M.lookahead<I&&M.strm.avail_in!==0)}function J(M,oe){for(var le,q;;){if(M.lookahead<I){if(ge(M),M.lookahead<I&&oe===d)return R;if(M.lookahead===0)break}if(le=0,M.lookahead>=C&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+C-1])&M.hash_mask,le=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),le!==0&&M.strstart-le<=M.w_size-I&&(M.match_length=X(M,le)),M.match_length>=C)if(q=a._tr_tally(M,M.strstart-M.match_start,M.match_length-C),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=C){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+C-1])&M.hash_mask,le=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else q=a._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(q&&(H(M,!1),M.strm.avail_out===0))return R}return M.insert=M.strstart<C-1?M.strstart:C-1,oe===h?(H(M,!0),M.strm.avail_out===0?G:z):M.last_lit&&(H(M,!1),M.strm.avail_out===0)?R:F}function j(M,oe){for(var le,q,V;;){if(M.lookahead<I){if(ge(M),M.lookahead<I&&oe===d)return R;if(M.lookahead===0)break}if(le=0,M.lookahead>=C&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+C-1])&M.hash_mask,le=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=C-1,le!==0&&M.prev_length<M.max_lazy_match&&M.strstart-le<=M.w_size-I&&(M.match_length=X(M,le),M.match_length<=5&&(M.strategy===1||M.match_length===C&&4096<M.strstart-M.match_start)&&(M.match_length=C-1)),M.prev_length>=C&&M.match_length<=M.prev_length){for(V=M.strstart+M.lookahead-C,q=a._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-C),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=V&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+C-1])&M.hash_mask,le=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=C-1,M.strstart++,q&&(H(M,!1),M.strm.avail_out===0))return R}else if(M.match_available){if((q=a._tr_tally(M,0,M.window[M.strstart-1]))&&H(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return R}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(q=a._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<C-1?M.strstart:C-1,oe===h?(H(M,!0),M.strm.avail_out===0?G:z):M.last_lit&&(H(M,!1),M.strm.avail_out===0)?R:F}function Y(M,oe,le,q,V){this.good_length=M,this.max_lazy=oe,this.nice_length=le,this.max_chain=q,this.func=V}function Q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*T),this.dyn_dtree=new o.Buf16(2*(2*w+1)),this.bl_tree=new o.Buf16(2*(2*S+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(E+1),this.heap=new o.Buf16(2*x+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*x+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ie(M){var oe;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=y,(oe=M.state).pending=0,oe.pending_out=0,oe.wrap<0&&(oe.wrap=-oe.wrap),oe.status=oe.wrap?P:D,M.adler=oe.wrap===2?0:1,oe.last_flush=d,a._tr_init(oe),f):K(M,b)}function re(M){var oe=ie(M);return oe===f&&function(le){le.window_size=2*le.w_size,O(le.head),le.max_lazy_match=i[le.level].max_lazy,le.good_match=i[le.level].good_length,le.nice_match=i[le.level].nice_length,le.max_chain_length=i[le.level].max_chain,le.strstart=0,le.block_start=0,le.lookahead=0,le.insert=0,le.match_length=le.prev_length=C-1,le.match_available=0,le.ins_h=0}(M.state),oe}function pe(M,oe,le,q,V,ae){if(!M)return b;var xe=1;if(oe===m&&(oe=6),q<0?(xe=0,q=-q):15<q&&(xe=2,q-=16),V<1||_<V||le!==v||q<8||15<q||oe<0||9<oe||ae<0||g<ae)return K(M,b);q===8&&(q=9);var Te=new Q;return(M.state=Te).strm=M,Te.wrap=xe,Te.gzhead=null,Te.w_bits=q,Te.w_size=1<<Te.w_bits,Te.w_mask=Te.w_size-1,Te.hash_bits=V+7,Te.hash_size=1<<Te.hash_bits,Te.hash_mask=Te.hash_size-1,Te.hash_shift=~~((Te.hash_bits+C-1)/C),Te.window=new o.Buf8(2*Te.w_size),Te.head=new o.Buf16(Te.hash_size),Te.prev=new o.Buf16(Te.w_size),Te.lit_bufsize=1<<V+6,Te.pending_buf_size=4*Te.lit_bufsize,Te.pending_buf=new o.Buf8(Te.pending_buf_size),Te.d_buf=1*Te.lit_bufsize,Te.l_buf=3*Te.lit_bufsize,Te.level=oe,Te.strategy=ae,Te.method=le,re(M)}i=[new Y(0,0,0,0,function(M,oe){var le=65535;for(le>M.pending_buf_size-5&&(le=M.pending_buf_size-5);;){if(M.lookahead<=1){if(ge(M),M.lookahead===0&&oe===d)return R;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var q=M.block_start+le;if((M.strstart===0||M.strstart>=q)&&(M.lookahead=M.strstart-q,M.strstart=q,H(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-I&&(H(M,!1),M.strm.avail_out===0))return R}return M.insert=0,oe===h?(H(M,!0),M.strm.avail_out===0?G:z):(M.strstart>M.block_start&&(H(M,!1),M.strm.avail_out),R)}),new Y(4,4,8,4,J),new Y(4,5,16,8,J),new Y(4,6,32,32,J),new Y(4,4,16,16,j),new Y(8,16,32,32,j),new Y(8,16,128,128,j),new Y(8,32,128,256,j),new Y(32,128,258,1024,j),new Y(32,258,258,4096,j)],s.deflateInit=function(M,oe){return pe(M,oe,v,15,8,0)},s.deflateInit2=pe,s.deflateReset=re,s.deflateResetKeep=ie,s.deflateSetHeader=function(M,oe){return M&&M.state?M.state.wrap!==2?b:(M.state.gzhead=oe,f):b},s.deflate=function(M,oe){var le,q,V,ae;if(!M||!M.state||5<oe||oe<0)return M?K(M,b):b;if(q=M.state,!M.output||!M.input&&M.avail_in!==0||q.status===666&&oe!==h)return K(M,M.avail_out===0?-5:b);if(q.strm=M,le=q.last_flush,q.last_flush=oe,q.status===P)if(q.wrap===2)M.adler=0,U(q,31),U(q,139),U(q,8),q.gzhead?(U(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),U(q,255&q.gzhead.time),U(q,q.gzhead.time>>8&255),U(q,q.gzhead.time>>16&255),U(q,q.gzhead.time>>24&255),U(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),U(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(U(q,255&q.gzhead.extra.length),U(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(M.adler=c(M.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(U(q,0),U(q,0),U(q,0),U(q,0),U(q,0),U(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),U(q,3),q.status=D);else{var xe=v+(q.w_bits-8<<4)<<8;xe|=(2<=q.strategy||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(xe|=32),xe+=31-xe%31,q.status=D,ee(q,xe),q.strstart!==0&&(ee(q,M.adler>>>16),ee(q,65535&M.adler)),M.adler=1}if(q.status===69)if(q.gzhead.extra){for(V=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>V&&(M.adler=c(M.adler,q.pending_buf,q.pending-V,V)),$(M),V=q.pending,q.pending!==q.pending_buf_size));)U(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>V&&(M.adler=c(M.adler,q.pending_buf,q.pending-V,V)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){V=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>V&&(M.adler=c(M.adler,q.pending_buf,q.pending-V,V)),$(M),V=q.pending,q.pending===q.pending_buf_size)){ae=1;break}ae=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,U(q,ae)}while(ae!==0);q.gzhead.hcrc&&q.pending>V&&(M.adler=c(M.adler,q.pending_buf,q.pending-V,V)),ae===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){V=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>V&&(M.adler=c(M.adler,q.pending_buf,q.pending-V,V)),$(M),V=q.pending,q.pending===q.pending_buf_size)){ae=1;break}ae=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,U(q,ae)}while(ae!==0);q.gzhead.hcrc&&q.pending>V&&(M.adler=c(M.adler,q.pending_buf,q.pending-V,V)),ae===0&&(q.status=103)}else q.status=103;if(q.status===103&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&$(M),q.pending+2<=q.pending_buf_size&&(U(q,255&M.adler),U(q,M.adler>>8&255),M.adler=0,q.status=D)):q.status=D),q.pending!==0){if($(M),M.avail_out===0)return q.last_flush=-1,f}else if(M.avail_in===0&&L(oe)<=L(le)&&oe!==h)return K(M,-5);if(q.status===666&&M.avail_in!==0)return K(M,-5);if(M.avail_in!==0||q.lookahead!==0||oe!==d&&q.status!==666){var Te=q.strategy===2?function(fe,ke){for(var Me;;){if(fe.lookahead===0&&(ge(fe),fe.lookahead===0)){if(ke===d)return R;break}if(fe.match_length=0,Me=a._tr_tally(fe,0,fe.window[fe.strstart]),fe.lookahead--,fe.strstart++,Me&&(H(fe,!1),fe.strm.avail_out===0))return R}return fe.insert=0,ke===h?(H(fe,!0),fe.strm.avail_out===0?G:z):fe.last_lit&&(H(fe,!1),fe.strm.avail_out===0)?R:F}(q,oe):q.strategy===3?function(fe,ke){for(var Me,Re,de,be,Se=fe.window;;){if(fe.lookahead<=A){if(ge(fe),fe.lookahead<=A&&ke===d)return R;if(fe.lookahead===0)break}if(fe.match_length=0,fe.lookahead>=C&&0<fe.strstart&&(Re=Se[de=fe.strstart-1])===Se[++de]&&Re===Se[++de]&&Re===Se[++de]){be=fe.strstart+A;do;while(Re===Se[++de]&&Re===Se[++de]&&Re===Se[++de]&&Re===Se[++de]&&Re===Se[++de]&&Re===Se[++de]&&Re===Se[++de]&&Re===Se[++de]&&de<be);fe.match_length=A-(be-de),fe.match_length>fe.lookahead&&(fe.match_length=fe.lookahead)}if(fe.match_length>=C?(Me=a._tr_tally(fe,1,fe.match_length-C),fe.lookahead-=fe.match_length,fe.strstart+=fe.match_length,fe.match_length=0):(Me=a._tr_tally(fe,0,fe.window[fe.strstart]),fe.lookahead--,fe.strstart++),Me&&(H(fe,!1),fe.strm.avail_out===0))return R}return fe.insert=0,ke===h?(H(fe,!0),fe.strm.avail_out===0?G:z):fe.last_lit&&(H(fe,!1),fe.strm.avail_out===0)?R:F}(q,oe):i[q.level].func(q,oe);if(Te!==G&&Te!==z||(q.status=666),Te===R||Te===G)return M.avail_out===0&&(q.last_flush=-1),f;if(Te===F&&(oe===1?a._tr_align(q):oe!==5&&(a._tr_stored_block(q,0,0,!1),oe===3&&(O(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),$(M),M.avail_out===0))return q.last_flush=-1,f}return oe!==h?f:q.wrap<=0?1:(q.wrap===2?(U(q,255&M.adler),U(q,M.adler>>8&255),U(q,M.adler>>16&255),U(q,M.adler>>24&255),U(q,255&M.total_in),U(q,M.total_in>>8&255),U(q,M.total_in>>16&255),U(q,M.total_in>>24&255)):(ee(q,M.adler>>>16),ee(q,65535&M.adler)),$(M),0<q.wrap&&(q.wrap=-q.wrap),q.pending!==0?f:1)},s.deflateEnd=function(M){var oe;return M&&M.state?(oe=M.state.status)!==P&&oe!==69&&oe!==73&&oe!==91&&oe!==103&&oe!==D&&oe!==666?K(M,b):(M.state=null,oe===D?K(M,-3):f):b},s.deflateSetDictionary=function(M,oe){var le,q,V,ae,xe,Te,fe,ke,Me=oe.length;if(!M||!M.state||(ae=(le=M.state).wrap)===2||ae===1&&le.status!==P||le.lookahead)return b;for(ae===1&&(M.adler=l(M.adler,oe,Me,0)),le.wrap=0,Me>=le.w_size&&(ae===0&&(O(le.head),le.strstart=0,le.block_start=0,le.insert=0),ke=new o.Buf8(le.w_size),o.arraySet(ke,oe,Me-le.w_size,le.w_size,0),oe=ke,Me=le.w_size),xe=M.avail_in,Te=M.next_in,fe=M.input,M.avail_in=Me,M.next_in=0,M.input=oe,ge(le);le.lookahead>=C;){for(q=le.strstart,V=le.lookahead-(C-1);le.ins_h=(le.ins_h<<le.hash_shift^le.window[q+C-1])&le.hash_mask,le.prev[q&le.w_mask]=le.head[le.ins_h],le.head[le.ins_h]=q,q++,--V;);le.strstart=q,le.lookahead=C-1,ge(le)}return le.strstart+=le.lookahead,le.block_start=le.strstart,le.insert=le.lookahead,le.lookahead=0,le.match_length=le.prev_length=C-1,le.match_available=0,M.next_in=Te,M.input=fe,M.avail_in=xe,le.wrap=ae,f},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,s){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,s){n.exports=function(i,o){var a,l,c,u,d,h,f,b,m,g,y,v,_,x,w,S,T,E,C,A,I,P,D,R,F;a=i.state,l=i.next_in,R=i.input,c=l+(i.avail_in-5),u=i.next_out,F=i.output,d=u-(o-i.avail_out),h=u+(i.avail_out-257),f=a.dmax,b=a.wsize,m=a.whave,g=a.wnext,y=a.window,v=a.hold,_=a.bits,x=a.lencode,w=a.distcode,S=(1<<a.lenbits)-1,T=(1<<a.distbits)-1;e:do{_<15&&(v+=R[l++]<<_,_+=8,v+=R[l++]<<_,_+=8),E=x[v&S];t:for(;;){if(v>>>=C=E>>>24,_-=C,(C=E>>>16&255)===0)F[u++]=65535&E;else{if(!(16&C)){if(!(64&C)){E=x[(65535&E)+(v&(1<<C)-1)];continue t}if(32&C){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}A=65535&E,(C&=15)&&(_<C&&(v+=R[l++]<<_,_+=8),A+=v&(1<<C)-1,v>>>=C,_-=C),_<15&&(v+=R[l++]<<_,_+=8,v+=R[l++]<<_,_+=8),E=w[v&T];r:for(;;){if(v>>>=C=E>>>24,_-=C,!(16&(C=E>>>16&255))){if(!(64&C)){E=w[(65535&E)+(v&(1<<C)-1)];continue r}i.msg="invalid distance code",a.mode=30;break e}if(I=65535&E,_<(C&=15)&&(v+=R[l++]<<_,(_+=8)<C&&(v+=R[l++]<<_,_+=8)),f<(I+=v&(1<<C)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=C,_-=C,(C=u-d)<I){if(m<(C=I-C)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(D=y,(P=0)===g){if(P+=b-C,C<A){for(A-=C;F[u++]=y[P++],--C;);P=u-I,D=F}}else if(g<C){if(P+=b+g-C,(C-=g)<A){for(A-=C;F[u++]=y[P++],--C;);if(P=0,g<A){for(A-=C=g;F[u++]=y[P++],--C;);P=u-I,D=F}}}else if(P+=g-C,C<A){for(A-=C;F[u++]=y[P++],--C;);P=u-I,D=F}for(;2<A;)F[u++]=D[P++],F[u++]=D[P++],F[u++]=D[P++],A-=3;A&&(F[u++]=D[P++],1<A&&(F[u++]=D[P++]))}else{for(P=u-I;F[u++]=F[P++],F[u++]=F[P++],F[u++]=F[P++],2<(A-=3););A&&(F[u++]=F[P++],1<A&&(F[u++]=F[P++]))}break}}break}}while(l<c&&u<h);l-=A=_>>3,v&=(1<<(_-=A<<3))-1,i.next_in=l,i.next_out=u,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=u<h?h-u+257:257-(u-h),a.hold=v,a.bits=_}},{}],49:[function(r,n,s){var i=r("../utils/common"),o=r("./adler32"),a=r("./crc32"),l=r("./inffast"),c=r("./inftrees"),u=1,d=2,h=0,f=-2,b=1,m=852,g=592;function y(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(P){var D;return P&&P.state?(D=P.state,P.total_in=P.total_out=D.total=0,P.msg="",D.wrap&&(P.adler=1&D.wrap),D.mode=b,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(m),D.distcode=D.distdyn=new i.Buf32(g),D.sane=1,D.back=-1,h):f}function x(P){var D;return P&&P.state?((D=P.state).wsize=0,D.whave=0,D.wnext=0,_(P)):f}function w(P,D){var R,F;return P&&P.state?(F=P.state,D<0?(R=0,D=-D):(R=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?f:(F.window!==null&&F.wbits!==D&&(F.window=null),F.wrap=R,F.wbits=D,x(P))):f}function S(P,D){var R,F;return P?(F=new v,(P.state=F).window=null,(R=w(P,D))!==h&&(P.state=null),R):f}var T,E,C=!0;function A(P){if(C){var D;for(T=new i.Buf32(512),E=new i.Buf32(32),D=0;D<144;)P.lens[D++]=8;for(;D<256;)P.lens[D++]=9;for(;D<280;)P.lens[D++]=7;for(;D<288;)P.lens[D++]=8;for(c(u,P.lens,0,288,T,0,P.work,{bits:9}),D=0;D<32;)P.lens[D++]=5;c(d,P.lens,0,32,E,0,P.work,{bits:5}),C=!1}P.lencode=T,P.lenbits=9,P.distcode=E,P.distbits=5}function I(P,D,R,F){var G,z=P.state;return z.window===null&&(z.wsize=1<<z.wbits,z.wnext=0,z.whave=0,z.window=new i.Buf8(z.wsize)),F>=z.wsize?(i.arraySet(z.window,D,R-z.wsize,z.wsize,0),z.wnext=0,z.whave=z.wsize):(F<(G=z.wsize-z.wnext)&&(G=F),i.arraySet(z.window,D,R-F,G,z.wnext),(F-=G)?(i.arraySet(z.window,D,R-F,F,0),z.wnext=F,z.whave=z.wsize):(z.wnext+=G,z.wnext===z.wsize&&(z.wnext=0),z.whave<z.wsize&&(z.whave+=G))),0}s.inflateReset=x,s.inflateReset2=w,s.inflateResetKeep=_,s.inflateInit=function(P){return S(P,15)},s.inflateInit2=S,s.inflate=function(P,D){var R,F,G,z,K,L,O,$,H,U,ee,X,ge,J,j,Y,Q,ie,re,pe,M,oe,le,q,V=0,ae=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return f;(R=P.state).mode===12&&(R.mode=13),K=P.next_out,G=P.output,O=P.avail_out,z=P.next_in,F=P.input,L=P.avail_in,$=R.hold,H=R.bits,U=L,ee=O,oe=h;e:for(;;)switch(R.mode){case b:if(R.wrap===0){R.mode=13;break}for(;H<16;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}if(2&R.wrap&&$===35615){ae[R.check=0]=255&$,ae[1]=$>>>8&255,R.check=a(R.check,ae,2,0),H=$=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&$)<<8)+($>>8))%31){P.msg="incorrect header check",R.mode=30;break}if((15&$)!=8){P.msg="unknown compression method",R.mode=30;break}if(H-=4,M=8+(15&($>>>=4)),R.wbits===0)R.wbits=M;else if(M>R.wbits){P.msg="invalid window size",R.mode=30;break}R.dmax=1<<M,P.adler=R.check=1,R.mode=512&$?10:12,H=$=0;break;case 2:for(;H<16;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}if(R.flags=$,(255&R.flags)!=8){P.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){P.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=$>>8&1),512&R.flags&&(ae[0]=255&$,ae[1]=$>>>8&255,R.check=a(R.check,ae,2,0)),H=$=0,R.mode=3;case 3:for(;H<32;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}R.head&&(R.head.time=$),512&R.flags&&(ae[0]=255&$,ae[1]=$>>>8&255,ae[2]=$>>>16&255,ae[3]=$>>>24&255,R.check=a(R.check,ae,4,0)),H=$=0,R.mode=4;case 4:for(;H<16;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}R.head&&(R.head.xflags=255&$,R.head.os=$>>8),512&R.flags&&(ae[0]=255&$,ae[1]=$>>>8&255,R.check=a(R.check,ae,2,0)),H=$=0,R.mode=5;case 5:if(1024&R.flags){for(;H<16;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}R.length=$,R.head&&(R.head.extra_len=$),512&R.flags&&(ae[0]=255&$,ae[1]=$>>>8&255,R.check=a(R.check,ae,2,0)),H=$=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(L<(X=R.length)&&(X=L),X&&(R.head&&(M=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),i.arraySet(R.head.extra,F,z,X,M)),512&R.flags&&(R.check=a(R.check,F,X,z)),L-=X,z+=X,R.length-=X),R.length))break e;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(L===0)break e;for(X=0;M=F[z+X++],R.head&&M&&R.length<65536&&(R.head.name+=String.fromCharCode(M)),M&&X<L;);if(512&R.flags&&(R.check=a(R.check,F,X,z)),L-=X,z+=X,M)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(L===0)break e;for(X=0;M=F[z+X++],R.head&&M&&R.length<65536&&(R.head.comment+=String.fromCharCode(M)),M&&X<L;);if(512&R.flags&&(R.check=a(R.check,F,X,z)),L-=X,z+=X,M)break e}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;H<16;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}if($!==(65535&R.check)){P.msg="header crc mismatch",R.mode=30;break}H=$=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),P.adler=R.check=0,R.mode=12;break;case 10:for(;H<32;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}P.adler=R.check=y($),H=$=0,R.mode=11;case 11:if(R.havedict===0)return P.next_out=K,P.avail_out=O,P.next_in=z,P.avail_in=L,R.hold=$,R.bits=H,2;P.adler=R.check=1,R.mode=12;case 12:if(D===5||D===6)break e;case 13:if(R.last){$>>>=7&H,H-=7&H,R.mode=27;break}for(;H<3;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}switch(R.last=1&$,H-=1,3&($>>>=1)){case 0:R.mode=14;break;case 1:if(A(R),R.mode=20,D!==6)break;$>>>=2,H-=2;break e;case 2:R.mode=17;break;case 3:P.msg="invalid block type",R.mode=30}$>>>=2,H-=2;break;case 14:for($>>>=7&H,H-=7&H;H<32;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}if((65535&$)!=($>>>16^65535)){P.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&$,H=$=0,R.mode=15,D===6)break e;case 15:R.mode=16;case 16:if(X=R.length){if(L<X&&(X=L),O<X&&(X=O),X===0)break e;i.arraySet(G,F,z,X,K),L-=X,z+=X,O-=X,K+=X,R.length-=X;break}R.mode=12;break;case 17:for(;H<14;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}if(R.nlen=257+(31&$),$>>>=5,H-=5,R.ndist=1+(31&$),$>>>=5,H-=5,R.ncode=4+(15&$),$>>>=4,H-=4,286<R.nlen||30<R.ndist){P.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;H<3;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}R.lens[xe[R.have++]]=7&$,$>>>=3,H-=3}for(;R.have<19;)R.lens[xe[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,le={bits:R.lenbits},oe=c(0,R.lens,0,19,R.lencode,0,R.work,le),R.lenbits=le.bits,oe){P.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;Y=(V=R.lencode[$&(1<<R.lenbits)-1])>>>16&255,Q=65535&V,!((j=V>>>24)<=H);){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}if(Q<16)$>>>=j,H-=j,R.lens[R.have++]=Q;else{if(Q===16){for(q=j+2;H<q;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}if($>>>=j,H-=j,R.have===0){P.msg="invalid bit length repeat",R.mode=30;break}M=R.lens[R.have-1],X=3+(3&$),$>>>=2,H-=2}else if(Q===17){for(q=j+3;H<q;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}H-=j,M=0,X=3+(7&($>>>=j)),$>>>=3,H-=3}else{for(q=j+7;H<q;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}H-=j,M=0,X=11+(127&($>>>=j)),$>>>=7,H-=7}if(R.have+X>R.nlen+R.ndist){P.msg="invalid bit length repeat",R.mode=30;break}for(;X--;)R.lens[R.have++]=M}}if(R.mode===30)break;if(R.lens[256]===0){P.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,le={bits:R.lenbits},oe=c(u,R.lens,0,R.nlen,R.lencode,0,R.work,le),R.lenbits=le.bits,oe){P.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,le={bits:R.distbits},oe=c(d,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,le),R.distbits=le.bits,oe){P.msg="invalid distances set",R.mode=30;break}if(R.mode=20,D===6)break e;case 20:R.mode=21;case 21:if(6<=L&&258<=O){P.next_out=K,P.avail_out=O,P.next_in=z,P.avail_in=L,R.hold=$,R.bits=H,l(P,ee),K=P.next_out,G=P.output,O=P.avail_out,z=P.next_in,F=P.input,L=P.avail_in,$=R.hold,H=R.bits,R.mode===12&&(R.back=-1);break}for(R.back=0;Y=(V=R.lencode[$&(1<<R.lenbits)-1])>>>16&255,Q=65535&V,!((j=V>>>24)<=H);){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}if(Y&&!(240&Y)){for(ie=j,re=Y,pe=Q;Y=(V=R.lencode[pe+(($&(1<<ie+re)-1)>>ie)])>>>16&255,Q=65535&V,!(ie+(j=V>>>24)<=H);){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}$>>>=ie,H-=ie,R.back+=ie}if($>>>=j,H-=j,R.back+=j,R.length=Q,Y===0){R.mode=26;break}if(32&Y){R.back=-1,R.mode=12;break}if(64&Y){P.msg="invalid literal/length code",R.mode=30;break}R.extra=15&Y,R.mode=22;case 22:if(R.extra){for(q=R.extra;H<q;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}R.length+=$&(1<<R.extra)-1,$>>>=R.extra,H-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;Y=(V=R.distcode[$&(1<<R.distbits)-1])>>>16&255,Q=65535&V,!((j=V>>>24)<=H);){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}if(!(240&Y)){for(ie=j,re=Y,pe=Q;Y=(V=R.distcode[pe+(($&(1<<ie+re)-1)>>ie)])>>>16&255,Q=65535&V,!(ie+(j=V>>>24)<=H);){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}$>>>=ie,H-=ie,R.back+=ie}if($>>>=j,H-=j,R.back+=j,64&Y){P.msg="invalid distance code",R.mode=30;break}R.offset=Q,R.extra=15&Y,R.mode=24;case 24:if(R.extra){for(q=R.extra;H<q;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}R.offset+=$&(1<<R.extra)-1,$>>>=R.extra,H-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){P.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(O===0)break e;if(X=ee-O,R.offset>X){if((X=R.offset-X)>R.whave&&R.sane){P.msg="invalid distance too far back",R.mode=30;break}ge=X>R.wnext?(X-=R.wnext,R.wsize-X):R.wnext-X,X>R.length&&(X=R.length),J=R.window}else J=G,ge=K-R.offset,X=R.length;for(O<X&&(X=O),O-=X,R.length-=X;G[K++]=J[ge++],--X;);R.length===0&&(R.mode=21);break;case 26:if(O===0)break e;G[K++]=R.length,O--,R.mode=21;break;case 27:if(R.wrap){for(;H<32;){if(L===0)break e;L--,$|=F[z++]<<H,H+=8}if(ee-=O,P.total_out+=ee,R.total+=ee,ee&&(P.adler=R.check=R.flags?a(R.check,G,ee,K-ee):o(R.check,G,ee,K-ee)),ee=O,(R.flags?$:y($))!==R.check){P.msg="incorrect data check",R.mode=30;break}H=$=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;H<32;){if(L===0)break e;L--,$+=F[z++]<<H,H+=8}if($!==(4294967295&R.total)){P.msg="incorrect length check",R.mode=30;break}H=$=0}R.mode=29;case 29:oe=1;break e;case 30:oe=-3;break e;case 31:return-4;case 32:default:return f}return P.next_out=K,P.avail_out=O,P.next_in=z,P.avail_in=L,R.hold=$,R.bits=H,(R.wsize||ee!==P.avail_out&&R.mode<30&&(R.mode<27||D!==4))&&I(P,P.output,P.next_out,ee-P.avail_out)?(R.mode=31,-4):(U-=P.avail_in,ee-=P.avail_out,P.total_in+=U,P.total_out+=ee,R.total+=ee,R.wrap&&ee&&(P.adler=R.check=R.flags?a(R.check,G,ee,P.next_out-ee):o(R.check,G,ee,P.next_out-ee)),P.data_type=R.bits+(R.last?64:0)+(R.mode===12?128:0)+(R.mode===20||R.mode===15?256:0),(U==0&&ee===0||D===4)&&oe===h&&(oe=-5),oe)},s.inflateEnd=function(P){if(!P||!P.state)return f;var D=P.state;return D.window&&(D.window=null),P.state=null,h},s.inflateGetHeader=function(P,D){var R;return P&&P.state&&2&(R=P.state).wrap?((R.head=D).done=!1,h):f},s.inflateSetDictionary=function(P,D){var R,F=D.length;return P&&P.state?(R=P.state).wrap!==0&&R.mode!==11?f:R.mode===11&&o(1,D,F,0)!==R.check?-3:I(P,D,F,F)?(R.mode=31,-4):(R.havedict=1,h):f},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,s){var i=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(u,d,h,f,b,m,g,y){var v,_,x,w,S,T,E,C,A,I=y.bits,P=0,D=0,R=0,F=0,G=0,z=0,K=0,L=0,O=0,$=0,H=null,U=0,ee=new i.Buf16(16),X=new i.Buf16(16),ge=null,J=0;for(P=0;P<=15;P++)ee[P]=0;for(D=0;D<f;D++)ee[d[h+D]]++;for(G=I,F=15;1<=F&&ee[F]===0;F--);if(F<G&&(G=F),F===0)return b[m++]=20971520,b[m++]=20971520,y.bits=1,0;for(R=1;R<F&&ee[R]===0;R++);for(G<R&&(G=R),P=L=1;P<=15;P++)if(L<<=1,(L-=ee[P])<0)return-1;if(0<L&&(u===0||F!==1))return-1;for(X[1]=0,P=1;P<15;P++)X[P+1]=X[P]+ee[P];for(D=0;D<f;D++)d[h+D]!==0&&(g[X[d[h+D]]++]=D);if(T=u===0?(H=ge=g,19):u===1?(H=o,U-=257,ge=a,J-=257,256):(H=l,ge=c,-1),P=R,S=m,K=D=$=0,x=-1,w=(O=1<<(z=G))-1,u===1&&852<O||u===2&&592<O)return 1;for(;;){for(E=P-K,A=g[D]<T?(C=0,g[D]):g[D]>T?(C=ge[J+g[D]],H[U+g[D]]):(C=96,0),v=1<<P-K,R=_=1<<z;b[S+($>>K)+(_-=v)]=E<<24|C<<16|A|0,_!==0;);for(v=1<<P-1;$&v;)v>>=1;if(v!==0?($&=v-1,$+=v):$=0,D++,--ee[P]==0){if(P===F)break;P=d[h+g[D]]}if(G<P&&($&w)!==x){for(K===0&&(K=G),S+=R,L=1<<(z=P-K);z+K<F&&!((L-=ee[z+K])<=0);)z++,L<<=1;if(O+=1<<z,u===1&&852<O||u===2&&592<O)return 1;b[x=$&w]=G<<24|z<<16|S-m|0}}return $!==0&&(b[S+$]=P-K<<24|64<<16|0),y.bits=G,0}},{"../utils/common":41}],51:[function(r,n,s){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,s){var i=r("../utils/common"),o=0,a=1;function l(V){for(var ae=V.length;0<=--ae;)V[ae]=0}var c=0,u=29,d=256,h=d+1+u,f=30,b=19,m=2*h+1,g=15,y=16,v=7,_=256,x=16,w=17,S=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(2*(h+2));l(I);var P=new Array(2*f);l(P);var D=new Array(512);l(D);var R=new Array(256);l(R);var F=new Array(u);l(F);var G,z,K,L=new Array(f);function O(V,ae,xe,Te,fe){this.static_tree=V,this.extra_bits=ae,this.extra_base=xe,this.elems=Te,this.max_length=fe,this.has_stree=V&&V.length}function $(V,ae){this.dyn_tree=V,this.max_code=0,this.stat_desc=ae}function H(V){return V<256?D[V]:D[256+(V>>>7)]}function U(V,ae){V.pending_buf[V.pending++]=255&ae,V.pending_buf[V.pending++]=ae>>>8&255}function ee(V,ae,xe){V.bi_valid>y-xe?(V.bi_buf|=ae<<V.bi_valid&65535,U(V,V.bi_buf),V.bi_buf=ae>>y-V.bi_valid,V.bi_valid+=xe-y):(V.bi_buf|=ae<<V.bi_valid&65535,V.bi_valid+=xe)}function X(V,ae,xe){ee(V,xe[2*ae],xe[2*ae+1])}function ge(V,ae){for(var xe=0;xe|=1&V,V>>>=1,xe<<=1,0<--ae;);return xe>>>1}function J(V,ae,xe){var Te,fe,ke=new Array(g+1),Me=0;for(Te=1;Te<=g;Te++)ke[Te]=Me=Me+xe[Te-1]<<1;for(fe=0;fe<=ae;fe++){var Re=V[2*fe+1];Re!==0&&(V[2*fe]=ge(ke[Re]++,Re))}}function j(V){var ae;for(ae=0;ae<h;ae++)V.dyn_ltree[2*ae]=0;for(ae=0;ae<f;ae++)V.dyn_dtree[2*ae]=0;for(ae=0;ae<b;ae++)V.bl_tree[2*ae]=0;V.dyn_ltree[2*_]=1,V.opt_len=V.static_len=0,V.last_lit=V.matches=0}function Y(V){8<V.bi_valid?U(V,V.bi_buf):0<V.bi_valid&&(V.pending_buf[V.pending++]=V.bi_buf),V.bi_buf=0,V.bi_valid=0}function Q(V,ae,xe,Te){var fe=2*ae,ke=2*xe;return V[fe]<V[ke]||V[fe]===V[ke]&&Te[ae]<=Te[xe]}function ie(V,ae,xe){for(var Te=V.heap[xe],fe=xe<<1;fe<=V.heap_len&&(fe<V.heap_len&&Q(ae,V.heap[fe+1],V.heap[fe],V.depth)&&fe++,!Q(ae,Te,V.heap[fe],V.depth));)V.heap[xe]=V.heap[fe],xe=fe,fe<<=1;V.heap[xe]=Te}function re(V,ae,xe){var Te,fe,ke,Me,Re=0;if(V.last_lit!==0)for(;Te=V.pending_buf[V.d_buf+2*Re]<<8|V.pending_buf[V.d_buf+2*Re+1],fe=V.pending_buf[V.l_buf+Re],Re++,Te===0?X(V,fe,ae):(X(V,(ke=R[fe])+d+1,ae),(Me=T[ke])!==0&&ee(V,fe-=F[ke],Me),X(V,ke=H(--Te),xe),(Me=E[ke])!==0&&ee(V,Te-=L[ke],Me)),Re<V.last_lit;);X(V,_,ae)}function pe(V,ae){var xe,Te,fe,ke=ae.dyn_tree,Me=ae.stat_desc.static_tree,Re=ae.stat_desc.has_stree,de=ae.stat_desc.elems,be=-1;for(V.heap_len=0,V.heap_max=m,xe=0;xe<de;xe++)ke[2*xe]!==0?(V.heap[++V.heap_len]=be=xe,V.depth[xe]=0):ke[2*xe+1]=0;for(;V.heap_len<2;)ke[2*(fe=V.heap[++V.heap_len]=be<2?++be:0)]=1,V.depth[fe]=0,V.opt_len--,Re&&(V.static_len-=Me[2*fe+1]);for(ae.max_code=be,xe=V.heap_len>>1;1<=xe;xe--)ie(V,ke,xe);for(fe=de;xe=V.heap[1],V.heap[1]=V.heap[V.heap_len--],ie(V,ke,1),Te=V.heap[1],V.heap[--V.heap_max]=xe,V.heap[--V.heap_max]=Te,ke[2*fe]=ke[2*xe]+ke[2*Te],V.depth[fe]=(V.depth[xe]>=V.depth[Te]?V.depth[xe]:V.depth[Te])+1,ke[2*xe+1]=ke[2*Te+1]=fe,V.heap[1]=fe++,ie(V,ke,1),2<=V.heap_len;);V.heap[--V.heap_max]=V.heap[1],function(Se,ze){var Ye,ut,at,pt,er,qt,Tt=ze.dyn_tree,gr=ze.max_code,ir=ze.stat_desc.static_tree,Dr=ze.stat_desc.has_stree,jn=ze.stat_desc.extra_bits,Fn=ze.stat_desc.extra_base,Ee=ze.stat_desc.max_length,Ce=0;for(pt=0;pt<=g;pt++)Se.bl_count[pt]=0;for(Tt[2*Se.heap[Se.heap_max]+1]=0,Ye=Se.heap_max+1;Ye<m;Ye++)Ee<(pt=Tt[2*Tt[2*(ut=Se.heap[Ye])+1]+1]+1)&&(pt=Ee,Ce++),Tt[2*ut+1]=pt,gr<ut||(Se.bl_count[pt]++,er=0,Fn<=ut&&(er=jn[ut-Fn]),qt=Tt[2*ut],Se.opt_len+=qt*(pt+er),Dr&&(Se.static_len+=qt*(ir[2*ut+1]+er)));if(Ce!==0){do{for(pt=Ee-1;Se.bl_count[pt]===0;)pt--;Se.bl_count[pt]--,Se.bl_count[pt+1]+=2,Se.bl_count[Ee]--,Ce-=2}while(0<Ce);for(pt=Ee;pt!==0;pt--)for(ut=Se.bl_count[pt];ut!==0;)gr<(at=Se.heap[--Ye])||(Tt[2*at+1]!==pt&&(Se.opt_len+=(pt-Tt[2*at+1])*Tt[2*at],Tt[2*at+1]=pt),ut--)}}(V,ae),J(ke,be,V.bl_count)}function M(V,ae,xe){var Te,fe,ke=-1,Me=ae[1],Re=0,de=7,be=4;for(Me===0&&(de=138,be=3),ae[2*(xe+1)+1]=65535,Te=0;Te<=xe;Te++)fe=Me,Me=ae[2*(Te+1)+1],++Re<de&&fe===Me||(Re<be?V.bl_tree[2*fe]+=Re:fe!==0?(fe!==ke&&V.bl_tree[2*fe]++,V.bl_tree[2*x]++):Re<=10?V.bl_tree[2*w]++:V.bl_tree[2*S]++,ke=fe,be=(Re=0)===Me?(de=138,3):fe===Me?(de=6,3):(de=7,4))}function oe(V,ae,xe){var Te,fe,ke=-1,Me=ae[1],Re=0,de=7,be=4;for(Me===0&&(de=138,be=3),Te=0;Te<=xe;Te++)if(fe=Me,Me=ae[2*(Te+1)+1],!(++Re<de&&fe===Me)){if(Re<be)for(;X(V,fe,V.bl_tree),--Re!=0;);else fe!==0?(fe!==ke&&(X(V,fe,V.bl_tree),Re--),X(V,x,V.bl_tree),ee(V,Re-3,2)):Re<=10?(X(V,w,V.bl_tree),ee(V,Re-3,3)):(X(V,S,V.bl_tree),ee(V,Re-11,7));ke=fe,be=(Re=0)===Me?(de=138,3):fe===Me?(de=6,3):(de=7,4)}}l(L);var le=!1;function q(V,ae,xe,Te){ee(V,(c<<1)+(Te?1:0),3),function(fe,ke,Me,Re){Y(fe),U(fe,Me),U(fe,~Me),i.arraySet(fe.pending_buf,fe.window,ke,Me,fe.pending),fe.pending+=Me}(V,ae,xe)}s._tr_init=function(V){le||(function(){var ae,xe,Te,fe,ke,Me=new Array(g+1);for(fe=Te=0;fe<u-1;fe++)for(F[fe]=Te,ae=0;ae<1<<T[fe];ae++)R[Te++]=fe;for(R[Te-1]=fe,fe=ke=0;fe<16;fe++)for(L[fe]=ke,ae=0;ae<1<<E[fe];ae++)D[ke++]=fe;for(ke>>=7;fe<f;fe++)for(L[fe]=ke<<7,ae=0;ae<1<<E[fe]-7;ae++)D[256+ke++]=fe;for(xe=0;xe<=g;xe++)Me[xe]=0;for(ae=0;ae<=143;)I[2*ae+1]=8,ae++,Me[8]++;for(;ae<=255;)I[2*ae+1]=9,ae++,Me[9]++;for(;ae<=279;)I[2*ae+1]=7,ae++,Me[7]++;for(;ae<=287;)I[2*ae+1]=8,ae++,Me[8]++;for(J(I,h+1,Me),ae=0;ae<f;ae++)P[2*ae+1]=5,P[2*ae]=ge(ae,5);G=new O(I,T,d+1,h,g),z=new O(P,E,0,f,g),K=new O(new Array(0),C,0,b,v)}(),le=!0),V.l_desc=new $(V.dyn_ltree,G),V.d_desc=new $(V.dyn_dtree,z),V.bl_desc=new $(V.bl_tree,K),V.bi_buf=0,V.bi_valid=0,j(V)},s._tr_stored_block=q,s._tr_flush_block=function(V,ae,xe,Te){var fe,ke,Me=0;0<V.level?(V.strm.data_type===2&&(V.strm.data_type=function(Re){var de,be=4093624447;for(de=0;de<=31;de++,be>>>=1)if(1&be&&Re.dyn_ltree[2*de]!==0)return o;if(Re.dyn_ltree[18]!==0||Re.dyn_ltree[20]!==0||Re.dyn_ltree[26]!==0)return a;for(de=32;de<d;de++)if(Re.dyn_ltree[2*de]!==0)return a;return o}(V)),pe(V,V.l_desc),pe(V,V.d_desc),Me=function(Re){var de;for(M(Re,Re.dyn_ltree,Re.l_desc.max_code),M(Re,Re.dyn_dtree,Re.d_desc.max_code),pe(Re,Re.bl_desc),de=b-1;3<=de&&Re.bl_tree[2*A[de]+1]===0;de--);return Re.opt_len+=3*(de+1)+5+5+4,de}(V),fe=V.opt_len+3+7>>>3,(ke=V.static_len+3+7>>>3)<=fe&&(fe=ke)):fe=ke=xe+5,xe+4<=fe&&ae!==-1?q(V,ae,xe,Te):V.strategy===4||ke===fe?(ee(V,2+(Te?1:0),3),re(V,I,P)):(ee(V,4+(Te?1:0),3),function(Re,de,be,Se){var ze;for(ee(Re,de-257,5),ee(Re,be-1,5),ee(Re,Se-4,4),ze=0;ze<Se;ze++)ee(Re,Re.bl_tree[2*A[ze]+1],3);oe(Re,Re.dyn_ltree,de-1),oe(Re,Re.dyn_dtree,be-1)}(V,V.l_desc.max_code+1,V.d_desc.max_code+1,Me+1),re(V,V.dyn_ltree,V.dyn_dtree)),j(V),Te&&Y(V)},s._tr_tally=function(V,ae,xe){return V.pending_buf[V.d_buf+2*V.last_lit]=ae>>>8&255,V.pending_buf[V.d_buf+2*V.last_lit+1]=255&ae,V.pending_buf[V.l_buf+V.last_lit]=255&xe,V.last_lit++,ae===0?V.dyn_ltree[2*xe]++:(V.matches++,ae--,V.dyn_ltree[2*(R[xe]+d+1)]++,V.dyn_dtree[2*H(ae)]++),V.last_lit===V.lit_bufsize-1},s._tr_align=function(V){ee(V,2,3),X(V,_,I),function(ae){ae.bi_valid===16?(U(ae,ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0):8<=ae.bi_valid&&(ae.pending_buf[ae.pending++]=255&ae.bi_buf,ae.bi_buf>>=8,ae.bi_valid-=8)}(V)}},{"../utils/common":41}],53:[function(r,n,s){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,s){(function(i){(function(o,a){if(!o.setImmediate){var l,c,u,d,h=1,f={},b=!1,m=o.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(o);g=g&&g.setTimeout?g:o,l={}.toString.call(o.process)==="[object process]"?function(x){xr.nextTick(function(){v(x)})}:function(){if(o.postMessage&&!o.importScripts){var x=!0,w=o.onmessage;return o.onmessage=function(){x=!1},o.postMessage("","*"),o.onmessage=w,x}}()?(d="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(x){o.postMessage(d+x,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(x){v(x.data)},function(x){u.port2.postMessage(x)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(x){var w=m.createElement("script");w.onreadystatechange=function(){v(x),w.onreadystatechange=null,c.removeChild(w),w=null},c.appendChild(w)}):function(x){setTimeout(v,0,x)},g.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var w=new Array(arguments.length-1),S=0;S<w.length;S++)w[S]=arguments[S+1];var T={callback:x,args:w};return f[h]=T,l(h),h++},g.clearImmediate=y}function y(x){delete f[x]}function v(x){if(b)setTimeout(v,0,x);else{var w=f[x];if(w){b=!0;try{(function(S){var T=S.callback,E=S.args;switch(E.length){case 0:T();break;case 1:T(E[0]);break;case 2:T(E[0],E[1]);break;case 3:T(E[0],E[1],E[2]);break;default:T.apply(a,E)}})(w)}finally{y(x),b=!1}}}}function _(x){x.source===o&&typeof x.data=="string"&&x.data.indexOf(d)===0&&v(+x.data.slice(d.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof kr<"u"?kr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(v6);var vle=v6.exports;const _le=gl(vle);var _6={exports:{}};(function(t,e){(function(r,n){n()})(kr,function(){function r(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function n(c,u,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){l(h.response,u,d)},h.onerror=function(){console.error("could not download file")},h.send()}function s(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function i(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof kr=="object"&&kr.global===kr?kr:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,u,d){var h=o.URL||o.webkitURL,f=document.createElement("a");u=u||c.name||"download",f.download=u,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?i(f):s(f.href)?n(c,u,d):i(f,f.target="_blank")):(f.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(f.href)},4e4),setTimeout(function(){i(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,d){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(r(c,d),u);else if(s(c))n(c,u,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){i(h)})}}:function(c,u,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return n(c,u,d);var f=c.type==="application/octet-stream",b=/constructor/i.test(o.HTMLElement)||o.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||f&&b||a)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var _=g.result;_=m?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=_:location=_,h=null},g.readAsDataURL(c)}else{var y=o.URL||o.webkitURL,v=y.createObjectURL(c);h?h.location=v:location.href=v,h=null,setTimeout(function(){y.revokeObjectURL(v)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(_6);var xle=_6.exports;const wle=gl(xle);function wv(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof xr=="object"&&xr.version!==void 0?`Node.js/${xr.version.substr(1)} (${xr.platform}; ${xr.arch})`:"<environment undetectable>"}function x6(t,e,r,n){if(typeof r!="function")throw new Error("method for before hook must be a function");return n||(n={}),Array.isArray(e)?e.reverse().reduce((s,i)=>x6.bind(null,t,i,s,n),r)():Promise.resolve().then(()=>t.registry[e]?t.registry[e].reduce((s,i)=>i.hook.bind(null,s,n),r)():r(n))}function Sle(t,e,r,n){const s=n;t.registry[r]||(t.registry[r]=[]),e==="before"&&(n=(i,o)=>Promise.resolve().then(s.bind(null,o)).then(i.bind(null,o))),e==="after"&&(n=(i,o)=>{let a;return Promise.resolve().then(i.bind(null,o)).then(l=>(a=l,s(a,o))).then(()=>a)}),e==="error"&&(n=(i,o)=>Promise.resolve().then(i.bind(null,o)).catch(a=>s(a,o))),t.registry[r].push({hook:n,orig:s})}function Ele(t,e,r){if(!t.registry[e])return;const n=t.registry[e].map(s=>s.orig).indexOf(r);n!==-1&&t.registry[e].splice(n,1)}const cI=Function.bind,uI=cI.bind(cI);function Cle(t,e,r){const n=uI(Ele,null).apply(null,[e]);t.api={remove:n},t.remove=n,["before","error","after","wrap"].forEach(s=>{const i=[e,s];t[s]=t.api[s]=uI(Sle,null).apply(null,i)})}function Tle(){const t={registry:{}},e=x6.bind(null,t);return Cle(e,t),e}const kle={Collection:Tle};var Ale="0.0.0-development",Rle=`octokit-endpoint.js/${Ale} ${wv()}`,Ple={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Rle},mediaType:{format:""}};function Ile(t){return t?Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{}):{}}function Nle(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const r=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(t)}function w6(t,e){const r=Object.assign({},t);return Object.keys(e).forEach(n=>{Nle(e[n])?n in t?r[n]=w6(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}function dI(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function ES(t,e,r){if(typeof e=="string"){let[s,i]=e.split(" ");r=Object.assign(i?{method:s,url:i}:{url:s},r)}else r=Object.assign({},e);r.headers=Ile(r.headers),dI(r),dI(r.headers);const n=w6(t||{},r);return r.url==="/graphql"&&(t&&t.mediaType.previews?.length&&(n.mediaType.previews=t.mediaType.previews.filter(s=>!n.mediaType.previews.includes(s)).concat(n.mediaType.previews)),n.mediaType.previews=(n.mediaType.previews||[]).map(s=>s.replace(/-preview/,""))),n}function Dle(t,e){const r=/\?/.test(t)?"&":"?",n=Object.keys(e);return n.length===0?t:t+r+n.map(s=>s==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${s}=${encodeURIComponent(e[s])}`).join("&")}var Ole=/\{[^{}}]+\}/g;function Lle(t){return t.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,"").split(/,/)}function Mle(t){const e=t.match(Ole);return e?e.map(Lle).reduce((r,n)=>r.concat(n),[]):[]}function hI(t,e){const r={__proto__:null};for(const n of Object.keys(t))e.indexOf(n)===-1&&(r[n]=t[n]);return r}function S6(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function Tu(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function dh(t,e,r){return e=t==="+"||t==="#"?S6(e):Tu(e),r?Tu(r)+"="+e:e}function su(t){return t!=null}function wx(t){return t===";"||t==="&"||t==="?"}function jle(t,e,r,n){var s=t[r],i=[];if(su(s)&&s!=="")if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")s=s.toString(),n&&n!=="*"&&(s=s.substring(0,parseInt(n,10))),i.push(dh(e,s,wx(e)?r:""));else if(n==="*")Array.isArray(s)?s.filter(su).forEach(function(o){i.push(dh(e,o,wx(e)?r:""))}):Object.keys(s).forEach(function(o){su(s[o])&&i.push(dh(e,s[o],o))});else{const o=[];Array.isArray(s)?s.filter(su).forEach(function(a){o.push(dh(e,a))}):Object.keys(s).forEach(function(a){su(s[a])&&(o.push(Tu(a)),o.push(dh(e,s[a].toString())))}),wx(e)?i.push(Tu(r)+"="+o.join(",")):o.length!==0&&i.push(o.join(","))}else e===";"?su(s)&&i.push(Tu(r)):s===""&&(e==="&"||e==="?")?i.push(Tu(r)+"="):s===""&&i.push("");return i}function Fle(t){return{expand:Ble.bind(null,t)}}function Ble(t,e){var r=["+","#",".","/",";","?","&"];return t=t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(n,s,i){if(s){let a="";const l=[];if(r.indexOf(s.charAt(0))!==-1&&(a=s.charAt(0),s=s.substr(1)),s.split(/,/g).forEach(function(c){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);l.push(jle(e,a,u[1],u[2]||u[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(l.length!==0?a:"")+l.join(o)}else return l.join(",")}else return S6(i)}),t==="/"?t:t.replace(/\/$/,"")}function E6(t){let e=t.method.toUpperCase(),r=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),n=Object.assign({},t.headers),s,i=hI(t,["method","baseUrl","url","headers","request","mediaType"]);const o=Mle(r);r=Fle(r).expand(i),/^http/.test(r)||(r=t.baseUrl+r);const a=Object.keys(t).filter(u=>o.includes(u)).concat("baseUrl"),l=hI(i,a);if(!/application\/octet-stream/i.test(n.accept)&&(t.mediaType.format&&(n.accept=n.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),r.endsWith("/graphql")&&t.mediaType.previews?.length)){const u=n.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[];n.accept=u.concat(t.mediaType.previews).map(d=>{const h=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${d}-preview${h}`}).join(",")}return["GET","HEAD"].includes(e)?r=Dle(r,l):"data"in l?s=l.data:Object.keys(l).length&&(s=l),!n["content-type"]&&typeof s<"u"&&(n["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof s>"u"&&(s=""),Object.assign({method:e,url:r,headers:n},typeof s<"u"?{body:s}:null,t.request?{request:t.request}:null)}function $le(t,e,r){return E6(ES(t,e,r))}function C6(t,e){const r=ES(t,e),n=$le.bind(null,r);return Object.assign(n,{DEFAULTS:r,defaults:C6.bind(null,r),merge:ES.bind(null,r),parse:E6})}var Ule=C6(null,Ple);const JT=function(){};JT.prototype=Object.create(null);const fI=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,pI=/\\([\v\u0020-\u00ff])/gu,Hle=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,ku={type:"",parameters:new JT};Object.freeze(ku.parameters);Object.freeze(ku);function zle(t){if(typeof t!="string")return ku;let e=t.indexOf(";");const r=e!==-1?t.slice(0,e).trim():t.trim();if(Hle.test(r)===!1)return ku;const n={type:r.toLowerCase(),parameters:new JT};if(e===-1)return n;let s,i,o;for(fI.lastIndex=e;i=fI.exec(t);){if(i.index!==e)return ku;e+=i[0].length,s=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),pI.test(o)&&(o=o.replace(pI,"$1"))),n.parameters[s]=o}return e!==t.length?ku:n}var Wle=zle;class gg extends Error{name;status;request;response;constructor(e,r,n){super(e),this.name="HttpError",this.status=Number.parseInt(r),Number.isNaN(this.status)&&(this.status=0),"response"in n&&(this.response=n.response);const s=Object.assign({},n.request);n.request.headers.authorization&&(s.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/(?<! ) .*$/," [REDACTED]")})),s.url=s.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=s}}var Vle="9.2.4",Gle={headers:{"user-agent":`octokit-request.js/${Vle} ${wv()}`}};function qle(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const r=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(t)}async function mI(t){const e=t.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");const r=t.request?.log||console,n=t.request?.parseSuccessResponseBody!==!1,s=qle(t.body)||Array.isArray(t.body)?JSON.stringify(t.body):t.body,i=Object.fromEntries(Object.entries(t.headers).map(([d,h])=>[d,String(h)]));let o;try{o=await e(t.url,{method:t.method,body:s,redirect:t.request?.redirect,headers:i,signal:t.request?.signal,...t.body&&{duplex:"half"}})}catch(d){let h="Unknown Error";if(d instanceof Error){if(d.name==="AbortError")throw d.status=500,d;h=d.message,d.name==="TypeError"&&"cause"in d&&(d.cause instanceof Error?h=d.cause.message:typeof d.cause=="string"&&(h=d.cause))}const f=new gg(h,500,{request:t});throw f.cause=d,f}const a=o.status,l=o.url,c={};for(const[d,h]of o.headers)c[d]=h;const u={url:l,status:a,headers:c,data:""};if("deprecation"in c){const d=c.link&&c.link.match(/<([^<>]+)>; rel="deprecation"/),h=d&&d.pop();r.warn(`[@octokit/request] "${t.method} ${t.url}" is deprecated. It is scheduled to be removed on ${c.sunset}${h?`. See ${h}`:""}`)}if(a===204||a===205)return u;if(t.method==="HEAD"){if(a<400)return u;throw new gg(o.statusText,a,{response:u,request:t})}if(a===304)throw u.data=await Sx(o),new gg("Not modified",a,{response:u,request:t});if(a>=400)throw u.data=await Sx(o),new gg(Yle(u.data),a,{response:u,request:t});return u.data=n?await Sx(o):o.body,u}async function Sx(t){const e=t.headers.get("content-type");if(!e)return t.text().catch(()=>"");const r=Wle(e);if(Kle(r)){let n="";try{return n=await t.text(),JSON.parse(n)}catch{return n}}else return r.type.startsWith("text/")||r.parameters.charset?.toLowerCase()==="utf-8"?t.text().catch(()=>""):t.arrayBuffer().catch(()=>new ArrayBuffer(0))}function Kle(t){return t.type==="application/json"||t.type==="application/scim+json"}function Yle(t){if(typeof t=="string")return t;if(t instanceof ArrayBuffer)return"Unknown error";if("message"in t){const e="documentation_url"in t?` - ${t.documentation_url}`:"";return Array.isArray(t.errors)?`${t.message}: ${t.errors.map(r=>JSON.stringify(r)).join(", ")}${e}`:`${t.message}${e}`}return`Unknown error: ${JSON.stringify(t)}`}function CS(t,e){const r=t.defaults(e);return Object.assign(function(s,i){const o=r.merge(s,i);if(!o.request||!o.request.hook)return mI(r.parse(o));const a=(l,c)=>mI(r.parse(r.merge(l,c)));return Object.assign(a,{endpoint:r,defaults:CS.bind(null,r)}),o.request.hook(a,o)},{endpoint:r,defaults:CS.bind(null,r)})}var TS=CS(Ule,Gle),Xle="0.0.0-development";function Jle(t){return`Request failed due to following response errors:
`+t.errors.map(e=>` - ${e.message}`).join(`
`)}var Zle=class extends Error{constructor(t,e,r){super(Jle(r)),this.request=t,this.headers=e,this.response=r,this.errors=r.errors,this.data=r.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},Qle=["method","baseUrl","url","headers","request","query","mediaType","operationName"],ece=["query","method","url"],gI=/\/api\/v3\/?$/;function tce(t,e,r){if(r){if(typeof e=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const o in r)if(ece.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}const n=typeof e=="string"?Object.assign({query:e},r):e,s=Object.keys(n).reduce((o,a)=>Qle.includes(a)?(o[a]=n[a],o):(o.variables||(o.variables={}),o.variables[a]=n[a],o),{}),i=n.baseUrl||t.endpoint.DEFAULTS.baseUrl;return gI.test(i)&&(s.url=i.replace(gI,"/api/graphql")),t(s).then(o=>{if(o.data.errors){const a={};for(const l of Object.keys(o.headers))a[l]=o.headers[l];throw new Zle(s,a,o.data)}return o.data.data})}function ZT(t,e){const r=t.defaults(e);return Object.assign((s,i)=>tce(r,s,i),{defaults:ZT.bind(null,r),endpoint:r.endpoint})}ZT(TS,{headers:{"user-agent":`octokit-graphql.js/${Xle} ${wv()}`},method:"POST",url:"/graphql"});function rce(t){return ZT(t,{method:"POST",url:"/graphql"})}var Ex="(?:[a-zA-Z0-9_-]+)",bI="\\.",yI=new RegExp(`^${Ex}${bI}${Ex}${bI}${Ex}$`),nce=yI.test.bind(yI);async function sce(t){const e=nce(t),r=t.startsWith("v1.")||t.startsWith("ghs_"),n=t.startsWith("ghu_");return{type:"token",token:t,tokenType:e?"app":r?"installation":n?"user-to-server":"oauth"}}function ice(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function oce(t,e,r,n){const s=e.endpoint.merge(r,n);return s.headers.authorization=ice(t),e(s)}var ace=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(sce.bind(null,e),{hook:oce.bind(null,e)})};const T6="6.1.6",vI=()=>{},lce=console.warn.bind(console),cce=console.error.bind(console);function uce(t={}){return typeof t.debug!="function"&&(t.debug=vI),typeof t.info!="function"&&(t.info=vI),typeof t.warn!="function"&&(t.warn=lce),typeof t.error!="function"&&(t.error=cce),t}const _I=`octokit-core.js/${T6} ${wv()}`;let dce=class{static VERSION=T6;static defaults(e){return class extends this{constructor(...n){const s=n[0]||{};if(typeof e=="function"){super(e(s));return}super(Object.assign({},e,s,s.userAgent&&e.userAgent?{userAgent:`${s.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){const r=this.plugins;return class extends this{static plugins=r.concat(e.filter(s=>!r.includes(s)))}}constructor(e={}){const r=new kle.Collection,n={baseUrl:TS.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(n.headers["user-agent"]=e.userAgent?`${e.userAgent} ${_I}`:_I,e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers["time-zone"]=e.timeZone),this.request=TS.defaults(n),this.graphql=rce(this.request).defaults(n),this.log=uce(e.log),this.hook=r,e.authStrategy){const{authStrategy:i,...o}=e,a=i(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},e.auth));r.wrap("request",a.hook),this.auth=a}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const i=ace(e.auth);r.wrap("request",i.hook),this.auth=i}const s=this.constructor;for(let i=0;i<s.plugins.length;++i)Object.assign(this,s.plugins[i](this,e))}request;graphql;log;hook;auth};const hce="5.3.1";function k6(t){t.hook.wrap("request",(e,r)=>{t.log.debug("request",r);const n=Date.now(),s=t.request.endpoint.parse(r),i=s.url.replace(r.baseUrl,"");return e(r).then(o=>{const a=o.headers["x-github-request-id"];return t.log.info(`${s.method} ${i} - ${o.status} with id ${a} in ${Date.now()-n}ms`),o}).catch(o=>{const a=o.response?.headers["x-github-request-id"]||"UNKNOWN";throw t.log.error(`${s.method} ${i} - ${o.status} with id ${a} in ${Date.now()-n}ms`),o})})}k6.VERSION=hce;var fce="0.0.0-development";function pce(t){if(!t.data)return{...t,data:[]};if(!("total_count"in t.data&&!("url"in t.data)))return t;const r=t.data.incomplete_results,n=t.data.repository_selection,s=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const i=Object.keys(t.data)[0],o=t.data[i];return t.data=o,typeof r<"u"&&(t.data.incomplete_results=r),typeof n<"u"&&(t.data.repository_selection=n),t.data.total_count=s,t}function QT(t,e,r){const n=typeof e=="function"?e.endpoint(r):t.request.endpoint(e,r),s=typeof e=="function"?e:t.request,i=n.method,o=n.headers;let a=n.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!a)return{done:!0};try{const l=await s({method:i,url:a,headers:o}),c=pce(l);return a=((c.headers.link||"").match(/<([^<>]+)>;\s*rel="next"/)||[])[1],{value:c}}catch(l){if(l.status!==409)throw l;return a="",{value:{status:200,headers:{},data:[]}}}}})}}function A6(t,e,r,n){return typeof r=="function"&&(n=r,r=void 0),R6(t,[],QT(t,e,r)[Symbol.asyncIterator](),n)}function R6(t,e,r,n){return r.next().then(s=>{if(s.done)return e;let i=!1;function o(){i=!0}return e=e.concat(n?n(s.value,o):s.value.data),i?e:R6(t,e,r,n)})}Object.assign(A6,{iterator:QT});function P6(t){return{paginate:Object.assign(A6.bind(null,t),{iterator:QT.bind(null,t)})}}P6.VERSION=fce;const mce="13.5.0",gce={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addRepoAccessToSelfHostedRunnerGroupInOrg:["PUT /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repos/{owner}/{repo}/environments/{environment_name}/variables"],createHostedRunnerForOrg:["POST /orgs/{org}/actions/hosted-runners"],createOrUpdateEnvironmentSecret:["PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],deleteHostedRunnerForOrg:["DELETE /orgs/{org}/actions/hosted-runners/{hosted_runner_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getHostedRunnerForOrg:["GET /orgs/{org}/actions/hosted-runners/{hosted_runner_id}"],getHostedRunnersGithubOwnedImagesForOrg:["GET /orgs/{org}/actions/hosted-runners/images/github-owned"],getHostedRunnersLimitsForOrg:["GET /orgs/{org}/actions/hosted-runners/limits"],getHostedRunnersMachineSpecsForOrg:["GET /orgs/{org}/actions/hosted-runners/machine-sizes"],getHostedRunnersPartnerImagesForOrg:["GET /orgs/{org}/actions/hosted-runners/images/partner"],getHostedRunnersPlatformsForOrg:["GET /orgs/{org}/actions/hosted-runners/platforms"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables"],listGithubHostedRunnersInGroupForOrg:["GET /orgs/{org}/actions/runner-groups/{runner_group_id}/hosted-runners"],listHostedRunnersForOrg:["GET /orgs/{org}/actions/hosted-runners"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],updateHostedRunnerForOrg:["PATCH /orgs/{org}/actions/hosted-runners/{hosted_runner_id}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubBillingUsageReportOrg:["GET /organizations/{org}/settings/billing/usage"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{commitAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix/commits"],createAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],createVariantAnalysis:["POST /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses"],deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],deleteCodeqlDatabase:["DELETE /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getAutofix:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],getVariantAnalysis:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}"],getVariantAnalysisRepoTask:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}/repos/{repo_owner}/{repo_name}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codeSecurity:{attachConfiguration:["POST /orgs/{org}/code-security/configurations/{configuration_id}/attach"],attachEnterpriseConfiguration:["POST /enterprises/{enterprise}/code-security/configurations/{configuration_id}/attach"],createConfiguration:["POST /orgs/{org}/code-security/configurations"],createConfigurationForEnterprise:["POST /enterprises/{enterprise}/code-security/configurations"],deleteConfiguration:["DELETE /orgs/{org}/code-security/configurations/{configuration_id}"],deleteConfigurationForEnterprise:["DELETE /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],detachConfiguration:["DELETE /orgs/{org}/code-security/configurations/detach"],getConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}"],getConfigurationForRepository:["GET /repos/{owner}/{repo}/code-security-configuration"],getConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations"],getConfigurationsForOrg:["GET /orgs/{org}/code-security/configurations"],getDefaultConfigurations:["GET /orgs/{org}/code-security/configurations/defaults"],getDefaultConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/defaults"],getRepositoriesForConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}/repositories"],getRepositoriesForEnterpriseConfiguration:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}/repositories"],getSingleConfigurationForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],setConfigurationAsDefault:["PUT /orgs/{org}/code-security/configurations/{configuration_id}/defaults"],setConfigurationAsDefaultForEnterprise:["PUT /enterprises/{enterprise}/code-security/configurations/{configuration_id}/defaults"],updateConfiguration:["PATCH /orgs/{org}/code-security/configurations/{configuration_id}"],updateEnterpriseConfiguration:["PATCH /enterprises/{enterprise}/code-security/configurations/{configuration_id}"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],copilotMetricsForOrganization:["GET /orgs/{org}/copilot/metrics"],copilotMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/metrics"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"],usageMetricsForOrg:["GET /orgs/{org}/copilot/usage"],usageMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/usage"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},hostedCompute:{createNetworkConfigurationForOrg:["POST /orgs/{org}/settings/network-configurations"],deleteNetworkConfigurationFromOrg:["DELETE /orgs/{org}/settings/network-configurations/{network_configuration_id}"],getNetworkConfigurationForOrg:["GET /orgs/{org}/settings/network-configurations/{network_configuration_id}"],getNetworkSettingsForOrg:["GET /orgs/{org}/settings/network-settings/{network_settings_id}"],listNetworkConfigurationsForOrg:["GET /orgs/{org}/settings/network-configurations"],updateNetworkConfigurationForOrg:["PATCH /orgs/{org}/settings/network-configurations/{network_configuration_id}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],addSubIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],listSubIssues:["GET /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],removeSubIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/sub_issue"],reprioritizeSubIssue:["PATCH /repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.addSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#add-a-security-manager-team"}],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createIssueType:["POST /orgs/{org}/issue-types"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteIssueType:["DELETE /orgs/{org}/issue-types/{issue_type_id}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}",{},{deprecated:"octokit.rest.orgs.enableOrDisableSecurityProductOnAllOrgRepos() is deprecated, see https://docs.github.com/rest/orgs/orgs#enable-or-disable-a-security-feature-for-an-organization"}],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getOrgRulesetHistory:["GET /orgs/{org}/rulesets/{ruleset_id}/history"],getOrgRulesetVersion:["GET /orgs/{org}/rulesets/{ruleset_id}/history/{version_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listAttestations:["GET /orgs/{org}/attestations/{subject_digest}"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listIssueTypes:["GET /orgs/{org}/issue-types"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers",{},{deprecated:"octokit.rest.orgs.listSecurityManagerTeams() is deprecated, see https://docs.github.com/rest/orgs/security-managers#list-security-manager-teams"}],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.removeSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#remove-a-security-manager-team"}],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateIssueType:["PUT /orgs/{org}/issue-types/{issue_type_id}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},privateRegistries:{createOrgPrivateRegistry:["POST /orgs/{org}/private-registries"],deleteOrgPrivateRegistry:["DELETE /orgs/{org}/private-registries/{secret_name}"],getOrgPrivateRegistry:["GET /orgs/{org}/private-registries/{secret_name}"],getOrgPublicKey:["GET /orgs/{org}/private-registries/public-key"],listOrgPrivateRegistries:["GET /orgs/{org}/private-registries"],updateOrgPrivateRegistry:["PATCH /orgs/{org}/private-registries/{secret_name}"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{},{deprecated:"octokit.rest.projects.addCollaborator() is deprecated, see https://docs.github.com/rest/projects/collaborators#add-project-collaborator"}],createCard:["POST /projects/columns/{column_id}/cards",{},{deprecated:"octokit.rest.projects.createCard() is deprecated, see https://docs.github.com/rest/projects/cards#create-a-project-card"}],createColumn:["POST /projects/{project_id}/columns",{},{deprecated:"octokit.rest.projects.createColumn() is deprecated, see https://docs.github.com/rest/projects/columns#create-a-project-column"}],createForAuthenticatedUser:["POST /user/projects",{},{deprecated:"octokit.rest.projects.createForAuthenticatedUser() is deprecated, see https://docs.github.com/rest/projects/projects#create-a-user-project"}],createForOrg:["POST /orgs/{org}/projects",{},{deprecated:"octokit.rest.projects.createForOrg() is deprecated, see https://docs.github.com/rest/projects/projects#create-an-organization-project"}],createForRepo:["POST /repos/{owner}/{repo}/projects",{},{deprecated:"octokit.rest.projects.createForRepo() is deprecated, see https://docs.github.com/rest/projects/projects#create-a-repository-project"}],delete:["DELETE /projects/{project_id}",{},{deprecated:"octokit.rest.projects.delete() is deprecated, see https://docs.github.com/rest/projects/projects#delete-a-project"}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{},{deprecated:"octokit.rest.projects.deleteCard() is deprecated, see https://docs.github.com/rest/projects/cards#delete-a-project-card"}],deleteColumn:["DELETE /projects/columns/{column_id}",{},{deprecated:"octokit.rest.projects.deleteColumn() is deprecated, see https://docs.github.com/rest/projects/columns#delete-a-project-column"}],get:["GET /projects/{project_id}",{},{deprecated:"octokit.rest.projects.get() is deprecated, see https://docs.github.com/rest/projects/projects#get-a-project"}],getCard:["GET /projects/columns/cards/{card_id}",{},{deprecated:"octokit.rest.projects.getCard() is deprecated, see https://docs.github.com/rest/projects/cards#get-a-project-card"}],getColumn:["GET /projects/columns/{column_id}",{},{deprecated:"octokit.rest.projects.getColumn() is deprecated, see https://docs.github.com/rest/projects/columns#get-a-project-column"}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{},{deprecated:"octokit.rest.projects.getPermissionForUser() is deprecated, see https://docs.github.com/rest/projects/collaborators#get-project-permission-for-a-user"}],listCards:["GET /projects/columns/{column_id}/cards",{},{deprecated:"octokit.rest.projects.listCards() is deprecated, see https://docs.github.com/rest/projects/cards#list-project-cards"}],listCollaborators:["GET /projects/{project_id}/collaborators",{},{deprecated:"octokit.rest.projects.listCollaborators() is deprecated, see https://docs.github.com/rest/projects/collaborators#list-project-collaborators"}],listColumns:["GET /projects/{project_id}/columns",{},{deprecated:"octokit.rest.projects.listColumns() is deprecated, see https://docs.github.com/rest/projects/columns#list-project-columns"}],listForOrg:["GET /orgs/{org}/projects",{},{deprecated:"octokit.rest.projects.listForOrg() is deprecated, see https://docs.github.com/rest/projects/projects#list-organization-projects"}],listForRepo:["GET /repos/{owner}/{repo}/projects",{},{deprecated:"octokit.rest.projects.listForRepo() is deprecated, see https://docs.github.com/rest/projects/projects#list-repository-projects"}],listForUser:["GET /users/{username}/projects",{},{deprecated:"octokit.rest.projects.listForUser() is deprecated, see https://docs.github.com/rest/projects/projects#list-user-projects"}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{},{deprecated:"octokit.rest.projects.moveCard() is deprecated, see https://docs.github.com/rest/projects/cards#move-a-project-card"}],moveColumn:["POST /projects/columns/{column_id}/moves",{},{deprecated:"octokit.rest.projects.moveColumn() is deprecated, see https://docs.github.com/rest/projects/columns#move-a-project-column"}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{},{deprecated:"octokit.rest.projects.removeCollaborator() is deprecated, see https://docs.github.com/rest/projects/collaborators#remove-user-as-a-collaborator"}],update:["PATCH /projects/{project_id}",{},{deprecated:"octokit.rest.projects.update() is deprecated, see https://docs.github.com/rest/projects/projects#update-a-project"}],updateCard:["PATCH /projects/columns/cards/{card_id}",{},{deprecated:"octokit.rest.projects.updateCard() is deprecated, see https://docs.github.com/rest/projects/cards#update-an-existing-project-card"}],updateColumn:["PATCH /projects/columns/{column_id}",{},{deprecated:"octokit.rest.projects.updateColumn() is deprecated, see https://docs.github.com/rest/projects/columns#update-an-existing-project-column"}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkPrivateVulnerabilityReporting:["GET /repos/{owner}/{repo}/private-vulnerability-reporting"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAttestation:["POST /repos/{owner}/{repo}/attestations"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesetHistory:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history"],getRepoRulesetVersion:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history/{version_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAttestations:["GET /repos/{owner}/{repo}/attestations/{subject_digest}"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues",{},{deprecated:"octokit.rest.search.issuesAndPullRequests() is deprecated, see https://docs.github.com/rest/search/search#search-issues-and-pull-requests"}],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{createPushProtectionBypass:["POST /repos/{owner}/{repo}/secret-scanning/push-protection-bypasses"],getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],getScanHistory:["GET /repos/{owner}/{repo}/secret-scanning/scan-history"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.addOrUpdateProjectPermissionsInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#add-or-update-team-project-permissions"}],addOrUpdateProjectPermissionsLegacy:["PUT /teams/{team_id}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.addOrUpdateProjectPermissionsLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#add-or-update-team-project-permissions-legacy"}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.checkPermissionsForProjectInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#check-team-permissions-for-a-project"}],checkPermissionsForProjectLegacy:["GET /teams/{team_id}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.checkPermissionsForProjectLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#check-team-permissions-for-a-project-legacy"}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{},{deprecated:"octokit.rest.teams.listProjectsInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#list-team-projects"}],listProjectsLegacy:["GET /teams/{team_id}/projects",{},{deprecated:"octokit.rest.teams.listProjectsLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#list-team-projects-legacy"}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.removeProjectInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#remove-a-project-from-a-team"}],removeProjectLegacy:["DELETE /teams/{team_id}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.removeProjectLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#remove-a-project-from-a-team-legacy"}],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getById:["GET /user/{account_id}"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listAttestations:["GET /users/{username}/attestations/{subject_digest}"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}};var bce=gce;const cc=new Map;for(const[t,e]of Object.entries(bce))for(const[r,n]of Object.entries(e)){const[s,i,o]=n,[a,l]=s.split(/ /),c=Object.assign({method:a,url:l},i);cc.has(t)||cc.set(t,new Map),cc.get(t).set(r,{scope:t,methodName:r,endpointDefaults:c,decorations:o})}const yce={has({scope:t},e){return cc.get(t).has(e)},getOwnPropertyDescriptor(t,e){return{value:this.get(t,e),configurable:!0,writable:!0,enumerable:!0}},defineProperty(t,e,r){return Object.defineProperty(t.cache,e,r),!0},deleteProperty(t,e){return delete t.cache[e],!0},ownKeys({scope:t}){return[...cc.get(t).keys()]},set(t,e,r){return t.cache[e]=r},get({octokit:t,scope:e,cache:r},n){if(r[n])return r[n];const s=cc.get(e).get(n);if(!s)return;const{endpointDefaults:i,decorations:o}=s;return o?r[n]=_ce(t,e,n,i,o):r[n]=t.request.defaults(i),r[n]}};function vce(t){const e={};for(const r of cc.keys())e[r]=new Proxy({octokit:t,scope:r,cache:{}},yce);return e}function _ce(t,e,r,n,s){const i=t.request.defaults(n);function o(...a){let l=i.endpoint.merge(...a);if(s.mapToData)return l=Object.assign({},l,{data:l[s.mapToData],[s.mapToData]:void 0}),i(l);if(s.renamed){const[c,u]=s.renamed;t.log.warn(`octokit.${e}.${r}() has been renamed to octokit.${c}.${u}()`)}if(s.deprecated&&t.log.warn(s.deprecated),s.renamedParameters){const c=i.endpoint.merge(...a);for(const[u,d]of Object.entries(s.renamedParameters))u in c&&(t.log.warn(`"${u}" parameter is deprecated for "octokit.${e}.${r}()". Use "${d}" instead`),d in c||(c[d]=c[u]),delete c[u]);return i(c)}return i(...a)}return Object.assign(o,i)}function I6(t){const e=vce(t);return{...e,rest:e}}I6.VERSION=mce;const xce="21.1.1",wce=dce.plugin(k6,I6,P6).defaults({userAgent:`octokit-rest.js/${xce}`});function N6(t,e){let r=null,n=0,s=null;return function(...o){const a=Date.now();if(r=o,a-n<e){s||(s=setTimeout(()=>{s=null,n=Date.now(),r&&(t.apply(this,r),r=null)},e-(a-n)));return}n=a,t.apply(this,o),r=null}}const{saveAs:Sce}=wle,Do=Qt("WorkbenchStore");class D6{#r=new f6(ls);#e=new rle(ls);#n=new Aae(this.#e);#t=new yle(ls);#s=new Set;artifacts=js({});showWorkbench=bt(!1);currentView=bt("code");unsavedFiles=bt(new Set);workbenchWidth=bt(typeof window<"u"?window.innerWidth*.7:1100);actionAlert=bt(void 0);supabaseAlert=bt(void 0);deployAlert=bt(void 0);isRestoringSession=bt(!1);modifiedFiles=new Set;artifactIdList=[];#o=Promise.resolve();constructor(){}addToExecutionQueue(e){this.#o=this.#o.then(()=>e()).catch(r=>{console.error("[WorkbenchStore] Execution queue error:",r)})}get previews(){return this.#r.previews}get files(){return this.#e.files}get currentDocument(){return this.#n.currentDocument}get selectedFile(){return this.#n.selectedFile}get firstArtifact(){return this.#i(this.artifactIdList[0])}get filesCount(){return this.#e.filesCount}get showTerminal(){return this.#t.showTerminal}get boltTerminal(){return this.#t.boltTerminal}get alert(){return this.actionAlert}clearAlert(){this.actionAlert.set(void 0)}interruptTerminal(){this.#t.boltTerminal.interruptExecution()}get SupabaseAlert(){return this.supabaseAlert}clearSupabaseAlert(){this.supabaseAlert.set(void 0)}get DeployAlert(){return this.deployAlert}clearDeployAlert(){this.deployAlert.set(void 0)}toggleTerminal(e){this.#t.toggleTerminal(e)}attachTerminal(e){this.#t.attachTerminal(e)}attachBoltTerminal(e){this.#t.attachBoltTerminal(e)}detachTerminal(e){this.#t.detachTerminal(e)}onTerminalResize(e,r){this.#t.onTerminalResize(e,r)}setDocuments(e){if(this.#n.setDocuments(e),this.#e.filesCount>0&&this.currentDocument.get()===void 0){for(const[r,n]of Object.entries(e))if(n?.type==="file"){this.setSelectedFile(r);break}}}setShowWorkbench(e){this.showWorkbench.set(e)}setWorkbenchWidth(e){const n=typeof window<"u"?window.innerWidth*.8:1200,s=Math.max(300,Math.min(n,e));this.workbenchWidth.set(s)}setCurrentDocumentContent(e){const r=this.currentDocument.get()?.filePath;if(!r)return;const n=this.#e.getFile(r)?.content,s=n!==void 0&&n!==e;this.#n.updateFile(r,e);const i=this.currentDocument.get();if(i){const o=this.unsavedFiles.get();if(s&&o.has(i.filePath))return;const a=new Set(o);s?a.add(i.filePath):a.delete(i.filePath),this.unsavedFiles.set(a)}}setCurrentDocumentScrollPosition(e){const r=this.currentDocument.get();if(!r)return;const{filePath:n}=r;this.#n.updateScrollPosition(n,e)}setSelectedFile(e){this.#n.setSelectedFile(e)}async saveFile(e){const n=this.#n.documents.get()[e];if(n===void 0)return;await this.#e.saveFile(e,n.value);const s=new Set(this.unsavedFiles.get());s.delete(e),this.unsavedFiles.set(s)}async saveCurrentDocument(){const e=this.currentDocument.get();e!==void 0&&await this.saveFile(e.filePath)}resetCurrentDocument(){const e=this.currentDocument.get();if(e===void 0)return;const{filePath:r}=e,n=this.#e.getFile(r);n&&this.setCurrentDocumentContent(n.content)}async saveAllFiles(){for(const e of this.unsavedFiles.get())await this.saveFile(e)}getFileModifcations(){return this.#e.getFileModifications()}getModifiedFiles(){return this.#e.getModifiedFiles()}resetAllFileModifications(){this.#e.resetFileModifications()}lockFile(e){return this.#e.lockFile(e)}lockFolder(e){return this.#e.lockFolder(e)}unlockFile(e){return this.#e.unlockFile(e)}unlockFolder(e){return this.#e.unlockFolder(e)}isFileLocked(e){return this.#e.isFileLocked(e)}isFolderLocked(e){return this.#e.isFolderLocked(e)}async createFile(e,r=""){try{const n=await this.#e.createFile(e,r);if(n&&(this.setSelectedFile(e),typeof r=="string"&&r==="")){const s=new Set(this.unsavedFiles.get());s.delete(e),this.unsavedFiles.set(s)}return n}catch(n){throw console.error("Failed to create file:",n),n}}async createFolder(e){try{return await this.#e.createFolder(e)}catch(r){throw console.error("Failed to create folder:",r),r}}async deleteFile(e){try{const n=this.currentDocument.get()?.filePath===e,s=await this.#e.deleteFile(e);if(s){const i=new Set(this.unsavedFiles.get());if(i.has(e)&&(i.delete(e),this.unsavedFiles.set(i)),n){const o=this.files.get();let a;for(const[l,c]of Object.entries(o))if(c?.type==="file"){a=l;break}this.setSelectedFile(a)}}return s}catch(r){throw console.error("Failed to delete file:",r),r}}async deleteFolder(e){try{const n=this.currentDocument.get()?.filePath?.startsWith(e+"/"),s=await this.#e.deleteFolder(e);if(s){const i=this.unsavedFiles.get(),o=new Set;for(const a of i)a.startsWith(e+"/")||o.add(a);if(o.size!==i.size&&this.unsavedFiles.set(o),n){const a=this.files.get();let l;for(const[c,u]of Object.entries(a))if(u?.type==="file"){l=c;break}this.setSelectedFile(l)}}return s}catch(r){throw console.error("Failed to delete folder:",r),r}}abortAllActions(){}setReloadedMessages(e){this.#s=new Set(e),Do.debug("Set reloaded messages:",e.length,"message IDs")}clearReloadedMessages(){Do.debug("Clearing reloaded messages set, was:",this.#s.size,"messages"),this.#s.clear()}isReloadedMessage(e){const r=this.#s.has(e);return Do.trace("isReloadedMessage check:",e,"->",r),r}addArtifact({messageId:e,title:r,id:n,type:s}){if(Do.debug("addArtifact:",{messageId:e,id:n,title:r,type:s}),this.#i(n)){Do.debug("Artifact already exists, skipping:",n);return}this.artifactIdList.includes(n)||this.artifactIdList.push(n),this.artifacts.setKey(n,{id:n,title:r,closed:!1,type:s,runner:new Moe(ls,()=>this.boltTerminal,o=>{this.#s.has(e)||this.actionAlert.set(o)},o=>{this.#s.has(e)||this.supabaseAlert.set(o)},o=>{this.#s.has(e)||this.deployAlert.set(o)})})}updateArtifact({artifactId:e},r){if(!e)return;const n=this.#i(e);n&&this.artifacts.setKey(e,{...n,...r})}addAction(e){Do.debug("addAction queued:",{artifactId:e.artifactId,actionId:e.actionId,actionType:e.action.type}),this.addToExecutionQueue(()=>this._addAction(e))}async _addAction(e){const{artifactId:r}=e,n=this.#i(r);return n||(Do.error("_addAction: Artifact not found:",r),Es("Artifact not found")),Do.debug("_addAction executing:",e.actionId,"type:",e.action.type),n.runner.addAction(e)}runAction(e,r=!1){Do.debug("runAction:",{artifactId:e.artifactId,actionId:e.actionId,actionType:e.action.type,isStreaming:r}),r?this.actionStreamSampler(e,r):this.addToExecutionQueue(()=>this._runAction(e,r))}async _runAction(e,r=!1){const{artifactId:n}=e,s=this.#i(n);s||Es("Artifact not found");const i=s.runner.actions.get()[e.actionId];if(!(!i||i.executed))if(e.action.type==="file"){const o=await ls,a=$r.join(o.workdir,e.action.filePath);MT.get()&&(this.selectedFile.value!==a&&this.setSelectedFile(a),this.currentView.value!=="code"&&this.currentView.set("code")),this.#n.documents.get()[a]||await s.runner.runAction(e,r),this.#n.updateFile(a,e.action.content);const u=gt.get().settings.isEnabled;!r&&e.action.content&&!u&&await this.saveFile(a),r||(await s.runner.runAction(e),this.resetAllFileModifications())}else await s.runner.runAction(e)}actionStreamSampler=N6(async(e,r=!1)=>await this._runAction(e,r),100);#i(e){return this.artifacts.get()[e]}async downloadZip(){const e=new _le,r=this.files.get(),n=(ro.value??"project").toLocaleLowerCase().split(" ").join("_"),s=Date.now().toString(36).slice(-6),i=`${n}_${s}`;for(const[a,l]of Object.entries(r))if(l?.type==="file"&&!l.isBinary){const c=fg(a),u=c.split("/");if(u.length>1){let d=e;for(let h=0;h<u.length-1;h++)d=d.folder(u[h]);d.file(u[u.length-1],l.content)}else e.file(c,l.content)}const o=await e.generateAsync({type:"blob"});Sce(o,`${i}.zip`)}async syncFiles(e){const r=this.files.get(),n=[];for(const[s,i]of Object.entries(r))if(i?.type==="file"&&!i.isBinary){const o=fg(s),a=o.split("/");let l=e;for(let d=0;d<a.length-1;d++)l=await l.getDirectoryHandle(a[d],{create:!0});const u=await(await l.getFileHandle(a[a.length-1],{create:!0})).createWritable();await u.write(i.content),await u.close(),n.push(o)}return n}async pushToRepository(e,r,n,s,i,o=!1,a="main"){try{const l=e==="github",c=e==="gitlab",u=i||Et.get(l?"githubToken":"gitlabToken"),d=s||Et.get(l?"githubUsername":"gitlabUsername");if(!u||!d)throw new Error(`${e} token or username is not set in cookies or provided.`);const h=this.files.get();if(!h||Object.keys(h).length===0)throw new Error("No files found to push");if(l){const f=new wce({auth:u});let b,m=!1;try{if(b=(await f.repos.get({owner:d,repo:r})).data,console.log("Repository already exists, using existing repo"),b.private!==o){console.log(`Updating repository visibility from ${b.private?"private":"public"} to ${o?"private":"public"}`);try{const{data:x}=await f.repos.update({owner:d,repo:r,private:o});console.log("Repository visibility updated successfully"),b=x,m=!0,console.log("Waiting for visibility change to propagate..."),await new Promise(w=>setTimeout(w,3e3))}catch(x){console.error("Failed to update repository visibility:",x)}}}catch(_){if(_ instanceof Error&&"status"in _&&_.status===404){console.log(`Creating new repository with private=${o}`);const x={name:r,private:o,auto_init:!0};console.log("Create repo options:",x);const{data:w}=await f.repos.createForAuthenticatedUser(x);console.log("Repository created:",w.html_url,"Private:",w.private),b=w,console.log("Waiting for repository to initialize..."),await new Promise(S=>setTimeout(S,2e3))}else throw console.error("Cannot create repo:",_),_}const g=this.files.get();if(!g||Object.keys(g).length===0)throw new Error("No files found to push");const y=async(_=1)=>{try{console.log(`Pushing files to repository (attempt ${_}/3)...`);const S=(await Promise.all(Object.entries(g).map(async([P,D])=>{if(D?.type==="file"&&D.content){const{data:R}=await f.git.createBlob({owner:b.owner.login,repo:b.name,content:qe.from(D.content).toString("base64"),encoding:"base64"});return{path:fg(P),sha:R.sha}}return null}))).filter(Boolean);if(S.length===0)throw new Error("No valid files to push");b=(await f.repos.get({owner:d,repo:r})).data;const{data:E}=await f.git.getRef({owner:b.owner.login,repo:b.name,ref:`heads/${b.default_branch||"main"}`}),C=E.object.sha,{data:A}=await f.git.createTree({owner:b.owner.login,repo:b.name,base_tree:C,tree:S.map(P=>({path:P.path,mode:"100644",type:"blob",sha:P.sha}))}),{data:I}=await f.git.createCommit({owner:b.owner.login,repo:b.name,message:n||"Initial commit from your app",tree:A.sha,parents:[C]});return await f.git.updateRef({owner:b.owner.login,repo:b.name,ref:`heads/${b.default_branch||"main"}`,sha:I.sha}),console.log("Files successfully pushed to repository"),b.html_url}catch(w){if(console.error(`Error during push attempt ${_}:`,w),(m||_===1)&&_<3){const S=_*2e3;return console.log(`Waiting ${S}ms before retry...`),await new Promise(T=>setTimeout(T,S)),y(_+1)}throw w}};return await y()}if(c){const{GitLabApiService:f}=await Z(async()=>{const{GitLabApiService:v}=await Promise.resolve().then(()=>zde);return{GitLabApiService:v}},void 0),b=new f(u,"https://gitlab.com");let m=await b.getProject(d,r);m||(m=await b.createProject(r,o),await new Promise(v=>setTimeout(v,2e3)));const g=await b.getFile(m.id,"README.md",a).catch(()=>null);(!g||!g.ok)&&(await b.createBranch(m.id,a,m.default_branch),await new Promise(v=>setTimeout(v,1e3)));const y=Object.entries(h).reduce((v,[_,x])=>(x?.type==="file"&&x.content&&v.push({action:"create",file_path:fg(_),content:x.content}),v),[]);for(const v of y)(await b.getFile(m.id,v.file_path,a)).ok&&(v.action="update");return await b.commitFiles(m.id,{branch:a,commit_message:n||"Commit multiple files",actions:y}),m.web_url}throw new Error(`Unsupported provider: ${e}`)}catch(l){throw console.error("Error pushing to repository:",l),l}}}const Pe=new D6,Ece=Object.freeze(Object.defineProperty({__proto__:null,WorkbenchStore:D6,workbenchStore:Pe},Symbol.toStringTag,{value:"Module"})),tr=await Gse(),Db=bt(tr),zn=bt(void 0),ro=bt(void 0),Cx=bt(void 0);function ek(){const t=jC(),{id:e}=pK(),[r]=HM(),[n,s]=k.useState([]),[i,o]=k.useState([]),[a,l]=k.useState(!1),[c,u]=k.useState();k.useEffect(()=>{if(!tr){l(!0);{const f=new Error("Chat persistence is unavailable");Jt.logError("Chat persistence initialization failed",f),Ie.error("Chat persistence is unavailable")}return}e?cd(tr,e).then(async f=>{if(!f||f.messages.length===0){t("/",{replace:!0}),l(!0);return}const b=f.id,g=await eie(tr,b)||{chatIndex:"",files:{}},y=r.get("rewindTo"),v=y?f.messages.findIndex(x=>x.id===y)+1:f.messages.length,_=f.messages.slice(0,v);s([]),g?.files&&Object.keys(g.files).length>0&&(Pe.isRestoringSession.set(!0),h(e,g)),o(_),u(f.urlId),ro.set(f.description),zn.set(f.id),Cx.set(f.metadata),Yo.syncFromMessages(f.messages),l(!0)}).catch(f=>{du.error(f),Jt.logError("Failed to load chat messages or snapshot",f),Ie.error("Failed to load chat: "+f.message)}):l(!0)},[e,tr,t,r]);const d=k.useCallback(async(f,b,m,g)=>{const y=zn.get();if(!y||!tr)return;const v={chatIndex:f,files:b,summary:g};try{await uF(tr,y,v)}catch(_){du.error("Failed to save snapshot:",_),Ie.error("Failed to save chat snapshot.")}},[tr]),h=k.useCallback(async(f,b)=>{const m=await ls,g=b||{files:{}};if(!g?.files||Object.keys(g.files).length===0)return;Pe.isRestoringSession.set(!0);const v={...Pe.files.get(),...g.files};Pe.files.set(v),Pe.setDocuments(v);const _=[],x=[];Object.entries(g.files).forEach(([w,S])=>{let T=w;T.startsWith(m.workdir)&&(T=T.replace(m.workdir,"")),S?.type==="folder"?_.push(m.fs.mkdir(T,{recursive:!0})):S?.type==="file"&&x.push(m.fs.writeFile(T,S.content,{encoding:S.isBinary?void 0:"utf8"}))}),await Promise.all(_),await Promise.all(x)},[]);return{ready:!e||a,initialMessages:i,updateChatMestaData:async f=>{const b=zn.get();if(!(!tr||!b))try{await kb(tr,b,i,c,ro.get(),void 0,f),Cx.set(f)}catch(m){Ie.error("Failed to update chat metadata"),du.error(m)}},storeMessageHistory:async f=>{if(!tr||f.length===0)return;const{firstArtifact:b}=Pe;f=f.filter(_=>!_.annotations?.includes("no-store"));let m=c;if(!c&&b?.id){const _=await cF(tr,b.id);m=_,xI(_),u(_)}let g;const y=f[f.length-1];if(y.role==="assistant"){const x=y.annotations?.filter(w=>w&&typeof w=="object"&&Object.keys(w).includes("type"))||[];x.find(w=>w.type==="chatSummary")&&(g=x.find(w=>w.type==="chatSummary")?.summary)}if(d(f[f.length-1].id,Pe.files.get(),m,g),!ro.get()&&b?.title&&ro.set(b?.title),i.length===0&&!zn.get()){const _=await lF(tr);zn.set(_),c||xI(_)}const v=zn.get();if(!v){du.error("Cannot save messages, chat ID is not set."),Ie.error("Failed to save chat messages: Chat ID missing.");return}await kb(tr,v,[...n,...f],c,ro.get(),void 0,Cx.get())},duplicateCurrentChat:async f=>{if(!(!tr||!e&&!f))try{const b=await Zse(tr,e||f);t(`/chat/${b}`),Ie.success("Chat duplicated successfully")}catch(b){Ie.error("Failed to duplicate chat"),du.error(b)}},importChat:async(f,b,m)=>{if(tr)try{const g=await BT(tr,f,b,m);window.location.href=`/chat/${g}`,Ie.success("Chat imported successfully")}catch(g){g instanceof Error?Ie.error("Failed to import chat: "+g.message):Ie.error("Failed to import chat")}},exportChat:async(f=c)=>{if(!tr||!f)return;const b=await cd(tr,f),m={messages:b.messages,description:b.description,exportDate:new Date().toISOString()},g=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),y=URL.createObjectURL(g),v=document.createElement("a");v.href=y,v.download=`chat-${new Date().toISOString()}.json`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(y)}}}function xI(t){const e=new URL(window.location.href);e.pathname=`/chat/${t}`,window.history.replaceState({idx:window.history.state?.idx??0},"",e)}const bg=Qt("SnapshotUtils");async function Cce(t,e){const r=zn.get(),n=Db.get();if(!r){bg.warn("Cannot take snapshot: No chat ID available");return}if(!n){bg.warn("Cannot take snapshot: Database not available");return}const s=Pe.files.get(),o={chatIndex:`snapshot-${Date.now()}`,files:s,summary:e};try{await uF(n,r,o),bg.info(`Snapshot saved for chat ${r} with ${Object.keys(s).length} files`)}catch(a){throw bg.error("Failed to save snapshot:",a),a}}async function wI(t=100,e,r){return await new Promise(n=>setTimeout(n,t)),Cce(e,r)}const Tce=["top","right","bottom","left"],nl=Math.min,As=Math.max,Ob=Math.round,yg=Math.floor,vo=t=>({x:t,y:t}),kce={left:"right",right:"left",bottom:"top",top:"bottom"},Ace={start:"end",end:"start"};function kS(t,e,r){return As(t,nl(e,r))}function sa(t,e){return typeof t=="function"?t(e):t}function ia(t){return t.split("-")[0]}function Ld(t){return t.split("-")[1]}function tk(t){return t==="x"?"y":"x"}function rk(t){return t==="y"?"height":"width"}const Rce=new Set(["top","bottom"]);function co(t){return Rce.has(ia(t))?"y":"x"}function nk(t){return tk(co(t))}function Pce(t,e,r){r===void 0&&(r=!1);const n=Ld(t),s=nk(t),i=rk(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Lb(o)),[o,Lb(o)]}function Ice(t){const e=Lb(t);return[AS(t),e,AS(e)]}function AS(t){return t.replace(/start|end/g,e=>Ace[e])}const SI=["left","right"],EI=["right","left"],Nce=["top","bottom"],Dce=["bottom","top"];function Oce(t,e,r){switch(t){case"top":case"bottom":return r?e?EI:SI:e?SI:EI;case"left":case"right":return e?Nce:Dce;default:return[]}}function Lce(t,e,r,n){const s=Ld(t);let i=Oce(ia(t),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(AS)))),i}function Lb(t){return t.replace(/left|right|bottom|top/g,e=>kce[e])}function Mce(t){return{top:0,right:0,bottom:0,left:0,...t}}function O6(t){return typeof t!="number"?Mce(t):{top:t,right:t,bottom:t,left:t}}function Mb(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function CI(t,e,r){let{reference:n,floating:s}=t;const i=co(e),o=nk(e),a=rk(o),l=ia(e),c=i==="y",u=n.x+n.width/2-s.width/2,d=n.y+n.height/2-s.height/2,h=n[a]/2-s[a]/2;let f;switch(l){case"top":f={x:u,y:n.y-s.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-s.width,y:d};break;default:f={x:n.x,y:n.y}}switch(Ld(e)){case"start":f[o]-=h*(r&&c?-1:1);break;case"end":f[o]+=h*(r&&c?-1:1);break}return f}async function jce(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=sa(e,t),b=O6(f),g=a[h?d==="floating"?"reference":"floating":d],y=Mb(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(g)))==null||r?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=d==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},w=Mb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:_,strategy:l}):v);return{top:(y.top-w.top+b.top)/x.y,bottom:(w.bottom-y.bottom+b.bottom)/x.y,left:(y.left-w.left+b.left)/x.x,right:(w.right-y.right+b.right)/x.x}}const Fce=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=CI(c,n,l),h=n,f={},b=0;for(let g=0;g<a.length;g++){var m;const{name:y,fn:v}=a[g],{x:_,y:x,data:w,reset:S}=await v({x:u,y:d,initialPlacement:n,placement:h,strategy:s,middlewareData:f,rects:c,platform:{...o,detectOverflow:(m=o.detectOverflow)!=null?m:jce},elements:{reference:t,floating:e}});u=_??u,d=x??d,f={...f,[y]:{...f[y],...w}},S&&b<=50&&(b++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:u,y:d}=CI(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:f}},Bce=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=sa(t,e)||{};if(c==null)return{};const d=O6(u),h={x:r,y:n},f=nk(s),b=rk(f),m=await o.getDimensions(c),g=f==="y",y=g?"top":"left",v=g?"bottom":"right",_=g?"clientHeight":"clientWidth",x=i.reference[b]+i.reference[f]-h[f]-i.floating[b],w=h[f]-i.reference[f],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=S?S[_]:0;(!T||!await(o.isElement==null?void 0:o.isElement(S)))&&(T=a.floating[_]||i.floating[b]);const E=x/2-w/2,C=T/2-m[b]/2-1,A=nl(d[y],C),I=nl(d[v],C),P=A,D=T-m[b]-I,R=T/2-m[b]/2+E,F=kS(P,R,D),G=!l.arrow&&Ld(s)!=null&&R!==F&&i.reference[b]/2-(R<P?A:I)-m[b]/2<0,z=G?R<P?R-P:R-D:0;return{[f]:h[f]+z,data:{[f]:F,centerOffset:R-F-z,...G&&{alignmentOffset:z}},reset:G}}}),$ce=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:m=!0,...g}=sa(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=ia(s),v=co(a),_=ia(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),w=h||(_||!m?[Lb(a)]:Ice(a)),S=b!=="none";!h&&S&&w.push(...Lce(a,m,b,x));const T=[a,...w],E=await l.detectOverflow(e,g),C=[];let A=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&C.push(E[y]),d){const R=Pce(s,o,x);C.push(E[R[0]],E[R[1]])}if(A=[...A,{placement:s,overflows:C}],!C.every(R=>R<=0)){var I,P;const R=(((I=i.flip)==null?void 0:I.index)||0)+1,F=T[R];if(F&&(!(d==="alignment"?v!==co(F):!1)||A.every(K=>co(K.placement)===v?K.overflows[0]>0:!0)))return{data:{index:R,overflows:A},reset:{placement:F}};let G=(P=A.filter(z=>z.overflows[0]<=0).sort((z,K)=>z.overflows[1]-K.overflows[1])[0])==null?void 0:P.placement;if(!G)switch(f){case"bestFit":{var D;const z=(D=A.filter(K=>{if(S){const L=co(K.placement);return L===v||L==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(L=>L>0).reduce((L,O)=>L+O,0)]).sort((K,L)=>K[1]-L[1])[0])==null?void 0:D[0];z&&(G=z);break}case"initialPlacement":G=a;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function TI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function kI(t){return Tce.some(e=>t[e]>=0)}const Uce=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r,platform:n}=e,{strategy:s="referenceHidden",...i}=sa(t,e);switch(s){case"referenceHidden":{const o=await n.detectOverflow(e,{...i,elementContext:"reference"}),a=TI(o,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:kI(a)}}}case"escaped":{const o=await n.detectOverflow(e,{...i,altBoundary:!0}),a=TI(o,r.floating);return{data:{escapedOffsets:a,escaped:kI(a)}}}default:return{}}}}},L6=new Set(["left","top"]);async function Hce(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=ia(r),a=Ld(r),l=co(r)==="y",c=L6.has(o)?-1:1,u=i&&l?-1:1,d=sa(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:b}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof b=="number"&&(f=a==="end"?b*-1:b),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const zce=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await Hce(e,t);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},Wce=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s,platform:i}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:y=>{let{x:v,y:_}=y;return{x:v,y:_}}},...c}=sa(t,e),u={x:r,y:n},d=await i.detectOverflow(e,c),h=co(ia(s)),f=tk(h);let b=u[f],m=u[h];if(o){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",_=b+d[y],x=b-d[v];b=kS(_,b,x)}if(a){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",_=m+d[y],x=m-d[v];m=kS(_,m,x)}const g=l.fn({...e,[f]:b,[h]:m});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[f]:o,[h]:a}}}}}},Vce=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=sa(t,e),u={x:r,y:n},d=co(s),h=tk(d);let f=u[h],b=u[d];const m=sa(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const _=h==="y"?"height":"width",x=i.reference[h]-i.floating[_]+g.mainAxis,w=i.reference[h]+i.reference[_]-g.mainAxis;f<x?f=x:f>w&&(f=w)}if(c){var y,v;const _=h==="y"?"width":"height",x=L6.has(ia(s)),w=i.reference[d]-i.floating[_]+(x&&((y=o.offset)==null?void 0:y[d])||0)+(x?0:g.crossAxis),S=i.reference[d]+i.reference[_]+(x?0:((v=o.offset)==null?void 0:v[d])||0)-(x?g.crossAxis:0);b<w?b=w:b>S&&(b=S)}return{[h]:f,[d]:b}}}},Gce=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=sa(t,e),u=await o.detectOverflow(e,c),d=ia(s),h=Ld(s),f=co(s)==="y",{width:b,height:m}=i.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g=h==="end"?"top":"bottom");const v=m-u.top-u.bottom,_=b-u.left-u.right,x=nl(m-u[g],v),w=nl(b-u[y],_),S=!e.middlewareData.shift;let T=x,E=w;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(E=_),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(T=v),S&&!h){const A=As(u.left,0),I=As(u.right,0),P=As(u.top,0),D=As(u.bottom,0);f?E=b-2*(A!==0||I!==0?A+I:As(u.left,u.right)):T=m-2*(P!==0||D!==0?P+D:As(u.top,u.bottom))}await l({...e,availableWidth:E,availableHeight:T});const C=await o.getDimensions(a.floating);return b!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}};function Sv(){return typeof window<"u"}function Md(t){return M6(t)?(t.nodeName||"").toLowerCase():"#document"}function Ds(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Co(t){var e;return(e=(M6(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function M6(t){return Sv()?t instanceof Node||t instanceof Ds(t).Node:!1}function Ti(t){return Sv()?t instanceof Element||t instanceof Ds(t).Element:!1}function Eo(t){return Sv()?t instanceof HTMLElement||t instanceof Ds(t).HTMLElement:!1}function AI(t){return!Sv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ds(t).ShadowRoot}const qce=new Set(["inline","contents"]);function Vp(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=ki(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!qce.has(s)}const Kce=new Set(["table","td","th"]);function Yce(t){return Kce.has(Md(t))}const Xce=[":popover-open",":modal"];function Ev(t){return Xce.some(e=>{try{return t.matches(e)}catch{return!1}})}const Jce=["transform","translate","scale","rotate","perspective"],Zce=["transform","translate","scale","rotate","perspective","filter"],Qce=["paint","layout","strict","content"];function sk(t){const e=ik(),r=Ti(t)?ki(t):t;return Jce.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||Zce.some(n=>(r.willChange||"").includes(n))||Qce.some(n=>(r.contain||"").includes(n))}function eue(t){let e=sl(t);for(;Eo(e)&&!dd(e);){if(sk(e))return e;if(Ev(e))return null;e=sl(e)}return null}function ik(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tue=new Set(["html","body","#document"]);function dd(t){return tue.has(Md(t))}function ki(t){return Ds(t).getComputedStyle(t)}function Cv(t){return Ti(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function sl(t){if(Md(t)==="html")return t;const e=t.assignedSlot||t.parentNode||AI(t)&&t.host||Co(t);return AI(e)?e.host:e}function j6(t){const e=sl(t);return dd(e)?t.ownerDocument?t.ownerDocument.body:t.body:Eo(e)&&Vp(e)?e:j6(e)}function Yf(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=j6(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),o=Ds(s);if(i){const a=RS(o);return e.concat(o,o.visualViewport||[],Vp(s)?s:[],a&&r?Yf(a):[])}return e.concat(s,Yf(s,[],r))}function RS(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function F6(t){const e=ki(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Eo(t),i=s?t.offsetWidth:r,o=s?t.offsetHeight:n,a=Ob(r)!==i||Ob(n)!==o;return a&&(r=i,n=o),{width:r,height:n,$:a}}function ok(t){return Ti(t)?t:t.contextElement}function Uu(t){const e=ok(t);if(!Eo(e))return vo(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=F6(e);let o=(i?Ob(r.width):r.width)/n,a=(i?Ob(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const rue=vo(0);function B6(t){const e=Ds(t);return!ik()||!e.visualViewport?rue:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function nue(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Ds(t)?!1:e}function gc(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=ok(t);let o=vo(1);e&&(n?Ti(n)&&(o=Uu(n)):o=Uu(t));const a=nue(i,r,n)?B6(i):vo(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const h=Ds(i),f=n&&Ti(n)?Ds(n):n;let b=h,m=RS(b);for(;m&&n&&f!==b;){const g=Uu(m),y=m.getBoundingClientRect(),v=ki(m),_=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,x=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,d*=g.y,l+=_,c+=x,b=Ds(m),m=RS(b)}}return Mb({width:u,height:d,x:l,y:c})}function Tv(t,e){const r=Cv(t).scrollLeft;return e?e.left+r:gc(Co(t)).left+r}function $6(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-Tv(t,r),s=r.top+e.scrollTop;return{x:n,y:s}}function sue(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",o=Co(n),a=e?Ev(e.floating):!1;if(n===o||a&&i)return r;let l={scrollLeft:0,scrollTop:0},c=vo(1);const u=vo(0),d=Eo(n);if((d||!d&&!i)&&((Md(n)!=="body"||Vp(o))&&(l=Cv(n)),Eo(n))){const f=gc(n);c=Uu(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const h=o&&!d&&!i?$6(o,l):vo(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:r.y*c.y-l.scrollTop*c.y+u.y+h.y}}function iue(t){return Array.from(t.getClientRects())}function oue(t){const e=Co(t),r=Cv(t),n=t.ownerDocument.body,s=As(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=As(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Tv(t);const a=-r.scrollTop;return ki(n).direction==="rtl"&&(o+=As(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}const RI=25;function aue(t,e){const r=Ds(t),n=Co(t),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=ik();(!u||u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Tv(n);if(c<=0){const u=n.ownerDocument,d=u.body,h=getComputedStyle(d),f=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,b=Math.abs(n.clientWidth-d.clientWidth-f);b<=RI&&(i-=b)}else c<=RI&&(i+=c);return{width:i,height:o,x:a,y:l}}const lue=new Set(["absolute","fixed"]);function cue(t,e){const r=gc(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=Eo(t)?Uu(t):vo(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=n*i.y;return{width:o,height:a,x:l,y:c}}function PI(t,e,r){let n;if(e==="viewport")n=aue(t,r);else if(e==="document")n=oue(Co(t));else if(Ti(e))n=cue(e,r);else{const s=B6(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Mb(n)}function U6(t,e){const r=sl(t);return r===e||!Ti(r)||dd(r)?!1:ki(r).position==="fixed"||U6(r,e)}function uue(t,e){const r=e.get(t);if(r)return r;let n=Yf(t,[],!1).filter(a=>Ti(a)&&Md(a)!=="body"),s=null;const i=ki(t).position==="fixed";let o=i?sl(t):t;for(;Ti(o)&&!dd(o);){const a=ki(o),l=sk(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&lue.has(s.position)||Vp(o)&&!l&&U6(t,o))?n=n.filter(u=>u!==o):s=a,o=sl(o)}return e.set(t,n),n}function due(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const o=[...r==="clippingAncestors"?Ev(e)?[]:uue(e,this._c):[].concat(r),n],a=o[0],l=o.reduce((c,u)=>{const d=PI(e,u,s);return c.top=As(d.top,c.top),c.right=nl(d.right,c.right),c.bottom=nl(d.bottom,c.bottom),c.left=As(d.left,c.left),c},PI(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function hue(t){const{width:e,height:r}=F6(t);return{width:e,height:r}}function fue(t,e,r){const n=Eo(e),s=Co(e),i=r==="fixed",o=gc(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=vo(0);function c(){l.x=Tv(s)}if(n||!n&&!i)if((Md(e)!=="body"||Vp(s))&&(a=Cv(e)),n){const f=gc(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&c();i&&!n&&s&&c();const u=s&&!n&&!i?$6(s,a):vo(0),d=o.left+a.scrollLeft-l.x-u.x,h=o.top+a.scrollTop-l.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function Tx(t){return ki(t).position==="static"}function II(t,e){if(!Eo(t)||ki(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Co(t)===r&&(r=r.ownerDocument.body),r}function H6(t,e){const r=Ds(t);if(Ev(t))return r;if(!Eo(t)){let s=sl(t);for(;s&&!dd(s);){if(Ti(s)&&!Tx(s))return s;s=sl(s)}return r}let n=II(t,e);for(;n&&Yce(n)&&Tx(n);)n=II(n,e);return n&&dd(n)&&Tx(n)&&!sk(n)?r:n||eue(t)||r}const pue=async function(t){const e=this.getOffsetParent||H6,r=this.getDimensions,n=await r(t.floating);return{reference:fue(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function mue(t){return ki(t).direction==="rtl"}const gue={convertOffsetParentRelativeRectToViewportRelativeRect:sue,getDocumentElement:Co,getClippingRect:due,getOffsetParent:H6,getElementRects:pue,getClientRects:iue,getDimensions:hue,getScale:Uu,isElement:Ti,isRTL:mue};function z6(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function bue(t,e){let r=null,n;const s=Co(t);function i(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(a||e(),!h||!f)return;const b=yg(d),m=yg(s.clientWidth-(u+h)),g=yg(s.clientHeight-(d+f)),y=yg(u),_={rootMargin:-b+"px "+-m+"px "+-g+"px "+-y+"px",threshold:As(0,nl(1,l))||1};let x=!0;function w(S){const T=S[0].intersectionRatio;if(T!==l){if(!x)return o();T?o(!1,T):n=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!z6(c,t.getBoundingClientRect())&&o(),x=!1}try{r=new IntersectionObserver(w,{..._,root:s.ownerDocument})}catch{r=new IntersectionObserver(w,_)}r.observe(t)}return o(!0),i}function yue(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=ok(t),u=s||i?[...c?Yf(c):[],...Yf(e)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const d=c&&a?bue(c,r):null;let h=-1,f=null;o&&(f=new ResizeObserver(y=>{let[v]=y;v&&v.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var _;(_=f)==null||_.observe(e)})),r()}),c&&!l&&f.observe(c),f.observe(e));let b,m=l?gc(t):null;l&&g();function g(){const y=gc(t);m&&!z6(m,y)&&r(),m=y,b=requestAnimationFrame(g)}return r(),()=>{var y;u.forEach(v=>{s&&v.removeEventListener("scroll",r),i&&v.removeEventListener("resize",r)}),d?.(),(y=f)==null||y.disconnect(),f=null,l&&cancelAnimationFrame(b)}}const vue=zce,_ue=Wce,xue=$ce,wue=Gce,Sue=Uce,NI=Bce,Eue=Vce,Cue=(t,e,r)=>{const n=new Map,s={platform:gue,...r},i={...s.platform,_c:n};return Fce(t,e,{...s,platform:i})};var Tue=typeof document<"u",kue=function(){},M0=Tue?k.useLayoutEffect:kue;function jb(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!jb(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!jb(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function W6(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function DI(t,e){const r=W6(t);return Math.round(e*r)/r}function kx(t){const e=k.useRef(t);return M0(()=>{e.current=t}),e}function Aue(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=k.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=k.useState(n);jb(h,n)||f(n);const[b,m]=k.useState(null),[g,y]=k.useState(null),v=k.useCallback(K=>{K!==S.current&&(S.current=K,m(K))},[]),_=k.useCallback(K=>{K!==T.current&&(T.current=K,y(K))},[]),x=i||b,w=o||g,S=k.useRef(null),T=k.useRef(null),E=k.useRef(u),C=l!=null,A=kx(l),I=kx(s),P=kx(c),D=k.useCallback(()=>{if(!S.current||!T.current)return;const K={placement:e,strategy:r,middleware:h};I.current&&(K.platform=I.current),Cue(S.current,T.current,K).then(L=>{const O={...L,isPositioned:P.current!==!1};R.current&&!jb(E.current,O)&&(E.current=O,UM.flushSync(()=>{d(O)}))})},[h,e,r,I,P]);M0(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(K=>({...K,isPositioned:!1})))},[c]);const R=k.useRef(!1);M0(()=>(R.current=!0,()=>{R.current=!1}),[]),M0(()=>{if(x&&(S.current=x),w&&(T.current=w),x&&w){if(A.current)return A.current(x,w,D);D()}},[x,w,D,A,C]);const F=k.useMemo(()=>({reference:S,floating:T,setReference:v,setFloating:_}),[v,_]),G=k.useMemo(()=>({reference:x,floating:w}),[x,w]),z=k.useMemo(()=>{const K={position:r,left:0,top:0};if(!G.floating)return K;const L=DI(G.floating,u.x),O=DI(G.floating,u.y);return a?{...K,transform:"translate("+L+"px, "+O+"px)",...W6(G.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:L,top:O}},[r,a,G.floating,u.x,u.y]);return k.useMemo(()=>({...u,update:D,refs:F,elements:G,floatingStyles:z}),[u,D,F,G,z])}const Rue=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?NI({element:n.current,padding:s}).fn(r):{}:n?NI({element:n,padding:s}).fn(r):{}}}},Pue=(t,e)=>({...vue(t),options:[t,e]}),Iue=(t,e)=>({..._ue(t),options:[t,e]}),Nue=(t,e)=>({...Eue(t),options:[t,e]}),Due=(t,e)=>({...xue(t),options:[t,e]}),Oue=(t,e)=>({...wue(t),options:[t,e]}),Lue=(t,e)=>({...Sue(t),options:[t,e]}),Mue=(t,e)=>({...Rue(t),options:[t,e]});var jue="Arrow",V6=k.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return p.jsx(Ft.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});V6.displayName=jue;var Fue=V6,ak="Popper",[G6,jd]=ai(ak),[Bue,q6]=G6(ak),K6=t=>{const{__scopePopper:e,children:r}=t,[n,s]=k.useState(null);return p.jsx(Bue,{scope:e,anchor:n,onAnchorChange:s,children:r})};K6.displayName=ak;var Y6="PopperAnchor",X6=k.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=q6(Y6,r),o=k.useRef(null),a=Sr(e,o),l=k.useRef(null);return k.useEffect(()=>{const c=l.current;l.current=n?.current||o.current,c!==l.current&&i.onAnchorChange(l.current)}),n?null:p.jsx(Ft.div,{...s,ref:a})});X6.displayName=Y6;var lk="PopperContent",[$ue,Uue]=G6(lk),J6=k.forwardRef((t,e)=>{const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:b,...m}=t,g=q6(lk,r),[y,v]=k.useState(null),_=Sr(e,J=>v(J)),[x,w]=k.useState(null),S=S4(x),T=S?.width??0,E=S?.height??0,C=n+(i!=="center"?"-"+i:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},I=Array.isArray(c)?c:[c],P=I.length>0,D={padding:A,boundary:I.filter(zue),altBoundary:P},{refs:R,floatingStyles:F,placement:G,isPositioned:z,middlewareData:K}=Aue({strategy:"fixed",placement:C,whileElementsMounted:(...J)=>yue(...J,{animationFrame:f==="always"}),elements:{reference:g.anchor},middleware:[Pue({mainAxis:s+E,alignmentAxis:o}),l&&Iue({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Nue():void 0,...D}),l&&Due({...D}),Oue({...D,apply:({elements:J,rects:j,availableWidth:Y,availableHeight:Q})=>{const{width:ie,height:re}=j.reference,pe=J.floating.style;pe.setProperty("--radix-popper-available-width",`${Y}px`),pe.setProperty("--radix-popper-available-height",`${Q}px`),pe.setProperty("--radix-popper-anchor-width",`${ie}px`),pe.setProperty("--radix-popper-anchor-height",`${re}px`)}}),x&&Mue({element:x,padding:a}),Wue({arrowWidth:T,arrowHeight:E}),h&&Lue({strategy:"referenceHidden",...D})]}),[L,O]=eB(G),$=So(b);ra(()=>{z&&$?.()},[z,$]);const H=K.arrow?.x,U=K.arrow?.y,ee=K.arrow?.centerOffset!==0,[X,ge]=k.useState();return ra(()=>{y&&ge(window.getComputedStyle(y).zIndex)},[y]),p.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:z?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[K.transformOrigin?.x,K.transformOrigin?.y].join(" "),...K.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx($ue,{scope:r,placedSide:L,onArrowChange:w,arrowX:H,arrowY:U,shouldHideArrow:ee,children:p.jsx(Ft.div,{"data-side":L,"data-align":O,...m,ref:_,style:{...m.style,animation:z?void 0:"none"}})})})});J6.displayName=lk;var Z6="PopperArrow",Hue={top:"bottom",right:"left",bottom:"top",left:"right"},Q6=k.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=Uue(Z6,n),o=Hue[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(Fue,{...s,ref:r,style:{...s.style,display:"block"}})})});Q6.displayName=Z6;function zue(t){return t!==null}var Wue=t=>({name:"transformOrigin",options:t,fn(e){const{placement:r,rects:n,middlewareData:s}=e,o=s.arrow?.centerOffset!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=eB(r),d={start:"0%",center:"50%",end:"100%"}[u],h=(s.arrow?.x??0)+a/2,f=(s.arrow?.y??0)+l/2;let b="",m="";return c==="bottom"?(b=o?d:`${h}px`,m=`${-l}px`):c==="top"?(b=o?d:`${h}px`,m=`${n.floating.height+l}px`):c==="right"?(b=`${-l}px`,m=o?d:`${f}px`):c==="left"&&(b=`${n.floating.width+l}px`,m=o?d:`${f}px`),{data:{x:b,y:m}}}});function eB(t){const[e,r="center"]=t.split("-");return[e,r]}var ck=K6,kv=X6,uk=J6,dk=Q6,Vue=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Gue="VisuallyHidden",tB=k.forwardRef((t,e)=>p.jsx(Ft.span,{...t,ref:e,style:{...Vue,...t.style}}));tB.displayName=Gue;var que=tB,[Av]=ai("Tooltip",[jd]),Rv=jd(),rB="TooltipProvider",Kue=700,PS="tooltip.open",[Yue,hk]=Av(rB),Fb=t=>{const{__scopeTooltip:e,delayDuration:r=Kue,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=t,o=k.useRef(!0),a=k.useRef(!1),l=k.useRef(0);return k.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),p.jsx(Yue,{scope:e,isOpenDelayedRef:o,delayDuration:r,onOpen:k.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:k.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};Fb.displayName=rB;var Xf="Tooltip",[Xue,Gp]=Av(Xf),nB=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=hk(Xf,t.__scopeTooltip),c=Rv(e),[u,d]=k.useState(null),h=yo(),f=k.useRef(0),b=o??l.disableHoverableContent,m=a??l.delayDuration,g=k.useRef(!1),[y,v]=yl({prop:n,defaultProp:s??!1,onChange:T=>{T?(l.onOpen(),document.dispatchEvent(new CustomEvent(PS))):l.onClose(),i?.(T)},caller:Xf}),_=k.useMemo(()=>y?g.current?"delayed-open":"instant-open":"closed",[y]),x=k.useCallback(()=>{window.clearTimeout(f.current),f.current=0,g.current=!1,v(!0)},[v]),w=k.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),S=k.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{g.current=!0,v(!0),f.current=0},m)},[m,v]);return k.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),p.jsx(ck,{...c,children:p.jsx(Xue,{scope:e,contentId:h,open:y,stateAttribute:_,trigger:u,onTriggerChange:d,onTriggerEnter:k.useCallback(()=>{l.isOpenDelayedRef.current?S():x()},[l.isOpenDelayedRef,S,x]),onTriggerLeave:k.useCallback(()=>{b?w():(window.clearTimeout(f.current),f.current=0)},[w,b]),onOpen:x,onClose:w,disableHoverableContent:b,children:r})})};nB.displayName=Xf;var IS="TooltipTrigger",sB=k.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Gp(IS,r),i=hk(IS,r),o=Rv(r),a=k.useRef(null),l=Sr(e,a,s.onTriggerChange),c=k.useRef(!1),u=k.useRef(!1),d=k.useCallback(()=>c.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(kv,{asChild:!0,...o,children:p.jsx(Ft.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:it(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:it(t.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:it(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:it(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:it(t.onBlur,s.onClose),onClick:it(t.onClick,s.onClose)})})});sB.displayName=IS;var fk="TooltipPortal",[Jue,Zue]=Av(fk,{forceMount:void 0}),iB=t=>{const{__scopeTooltip:e,forceMount:r,children:n,container:s}=t,i=Gp(fk,e);return p.jsx(Jue,{scope:e,forceMount:r,children:p.jsx(Jn,{present:r||i.open,children:p.jsx(zp,{asChild:!0,container:s,children:n})})})};iB.displayName=fk;var hd="TooltipContent",oB=k.forwardRef((t,e)=>{const r=Zue(hd,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=t,o=Gp(hd,t.__scopeTooltip);return p.jsx(Jn,{present:n||o.open,children:o.disableHoverableContent?p.jsx(aB,{side:s,...i,ref:e}):p.jsx(Que,{side:s,...i,ref:e})})}),Que=k.forwardRef((t,e)=>{const r=Gp(hd,t.__scopeTooltip),n=hk(hd,t.__scopeTooltip),s=k.useRef(null),i=Sr(e,s),[o,a]=k.useState(null),{trigger:l,onClose:c}=r,u=s.current,{onPointerInTransitChange:d}=n,h=k.useCallback(()=>{a(null),d(!1)},[d]),f=k.useCallback((b,m)=>{const g=b.currentTarget,y={x:b.clientX,y:b.clientY},v=nde(y,g.getBoundingClientRect()),_=sde(y,v),x=ide(m.getBoundingClientRect()),w=ade([..._,...x]);a(w),d(!0)},[d]);return k.useEffect(()=>()=>h(),[h]),k.useEffect(()=>{if(l&&u){const b=g=>f(g,u),m=g=>f(g,l);return l.addEventListener("pointerleave",b),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",b),u.removeEventListener("pointerleave",m)}}},[l,u,f,h]),k.useEffect(()=>{if(o){const b=m=>{const g=m.target,y={x:m.clientX,y:m.clientY},v=l?.contains(g)||u?.contains(g),_=!ode(y,o);v?h():_&&(h(),c())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[l,u,o,c,h]),p.jsx(aB,{...t,ref:i})}),[ede,tde]=Av(Xf,{isInside:!1}),rde=Lte("TooltipContent"),aB=k.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Gp(hd,r),c=Rv(r),{onClose:u}=l;return k.useEffect(()=>(document.addEventListener(PS,u),()=>document.removeEventListener(PS,u)),[u]),k.useEffect(()=>{if(l.trigger){const d=h=>{h.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),p.jsx(Hp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(uk,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(rde,{children:n}),p.jsx(ede,{scope:r,isInside:!0,children:p.jsx(que,{id:l.contentId,role:"tooltip",children:s||n})})]})})});oB.displayName=hd;var lB="TooltipArrow",cB=k.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Rv(r);return tde(lB,r).isInside?null:p.jsx(dk,{...s,...n,ref:e})});cB.displayName=lB;function nde(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function sde(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function ide(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function ode(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,d=l.x,h=l.y;u>n!=h>n&&r<(d-c)*(n-u)/(h-u)+c&&(s=!s)}return s}function ade(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),lde(e)}function lde(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var uB=Fb,cde=nB,ude=sB,dde=iB,hde=oB,fde=cB;const fd=k.forwardRef(({tooltip:t,children:e,sideOffset:r=5,className:n="",arrowClassName:s="",tooltipStyle:i={},position:o="top",maxWidth:a=250,delay:l=0},c)=>p.jsx(uB,{children:p.jsxs(cde,{delayDuration:l,children:[p.jsx(ude,{asChild:!0,children:e}),p.jsx(dde,{children:p.jsxs(hde,{side:o,className:`
                z-[2000]
                px-2.5
                py-1.5
                max-h-[300px]
                select-none
                rounded-md
                bg-bolt-elements-background-depth-3
                text-bolt-elements-textPrimary
                text-sm
                leading-tight
                shadow-lg
                animate-in
                fade-in-0
                zoom-in-95
                data-[state=closed]:animate-out
                data-[state=closed]:fade-out-0
                data-[state=closed]:zoom-out-95
                ${n}
              `,sideOffset:r,style:{maxWidth:a,...i},children:[p.jsx("div",{className:"break-words",children:t}),p.jsx(fde,{className:`
                  fill-bolt-elements-background-depth-3
                  ${s}
                `,width:12,height:6})]})})]})})),vg="<boltArtifact",OI="</boltArtifact>",pde="<boltAction",LI="</boltAction>",MI="<bolt-quick-actions>",jI="</bolt-quick-actions>",xa=Qt("MessageParser");function FI(t){const e=/^\s*```\w*\n([\s\S]*?)\n\s*```\s*$/,r=t.match(e);return r?r[1]:t}function BI(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}class mde{constructor(e={}){this._options=e}#r=new Map;#e=0;parse(e,r){let n=this.#r.get(e);n||(n={position:0,insideAction:!1,insideArtifact:!1,artifactCounter:0,currentAction:{content:""},actionId:0},this.#r.set(e,n));let s="",i=n.position,o=!1;for(;i<r.length;){if(r.startsWith(MI,i)){const a=r.indexOf(jI,i);if(a!==-1){const l=r.slice(i+MI.length,a),c=/<bolt-quick-action([^>]*)>([\s\S]*?)<\/bolt-quick-action>/g;let u;const d=[];for(;(u=c.exec(l))!==null;){const h=u[1],f=u[2],b=this.#t(h,"type"),m=this.#t(h,"message"),g=this.#t(h,"path"),y=this.#t(h,"href");d.push(bde({type:b||"",message:m||"",path:g||"",href:y||""},f))}s+=yde(d),i=a+jI.length;continue}}if(n.insideArtifact){const a=n.currentArtifact;if(a===void 0&&Es("Artifact not initialized"),n.insideAction){const l=r.indexOf(LI,i),c=n.currentAction;if(l!==-1){c.content+=r.slice(i,l);let u=c.content.trim();"type"in c&&c.type==="file"&&(c.filePath.endsWith(".md")||(u=FI(u),u=BI(u)),u+=`
`),c.content=u,this._options.callbacks?.onActionClose?.({artifactId:a.id,messageId:e,actionId:String(n.actionId-1),action:c}),n.insideAction=!1,n.currentAction={content:""},i=l+LI.length}else{if("type"in c&&c.type==="file"){let u=r.slice(i);c.filePath.endsWith(".md")||(u=FI(u),u=BI(u)),this._options.callbacks?.onActionStream?.({artifactId:a.id,messageId:e,actionId:String(n.actionId-1),action:{...c,content:u,filePath:c.filePath}})}break}}else{const l=r.indexOf(pde,i),c=r.indexOf(OI,i);if(l!==-1&&(c===-1||l<c)){const u=r.indexOf(">",l);if(u!==-1)n.insideAction=!0,n.currentAction=this.#n(r,l,u),this._options.callbacks?.onActionOpen?.({artifactId:a.id,messageId:e,actionId:String(n.actionId++),action:n.currentAction}),i=u+1;else break}else if(c!==-1)this._options.callbacks?.onArtifactClose?.({messageId:e,artifactId:a.id,...a}),n.insideArtifact=!1,n.currentArtifact=void 0,i=c+OI.length;else break}}else if(r[i]==="<"&&r[i+1]!=="/"){let a=i,l="";for(;a<r.length&&l.length<vg.length;){if(l+=r[a],l===vg){const c=r[a+1];if(c&&c!==">"&&c!==" "){s+=r.slice(i,a+1),i=a+1;break}const u=r.indexOf(">",a);if(u!==-1){const d=r.slice(i,u+1),h=this.#t(d,"title"),f=this.#t(d,"type"),b=`${e}-${n.artifactCounter++}`;h||xa.warn("Artifact title missing"),b||xa.warn("Artifact id missing"),n.insideArtifact=!0;const m={id:b,title:h,type:f};n.currentArtifact=m,this._options.callbacks?.onArtifactOpen?.({messageId:e,artifactId:m.id,...m});const g=this._options.artifactElement??gde;s+=g({messageId:e,artifactId:b}),i=u+1}else o=!0;break}else if(!vg.startsWith(l)){s+=r.slice(i,a+1),i=a+1;break}a++}if(a===r.length&&vg.startsWith(l))break}else s+=r[i],i++;if(o)break}return n.position=i,s}reset(){this.#r.clear()}#n(e,r,n){const s=e.slice(r,n+1),i=this.#t(s,"type"),o={type:i,content:""};if(i==="supabase"){const a=this.#t(s,"operation");if(!a||!["migration","query"].includes(a))throw xa.warn(`Invalid or missing operation for Supabase action: ${a}`),new Error(`Invalid Supabase operation: ${a}`);if(o.operation=a,a==="migration"){const l=this.#t(s,"filePath");if(!l)throw xa.warn("Migration requires a filePath"),new Error("Migration requires a filePath");o.filePath=l}}else if(i==="file"){const a=this.#t(s,"filePath");a||xa.debug("File path not specified"),o.filePath=a}else if(i==="plan"){const a=this.#t(s,"title");a&&(o.planTitle=a)}else if(i==="task-update"){const a=this.#t(s,"taskId"),l=this.#t(s,"status");a||xa.warn("Task update requires a taskId"),l||xa.warn("Task update requires a status"),o.taskId=a||"",o.taskStatus=l||"not-started"}else["shell","start","build"].includes(i)||xa.warn(`Unknown action type '${i}'`);return o}#t(e,r){const n=e.match(new RegExp(`${r}="([^"]*)"`,"i"));return n?n[1]:void 0}}const gde=t=>`<div ${['class="__boltArtifact__"',...Object.entries(t).map(([r,n])=>`data-${dB(r)}=${JSON.stringify(n)}`)].join(" ")}></div>`;function dB(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function bde(t,e){return`<button ${['class="__boltQuickAction__"','data-bolt-quick-action="true"',...Object.entries(t).map(([n,s])=>`data-${dB(n)}=${JSON.stringify(s)}`)].join(" ")}>${e}</button>`}function yde(t){return`<div class="__boltQuickAction__" data-bolt-quick-action="true">${t.join("")}</div>`}const Il=Qt("EnhancedMessageParser");class vde extends mde{_processedCodeBlocks=new Map;_artifactCounter=0;_lastResetOccurred=!1;_commandPatternMap=new Map([["npm",/^(npm|yarn|pnpm)\s+(install|run|start|build|dev|test|init|create|add|remove)/],["git",/^(git)\s+(add|commit|push|pull|clone|status|checkout|branch|merge|rebase|init|remote|fetch|log)/],["docker",/^(docker|docker-compose)\s+/],["build",/^(make|cmake|gradle|mvn|cargo|go)\s+/],["network",/^(curl|wget|ping|ssh|scp|rsync)\s+/],["webcontainer",/^(cat|chmod|cp|echo|hostname|kill|ln|ls|mkdir|mv|ps|pwd|rm|rmdir|xxd)\s*/],["webcontainer-extended",/^(alias|cd|clear|env|false|getconf|head|sort|tail|touch|true|uptime|which)\s*/],["interpreters",/^(node|python|python3|java|go|rust|ruby|php|perl)\s+/],["text-processing",/^(grep|sed|awk|cut|tr|sort|uniq|wc|diff)\s+/],["archive",/^(tar|zip|unzip|gzip|gunzip)\s+/],["process",/^(ps|top|htop|kill|killall|jobs|nohup)\s*/],["system",/^(df|du|free|uname|whoami|id|groups|date|uptime)\s*/]]);constructor(e={}){super(e)}didResetOccur(){return this._lastResetOccurred}parse(e,r){this._lastResetOccurred=!1;let n=super.parse(e,r);if(!this._hasDetectedArtifacts(r)){const s=this._detectAndWrapCodeBlocks(e,r);s!==r&&(Il.debug("Detected code blocks to wrap, resetting parser for message:",e),Il.debug("Input length:",r.length,"Enhanced input length:",s.length),this._lastResetOccurred=!0,this.reset(),n=super.parse(e,s),Il.debug("After reset, output length:",n.length,"resetFlag:",this._lastResetOccurred))}return n}_hasDetectedArtifacts(e){return e.includes("<boltArtifact")||e.includes("</boltArtifact>")}_detectAndWrapCodeBlocks(e,r){this._processedCodeBlocks.has(e)||this._processedCodeBlocks.set(e,new Set);const n=this._processedCodeBlocks.get(e);let s=r;s=this._detectAndWrapShellCommands(e,s,n);const i=[{regex:/(?:^|\n)([\/\w\-\.]+\.\w+):?\s*\n+```(\w*)\n([\s\S]*?)```/gim,type:"file_path"},{regex:/(?:create|update|modify|edit|write|add|generate|here'?s?|file:?)\s+(?:a\s+)?(?:new\s+)?(?:file\s+)?(?:called\s+)?[`'"]*([\/\w\-\.]+\.\w+)[`'"]*:?\s*\n+```(\w*)\n([\s\S]*?)```/gi,type:"explicit_create"},{regex:/```(\w*)\n(?:\/\/|#|<!--)\s*(?:file:?|filename:?)\s*([\/\w\-\.]+\.\w+).*?\n([\s\S]*?)```/gi,type:"comment_filename"},{regex:/(?:in|for|update)\s+[`'"]*([\/\w\-\.]+\.\w+)[`'"]*:?\s*\n+```(\w*)\n([\s\S]*?)```/gi,type:"in_filename"},{regex:/```(?:json|jsx?|tsx?|html?|vue|svelte)\n(\{[\s\S]*?"(?:name|version|scripts|dependencies|devDependencies)"[\s\S]*?\}|<\w+[^>]*>[\s\S]*?<\/\w+>[\s\S]*?)```/gi,type:"structured_file"}];for(const a of i)s=s.replace(a.regex,(l,...c)=>{const u=this._hashBlock(l);if(n.has(u))return l;let d,h,f;if(a.type==="comment_filename"?[h,d,f]=c:a.type==="structured_file"?(f=c[0],h=a.regex.source.includes("json")?"json":"jsx",d=this._inferFileNameFromContent(f,h)):[d,h,f]=c,this._isShellCommand(f,h))return n.add(u),Il.debug("Auto-wrapped code block as shell command instead of file"),this._wrapInShellAction(f,e);if(d=this._normalizeFilePath(d),!this._isValidFilePath(d)||!this._hasFileContext(s,l)&&!(a.type==="explicit_create"||a.type==="comment_filename"||a.type==="file_path"))return l;n.add(u);const b=`artifact-${e}-${this._artifactCounter++}`,m=this._wrapInArtifact(b,d,f);return Il.debug(`Auto-wrapped code block as file: ${d}`),m});const o=/(?:create|write|save|generate)\s+(?:a\s+)?(?:new\s+)?file\s+(?:at\s+)?[`'"]*([\/\w\-\.]+\.\w+)[`'"]*\s+with\s+(?:the\s+)?(?:following\s+)?content:?\s*\n([\s\S]+?)(?=\n\n|\n(?:create|write|save|generate|now|next|then|finally)|$)/gi;return s=s.replace(o,(a,l,c)=>{const u=this._hashBlock(a);if(n.has(u)||(l=this._normalizeFilePath(l),!this._isValidFilePath(l)))return a;n.add(u);const d=`artifact-${e}-${this._artifactCounter++}`;c=c.trim();const h=this._wrapInArtifact(d,l,c);return Il.debug(`Auto-wrapped file operation: ${l}`),h}),s}_wrapInArtifact(e,r,n){const s=r.split("/").pop()||"File";return`<boltArtifact id="${e}" title="${s}" type="bundled">
<boltAction type="file" filePath="${r}">
${n}
</boltAction>
</boltArtifact>`}_wrapInShellAction(e,r){return`<boltArtifact id="${`artifact-${r}-${this._artifactCounter++}`}" title="Shell Command" type="shell">
<boltAction type="shell">
${e.trim()}
</boltAction>
</boltArtifact>`}_normalizeFilePath(e){return e=e.replace(/[`'"]/g,"").trim(),e=e.replace(/\\/g,"/"),e.startsWith("./")&&(e=e.substring(2)),!e.startsWith("/")&&!e.startsWith(".")&&(e="/"+e),e}_isValidFilePath(e){if(!/\.\w+$/.test(e)||!/^[\/\w\-\.]+$/.test(e))return!1;const s=[/^\/?(tmp|temp|test|example)\//i,/\.(tmp|temp|bak|backup|old|orig)$/i,/^\/?(output|result|response)\//i,/^code_\d+\.(sh|bash|zsh)$/i,/^(untitled|new|demo|sample)\d*\./i];for(const i of s)if(i.test(e))return!1;return!0}_hasFileContext(e,r){const n=e.indexOf(r);if(n===-1)return!1;const s=e.substring(Math.max(0,n-200),n),i=e.substring(n+r.length,n+r.length+100),o=[/\b(create|write|save|add|update|modify|edit|generate)\s+(a\s+)?(new\s+)?file/i,/\b(file|filename|filepath)\s*[:=]/i,/\b(in|to|as)\s+[`'"]?[\w\-\.\/]+\.[a-z]{2,4}[`'"]?/i,/\b(component|module|class|function)\s+\w+/i],a=s+i;return o.some(l=>l.test(a))}_inferFileNameFromContent(e,r){const n=e.match(/(?:function|class|const|export\s+default\s+function|export\s+function)\s+(\w+)/);return n?`/components/${n[1]}${r==="jsx"?".jsx":r==="tsx"?".tsx":".js"}`:e.includes("function App")||e.includes("const App")?"/App.jsx":`/component-${Date.now()}.jsx`}_hashBlock(e){let r=0;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);r=(r<<5)-r+s,r=r&r}return r.toString(36)}_isShellCommand(e,r){if(!["bash","sh","shell","zsh","fish","powershell","ps1"].includes(r.toLowerCase()))return!1;const i=e.trim(),o=i.split(`
`).map(a=>a.trim()).filter(Boolean);return o.length===0||this._looksLikeScriptContent(i)?!1:o.length===1?this._isSingleLineCommand(o[0]):this._isCommandSequence(o)}_isSingleLineCommand(e){if(/[;&|]{1,2}/.test(e))return e.split(/[;&|]{1,2}/).map(o=>o.trim()).every(o=>o.length>0&&!this._looksLikeScriptContent(o));const n=[/^sudo\s+/,/^time\s+/,/^nohup\s+/,/^watch\s+/,/^env\s+\w+=\w+\s+/];let s=e;for(const i of n)s=s.replace(i,"");for(const[,i]of this._commandPatternMap)if(i.test(s))return!0;return this._isSimpleCommand(s)}_isCommandSequence(e){return e.filter(n=>n.length>0&&!n.startsWith("#")&&(this._isSingleLineCommand(n)||this._isSimpleCommand(n))).length/e.length>.7}_isSimpleCommand(e){const r=e.split(/\s+/);if(r.length===0)return!1;const n=r[0];return e.includes("=")&&!e.startsWith("export ")&&!e.startsWith("env ")&&!n.includes("=")||e.includes("function ")||e.match(/^\w+\s*\(\s*\)/)||/^(if|for|while|case|function|until|select)\s/.test(e)||e.includes("<<")||e.startsWith("EOF")||e.startsWith("END")||e.includes('"""')||e.includes("'''")?!1:[/^[a-z][a-z0-9-_]*$/i,/^\.\/[a-z0-9-_./]+$/i,/^\/[a-z0-9-_./]+$/i,/^[a-z][a-z0-9-_]*\s+-.+/i].some(o=>o.test(n))}_looksLikeScriptContent(e){const r=e.trim().split(`
`),n=[/^#!/,/function\s+\w+/,/^\w+\s*\(\s*\)\s*\{/,/^(if|for|while|case)\s+.*?(then|do|in)/,/^\w+=[^=].*$/,/^(local|declare|readonly)\s+/,/^(source|\.)\s+/,/^(exit|return)\s+\d+/];for(const s of r){const i=s.trim();if(!(i.length===0||i.startsWith("#"))&&n.some(o=>o.test(i)))return!0}return!1}_detectAndWrapShellCommands(e,r,n){const s=/```(bash|sh|shell|zsh|fish|powershell|ps1)\n([\s\S]*?)```/gi;return r.replace(s,(i,o,a)=>{const l=this._hashBlock(i);return n.has(l)?i:this._isShellCommand(a,o)?(n.add(l),Il.debug(`Auto-wrapped shell code block as command: ${o}`),this._wrapInShellAction(a,e)):i})}reset(){super.reset(),this._processedCodeBlocks.clear(),this._artifactCounter=0}}const Ji=Qt("useMessageParser"),$I=new Set;let Ax=null,_g=null;const Rx=new vde({callbacks:{onArtifactOpen:t=>{Ji.trace("onArtifactOpen",t),Pe.showWorkbench.set(!0),Pe.addArtifact(t)},onArtifactClose:t=>{Ji.trace("onArtifactClose"),Pe.updateArtifact(t,{closed:!0});const e=t.artifactId?Pe.artifacts.get()[t.artifactId]:void 0,r=t.messageId||e?.id||"";$I.has(r)||(_g={messageId:r,title:e?.title||"Project Update"},Ax&&clearTimeout(Ax),Ax=setTimeout(()=>{if(!_g)return;const{messageId:n,title:s}=_g;$I.add(n);const i=Pe.files.get(),o={};for(const[a,l]of Object.entries(i))l?.type==="file"&&!l.isBinary&&(o[a]={content:l.content||"",type:"file"});Yo.capturePreviewThumbnail().then(a=>{Yo.createVersion(n,s,`Completed: ${s}`,o,a),Ji.trace("Version created for message:",n)}),_g=null},500))},onActionOpen:t=>{Ji.trace("onActionOpen",t.action);const e=Pe.isRestoringSession.get(),r=Pe.isReloadedMessage(t.messageId);if(t.action.type==="file"&&e&&r){Ji.debug("Skipping file action during restore for reloaded message:",t.messageId);return}t.action.type==="file"&&Pe.addAction(t)},onActionClose:t=>{Ji.trace("onActionClose",t.action);const e=Pe.isRestoringSession.get(),r=Pe.isReloadedMessage(t.messageId);if(t.action.type==="file"&&e&&r){Ji.debug("Skipping file action close during restore for reloaded message:",t.messageId);return}t.action.type!=="file"&&Pe.addAction(t),Pe.runAction(t)},onActionStream:t=>{Ji.trace("onActionStream",t.action);const e=Pe.isRestoringSession.get(),r=Pe.isReloadedMessage(t.messageId);t.action.type==="file"&&e&&r||Pe.runAction(t,!0)}}}),_de=t=>Array.isArray(t.content)?t.content.find(e=>e.type==="text")?.text||"":t.content;function xde(){const[t,e]=k.useState({}),r=k.useCallback((n,s)=>{let i=!1;s||(i=!0,Rx.reset());for(const[o,a]of n.entries())if(a.role==="assistant"||a.role==="user"){const l=Rx.parse(a.id,_de(a)),c=Rx.didResetOccur(),u=i||c;c&&(Ji.debug("Parser reset detected for message",a.id,"shouldReplace:",u),Ji.debug("New content length:",l.length)),e(d=>({...d,[o]:u?l:(d[o]||"")+l}))}},[]);return{parsedMessages:t,parseMessages:r}}const UI=Qt("usePromptEnhancement");function wde(){const[t,e]=k.useState(!1),[r,n]=k.useState(!1);return{enhancingPrompt:t,promptEnhanced:r,enhancePrompt:async(o,a,l,c,u)=>{e(!0),n(!1);const d={message:o,model:l,provider:c};u&&(d.apiKeys=u);const f=(await fetch("/api/enhancer",{method:"POST",body:JSON.stringify(d)})).body?.getReader(),b=o;if(f){const m=new TextDecoder;let g="",y;try{for(a("");;){const{value:v,done:_}=await f.read();if(_)break;g+=m.decode(v),UI.trace("Set input",g),a(g)}}catch(v){y=v,a(b)}finally{y&&UI.error(y),e(!1),n(!0),setTimeout(()=>{a(g)})}}},resetEnhancer:()=>{e(!1),n(!1)}}}const Sde=["input","textarea"];class Ede{#r=new EventTarget;dispatch(e){this.#r.dispatchEvent(new Event(e))}on(e,r){return this.#r.addEventListener(e,r),()=>{this.#r.removeEventListener(e,r)}}}const hB=new Ede;function Cde(){const t=He(ise);k.useEffect(()=>{const e=r=>{if(!(document.activeElement&&Sde.includes(document.activeElement.tagName.toLowerCase())&&!r.altKey&&!r.metaKey&&!r.ctrlKey))for(const[n,s]of Object.entries(t)){const i=s.key.toLowerCase()===r.key.toLowerCase()||`Key${s.key.toUpperCase()}`===r.code,a=(s.ctrlOrMetaKey?O2&&r.metaKey||!O2&&r.ctrlKey:!0)&&(s.ctrlKey===void 0||s.ctrlKey===r.ctrlKey)&&(s.metaKey===void 0||s.metaKey===r.metaKey)&&(s.shiftKey===void 0||s.shiftKey===r.shiftKey)&&(s.altKey===void 0||s.altKey===r.altKey);if(i&&a){s.isPreventDefault&&(r.preventDefault(),r.stopPropagation()),hB.dispatch(n),s.action();break}}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t])}const Tde={damping:.7,stiffness:.05,mass:1.25},kde=70,Ade=1e3/60,Rde=350;let Pv=!1;globalThis.document?.addEventListener("mousedown",()=>{Pv=!0});globalThis.document?.addEventListener("mouseup",()=>{Pv=!1});globalThis.document?.addEventListener("click",()=>{Pv=!1});const Pde=(t={})=>{const[e,r]=k.useState(!1),[n,s]=k.useState(t.initial!==!1),[i,o]=k.useState(!1),a=k.useRef(null);a.current=t;const l=k.useCallback(()=>{if(!Pv)return!1;const v=window.getSelection();if(!v||!v.rangeCount)return!1;const _=v.getRangeAt(0);return _.commonAncestorContainer.contains(g.current)||g.current?.contains(_.commonAncestorContainer)},[]),c=k.useCallback(v=>{d.isAtBottom=v,s(v)},[]),u=k.useCallback(v=>{d.escapedFromLock=v,r(v)},[]),d=k.useMemo(()=>{let v;return{escapedFromLock:e,isAtBottom:n,resizeDifference:0,accumulated:0,velocity:0,listeners:new Set,get scrollTop(){return g.current?.scrollTop??0},set scrollTop(_){g.current&&(g.current.scrollTop=_,d.ignoreScrollToTop=g.current.scrollTop)},get targetScrollTop(){return!g.current||!y.current?0:g.current.scrollHeight-1-g.current.clientHeight},get calculatedTargetScrollTop(){if(!g.current||!y.current)return 0;const{targetScrollTop:_}=this;if(!t.targetScrollTop)return _;if(v?.targetScrollTop===_)return v.calculatedScrollTop;const x=Math.max(Math.min(t.targetScrollTop(_,{scrollElement:g.current,contentElement:y.current}),_),0);return v={targetScrollTop:_,calculatedScrollTop:x},requestAnimationFrame(()=>{v=void 0}),x},get scrollDifference(){return this.calculatedTargetScrollTop-this.scrollTop},get isNearBottom(){return this.scrollDifference<=kde}}},[]),h=k.useCallback((v={})=>{typeof v=="string"&&(v={animation:v}),v.preserveScrollPosition||c(!0);const _=Date.now()+(Number(v.wait)||0),x=Ix(a.current,v.animation),{ignoreEscapes:w=!1}=v;let S,T=d.calculatedTargetScrollTop;v.duration instanceof Promise?v.duration.finally(()=>{S=Date.now()}):S=_+(v.duration??0);const E=async()=>{const C=new Promise(requestAnimationFrame).then(()=>{if(!d.isAtBottom)return d.animation=void 0,!1;const{scrollTop:A}=d,I=performance.now(),P=(I-(d.lastTick??I))/Ade;if(d.animation||={behavior:x,promise:C,ignoreEscapes:w},d.animation.behavior===x&&(d.lastTick=I),l()||_>Date.now())return E();if(A<Math.min(T,d.calculatedTargetScrollTop)){if(d.animation?.behavior===x){if(x==="instant")return d.scrollTop=d.calculatedTargetScrollTop,E();d.velocity=(x.damping*d.velocity+x.stiffness*d.scrollDifference)/x.mass,d.accumulated+=d.velocity*P,d.scrollTop+=d.accumulated,d.scrollTop!==A&&(d.accumulated=0)}return E()}return S>Date.now()?(T=d.calculatedTargetScrollTop,E()):(d.animation=void 0,d.scrollTop<d.calculatedTargetScrollTop?h({animation:Ix(a.current,a.current.resize),ignoreEscapes:w,duration:Math.max(0,S-Date.now())||void 0}):d.isAtBottom)});return C.then(A=>(requestAnimationFrame(()=>{d.animation||(d.lastTick=void 0,d.velocity=0)}),A))};return v.wait!==!0&&(d.animation=void 0),d.animation?.behavior===x?d.animation.promise:E()},[c,l,d]),f=k.useCallback(()=>{u(!0),c(!1)},[u,c]),b=k.useCallback(({target:v})=>{if(v!==g.current)return;const{scrollTop:_,ignoreScrollToTop:x}=d;let{lastScrollTop:w=_}=d;d.lastScrollTop=_,d.ignoreScrollToTop=void 0,x&&x>_&&(w=x),o(d.isNearBottom),setTimeout(()=>{if(d.resizeDifference||_===x)return;if(l()){u(!0),c(!1);return}const S=_>w,T=_<w;if(d.animation?.ignoreEscapes){d.scrollTop=w;return}T&&(u(!0),c(!1)),S&&u(!1),!d.escapedFromLock&&d.isNearBottom&&c(!0)},1)},[u,c,l,d]),m=k.useCallback(({target:v,deltaY:_})=>{let x=v;for(;!["scroll","auto"].includes(getComputedStyle(x).overflow);){if(!x.parentElement)return;x=x.parentElement}x===g.current&&_<0&&g.current.scrollHeight>g.current.clientHeight&&!d.animation?.ignoreEscapes&&(u(!0),c(!1))},[u,c,d]),g=HI(v=>{g.current?.removeEventListener("scroll",b),g.current?.removeEventListener("wheel",m),v?.addEventListener("scroll",b,{passive:!0}),v?.addEventListener("wheel",m,{passive:!0})},[]),y=HI(v=>{if(d.resizeObserver?.disconnect(),!v)return;let _;d.resizeObserver=new ResizeObserver(([x])=>{const{height:w}=x.contentRect,S=w-(_??w);if(d.resizeDifference=S,d.scrollTop>d.targetScrollTop&&(d.scrollTop=d.targetScrollTop),o(d.isNearBottom),S>=0){const T=Ix(a.current,_?a.current.resize:a.current.initial);h({animation:T,wait:!0,preserveScrollPosition:!0,duration:T==="instant"?void 0:Rde})}else d.isNearBottom&&(u(!1),c(!0));_=w,requestAnimationFrame(()=>{setTimeout(()=>{d.resizeDifference===S&&(d.resizeDifference=0)},1)})}),d.resizeObserver?.observe(v)},[]);return{contentRef:y,scrollRef:g,scrollToBottom:h,stopScroll:f,isAtBottom:n||i,isNearBottom:i,escapedFromLock:e,state:d}};function HI(t,e){const r=k.useCallback(n=>(r.current=n,t(n)),e);return r}const Px=new Map;function Ix(...t){const e={...Tde};let r=!1;for(const s of t){if(s==="instant"){r=!0;continue}typeof s=="object"&&(r=!1,e.damping=s.damping??e.damping,e.stiffness=s.stiffness??e.stiffness,e.mass=s.mass??e.mass)}const n=JSON.stringify(e);return Px.has(n)||Px.set(n,Object.freeze(e)),r?"instant":Px.get(n)}const fB=k.createContext(null),Ide=typeof window<"u"?k.useLayoutEffect:k.useEffect;function NS({instance:t,children:e,resize:r,initial:n,mass:s,damping:i,stiffness:o,targetScrollTop:a,contextRef:l,...c}){const u=k.useRef(null),d=k.useCallback((w,S)=>(x?.targetScrollTop??a)?.(w,S)??w,[a]),h=Pde({mass:s,damping:i,stiffness:o,resize:r,initial:n,targetScrollTop:d}),{scrollRef:f,contentRef:b,scrollToBottom:m,stopScroll:g,isAtBottom:y,escapedFromLock:v,state:_}=t??h,x=k.useMemo(()=>({scrollToBottom:m,stopScroll:g,scrollRef:f,isAtBottom:y,escapedFromLock:v,contentRef:b,state:_,get targetScrollTop(){return u.current},set targetScrollTop(w){u.current=w}}),[m,y,b,f,g,v,_]);return k.useImperativeHandle(l,()=>x,[x]),Ide(()=>{f.current&&getComputedStyle(f.current).overflow==="visible"&&(f.current.style.overflow="auto")},[]),p.jsx(fB.Provider,{value:x,children:p.jsx("div",{...c,children:typeof e=="function"?e(x):e})})}function Nde({children:t,...e}){const r=pB();return p.jsx("div",{ref:r.scrollRef,className:"w-full h-auto",children:p.jsx("div",{...e,ref:r.contentRef,children:typeof t=="function"?t(r):t})})}NS.Content=Nde;function pB(){const t=k.useContext(fB);if(!t)throw new Error("use-stick-to-bottom component context must be used within a StickToBottom component");return t}function mB({initialDescription:t=ro.get(),customChatId:e,syncWithGlobalStore:r}){const n=He(zn),[s,i]=k.useState(!1),[o,a]=k.useState(t),[l,c]=k.useState();k.useEffect(()=>{c(e||n)},[e,n]),k.useEffect(()=>{a(t)},[t]);const u=k.useCallback(()=>i(y=>!y),[]),d=k.useCallback(y=>{a(y.target.value)},[]),h=k.useCallback(async()=>{const y=Db.get();if(!y||!l)return t;try{return(await cd(y,l))?.description||t}catch(v){return console.error("Failed to fetch latest description:",v),t}},[tr,l,t]),f=k.useCallback(async()=>{const y=await h();a(y),u()},[h,u]),b=k.useCallback(y=>{const v=y.trim();if(v===t)return u(),!1;const _=v.length>0&&v.length<=100,x=/^[a-zA-Z0-9\s\-_.,!?()[\]{}'"]+$/.test(v);return _?x?!0:(Ie.error("Description can only contain letters, numbers, spaces, and basic punctuation."),!1):(Ie.error("Description must be between 1 and 100 characters."),!1)},[]),m=k.useCallback(async y=>{if(y.preventDefault(),!!b(o)){try{const v=Db.get();if(!v){Ie.error("Chat persistence is not available");return}if(!l){Ie.error("Chat Id is not available");return}await Qse(v,l,o),r&&ro.set(o),Ie.success("Chat description updated successfully")}catch(v){Ie.error("Failed to update chat description: "+v.message)}u()}},[o,l,t,e,r,u]),g=k.useCallback(async y=>{y.key==="Escape"&&await f()},[f]);return{editing:s,handleChange:d,handleBlur:f,handleSubmit:m,handleKeyDown:g,currentDescription:o,toggleEditMode:u}}const Dde=(t=1024)=>{const[e,r]=k.useState(window.innerWidth<t);return k.useEffect(()=>{const n=()=>r(window.innerWidth<t);return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[t]),e},zI=typeof window<"u"?localStorage.getItem("github_connection"):null,Ode=zI?JSON.parse(zI):{user:null,token:"",tokenType:"classic"},DS=bt(Ode),Nx=bt(!1);bt(!1);const Dx=t=>{const r={...DS.get(),...t};DS.set(r),typeof window<"u"&&localStorage.setItem("github_connection",JSON.stringify(r))},WI="github_connection";function Lde(){const t=He(DS),e=He(Nx),[r,n]=k.useState(null),[s,i]=k.useState(!0);k.useEffect(()=>{o()},[]);const o=k.useCallback(async()=>{i(!0),n(null);try{if(t?.user){i(!1);return}t?.token&&(!t.user||!t.stats)&&await a(t),i(!1)}catch(h){console.error("Error loading saved connection:",h),n("Failed to load saved connection"),i(!1),localStorage.removeItem(WI)}},[t]),a=k.useCallback(async h=>{if(h.token)try{const f=await fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github.v3+json",Authorization:`${h.tokenType==="classic"?"token":"Bearer"} ${h.token}`,"User-Agent":"Bolt.diy"}});if(!f.ok)throw new Error(`API error: ${f.status}`);const b=await f.json(),m={...h,user:b};Dx(m)}catch(f){console.error("Error refreshing connection data:",f)}},[]),l=k.useCallback(async(h,f)=>{if(console.log("useGitHubConnection.connect called with tokenType:",f),!h.trim()){console.log("Token validation failed - empty token"),n("Token is required");return}console.log("Setting isConnecting to true"),Nx.set(!0),n(null);try{console.log("Making API request to GitHub...");const b=await fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github.v3+json",Authorization:`${f==="classic"?"token":"Bearer"} ${h}`,"User-Agent":"Bolt.diy"}});if(console.log("GitHub API response status:",b.status,b.statusText),!b.ok)throw new Error(`Authentication failed: ${b.status} ${b.statusText}`);const m=await b.json(),g={user:m,token:h,tokenType:f};Et.set("githubToken",h),Et.set("githubUsername",m.login),Et.set("git:github.com",JSON.stringify({username:h,password:"x-oauth-basic"})),Dx(g),Ie.success(`Connected to GitHub as ${m.login}`)}catch(b){console.error("Failed to connect to GitHub:",b);const m=b instanceof Error?b.message:"Failed to connect to GitHub";throw n(m),Ie.error(`Failed to connect: ${m}`),b}finally{Nx.set(!1)}},[]),c=k.useCallback(()=>{localStorage.removeItem(WI),Et.remove("githubToken"),Et.remove("githubUsername"),Et.remove("git:github.com"),Dx({user:null,token:"",tokenType:"classic"}),n(null),Ie.success("Disconnected from GitHub")},[]),u=k.useCallback(async()=>{if(!t?.token)throw new Error("No connection to refresh");i(!0),n(null);try{await a(t)}catch(h){throw console.error("Error refreshing connection:",h),n("Failed to refresh connection"),h}finally{i(!1)}},[t,a]),d=k.useCallback(async()=>{if(!t)return!1;try{return t.token?(await fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github.v3+json",Authorization:`${t.tokenType==="classic"?"token":"Bearer"} ${t.token}`,"User-Agent":"Bolt.diy"}})).ok:(await fetch("/api/github-user")).ok}catch(h){return console.error("Connection test failed:",h),!1}},[t]);return{isConnected:!!t?.user,isLoading:s,isConnecting:e,connection:t,error:r,isServerSide:!t?.token,connect:l,disconnect:c,refreshConnection:u,testConnection:d}}const VI=Qt("GitHubApiService");class Mde{_config;_baseURL;constructor(e={}){this._config=e,this._baseURL=e.baseURL||"https://api.github.com"}configure(e){this._config={...this._config,...e},this._baseURL=e.baseURL||this._baseURL}async _makeRequestInternal(e,r={}){if(!this._config.token)throw new Error("GitHub token is required. Call configure() first.");const n=await fetch(`${this._baseURL}${e}`,{headers:{Accept:"application/vnd.github.v3+json",Authorization:`${this._config.tokenType==="classic"?"token":"Bearer"} ${this._config.token}`,"User-Agent":"Bolt.diy",...r.headers},...r});if(!n.ok){const s=await n.json().catch(()=>({message:n.statusText}));throw{message:s.message||n.statusText,status:n.status,code:s.code}}return n.json()}async getAuthenticatedUser(){return this._makeRequestInternal("/user")}async getAllUserRepositories(){const e=[];let r=1,n=!0;for(;n;){const s=await this._makeRequestInternal(`/user/repos?per_page=100&page=${r}&sort=updated`);e.push(...s),n=s.length===100,r++}return e}async getDetailedRepositoryInfo(e,r){const[n,s]=await Promise.all([this._makeRequestInternal(`/repos/${e}/${r}`),this.getRepositoryBranches(e,r).catch(()=>[])]),[i,o,a]=await Promise.allSettled([this._getRepositoryContributorsCount(e,r),this._getRepositoryIssuesCount(e,r),this._getRepositoryPullRequestsCount(e,r)]);return{...n,branches_count:s.length,contributors_count:i.status==="fulfilled"?i.value:void 0,issues_count:o.status==="fulfilled"?o.value:void 0,pull_requests_count:a.status==="fulfilled"?a.value:void 0}}async getRepositoryBranches(e,r){return this._makeRequestInternal(`/repos/${e}/${r}/branches`)}async _getRepositoryContributorsCount(e,r){const n=await fetch(`${this._baseURL}/repos/${e}/${r}/contributors?per_page=1`,{headers:{Accept:"application/vnd.github.v3+json",Authorization:`${this._config.tokenType==="classic"?"token":"Bearer"} ${this._config.token}`,"User-Agent":"Bolt.diy"}});if(!n.ok)return 0;const s=n.headers.get("Link");if(s){const o=s.match(/page=(\d+)>; rel="last"/);return o?parseInt(o[1],10):1}const i=await n.json();return Array.isArray(i)?i.length:0}async _getRepositoryIssuesCount(e,r){const n=await fetch(`${this._baseURL}/repos/${e}/${r}/issues?state=all&per_page=1`,{headers:{Accept:"application/vnd.github.v3+json",Authorization:`${this._config.tokenType==="classic"?"token":"Bearer"} ${this._config.token}`,"User-Agent":"Bolt.diy"}});if(!n.ok)return 0;const s=n.headers.get("Link");if(s){const o=s.match(/page=(\d+)>; rel="last"/);return o?parseInt(o[1],10):1}const i=await n.json();return Array.isArray(i)?i.length:0}async _getRepositoryPullRequestsCount(e,r){const n=await fetch(`${this._baseURL}/repos/${e}/${r}/pulls?state=all&per_page=1`,{headers:{Accept:"application/vnd.github.v3+json",Authorization:`${this._config.tokenType==="classic"?"token":"Bearer"} ${this._config.token}`,"User-Agent":"Bolt.diy"}});if(!n.ok)return 0;const s=n.headers.get("Link");if(s){const o=s.match(/page=(\d+)>; rel="last"/);return o?parseInt(o[1],10):1}const i=await n.json();return Array.isArray(i)?i.length:0}async getDetailedRepositoriesInfo(e,r=5,n=100){const s=[];for(let i=0;i<e.length;i+=r){const o=e.slice(i,i+r);(await Promise.allSettled(o.map(l=>{const[c,u]=l.full_name.split("/");return this.getDetailedRepositoryInfo(c,u)}))).forEach((l,c)=>{l.status==="fulfilled"?s.push(l.value):(VI.error(`Failed to fetch details for ${o[c].full_name}:`,l.reason),s.push(o[c]))}),i+r<e.length&&await new Promise(l=>setTimeout(l,n))}return s}calculateRepositoryStats(e){const r={},n={},s={};let i=0,o=0,a=0,l=0,c=0,u=0,d=0,h=0;e.forEach(b=>{b.language&&(r[b.language]=(r[b.language]||0)+1,n[b.language]=(n[b.language]||0)+(b.size||0),s[b.language]=(s[b.language]||0)+1),i+=b.branches_count||0,o+=b.contributors_count||0,a+=b.issues_count||0,l+=b.pull_requests_count||0;const m=Math.floor((Date.now()-new Date(b.updated_at).getTime())/(1e3*60*60*24));b.archived?d++:b.fork?h++:m<7?u++:m<30&&b.stargazers_count>0&&c++});const f=Object.entries(n).map(([b,m])=>({language:b,bytes:m,repos:s[b]||0})).sort((b,m)=>m.bytes-b.bytes).slice(0,20);return{languages:r,mostUsedLanguages:f,totalBranches:i,totalContributors:o,totalIssues:a,totalPullRequests:l,repositoryHealth:{healthy:c,active:u,archived:d,forked:h}}}async generateComprehensiveStats(e){try{const r=await this.getAllUserRepositories(),n=await this.getDetailedRepositoriesInfo(r),s=this.calculateRepositoryStats(n),[i,o]=await Promise.allSettled([this._makeRequestInternal("/user/orgs"),this._makeRequestInternal(`/users/${e.login}/events?per_page=10`)]),a=n.reduce((d,h)=>d+h.stargazers_count,0),l=n.reduce((d,h)=>d+h.forks_count,0),c=n.filter(d=>d.private).length;return{repos:n,recentActivity:o.status==="fulfilled"?o.value.slice(0,10).map(d=>({id:d.id,type:d.type,repo:{name:d.repo.name,url:d.repo.url},created_at:d.created_at,payload:d.payload||{}})):[],languages:s.languages,totalGists:e.public_gists||0,publicRepos:e.public_repos||0,privateRepos:c,stars:a,forks:l,followers:e.followers||0,publicGists:e.public_gists||0,privateGists:0,lastUpdated:new Date().toISOString(),totalStars:a,totalForks:l,organizations:i.status==="fulfilled"?i.value:[],totalBranches:s.totalBranches,totalContributors:s.totalContributors,totalIssues:s.totalIssues,totalPullRequests:s.totalPullRequests,mostUsedLanguages:s.mostUsedLanguages}}catch(r){throw VI.error("Error generating comprehensive stats:",r),r}}async fetchUser(e,r="classic"){this.configure({token:e,tokenType:r});const[n,s]=await Promise.all([this.getAuthenticatedUser(),this._makeRequestInternal("/rate_limit")]);return{user:n,rateLimit:s}}async fetchStats(e,r="classic"){this.configure({token:e,tokenType:r});const n=await this.getAuthenticatedUser();return this.generateComprehensiveStats(n)}clearCache(){}clearUserCache(e){}}const GI=new Mde,xg="github_stats_cache",jde=30*60*1e3;function Fde(t,e={},r=!1){const{autoFetch:n=!1,refreshInterval:s,cacheTimeout:i=jde}=e,[o,a]=k.useState({stats:null,isLoading:!1,isRefreshing:!1,error:null,lastUpdated:null}),l=k.useMemo(()=>t?.token?(GI.configure({token:t.token,tokenType:t.tokenType}),GI):null,[t?.token,t?.tokenType]),c=k.useMemo(()=>!o.lastUpdated||!o.stats?!0:Date.now()-o.lastUpdated.getTime()>i,[o.lastUpdated,o.stats,i]);k.useEffect(()=>{u()},[]),k.useEffect(()=>{if(n&&t&&(!o.stats||c)&&(r||l)){const m=setTimeout(()=>{h().catch(g=>{console.warn("Failed to auto-fetch stats:",g)})},100);return()=>clearTimeout(m)}},[n,t,l,o.stats,c,r]),k.useEffect(()=>{if(!s||!t)return;const m=setInterval(()=>{c&&f()},s);return()=>clearInterval(m)},[s,t,c]);const u=k.useCallback(()=>{try{const m=localStorage.getItem(xg);if(m){const{stats:g,timestamp:y,userLogin:v}=JSON.parse(m);v===t?.user?.login&&a(_=>({..._,stats:g,lastUpdated:new Date(y)}))}}catch(m){console.error("Error loading cached stats:",m),localStorage.removeItem(xg)}},[t?.user?.login]),d=k.useCallback((m,g)=>{try{const y={stats:m,timestamp:Date.now(),userLogin:g};localStorage.setItem(xg,JSON.stringify(y))}catch(y){console.error("Error saving stats to cache:",y)}},[]),h=k.useCallback(async()=>{if(!t?.user){a(m=>({...m,error:"GitHub connection not available",isLoading:!1,isRefreshing:!1}));return}a(m=>({...m,isLoading:!m.stats,isRefreshing:!!m.stats,error:null}));try{let m;if(r||!t.token){const y=await fetch("/api/github-stats");if(!y.ok){if(y.status===401)throw new Error("GitHub authentication required");const v=await y.json();throw new Error(v.error||"Failed to fetch stats from server")}m=await y.json()}else{if(!l)throw new Error("GitHub API service not available");m=await l.generateComprehensiveStats(t.user)}const g=new Date;if(a(y=>({...y,stats:m,isLoading:!1,isRefreshing:!1,lastUpdated:g,error:null})),d(m,t.user.login),t.stats?.lastUpdated!==m.lastUpdated){const y={...t,stats:m};localStorage.setItem("github_connection",JSON.stringify(y))}o.isRefreshing&&Ie.success("GitHub stats updated successfully")}catch(m){console.error("Error fetching GitHub stats:",m);const g=m instanceof Error?m.message:"Failed to fetch GitHub stats";throw a(y=>({...y,isLoading:!1,isRefreshing:!1,error:g})),o.isRefreshing&&Ie.error(`Failed to update GitHub stats: ${g}`),m}},[l,t,d,r]),f=k.useCallback(async()=>{o.isRefreshing||o.isLoading||await h()},[h,o.isRefreshing,o.isLoading]),b=k.useCallback(()=>{a({stats:null,isLoading:!1,isRefreshing:!1,error:null,lastUpdated:null}),localStorage.removeItem(xg)},[]);return{...o,fetchStats:h,refreshStats:f,clearStats:b,isStale:c}}const Bde=t=>({config:t}),$de=5*60*1e3;class Ude{_cache=new Map;set(e,r,n=$de){const s=Date.now();this._cache.set(e,{data:r,timestamp:s,expiresAt:s+n})}get(e){const r=this._cache.get(e);return r?Date.now()>r.expiresAt?(this._cache.delete(e),null):r.data:null}clear(){this._cache.clear()}isExpired(e){const r=this._cache.get(e);return!r||Date.now()>r.expiresAt}}const OS=new Ude;async function Hde(t,e,r=3){let n;for(let s=1;s<=r;s++)try{const i=await fetch(t,e);if(i.status>=400&&i.status<500&&i.status!==429)return i;if(i.status>=500||i.status===429){if(s===r)return i;const o=Math.min(1e3*Math.pow(2,s-1),1e4);await new Promise(a=>setTimeout(a,o));continue}return i}catch(i){if(n=i,s===r)throw n;const o=Math.min(1e3*Math.pow(2,s-1),1e4);await new Promise(a=>setTimeout(a,o))}throw n}class j0{_baseUrl;_token;constructor(e,r="https://gitlab.com"){this._token=e,this._baseUrl=r}get _headers(){return console.log("GitLab API token info:",{tokenLength:this._token.length,tokenPrefix:this._token.substring(0,10)+"...",tokenType:this._token.startsWith("glpat-")?"personal-access-token":"unknown"}),{"Content-Type":"application/json","PRIVATE-TOKEN":this._token}}async _request(e,r={}){const n=`${this._baseUrl}/api/v4${e}`;return Hde(n,{...r,headers:{...this._headers,...r.headers}})}async getUser(){const e=await this._request("/user");if(!e.ok){let i=`Failed to fetch user: ${e.status}`;e.status===401?i="401 Unauthorized: Invalid or expired GitLab access token. Please check your token and ensure it has the required scopes (api, read_repository).":e.status===403?i="403 Forbidden: GitLab access token does not have sufficient permissions.":e.status===404?i="404 Not Found: GitLab API endpoint not found. Please check your GitLab URL configuration.":e.status===429&&(i="429 Too Many Requests: GitLab API rate limit exceeded. Please try again later.");try{const o=await e.json();o.message&&(i+=` Details: ${o.message}`)}catch{}throw new Error(i)}const r=await e.json(),n={limit:parseInt(e.headers.get("ratelimit-limit")||"0"),remaining:parseInt(e.headers.get("ratelimit-remaining")||"0"),reset:parseInt(e.headers.get("ratelimit-reset")||"0")};return{...{...r,avatar_url:r.avatar_url||r.avatarUrl||r.profile_image_url||null},rateLimit:n}}async getProjects(e=!0,r=20,n=50){const s=`projects_${this._token}_${e}_${r}`,i=OS.get(s);if(i)return i;let o=[],a=1;const l=10;for(;a<=l;){const u=await this._request(`/projects?membership=${e}&min_access_level=${r}&per_page=${n}&page=${a}&order_by=updated_at&sort=desc`);if(!u.ok){let h=`Failed to fetch projects: ${u.status} ${u.statusText}`;try{const f=await u.json();console.error("GitLab projects API error:",f),h=`Failed to fetch projects: ${JSON.stringify(f)}`}catch(f){console.error("Could not parse GitLab error response:",f)}throw new Error(h)}const d=await u.json();if(d.length===0||(o=[...o,...d],o.length>=100))break;a++}const c=o.map(u=>({id:u.id,name:u.name,path_with_namespace:u.path_with_namespace,description:u.description,http_url_to_repo:u.http_url_to_repo,star_count:u.star_count,forks_count:u.forks_count,default_branch:u.default_branch,updated_at:u.updated_at,visibility:u.visibility}));return OS.set(s,c),c}async getEvents(e=10){const r=await this._request(`/events?per_page=${e}`);if(!r.ok)throw new Error(`Failed to fetch events: ${r.statusText}`);return(await r.json()).slice(0,5).map(s=>({id:s.id,action_name:s.action_name,project_id:s.project_id,project:s.project,created_at:s.created_at}))}async getGroups(e=10){const r=await this._request(`/groups?min_access_level=${e}`);return r.ok?await r.json():[]}async getSnippets(){const e=await this._request("/snippets");return e.ok?await e.json():[]}async createProject(e,r=!1){const n=e.replace(/[^a-zA-Z0-9-_.]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").toLowerCase(),s=await this._request("/projects",{method:"POST",body:JSON.stringify({name:n,path:n,visibility:r?"private":"public",initialize_with_readme:!1,default_branch:"main",description:"Project created from Bolt.diy"})});if(!s.ok){let i=`Failed to create project: ${s.status} ${s.statusText}`;try{const o=await s.json();o.message&&(typeof o.message=="object"?i=`Failed to create project: ${Object.entries(o.message).map(([l,c])=>`${l}: ${Array.isArray(c)?c.join(", "):c}`).join("; ")}`:i=`Failed to create project: ${o.message}`)}catch(o){console.error("Could not parse error response:",o)}throw new Error(i)}return await s.json()}async getProject(e,r){const n=await this._request(`/projects/${encodeURIComponent(`${e}/${r}`)}`);return n.ok?await n.json():null}async createBranch(e,r,n){const s=await this._request(`/projects/${e}/repository/branches`,{method:"POST",body:JSON.stringify({branch:r,ref:n})});if(!s.ok)throw new Error(`Failed to create branch: ${s.statusText}`);return await s.json()}async commitFiles(e,r){const n=await this._request(`/projects/${e}/repository/commits`,{method:"POST",body:JSON.stringify(r)});if(!n.ok){let s=`Failed to commit files: ${n.status} ${n.statusText}`;try{const i=await n.json();i.message?s=i.message:i.error&&(s=i.error)}catch{}throw new Error(s)}return await n.json()}async getFile(e,r,n){return this._request(`/projects/${e}/repository/files/${encodeURIComponent(r)}?ref=${n}`)}async getProjectByPath(e){try{const r=encodeURIComponent(e),n=await this._request(`/projects/${r}`);if(n.ok)return await n.json();if(n.status===404)return console.log(`Project not found: ${e}`),null;const s=await n.text();throw console.error(`Failed to fetch project ${e}:`,n.status,s),new Error(`Failed to fetch project: ${n.status} ${n.statusText}`)}catch(r){if(r instanceof Error&&(r.message.includes("404")||r.message.includes("Not Found")))return null;throw r}}async updateProjectVisibility(e,r){const n=await this._request(`/projects/${e}`,{method:"PUT",body:JSON.stringify({visibility:r})});if(!n.ok)throw new Error(`Failed to update project visibility: ${n.status} ${n.statusText}`)}async createProjectWithFiles(e,r,n){const s=await this.createProject(e,r);if(Object.keys(n).length>0){await new Promise(a=>setTimeout(a,1e3));const o={branch:"main",commit_message:"Initial commit from Bolt.diy",actions:Object.entries(n).map(([a,l])=>({action:"create",file_path:a,content:l}))};try{await this.commitFiles(s.id,o)}catch(a){console.error("Failed to commit files to new project:",a)}}return s}async updateProjectWithFiles(e,r){if(Object.keys(r).length===0)return;const s={branch:"main",commit_message:"Update from Bolt.diy",actions:Object.entries(r).map(([i,o])=>({action:"create",file_path:i,content:o}))};try{await this.commitFiles(e,s)}catch(i){if(i instanceof Error&&i.message.includes("already exists")){const a={branch:"main",commit_message:"Update from Bolt.diy",actions:Object.entries(r).map(([l,c])=>({action:"update",file_path:l,content:c}))};await this.commitFiles(e,a)}else throw i}}}const zde=Object.freeze(Object.defineProperty({__proto__:null,GitLabApiService:j0,gitlabCache:OS},Symbol.toStringTag,{value:"Module"}));function Wde(t,e,r,n,s){const i=t.reduce((c,u)=>c+(u.star_count||0),0),o=t.reduce((c,u)=>c+(u.forks_count||0),0),a=t.filter(c=>c.visibility==="private").length,l=e.slice(0,5).map(c=>({id:c.id,action_name:c.action_name,project_id:c.project_id,project:c.project,created_at:c.created_at}));return{projects:t,recentActivity:l,totalSnippets:n.length,publicProjects:t.filter(c=>c.visibility==="public").length,privateProjects:a,stars:i,forks:o,followers:s.followers||0,snippets:n.length,groups:r,lastUpdated:new Date().toISOString()}}const Pa="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",Cs=bt({user:null,token:Pa,tokenType:"personal-access-token"}),Bb=bt("https://gitlab.com");function Vde(){try{const t=localStorage.getItem("gitlab_connection");if(t){const e=JSON.parse(t);e.tokenType="personal-access-token",e.gitlabUrl&&Bb.set(e.gitlabUrl),e.user&&Cs.set(e)}}catch(t){console.error("Error initializing GitLab connection:",t),localStorage.removeItem("gitlab_connection")}}typeof window<"u"&&Vde();const Gde=Fr(Cs,t=>!!t.user),qde=Fr(Cs,t=>t);Fr(Cs,t=>t.user);Fr(Cs,t=>t.stats);Fr(Bb,t=>t);class Kde{async connect(e,r="https://gitlab.com"){try{const s=await new j0(e,r).getUser();return Cs.set({user:s,token:e,tokenType:"personal-access-token",gitlabUrl:r}),Et.set("gitlabUsername",s.username),Et.set("gitlabToken",e),Et.set("git:gitlab.com",JSON.stringify({username:s.username,password:e})),Et.set("gitlabUrl",r),localStorage.setItem("gitlab_connection",JSON.stringify({user:s,token:e,tokenType:"personal-access-token",gitlabUrl:r})),Jt.logInfo("Connected to GitLab",{type:"system",message:`Connected to GitLab as ${s.username}`}),{success:!0}}catch(n){return console.error("Failed to connect to GitLab:",n),Jt.logError(`GitLab authentication failed: ${n instanceof Error?n.message:"Unknown error"}`,{type:"system",message:"GitLab authentication failed"}),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async fetchStats(e=!1){const r=Cs.get();if(!r.user||!r.token)throw new Error("Not connected to GitLab");try{const n=new j0(r.token,r.gitlabUrl||"https://gitlab.com"),s=await n.getUser(),i=await n.getProjects(),o=await n.getEvents(),a=await n.getGroups(),l=await n.getSnippets(),c=Wde(i,o,a,l,s);Cs.set({...r,stats:c});const u={...r,stats:c};return localStorage.setItem("gitlab_connection",JSON.stringify(u)),{success:!0,stats:c}}catch(n){return console.error("Error fetching GitLab stats:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}disconnect(){Et.remove("gitlabToken"),Et.remove("gitlabUsername"),Et.remove("git:gitlab.com"),Et.remove("gitlabUrl"),localStorage.removeItem("gitlab_connection"),Cs.set({user:null,token:"",tokenType:"personal-access-token"}),Jt.logInfo("Disconnected from GitLab",{type:"system",message:"Disconnected from GitLab"})}loadSavedConnection(){try{const e=localStorage.getItem("gitlab_connection");if(e){const r=JSON.parse(e);return r.tokenType="personal-access-token",r.gitlabUrl&&Bb.set(r.gitlabUrl),Cs.set(r),r}}catch(e){console.error("Error parsing saved GitLab connection:",e),localStorage.removeItem("gitlab_connection")}return null}setGitLabUrl(e){Bb.set(e)}setToken(e){Cs.set({...Cs.get(),token:e})}async autoConnect(){if(Pa.trim()==="")return{success:!1,error:"No GitLab token found in environment"};try{const r=await new j0(Pa).getUser();return Cs.set({user:r,token:Pa,tokenType:"personal-access-token",gitlabUrl:"https://gitlab.com"}),Et.set("gitlabUsername",r.username),Et.set("gitlabToken",Pa),Et.set("git:gitlab.com",JSON.stringify({username:r.username,password:Pa})),Et.set("gitlabUrl","https://gitlab.com"),localStorage.setItem("gitlab_connection",JSON.stringify({user:r,token:Pa,tokenType:"personal-access-token",gitlabUrl:"https://gitlab.com"})),Jt.logInfo("Auto-connected to GitLab",{type:"system",message:`Auto-connected to GitLab as ${r.username}`}),{success:!0}}catch(e){console.error("Failed to auto-connect to GitLab:",e);const r=e instanceof Error?e.message:"Unknown error";return console.error("GitLab auto-connect error details:",{token:Pa.substring(0,10)+"...",error:r}),Jt.logError(`GitLab auto-connection failed: ${r}`,{type:"system",message:"GitLab auto-connection failed"}),{success:!1,error:r}}}}const wa=new Kde,Ox="gitlab_connection";function Yde(){const t=He(qde),e=He(Gde),[r,n]=k.useState(null),[s,i]=k.useState(!0),[o,a]=k.useState(!1);Bde(t?.token?{token:t.token,baseUrl:t.gitlabUrl||"https://gitlab.com"}:{token:"",baseUrl:"https://gitlab.com"}),k.useEffect(()=>{l()},[]);const l=k.useCallback(async()=>{i(!0),n(null);try{if(t?.user){i(!1);return}const m=localStorage.getItem(Ox);if(m){const g=JSON.parse(m);g.user&&g.token&&(wa.setGitLabUrl(g.gitlabUrl||"https://gitlab.com"),wa.setToken(g.token),await c(g))}i(!1)}catch(m){console.error("Error loading saved connection:",m),n("Failed to load saved connection"),i(!1),localStorage.removeItem(Ox)}},[t]),c=k.useCallback(async m=>{if(m.token)try{const g=m.gitlabUrl||"https://gitlab.com",y=await fetch(`${g}/api/v4/user`,{headers:{"Content-Type":"application/json","PRIVATE-TOKEN":m.token}});if(!y.ok)throw new Error(`API error: ${y.status}`);await y.json(),wa.setGitLabUrl(g),wa.setToken(m.token)}catch(g){console.error("Error refreshing connection data:",g)}},[]),u=k.useCallback(async(m,g="https://gitlab.com")=>{if(!m.trim()){n("Token is required");return}a(!0),n(null);try{console.log("Calling GitLab store connect method...");const y=await wa.connect(m,g);if(!y.success)throw new Error(y.error||"Connection failed");console.log("GitLab connection successful, now fetching stats...");try{const v=await wa.fetchStats(!0);v.success?console.log("GitLab stats fetched successfully:",v.stats):console.error("Failed to fetch GitLab stats:",v.error)}catch(v){console.error("Failed to fetch GitLab stats:",v)}Ie.success("Connected to GitLab successfully!")}catch(y){console.error("Failed to connect to GitLab:",y);const v=y instanceof Error?y.message:"Failed to connect to GitLab";throw n(v),Ie.error(`Failed to connect: ${v}`),y}finally{a(!1)}},[]),d=k.useCallback(()=>{localStorage.removeItem(Ox),Et.remove("gitlabToken"),Et.remove("gitlabUsername"),Et.remove("gitlabUrl"),wa.disconnect(),n(null),Ie.success("Disconnected from GitLab")},[]),h=k.useCallback(async()=>{if(!t?.token)throw new Error("No connection to refresh");i(!0),n(null);try{await c(t)}catch(m){throw console.error("Error refreshing connection:",m),n("Failed to refresh connection"),m}finally{i(!1)}},[t,c]),f=k.useCallback(async()=>{if(!t?.token)return!1;try{const m=t.gitlabUrl||"https://gitlab.com";return(await fetch(`${m}/api/v4/user`,{headers:{"Content-Type":"application/json","PRIVATE-TOKEN":t.token}})).ok}catch(m){return console.error("Connection test failed:",m),!1}},[t]),b=k.useCallback(async()=>{if(!t?.token)throw new Error("No connection to refresh stats");try{const m=await wa.fetchStats(!0);if(!m.success)throw new Error(m.error||"Failed to refresh stats")}catch(m){throw console.error("Error refreshing GitLab stats:",m),m}},[t]);return{isConnected:e,isLoading:s,isConnecting:o,connection:t,error:r,connect:u,disconnect:d,refreshConnection:h,testConnection:f,refreshStats:b}}const zo=typeof globalThis<"u"&&typeof globalThis.localStorage<"u"&&typeof globalThis.localStorage.getItem=="function"?globalThis.localStorage:null,qI=zo?zo.getItem("supabase_connection"):null,KI=zo?zo.getItem("supabaseCredentials"):null,Hu=qI?JSON.parse(qI):{user:null,token:"",stats:void 0,selectedProjectId:void 0,isConnected:!1,project:void 0};if(KI&&!Hu.credentials)try{Hu.credentials=JSON.parse(KI)}catch(t){console.error("Failed to parse saved credentials:",t)}const Ja=bt(Hu),Lx=bt(!1),LS=bt(!1),MS=bt(!1);Hu.token&&!Hu.stats&&$b(Hu.token).catch(console.error);function Fo(t){const e=Ja.get();if(t.user!==void 0||t.token!==void 0){const n=t.user!==void 0?t.user:e.user,s=t.token!==void 0?t.token:e.token;t.isConnected=!!(n&&s)}if(t.selectedProjectId!==void 0)if(t.selectedProjectId&&e.stats?.projects){const n=e.stats.projects.find(s=>s.id===t.selectedProjectId);n?t.project=n:t.project={id:t.selectedProjectId,name:`Project ${t.selectedProjectId.substring(0,8)}...`,region:"unknown",organization_id:"",status:"active",created_at:new Date().toISOString()}}else t.selectedProjectId===""&&(t.project=void 0,t.credentials=void 0);const r={...e,...t};Ja.set(r),t.user||t.token||t.selectedProjectId!==void 0||t.credentials?(zo?.setItem("supabase_connection",JSON.stringify(r)),r.credentials?zo?.setItem("supabaseCredentials",JSON.stringify(r.credentials)):zo?.removeItem("supabaseCredentials")):(zo?.removeItem("supabase_connection"),zo?.removeItem("supabaseCredentials"))}function Xde(){const t="your_supabase_access_token_here";Ja.get().token||(Fo({token:t}),$b(t).catch(console.error))}async function $b(t){LS.set(!0);try{const e=await fetch("/api/supabase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})});if(!e.ok)throw new Error("Failed to fetch projects");const r=await e.json();Fo({user:r.user,stats:r.stats})}catch(e){throw console.error("Failed to fetch Supabase stats:",e),e}finally{LS.set(!1)}}async function Mx(t,e){MS.set(!0);try{const r=await fetch("/api/supabase/variables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:t,token:e})});if(!r.ok)throw new Error("Failed to fetch API keys");const i=(await r.json()).apiKeys.find(o=>o.name==="anon"||o.name==="public");if(i){const o=`https://${t}.supabase.co`;return Fo({credentials:{anonKey:i.api_key,supabaseUrl:o}}),{anonKey:i.api_key,supabaseUrl:o}}return null}catch(r){throw console.error("Failed to fetch project API keys:",r),r}finally{MS.set(!1)}}function Jde(){const t=He(Ja),e=He(Lx),r=He(LS),n=He(MS),[s,i]=k.useState(!1),[o,a]=k.useState(!1);return k.useEffect(()=>{(async()=>{console.log("useSupabaseConnection: Initializing connection...");try{await Xde(),console.log("useSupabaseConnection: Server-side initialization completed")}catch{console.log("useSupabaseConnection: Server-side initialization failed, trying localStorage")}const f=localStorage.getItem("supabase_connection"),b=localStorage.getItem("supabaseCredentials");if(f){console.log("useSupabaseConnection: Loading from localStorage");const m=JSON.parse(f);b&&!m.credentials&&(m.credentials=JSON.parse(b)),Ja.get().user||Fo(m),m.token&&m.selectedProjectId&&!m.credentials&&Mx(m.selectedProjectId,m.token).catch(console.error)}})()},[]),{connection:t,connecting:e,fetchingStats:r,fetchingApiKeys:n,isProjectsExpanded:s,setIsProjectsExpanded:i,isDropdownOpen:o,setIsDropdownOpen:a,handleConnect:async()=>{Lx.set(!0);try{const h=t.token.trim(),f=await fetch("/api/supabase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:h})}),b=await f.json();if(!f.ok)throw new Error(b.error||"Failed to connect");return Fo({user:b.user,token:t.token,stats:b.stats}),Ie.success("Successfully connected to Supabase"),i(!0),!0}catch(h){return console.error("Connection error:",h),Jt.logError("Failed to authenticate with Supabase",{error:h}),Ie.error(h instanceof Error?h.message:"Failed to connect to Supabase"),Fo({user:null,token:""}),!1}finally{Lx.set(!1)}},handleDisconnect:()=>{Fo({user:null,token:""}),Ie.success("Disconnected from Supabase"),a(!1)},selectProject:async h=>{const f=Ja.get();let b;if(h&&f.stats?.projects&&(b=f.stats.projects.find(m=>m.id===h)),Fo({selectedProjectId:h,project:b}),h&&f.token)try{await Mx(h,f.token),Ie.success("Project selected successfully")}catch(m){console.error("Failed to fetch API keys:",m),Ie.error("Selected project but failed to fetch API keys")}else Ie.success("Project selected successfully");a(!1)},handleCreateProject:async()=>{window.open("https://app.supabase.com/new/new-project","_blank")},updateToken:h=>Fo({...t,token:h}),isConnected:!!(t.user&&t.token),fetchProjectApiKeys:h=>t.token?Mx(h,t.token):Promise.reject(new Error("No token available"))}}function Zde({item:t,onDelete:e,onDuplicate:r,exportChat:n,selectionMode:s=!1,isSelected:i=!1,onToggleSelection:o}){const{t:a}=Ms(),{id:l}=mK(),c=l===t.urlId,{editing:u,handleChange:d,handleBlur:h,handleSubmit:f,handleKeyDown:b,currentDescription:m,toggleEditMode:g}=mB({initialDescription:t.description,customChatId:t.id,syncWithGlobalStore:c}),y=k.useCallback(x=>{s&&(x.preventDefault(),x.stopPropagation(),console.log("Item clicked in selection mode:",t.id),o?.(t.id))},[s,t.id,o]),v=k.useCallback(()=>{console.log("Checkbox changed for item:",t.id),o?.(t.id)},[t.id,o]),_=k.useCallback(x=>{x.preventDefault(),x.stopPropagation(),console.log("Delete button clicked for item:",t.id),e&&e(x)},[e,t.id]);return p.jsxs("div",{className:ye("group rounded-lg text-sm text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-3/50 overflow-hidden flex justify-between items-center px-3 py-2.5 transition-colors",{"text-bolt-elements-textPrimary bg-accent-500/10 border-l-2 border-accent-500":c},{"cursor-pointer":s}),onClick:s?y:void 0,children:[s&&p.jsx("div",{className:"flex items-center mr-2",onClick:x=>x.stopPropagation(),children:p.jsx(Uf,{id:`select-${t.id}`,checked:i,onCheckedChange:v,className:"h-4 w-4"})}),u?p.jsxs("form",{onSubmit:f,className:"flex-1 flex items-center gap-2",children:[p.jsx("input",{type:"text",className:"flex-1 bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary rounded-md px-3 py-1.5 text-sm border border-bolt-elements-borderColor focus:outline-none focus:ring-1 focus:ring-accent-500/50",autoFocus:!0,value:m,onChange:d,onBlur:h,onKeyDown:b,"aria-label":a("sidebar.edit_chat_description","Edit chat description")}),p.jsx("button",{type:"submit",className:"i-ph:check h-4 w-4 text-gray-500 hover:text-blue-500 transition-colors",onMouseDown:f,title:a("common.save","Save")})]}):p.jsxs("a",{href:`/chat/${t.urlId}`,className:"flex w-full relative truncate block",onClick:s?y:void 0,children:[p.jsx(fd,{tooltip:m,children:p.jsx("span",{className:"truncate pr-24",children:m})}),p.jsx("div",{className:ye("absolute right-0 top-0 bottom-0 flex items-center bg-transparent px-2 transition-colors"),children:p.jsxs("div",{className:"flex items-center gap-2.5 text-gray-400 dark:text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx(wg,{toolTipContent:a("common.export","Export"),icon:"i-ph:download-simple h-4 w-4",onClick:x=>{x.preventDefault(),n(t.id)}}),r&&p.jsx(wg,{toolTipContent:a("common.duplicate","Duplicate"),icon:"i-ph:copy h-4 w-4",onClick:x=>{x.preventDefault(),r?.(t.id)}}),p.jsx(wg,{toolTipContent:a("common.rename","Rename"),icon:"i-ph:pencil-fill h-4 w-4",onClick:x=>{x.preventDefault(),g()}}),p.jsx(wg,{toolTipContent:a("common.delete","Delete"),icon:"i-ph:trash h-4 w-4",className:"hover:text-red-500 dark:hover:text-red-400",onClick:_})]})})]})]})}const wg=k.forwardRef(({toolTipContent:t,icon:e,className:r,onClick:n},s)=>p.jsx(fd,{tooltip:t,position:"bottom",sideOffset:4,children:p.jsx("button",{ref:s,type:"button",className:`text-gray-400 dark:text-gray-500 hover:text-blue-500 dark:hover:text-blue-400 transition-colors ${e} ${r||""}`,onClick:n,title:t})}));function zt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function oa(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Qde(t,e){const r=zt(t);return isNaN(e)?oa(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const gB=6048e5,ehe=864e5,Sg=43200,YI=1440;let the={};function qp(){return the}function bc(t,e){const r=qp(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=zt(t),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Ub(t){return bc(t,{weekStartsOn:1})}function bB(t){const e=zt(t),r=e.getFullYear(),n=oa(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Ub(n),i=oa(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Ub(i);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Hb(t){const e=zt(t);return e.setHours(0,0,0,0),e}function zb(t){const e=zt(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function rhe(t,e){const r=Hb(t),n=Hb(e),s=+r-zb(r),i=+n-zb(n);return Math.round((s-i)/ehe)}function nhe(t){const e=bB(t),r=oa(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Ub(r)}function F0(t,e){const r=zt(t),n=zt(e),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function Kp(t){return oa(t,Date.now())}function yB(t,e){const r=Hb(t),n=Hb(e);return+r==+n}function she(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ihe(t){if(!she(t)&&typeof t!="number")return!1;const e=zt(t);return!isNaN(Number(e))}function ohe(t,e){const r=zt(t),n=zt(e),s=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return s*12+i}function ahe(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function lhe(t,e){return+zt(t)-+zt(e)}function che(t){const e=zt(t);return e.setHours(23,59,59,999),e}function uhe(t){const e=zt(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function dhe(t){const e=zt(t);return+che(e)==+uhe(e)}function hhe(t,e){const r=zt(t),n=zt(e),s=F0(r,n),i=Math.abs(ohe(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*i);let a=F0(r,n)===-s;dhe(zt(t))&&i===1&&F0(t,n)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function fhe(t,e,r){const n=lhe(t,e)/1e3;return ahe(r?.roundingMethod)(n)}function phe(t){const e=zt(t),r=oa(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const mhe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ghe=(t,e,r)=>{let n;const s=mhe[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function jx(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const bhe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yhe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vhe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_he={date:jx({formats:bhe,defaultWidth:"full"}),time:jx({formats:yhe,defaultWidth:"full"}),dateTime:jx({formats:vhe,defaultWidth:"full"})},xhe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},whe=(t,e,r,n)=>xhe[t];function hh(t){return(e,r)=>{const n=r?.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=r?.width?String(r.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=r?.width?String(r.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const She={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ehe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Che={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},The={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},khe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ahe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Rhe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Phe={ordinalNumber:Rhe,era:hh({values:She,defaultWidth:"wide"}),quarter:hh({values:Ehe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:hh({values:Che,defaultWidth:"wide"}),day:hh({values:The,defaultWidth:"wide"}),dayPeriod:hh({values:khe,defaultWidth:"wide",formattingValues:Ahe,defaultFormattingWidth:"wide"})};function fh(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Nhe(a,d=>d.test(o)):Ihe(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Ihe(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Nhe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Dhe(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const Ohe=/^(\d+)(th|st|nd|rd)?/i,Lhe=/\d+/i,Mhe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},jhe={any:[/^b/i,/^(a|c)/i]},Fhe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Bhe={any:[/1/i,/2/i,/3/i,/4/i]},$he={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Uhe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Hhe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zhe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Whe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Vhe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ghe={ordinalNumber:Dhe({matchPattern:Ohe,parsePattern:Lhe,valueCallback:t=>parseInt(t,10)}),era:fh({matchPatterns:Mhe,defaultMatchWidth:"wide",parsePatterns:jhe,defaultParseWidth:"any"}),quarter:fh({matchPatterns:Fhe,defaultMatchWidth:"wide",parsePatterns:Bhe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:fh({matchPatterns:$he,defaultMatchWidth:"wide",parsePatterns:Uhe,defaultParseWidth:"any"}),day:fh({matchPatterns:Hhe,defaultMatchWidth:"wide",parsePatterns:zhe,defaultParseWidth:"any"}),dayPeriod:fh({matchPatterns:Whe,defaultMatchWidth:"any",parsePatterns:Vhe,defaultParseWidth:"any"})},vB={code:"en-US",formatDistance:ghe,formatLong:_he,formatRelative:whe,localize:Phe,match:Ghe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qhe(t){const e=zt(t);return rhe(e,phe(e))+1}function Khe(t){const e=zt(t),r=+Ub(e)-+nhe(e);return Math.round(r/gB)+1}function _B(t,e){const r=zt(t),n=r.getFullYear(),s=qp(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=oa(t,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const a=bc(o,e),l=oa(t,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const c=bc(l,e);return r.getTime()>=a.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function Yhe(t,e){const r=qp(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=_B(t,e),i=oa(t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),bc(i,e)}function Xhe(t,e){const r=zt(t),n=+bc(r,e)-+Yhe(r,e);return Math.round(n/gB)+1}function Yt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Sa={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Yt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Yt(r+1,2)},d(t,e){return Yt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Yt(t.getHours()%12||12,e.length)},H(t,e){return Yt(t.getHours(),e.length)},m(t,e){return Yt(t.getMinutes(),e.length)},s(t,e){return Yt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Yt(s,e.length)}},iu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},XI={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Sa.y(t,e)},Y:function(t,e,r,n){const s=_B(t,n),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return Yt(o,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):Yt(i,e.length)},R:function(t,e){const r=bB(t);return Yt(r,e.length)},u:function(t,e){const r=t.getFullYear();return Yt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Yt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Yt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Sa.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Yt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=Xhe(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Yt(s,e.length)},I:function(t,e,r){const n=Khe(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Yt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Sa.d(t,e)},D:function(t,e,r){const n=qhe(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Yt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Yt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Yt(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Yt(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=iu.noon:n===0?s=iu.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=iu.evening:n>=12?s=iu.afternoon:n>=4?s=iu.morning:s=iu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Sa.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Sa.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Yt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Yt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Sa.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Sa.s(t,e)},S:function(t,e){return Sa.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return ZI(n);case"XXXX":case"XX":return $l(n);case"XXXXX":case"XXX":default:return $l(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return ZI(n);case"xxxx":case"xx":return $l(n);case"xxxxx":case"xxx":default:return $l(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+JI(n,":");case"OOOO":default:return"GMT"+$l(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+JI(n,":");case"zzzz":default:return"GMT"+$l(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Yt(n,e.length)},T:function(t,e,r){const n=t.getTime();return Yt(n,e.length)}};function JI(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+Yt(i,2)}function ZI(t,e){return t%60===0?(t>0?"-":"+")+Yt(Math.abs(t)/60,2):$l(t,e)}function $l(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Yt(Math.trunc(n/60),2),i=Yt(n%60,2);return r+s+e+i}const QI=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},xB=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Jhe=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return QI(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",QI(n,e)).replace("{{time}}",xB(s,e))},Zhe={p:xB,P:Jhe},Qhe=/^D+$/,efe=/^Y+$/,tfe=["D","DD","YY","YYYY"];function rfe(t){return Qhe.test(t)}function nfe(t){return efe.test(t)}function sfe(t,e,r){const n=ife(t,e,r);if(console.warn(n),tfe.includes(t))throw new RangeError(n)}function ife(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ofe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,afe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lfe=/^'([^]*?)'?$/,cfe=/''/g,ufe=/[a-zA-Z]/;function Fx(t,e,r){const n=qp(),s=n.locale??vB,i=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=zt(t);if(!ihe(a))throw new RangeError("Invalid time value");let l=e.match(afe).map(u=>{const d=u[0];if(d==="p"||d==="P"){const h=Zhe[d];return h(u,s.formatLong)}return u}).join("").match(ofe).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const d=u[0];if(d==="'")return{isToken:!1,value:dfe(u)};if(XI[d])return{isToken:!0,value:u};if(d.match(ufe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(u=>{if(!u.isToken)return u.value;const d=u.value;(nfe(d)||rfe(d))&&sfe(d,e,String(t));const h=XI[d[0]];return h(a,d,s.localize,c)}).join("")}function dfe(t){const e=t.match(lfe);return e?e[1].replace(cfe,"'"):t}function hfe(t,e,r){const n=qp(),s=r?.locale??n.locale??vB,i=2520,o=F0(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:o});let l,c;o>0?(l=zt(e),c=zt(t)):(l=zt(t),c=zt(e));const u=fhe(c,l),d=(zb(c)-zb(l))/1e3,h=Math.round((u-d)/60);let f;if(h<2)return r?.includeSeconds?u<5?s.formatDistance("lessThanXSeconds",5,a):u<10?s.formatDistance("lessThanXSeconds",10,a):u<20?s.formatDistance("lessThanXSeconds",20,a):u<40?s.formatDistance("halfAMinute",0,a):u<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):h===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",h,a);if(h<45)return s.formatDistance("xMinutes",h,a);if(h<90)return s.formatDistance("aboutXHours",1,a);if(h<YI){const b=Math.round(h/60);return s.formatDistance("aboutXHours",b,a)}else{if(h<i)return s.formatDistance("xDays",1,a);if(h<Sg){const b=Math.round(h/YI);return s.formatDistance("xDays",b,a)}else if(h<Sg*2)return f=Math.round(h/Sg),s.formatDistance("aboutXMonths",f,a)}if(f=hhe(c,l),f<12){const b=Math.round(h/Sg);return s.formatDistance("xMonths",b,a)}else{const b=f%12,m=Math.trunc(f/12);return b<3?s.formatDistance("aboutXYears",m,a):b<9?s.formatDistance("overXYears",m,a):s.formatDistance("almostXYears",m+1,a)}}function ffe(t,e){return hfe(t,Kp(t),e)}function pfe(t,e){const r=zt(t),n=zt(e);return r.getTime()>n.getTime()}function mfe(t,e,r){const n=bc(t,r),s=bc(e,r);return+n==+s}function gfe(t,e){const r=zt(t),n=zt(e);return r.getFullYear()===n.getFullYear()}function bfe(t,e){return mfe(t,Kp(t),e)}function yfe(t){return gfe(t,Kp(t))}function vfe(t){return yB(t,Kp(t))}function wB(t,e){return Qde(t,-e)}function _fe(t){return yB(t,wB(Kp(t),1))}function xfe(t){const e=t.toSorted((s,i)=>Date.parse(i.timestamp)-Date.parse(s.timestamp)),r={},n=[];return e.forEach(s=>{const i=wfe(new Date(s.timestamp));if(i in r)r[i].items.push(s);else{const o={category:i,items:[s]};r[i]=o,n.push(o)}}),n}function wfe(t){if(vfe(t))return"Today";if(_fe(t))return"Yesterday";if(bfe(t))return Fx(t,"EEE");const e=wB(new Date,30);return pfe(t,e)?"Past 30 Days":yfe(t)?Fx(t,"LLL"):Fx(t,"LLL yyyy")}function Yp(t,e){let r;return function(...s){const i=()=>{clearTimeout(r),t(...s)};clearTimeout(r),r=setTimeout(i,e)}}function Sfe({items:t=[],searchFields:e=["description"],debounceMs:r=300}){const[n,s]=k.useState(""),i=k.useCallback(Yp(s,r),[]),o=k.useCallback(l=>{i(l.target.value)},[i]),a=k.useMemo(()=>{if(!n.trim())return t;const l=n.toLowerCase();return t.filter(c=>e.some(u=>{const d=c[u];return typeof d=="string"?d.toLowerCase().includes(l):!1}))},[t,n,e]);return{searchQuery:n,filteredItems:a,handleSearchChange:o}}const nf={open:bt(!1),toggle(){this.open.set(!this.open.get())},setOpen(t){this.open.set(t)}},Efe={closed:{opacity:0,visibility:"hidden",left:"-340px",transition:{duration:.2,ease:Dn}},open:{opacity:1,visibility:"initial",left:0,transition:{duration:.2,ease:Dn}}};function Cfe(){const[t,e]=k.useState(new Date);return k.useEffect(()=>{const r=setInterval(()=>{e(new Date)},6e4);return()=>clearInterval(r)},[]),p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 text-sm text-bolt-elements-textSecondary border-b border-bolt-elements-borderColor",children:[p.jsx("div",{className:"h-4 w-4 i-ph:clock opacity-80"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("span",{children:t.toLocaleDateString()}),p.jsx("span",{children:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})}const Tfe=()=>{const{t}=Ms(),{duplicateCurrentChat:e,exportChat:r}=ek(),n=k.useRef(null),[s,i]=k.useState([]),o=He(nf.open),[a,l]=k.useState(null),[c,u]=k.useState(!1),[d,h]=k.useState(!1),[f,b]=k.useState([]),{filteredItems:m,handleSearchChange:g}=Sfe({items:s,searchFields:["description"]}),y=k.useCallback(()=>{tr&&aF(tr,{index:"timestamp",direction:"prev",limit:100}).then(R=>R.filter(F=>F.urlId&&F.description)).then(i).catch(R=>Ie.error(R.message))},[]),v=k.useCallback(async R=>{if(!tr)throw new Error("Database not available");try{const F=`snapshot:${R}`;localStorage.removeItem(F),console.log("Removed snapshot for chat:",R)}catch(F){console.error(`Error deleting snapshot for chat ${R}:`,F)}await Yse(tr,R),console.log("Successfully deleted chat:",R)},[]),_=k.useCallback((R,F)=>{R.preventDefault(),R.stopPropagation(),console.log("Attempting to delete chat:",{id:F.id,description:F.description}),v(F.id).then(()=>{Ie.success(t("sidebar.chat_deleted_success","Chat deleted successfully"),{position:"bottom-right",autoClose:3e3}),y(),zn.get()===F.id&&(console.log("Navigating away from deleted chat"),window.location.pathname="/")}).catch(G=>{console.error("Failed to delete chat:",G),Ie.error(t("sidebar.delete_failed","Failed to delete conversation"),{position:"bottom-right",autoClose:3e3}),y()})},[y,v]),x=k.useCallback(async R=>{if(R.length===0){console.log("Bulk delete skipped: No items to delete.");return}console.log(`Starting bulk delete for ${R.length} chats`,R);let F=0;const G=[],z=zn.get();let K=!1;for(const L of R)try{await v(L),F++,L===z&&(K=!0)}catch(O){console.error(`Error deleting chat ${L}:`,O),G.push(L)}G.length===0?Ie.success(t("sidebar.bulk_delete_success","{{count}} chats deleted successfully",{count:F})):Ie.warning(t("sidebar.bulk_delete_partial","Deleted {{deleted}} of {{total}} chats. {{failed}} failed.",{deleted:F,total:R.length,failed:G.length}),{autoClose:5e3}),await y(),b([]),h(!1),K&&(console.log("Navigating away from deleted chat"),window.location.pathname="/")},[v,y]),w=()=>{l(null)},S=()=>{h(!d),d&&b([])},T=k.useCallback(R=>{b(F=>{const G=F.includes(R)?F.filter(z=>z!==R):[...F,R];return console.log("Selected items updated:",G),G})},[]),E=k.useCallback(()=>{if(f.length===0){Ie.info(t("sidebar.select_at_least_one","Select at least one chat to delete"));return}const R=s.filter(F=>f.includes(F.id));if(R.length===0){Ie.error(t("sidebar.chats_not_found","Could not find selected chats"));return}l({type:"bulkDelete",items:R})},[f,s]),C=k.useCallback(()=>{const R=m.map(F=>F.id);b(F=>{if(R.length>0&&R.every(z=>F.includes(z))){const z=F.filter(K=>!R.includes(K));return console.log("Deselecting all filtered items. New selection:",z),z}else{const z=[...new Set([...F,...R])];return console.log("Selecting all filtered items. New selection:",z),z}})},[m]);k.useEffect(()=>{o&&y()},[o,y]),k.useEffect(()=>{!o&&d&&console.log("Sidebar closed, preserving selection state")},[o,d]),k.useEffect(()=>{if(!o)return;function R(G){n.current&&!n.current.contains(G.target)&&nf.setOpen(!1)}const F=setTimeout(()=>{document.addEventListener("mousedown",R)},0);return()=>{clearTimeout(F),document.removeEventListener("mousedown",R)}},[o]);const A=async R=>{await e(R),y()},I=()=>{u(!0),nf.setOpen(!1)},P=()=>{u(!1)},D=k.useCallback(R=>{console.log("Setting dialog content:",R),l(R)},[]);return p.jsxs(p.Fragment,{children:[p.jsxs(rt.div,{ref:n,initial:"closed",animate:o?"open":"closed",variants:Efe,className:ye("flex selection-accent flex-col side-menu fixed top-0 h-full rounded-r-xl w-[340px]","bg-bolt-elements-background-depth-1 border-r border-bolt-elements-borderColor","shadow-xl acrylic-surface text-sm",c?"z-40":"z-sidebar"),children:[p.jsxs("div",{className:"h-12 flex items-center justify-between px-4 border-b border-bolt-elements-borderColor bg-bolt-elements-background-depth-2/80 rounded-tr-xl",children:[p.jsx("span",{className:"text-bolt-elements-textPrimary font-semibold text-lg",children:t("header.devonz","Devonz")}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Bse,{onClick:I}),p.jsx(Cne,{})]})]}),p.jsx(Cfe,{}),p.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[p.jsxs("div",{className:"p-4 space-y-3",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("a",{href:"/",className:"flex-1 flex gap-2 items-center bg-accent-500/20 text-accent-400 hover:bg-accent-500/30 rounded-lg px-4 py-2.5 transition-colors border border-accent-500/30",children:[p.jsx("span",{className:"inline-block i-ph:plus-circle h-4 w-4"}),p.jsx("span",{className:"text-sm font-medium",children:t("sidebar.start_new_chat","Start new chat")})]}),p.jsx("button",{onClick:S,className:ye("flex gap-1 items-center rounded-lg px-3 py-2 transition-colors",d?"bg-accent-500 text-white border border-accent-600":"bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary hover:bg-bolt-elements-background-depth-4 border border-bolt-elements-borderColor"),"aria-label":d?t("sidebar.exit_selection_mode","Exit selection mode"):t("sidebar.enter_selection_mode","Enter selection mode"),children:p.jsx("span",{className:d?"i-ph:x h-4 w-4":"i-ph:check-square h-4 w-4"})})]}),p.jsxs("div",{className:"relative w-full",children:[p.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:p.jsx("span",{className:"i-ph:magnifying-glass h-4 w-4 text-bolt-elements-textTertiary"})}),p.jsx("input",{className:"w-full bg-bolt-elements-background-depth-3 relative pl-9 pr-3 py-2.5 rounded-lg focus:outline-none focus:ring-1 focus:ring-accent-500/50 text-sm text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary border border-bolt-elements-borderColor",type:"search",placeholder:t("sidebar.search_chats","Search chats..."),onChange:g,"aria-label":t("sidebar.search_chats","Search chats")})]})]}),p.jsxs("div",{className:"flex items-center justify-between text-sm px-4 py-2",children:[p.jsx("div",{className:"font-medium text-bolt-elements-textSecondary",children:t("sidebar.your_chats","Your Chats")}),d&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Rt,{variant:"ghost",size:"sm",onClick:C,children:f.length===m.length?t("common.deselect_all","Deselect all"):t("common.select_all","Select all")}),p.jsx(Rt,{variant:"destructive",size:"sm",disabled:f.length===0,onClick:E,children:t("common.delete_selected","Delete selected")})]})]}),p.jsxs("div",{className:"flex-1 overflow-auto px-3 pb-3 modern-scrollbar",children:[m.length===0&&p.jsx("div",{className:"px-4 text-bolt-elements-textTertiary text-sm",children:s.length===0?t("sidebar.no_previous_conversations","No previous conversations"):t("sidebar.no_matches_found","No matches found")}),p.jsxs(Ii,{open:a!==null,children:[xfe(m).map(({category:R,items:F})=>p.jsxs("div",{className:"mt-2 first:mt-0 space-y-1",children:[p.jsx("div",{className:"text-xs font-medium text-bolt-elements-textTertiary sticky top-0 z-1 bg-bolt-elements-background-depth-1 px-4 py-1",children:R}),p.jsx("div",{className:"space-y-0.5 pr-1",children:F.map(G=>p.jsx(Zde,{item:G,exportChat:r,onDelete:z=>{z.preventDefault(),z.stopPropagation(),console.log("Delete triggered for item:",G),D({type:"delete",item:G})},onDuplicate:()=>A(G.id),selectionMode:d,isSelected:f.includes(G.id),onToggleSelection:T},G.id))})]},R)),p.jsxs(vl,{onBackdrop:w,onClose:w,children:[a?.type==="delete"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"p-6 bg-bolt-elements-bg-depth-1",children:[p.jsx(Ci,{className:"text-bolt-elements-textPrimary",children:t("sidebar.delete_chat_title","Delete Chat?")}),p.jsxs(mc,{className:"mt-2 text-bolt-elements-textSecondary",children:[p.jsx("p",{children:t("sidebar.delete_chat_description","You are about to delete {{description}}",{description:a.item.description})}),p.jsx("p",{className:"mt-2",children:t("sidebar.delete_confirmation","Are you sure you want to delete this chat?")})]})]}),p.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 bg-bolt-elements-bg-depth-2 border-t border-bolt-elements-borderColor",children:[p.jsx(Ha,{type:"secondary",onClick:w,children:t("common.cancel","Cancel")}),p.jsx(Ha,{type:"danger",onClick:R=>{console.log("Dialog delete button clicked for item:",a.item),_(R,a.item),w()},children:t("common.delete","Delete")})]})]}),a?.type==="bulkDelete"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"p-6 bg-bolt-elements-bg-depth-1",children:[p.jsx(Ci,{className:"text-bolt-elements-textPrimary",children:t("sidebar.bulk_delete_title","Delete Selected Chats?")}),p.jsxs(mc,{className:"mt-2 text-bolt-elements-textSecondary",children:[p.jsx("p",{children:t("sidebar.bulk_delete_description","You are about to delete {{count}} chats:",{count:a.items.length})}),p.jsx("div",{className:"mt-2 max-h-32 overflow-auto border border-bolt-elements-borderColor rounded-md bg-bolt-elements-bg-depth-2 p-2",children:p.jsx("ul",{className:"list-disc pl-5 space-y-1",children:a.items.map(R=>p.jsx("li",{className:"text-sm",children:p.jsx("span",{className:"font-medium text-bolt-elements-textPrimary",children:R.description})},R.id))})}),p.jsx("p",{className:"mt-3",children:t("sidebar.bulk_delete_confirmation","Are you sure you want to delete these chats?")})]})]}),p.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 bg-bolt-elements-bg-depth-2 border-t border-bolt-elements-borderColor",children:[p.jsx(Ha,{type:"secondary",onClick:w,children:t("common.cancel","Cancel")}),p.jsx(Ha,{type:"danger",onClick:()=>{const R=[...f];console.log("Bulk delete confirmed for",R.length,"items",R),x(R),w()},children:t("common.delete","Delete")})]})]})]})]})]})]})]}),p.jsx(nF,{open:c,onClose:P})]})};let jS=[],SB=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,r=0;e<t.length;e++)(e%2?SB:jS).push(r=r+t[e])})();function kfe(t){if(t<768)return!1;for(let e=0,r=jS.length;;){let n=e+r>>1;if(t<jS[n])r=n;else if(t>=SB[n])e=n+1;else return!0;if(e==r)return!1}}function eN(t){return t>=127462&&t<=127487}const tN=8205;function Afe(t,e,r=!0,n=!0){return(r?EB:Rfe)(t,e,n)}function EB(t,e,r){if(e==t.length)return e;e&&CB(t.charCodeAt(e))&&TB(t.charCodeAt(e-1))&&e--;let n=Bx(t,e);for(e+=rN(n);e<t.length;){let s=Bx(t,e);if(n==tN||s==tN||r&&kfe(s))e+=rN(s),n=s;else if(eN(s)){let i=0,o=e-2;for(;o>=0&&eN(Bx(t,o));)i++,o-=2;if(i%2==0)break;e+=2}else break}return e}function Rfe(t,e,r){for(;e>0;){let n=EB(t,e-2,r);if(n<e)return n;e--}return 0}function Bx(t,e){let r=t.charCodeAt(e);if(!TB(r)||e+1==t.length)return r;let n=t.charCodeAt(e+1);return CB(n)?(r-55296<<10)+(n-56320)+65536:r}function CB(t){return t>=56320&&t<57344}function TB(t){return t>=55296&&t<56320}function rN(t){return t<65536?1:2}let Vt=class kB{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,r,n){[e,r]=pd(this,e,r);let s=[];return this.decompose(0,e,s,2),n.length&&n.decompose(0,n.length,s,3),this.decompose(r,this.length,s,1),no.from(s,this.length-(r-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,r=this.length){[e,r]=pd(this,e,r);let n=[];return this.decompose(e,r,n,0),no.from(n,r-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let r=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),s=new sf(this),i=new sf(e);for(let o=r,a=r;;){if(s.next(o),i.next(o),o=0,s.lineBreak!=i.lineBreak||s.done!=i.done||s.value!=i.value)return!1;if(a+=s.value.length,s.done||a>=n)return!0}}iter(e=1){return new sf(this,e)}iterRange(e,r=this.length){return new AB(this,e,r)}iterLines(e,r){let n;if(e==null)n=this.iter();else{r==null&&(r=this.lines+1);let s=this.line(e).from;n=this.iterRange(s,Math.max(s,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new RB(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?kB.empty:e.length<=32?new Lr(e):no.from(Lr.split(e,[]))}};class Lr extends Vt{constructor(e,r=Pfe(e)){super(),this.text=e,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(e,r,n,s){for(let i=0;;i++){let o=this.text[i],a=s+o.length;if((r?n:a)>=e)return new Ife(s,a,n,o);s=a+1,n++}}decompose(e,r,n,s){let i=e<=0&&r>=this.length?this:new Lr(nN(this.text,e,r),Math.min(r,this.length)-Math.max(0,e));if(s&1){let o=n.pop(),a=B0(i.text,o.text.slice(),0,i.length);if(a.length<=32)n.push(new Lr(a,o.length+i.length));else{let l=a.length>>1;n.push(new Lr(a.slice(0,l)),new Lr(a.slice(l)))}}else n.push(i)}replace(e,r,n){if(!(n instanceof Lr))return super.replace(e,r,n);[e,r]=pd(this,e,r);let s=B0(this.text,B0(n.text,nN(this.text,0,e)),r),i=this.length+n.length-(r-e);return s.length<=32?new Lr(s,i):no.from(Lr.split(s,[]),i)}sliceString(e,r=this.length,n=`
`){[e,r]=pd(this,e,r);let s="";for(let i=0,o=0;i<=r&&o<this.text.length;o++){let a=this.text[o],l=i+a.length;i>e&&o&&(s+=n),e<l&&r>i&&(s+=a.slice(Math.max(0,e-i),r-i)),i=l+1}return s}flatten(e){for(let r of this.text)e.push(r)}scanIdentical(){return 0}static split(e,r){let n=[],s=-1;for(let i of e)n.push(i),s+=i.length+1,n.length==32&&(r.push(new Lr(n,s)),n=[],s=-1);return s>-1&&r.push(new Lr(n,s)),r}}class no extends Vt{constructor(e,r){super(),this.children=e,this.length=r,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,r,n,s){for(let i=0;;i++){let o=this.children[i],a=s+o.length,l=n+o.lines-1;if((r?l:a)>=e)return o.lineInner(e,r,n,s);s=a+1,n=l+1}}decompose(e,r,n,s){for(let i=0,o=0;o<=r&&i<this.children.length;i++){let a=this.children[i],l=o+a.length;if(e<=l&&r>=o){let c=s&((o<=e?1:0)|(l>=r?2:0));o>=e&&l<=r&&!c?n.push(a):a.decompose(e-o,r-o,n,c)}o=l+1}}replace(e,r,n){if([e,r]=pd(this,e,r),n.lines<this.lines)for(let s=0,i=0;s<this.children.length;s++){let o=this.children[s],a=i+o.length;if(e>=i&&r<=a){let l=o.replace(e-i,r-i,n),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[s]=l,new no(u,this.length-(r-e)+n.length)}return super.replace(i,a,l)}i=a+1}return super.replace(e,r,n)}sliceString(e,r=this.length,n=`
`){[e,r]=pd(this,e,r);let s="";for(let i=0,o=0;i<this.children.length&&o<=r;i++){let a=this.children[i],l=o+a.length;o>e&&i&&(s+=n),e<l&&r>o&&(s+=a.sliceString(e-o,r-o,n)),o=l+1}return s}flatten(e){for(let r of this.children)r.flatten(e)}scanIdentical(e,r){if(!(e instanceof no))return 0;let n=0,[s,i,o,a]=r>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=r,i+=r){if(s==o||i==a)return n;let l=this.children[s],c=e.children[i];if(l!=c)return n+l.scanIdentical(c,r);n+=l.length+1}}static from(e,r=e.reduce((n,s)=>n+s.length+1,-1)){let n=0;for(let f of e)n+=f.lines;if(n<32){let f=[];for(let b of e)b.flatten(f);return new Lr(f,r)}let s=Math.max(32,n>>5),i=s<<1,o=s>>1,a=[],l=0,c=-1,u=[];function d(f){let b;if(f.lines>i&&f instanceof no)for(let m of f.children)d(m);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Lr&&l&&(b=u[u.length-1])instanceof Lr&&f.lines+b.lines<=32?(l+=f.lines,c+=f.length+1,u[u.length-1]=new Lr(b.text.concat(f.text),b.length+1+f.length)):(l+f.lines>s&&h(),l+=f.lines,c+=f.length+1,u.push(f))}function h(){l!=0&&(a.push(u.length==1?u[0]:no.from(u,c)),c=-1,l=u.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new no(a,r)}}Vt.empty=new Lr([""],0);function Pfe(t){let e=-1;for(let r of t)e+=r.length+1;return e}function B0(t,e,r=0,n=1e9){for(let s=0,i=0,o=!0;i<t.length&&s<=n;i++){let a=t[i],l=s+a.length;l>=r&&(l>n&&(a=a.slice(0,n-s)),s<r&&(a=a.slice(r-s)),o?(e[e.length-1]+=a,o=!1):e.push(a)),s=l+1}return e}function nN(t,e,r){return B0(t,[""],e,r)}class sf{constructor(e,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[r>0?1:(e instanceof Lr?e.text.length:e.children.length)<<1]}nextInner(e,r){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,s=this.nodes[n],i=this.offsets[n],o=i>>1,a=s instanceof Lr?s.text.length:s.children.length;if(o==(r>0?a:0)){if(n==0)return this.done=!0,this.value="",this;r>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((i&1)==(r>0?0:1)){if(this.offsets[n]+=r,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Lr){let l=s.text[o+(r<0?-1:0)];if(this.offsets[n]+=r,l.length>Math.max(0,e))return this.value=e==0?l:r>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=s.children[o+(r<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=r):(r<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(r>0?1:(l instanceof Lr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class AB{constructor(e,r,n){this.value="",this.done=!1,this.cursor=new sf(e,r>n?-1:1),this.pos=r>n?e.length:0,this.from=Math.min(r,n),this.to=Math.max(r,n)}nextInner(e,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let n=r<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*r,this.value=s.length<=n?s:r<0?s.slice(s.length-n):s.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class RB{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:r,lineBreak:n,value:s}=this.inner.next(e);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Vt.prototype[Symbol.iterator]=function(){return this.iter()},sf.prototype[Symbol.iterator]=AB.prototype[Symbol.iterator]=RB.prototype[Symbol.iterator]=function(){return this});class Ife{constructor(e,r,n,s){this.from=e,this.to=r,this.number=n,this.text=s}get length(){return this.to-this.from}}function pd(t,e,r){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,r))]}function un(t,e,r=!0,n=!0){return Afe(t,e,r,n)}function Nfe(t){return t>=56320&&t<57344}function Dfe(t){return t>=55296&&t<56320}function gi(t,e){let r=t.charCodeAt(e);if(!Dfe(r)||e+1==t.length)return r;let n=t.charCodeAt(e+1);return Nfe(n)?(r-55296<<10)+(n-56320)+65536:r}function pk(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Wo(t){return t<65536?1:2}const FS=/\r\n?|\n/;var In=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(In||(In={}));class _o{constructor(e){this.sections=e}get length(){let e=0;for(let r=0;r<this.sections.length;r+=2)e+=this.sections[r];return e}get newLength(){let e=0;for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r+1];e+=n<0?this.sections[r]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let r=0,n=0,s=0;r<this.sections.length;){let i=this.sections[r++],o=this.sections[r++];o<0?(e(n,s,i),s+=i):s+=o,n+=i}}iterChangedRanges(e,r=!1){BS(this,e,r)}get invertedDesc(){let e=[];for(let r=0;r<this.sections.length;){let n=this.sections[r++],s=this.sections[r++];s<0?e.push(n,s):e.push(s,n)}return new _o(e)}composeDesc(e){return this.empty?e:e.empty?this:PB(this,e)}mapDesc(e,r=!1){return e.empty?this:$S(this,e,r)}mapPos(e,r=-1,n=In.Simple){let s=0,i=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=s+a;if(l<0){if(c>e)return i+(e-s);i+=a}else{if(n!=In.Simple&&c>=e&&(n==In.TrackDel&&s<e&&c>e||n==In.TrackBefore&&s<e||n==In.TrackAfter&&c>e))return null;if(c>e||c==e&&r<0&&!a)return e==s||r<0?i:i+l;i+=l}s=c}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return i}touchesRange(e,r=e){for(let n=0,s=0;n<this.sections.length&&s<=r;){let i=this.sections[n++],o=this.sections[n++],a=s+i;if(o>=0&&s<=r&&a>=e)return s<e&&a>r?"cover":!0;s=a}return!1}toString(){let e="";for(let r=0;r<this.sections.length;){let n=this.sections[r++],s=this.sections[r++];e+=(e?" ":"")+n+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new _o(e)}static create(e){return new _o(e)}}class Xr extends _o{constructor(e,r){super(e),this.inserted=r}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return BS(this,(r,n,s,i,o)=>e=e.replace(s,s+(n-r),o),!1),e}mapDesc(e,r=!1){return $S(this,e,r,!0)}invert(e){let r=this.sections.slice(),n=[];for(let s=0,i=0;s<r.length;s+=2){let o=r[s],a=r[s+1];if(a>=0){r[s]=a,r[s+1]=o;let l=s>>1;for(;n.length<l;)n.push(Vt.empty);n.push(o?e.slice(i,i+o):Vt.empty)}i+=o}return new Xr(r,n)}compose(e){return this.empty?e:e.empty?this:PB(this,e,!0)}map(e,r=!1){return e.empty?this:$S(this,e,r,!0)}iterChanges(e,r=!1){BS(this,e,r)}get desc(){return _o.create(this.sections)}filter(e){let r=[],n=[],s=[],i=new Jf(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&i.len==0;){if(i.done)break e;let u=Math.min(i.len,l-a);Rn(s,u,-1);let d=i.ins==-1?-1:i.off==0?i.ins:0;Rn(r,u,d),d>0&&Wa(n,r,i.text),i.forward(u),a+=u}let c=e[o++];for(;a<c;){if(i.done)break e;let u=Math.min(i.len,c-a);Rn(r,u,-1),Rn(s,u,i.ins==-1?-1:i.off==0?i.ins:0),i.forward(u),a+=u}}return{changes:new Xr(r,n),filtered:_o.create(s)}}toJSON(){let e=[];for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r],s=this.sections[r+1];s<0?e.push(n):s==0?e.push([n]):e.push([n].concat(this.inserted[r>>1].toJSON()))}return e}static of(e,r,n){let s=[],i=[],o=0,a=null;function l(u=!1){if(!u&&!s.length)return;o<r&&Rn(s,r-o,-1);let d=new Xr(s,i);a=a?a.compose(d.map(a)):d,s=[],i=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof Xr){if(u.length!=r)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${r})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:h=d,insert:f}=u;if(d>h||d<0||h>r)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${r})`);let b=f?typeof f=="string"?Vt.of(f.split(n||FS)):f:Vt.empty,m=b.length;if(d==h&&m==0)return;d<o&&l(),d>o&&Rn(s,d-o,-1),Rn(s,h-d,m),Wa(i,s,b),o=h}}return c(e),l(!a),a}static empty(e){return new Xr(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],n=[];for(let s=0;s<e.length;s++){let i=e[s];if(typeof i=="number")r.push(i,-1);else{if(!Array.isArray(i)||typeof i[0]!="number"||i.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(i.length==1)r.push(i[0],0);else{for(;n.length<s;)n.push(Vt.empty);n[s]=Vt.of(i.slice(1)),r.push(i[0],n[s].length)}}}return new Xr(r,n)}static createSet(e,r){return new Xr(e,r)}}function Rn(t,e,r,n=!1){if(e==0&&r<=0)return;let s=t.length-2;s>=0&&r<=0&&r==t[s+1]?t[s]+=e:s>=0&&e==0&&t[s]==0?t[s+1]+=r:n?(t[s]+=e,t[s+1]+=r):t.push(e,r)}function Wa(t,e,r){if(r.length==0)return;let n=e.length-2>>1;if(n<t.length)t[t.length-1]=t[t.length-1].append(r);else{for(;t.length<n;)t.push(Vt.empty);t.push(r)}}function BS(t,e,r){let n=t.inserted;for(let s=0,i=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)s+=a,i+=a;else{let c=s,u=i,d=Vt.empty;for(;c+=a,u+=l,l&&n&&(d=d.append(n[o-2>>1])),!(r||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(s,c,i,u,d),s=c,i=u}}}function $S(t,e,r,n=!1){let s=[],i=n?[]:null,o=new Jf(t),a=new Jf(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Rn(s,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!r))){let c=a.len;for(Rn(s,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Rn(s,0,o.ins),i&&Wa(i,s,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Rn(s,c,l<o.i?o.ins:0),i&&l<o.i&&Wa(i,s,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return i?Xr.createSet(s,i):_o.create(s);throw new Error("Mismatched change set lengths")}}}function PB(t,e,r=!1){let n=[],s=r?[]:null,i=new Jf(t),o=new Jf(e);for(let a=!1;;){if(i.done&&o.done)return s?Xr.createSet(n,s):_o.create(n);if(i.ins==0)Rn(n,i.len,0,a),i.next();else if(o.len==0&&!o.done)Rn(n,0,o.ins,a),s&&Wa(s,n,o.text),o.next();else{if(i.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(i.len2,o.len),c=n.length;if(i.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Rn(n,l,u,a),s&&u&&Wa(s,n,o.text)}else o.ins==-1?(Rn(n,i.off?0:i.len,l,a),s&&Wa(s,n,i.textBit(l))):(Rn(n,i.off?0:i.len,o.off?0:o.ins,a),s&&!o.off&&Wa(s,n,o.text));a=(i.ins>l||o.ins>=0&&o.len>l)&&(a||n.length>c),i.forward2(l),o.forward(l)}}}}class Jf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,r=this.i-2>>1;return r>=e.length?Vt.empty:e[r]}textBit(e){let{inserted:r}=this.set,n=this.i-2>>1;return n>=r.length&&!e?Vt.empty:r[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Jl{constructor(e,r,n){this.from=e,this.to=r,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,r=-1){let n,s;return this.empty?n=s=e.mapPos(this.from,r):(n=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),n==this.from&&s==this.to?this:new Jl(n,s,this.flags)}extend(e,r=e){if(e<=this.anchor&&r>=this.anchor)return De.range(e,r);let n=Math.abs(e-this.anchor)>Math.abs(r-this.anchor)?e:r;return De.range(this.anchor,n)}eq(e,r=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!r||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return De.range(e.anchor,e.head)}static create(e,r,n){return new Jl(e,r,n)}}class De{constructor(e,r){this.ranges=e,this.mainIndex=r}map(e,r=-1){return e.empty?this:De.create(this.ranges.map(n=>n.map(e,r)),this.mainIndex)}eq(e,r=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],r))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new De([this.main],0)}addRange(e,r=!0){return De.create([e].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(e,r=this.mainIndex){let n=this.ranges.slice();return n[r]=e,De.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new De(e.ranges.map(r=>Jl.fromJSON(r)),e.main)}static single(e,r=e){return new De([De.range(e,r)],0)}static create(e,r=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,s=0;s<e.length;s++){let i=e[s];if(i.empty?i.from<=n:i.from<n)return De.normalized(e.slice(),r);n=i.to}return new De(e,r)}static cursor(e,r=0,n,s){return Jl.create(e,e,(r==0?0:r<0?8:16)|(n==null?7:Math.min(6,n))|(s??16777215)<<6)}static range(e,r,n,s){let i=(n??16777215)<<6|(s==null?7:Math.min(6,s));return r<e?Jl.create(r,e,48|i):Jl.create(e,r,(r>e?8:0)|i)}static normalized(e,r=0){let n=e[r];e.sort((s,i)=>s.from-i.from),r=e.indexOf(n);for(let s=1;s<e.length;s++){let i=e[s],o=e[s-1];if(i.empty?i.from<=o.to:i.from<o.to){let a=o.from,l=Math.max(i.to,o.to);s<=r&&r--,e.splice(--s,2,i.anchor>i.head?De.range(l,a):De.range(a,l))}}return new De(e,r)}}function IB(t,e){for(let r of t.ranges)if(r.to>e)throw new RangeError("Selection points outside of document")}let mk=0;class Qe{constructor(e,r,n,s,i){this.combine=e,this.compareInput=r,this.compare=n,this.isStatic=s,this.id=mk++,this.default=e([]),this.extensions=typeof i=="function"?i(this):i}get reader(){return this}static define(e={}){return new Qe(e.combine||(r=>r),e.compareInput||((r,n)=>r===n),e.compare||(e.combine?(r,n)=>r===n:gk),!!e.static,e.enables)}of(e){return new $0([],this,0,e)}compute(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new $0(e,this,1,r)}computeN(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new $0(e,this,2,r)}from(e,r){return r||(r=n=>n),this.compute([e],n=>r(n.field(e)))}}function gk(t,e){return t==e||t.length==e.length&&t.every((r,n)=>r===e[n])}class $0{constructor(e,r,n,s){this.dependencies=e,this.facet=r,this.type=n,this.value=s,this.id=mk++}dynamicSlot(e){var r;let n=this.value,s=this.facet.compareInput,i=this.id,o=e[i]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((r=e[d.id])!==null&&r!==void 0?r:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=n(d),1},update(d,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||US(d,u)){let f=n(d);if(a?!sN(f,d.values[o],s):!s(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,b=h.config.address[i];if(b!=null){let m=Vb(h,b);if(this.dependencies.every(g=>g instanceof Qe?h.facet(g)===d.facet(g):g instanceof fn?h.field(g,!1)==d.field(g,!1):!0)||(a?sN(f=n(d),m,s):s(f=n(d),m)))return d.values[o]=m,0}else f=n(d);return d.values[o]=f,1}}}}function sN(t,e,r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}function US(t,e){let r=!1;for(let n of e)of(t,n)&1&&(r=!0);return r}function Ofe(t,e,r){let n=r.map(l=>t[l.id]),s=r.map(l=>l.type),i=n.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<n.length;u++){let d=Vb(l,n[u]);if(s[u]==2)for(let h of d)c.push(h);else c.push(d)}return e.combine(c)}return{create(l){for(let c of n)of(l,c);return l.values[o]=a(l),1},update(l,c){if(!US(l,i))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=US(l,n),d=c.config.facets[e.id],h=c.facet(e);if(d&&!u&&gk(r,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const Eg=Qe.define({static:!0});class fn{constructor(e,r,n,s,i){this.id=e,this.createF=r,this.updateF=n,this.compareF=s,this.spec=i,this.provides=void 0}static define(e){let r=new fn(mk++,e.create,e.update,e.compare||((n,s)=>n===s),e);return e.provide&&(r.provides=e.provide(r)),r}create(e){let r=e.facet(Eg).find(n=>n.field==this);return(r?.create||this.createF)(e)}slot(e){let r=e[this.id]>>1;return{create:n=>(n.values[r]=this.create(n),1),update:(n,s)=>{let i=n.values[r],o=this.updateF(i,s);return this.compareF(i,o)?0:(n.values[r]=o,1)},reconfigure:(n,s)=>{let i=n.facet(Eg),o=s.facet(Eg),a;return(a=i.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(n.values[r]=a.create(n),1):s.config.address[this.id]!=null?(n.values[r]=s.field(this),0):(n.values[r]=this.create(n),1)}}}init(e){return[this,Eg.of({field:this,create:e})]}get extension(){return this}}const Vl={lowest:4,low:3,default:2,high:1,highest:0};function ph(t){return e=>new NB(e,t)}const xl={highest:ph(Vl.highest),high:ph(Vl.high),default:ph(Vl.default),low:ph(Vl.low),lowest:ph(Vl.lowest)};class NB{constructor(e,r){this.inner=e,this.prec=r}}class yc{of(e){return new HS(this,e)}reconfigure(e){return yc.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class HS{constructor(e,r){this.compartment=e,this.inner=r}}class Wb{constructor(e,r,n,s,i,o){for(this.base=e,this.compartments=r,this.dynamicSlots=n,this.address=s,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let r=this.address[e.id];return r==null?e.default:this.staticValues[r>>1]}static resolve(e,r,n){let s=[],i=Object.create(null),o=new Map;for(let h of Lfe(e,r,o))h instanceof fn?s.push(h):(i[h.facet.id]||(i[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],c=[];for(let h of s)a[h.id]=c.length<<1,c.push(f=>h.slot(f));let u=n?.config.facets;for(let h in i){let f=i[h],b=f[0].facet,m=u&&u[h]||[];if(f.every(g=>g.type==0))if(a[b.id]=l.length<<1|1,gk(m,f))l.push(n.facet(b));else{let g=b.combine(f.map(y=>y.value));l.push(n&&b.compare(g,n.facet(b))?n.facet(b):g)}else{for(let g of f)g.type==0?(a[g.id]=l.length<<1|1,l.push(g.value)):(a[g.id]=c.length<<1,c.push(y=>g.dynamicSlot(y)));a[b.id]=c.length<<1,c.push(g=>Ofe(g,b,f))}}let d=c.map(h=>h(a));return new Wb(e,o,d,a,l,i)}}function Lfe(t,e,r){let n=[[],[],[],[],[]],s=new Map;function i(o,a){let l=s.get(o);if(l!=null){if(l<=a)return;let c=n[l].indexOf(o);c>-1&&n[l].splice(c,1),o instanceof HS&&r.delete(o.compartment)}if(s.set(o,a),Array.isArray(o))for(let c of o)i(c,a);else if(o instanceof HS){if(r.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;r.set(o.compartment,c),i(c,a)}else if(o instanceof NB)i(o.inner,o.prec);else if(o instanceof fn)n[a].push(o),o.provides&&i(o.provides,a);else if(o instanceof $0)n[a].push(o),o.facet.extensions&&i(o.facet.extensions,Vl.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);i(c,a)}}return i(t,Vl.default),n.reduce((o,a)=>o.concat(a))}function of(t,e){if(e&1)return 2;let r=e>>1,n=t.status[r];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;t.status[r]=4;let s=t.computeSlot(t,t.config.dynamicSlots[r]);return t.status[r]=2|s}function Vb(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const DB=Qe.define(),zS=Qe.define({combine:t=>t.some(e=>e),static:!0}),OB=Qe.define({combine:t=>t.length?t[0]:void 0,static:!0}),LB=Qe.define(),MB=Qe.define(),jB=Qe.define(),FB=Qe.define({combine:t=>t.length?t[0]:!1});class fa{constructor(e,r){this.type=e,this.value=r}static define(){return new Mfe}}class Mfe{of(e){return new fa(this,e)}}class jfe{constructor(e){this.map=e}of(e){return new Ct(this,e)}}class Ct{constructor(e,r){this.type=e,this.value=r}map(e){let r=this.type.map(this.value,e);return r===void 0?void 0:r==this.value?this:new Ct(this.type,r)}is(e){return this.type==e}static define(e={}){return new jfe(e.map||(r=>r))}static mapEffects(e,r){if(!e.length)return e;let n=[];for(let s of e){let i=s.map(r);i&&n.push(i)}return n}}Ct.reconfigure=Ct.define();Ct.appendConfig=Ct.define();class Ur{constructor(e,r,n,s,i,o){this.startState=e,this.changes=r,this.selection=n,this.effects=s,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&IB(n,r.newLength),i.some(a=>a.type==Ur.time)||(this.annotations=i.concat(Ur.time.of(Date.now())))}static create(e,r,n,s,i,o){return new Ur(e,r,n,s,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let r of this.annotations)if(r.type==e)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let r=this.annotation(Ur.userEvent);return!!(r&&(r==e||r.length>e.length&&r.slice(0,e.length)==e&&r[e.length]=="."))}}Ur.time=fa.define();Ur.userEvent=fa.define();Ur.addToHistory=fa.define();Ur.remote=fa.define();function Ffe(t,e){let r=[];for(let n=0,s=0;;){let i,o;if(n<t.length&&(s==e.length||e[s]>=t[n]))i=t[n++],o=t[n++];else if(s<e.length)i=e[s++],o=e[s++];else return r;!r.length||r[r.length-1]<i?r.push(i,o):r[r.length-1]<o&&(r[r.length-1]=o)}}function BB(t,e,r){var n;let s,i,o;return r?(s=e.changes,i=Xr.empty(e.changes.length),o=t.changes.compose(e.changes)):(s=e.changes.map(t.changes),i=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(s)),{changes:o,selection:e.selection?e.selection.map(i):(n=t.selection)===null||n===void 0?void 0:n.map(s),effects:Ct.mapEffects(t.effects,s).concat(Ct.mapEffects(e.effects,i)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function WS(t,e,r){let n=e.selection,s=zu(e.annotations);return e.userEvent&&(s=s.concat(Ur.userEvent.of(e.userEvent))),{changes:e.changes instanceof Xr?e.changes:Xr.of(e.changes||[],r,t.facet(OB)),selection:n&&(n instanceof De?n:De.single(n.anchor,n.head)),effects:zu(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function $B(t,e,r){let n=WS(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(r=!1);for(let i=1;i<e.length;i++){e[i].filter===!1&&(r=!1);let o=!!e[i].sequential;n=BB(n,WS(t,e[i],o?n.changes.newLength:t.doc.length),o)}let s=Ur.create(t,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return $fe(r?Bfe(s):s)}function Bfe(t){let e=t.startState,r=!0;for(let s of e.facet(LB)){let i=s(t);if(i===!1){r=!1;break}Array.isArray(i)&&(r=r===!0?i:Ffe(r,i))}if(r!==!0){let s,i;if(r===!1)i=t.changes.invertedDesc,s=Xr.empty(e.doc.length);else{let o=t.changes.filter(r);s=o.changes,i=o.filtered.mapDesc(o.changes).invertedDesc}t=Ur.create(e,s,t.selection&&t.selection.map(i),Ct.mapEffects(t.effects,i),t.annotations,t.scrollIntoView)}let n=e.facet(MB);for(let s=n.length-1;s>=0;s--){let i=n[s](t);i instanceof Ur?t=i:Array.isArray(i)&&i.length==1&&i[0]instanceof Ur?t=i[0]:t=$B(e,zu(i),!1)}return t}function $fe(t){let e=t.startState,r=e.facet(jB),n=t;for(let s=r.length-1;s>=0;s--){let i=r[s](t);i&&Object.keys(i).length&&(n=BB(n,WS(e,i,t.changes.newLength),!0))}return n==t?t:Ur.create(e,t.changes,t.selection,n.effects,n.annotations,n.scrollIntoView)}const Ufe=[];function zu(t){return t==null?Ufe:Array.isArray(t)?t:[t]}var Hr=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Hr||(Hr={}));const Hfe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let VS;try{VS=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function zfe(t){if(VS)return VS.test(t);for(let e=0;e<t.length;e++){let r=t[e];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||Hfe.test(r)))return!0}return!1}function Wfe(t){return e=>{if(!/\S/.test(e))return Hr.Space;if(zfe(e))return Hr.Word;for(let r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return Hr.Word;return Hr.Other}}class Bt{constructor(e,r,n,s,i,o){this.config=e,this.doc=r,this.selection=n,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)of(this,a<<1);this.computeSlot=null}field(e,r=!0){let n=this.config.address[e.id];if(n==null){if(r)throw new RangeError("Field is not present in this state");return}return of(this,n),Vb(this,n)}update(...e){return $B(this,e,!0)}applyTransaction(e){let r=this.config,{base:n,compartments:s}=r;for(let a of e.effects)a.is(yc.reconfigure)?(r&&(s=new Map,r.compartments.forEach((l,c)=>s.set(c,l)),r=null),s.set(a.value.compartment,a.value.extension)):a.is(Ct.reconfigure)?(r=null,n=a.value):a.is(Ct.appendConfig)&&(r=null,n=zu(n).concat(a.value));let i;r?i=e.startState.values.slice():(r=Wb.resolve(n,s,this),i=new Bt(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(zS)?e.newSelection:e.newSelection.asSingle();new Bt(r,e.newDoc,o,i,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:e},range:De.cursor(r.from+e.length)}))}changeByRange(e){let r=this.selection,n=e(r.ranges[0]),s=this.changes(n.changes),i=[n.range],o=zu(n.effects);for(let a=1;a<r.ranges.length;a++){let l=e(r.ranges[a]),c=this.changes(l.changes),u=c.map(s);for(let h=0;h<a;h++)i[h]=i[h].map(u);let d=s.mapDesc(c,!0);i.push(l.range.map(d)),s=s.compose(u),o=Ct.mapEffects(o,u).concat(Ct.mapEffects(zu(l.effects),d))}return{changes:s,selection:De.create(i,r.mainIndex),effects:o}}changes(e=[]){return e instanceof Xr?e:Xr.of(e,this.doc.length,this.facet(Bt.lineSeparator))}toText(e){return Vt.of(e.split(this.facet(Bt.lineSeparator)||FS))}sliceDoc(e=0,r=this.doc.length){return this.doc.sliceString(e,r,this.lineBreak)}facet(e){let r=this.config.address[e.id];return r==null?e.default:(of(this,r),Vb(this,r))}toJSON(e){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let s=e[n];s instanceof fn&&this.config.address[s.id]!=null&&(r[n]=s.spec.toJSON(this.field(e[n]),this))}return r}static fromJSON(e,r={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(n){for(let i in n)if(Object.prototype.hasOwnProperty.call(e,i)){let o=n[i],a=e[i];s.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Bt.create({doc:e.doc,selection:De.fromJSON(e.selection),extensions:r.extensions?s.concat([r.extensions]):s})}static create(e={}){let r=Wb.resolve(e.extensions||[],new Map),n=e.doc instanceof Vt?e.doc:Vt.of((e.doc||"").split(r.staticFacet(Bt.lineSeparator)||FS)),s=e.selection?e.selection instanceof De?e.selection:De.single(e.selection.anchor,e.selection.head):De.single(0);return IB(s,n.length),r.staticFacet(zS)||(s=s.asSingle()),new Bt(r,n,s,r.dynamicSlots.map(()=>null),(i,o)=>o.create(i),null)}get tabSize(){return this.facet(Bt.tabSize)}get lineBreak(){return this.facet(Bt.lineSeparator)||`
`}get readOnly(){return this.facet(FB)}phrase(e,...r){for(let n of this.facet(Bt.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return r.length&&(e=e.replace(/\$(\$|\d*)/g,(n,s)=>{if(s=="$")return"$";let i=+(s||1);return!i||i>r.length?n:r[i-1]})),e}languageDataAt(e,r,n=-1){let s=[];for(let i of this.facet(DB))for(let o of i(this,r,n))Object.prototype.hasOwnProperty.call(o,e)&&s.push(o[e]);return s}charCategorizer(e){let r=this.languageDataAt("wordChars",e);return Wfe(r.length?r[0]:"")}wordAt(e){let{text:r,from:n,length:s}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,a=e-n;for(;o>0;){let l=un(r,o,!1);if(i(r.slice(l,o))!=Hr.Word)break;o=l}for(;a<s;){let l=un(r,a);if(i(r.slice(a,l))!=Hr.Word)break;a=l}return o==a?null:De.range(o+n,a+n)}}Bt.allowMultipleSelections=zS;Bt.tabSize=Qe.define({combine:t=>t.length?t[0]:4});Bt.lineSeparator=OB;Bt.readOnly=FB;Bt.phrases=Qe.define({compare(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length==n.length&&r.every(s=>t[s]==e[s])}});Bt.languageData=DB;Bt.changeFilter=LB;Bt.transactionFilter=MB;Bt.transactionExtender=jB;yc.reconfigure=Ct.define();function Mc(t,e,r={}){let n={};for(let s of t)for(let i of Object.keys(s)){let o=s[i],a=n[i];if(a===void 0)n[i]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(r,i))n[i]=r[i](a,o);else throw new Error("Config merge conflict for field "+i)}for(let s in e)n[s]===void 0&&(n[s]=e[s]);return n}class il{eq(e){return this==e}range(e,r=e){return GS.create(e,r,this)}}il.prototype.startSide=il.prototype.endSide=0;il.prototype.point=!1;il.prototype.mapMode=In.TrackDel;function bk(t,e){return t==e||t.constructor==e.constructor&&t.eq(e)}let GS=class UB{constructor(e,r,n){this.from=e,this.to=r,this.value=n}static create(e,r,n){return new UB(e,r,n)}};function qS(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class yk{constructor(e,r,n,s){this.from=e,this.to=r,this.value=n,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,r,n,s=0){let i=n?this.to:this.from;for(let o=s,a=i.length;;){if(o==a)return o;let l=o+a>>1,c=i[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-r;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,r,n,s){for(let i=this.findIndex(r,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(s(this.from[i]+e,this.to[i]+e,this.value[i])===!1)return!1}map(e,r){let n=[],s=[],i=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,h,f;if(u==d){let b=r.mapPos(u,c.startSide,c.mapMode);if(b==null||(h=f=b,c.startSide!=c.endSide&&(f=r.mapPos(u,c.endSide),f<h)))continue}else if(h=r.mapPos(u,c.startSide),f=r.mapPos(d,c.endSide),h>f||h==f&&c.startSide>0&&c.endSide<=0)continue;(f-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(a=Math.max(a,f-h)),n.push(c),s.push(h-o),i.push(f-o))}return{mapped:n.length?new yk(s,i,n,a):null,pos:o}}}class Dt{constructor(e,r,n,s){this.chunkPos=e,this.chunk=r,this.nextLayer=n,this.maxPoint=s}static create(e,r,n,s){return new Dt(e,r,n,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let r of this.chunk)e+=r.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:r=[],sort:n=!1,filterFrom:s=0,filterTo:i=this.length}=e,o=e.filter;if(r.length==0&&!o)return this;if(n&&(r=r.slice().sort(qS)),this.isEmpty)return r.length?Dt.of(r):this;let a=new HB(this,null,-1).goto(0),l=0,c=[],u=new vc;for(;a.value||l<r.length;)if(l<r.length&&(a.from-r[l].from||a.startSide-r[l].value.startSide)>=0){let d=r[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==r.length||this.chunkEnd(a.chunkIndex)<r[l].from)&&(!o||s>this.chunkEnd(a.chunkIndex)||i<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||s>a.to||i<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(GS.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Dt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:s,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let r=[],n=[],s=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)s=Math.max(s,l.maxPoint),r.push(l),n.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(s=Math.max(s,u.maxPoint),r.push(u),n.push(d))}}let i=this.nextLayer.map(e);return r.length==0?i:new Dt(n,r,i||Dt.empty,s)}between(e,r,n){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let i=this.chunkPos[s],o=this.chunk[s];if(r>=i&&e<=i+o.length&&o.between(i,e-i,r-i,n)===!1)return}this.nextLayer.between(e,r,n)}}iter(e=0){return Zf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,r=0){return Zf.from(e).goto(r)}static compare(e,r,n,s,i=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=i),a=r.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=i),l=iN(o,a,n),c=new mh(o,l,i),u=new mh(a,l,i);n.iterGaps((d,h,f)=>oN(c,d,u,h,f,s)),n.empty&&n.length==0&&oN(c,0,u,0,0,s)}static eq(e,r,n=0,s){s==null&&(s=999999999);let i=e.filter(u=>!u.isEmpty&&r.indexOf(u)<0),o=r.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(i.length!=o.length)return!1;if(!i.length)return!0;let a=iN(i,o),l=new mh(i,a,0).goto(n),c=new mh(o,a,0).goto(n);for(;;){if(l.to!=c.to||!KS(l.active,c.active)||l.point&&(!c.point||!bk(l.point,c.point)))return!1;if(l.to>s)return!0;l.next(),c.next()}}static spans(e,r,n,s,i=-1){let o=new mh(e,null,i).goto(r),a=r,l=o.openStart;for(;;){let c=Math.min(o.to,n);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<r?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);s.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(s.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>n)return l+(o.point&&o.to>n?1:0);a=o.to,o.next()}}static of(e,r=!1){let n=new vc;for(let s of e instanceof GS?[e]:r?Vfe(e):e)n.add(s.from,s.to,s.value);return n.finish()}static join(e){if(!e.length)return Dt.empty;let r=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let s=e[n];s!=Dt.empty;s=s.nextLayer)r=new Dt(s.chunkPos,s.chunk,r,Math.max(s.maxPoint,r.maxPoint));return r}}Dt.empty=new Dt([],[],null,-1);function Vfe(t){if(t.length>1)for(let e=t[0],r=1;r<t.length;r++){let n=t[r];if(qS(e,n)>0)return t.slice().sort(qS);e=n}return t}Dt.empty.nextLayer=Dt.empty;class vc{finishChunk(e){this.chunks.push(new yk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,r,n){this.addInner(e,r,n)||(this.nextLayer||(this.nextLayer=new vc)).add(e,r,n)}addInner(e,r,n){let s=e-this.lastTo||n.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(r-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=r,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,r-e)),!0)}addChunk(e,r){if((e-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(e);let n=r.value.length-1;return this.last=r.value[n],this.lastFrom=r.from[n]+e,this.lastTo=r.to[n]+e,!0}finish(){return this.finishInner(Dt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let r=Dt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,r}}function iN(t,e,r){let n=new Map;for(let i of t)for(let o=0;o<i.chunk.length;o++)i.chunk[o].maxPoint<=0&&n.set(i.chunk[o],i.chunkPos[o]);let s=new Set;for(let i of e)for(let o=0;o<i.chunk.length;o++){let a=n.get(i.chunk[o]);a!=null&&(r?r.mapPos(a):a)==i.chunkPos[o]&&!r?.touchesRange(a,a+i.chunk[o].length)&&s.add(i.chunk[o])}return s}class HB{constructor(e,r,n,s=0){this.layer=e,this.skip=r,this.minPoint=n,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,r,!1),this}gotoInner(e,r,n){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],r,!0);(!n||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,r){(this.to-e||this.endSide-r)<0&&this.gotoInner(e,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],n=e+r.from[this.rangeIndex];if(this.from=n,this.to=e+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Zf{constructor(e){this.heap=e}static from(e,r=null,n=-1){let s=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&s.push(new HB(o,r,n,i));return s.length==1?s[0]:new Zf(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,r=-1e9){for(let n of this.heap)n.goto(e,r);for(let n=this.heap.length>>1;n>=0;n--)$x(this.heap,n);return this.next(),this}forward(e,r){for(let n of this.heap)n.forward(e,r);for(let n=this.heap.length>>1;n>=0;n--)$x(this.heap,n);(this.to-e||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),$x(this.heap,0)}}}function $x(t,e){for(let r=t[e];;){let n=(e<<1)+1;if(n>=t.length)break;let s=t[n];if(n+1<t.length&&s.compare(t[n+1])>=0&&(s=t[n+1],n++),r.compare(s)<0)break;t[n]=r,t[e]=s,e=n}}class mh{constructor(e,r,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Zf.from(e,r,n)}goto(e,r=-1e9){return this.cursor.goto(e,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=r,this.openStart=-1,this.next(),this}forward(e,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(e,r)}removeActive(e){Cg(this.active,e),Cg(this.activeTo,e),Cg(this.activeRank,e),this.minActive=aN(this.active,this.activeTo)}addActive(e){let r=0,{value:n,to:s,rank:i}=this.cursor;for(;r<this.activeRank.length&&(i-this.activeRank[r]||s-this.activeTo[r])>0;)r++;Tg(this.active,r,n),Tg(this.activeTo,r,s),Tg(this.activeRank,r,i),e&&Tg(e,r,this.cursor.from),this.minActive=aN(this.active,this.activeTo)}next(){let e=this.to,r=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),n&&Cg(n,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let i=this.cursor.value;if(!i.point)this.addActive(n),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=i,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=i.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let s=n.length-1;s>=0&&n[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let r=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&r.push(this.active[n]);return r.reverse()}openEnd(e){let r=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)r++;return r}}function oN(t,e,r,n,s,i){t.goto(e),r.goto(n);let o=n+s,a=n,l=n-e,c=!!i.boundChange;for(let u=!1;;){let d=t.to+l-r.to,h=d||t.endSide-r.endSide,f=h<0?t.to+l:r.to,b=Math.min(f,o);if(t.point||r.point?(t.point&&r.point&&bk(t.point,r.point)&&KS(t.activeForPoint(t.to),r.activeForPoint(r.to))||i.comparePoint(a,b,t.point,r.point),u=!1):(u&&i.boundChange(a),b>a&&!KS(t.active,r.active)&&i.compareRange(a,b,t.active,r.active),c&&b<o&&(d||t.openEnd(f)!=r.openEnd(f))&&(u=!0)),f>o)break;a=f,h<=0&&t.next(),h>=0&&r.next()}}function KS(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!=e[r]&&!bk(t[r],e[r]))return!1;return!0}function Cg(t,e){for(let r=e,n=t.length-1;r<n;r++)t[r]=t[r+1];t.pop()}function Tg(t,e,r){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=r}function aN(t,e){let r=-1,n=1e9;for(let s=0;s<e.length;s++)(e[s]-n||t[s].endSide-t[r].endSide)<0&&(r=s,n=e[s]);return r}function Iv(t,e,r=t.length){let n=0;for(let s=0;s<r&&s<t.length;)t.charCodeAt(s)==9?(n+=e-n%e,s++):(n++,s=un(t,s));return n}function Gfe(t,e,r,n){for(let s=0,i=0;;){if(i>=e)return s;if(s==t.length)break;i+=t.charCodeAt(s)==9?r-i%r:1,s=un(t,s)}return t.length}const YS="",lN=typeof Symbol>"u"?"__"+YS:Symbol.for(YS),XS=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),cN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ol{constructor(e,r){this.rules=[];let{finish:n}=r||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function i(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let b=a[f];if(/&/.test(f))i(f.split(/,\s*/).map(m=>o.map(g=>m.replace(/&/,g))).reduce((m,g)=>m.concat(g)),b,l);else if(b&&typeof b=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");i(s(f),b,u,h)}else b!=null&&u.push(f.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+b+";")}(u.length||h)&&l.push((n&&!d&&!c?o.map(n):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)i(s(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=cN[lN]||1;return cN[lN]=e+1,YS+e.toString(36)}static mount(e,r,n){let s=e[XS],i=n&&n.nonce;s?i&&s.setNonce(i):s=new qfe(e,i),s.mount(Array.isArray(r)?r:[r],e)}}let uN=new Map;class qfe{constructor(e,r){let n=e.ownerDocument||e,s=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let i=uN.get(n);if(i)return e[XS]=i;this.sheet=new s.CSSStyleSheet,uN.set(n,this)}else this.styleTag=n.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);this.modules=[],e[XS]=this}mount(e,r){let n=this.sheet,s=0,i=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<i&&l>-1&&(this.modules.splice(l,1),i--,l=-1),l==-1){if(this.modules.splice(i++,0,a),n)for(let c=0;c<a.rules.length;c++)n.insertRule(a.rules[c],s++)}else{for(;i<l;)s+=this.modules[i++].rules.length;s+=a.rules.length,i++}}if(n)r.adoptedStyleSheets.indexOf(this.sheet)<0&&(r.adoptedStyleSheets=[this.sheet,...r.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=r.head||r;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var al={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Qf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Kfe=typeof navigator<"u"&&/Mac/.test(navigator.platform),Yfe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var yn=0;yn<10;yn++)al[48+yn]=al[96+yn]=String(yn);for(var yn=1;yn<=24;yn++)al[yn+111]="F"+yn;for(var yn=65;yn<=90;yn++)al[yn]=String.fromCharCode(yn+32),Qf[yn]=String.fromCharCode(yn);for(var Ux in al)Qf.hasOwnProperty(Ux)||(Qf[Ux]=al[Ux]);function Xfe(t){var e=Kfe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Yfe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?Qf:al)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function nn(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var s=r[n];typeof s=="string"?t.setAttribute(n,s):s!=null&&(t[n]=s)}e++}for(;e<arguments.length;e++)zB(t,arguments[e]);return t}function zB(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var r=0;r<e.length;r++)zB(t,e[r]);else throw new RangeError("Unsupported child node: "+e)}let Hn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},JS=typeof document<"u"?document:{documentElement:{style:{}}};const ZS=/Edge\/(\d+)/.exec(Hn.userAgent),WB=/MSIE \d/.test(Hn.userAgent),QS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Hn.userAgent),Nv=!!(WB||QS||ZS),dN=!Nv&&/gecko\/(\d+)/i.test(Hn.userAgent),Hx=!Nv&&/Chrome\/(\d+)/.exec(Hn.userAgent),Jfe="webkitFontSmoothing"in JS.documentElement.style,eE=!Nv&&/Apple Computer/.test(Hn.vendor),hN=eE&&(/Mobile\/\w+/.test(Hn.userAgent)||Hn.maxTouchPoints>2);var Je={mac:hN||/Mac/.test(Hn.platform),windows:/Win/.test(Hn.platform),linux:/Linux|X11/.test(Hn.platform),ie:Nv,ie_version:WB?JS.documentMode||6:QS?+QS[1]:ZS?+ZS[1]:0,gecko:dN,gecko_version:dN?+(/Firefox\/(\d+)/.exec(Hn.userAgent)||[0,0])[1]:0,chrome:!!Hx,chrome_version:Hx?+Hx[1]:0,ios:hN,android:/Android\b/.test(Hn.userAgent),webkit_version:Jfe?+(/\bAppleWebKit\/(\d+)/.exec(Hn.userAgent)||[0,0])[1]:0,safari:eE,safari_version:eE?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Hn.userAgent)||[0,0])[1]:0,tabSize:JS.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function vk(t,e){for(let r in t)r=="class"&&e.class?e.class+=" "+t.class:r=="style"&&e.style?e.style+=";"+t.style:e[r]=t[r];return e}const Gb=Object.create(null);function _k(t,e,r){if(t==e)return!0;t||(t=Gb),e||(e=Gb);let n=Object.keys(t),s=Object.keys(e);if(n.length-0!=s.length-0)return!1;for(let i of n)if(i!=r&&(s.indexOf(i)==-1||t[i]!==e[i]))return!1;return!0}function Zfe(t,e){for(let r=t.attributes.length-1;r>=0;r--){let n=t.attributes[r].name;e[n]==null&&t.removeAttribute(n)}for(let r in e){let n=e[r];r=="style"?t.style.cssText=n:t.getAttribute(r)!=n&&t.setAttribute(r,n)}}function fN(t,e,r){let n=!1;if(e)for(let s in e)r&&s in r||(n=!0,s=="style"?t.style.cssText="":t.removeAttribute(s));if(r)for(let s in r)e&&e[s]==r[s]||(n=!0,s=="style"?t.style.cssText=r[s]:t.setAttribute(s,r[s]));return n}function Qfe(t){let e=Object.create(null);for(let r=0;r<t.attributes.length;r++){let n=t.attributes[r];e[n.name]=n.value}return e}class wl{eq(e){return!1}updateDOM(e,r){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,r,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var _n=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(_n||(_n={}));class It extends il{constructor(e,r,n,s){super(),this.startSide=e,this.endSide=r,this.widget=n,this.spec=s}get heightRelevant(){return!1}static mark(e){return new Xp(e)}static widget(e){let r=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return r+=n&&!e.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new _c(e,r,r,n,e.widget||null,!1)}static replace(e){let r=!!e.block,n,s;if(e.isBlockGap)n=-5e8,s=4e8;else{let{start:i,end:o}=VB(e,r);n=(i?r?-3e8:-1:5e8)-1,s=(o?r?2e8:1:-6e8)+1}return new _c(e,n,s,r,e.widget||null,!0)}static line(e){return new Jp(e)}static set(e,r=!1){return Dt.of(e,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}It.none=Dt.empty;class Xp extends It{constructor(e){let{start:r,end:n}=VB(e);super(r?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?vk(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||Gb}eq(e){return this==e||e instanceof Xp&&this.tagName==e.tagName&&_k(this.attrs,e.attrs)}range(e,r=e){if(e>=r)throw new RangeError("Mark decorations may not be empty");return super.range(e,r)}}Xp.prototype.point=!1;class Jp extends It{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Jp&&this.spec.class==e.spec.class&&_k(this.spec.attributes,e.spec.attributes)}range(e,r=e){if(r!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,r)}}Jp.prototype.mapMode=In.TrackBefore;Jp.prototype.point=!0;class _c extends It{constructor(e,r,n,s,i,o){super(r,n,i,e),this.block=s,this.isReplace=o,this.mapMode=s?r<=0?In.TrackBefore:In.TrackAfter:In.TrackDel}get type(){return this.startSide!=this.endSide?_n.WidgetRange:this.startSide<=0?_n.WidgetBefore:_n.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof _c&&epe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,r=e){if(this.isReplace&&(e>r||e==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,r)}}_c.prototype.point=!0;function VB(t,e=!1){let{inclusiveStart:r,inclusiveEnd:n}=t;return r==null&&(r=t.inclusive),n==null&&(n=t.inclusive),{start:r??e,end:n??e}}function epe(t,e){return t==e||!!(t&&e&&t.compare(e))}function Wu(t,e,r,n=0){let s=r.length-1;s>=0&&r[s]+n>=t?r[s]=Math.max(r[s],e):r.push(t,e)}class ep extends il{constructor(e,r){super(),this.tagName=e,this.attributes=r}eq(e){return e==this||e instanceof ep&&this.tagName==e.tagName&&_k(this.attributes,e.attributes)}static create(e){return new ep(e.tagName,e.attributes||Gb)}static set(e,r=!1){return Dt.of(e,r)}}ep.prototype.startSide=ep.prototype.endSide=-1;function tp(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function tE(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function af(t,e){if(!e.anchorNode)return!1;try{return tE(t,e.anchorNode)}catch{return!1}}function U0(t){return t.nodeType==3?rp(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function lf(t,e,r,n){return r?pN(t,e,r,n,-1)||pN(t,e,r,n,1):!1}function ll(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function qb(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function pN(t,e,r,n,s){for(;;){if(t==r&&e==n)return!0;if(e==(s<0?0:aa(t))){if(t.nodeName=="DIV")return!1;let i=t.parentNode;if(!i||i.nodeType!=1)return!1;e=ll(t)+(s<0?0:1),t=i}else if(t.nodeType==1){if(t=t.childNodes[e+(s<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=s<0?aa(t):0}else return!1}}function aa(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Kb(t,e){let r=e?t.left:t.right;return{left:r,right:r,top:t.top,bottom:t.bottom}}function tpe(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function GB(t,e){let r=e.width/t.offsetWidth,n=e.height/t.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.width-t.offsetWidth)<1)&&(r=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-t.offsetHeight)<1)&&(n=1),{scaleX:r,scaleY:n}}function rpe(t,e,r,n,s,i,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let h,f=u==l.body,b=1,m=1;if(f)h=tpe(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let v=u.getBoundingClientRect();({scaleX:b,scaleY:m}=GB(u,v)),h={left:v.left,right:v.left+u.clientWidth*b,top:v.top,bottom:v.top+u.clientHeight*m}}let g=0,y=0;if(s=="nearest")e.top<h.top?(y=e.top-(h.top+o),r>0&&e.bottom>h.bottom+y&&(y=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(y=e.bottom-h.bottom+o,r<0&&e.top-y<h.top&&(y=e.top-(h.top+o)));else{let v=e.bottom-e.top,_=h.bottom-h.top;y=(s=="center"&&v<=_?e.top+v/2-_/2:s=="start"||s=="center"&&r<0?e.top-o:e.bottom-_+o)-h.top}if(n=="nearest"?e.left<h.left?(g=e.left-(h.left+i),r>0&&e.right>h.right+g&&(g=e.right-h.right+i)):e.right>h.right&&(g=e.right-h.right+i,r<0&&e.left<h.left+g&&(g=e.left-(h.left+i))):g=(n=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:n=="start"==a?e.left-i:e.right-(h.right-h.left)+i)-h.left,g||y)if(f)c.scrollBy(g,y);else{let v=0,_=0;if(y){let x=u.scrollTop;u.scrollTop+=y/m,_=(u.scrollTop-x)*m}if(g){let x=u.scrollLeft;u.scrollLeft+=g/b,v=(u.scrollLeft-x)*b}e={left:e.left-v,top:e.top-_,right:e.right-v,bottom:e.bottom-_},v&&Math.abs(v-g)<1&&(n="nearest"),_&&Math.abs(_-y)<1&&(s="nearest")}if(f)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function npe(t){let e=t.ownerDocument,r,n;for(let s=t.parentNode;s&&!(s==e.body||r&&n);)if(s.nodeType==1)!n&&s.scrollHeight>s.clientHeight&&(n=s),!r&&s.scrollWidth>s.clientWidth&&(r=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:r,y:n}}class spe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:r,focusNode:n}=e;this.set(r,Math.min(e.anchorOffset,r?aa(r):0),n,Math.min(e.focusOffset,n?aa(n):0))}set(e,r,n,s){this.anchorNode=e,this.anchorOffset=r,this.focusNode=n,this.focusOffset=s}}let Ul=null;Je.safari&&Je.safari_version>=26&&(Ul=!1);function qB(t){if(t.setActive)return t.setActive();if(Ul)return t.focus(Ul);let e=[];for(let r=t;r&&(e.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(t.focus(Ul==null?{get preventScroll(){return Ul={preventScroll:!0},!0}}:void 0),!Ul){Ul=!1;for(let r=0;r<e.length;){let n=e[r++],s=e[r++],i=e[r++];n.scrollTop!=s&&(n.scrollTop=s),n.scrollLeft!=i&&(n.scrollLeft=i)}}}let mN;function rp(t,e,r=e){let n=mN||(mN=document.createRange());return n.setEnd(t,r),n.setStart(t,e),n}function Vu(t,e,r,n){let s={key:e,code:e,keyCode:r,which:r,cancelable:!0};n&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=n);let i=new KeyboardEvent("keydown",s);i.synthetic=!0,t.dispatchEvent(i);let o=new KeyboardEvent("keyup",s);return o.synthetic=!0,t.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function ipe(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function ope(t,e){let r=e.focusNode,n=e.focusOffset;if(!r||e.anchorNode!=r||e.anchorOffset!=n)return!1;for(n=Math.min(n,aa(r));;)if(n){if(r.nodeType!=1)return!1;let s=r.childNodes[n-1];s.contentEditable=="false"?n--:(r=s,n=aa(r))}else{if(r==t)return!0;n=ll(r),r=r.parentNode}}function KB(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function YB(t,e){for(let r=t,n=e;;){if(r.nodeType==3&&n>0)return{node:r,offset:n};if(r.nodeType==1&&n>0){if(r.contentEditable=="false")return null;r=r.childNodes[n-1],n=aa(r)}else if(r.parentNode&&!qb(r))n=ll(r),r=r.parentNode;else return null}}function XB(t,e){for(let r=t,n=e;;){if(r.nodeType==3&&n<r.nodeValue.length)return{node:r,offset:n};if(r.nodeType==1&&n<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[n],n=0}else if(r.parentNode&&!qb(r))n=ll(r)+1,r=r.parentNode;else return null}}class vi{constructor(e,r,n=!0){this.node=e,this.offset=r,this.precise=n}static before(e,r){return new vi(e.parentNode,ll(e),r)}static after(e,r){return new vi(e.parentNode,ll(e)+1,r)}}var ur=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(ur||(ur={}));const xc=ur.LTR,xk=ur.RTL;function JB(t){let e=[];for(let r=0;r<t.length;r++)e.push(1<<+t[r]);return e}const ape=JB("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),lpe=JB("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),rE=Object.create(null),Bi=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),r=t.charCodeAt(1);rE[e]=r,rE[r]=-e}function ZB(t){return t<=247?ape[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?lpe[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const cpe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class uo{get dir(){return this.level%2?xk:xc}constructor(e,r,n){this.from=e,this.to=r,this.level=n}side(e,r){return this.dir==r==e?this.to:this.from}forward(e,r){return e==(this.dir==r)}static find(e,r,n,s){let i=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=r&&a.to>=r){if(a.level==n)return o;(i<0||(s!=0?s<0?a.from<r:a.to>r:e[i].level>a.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}function QB(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++){let n=t[r],s=e[r];if(n.from!=s.from||n.to!=s.to||n.direction!=s.direction||!QB(n.inner,s.inner))return!1}return!0}const rr=[];function upe(t,e,r,n,s){for(let i=0;i<=n.length;i++){let o=i?n[i-1].to:e,a=i<n.length?n[i].from:r,l=i?256:s;for(let c=o,u=l,d=l;c<a;c++){let h=ZB(t.charCodeAt(c));h==512?h=u:h==8&&d==4&&(h=16),rr[c]=h==4?2:h,h&7&&(d=h),u=h}for(let c=o,u=l,d=l;c<a;c++){let h=rr[c];if(h==128)c<a-1&&u==rr[c+1]&&u&24?h=rr[c]=u:rr[c]=256;else if(h==64){let f=c+1;for(;f<a&&rr[f]==64;)f++;let b=c&&u==8||f<r&&rr[f]==8?d==1?1:8:256;for(let m=c;m<f;m++)rr[m]=b;c=f-1}else h==8&&d==1&&(rr[c]=1);u=h,h&7&&(d=h)}}}function dpe(t,e,r,n,s){let i=s==1?2:1;for(let o=0,a=0,l=0;o<=n.length;o++){let c=o?n[o-1].to:e,u=o<n.length?n[o].from:r;for(let d=c,h,f,b;d<u;d++)if(f=rE[h=t.charCodeAt(d)])if(f<0){for(let m=a-3;m>=0;m-=3)if(Bi[m+1]==-f){let g=Bi[m+2],y=g&2?s:g&4?g&1?i:s:0;y&&(rr[d]=rr[Bi[m]]=y),a=m;break}}else{if(Bi.length==189)break;Bi[a++]=d,Bi[a++]=h,Bi[a++]=l}else if((b=rr[d])==2||b==1){let m=b==s;l=m?0:1;for(let g=a-3;g>=0;g-=3){let y=Bi[g+2];if(y&2)break;if(m)Bi[g+2]|=2;else{if(y&4)break;Bi[g+2]|=4}}}}}function hpe(t,e,r,n){for(let s=0,i=n;s<=r.length;s++){let o=s?r[s-1].to:t,a=s<r.length?r[s].from:e;for(let l=o;l<a;){let c=rr[l];if(c==256){let u=l+1;for(;;)if(u==a){if(s==r.length)break;u=r[s++].to,a=s<r.length?r[s].from:e}else if(rr[u]==256)u++;else break;let d=i==1,h=(u<e?rr[u]:n)==1,f=d==h?d?1:2:n;for(let b=u,m=s,g=m?r[m-1].to:t;b>l;)b==g&&(b=r[--m].from,g=m?r[m-1].to:t),rr[--b]=f;l=u}else i=c,l++}}}function nE(t,e,r,n,s,i,o){let a=n%2?2:1;if(n%2==s%2)for(let l=e,c=0;l<r;){let u=!0,d=!1;if(c==i.length||l<i[c].from){let m=rr[l];m!=a&&(u=!1,d=m==16)}let h=!u&&a==1?[]:null,f=u?n:n+1,b=l;e:for(;;)if(c<i.length&&b==i[c].from){if(d)break e;let m=i[c];if(!u)for(let g=m.to,y=c+1;;){if(g==r)break e;if(y<i.length&&i[y].from==g)g=i[y++].to;else{if(rr[g]==a)break e;break}}if(c++,h)h.push(m);else{m.from>l&&o.push(new uo(l,m.from,f));let g=m.direction==xc!=!(f%2);sE(t,g?n+1:n,s,m.inner,m.from,m.to,o),l=m.to}b=m.to}else{if(b==r||(u?rr[b]!=a:rr[b]==a))break;b++}h?nE(t,l,b,n+1,s,h,o):l<b&&o.push(new uo(l,b,f)),l=b}else for(let l=r,c=i.length;l>e;){let u=!0,d=!1;if(!c||l>i[c-1].to){let m=rr[l-1];m!=a&&(u=!1,d=m==16)}let h=!u&&a==1?[]:null,f=u?n:n+1,b=l;e:for(;;)if(c&&b==i[c-1].to){if(d)break e;let m=i[--c];if(!u)for(let g=m.from,y=c;;){if(g==e)break e;if(y&&i[y-1].to==g)g=i[--y].from;else{if(rr[g-1]==a)break e;break}}if(h)h.push(m);else{m.to<l&&o.push(new uo(m.to,l,f));let g=m.direction==xc!=!(f%2);sE(t,g?n+1:n,s,m.inner,m.from,m.to,o),l=m.from}b=m.from}else{if(b==e||(u?rr[b-1]!=a:rr[b-1]==a))break;b--}h?nE(t,b,l,n+1,s,h,o):b<l&&o.push(new uo(b,l,f)),l=b}}function sE(t,e,r,n,s,i,o){let a=e%2?2:1;upe(t,s,i,n,a),dpe(t,s,i,n,a),hpe(s,i,n,a),nE(t,s,i,e,r,n,o)}function fpe(t,e,r){if(!t)return[new uo(0,0,e==xk?1:0)];if(e==xc&&!r.length&&!cpe.test(t))return e8(t.length);if(r.length)for(;t.length>rr.length;)rr[rr.length]=256;let n=[],s=e==xc?0:1;return sE(t,s,s,r,0,t.length,n),n}function e8(t){return[new uo(0,t,0)]}let t8="";function ppe(t,e,r,n,s){var i;let o=n.head-t.from,a=uo.find(e,o,(i=n.bidiLevel)!==null&&i!==void 0?i:-1,n.assoc),l=e[a],c=l.side(s,r);if(o==c){let h=a+=s?1:-1;if(h<0||h>=e.length)return null;l=e[a=h],o=l.side(!s,r),c=l.side(s,r)}let u=un(t.text,o,l.forward(s,r));(u<l.from||u>l.to)&&(u=c),t8=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(s?e.length-1:0)?null:e[a+(s?1:-1)];return d&&u==c&&d.level+(s?0:1)<l.level?De.cursor(d.side(!s,r)+t.from,d.forward(s,r)?1:-1,d.level):De.cursor(u+t.from,l.forward(s,r)?-1:1,l.level)}function mpe(t,e,r){for(let n=e;n<r;n++){let s=ZB(t.charCodeAt(n));if(s==1)return xc;if(s==2||s==4)return xk}return xc}const r8=Qe.define(),n8=Qe.define(),s8=Qe.define(),i8=Qe.define(),iE=Qe.define(),o8=Qe.define(),a8=Qe.define(),wk=Qe.define(),Sk=Qe.define(),l8=Qe.define({combine:t=>t.some(e=>e)}),c8=Qe.define({combine:t=>t.some(e=>e)}),u8=Qe.define();class Gu{constructor(e,r="nearest",n="nearest",s=5,i=5,o=!1){this.range=e,this.y=r,this.x=n,this.yMargin=s,this.xMargin=i,this.isSnapshot=o}map(e){return e.empty?this:new Gu(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Gu(De.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const kg=Ct.define({map:(t,e)=>t.map(e)}),d8=Ct.define();function Rs(t,e,r){let n=t.facet(i8);n.length?n[0](e):window.onerror&&window.onerror(String(e),r,void 0,void 0,e)||(r?console.error(r+":",e):console.error(e))}const Vo=Qe.define({combine:t=>t.length?t[0]:!0});let gpe=0;const Au=Qe.define({combine(t){return t.filter((e,r)=>{for(let n=0;n<r;n++)if(t[n].plugin==e.plugin)return!1;return!0})}});class hn{constructor(e,r,n,s,i){this.id=e,this.create=r,this.domEventHandlers=n,this.domEventObservers=s,this.baseExtensions=i(this),this.extension=this.baseExtensions.concat(Au.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Au.of({plugin:this,arg:e}))}static define(e,r){const{eventHandlers:n,eventObservers:s,provide:i,decorations:o}=r||{};return new hn(gpe++,e,n,s,a=>{let l=[];return o&&l.push(Ov.of(c=>{let u=c.plugin(a);return u?o(u):It.none})),i&&l.push(i(a)),l})}static fromClass(e,r){return hn.define((n,s)=>new e(n,s),r)}}class zx{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(n){if(Rs(r.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(r){Rs(e.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(n){Rs(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const h8=Qe.define(),Dv=Qe.define(),Ov=Qe.define(),f8=Qe.define(),Ek=Qe.define(),Zp=Qe.define(),p8=Qe.define();function gN(t,e){let r=t.state.facet(p8);if(!r.length)return r;let n=r.map(i=>i instanceof Function?i(t):i),s=[];return Dt.spans(n,e.from,e.to,{point(){},span(i,o,a,l){let c=i-e.from,u=o-e.from,d=s;for(let h=a.length-1;h>=0;h--,l--){let f=a[h].spec.bidiIsolate,b;if(f==null&&(f=mpe(e.text,c,u)),l>0&&d.length&&(b=d[d.length-1]).to==c&&b.direction==f)b.to=u,d=b.inner;else{let m={from:c,to:u,direction:f,inner:[]};d.push(m),d=m.inner}}}}),s}const m8=Qe.define();function Ck(t){let e=0,r=0,n=0,s=0;for(let i of t.state.facet(m8)){let o=i(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(r=Math.max(r,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(s=Math.max(s,o.bottom)))}return{left:e,right:r,top:n,bottom:s}}const Lh=Qe.define();class Ys{constructor(e,r,n,s){this.fromA=e,this.toA=r,this.fromB=n,this.toB=s}join(e){return new Ys(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let r=e.length,n=this;for(;r>0;r--){let s=e[r-1];if(!(s.fromA>n.toA)){if(s.toA<n.fromA)break;n=n.join(s),e.splice(r-1,1)}}return e.splice(r,0,n),e}static extendWithRanges(e,r){if(r.length==0)return e;let n=[];for(let s=0,i=0,o=0;;){let a=s<e.length?e[s].fromB:1e9,l=i<r.length?r[i]:1e9,c=Math.min(a,l);if(c==1e9)break;let u=c+o,d=c,h=u;for(;;)if(i<r.length&&r[i]<=d){let f=r[i+1];i+=2,d=Math.max(d,f);for(let b=s;b<e.length&&e[b].fromB<=d;b++)o=e[b].toA-e[b].toB;h=Math.max(h,f+o)}else if(s<e.length&&e[s].fromB<=d){let f=e[s++];d=Math.max(d,f.toB),h=Math.max(h,f.toA),o=f.toA-f.toB}else break;n.push(new Ys(u,h,c,d))}return n}}class Yb{constructor(e,r,n){this.view=e,this.state=r,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Xr.empty(this.startState.doc.length);for(let i of n)this.changes=this.changes.compose(i.changes);let s=[];this.changes.iterChangedRanges((i,o,a,l)=>s.push(new Ys(i,o,a,l))),this.changedRanges=s}static create(e,r,n){return new Yb(e,r,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const bpe=[];class Vr{constructor(e,r,n=0){this.dom=e,this.length=r,this.flags=n,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return bpe}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let r=this.domAttrs;r&&Zfe(this.dom,r)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,r=this.posAtStart){let n=r;for(let s of this.children){if(s==e)return n;n+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,r){return null}domPosFor(e,r){let n=ll(this.dom),s=this.length?e>0:r>0;return new vi(this.parent.dom,n+(s?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof Mv)return e;return null}static get(e){return e.cmTile}}class Lv extends Vr{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let r=this.dom,n=null,s,i=e?.node==r?e:null,o=0;for(let a of this.children){if(a.sync(e),o+=a.length+a.breakAfter,s=n?n.nextSibling:r.firstChild,i&&s!=a.dom&&(i.written=!0),a.dom.parentNode==r)for(;s&&s!=a.dom;)s=bN(s);else r.insertBefore(a.dom,s);n=a.dom}for(s=n?n.nextSibling:r.firstChild,i&&s&&(i.written=!0);s;)s=bN(s);this.length=o}}function bN(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Mv extends Lv{constructor(e,r){super(r),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let r=Vr.get(e);if(r&&this.owns(r))return r;e=e.parentNode}}blockTiles(e){for(let r=[],n=this,s=0,i=0;;)if(s==n.children.length){if(!r.length)return;n=n.parent,n.breakAfter&&i++,s=r.pop()}else{let o=n.children[s++];if(o instanceof Za)r.push(s),n=o,s=0;else{let a=i+o.length,l=e(o,i);if(l!==void 0)return l;i=a+o.breakAfter}}}resolveBlock(e,r){let n,s=-1,i,o=-1;if(this.blockTiles((a,l)=>{let c=l+a.length;if(e>=l&&e<=c){if(a.isWidget()&&r>=-1&&r<=1){if(a.flags&32)return!0;a.flags&16&&(n=void 0)}(l<e||e==c&&(r<-1?a.length:a.covers(1)))&&(!n||!a.isWidget()&&n.isWidget())&&(n=a,s=e-l),(c>e||e==l&&(r>1?a.length:a.covers(-1)))&&(!i||!a.isWidget()&&i.isWidget())&&(i=a,o=e-l)}}),!n&&!i)throw new Error("No tile at position "+e);return n&&r<0||!i?{tile:n,offset:s}:{tile:i,offset:o}}}class Za extends Lv{constructor(e,r){super(e),this.wrapper=r}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,r){let n=new Za(r||document.createElement(e.tagName),e);return r||(n.flags|=4),n}}class md extends Lv{constructor(e,r){super(e),this.attrs=r}isLine(){return!0}static start(e,r,n){let s=new md(r||document.createElement("div"),e);return(!r||!n)&&(s.flags|=4),s}get domAttrs(){return this.attrs}resolveInline(e,r,n){let s=null,i=-1,o=null,a=-1;function l(u,d){for(let h=0,f=0;h<u.children.length&&f<=d;h++){let b=u.children[h],m=f+b.length;m>=d&&(b.isComposite()?l(b,d-f):(!o||o.isHidden&&(r>0||n&&vpe(o,b)))&&(m>d||b.flags&32)?(o=b,a=d-f):(f<d||b.flags&16&&!b.isHidden)&&(s=b,i=d-f)),f=m}}l(this,e);let c=(r<0?s:o)||s||o;return c?{tile:c,offset:c==s?i:a}:null}coordsIn(e,r){let n=this.resolveInline(e,r,!0);return n?n.tile.coordsIn(Math.max(0,n.offset),r):ype(this)}domIn(e,r){let n=this.resolveInline(e,r);if(n){let{tile:s,offset:i}=n;if(this.dom.contains(s.dom))return s.isText()?new vi(s.dom,Math.min(s.dom.nodeValue.length,i)):s.domPosFor(i,s.flags&16?1:s.flags&32?-1:r);let o=n.tile.parent,a=!1;for(let l of o.children){if(a)return new vi(l.dom,0);l==n.tile&&(a=!0)}}return new vi(this.dom,0)}}function ype(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let r=U0(e);return r[r.length-1]||null}function vpe(t,e){let r=t.coordsIn(0,1),n=e.coordsIn(0,1);return r&&n&&n.top<r.bottom}class cs extends Lv{constructor(e,r){super(e),this.mark=r}get domAttrs(){return this.mark.attrs}static of(e,r){let n=new cs(r||document.createElement(e.tagName),e);return r||(n.flags|=4),n}}class Zl extends Vr{constructor(e,r){super(e,r.length),this.text=r}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,r){let n=this.dom.nodeValue.length;e>n&&(e=n);let s=e,i=e,o=0;e==0&&r<0||e==n&&r>=0?Je.chrome||Je.gecko||(e?(s--,o=1):i<n&&(i++,o=-1)):r<0?s--:i<n&&i++;let a=rp(this.dom,s,i).getClientRects();if(!a.length)return null;let l=a[(o?o<0:r>=0)?0:a.length-1];return Je.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Kb(l,o<0):l||null}static of(e,r){let n=new Zl(r||document.createTextNode(e),e);return r||(n.flags|=2),n}}class wc extends Vr{constructor(e,r,n,s){super(e,r,s),this.widget=n}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,r){return this.coordsInWidget(e,r,!1)}coordsInWidget(e,r,n){let s=this.widget.coordsAt(this.dom,e,r);if(s)return s;if(n)return Kb(this.dom.getBoundingClientRect(),this.length?e==0:r<=0);{let i=this.dom.getClientRects(),o=null;if(!i.length)return null;let a=this.flags&16?!0:this.flags&32?!1:e>0;for(let l=a?i.length-1:0;o=i[l],!(e>0?l==0:l==i.length-1||o.top<o.bottom);l+=a?-1:1);return Kb(o,!a)}}get overrideDOMText(){if(!this.length)return Vt.empty;let{root:e}=this;if(!e)return Vt.empty;let r=this.posAtStart;return e.view.state.doc.slice(r,r+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,r,n,s,i){return i||(i=e.toDOM(r),e.editable||(i.contentEditable="false")),new wc(i,n,e,s)}}class Xb extends Vr{constructor(e){let r=document.createElement("img");r.className="cm-widgetBuffer",r.setAttribute("aria-hidden","true"),super(r,0,e)}get isHidden(){return!0}get overrideDOMText(){return Vt.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class _pe{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,r,n){let{tile:s,index:i,beforeBreak:o,parents:a}=this;for(;e||r>0;)if(s.isComposite())if(o){if(!e)break;n&&n.break(),e--,o=!1}else if(i==s.children.length){if(!e&&!a.length)break;n&&n.leave(s),o=!!s.breakAfter,{tile:s,index:i}=a.pop(),i++}else{let l=s.children[i],c=l.breakAfter;(r>0?l.length<=e:l.length<e)&&(!n||n.skip(l,0,l.length)!==!1||!l.isComposite)?(o=!!c,i++,e-=l.length):(a.push({tile:s,index:i}),s=l,i=0,n&&l.isComposite()&&n.enter(l))}else if(i==s.length)o=!!s.breakAfter,{tile:s,index:i}=a.pop(),i++;else if(e){let l=Math.min(e,s.length-i);n&&n.skip(s,i,i+l),e-=l,i+=l}else break;return this.tile=s,this.index=i,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class xpe{constructor(e,r,n,s){this.from=e,this.to=r,this.wrapper=n,this.rank=s}}class wpe{constructor(e,r,n){this.cache=e,this.root=r,this.blockWrappers=n,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,r,n,s){var i;this.flushBuffer();let o=this.ensureMarks(r,n),a=o.lastChild;if(a&&a.isText()&&!(a.flags&8)&&a.length+e.length<512){this.cache.reused.set(a,2);let l=o.children[o.children.length-1]=new Zl(a.dom,a.text+e);l.parent=o}else o.append(s||Zl.of(e,(i=this.cache.find(Zl))===null||i===void 0?void 0:i.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,r){let n=this.curLine;n.dom!=r.line.dom&&(n.setDOM(this.cache.reused.has(r.line)?Wx(r.line.dom):r.line.dom),this.cache.reused.set(r.line,2));let s=n;for(let a=r.marks.length-1;a>=0;a--){let l=r.marks[a],c=s.lastChild;if(c instanceof cs&&c.mark.eq(l.mark))c.dom!=l.dom&&c.setDOM(Wx(l.dom)),s=c;else{if(this.cache.reused.get(l)){let d=Vr.get(l.dom);d&&d.setDOM(Wx(l.dom))}let u=cs.of(l.mark,l.dom);s.append(u),s=u}this.cache.reused.set(l,2)}let i=Vr.get(e.text);i&&this.cache.reused.set(i,2);let o=new Zl(e.text,e.text.nodeValue);o.flags|=8,s.append(o)}addInlineWidget(e,r,n){let s=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);s||this.flushBuffer();let i=this.ensureMarks(r,n);!s&&!(e.flags&16)&&i.append(this.getBuffer(1)),i.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,r,n){this.flushBuffer(),this.ensureMarks(r,n).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let r=this.afterWidget||this.lastBlock;r.length+=e,this.pos+=e}addLineStart(e,r){var n;e||(e=g8);let s=md.start(e,r||((n=this.cache.find(md))===null||n===void 0?void 0:n.dom),!!r);this.getBlockPos().append(this.lastBlock=this.curLine=s)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,r){var n;let s=this.curLine;for(let i=e.length-1;i>=0;i--){let o=e[i],a;if(r>0&&(a=s.lastChild)&&a instanceof cs&&a.mark.eq(o))s=a,r--;else{let l=cs.of(o,(n=this.cache.find(cs,c=>c.mark.eq(o)))===null||n===void 0?void 0:n.dom);s.append(l),s=l,r=0}}return s}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!yN(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(Je.ios&&yN(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Vx,0,32)||new wc(Vx.toDOM(),0,Vx,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let r=new xpe(e.from,e.to,e.value,e.rank),n=this.wrappers.length;for(;n>0&&(this.wrappers[n-1].rank-r.rank||this.wrappers[n-1].to-r.to)<0;)n--;this.wrappers.splice(n,0,r)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let r=this.root;for(let n of this.wrappers){let s=r.lastChild;if(n.from<this.pos&&s instanceof Za&&s.wrapper.eq(n.wrapper))r=s;else{let i=Za.of(n.wrapper,(e=this.cache.find(Za,o=>o.wrapper.eq(n.wrapper)))===null||e===void 0?void 0:e.dom);r.append(i),r=i}}return r}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let r=2|(e<0?16:32),n=this.cache.find(Xb,void 0,1);return n&&(n.flags=r),n||new Xb(r)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class Spe{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:s,lineBreak:i,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=s;let a=this.textOff=Math.min(e,s.length);return i?null:s.slice(0,a)}let r=Math.min(this.text.length,this.textOff+e),n=this.text.slice(this.textOff,r);return this.textOff=r,n}}const Jb=[wc,md,Zl,cs,Xb,Za,Mv];for(let t=0;t<Jb.length;t++)Jb[t].bucket=t;class Epe{constructor(e){this.view=e,this.buckets=Jb.map(()=>[]),this.index=Jb.map(()=>0),this.reused=new Map}add(e){let r=e.constructor.bucket,n=this.buckets[r];n.length<6?n.push(e):n[this.index[r]=(this.index[r]+1)%6]=e}find(e,r,n=2){let s=e.bucket,i=this.buckets[s],o=this.index[s];for(let a=i.length-1;a>=0;a--){let l=(a+o)%i.length,c=i[l];if((!r||r(c))&&!this.reused.has(c))return i.splice(l,1),l<o&&this.index[s]--,this.reused.set(c,n),c}return null}findWidget(e,r,n){let s=this.buckets[0];if(s.length)for(let i=0,o=0;;i++){if(i==s.length){if(o)return null;o=1,i=0}let a=s[i];if(!this.reused.has(a)&&(o==0?a.widget.compare(e):a.widget.constructor==e.constructor&&e.updateDOM(a.dom,this.view)))return s.splice(i,1),i<this.index[0]&&this.index[0]--,a.widget==e&&a.length==r&&(a.flags&497)==n?(this.reused.set(a,1),a):(this.reused.set(a,2),new wc(a.dom,r,e,a.flags&-498|n))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,r=2){if(!this.reused.has(e))return this.reused.set(e,r),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class Cpe{constructor(e,r,n,s,i){this.view=e,this.decorations=s,this.disallowBlockEffectsFor=i,this.openWidget=!1,this.openMarks=0,this.cache=new Epe(e),this.text=new Spe(e.state.doc),this.builder=new wpe(this.cache,new Mv(e,e.contentDOM),Dt.iter(n)),this.cache.reused.set(r,2),this.old=new _pe(r),this.reuseWalker={skip:(o,a,l)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(e,r){let n=r&&this.getCompositionContext(r.text);for(let s=0,i=0,o=0;;){let a=o<e.length?e[o++]:null,l=a?a.fromA:this.old.root.length;if(l>s){let c=l-s;this.preserve(c,!o,!a),s=l,i+=c}if(!a)break;r&&a.fromA<=r.range.fromA&&a.toA>=r.range.toA?(this.forward(a.fromA,r.range.fromA,r.range.fromA<r.range.toA?1:-1),this.emit(i,r.range.fromB),this.cache.clear(),this.builder.addComposition(r,n),this.text.skip(r.range.toB-r.range.fromB),this.forward(r.range.fromA,a.toA),this.emit(r.range.toB,a.toB)):(this.forward(a.fromA,a.toA),this.emit(i,a.toB)),i=a.toB,s=a.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,r,n){let s=Ape(this.old),i=this.openMarks;this.old.advance(e,n?1:-1,{skip:(o,a,l)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(l-a);else{let c=l>0||a<o.length?wc.of(o.widget,this.view,l-a,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);c.flags&256?(c.flags&=-2,this.builder.addBlockWidget(c)):(this.builder.ensureLine(null),this.builder.addInlineWidget(c,s,i),i=s.length)}else if(o.isText())this.builder.ensureLine(null),!a&&l==o.length?this.builder.addText(o.text,s,i,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(a,l),s,i)),i=s.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof Xb)this.cache.add(o);else if(o instanceof cs)this.builder.ensureLine(null),this.builder.addMark(o,s,i),this.cache.reused.set(o,1),i=s.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof cs&&s.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?s.length&&(s.length=i=0):o instanceof cs&&(s.shift(),i=Math.min(i,s.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,r){let n=null,s=this.builder,i=0,o=Dt.spans(this.decorations,e,r,{point:(a,l,c,u,d,h)=>{if(c instanceof _c){if(this.disallowBlockEffectsFor[h]){if(c.block)throw new RangeError("Block decorations may not be specified via plugins");if(l>this.view.state.doc.lineAt(a).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(i=u.length,d>u.length)s.continueWidget(l-a);else{let f=c.widget||(c.block?gd.block:gd.inline),b=Tpe(c),m=this.cache.findWidget(f,l-a,b)||wc.of(f,this.view,l-a,b);c.block?(c.startSide>0&&s.addLineStartIfNotCovered(n),s.addBlockWidget(m)):(s.ensureLine(n),s.addInlineWidget(m,u,d))}n=null}else n=kpe(n,c);l>a&&this.text.skip(l-a)},span:(a,l,c,u)=>{for(let d=a;d<l;){let h=this.text.next(Math.min(512,l-d));h==null?(s.addLineStartIfNotCovered(n),s.addBreak(),d++):(s.ensureLine(n),s.addText(h,c,d==a?u:c.length),d+=h.length),n=null}}});s.addLineStartIfNotCovered(n),this.openWidget=o>i,this.openMarks=o}forward(e,r,n=1){r-e<=10?this.old.advance(r-e,n,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(r-e-10,-1),this.old.advance(5,n,this.reuseWalker))}getCompositionContext(e){let r=[],n=null;for(let s=e.parentNode;;s=s.parentNode){let i=Vr.get(s);if(s==this.view.contentDOM)break;i instanceof cs?r.push(i):i?.isLine()?n=i:s.nodeName=="DIV"&&!n&&s!=this.view.contentDOM?n=new md(s,g8):r.push(cs.of(new Xp({tagName:s.nodeName.toLowerCase(),attributes:Qfe(s)}),s))}return{line:n,marks:r}}}function yN(t,e){let r=n=>{for(let s of n.children)if((e?s.isText():s.length)||r(s))return!0;return!1};return r(t)}function Tpe(t){let e=t.isReplace?(t.startSide<0?64:0)|(t.endSide>0?128:0):t.startSide>0?32:16;return t.block&&(e|=256),e}const g8={class:"cm-line"};function kpe(t,e){let r=e.spec.attributes,n=e.spec.class;return!r&&!n||(t||(t={class:"cm-line"}),r&&vk(r,t),n&&(t.class+=" "+n)),t}function Ape(t){let e=[];for(let r=t.parents.length;r>1;r--){let n=r==t.parents.length?t.tile:t.parents[r].tile;n instanceof cs&&e.push(n.mark)}return e}function Wx(t){let e=Vr.get(t);return e&&e.setDOM(t.cloneNode()),t}class gd extends wl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}gd.inline=new gd("span");gd.block=new gd("div");const Vx=new class extends wl{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class vN{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=It.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Mv(e,e.contentDOM),this.updateInner([new Ys(0,0,0,e.state.doc.length)],null)}update(e){var r;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:u,toA:d})=>d<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?s=this.domChanged.newSel.head:!jpe(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let i=s>-1?Ppe(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){let{from:u,to:d}=this.hasComposition;n=new Ys(u,d,e.changes.mapPos(u,-1),e.changes.mapPos(d,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(Je.ie||Je.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.blockWrappers;this.updateDeco();let l=Dpe(o,this.decorations,e.changes);l.length&&(n=Ys.extendWithRanges(n,l));let c=Lpe(a,this.blockWrappers,e.changes);return c.length&&(n=Ys.extendWithRanges(n,c)),i&&!n.some(u=>u.fromA<=i.range.fromA&&u.toA>=i.range.toA)&&(n=i.range.addToSet(n.slice())),this.tile.flags&2&&n.length==0?!1:(this.updateInner(n,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,r){this.view.viewState.mustMeasureContent=!0;let{observer:n}=this.view;n.ignore(()=>{if(r||e.length){let o=this.tile,a=new Cpe(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=a.run(e,r),oE(o,a.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let i=Je.chrome||Je.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(i),i&&(i.written||n.selectionRange.focusNode!=i.node||!this.tile.dom.contains(i.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let i of this.tile.children)i.isWidget()&&i.widget instanceof Gx&&s.push(i.dom);n.updateGaps(s)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let r of e.transactions)for(let n of r.effects)n.is(d8)&&(this.editContextFormatting=n.value)}updateSelection(e=!1,r=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:n}=this.tile,s=this.view.root.activeElement,i=s==n,o=!i&&!(this.view.state.facet(Vo)||n.tabIndex>-1)&&af(n,this.view.observer.selectionRange)&&!(s&&n.contains(s));if(!(i||r||o))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,c,u;if(l.empty?u=c=this.inlineDOMNearPos(l.anchor,l.assoc||1):(u=this.inlineDOMNearPos(l.head,l.head==l.from?1:-1),c=this.inlineDOMNearPos(l.anchor,l.anchor==l.from?1:-1)),Je.gecko&&l.empty&&!this.hasComposition&&Rpe(c)){let h=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(h,c.node.childNodes[c.offset]||null)),c=u=new vi(h,0),a=!0}let d=this.view.observer.selectionRange;(a||!d.focusNode||(!lf(c.node,c.offset,d.anchorNode,d.anchorOffset)||!lf(u.node,u.offset,d.focusNode,d.focusOffset))&&!this.suppressWidgetCursorChange(d,l))&&(this.view.observer.ignore(()=>{Je.android&&Je.chrome&&n.contains(d.focusNode)&&Mpe(d.focusNode,n)&&(n.blur(),n.focus({preventScroll:!0}));let h=tp(this.view.root);if(h)if(l.empty){if(Je.gecko){let f=Ipe(c.node,c.offset);if(f&&f!=3){let b=(f==1?YB:XB)(c.node,c.offset);b&&(c=new vi(b.node,b.offset))}}h.collapse(c.node,c.offset),l.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=l.bidiLevel)}else if(h.extend){h.collapse(c.node,c.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();l.anchor>l.head&&([c,u]=[u,c]),f.setEnd(u.node,u.offset),f.setStart(c.node,c.offset),h.removeAllRanges(),h.addRange(f)}o&&this.view.root.activeElement==n&&(n.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(c,u)),this.impreciseAnchor=c.precise?null:new vi(d.anchorNode,d.anchorOffset),this.impreciseHead=u.precise?null:new vi(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,r){return this.hasComposition&&r.empty&&lf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==r.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,r=e.state.selection.main,n=tp(e.root),{anchorNode:s,anchorOffset:i}=e.observer.selectionRange;if(!n||!r.empty||!r.assoc||!n.modify)return;let o=this.lineAt(r.head,r.assoc);if(!o)return;let a=o.posAtStart;if(r.head==a||r.head==a+o.length)return;let l=this.coordsAt(r.head,-1),c=this.coordsAt(r.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(r.head+r.assoc,r.assoc);n.collapse(u.node,u.offset),n.modify("move",r.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=r.from&&n.collapse(s,i)}posFromDOM(e,r){let n=this.tile.nearest(e);if(!n)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let s=n.posAtStart;if(n.isComposite()){let i;if(e==n.dom)i=n.dom.childNodes[r];else{let o=aa(e)==0?0:r==0?-1:1;for(;;){let a=e.parentNode;if(a==n.dom)break;o==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?o=-1:o=1),e=a}o<0?i=e:i=e.nextSibling}if(i==n.dom.firstChild)return s;for(;i&&!Vr.get(i);)i=i.nextSibling;if(!i)return s+n.length;for(let o=0,a=s;;o++){let l=n.children[o];if(l.dom==i)return a;a+=l.length+l.breakAfter}}else return n.isText()?e==n.dom?s+r:s+(r?n.length:0):s}domAtPos(e,r){let{tile:n,offset:s}=this.tile.resolveBlock(e,r);return n.isWidget()?n.domPosFor(e,r):n.domIn(s,r)}inlineDOMNearPos(e,r){let n,s=-1,i=!1,o,a=-1,l=!1;return this.tile.blockTiles((c,u)=>{if(c.isWidget()){if(c.flags&32&&u>=e)return!0;c.flags&16&&(i=!0)}else{let d=u+c.length;if(u<=e&&(n=c,s=e-u,i=d<e),d>=e&&!o&&(o=c,a=e-u,l=u>e),u>e&&o)return!0}}),!n&&!o?this.domAtPos(e,r):(i&&o?n=null:l&&n&&(o=null),n&&r<0||!o?n.domIn(s,r):o.domIn(a,r))}coordsAt(e,r){let{tile:n,offset:s}=this.tile.resolveBlock(e,r);return n.isWidget()?n.widget instanceof Gx?null:n.coordsInWidget(s,r,!0):n.coordsIn(s,r)}lineAt(e,r){let{tile:n}=this.tile.resolveBlock(e,r);return n.isLine()?n:null}coordsForChar(e){let{tile:r,offset:n}=this.tile.resolveBlock(e,1);if(!r.isLine())return null;function s(i,o){if(i.isComposite())for(let a of i.children){if(a.length>=o){let l=s(a,o);if(l)return l}if(o-=a.length,o<0)break}else if(i.isText()&&o<i.length){let a=un(i.text,o);if(a==o)return null;let l=rp(i.dom,o,a).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(c==l.length-1||u.top<u.bottom&&u.left<u.right)return u}}return null}return s(r,n)}measureVisibleLineHeights(e){let r=[],{from:n,to:s}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==ur.LTR,c=0,u=(d,h,f)=>{for(let b=0;b<d.children.length&&!(h>s);b++){let m=d.children[b],g=h+m.length,y=m.dom.getBoundingClientRect(),{height:v}=y;if(f&&!b&&(c+=y.top-f.top),m instanceof Za)g>n&&u(m,h,y);else if(h>=n&&(c>0&&r.push(-c),r.push(v+c),c=0,o)){let _=m.dom.lastChild,x=_?U0(_):[];if(x.length){let w=x[x.length-1],S=l?w.right-y.left:y.right-w.left;S>a&&(a=S,this.minWidth=i,this.minWidthFrom=h,this.minWidthTo=g)}}f&&b==d.children.length-1&&(c+=f.bottom-y.bottom),h=g+m.breakAfter}};return u(this.tile,0,null),r}textDirectionAt(e){let{tile:r}=this.tile.resolveBlock(e,1);return getComputedStyle(r.dom).direction=="rtl"?ur.RTL:ur.LTR}measureTextSize(){let e=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let a=0,l;for(let c of o.children){if(!c.isText()||/[^ -~]/.test(c.text))return;let u=U0(c.dom);if(u.length!=1)return;a+=u[0].width,l=u[0].height}if(a)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:a/o.length,textHeight:l}}});if(e)return e;let r=document.createElement("div"),n,s,i;return r.className="cm-line",r.style.width="99999px",r.style.position="absolute",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(r);let o=U0(r.firstChild)[0];n=r.getBoundingClientRect().height,s=o&&o.width?o.width/27:7,i=o&&o.height?o.height:n,r.remove()}),{lineHeight:n,charWidth:s,textHeight:i}}computeBlockGapDeco(){let e=[],r=this.view.viewState;for(let n=0,s=0;;s++){let i=s==r.viewports.length?null:r.viewports[s],o=i?i.from-1:this.view.state.doc.length;if(o>n){let a=(r.lineBlockAt(o).bottom-r.lineBlockAt(n).top)/this.view.scaleY;e.push(It.replace({widget:new Gx(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return It.set(e)}updateDeco(){let e=1,r=this.view.state.facet(Ov).map(i=>(this.dynamicDecorationMap[e++]=typeof i=="function")?i(this.view):i),n=!1,s=this.view.state.facet(Ek).map((i,o)=>{let a=typeof i=="function";return a&&(n=!0),a?i(this.view):i});for(s.length&&(this.dynamicDecorationMap[e++]=n,r.push(Dt.join(s))),this.decorations=[this.editContextFormatting,...r,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(f8).map(i=>typeof i=="function"?i(this.view):i)}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(u8))try{if(c(this.view,e.range,e))return!0}catch(u){Rs(this.view.state,u,"scroll handler")}let{range:r}=e,n=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),s;if(!n)return;!r.empty&&(s=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(n={left:Math.min(n.left,s.left),top:Math.min(n.top,s.top),right:Math.max(n.right,s.right),bottom:Math.max(n.bottom,s.bottom)});let i=Ck(this.view),o={left:n.left-i.left,top:n.top-i.top,right:n.right+i.right,bottom:n.bottom+i.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;rpe(this.view.scrollDOM,o,r.head<r.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==ur.LTR)}lineHasWidget(e){let r=n=>n.isWidget()||n.children.some(r);return r(this.tile.resolveBlock(e,1).tile)}destroy(){oE(this.tile)}}function oE(t,e){let r=e?.get(t);if(r!=1){r==null&&t.destroy();for(let n of t.children)oE(n,e)}}function Rpe(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function b8(t,e){let r=t.observer.selectionRange;if(!r.focusNode)return null;let n=YB(r.focusNode,r.focusOffset),s=XB(r.focusNode,r.focusOffset),i=n||s;if(s&&n&&s.node!=n.node){let a=Vr.get(s.node);if(!a||a.isText()&&a.text!=s.node.nodeValue)i=s;else if(t.docView.lastCompositionAfterCursor){let l=Vr.get(n.node);!l||l.isText()&&l.text!=n.node.nodeValue||(i=s)}}if(t.docView.lastCompositionAfterCursor=i!=n,!i)return null;let o=e-i.offset;return{from:o,to:o+i.node.nodeValue.length,node:i.node}}function Ppe(t,e,r){let n=b8(t,r);if(!n)return null;let{node:s,from:i,to:o}=n,a=s.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(n.from,n.to)!=a)return null;let l=e.invertedDesc;return{range:new Ys(l.mapPos(i),l.mapPos(o),i,o),text:s}}function Ipe(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Npe=class{constructor(){this.changes=[]}compareRange(e,r){Wu(e,r,this.changes)}comparePoint(e,r){Wu(e,r,this.changes)}boundChange(e){Wu(e,e,this.changes)}};function Dpe(t,e,r){let n=new Npe;return Dt.compare(t,e,r,n),n.changes}class Ope{constructor(){this.changes=[]}compareRange(e,r){Wu(e,r,this.changes)}comparePoint(){}boundChange(e){Wu(e,e,this.changes)}}function Lpe(t,e,r){let n=new Ope;return Dt.compare(t,e,r,n),n.changes}function Mpe(t,e){for(let r=t;r&&r!=e;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function jpe(t,e){let r=!1;return e&&t.iterChangedRanges((n,s)=>{n<e.to&&s>e.from&&(r=!0)}),r}class Gx extends wl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function Fpe(t,e,r=1){let n=t.charCategorizer(e),s=t.doc.lineAt(e),i=e-s.from;if(s.length==0)return De.cursor(e);i==0?r=1:i==s.length&&(r=-1);let o=i,a=i;r<0?o=un(s.text,i,!1):a=un(s.text,i);let l=n(s.text.slice(o,a));for(;o>0;){let c=un(s.text,o,!1);if(n(s.text.slice(c,o))!=l)break;o=c}for(;a<s.length;){let c=un(s.text,a);if(n(s.text.slice(a,c))!=l)break;a=c}return De.range(o+s.from,a+s.from)}function Bpe(t,e,r,n,s){let i=Math.round((n-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&r.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((s-r.top-(t.defaultLineHeight-a)*.5)/a);i+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(r.from,r.to);return r.from+Gfe(o,i,t.state.tabSize)}function aE(t,e,r){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){let s;for(let i of n.type){if(i.from>e)break;if(!(i.to<e)){if(i.from<e&&i.to>e)return i;(!s||i.type==_n.Text&&(s.type!=i.type||(r<0?i.from<e:i.to>e)))&&(s=i)}}return s||n}return n}function $pe(t,e,r,n){let s=aE(t,e.head,e.assoc||-1),i=!n||s.type!=_n.Text||!(t.lineWrapping||s.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(i){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(s.from),l=t.posAtCoords({x:r==(a==ur.LTR)?o.right-1:o.left+1,y:(i.top+i.bottom)/2});if(l!=null)return De.cursor(l,r?-1:1)}return De.cursor(r?s.to:s.from,r?-1:1)}function _N(t,e,r,n){let s=t.state.doc.lineAt(e.head),i=t.bidiSpans(s),o=t.textDirectionAt(s.from);for(let a=e,l=null;;){let c=ppe(s,i,o,a,r),u=t8;if(!c){if(s.number==(r?t.state.doc.lines:1))return a;u=`
`,s=t.state.doc.line(s.number+(r?1:-1)),i=t.bidiSpans(s),c=t.visualLineSide(s,!r)}if(l){if(!l(u))return a}else{if(!n)return c;l=n(u)}a=c}}function Upe(t,e,r){let n=t.state.charCategorizer(e),s=n(r);return i=>{let o=n(i);return s==Hr.Space&&(s=o),s==o}}function Hpe(t,e,r,n){let s=e.head,i=r?1:-1;if(s==(r?t.state.doc.length:0))return De.cursor(s,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(s,(e.empty?e.assoc:0)||(r?1:-1)),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=i<0?c.top:c.bottom;else{let b=t.viewState.lineBlockAt(s);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(s-b.from))),a=(i<0?b.top:b.bottom)+u}let d=l.left+o,h=n??t.viewState.heightOracle.textHeight>>1,f=lE(t,{x:d,y:a+h*i},!1,i);return De.cursor(f.pos,f.assoc,void 0,o)}function cf(t,e,r){for(;;){let n=0;for(let s of t)s.between(e-1,e+1,(i,o,a)=>{if(e>i&&e<o){let l=n||r||(e-i<o-e?-1:1);e=l<0?i:o,n=l}});if(!n)return e}}function y8(t,e){let r=null;for(let n=0;n<e.ranges.length;n++){let s=e.ranges[n],i=null;if(s.empty){let o=cf(t,s.from,0);o!=s.from&&(i=De.cursor(o,-1))}else{let o=cf(t,s.from,-1),a=cf(t,s.to,1);(o!=s.from||a!=s.to)&&(i=De.range(s.from==s.anchor?o:a,s.from==s.head?o:a))}i&&(r||(r=e.ranges.slice()),r[n]=i)}return r?De.create(r,e.mainIndex):e}function qx(t,e,r){let n=cf(t.state.facet(Zp).map(s=>s(t)),r.from,e.head>r.from?-1:1);return n==r.from?r:De.cursor(n,n<r.from?1:-1)}class so{constructor(e,r){this.pos=e,this.assoc=r}}function lE(t,e,r,n){let s=t.contentDOM.getBoundingClientRect(),i=s.top+t.viewState.paddingTop,{x:o,y:a}=e,l=a-i,c;for(;;){if(l<0)return new so(0,1);if(l>t.viewState.docHeight)return new so(t.state.doc.length,-1);if(c=t.elementAtHeight(l),n==null)break;if(c.type==_n.Text){if(n<0?c.to<t.viewport.from:c.from>t.viewport.to)break;let h=t.docView.coordsAt(n<0?c.from:c.to,n>0?-1:1);if(h&&(n<0?h.top<=l+i:h.bottom>=l+i))break}let d=t.viewState.heightOracle.textHeight/2;l=n>0?c.bottom+d:c.top-d}if(t.viewport.from>=c.to||t.viewport.to<=c.from){if(r)return null;if(c.type==_n.Text){let d=Bpe(t,s,c,o,a);return new so(d,d==c.from?1:-1)}}if(c.type!=_n.Text)return l<(c.top+c.bottom)/2?new so(c.from,1):new so(c.to,-1);let u=t.docView.lineAt(c.from,2);return(!u||u.length!=c.length)&&(u=t.docView.lineAt(c.from,-2)),new zpe(t,o,a,t.textDirectionAt(c.from)).scanTile(u,c.from)}class zpe{constructor(e,r,n,s){this.view=e,this.x=r,this.y=n,this.baseDir=s,this.line=null,this.spans=null}bidiSpansAt(e){return(!this.line||this.line.from>e||this.line.to<e)&&(this.line=this.view.state.doc.lineAt(e),this.spans=this.view.bidiSpans(this.line)),this}baseDirAt(e,r){let{line:n,spans:s}=this.bidiSpansAt(e);return s[uo.find(s,e-n.from,-1,r)].level==this.baseDir}dirAt(e,r){let{line:n,spans:s}=this.bidiSpansAt(e);return s[uo.find(s,e-n.from,-1,r)].dir}bidiIn(e,r){let{spans:n,line:s}=this.bidiSpansAt(e);return n.length>1||n.length&&(n[0].level!=this.baseDir||n[0].to+s.from<r)}scan(e,r){let n=0,s=e.length-1,i=new Set,o=this.bidiIn(e[0],e[s]),a,l,c=-1,u=1e9,d;e:for(;n<s;){let f=s-n,b=n+s>>1;t:if(i.has(b)){let g=n+Math.floor(Math.random()*f);for(let y=0;y<f;y++){if(!i.has(g)){b=g;break t}g++,g==s&&(g=n)}break e}i.add(b);let m=r(b);if(m)for(let g=0;g<m.length;g++){let y=m[g],v=0;if(y.bottom<this.y)(!a||a.bottom<y.bottom)&&(a=y),v=1;else if(y.top>this.y)(!l||l.top>y.top)&&(l=y),v=-1;else{let _=y.left>this.x?this.x-y.left:y.right<this.x?this.x-y.right:0,x=Math.abs(_);x<u&&(c=b,u=x,d=y),_&&(v=_<0==(this.baseDir==ur.LTR)?-1:1)}v==-1&&(!o||this.baseDirAt(e[b],1))?s=b:v==1&&(!o||this.baseDirAt(e[b+1],-1))&&(n=b+1)}}if(!d){let f=a&&(!l||this.y-a.bottom<l.top-this.y)?a:l;return this.y=(f.top+f.bottom)/2,this.scan(e,r)}let h=(o?this.dirAt(e[c],1):this.baseDir)==ur.LTR;return{i:c,after:this.x>(d.left+d.right)/2==h}}scanText(e,r){let n=[];for(let i=0;i<e.length;i=un(e.text,i))n.push(r+i);n.push(r+e.length);let s=this.scan(n,i=>{let o=n[i]-r,a=n[i+1]-r;return rp(e.dom,o,a).getClientRects()});return s.after?new so(n[s.i+1],-1):new so(n[s.i],1)}scanTile(e,r){if(!e.length)return new so(r,1);if(e.children.length==1){let a=e.children[0];if(a.isText())return this.scanText(a,r);if(a.isComposite())return this.scanTile(a,r)}let n=[r];for(let a=0,l=r;a<e.children.length;a++)n.push(l+=e.children[a].length);let s=this.scan(n,a=>{let l=e.children[a];return l.flags&48?null:(l.dom.nodeType==1?l.dom:rp(l.dom,0,l.length)).getClientRects()}),i=e.children[s.i],o=n[s.i];return i.isText()?this.scanText(i,o):i.isComposite()?this.scanTile(i,o):s.after?new so(n[s.i+1],-1):new so(o,1)}}const Mh="";class Wpe{constructor(e,r){this.points=e,this.view=r,this.text="",this.lineSeparator=r.state.facet(Bt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Mh}readRange(e,r){if(!e)return this;let n=e.parentNode;for(let s=e;;){this.findPointBefore(n,s);let i=this.text.length;this.readNode(s);let o=Vr.get(s),a=s.nextSibling;if(a==r){o?.breakAfter&&!a&&n!=this.view.contentDOM&&this.lineBreak();break}let l=Vr.get(a);(o&&l?o.breakAfter:(o?o.breakAfter:qb(s))||qb(a)&&(s.nodeName!="BR"||o?.isWidget())&&this.text.length>i)&&!Gpe(a,r)&&this.lineBreak(),s=a}return this.findPointBefore(n,r),this}readTextNode(e){let r=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,r.length));for(let n=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let i=-1,o=1,a;if(this.lineSeparator?(i=r.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(a=s.exec(r))&&(i=a.index,o=a[0].length),this.append(r.slice(n,i<0?r.length:i)),i<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);n=i+o}}readNode(e){let r=Vr.get(e),n=r&&r.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let s=n.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,r){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==r&&(n.pos=this.text.length)}findPointInside(e,r){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(Vpe(e,n.node,n.offset)?r:0))}}function Vpe(t,e,r){for(;;){if(!e||r<aa(e))return!1;if(e==t)return!0;r=ll(e)+1,e=e.parentNode}}function Gpe(t,e){let r;for(;!(t==e||!t);t=t.nextSibling){let n=Vr.get(t);if(!n?.isWidget())return!1;n&&(r||(r=[])).push(n)}if(r)for(let n of r){let s=n.overrideDOMText;if(s?.length)return!1}return!0}class xN{constructor(e,r){this.node=e,this.offset=r,this.pos=-1}}class qpe{constructor(e,r,n,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=r>-1;let{impreciseHead:i,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=v8(e.docView.tile,r,n,0))){let a=i||o?[]:Ype(e),l=new Wpe(a,e);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Xpe(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=i&&i.node==a.focusNode&&i.offset==a.focusOffset||!tE(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!tE(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((Je.ios||Je.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),h=Math.max(l,c),f=u.from-d,b=u.to-h;(f==0||f==1||d==0)&&(b==0||b==-1||h==e.state.doc.length)&&(l=0,c=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(De.range(c,l)):this.newSel=De.single(c,l)}}}function v8(t,e,r,n){if(t.isComposite()){let s=-1,i=-1,o=-1,a=-1;for(let l=0,c=n,u=n;l<t.children.length;l++){let d=t.children[l],h=c+d.length;if(c<e&&h>r)return v8(d,e,r,c);if(h>=e&&s==-1&&(s=l,i=c),c>r&&d.dom.parentNode==t.dom){o=l,a=u;break}u=h,c=h+d.breakAfter}return{from:i,to:a<0?n+t.length:a,startDOM:(s?t.children[s-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:o<t.children.length&&o>=0?t.children[o].dom:null}}else return t.isText()?{from:n,to:n+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}function _8(t,e){let r,{newSel:n}=e,s=t.state.selection.main,i=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=s.from,c=null;(i===8||Je.android&&e.text.length<a-o)&&(l=s.to,c="end");let u=x8(t.state.doc.sliceString(o,a,Mh),e.text,l-o,c);u&&(Je.chrome&&i==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Mh+Mh&&u.toB--,r={from:o+u.from,to:o+u.toA,insert:Vt.of(e.text.slice(u.from,u.toB).split(Mh))})}else n&&(!t.hasFocus&&t.state.facet(Vo)||Zb(n,s))&&(n=null);if(!r&&!n)return!1;if(!r&&e.typeOver&&!s.empty&&n&&n.main.empty?r={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,s.to)}:(Je.mac||Je.android)&&r&&r.from==r.to&&r.from==s.head-1&&/^\. ?$/.test(r.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(n&&r.insert.length==2&&(n=De.single(n.main.anchor-1,n.main.head-1)),r={from:r.from,to:r.to,insert:Vt.of([r.insert.toString().replace("."," ")])}):r&&r.from>=s.from&&r.to<=s.to&&(r.from!=s.from||r.to!=s.to)&&s.to-s.from-(r.to-r.from)<=4?r={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,r.from).append(r.insert).append(t.state.doc.slice(r.to,s.to))}:t.state.doc.lineAt(s.from).to<s.to&&t.docView.lineHasWidget(s.to)&&t.inputState.insertingTextAt>Date.now()-50?r={from:s.from,to:s.to,insert:t.state.toText(t.inputState.insertingText)}:Je.chrome&&r&&r.from==r.to&&r.from==s.head&&r.insert.toString()==`
 `&&t.lineWrapping&&(n&&(n=De.single(n.main.anchor-1,n.main.head-1)),r={from:s.from,to:s.to,insert:Vt.of([" "])}),r)return Tk(t,r,n,i);if(n&&!Zb(n,s)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin,a=="select.pointer"&&(n=y8(t.state.facet(Zp).map(l=>l(t)),n))),t.dispatch({selection:n,scrollIntoView:o,userEvent:a}),!0}else return!1}function Tk(t,e,r,n=-1){if(Je.ios&&t.inputState.flushIOSKey(e))return!0;let s=t.state.selection.main;if(Je.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&t.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Vu(t.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&Vu(t.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&Vu(t.contentDOM,"Delete",46)))return!0;let i=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=Kpe(t,e,r));return t.state.facet(o8).some(l=>l(t,e.from,e.to,i,a))||t.dispatch(a()),!0}function Kpe(t,e,r){let n,s=t.state,i=s.selection.main,o=-1;if(e.from==e.to&&e.from<i.from||e.from>i.to){let l=e.from<i.from?-1:1,c=l<0?i.from:i.to,u=cf(s.facet(Zp).map(d=>d(t)),c,l);e.from==u&&(o=u)}if(o>-1)n={changes:e,selection:De.cursor(e.from+e.insert.length,-1)};else if(e.from>=i.from&&e.to<=i.to&&e.to-e.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=i.from<e.from?s.sliceDoc(i.from,e.from):"",c=i.to>e.to?s.sliceDoc(e.to,i.to):"";n=s.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+c))}else{let l=s.changes(e),c=r&&r.main.to<=l.newLength?r.main:void 0;if(s.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=i.to+10&&e.to>=i.to-10){let u=t.state.sliceDoc(e.from,e.to),d,h=r&&b8(t,r.main.head);if(h){let b=e.insert.length-(e.to-e.from);d={from:h.from,to:h.to-b}}else d=t.state.doc.lineAt(i.head);let f=i.to-e.to;n=s.changeByRange(b=>{if(b.from==i.from&&b.to==i.to)return{changes:l,range:c||b.map(l)};let m=b.to-f,g=m-u.length;if(t.state.sliceDoc(g,m)!=u||m>=d.from&&g<=d.to)return{range:b};let y=s.changes({from:g,to:m,insert:e.insert}),v=b.to-i.to;return{changes:y,range:c?De.range(Math.max(0,c.anchor+v),Math.max(0,c.head+v)):b.map(y)}})}else n={changes:l,selection:c&&s.selection.replaceRange(c)}}let a="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,a+=".compose",t.inputState.compositionFirstChange&&(a+=".start",t.inputState.compositionFirstChange=!1)),s.update(n,{userEvent:a,scrollIntoView:!0})}function x8(t,e,r,n){let s=Math.min(t.length,e.length),i=0;for(;i<s&&t.charCodeAt(i)==e.charCodeAt(i);)i++;if(i==s&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(n=="end"){let l=Math.max(0,i-Math.min(o,a));r-=o+l-i}if(o<i&&t.length<e.length){let l=r<=i&&r>=o?i-r:0;i-=l,a=i+(a-o),o=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,o=i+(o-a),a=i}return{from:i,toA:o,toB:a}}function Ype(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:r,anchorOffset:n,focusNode:s,focusOffset:i}=t.observer.selectionRange;return r&&(e.push(new xN(r,n)),(s!=r||i!=n)&&e.push(new xN(s,i))),e}function Xpe(t,e){if(t.length==0)return null;let r=t[0].pos,n=t.length==2?t[1].pos:r;return r>-1&&n>-1?De.single(r+e,n+e):null}function Zb(t,e){return e.head==t.main.head&&e.anchor==t.main.anchor}class Jpe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Je.safari&&e.contentDOM.addEventListener("input",()=>null),Je.gecko&&hme(e.contentDOM.ownerDocument)}handleEvent(e){!ime(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,r){let n=this.handlers[e];if(n){for(let s of n.observers)s(this.view,r);for(let s of n.handlers){if(r.defaultPrevented)break;if(s(this.view,r)){r.preventDefault();break}}}}ensureHandlers(e){let r=Zpe(e),n=this.handlers,s=this.view.contentDOM;for(let i in r)if(i!="scroll"){let o=!r[i].handlers.length,a=n[i];a&&o!=!a.handlers.length&&(s.removeEventListener(i,this.handleEvent),a=null),a||s.addEventListener(i,this.handleEvent,{passive:o})}for(let i in n)i!="scroll"&&!r[i]&&s.removeEventListener(i,this.handleEvent);this.handlers=r}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&S8.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Je.android&&Je.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let r;return Je.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((r=w8.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||Qpe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=r||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let r=this.pendingIOSKey;return!r||r.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Vu(this.view.contentDOM,r.key,r.keyCode,r instanceof KeyboardEvent?r:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Je.safari&&!Je.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function wN(t,e){return(r,n)=>{try{return e.call(t,n,r)}catch(s){Rs(r.state,s)}}}function Zpe(t){let e=Object.create(null);function r(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of t){let s=n.spec,i=s&&s.plugin.domEventHandlers,o=s&&s.plugin.domEventObservers;if(i)for(let a in i){let l=i[a];l&&r(a).handlers.push(wN(n.value,l))}if(o)for(let a in o){let l=o[a];l&&r(a).observers.push(wN(n.value,l))}}for(let n in Ai)r(n).handlers.push(Ai[n]);for(let n in ni)r(n).observers.push(ni[n]);return e}const w8=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Qpe="dthko",S8=[16,17,18,20,91,92,224,225],Ag=6;function Rg(t){return Math.max(0,t)*.7+8}function eme(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class tme{constructor(e,r,n,s){this.view=e,this.startEvent=r,this.style=n,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParents=npe(e.contentDOM),this.atoms=e.state.facet(Zp).map(o=>o(e));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=e.state.facet(Bt.allowMultipleSelections)&&rme(e,r),this.dragging=sme(e,r)&&T8(r)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&eme(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,n=0,s=0,i=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:i,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=Ck(this.view);e.clientX-l.left<=s+Ag?r=-Rg(s-e.clientX):e.clientX+l.right>=o-Ag&&(r=Rg(e.clientX-o)),e.clientY-l.top<=i+Ag?n=-Rg(i-e.clientY):e.clientY+l.bottom>=a-Ag&&(n=Rg(e.clientY-a)),this.setScrollSpeed(r,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,r){this.scrollSpeed={x:e,y:r},e||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:r}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),r&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=r,r=0),(e||r)&&this.view.win.scrollBy(e,r),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:r}=this,n=y8(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(r.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(r=>r.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function rme(t,e){let r=t.state.facet(r8);return r.length?r[0](e):Je.mac?e.metaKey:e.ctrlKey}function nme(t,e){let r=t.state.facet(n8);return r.length?r[0](e):Je.mac?!e.altKey:!e.ctrlKey}function sme(t,e){let{main:r}=t.state.selection;if(r.empty)return!1;let n=tp(t.root);if(!n||n.rangeCount==0)return!0;let s=n.getRangeAt(0).getClientRects();for(let i=0;i<s.length;i++){let o=s[i];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function ime(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target,n;r!=t.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(n=Vr.get(r))&&n.isWidget()&&!n.isHidden&&n.widget.ignoreEvent(e))return!1;return!0}const Ai=Object.create(null),ni=Object.create(null),E8=Je.ie&&Je.ie_version<15||Je.ios&&Je.webkit_version<604;function ome(t){let e=t.dom.parentNode;if(!e)return;let r=e.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{t.focus(),r.remove(),C8(t,r.value)},50)}function jv(t,e,r){for(let n of t.facet(e))r=n(r,t);return r}function C8(t,e){e=jv(t.state,wk,e);let{state:r}=t,n,s=1,i=r.toText(e),o=i.lines==r.selection.ranges.length;if(cE!=null&&r.selection.ranges.every(l=>l.empty)&&cE==i.toString()){let l=-1;n=r.changeByRange(c=>{let u=r.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=r.toText((o?i.line(s++).text:e)+r.lineBreak);return{changes:{from:u.from,insert:d},range:De.cursor(c.from+d.length)}})}else o?n=r.changeByRange(l=>{let c=i.line(s++);return{changes:{from:l.from,to:l.to,insert:c.text},range:De.cursor(l.from+c.length)}}):n=r.replaceSelection(i);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}ni.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Ai.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);ni.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};ni.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Ai.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let n of t.state.facet(s8))if(r=n(t,e),r)break;if(!r&&e.button==0&&(r=lme(t,e)),r){let n=!t.hasFocus;t.inputState.startMouseSelection(new tme(t,e,r,n)),n&&t.observer.ignore(()=>{qB(t.contentDOM);let i=t.root.activeElement;i&&!i.contains(t.contentDOM)&&i.blur()});let s=t.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function SN(t,e,r,n){if(n==1)return De.cursor(e,r);if(n==2)return Fpe(t.state,e,r);{let s=t.docView.lineAt(e,r),i=t.state.doc.lineAt(s?s.posAtEnd:e),o=s?s.posAtStart:i.from,a=s?s.posAtEnd:i.to;return a<t.state.doc.length&&a==i.to&&a++,De.range(o,a)}}const ame=Je.ie&&Je.ie_version<=11;let EN=null,CN=0,TN=0;function T8(t){if(!ame)return t.detail;let e=EN,r=TN;return EN=t,TN=Date.now(),CN=!e||r>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(CN+1)%3:1}function lme(t,e){let r=t.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),n=T8(e),s=t.state.selection;return{update(i){i.docChanged&&(r.pos=i.changes.mapPos(r.pos),s=s.map(i.changes))},get(i,o,a){let l=t.posAndSideAtCoords({x:i.clientX,y:i.clientY},!1),c,u=SN(t,l.pos,l.assoc,n);if(r.pos!=l.pos&&!o){let d=SN(t,r.pos,r.assoc,n),h=Math.min(d.from,u.from),f=Math.max(d.to,u.to);u=h<u.from?De.range(h,f):De.range(f,h)}return o?s.replaceRange(s.main.extend(u.from,u.to)):a&&n==1&&s.ranges.length>1&&(c=cme(s,l.pos))?c:a?s.addRange(u):De.create([u])}}}function cme(t,e){for(let r=0;r<t.ranges.length;r++){let{from:n,to:s}=t.ranges[r];if(n<=e&&s>=e)return De.create(t.ranges.slice(0,r).concat(t.ranges.slice(r+1)),t.mainIndex==r?0:t.mainIndex-(t.mainIndex>r?1:0))}return null}Ai.dragstart=(t,e)=>{let{selection:{main:r}}=t.state;if(e.target.draggable){let s=t.docView.tile.nearest(e.target);if(s&&s.isWidget()){let i=s.posAtStart,o=i+s.length;(i>=r.to||o<=r.from)&&(r=De.range(i,o))}}let{inputState:n}=t;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=r,e.dataTransfer&&(e.dataTransfer.setData("Text",jv(t.state,Sk,t.state.sliceDoc(r.from,r.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ai.dragend=t=>(t.inputState.draggedContent=null,!1);function kN(t,e,r,n){if(r=jv(t.state,wk,r),!r)return;let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:i}=t.inputState,o=n&&i&&nme(t,e)?{from:i.from,to:i.to}:null,a={from:s,insert:r},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Ai.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let r=e.dataTransfer.files;if(r&&r.length){let n=Array(r.length),s=0,i=()=>{++s==r.length&&kN(t,e,n.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<r.length;o++){let a=new FileReader;a.onerror=i,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(n[o]=a.result),i()},a.readAsText(r[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return kN(t,e,n,!0),!0}return!1};Ai.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let r=E8?null:e.clipboardData;return r?(C8(t,r.getData("text/plain")||r.getData("text/uri-list")),!0):(ome(t),!1)};function ume(t,e){let r=t.dom.parentNode;if(!r)return;let n=r.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),t.focus()},50)}function dme(t){let e=[],r=[],n=!1;for(let s of t.selection.ranges)s.empty||(e.push(t.sliceDoc(s.from,s.to)),r.push(s));if(!e.length){let s=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>s&&(e.push(o.text),r.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),s=o.number}n=!0}return{text:jv(t,Sk,e.join(t.lineBreak)),ranges:r,linewise:n}}let cE=null;Ai.copy=Ai.cut=(t,e)=>{if(!af(t.contentDOM,t.observer.selectionRange))return!1;let{text:r,ranges:n,linewise:s}=dme(t.state);if(!r&&!s)return!1;cE=s?r:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let i=E8?null:e.clipboardData;return i?(i.clearData(),i.setData("text/plain",r),!0):(ume(t,r),!1)};const k8=fa.define();function A8(t,e){let r=[];for(let n of t.facet(a8)){let s=n(t,e);s&&r.push(s)}return r.length?t.update({effects:r,annotations:k8.of(!0)}):null}function R8(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let r=A8(t.state,e);r?t.dispatch(r):t.update([])}},10)}ni.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),R8(t)};ni.blur=t=>{t.observer.clearSelectionRange(),R8(t)};ni.compositionstart=ni.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};ni.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Je.chrome&&Je.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};ni.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Ai.beforeinput=(t,e)=>{var r,n;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let i=(r=e.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"),o=e.getTargetRanges();if(i&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return Tk(t,{from:l,to:c,insert:t.state.toText(i)},null),!0}}let s;if(Je.chrome&&Je.android&&(s=w8.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Je.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Je.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>ni.compositionend(t,e),20),!1};const AN=new Set;function hme(t){AN.has(t)||(AN.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const RN=["pre-wrap","normal","pre-line","break-spaces"];let bd=!1;function PN(){bd=!1}class fme{constructor(e){this.lineWrapping=e,this.doc=Vt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,r){let n=this.doc.lineAt(r).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((r-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return RN.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let r=!1;for(let n=0;n<e.length;n++){let s=e[n];s<0?n++:this.heightSamples[Math.floor(s*10)]||(r=!0,this.heightSamples[Math.floor(s*10)]=!0)}return r}refresh(e,r,n,s,i,o){let a=RN.indexOf(e)>-1,l=Math.abs(r-this.lineHeight)>.3||this.lineWrapping!=a||Math.abs(n-this.charWidth)>.1;if(this.lineWrapping=a,this.lineHeight=r,this.charWidth=n,this.textHeight=s,this.lineLength=i,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class pme{constructor(e,r){this.from=e,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class bi{constructor(e,r,n,s,i){this.from=e,this.length=r,this.top=n,this.height=s,this._content=i}get type(){return typeof this._content=="number"?_n.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof _c?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new bi(this.from,this.length+e.length,this.top,this.height+e.height,r)}}var cr=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(cr||(cr={}));const H0=.001;class qn{constructor(e,r,n=2){this.length=e,this.height=r,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>H0&&(bd=!0),this.height=e)}replace(e,r,n){return qn.of(n)}decomposeLeft(e,r){r.push(this)}decomposeRight(e,r){r.push(this)}applyChanges(e,r,n,s){let i=this,o=n.doc;for(let a=s.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=s[a],h=i.lineAt(l,cr.ByPosNoHeight,n.setDoc(r),0,0),f=h.to>=c?h:i.lineAt(c,cr.ByPosNoHeight,n,0,0);for(d+=f.to-c,c=f.to;a>0&&h.from<=s[a-1].toA;)l=s[a-1].fromA,u=s[a-1].fromB,a--,l<h.from&&(h=i.lineAt(l,cr.ByPosNoHeight,n,0,0));u+=h.from-l,l=h.from;let b=kk.build(n.setDoc(o),e,u,d);i=Qb(i,i.replace(l,c,b))}return i.updateHeight(n,0)}static empty(){return new Ts(0,0,0)}static of(e){if(e.length==1)return e[0];let r=0,n=e.length,s=0,i=0;for(;;)if(r==n)if(s>i*2){let a=e[r-1];a.break?e.splice(--r,1,a.left,null,a.right):e.splice(--r,1,a.left,a.right),n+=1+a.break,s-=a.size}else if(i>s*2){let a=e[n];a.break?e.splice(n,1,a.left,null,a.right):e.splice(n,1,a.left,a.right),n+=2+a.break,i-=a.size}else break;else if(s<i){let a=e[r++];a&&(s+=a.size)}else{let a=e[--n];a&&(i+=a.size)}let o=0;return e[r-1]==null?(o=1,r--):e[r]==null&&(o=1,n++),new gme(qn.of(e.slice(0,r)),o,qn.of(e.slice(n)))}}function Qb(t,e){return t==e?t:(t.constructor!=e.constructor&&(bd=!0),e)}qn.prototype.size=1;const mme=It.replace({});class P8 extends qn{constructor(e,r,n){super(e,r),this.deco=n,this.spaceAbove=0}mainBlock(e,r){return new bi(r,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,r,n,s){return this.spaceAbove&&e<n+this.spaceAbove?new bi(s,0,n,this.spaceAbove,mme):this.mainBlock(n,s)}lineAt(e,r,n,s,i){let o=this.mainBlock(s,i);return this.spaceAbove?this.blockAt(0,n,s,i).join(o):o}forEachLine(e,r,n,s,i,o){e<=i+this.length&&r>=i&&o(this.lineAt(0,cr.ByPos,n,s,i))}setMeasuredHeight(e){let r=e.heights[e.index++];r<0?(this.spaceAbove=-r,r=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(r)}updateHeight(e,r=0,n=!1,s){return s&&s.from<=r&&s.more&&this.setMeasuredHeight(s),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ts extends P8{constructor(e,r,n){super(e,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=n}mainBlock(e,r){return new bi(r,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,r,n){let s=n[0];return n.length==1&&(s instanceof Ts||s instanceof bn&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof bn?s=new Ts(s.length,this.height,this.spaceAbove):s.height=this.height,this.outdated||(s.outdated=!1),s):qn.of(n)}updateHeight(e,r=0,n=!1,s){return s&&s.from<=r&&s.more?this.setMeasuredHeight(s):(n||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class bn extends qn{constructor(e){super(e,0)}heightMetrics(e,r){let n=e.doc.lineAt(r).number,s=e.doc.lineAt(r+this.length).number,i=s-n+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*i);o=l/i,this.length>i+1&&(a=(this.height-l)/(this.length-i-1))}else o=this.height/i;return{firstLine:n,lastLine:s,perLine:o,perChar:a}}blockAt(e,r,n,s){let{firstLine:i,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s);if(r.lineWrapping){let c=s+(e<r.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),u=r.doc.lineAt(c),d=a+u.length*l,h=Math.max(n,e-d/2);return new bi(u.from,u.length,h,d,0)}else{let c=Math.max(0,Math.min(o-i,Math.floor((e-n)/a))),{from:u,length:d}=r.doc.line(i+c);return new bi(u,d,n+a*c,a,0)}}lineAt(e,r,n,s,i){if(r==cr.ByHeight)return this.blockAt(e,n,s,i);if(r==cr.ByPosNoHeight){let{from:f,to:b}=n.doc.lineAt(e);return new bi(f,b-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i),c=n.doc.lineAt(e),u=a+c.length*l,d=c.number-o,h=s+a*d+l*(c.from-i-d);return new bi(c.from,c.length,Math.max(s,Math.min(h,s+this.height-u)),u,0)}forEachLine(e,r,n,s,i,o){e=Math.max(e,i),r=Math.min(r,i+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(n,i);for(let u=e,d=s;u<=r;){let h=n.doc.lineAt(u);if(u==e){let b=h.number-a;d+=l*b+c*(e-i-b)}let f=l+c*h.length;o(new bi(h.from,h.length,d,f,0)),d+=f,u=h.to+1}}replace(e,r,n){let s=this.length-r;if(s>0){let i=n[n.length-1];i instanceof bn?n[n.length-1]=new bn(i.length+s):n.push(null,new bn(s-1))}if(e>0){let i=n[0];i instanceof bn?n[0]=new bn(e+i.length):n.unshift(new bn(e-1),null)}return qn.of(n)}decomposeLeft(e,r){r.push(new bn(e-1),null)}decomposeRight(e,r){r.push(null,new bn(this.length-e-1))}updateHeight(e,r=0,n=!1,s){let i=r+this.length;if(s&&s.from<=r+this.length&&s.more){let o=[],a=Math.max(r,s.from),l=-1;for(s.from>r&&o.push(new bn(s.from-r-1).updateHeight(e,r));a<=i&&s.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=s.heights[s.index++],h=0;d<0&&(h=-d,d=s.heights[s.index++]),l==-1?l=d:Math.abs(d-l)>=H0&&(l=-2);let f=new Ts(u,d,h);f.outdated=!1,o.push(f),a+=u+1}a<=i&&o.push(null,new bn(i-a).updateHeight(e,a));let c=qn.of(o);return(l<0||Math.abs(c.height-this.height)>=H0||Math.abs(l-this.heightMetrics(e,r).perLine)>=H0)&&(bd=!0),Qb(this,c)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class gme extends qn{constructor(e,r,n){super(e.length+r+n.length,e.height+n.height,r|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,r,n,s){let i=n+this.left.height;return e<i?this.left.blockAt(e,r,n,s):this.right.blockAt(e,r,i,s+this.left.length+this.break)}lineAt(e,r,n,s,i){let o=s+this.left.height,a=i+this.left.length+this.break,l=r==cr.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,r,n,s,i):this.right.lineAt(e,r,n,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=r==cr.ByPosNoHeight?cr.ByPosNoHeight:cr.ByPos;return l?c.join(this.right.lineAt(a,u,n,o,a)):this.left.lineAt(a,u,n,s,i).join(c)}forEachLine(e,r,n,s,i,o){let a=s+this.left.height,l=i+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,r,n,s,i,o),r>=l&&this.right.forEachLine(e,r,n,a,l,o);else{let c=this.lineAt(l,cr.ByPos,n,s,i);e<c.from&&this.left.forEachLine(e,c.from-1,n,s,i,o),c.to>=e&&c.from<=r&&o(c),r>c.to&&this.right.forEachLine(c.to+1,r,n,a,l,o)}}replace(e,r,n){let s=this.left.length+this.break;if(r<s)return this.balanced(this.left.replace(e,r,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,r-s,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let a of n)i.push(a);if(e>0&&IN(i,o-1),r<this.length){let a=i.length;this.decomposeRight(r,i),IN(i,a)}return qn.of(i)}decomposeLeft(e,r){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,r);r.push(this.left),this.break&&(n++,e>=n&&r.push(null)),e>n&&this.right.decomposeLeft(e-n,r)}decomposeRight(e,r){let n=this.left.length,s=n+this.break;if(e>=s)return this.right.decomposeRight(e-s,r);e<n&&this.left.decomposeRight(e,r),this.break&&e<s&&r.push(null),r.push(this.right)}balanced(e,r){return e.size>2*r.size||r.size>2*e.size?qn.of(this.break?[e,null,r]:[e,r]):(this.left=Qb(this.left,e),this.right=Qb(this.right,r),this.setHeight(e.height+r.height),this.outdated=e.outdated||r.outdated,this.size=e.size+r.size,this.length=e.length+this.break+r.length,this)}updateHeight(e,r=0,n=!1,s){let{left:i,right:o}=this,a=r+i.length+this.break,l=null;return s&&s.from<=r+i.length&&s.more?l=i=i.updateHeight(e,r,n,s):i.updateHeight(e,r,n),s&&s.from<=a+o.length&&s.more?l=o=o.updateHeight(e,a,n,s):o.updateHeight(e,a,n),l?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function IN(t,e){let r,n;t[e]==null&&(r=t[e-1])instanceof bn&&(n=t[e+1])instanceof bn&&t.splice(e-1,3,new bn(r.length+1+n.length))}const bme=5;class kk{constructor(e,r){this.pos=e,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,r){if(this.lineStart>-1){let n=Math.min(r,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Ts?s.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Ts(n-this.pos,-1,0)),this.writtenTo=n,r>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(e,r,n){if(e<r||n.heightRelevant){let s=n.widget?n.widget.estimatedHeight:0,i=n.widget?n.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let o=r-e;n.block?this.addBlock(new P8(o,s,n)):(o||i||s>=bme)&&this.addLineDeco(s,i,o)}else r>e&&this.span(e,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=r,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ts(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,r){let n=new bn(r-e);return this.oracle.doc.lineAt(e).to==r&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ts)return e;let r=new Ts(0,-1,0);return this.nodes.push(r),r}addBlock(e){this.enterLine();let r=e.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r&&r.endSide>0&&(this.covering=e)}addLineDeco(e,r,n){let s=this.ensureLine();s.length+=n,s.collapsed+=n,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=r,this.writtenTo=this.pos=this.pos+n}finish(e){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof Ts)&&!this.isCovered?this.nodes.push(new Ts(0,-1,0)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let s of this.nodes)s instanceof Ts&&s.updateHeight(this.oracle,n),n+=s?s.length:1;return this.nodes}static build(e,r,n,s){let i=new kk(n,e);return Dt.spans(r,n,s,i,0),i.finish(n)}}function yme(t,e,r){let n=new vme;return Dt.compare(t,e,r,n,0),n.changes}class vme{constructor(){this.changes=[]}compareRange(){}comparePoint(e,r,n,s){(e<r||n&&n.heightRelevant||s&&s.heightRelevant)&&Wu(e,r,this.changes,5)}}function _me(t,e){let r=t.getBoundingClientRect(),n=t.ownerDocument,s=n.defaultView||window,i=Math.max(0,r.left),o=Math.min(s.innerWidth,r.right),a=Math.max(0,r.top),l=Math.min(s.innerHeight,r.bottom);for(let c=t.parentNode;c&&c!=n.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let h=u.getBoundingClientRect();i=Math.max(i,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=Math.min(c==t.parentNode?s.innerHeight:l,h.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:i-r.left,right:Math.max(i,o)-r.left,top:a-(r.top+e),bottom:Math.max(a,l)-(r.top+e)}}function xme(t){let e=t.getBoundingClientRect(),r=t.ownerDocument.defaultView||window;return e.left<r.innerWidth&&e.right>0&&e.top<r.innerHeight&&e.bottom>0}function wme(t,e){let r=t.getBoundingClientRect();return{left:0,right:r.right-r.left,top:e,bottom:r.bottom-(r.top+e)}}class Kx{constructor(e,r,n,s){this.from=e,this.to=r,this.size=n,this.displaySize=s}static same(e,r){if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++){let s=e[n],i=r[n];if(s.from!=i.from||s.to!=i.to||s.size!=i.size)return!1}return!0}draw(e,r){return It.replace({widget:new Sme(this.displaySize*(r?e.scaleY:e.scaleX),r)}).range(this.from,this.to)}}class Sme extends wl{constructor(e,r){super(),this.size=e,this.vertical=r}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class NN{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=DN,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ur.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=e.facet(Dv).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new fme(r),this.stateDeco=ON(e),this.heightMap=qn.empty().applyChanges(this.stateDeco,Vt.empty,this.heightOracle.setDoc(e.doc),[new Ys(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=It.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:r}=this.state.selection;for(let n=0;n<=1;n++){let s=n?r.head:r.anchor;if(!e.some(({from:i,to:o})=>s>=i&&s<=o)){let{from:i,to:o}=this.lineBlockAt(s);e.push(new Pg(i,o))}}return this.viewports=e.sort((n,s)=>n.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?DN:new Ak(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(jh(e,this.scaler))})}update(e,r=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=ON(this.state);let s=e.changedRanges,i=Ys.extendWithRanges(s,yme(n,this.stateDeco,e?e.changes:Xr.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);PN(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),(this.heightMap.height!=o||bd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(r&&(r.range.head<l.from||r.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,r));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(c8)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let r=e.contentDOM,n=window.getComputedStyle(r),s=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?ur.RTL:ur.LTR;let o=this.heightOracle.mustRefreshForWrapping(i)||this.mustMeasureContent,a=r.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:x,scaleY:w}=GB(r,a);(x>.005&&Math.abs(this.scaleX-x)>.005||w>.005&&Math.abs(this.scaleY-w)>.005)&&(this.scaleX=x,this.scaleY=w,c|=16,o=l=!0)}let d=(parseInt(n.paddingTop)||0)*this.scaleY,h=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=KB(e.scrollDOM);let b=(this.printing?wme:_me)(r,this.paddingTop),m=b.top-this.pixelViewport.top,g=b.bottom-this.pixelViewport.bottom;this.pixelViewport=b;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!xme(e.dom))return 0;let v=a.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let x=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(x)&&(o=!0),o||s.lineWrapping&&Math.abs(v-this.contentDOMWidth)>s.charWidth){let{lineHeight:w,charWidth:S,textHeight:T}=e.docView.measureTextSize();o=w>0&&s.refresh(i,w,S,T,Math.max(5,v/S),x),o&&(e.docView.minWidth=0,c|=16)}m>0&&g>0?u=Math.max(m,g):m<0&&g<0&&(u=Math.min(m,g)),PN();for(let w of this.viewports){let S=w.from==this.viewport.from?x:e.docView.measureVisibleLineHeights(w);this.heightMap=(o?qn.empty().applyChanges(this.stateDeco,Vt.empty,this.heightOracle,[new Ys(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new pme(w.from,S))}bd&&(c|=2)}let _=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,r){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,i=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Pg(s.lineAt(o-n*1e3,cr.ByHeight,i,0,0).from,s.lineAt(a+(1-n)*1e3,cr.ByHeight,i,0,0).to);if(r){let{head:c}=r.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=s.lineAt(c,cr.ByPos,i,0,0),h;r.y=="center"?h=(d.top+d.bottom)/2-u/2:r.y=="start"||r.y=="nearest"&&c<l.from?h=d.top:h=d.bottom-u,l=new Pg(s.lineAt(h-1e3/2,cr.ByHeight,i,0,0).from,s.lineAt(h+u+1e3/2,cr.ByHeight,i,0,0).to)}}return l}mapViewport(e,r){let n=r.mapPos(e.from,-1),s=r.mapPos(e.to,1);return new Pg(this.heightMap.lineAt(n,cr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,cr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:r},n=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,cr.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(r,cr.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||s<=o-Math.max(10,Math.min(-n,250)))&&(r==this.state.doc.length||i>=a+Math.max(10,Math.min(n,250)))&&s>o-2*1e3&&i<a+2*1e3}mapLineGaps(e,r){if(!e.length||r.empty)return e;let n=[];for(let s of e)r.touchesRange(s.from,s.to)||n.push(new Kx(r.mapPos(s.from),r.mapPos(s.to),s.size,s.displaySize));return n}ensureLineGaps(e,r){let n=this.heightOracle.lineWrapping,s=n?1e4:2e3,i=s>>1,o=s<<1;if(this.defaultTextDirection!=ur.LTR&&!n)return[];let a=[],l=(u,d,h,f)=>{if(d-u<i)return;let b=this.state.selection.main,m=[b.from];b.empty||m.push(b.to);for(let y of m)if(y>u&&y<d){l(u,y-10,h,f),l(y+10,d,h,f);return}let g=Cme(e,y=>y.from>=h.from&&y.to<=h.to&&Math.abs(y.from-u)<i&&Math.abs(y.to-d)<i&&!m.some(v=>y.from<v&&y.to>v));if(!g){if(d<h.to&&r&&n&&r.visibleRanges.some(_=>_.from<=d&&_.to>=d)){let _=r.moveToLineBoundary(De.cursor(d),!1,!0).head;_>u&&(d=_)}let y=this.gapSize(h,u,d,f),v=n||y<2e6?y:2e6;g=new Kx(u,d,y,v)}a.push(g)},c=u=>{if(u.length<o||u.type!=_n.Text)return;let d=Eme(u.from,u.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,f,b;if(n){let m=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,y;if(h!=null){let v=Ng(d,h),_=((this.visibleBottom-this.visibleTop)/2+m)/u.height;g=v-_,y=v+_}else g=(this.visibleTop-u.top-m)/u.height,y=(this.visibleBottom-u.top+m)/u.height;f=Ig(d,g),b=Ig(d,y)}else{let m=d.total*this.heightOracle.charWidth,g=s*this.heightOracle.charWidth,y=0;if(m>2e6)for(let S of e)S.from>=u.from&&S.from<u.to&&S.size!=S.displaySize&&S.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=S.size-S.displaySize);let v=this.pixelViewport.left+y,_=this.pixelViewport.right+y,x,w;if(h!=null){let S=Ng(d,h),T=((_-v)/2+g)/m;x=S-T,w=S+T}else x=(v-g)/m,w=(_+g)/m;f=Ig(d,x),b=Ig(d,w)}f>u.from&&l(u.from,f,u,d),b<u.to&&l(b,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,r,n,s){let i=Ng(s,n)-Ng(s,r);return this.heightOracle.lineWrapping?e.height*i:s.total*this.heightOracle.charWidth*i}updateLineGaps(e){Kx.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=It.set(e.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let r=this.stateDeco;this.lineGaps.length&&(r=r.concat(this.lineGapDeco));let n=[];Dt.spans(r,this.viewport.from,this.viewport.to,{span(i,o){n.push({from:i,to:o})},point(){}},20);let s=0;if(n.length!=this.visibleRanges.length)s=12;else for(let i=0;i<n.length&&!(s&8);i++){let o=this.visibleRanges[i],a=n[i];(o.from!=a.from||o.to!=a.to)&&(s|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(s|=8))}return this.visibleRanges=n,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(r=>r.from<=e&&r.to>=e)||jh(this.heightMap.lineAt(e,cr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(r=>r.top<=e&&r.bottom>=e)||jh(this.heightMap.lineAt(this.scaler.fromDOM(e),cr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let r=this.lineBlockAtHeight(e+8);return r.from>=this.viewport.from||this.viewportLines[0].top-e>200?r:this.viewportLines[0]}elementAtHeight(e){return jh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Pg{constructor(e,r){this.from=e,this.to=r}}function Eme(t,e,r){let n=[],s=t,i=0;return Dt.spans(r,t,e,{span(){},point(o,a){o>s&&(n.push({from:s,to:o}),i+=o-s),s=a}},20),s<e&&(n.push({from:s,to:e}),i+=e-s),{total:i,ranges:n}}function Ig({total:t,ranges:e},r){if(r<=0)return e[0].from;if(r>=1)return e[e.length-1].to;let n=Math.floor(t*r);for(let s=0;;s++){let{from:i,to:o}=e[s],a=o-i;if(n<=a)return i+n;n-=a}}function Ng(t,e){let r=0;for(let{from:n,to:s}of t.ranges){if(e<=s){r+=e-n;break}r+=s-n}return r/t.total}function Cme(t,e){for(let r of t)if(e(r))return r}const DN={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};function ON(t){let e=t.facet(Ov).filter(n=>typeof n!="function"),r=t.facet(Ek).filter(n=>typeof n!="function");return r.length&&e.push(Dt.join(r)),e}class Ak{constructor(e,r,n){let s=0,i=0,o=0;this.viewports=n.map(({from:a,to:l})=>{let c=r.lineAt(a,cr.ByPos,e,0,0).top,u=r.lineAt(l,cr.ByPos,e,0,0).bottom;return s+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(r.height-s);for(let a of this.viewports)a.domTop=o+(a.top-i)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),i=a.bottom}toDOM(e){for(let r=0,n=0,s=0;;r++){let i=r<this.viewports.length?this.viewports[r]:null;if(!i||e<i.top)return s+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,s=i.domBottom}}fromDOM(e){for(let r=0,n=0,s=0;;r++){let i=r<this.viewports.length?this.viewports[r]:null;if(!i||e<i.domTop)return n+(e-s)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,s=i.domBottom}}eq(e){return e instanceof Ak?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((r,n)=>r.from==e.viewports[n].from&&r.to==e.viewports[n].to):!1}}function jh(t,e){if(e.scale==1)return t;let r=e.toDOM(t.top),n=e.toDOM(t.bottom);return new bi(t.from,t.length,r,n-r,Array.isArray(t._content)?t._content.map(s=>jh(s,e)):t._content)}const Dg=Qe.define({combine:t=>t.join(" ")}),uE=Qe.define({combine:t=>t.indexOf(!0)>-1}),dE=ol.newName(),I8=ol.newName(),N8=ol.newName(),D8={"&light":"."+I8,"&dark":"."+N8};function hE(t,e,r){return new ol(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,s=>{if(s=="&")return t;if(!r||!r[s])throw new RangeError(`Unsupported selector: ${s}`);return r[s]}):t+" "+n}})}const Tme=hE("."+dE,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},D8),kme={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Yx=Je.ie&&Je.ie_version<=11;class Ame{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new spe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(r=>{for(let n of r)this.queue.push(n);(Je.ie&&Je.ie_version<=11||Je.ios&&e.composing)&&r.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Je.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Je.chrome&&Je.chrome_version<126)&&(this.editContext=new Pme(e),e.state.facet(Vo)&&(e.contentDOM.editContext=this.editContext.editContext)),Yx&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((r,n)=>r!=e[n]))){this.gapIntersection.disconnect();for(let r of e)this.gapIntersection.observe(r);this.gaps=e}}onSelectionChange(e){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,s=this.selectionRange;if(n.state.facet(Vo)?n.root.activeElement!=this.dom:!af(this.dom,s))return;let i=s.anchorNode&&n.docView.tile.nearest(s.anchorNode);if(i&&i.isWidget()&&i.widget.ignoreEvent(e)){r||(this.selectionChanged=!1);return}(Je.ie&&Je.ie_version<=11||Je.android&&Je.chrome)&&!n.state.selection.main.empty&&s.focusNode&&lf(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,r=tp(e.root);if(!r)return!1;let n=Je.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Rme(this.view,r)||r;if(!n||this.selectionRange.eq(n))return!1;let s=af(this.dom,n);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&ope(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,r){this.selectionRange.set(e.node,e.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,r=null;for(let n=this.dom;n;)if(n.nodeType==1)!r&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:r||(r=this.scrollTargets.slice(0,e)),r&&r.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,e)),r){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=r)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,kme),Yx&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Yx&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,r){var n;if(!this.delayedAndroidKey){let s=()=>{let i=this.delayedAndroidKey;i&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=i.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&i.force&&Vu(this.dom,i.key,i.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let r=-1,n=-1,s=!1;for(let i of e){let o=this.readMutation(i);o&&(o.typeOver&&(s=!0),r==-1?{from:r,to:n}=o:(r=Math.min(o.from,r),n=Math.max(o.to,n)))}return{from:r,to:n,typeOver:s}}readChange(){let{from:e,to:r,typeOver:n}=this.processRecords(),s=this.selectionChanged&&af(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new qpe(this.view,e,r,n);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let n=this.view.state,s=_8(this.view,r);return this.view.state==n&&(r.domChanged||r.newSel&&!Zb(this.view.state.selection,r.newSel.main))&&this.view.update([]),s}readMutation(e){let r=this.view.docView.tile.nearest(e.target);if(!r||r.isWidget())return null;if(r.markDirty(e.type=="attributes"),e.type=="childList"){let n=LN(r,e.previousSibling||e.target.previousSibling,-1),s=LN(r,e.nextSibling||e.target.nextSibling,1);return{from:n?r.posAfter(n):r.posAtStart,to:s?r.posBefore(s):r.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Vo)!=e.state.facet(Vo)&&(e.view.contentDOM.editContext=e.state.facet(Vo)?this.editContext.editContext:null))}destroy(){var e,r,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function LN(t,e,r){for(;e;){let n=Vr.get(e);if(n&&n.parent==t)return n;let s=e.parentNode;e=s!=t.dom?s:r>0?e.nextSibling:e.previousSibling}return null}function MN(t,e){let r=e.startContainer,n=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor,1);return lf(o.node,o.offset,s,i)&&([r,n,s,i]=[s,i,r,n]),{anchorNode:r,anchorOffset:n,focusNode:s,focusOffset:i}}function Rme(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return MN(t,s)}let r=null;function n(s){s.preventDefault(),s.stopImmediatePropagation(),r=s.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),r?MN(t,r):null}class Pme{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let r=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let s=e.state.selection.main,{anchor:i,head:o}=s,a=this.toEditorPos(n.updateRangeStart),l=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:a,drifted:!1});let c=l-a>n.text.length;a==this.from&&i<this.from?a=i:l==this.to&&i>this.to&&(l=i);let u=x8(e.state.sliceDoc(a,l),n.text,(c?s.from:s.to)-a,c?"end":null);if(!u){let h=De.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));Zb(h,s)||e.dispatch({selection:h,userEvent:"select"});return}let d={from:u.from+a,to:u.toA+a,insert:Vt.of(n.text.slice(u.from,u.toB).split(`
`))};if((Je.mac||Je.android)&&d.from==o-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:a,to:l,insert:Vt.of([n.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let h=this.to-this.from+(d.to-d.from+d.insert.length);Tk(e,d,De.single(this.toEditorPos(n.selectionStart,h),this.toEditorPos(n.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),d.from<d.to&&!d.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(r.text.slice(Math.max(0,n.updateRangeStart-1),Math.min(r.text.length,n.updateRangeStart+1)))&&this.handlers.compositionend(n)},this.handlers.characterboundsupdate=n=>{let s=[],i=null;for(let o=this.toEditorPos(n.rangeStart),a=this.toEditorPos(n.rangeEnd);o<a;o++){let l=e.coordsForChar(o);i=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||i||new DOMRect,s.push(i)}r.updateCharacterBounds(n.rangeStart,s)},this.handlers.textformatupdate=n=>{let s=[];for(let i of n.getTextFormats()){let o=i.underlineStyle,a=i.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let l=this.toEditorPos(i.rangeStart),c=this.toEditorPos(i.rangeEnd);if(l<c){let u=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;s.push(It.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:d8.of(It.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)r.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let s=tp(n.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let r=0,n=!1,s=this.pendingContextChange;return e.changes.iterChanges((i,o,a,l,c)=>{if(n)return;let u=c.length-(o-i);if(s&&o>=s.to)if(s.from==i&&s.to==o&&s.insert.eq(c)){s=this.pendingContextChange=null,r+=u,this.to+=u;return}else s=null,this.revertPending(e.state);if(i+=r,o+=r,o<=this.from)this.from+=u,this.to+=u;else if(i<this.to){if(i<this.from||o>this.to||this.to-this.from+c.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(i),this.toContextPos(o),c.toString()),this.to+=u}r+=u}),s&&!n&&this.revertPending(e.state),!n}update(e){let r=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||r)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:r}=e.selection.main;this.from=Math.max(0,r-1e4),this.to=Math.min(e.doc.length,r+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let r=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(r.from),this.toContextPos(r.from+r.insert.length),e.doc.sliceString(r.from,r.to))}setSelection(e){let{main:r}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,r.anchor))),s=this.toContextPos(r.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(n,s)}rangeIsValid(e){let{head:r}=e.selection.main;return!(this.from>0&&r-this.from<500||this.to<e.doc.length&&this.to-r<500||this.to-this.from>1e4*3)}toEditorPos(e,r=this.to-this.from){e=Math.min(e,r);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let r=this.composing;return r&&r.drifted?r.contextBase+(e-r.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class tt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var r;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(s=>s.forEach(i=>n(i,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||ipe(e.parent)||document,this.viewState=new NN(e.state||Bt.create(e)),e.scrollTo&&e.scrollTo.is(kg)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Au).map(s=>new zx(s));for(let s of this.plugins)s.update(this);this.observer=new Ame(this),this.inputState=new Jpe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new vN(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((r=document.fonts)===null||r===void 0)&&r.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let r=e.length==1&&e[0]instanceof Ur?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(r,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,n=!1,s,i=this.state;for(let h of e){if(h.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=h.state}if(this.destroyed){this.viewState.state=i;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(k8))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=A8(i,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(u=null)):this.observer.clear(),i.facet(Bt.phrases)!=this.state.facet(Bt.phrases))return this.setState(i);s=Yb.create(this,i,e),s.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Gu(f.empty?f:De.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(kg)&&(d=f.value.clip(this.state))}this.viewState.update(s,d),this.bidiCache=ey.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),r=this.docView.update(s),this.state.facet(Lh)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Dg)!=s.state.facet(Dg)&&(this.viewState.mustMeasureContent=!0),(r||n||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),r&&this.docViewUpdate(),!s.empty)for(let h of this.state.facet(iE))try{h(s)}catch(f){Rs(this.state,f,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!_8(this,u)&&c.force&&Vu(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let r=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new NN(e),this.plugins=e.facet(Au).map(n=>new zx(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new vN(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(e){let r=e.startState.facet(Au),n=e.state.facet(Au);if(r!=n){let s=[];for(let i of n){let o=r.indexOf(i);if(o<0)s.push(new zx(i));else{let a=this.plugins[o];a.mustUpdate=e,s.push(a)}}for(let i of this.plugins)i.mustUpdate!=e&&i.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);r!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let r=e.value;if(r&&r.docViewUpdate)try{r.docViewUpdate(this)}catch(n){Rs(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let r=null,n=this.scrollDOM,s=n.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:o}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(KB(n))i=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(s);i=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(f=>{try{return f.read(this)}catch(b){return Rs(this.state,b),jN}}),d=Yb.create(this,this.state,[]),h=!1;d.flags|=l,r?r.flags|=l:r=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let f=0;f<c.length;f++)if(u[f]!=jN)try{let b=c[f];b.write&&b.write(u[f],this)}catch(b){Rs(this.state,b)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let b=(i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top)-o;if(b>1||b<-1){s=s+b,n.scrollTop=s/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let a of this.state.facet(iE))a(r)}get themeClasses(){return dE+" "+(this.state.facet(uE)?N8:I8)+" "+this.state.facet(Dg)}updateAttrs(){let e=FN(this,h8,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Vo)?"true":"false",class:"cm-content",style:`${Je.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),FN(this,Dv,r);let n=this.observer.ignore(()=>{let s=fN(this.contentDOM,this.contentAttrs,r),i=fN(this.dom,this.editorAttrs,e);return s||i});return this.editorAttrs=e,this.contentAttrs=r,n}showAnnouncements(e){let r=!0;for(let n of e)for(let s of n.effects)if(s.is(tt.announce)){r&&(this.announceDOM.textContent=""),r=!1;let i=this.announceDOM.appendChild(document.createElement("div"));i.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Lh);let e=this.state.facet(tt.cspNonce);ol.mount(this.root,this.styleModules.concat(Tme).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===e.key){this.measureRequests[r]=e;return}}this.measureRequests.push(e)}}plugin(e){let r=this.pluginMap.get(e);return(r===void 0||r&&r.plugin!=e)&&this.pluginMap.set(e,r=this.plugins.find(n=>n.plugin==e)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,r,n){return qx(this,e,_N(this,e,r,n))}moveByGroup(e,r){return qx(this,e,_N(this,e,r,n=>Upe(this,e.head,n)))}visualLineSide(e,r){let n=this.bidiSpans(e),s=this.textDirectionAt(e.from),i=n[r?n.length-1:0];return De.cursor(i.side(r,s)+e.from,i.forward(!r,s)?1:-1)}moveToLineBoundary(e,r,n=!0){return $pe(this,e,r,n)}moveVertically(e,r,n){return qx(this,e,Hpe(this,e,r,n))}domAtPos(e,r=1){return this.docView.domAtPos(e,r)}posAtDOM(e,r=0){return this.docView.posFromDOM(e,r)}posAtCoords(e,r=!0){this.readMeasured();let n=lE(this,e,r);return n&&n.pos}posAndSideAtCoords(e,r=!0){return this.readMeasured(),lE(this,e,r)}coordsAtPos(e,r=1){this.readMeasured();let n=this.docView.coordsAt(e,r);if(!n||n.left==n.right)return n;let s=this.state.doc.lineAt(e),i=this.bidiSpans(s),o=i[uo.find(i,e-s.from,-1,r)];return Kb(n,o.dir==ur.LTR==r>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(l8)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Ime)return e8(e.length);let r=this.textDirectionAt(e.from),n;for(let i of this.bidiCache)if(i.from==e.from&&i.dir==r&&(i.fresh||QB(i.isolates,n=gN(this,e))))return i.order;n||(n=gN(this,e));let s=fpe(e.text,r,n);return this.bidiCache.push(new ey(e.from,e.to,r,n,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Je.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{qB(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,r={}){return kg.of(new Gu(typeof e=="number"?De.cursor(e):e,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:r}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return kg.of(new Gu(De.cursor(n.from),"start","start",n.top-e,r,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return hn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return hn.define(()=>({}),{eventObservers:e})}static theme(e,r){let n=ol.newName(),s=[Dg.of(n),Lh.of(hE(`.${n}`,e))];return r&&r.dark&&s.push(uE.of(!0)),s}static baseTheme(e){return xl.lowest(Lh.of(hE("."+dE,e,D8)))}static findFromDOM(e){var r;let n=e.querySelector(".cm-content"),s=n&&Vr.get(n)||Vr.get(e);return((r=s?.root)===null||r===void 0?void 0:r.view)||null}}tt.styleModule=Lh;tt.inputHandler=o8;tt.clipboardInputFilter=wk;tt.clipboardOutputFilter=Sk;tt.scrollHandler=u8;tt.focusChangeEffect=a8;tt.perLineTextDirection=l8;tt.exceptionSink=i8;tt.updateListener=iE;tt.editable=Vo;tt.mouseSelectionStyle=s8;tt.dragMovesSelection=n8;tt.clickAddsSelectionRange=r8;tt.decorations=Ov;tt.blockWrappers=f8;tt.outerDecorations=Ek;tt.atomicRanges=Zp;tt.bidiIsolatedRanges=p8;tt.scrollMargins=m8;tt.darkTheme=uE;tt.cspNonce=Qe.define({combine:t=>t.length?t[0]:""});tt.contentAttributes=Dv;tt.editorAttributes=h8;tt.lineWrapping=tt.contentAttributes.of({class:"cm-lineWrapping"});tt.announce=Ct.define();const Ime=4096,jN={};class ey{constructor(e,r,n,s,i,o){this.from=e,this.to=r,this.dir=n,this.isolates=s,this.fresh=i,this.order=o}static update(e,r){if(r.empty&&!e.some(i=>i.fresh))return e;let n=[],s=e.length?e[e.length-1].dir:ur.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir==s&&!r.touchesRange(o.from,o.to)&&n.push(new ey(r.mapPos(o.from,1),r.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function FN(t,e,r){for(let n=t.state.facet(e),s=n.length-1;s>=0;s--){let i=n[s],o=typeof i=="function"?i(t):i;o&&vk(o,r)}return r}const Nme=Je.mac?"mac":Je.windows?"win":Je.linux?"linux":"key";function Dme(t,e){const r=t.split(/-(?!$)/);let n=r[r.length-1];n=="Space"&&(n=" ");let s,i,o,a;for(let l=0;l<r.length-1;++l){const c=r[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))s=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return s&&(n="Alt-"+n),i&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Og(t,e,r){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Ome=xl.default(tt.domEventHandlers({keydown(t,e){return L8(O8(e.state),t,e,"editor")}})),Fv=Qe.define({enables:Ome}),BN=new WeakMap;function O8(t){let e=t.facet(Fv),r=BN.get(e);return r||BN.set(e,r=jme(e.reduce((n,s)=>n.concat(s),[]))),r}function Lme(t,e,r){return L8(O8(t.state),e,t,r)}let Ba=null;const Mme=4e3;function jme(t,e=Nme){let r=Object.create(null),n=Object.create(null),s=(o,a)=>{let l=n[o];if(l==null)n[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},i=(o,a,l,c,u)=>{var d,h;let f=r[o]||(r[o]=Object.create(null)),b=a.split(/ (?!$)/).map(y=>Dme(y,e));for(let y=1;y<b.length;y++){let v=b.slice(0,y).join(" ");s(v,!0),f[v]||(f[v]={preventDefault:!0,stopPropagation:!1,run:[_=>{let x=Ba={view:_,prefix:v,scope:o};return setTimeout(()=>{Ba==x&&(Ba=null)},Mme),!0}]})}let m=b.join(" ");s(m,!1);let g=f[m]||(f[m]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&g.run.push(l),c&&(g.preventDefault=!0),u&&(g.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=r[c]||(r[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in u)u[h].run.push(f=>d(f,fE))}let l=o[e]||o.key;if(l)for(let c of a)i(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&i(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return r}let fE=null;function L8(t,e,r,n){fE=e;let s=Xfe(e),i=gi(s,0),o=Wo(i)==s.length&&s!=" ",a="",l=!1,c=!1,u=!1;Ba&&Ba.view==r&&Ba.scope==n&&(a=Ba.prefix+" ",S8.indexOf(e.keyCode)<0&&(c=!0,Ba=null));let d=new Set,h=g=>{if(g){for(let y of g.run)if(!d.has(y)&&(d.add(y),y(r)))return g.stopPropagation&&(u=!0),!0;g.preventDefault&&(g.stopPropagation&&(u=!0),c=!0)}return!1},f=t[n],b,m;return f&&(h(f[a+Og(s,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Je.windows&&e.ctrlKey&&e.altKey)&&!(Je.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(b=al[e.keyCode])&&b!=s?(h(f[a+Og(b,e,!0)])||e.shiftKey&&(m=Qf[e.keyCode])!=s&&m!=b&&h(f[a+Og(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+Og(s,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),fE=null,l}class Qp{constructor(e,r,n,s,i){this.className=e,this.left=r,this.top=n,this.width=s,this.height=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,r){return r.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,r,n){if(n.empty){let s=e.coordsAtPos(n.head,n.assoc||1);if(!s)return[];let i=M8(e);return[new Qp(r,s.left-i.left,s.top-i.top,null,s.bottom-s.top)]}else return Fme(e,r,n)}}function M8(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==ur.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function $N(t,e,r,n){let s=t.coordsAtPos(e,r*2);if(!s)return n;let i=t.dom.getBoundingClientRect(),o=(s.top+s.bottom)/2,a=t.posAtCoords({x:i.left+1,y:o}),l=t.posAtCoords({x:i.right-1,y:o});return a==null||l==null?n:{from:Math.max(n.from,Math.min(a,l)),to:Math.min(n.to,Math.max(a,l))}}function Fme(t,e,r){if(r.to<=t.viewport.from||r.from>=t.viewport.to)return[];let n=Math.max(r.from,t.viewport.from),s=Math.min(r.to,t.viewport.to),i=t.textDirection==ur.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=M8(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=a.right-(u?parseInt(u.paddingRight):0),f=aE(t,n,1),b=aE(t,s,-1),m=f.type==_n.Text?f:null,g=b.type==_n.Text?b:null;if(m&&(t.lineWrapping||f.widgetLineBreaks)&&(m=$N(t,n,1,m)),g&&(t.lineWrapping||b.widgetLineBreaks)&&(g=$N(t,s,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return v(_(r.from,r.to,m));{let w=m?_(r.from,null,m):x(f,!1),S=g?_(null,r.to,g):x(b,!0),T=[];return(m||f).to<(g||b).from-(m&&g?1:0)||f.widgetLineBreaks>1&&w.bottom+t.defaultLineHeight/2<S.top?T.push(y(d,w.bottom,h,S.top)):w.bottom<S.top&&t.elementAtHeight((w.bottom+S.top)/2).type==_n.Text&&(w.bottom=S.top=(w.bottom+S.top)/2),v(w).concat(T).concat(v(S))}function y(w,S,T,E){return new Qp(e,w-l.left,S-l.top,Math.max(0,T-w),E-S)}function v({top:w,bottom:S,horizontal:T}){let E=[];for(let C=0;C<T.length;C+=2)E.push(y(T[C],w,T[C+1],S));return E}function _(w,S,T){let E=1e9,C=-1e9,A=[];function I(R,F,G,z,K){let L=t.coordsAtPos(R,R==T.to?-2:2),O=t.coordsAtPos(G,G==T.from?2:-2);!L||!O||(E=Math.min(L.top,O.top,E),C=Math.max(L.bottom,O.bottom,C),K==ur.LTR?A.push(i&&F?d:L.left,i&&z?h:O.right):A.push(!i&&z?d:O.left,!i&&F?h:L.right))}let P=w??T.from,D=S??T.to;for(let R of t.visibleRanges)if(R.to>P&&R.from<D)for(let F=Math.max(R.from,P),G=Math.min(R.to,D);;){let z=t.state.doc.lineAt(F);for(let K of t.bidiSpans(z)){let L=K.from+z.from,O=K.to+z.from;if(L>=G)break;O>F&&I(Math.max(L,F),w==null&&L<=P,Math.min(O,G),S==null&&O>=D,K.dir)}if(F=z.to+1,F>=G)break}return A.length==0&&I(P,w==null,D,S==null,t.textDirection),{top:E,bottom:C,horizontal:A}}function x(w,S){let T=a.top+(S?w.top:w.bottom);return{top:T,bottom:T,horizontal:[]}}}function Bme(t,e){return t.constructor==e.constructor&&t.eq(e)}class $me{constructor(e,r){this.view=e,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,e)}update(e){e.startState.facet(z0)!=e.state.facet(z0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let r=0,n=e.facet(z0);for(;r<n.length&&n[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:r}=this.view;(e!=this.scaleX||r!=this.scaleY)&&(this.scaleX=e,this.scaleY=r,this.dom.style.transform=`scale(${1/e}, ${1/r})`)}draw(e){if(e.length!=this.drawn.length||e.some((r,n)=>!Bme(r,this.drawn[n]))){let r=this.dom.firstChild,n=0;for(let s of e)s.update&&r&&s.constructor&&this.drawn[n].constructor&&s.update(r,this.drawn[n])?(r=r.nextSibling,n++):this.dom.insertBefore(s.draw(),r);for(;r;){let s=r.nextSibling;r.remove(),r=s}this.drawn=e,Je.safari&&Je.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const z0=Qe.define();function j8(t){return[hn.define(e=>new $me(e,t)),z0.of(t)]}const np=Qe.define({combine(t){return Mc(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,r)=>Math.min(e,r),drawRangeCursor:(e,r)=>e||r})}});function Ume(t={}){return[np.of(t),Hme,zme,Wme,c8.of(!0)]}function F8(t){return t.startState.facet(np)!=t.state.facet(np)}const Hme=j8({above:!0,markers(t){let{state:e}=t,r=e.facet(np),n=[];for(let s of e.selection.ranges){let i=s==e.selection.main;if(s.empty||r.drawRangeCursor){let o=i?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=s.empty?s:De.cursor(s.head,s.head>s.anchor?-1:1);for(let l of Qp.forRange(t,o,a))n.push(l)}}return n},update(t,e){t.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=F8(t);return r&&UN(t.state,e),t.docChanged||t.selectionSet||r},mount(t,e){UN(e.state,t)},class:"cm-cursorLayer"});function UN(t,e){e.style.animationDuration=t.facet(np).cursorBlinkRate+"ms"}const zme=j8({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Qp.forRange(t,"cm-selectionBackground",e)).reduce((e,r)=>e.concat(r))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||F8(t)},class:"cm-selectionLayer"}),Wme=xl.highest(tt.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),B8=Ct.define({map(t,e){return t==null?null:e.mapPos(t)}}),Fh=fn.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((r,n)=>n.is(B8)?n.value:r,t)}}),Vme=hn.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let r=t.state.field(Fh);r==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Fh)!=r||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Fh),r=e!=null&&t.coordsAtPos(e);if(!r)return null;let n=t.scrollDOM.getBoundingClientRect();return{left:r.left-n.left+t.scrollDOM.scrollLeft*t.scaleX,top:r.top-n.top+t.scrollDOM.scrollTop*t.scaleY,height:r.bottom-r.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:r}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/r+"px",this.cursor.style.height=t.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Fh)!=t&&this.view.dispatch({effects:B8.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Gme(){return[Fh,Vme]}const HN=hn.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(t){let{view:e}=t,r=e.viewState.editorHeight-e.defaultLineHeight-e.documentPadding.top-.5;r>=0&&r!=this.height&&(this.height=r,this.attrs={style:`padding-bottom: ${r}px`})}});function qme(){return[HN,Dv.of(t=>{var e;return((e=t.plugin(HN))===null||e===void 0?void 0:e.attrs)||null})]}function Kme(){return Xme}const Yme=It.line({class:"cm-activeLine"}),Xme=hn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,r=[];for(let n of t.state.selection.ranges){let s=t.lineBlockAt(n.head);s.from>e&&(r.push(Yme.range(s.from)),e=s.from)}return It.set(r)}},{decorations:t=>t.decorations}),Lg="-10000px";class Jme{constructor(e,r,n,s){this.facet=r,this.createTooltipView=n,this.removeTooltipView=s,this.input=e.state.facet(r),this.tooltips=this.input.filter(o=>o);let i=null;this.tooltipViews=this.tooltips.map(o=>i=n(o,i))}update(e,r){var n;let s=e.state.facet(this.facet),i=s.filter(l=>l);if(s===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=r?[]:null;for(let l=0;l<i.length;l++){let c=i[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=r[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return r&&(a.forEach((l,c)=>r[c]=l),r.length=a.length),this.input=s,this.tooltips=i,this.tooltipViews=o,!0}}function Zme(t={}){return W0.of(t)}function Qme(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const W0=Qe.define({combine:t=>{var e,r,n;return{position:Je.ios?"absolute":((e=t.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((r=t.find(s=>s.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((n=t.find(s=>s.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||Qme}}}),zN=new WeakMap,$8=hn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(W0);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Jme(t,Rk,(r,n)=>this.createTooltip(r,n),r=>{this.resizeObserver&&this.resizeObserver.unobserve(r.dom),r.dom.remove()}),this.above=this.manager.tooltips.map(r=>!!r.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let r=e||t.geometryChanged,n=t.state.facet(W0);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;r=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(t,e){let r=t.create(this.view),n=e?e.dom:null;if(r.dom.classList.add("cm-tooltip"),t.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",r.dom.appendChild(s)}return r.dom.style.position=this.position,r.dom.style.top=Lg,r.dom.style.left="0px",this.container.insertBefore(r.dom,n),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var t,e,r;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(r=this.intersectionObserver)===null||r===void 0||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(Je.safari){let o=i.getBoundingClientRect();r=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else r=!!i.offsetParent&&i.offsetParent!=this.container.ownerDocument.body}if(r||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(t=i.width/this.parent.offsetWidth,e=i.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),s=Ck(this.view);return{visible:{left:n.left+s.left,top:n.top+s.top,right:n.right-s.right,bottom:n.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((i,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(W0).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:r}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:r,space:n,scaleX:s,scaleY:i}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],h=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(r.top,n.top)||d.top>=Math.min(r.bottom,n.bottom)||d.right<Math.max(r.left,n.left)-.1||d.left>Math.min(r.right,n.right)+.1)){u.style.top=Lg;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,b=f?7:0,m=h.right-h.left,g=(e=zN.get(c))!==null&&e!==void 0?e:h.bottom-h.top,y=c.offset||tge,v=this.view.textDirection==ur.LTR,_=h.width>n.right-n.left?v?n.left:n.right-h.width:v?Math.max(n.left,Math.min(d.left-(f?14:0)+y.x,n.right-m)):Math.min(Math.max(n.left,d.left-m+(f?14:0)-y.x),n.right-m),x=this.above[a];!l.strictSide&&(x?d.top-g-b-y.y<n.top:d.bottom+g+b+y.y>n.bottom)&&x==n.bottom-d.bottom>d.top-n.top&&(x=this.above[a]=!x);let w=(x?d.top-n.top:n.bottom-d.bottom)-b;if(w<g&&c.resize!==!1){if(w<this.view.defaultLineHeight){u.style.top=Lg;continue}zN.set(c,g),u.style.height=(g=w)/i+"px"}else u.style.height&&(u.style.height="");let S=x?d.top-g-b-y.y:d.bottom+b+y.y,T=_+m;if(c.overlap!==!0)for(let E of o)E.left<T&&E.right>_&&E.top<S+g&&E.bottom>S&&(S=x?E.top-g-2-b:E.bottom+b+2);if(this.position=="absolute"?(u.style.top=(S-t.parent.top)/i+"px",WN(u,(_-t.parent.left)/s)):(u.style.top=S/i+"px",WN(u,_/s)),f){let E=d.left+(v?y.x:-y.x)-(_+14-7);f.style.left=E/s+"px"}c.overlap!==!0&&o.push({left:_,top:S,right:T,bottom:S+g}),u.classList.toggle("cm-tooltip-above",x),u.classList.toggle("cm-tooltip-below",!x),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Lg}},{eventObservers:{scroll(){this.maybeMeasure()}}});function WN(t,e){let r=parseInt(t.style.left,10);(isNaN(r)||Math.abs(e-r)>1)&&(t.style.left=e+"px")}const ege=tt.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),tge={x:0,y:0},Rk=Qe.define({enables:[$8,ege]});function U8(t,e){let r=t.plugin($8);if(!r)return null;let n=r.manager.tooltips.indexOf(e);return n<0?null:r.manager.tooltipViews[n]}const VN=Qe.define({combine(t){let e,r;for(let n of t)e=e||n.topContainer,r=r||n.bottomContainer;return{topContainer:e,bottomContainer:r}}});function H8(t,e){let r=t.plugin(z8),n=r?r.specs.indexOf(e):-1;return n>-1?r.panels[n]:null}const z8=hn.fromClass(class{constructor(t){this.input=t.state.facet(ty),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(t));let e=t.state.facet(VN);this.top=new Mg(t,!0,e.topContainer),this.bottom=new Mg(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(t){let e=t.state.facet(VN);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Mg(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Mg(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=t.state.facet(ty);if(r!=this.input){let n=r.filter(l=>l),s=[],i=[],o=[],a=[];for(let l of n){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),s.push(u),(u.top?i:o).push(u)}this.specs=n,this.panels=s,this.top.sync(i),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>tt.scrollMargins.of(e=>{let r=e.plugin(t);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});let Mg=class{constructor(e,r,n){this.view=e,this.top=r,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let r of this.panels)r.destroy&&e.indexOf(r)<0&&r.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let e=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;e!=r.dom;)e=GN(e);e=e.nextSibling}else this.dom.insertBefore(r.dom,e);for(;e;)e=GN(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function GN(t){let e=t.nextSibling;return t.remove(),e}const ty=Qe.define({enables:z8});function rge(t,e){let r,n=new Promise(o=>r=o),s=o=>nge(o,e,r);t.state.field(Xx,!1)?t.dispatch({effects:W8.of(s)}):t.dispatch({effects:Ct.appendConfig.of(Xx.init(()=>[s]))});let i=V8.of(s);return{close:i,result:n.then(o=>((t.win.queueMicrotask||(l=>t.win.setTimeout(l,10)))(()=>{t.state.field(Xx).indexOf(s)>-1&&t.dispatch({effects:i})}),o))}}const Xx=fn.define({create(){return[]},update(t,e){for(let r of e.effects)r.is(W8)?t=[r.value].concat(t):r.is(V8)&&(t=t.filter(n=>n!=r.value));return t},provide:t=>ty.computeN([t],e=>e.field(t))}),W8=Ct.define(),V8=Ct.define();function nge(t,e,r){let n=e.content?e.content(t,()=>o(null)):null;if(!n){if(n=nn("form"),e.input){let a=nn("input",e.input);/^(text|password|number|email|tel|url)$/.test(a.type)&&a.classList.add("cm-textfield"),a.name||(a.name="input"),n.appendChild(nn("label",(e.label||"")+": ",a))}else n.appendChild(document.createTextNode(e.label||""));n.appendChild(document.createTextNode(" ")),n.appendChild(nn("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let s=n.nodeName=="FORM"?[n]:n.querySelectorAll("form");for(let a=0;a<s.length;a++){let l=s[a];l.addEventListener("keydown",c=>{c.keyCode==27?(c.preventDefault(),o(null)):c.keyCode==13&&(c.preventDefault(),o(l))}),l.addEventListener("submit",c=>{c.preventDefault(),o(l)})}let i=nn("div",n,nn("button",{onclick:()=>o(null),"aria-label":t.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(i.className=e.class),i.classList.add("cm-dialog");function o(a){i.contains(i.ownerDocument.activeElement)&&t.focus(),r(a)}return{dom:i,top:e.top,mount:()=>{if(e.focus){let a;typeof e.focus=="string"?a=n.querySelector(e.focus):a=n.querySelector("input")||n.querySelector("button"),a&&"select"in a?a.select():a&&"focus"in a&&a.focus()}}}}class la extends il{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}la.prototype.elementClass="";la.prototype.toDOM=void 0;la.prototype.mapMode=In.TrackBefore;la.prototype.startSide=la.prototype.endSide=-1;la.prototype.point=!0;const V0=Qe.define(),sge=Qe.define(),ige={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Dt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},uf=Qe.define();function oge(t){return[G8(),uf.of({...ige,...t})]}const qN=Qe.define({combine:t=>t.some(e=>e)});function G8(t){return[age]}const age=hn.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(uf).map(e=>new YN(t,e)),this.fixed=!t.state.facet(qN);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,r=t.view.viewport,n=Math.min(e.to,r.to)-Math.max(e.from,r.from);this.syncGutters(n<(r.to-r.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(qN)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let r=Dt.iter(this.view.state.facet(V0),this.view.viewport.from),n=[],s=this.gutters.map(i=>new lge(i,this.view.viewport,-this.view.documentPadding.top));for(let i of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(i.type)){let o=!0;for(let a of i.type)if(a.type==_n.Text&&o){pE(r,n,a.from);for(let l of s)l.line(this.view,a,n);o=!1}else if(a.widget)for(let l of s)l.widget(this.view,a)}else if(i.type==_n.Text){pE(r,n,i.from);for(let o of s)o.line(this.view,i,n)}else if(i.widget)for(let o of s)o.widget(this.view,i);for(let i of s)i.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(uf),r=t.state.facet(uf),n=t.docChanged||t.heightChanged||t.viewportChanged||!Dt.eq(t.startState.facet(V0),t.state.facet(V0),t.view.viewport.from,t.view.viewport.to);if(e==r)for(let s of this.gutters)s.update(t)&&(n=!0);else{n=!0;let s=[];for(let i of r){let o=e.indexOf(i);o<0?s.push(new YN(this.view,i)):(this.gutters[o].update(t),s.push(this.gutters[o]))}for(let i of this.gutters)i.dom.remove(),s.indexOf(i)<0&&i.destroy();for(let i of s)i.config.side=="after"?this.getDOMAfter().appendChild(i.dom):this.dom.appendChild(i.dom);this.gutters=s}return n}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>tt.scrollMargins.of(e=>{let r=e.plugin(t);if(!r||r.gutters.length==0||!r.fixed)return null;let n=r.dom.offsetWidth*e.scaleX,s=r.domAfter?r.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==ur.LTR?{left:n,right:s}:{right:n,left:s}})});function KN(t){return Array.isArray(t)?t:[t]}function pE(t,e,r){for(;t.value&&t.from<=r;)t.from==r&&e.push(t.value),t.next()}class lge{constructor(e,r,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Dt.iter(e.markers,r.from)}addElement(e,r,n){let{gutter:s}=this,i=(r.top-this.height)/e.scaleY,o=r.height/e.scaleY;if(this.i==s.elements.length){let a=new q8(e,o,i,n);s.elements.push(a),s.dom.appendChild(a.dom)}else s.elements[this.i].update(e,o,i,n);this.height=r.bottom,this.i++}line(e,r,n){let s=[];pE(this.cursor,s,r.from),n.length&&(s=s.concat(n));let i=this.gutter.config.lineMarker(e,r,s);i&&s.unshift(i);let o=this.gutter;s.length==0&&!o.config.renderEmptyElements||this.addElement(e,r,s)}widget(e,r){let n=this.gutter.config.widgetMarker(e,r.widget,r),s=n?[n]:null;for(let i of e.state.facet(sge)){let o=i(e,r.widget,r);o&&(s||(s=[])).push(o)}s&&this.addElement(e,r,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let r=e.elements.pop();e.dom.removeChild(r.dom),r.destroy()}}}class YN{constructor(e,r){this.view=e,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in r.domEventHandlers)this.dom.addEventListener(n,s=>{let i=s.target,o;if(i!=this.dom&&this.dom.contains(i)){for(;i.parentNode!=this.dom;)i=i.parentNode;let l=i.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=s.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);r.domEventHandlers[n](e,a,s)&&s.preventDefault()});this.markers=KN(r.markers(e)),r.initialSpacer&&(this.spacer=new q8(e,0,0,[r.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let r=this.markers;if(this.markers=KN(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let n=e.view.viewport;return!Dt.eq(this.markers,r,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class q8{constructor(e,r,n,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,r,n,s)}update(e,r,n,s){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),cge(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,r){let n="cm-gutterElement",s=this.dom.firstChild;for(let i=0,o=0;;){let a=o,l=i<r.length?r[i++]:null,c=!1;if(l){let u=l.elementClass;u&&(n+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(s);let d=s.nextSibling;s.remove(),s=d}}if(!l)break;l.toDOM&&(c?s=s.nextSibling:this.dom.insertBefore(l.toDOM(e),s)),c&&o++}this.dom.className=n,this.markers=r}destroy(){this.setMarkers(null,[])}}function cge(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].compare(e[r]))return!1;return!0}const uge=Qe.define(),dge=Qe.define(),Ru=Qe.define({combine(t){return Mc(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,r){let n=Object.assign({},e);for(let s in r){let i=n[s],o=r[s];n[s]=i?(a,l,c)=>i(a,l,c)||o(a,l,c):o}return n}})}});class Jx extends la{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Zx(t,e){return t.state.facet(Ru).formatNumber(e,t.state)}const hge=uf.compute([Ru],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(uge)},lineMarker(e,r,n){return n.some(s=>s.toDOM)?null:new Jx(Zx(e,e.state.doc.lineAt(r.from).number))},widgetMarker:(e,r,n)=>{for(let s of e.state.facet(dge)){let i=s(e,r,n);if(i)return i}return null},lineMarkerChange:e=>e.startState.facet(Ru)!=e.state.facet(Ru),initialSpacer(e){return new Jx(Zx(e,XN(e.state.doc.lines)))},updateSpacer(e,r){let n=Zx(r.view,XN(r.view.state.doc.lines));return n==e.number?e:new Jx(n)},domEventHandlers:t.facet(Ru).domEventHandlers,side:"before"}));function fge(t={}){return[Ru.of(t),G8(),hge]}function XN(t){let e=9;for(;e<t;)e=e*10+9;return e}const pge=new class extends la{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},mge=V0.compute(["selection"],t=>{let e=[],r=-1;for(let n of t.selection.ranges){let s=t.doc.lineAt(n.head).from;s>r&&(r=s,e.push(pge.range(s)))}return Dt.of(e)});function gge(){return mge}const bge=1024;let yge=0;class Xs{constructor(e,r){this.from=e,this.to=r}}class Ot{constructor(e={}){this.id=yge++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=bs.match(e)),r=>{let n=e(r);return n===void 0?null:[this,n]}}}Ot.closedBy=new Ot({deserialize:t=>t.split(" ")});Ot.openedBy=new Ot({deserialize:t=>t.split(" ")});Ot.group=new Ot({deserialize:t=>t.split(" ")});Ot.isolate=new Ot({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ot.contextHash=new Ot({perNode:!0});Ot.lookAhead=new Ot({perNode:!0});Ot.mounted=new Ot({perNode:!0});class qu{constructor(e,r,n,s=!1){this.tree=e,this.overlay=r,this.parser=n,this.bracketed=s}static get(e){return e&&e.props&&e.props[Ot.mounted.id]}}const vge=Object.create(null);class bs{constructor(e,r,n,s=0){this.name=e,this.props=r,this.id=n,this.flags=s}static define(e){let r=e.props&&e.props.length?Object.create(null):vge,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new bs(e.name||"",r,e.id,n);if(e.props){for(let i of e.props)if(Array.isArray(i)||(i=i(s)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[i[0].id]=i[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let r=this.prop(Ot.group);return r?r.indexOf(e)>-1:!1}return this.id==e}static match(e){let r=Object.create(null);for(let n in e)for(let s of n.split(" "))r[s]=e[n];return n=>{for(let s=n.prop(Ot.group),i=-1;i<(s?s.length:0);i++){let o=r[i<0?n.name:s[i]];if(o)return o}}}}bs.none=new bs("",Object.create(null),0,8);class K8{constructor(e){this.types=e;for(let r=0;r<e.length;r++)if(e[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let r=[];for(let n of this.types){let s=null;for(let i of e){let o=i(n);if(o){s||(s=Object.assign({},n.props));let a=o[1],l=o[0];l.combine&&l.id in s&&(a=l.combine(s[l.id],a)),s[l.id]=a}}r.push(s?new bs(n.name,s,n.id,n.flags):n)}return new K8(r)}}const jg=new WeakMap,JN=new WeakMap;var nr;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays",t[t.EnterBracketed=16]="EnterBracketed"})(nr||(nr={}));class zr{constructor(e,r,n,s,i){if(this.type=e,this.children=r,this.positions=n,this.length=s,this.props=null,i&&i.length){this.props=Object.create(null);for(let[o,a]of i)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=qu.get(this);if(e&&!e.overlay)return e.tree.toString();let r="";for(let n of this.children){let s=n.toString();s&&(r&&(r+=","),r+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(e=0){return new ry(this.topNode,e)}cursorAt(e,r=0,n=0){let s=jg.get(this)||this.topNode,i=new ry(s);return i.moveTo(e,r),jg.set(this,i._tree),i}get topNode(){return new si(this,0,0,null)}resolve(e,r=0){let n=sp(jg.get(this)||this.topNode,e,r,!1);return jg.set(this,n),n}resolveInner(e,r=0){let n=sp(JN.get(this)||this.topNode,e,r,!0);return JN.set(this,n),n}resolveStack(e,r=0){return wge(this,e,r)}iterate(e){let{enter:r,leave:n,from:s=0,to:i=this.length}=e,o=e.mode||0,a=(o&nr.IncludeAnonymous)>0;for(let l=this.cursor(o|nr.IncludeAnonymous);;){let c=!1;if(l.from<=i&&l.to>=s&&(!a&&l.type.isAnonymous||r(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&n&&(a||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let r in this.props)e.push([+r,this.props[r]]);return e}balance(e={}){return this.children.length<=8?this:Nk(bs.none,this.children,this.positions,0,this.children.length,0,this.length,(r,n,s)=>new zr(this.type,r,n,s,this.propValues),e.makeTree||((r,n,s)=>new zr(bs.none,r,n,s)))}static build(e){return Sge(e)}}zr.empty=new zr(bs.none,[],[],0);class Pk{constructor(e,r){this.buffer=e,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Pk(this.buffer,this.index)}}class cl{constructor(e,r,n){this.buffer=e,this.length=r,this.set=n}get type(){return bs.none}toString(){let e=[];for(let r=0;r<this.buffer.length;)e.push(this.childString(r)),r=this.buffer[r+3];return e.join(",")}childString(e){let r=this.buffer[e],n=this.buffer[e+3],s=this.set.types[r],i=s.name;if(/\W/.test(i)&&!s.isError&&(i=JSON.stringify(i)),e+=4,n==e)return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,r,n,s,i){let{buffer:o}=this,a=-1;for(let l=e;l!=r&&!(Y8(i,s,o[l+1],o[l+2])&&(a=l,n>0));l=o[l+3]);return a}slice(e,r,n){let s=this.buffer,i=new Uint16Array(r-e),o=0;for(let a=e,l=0;a<r;){i[l++]=s[a++],i[l++]=s[a++]-n;let c=i[l++]=s[a++]-n;i[l++]=s[a++]-e,o=Math.max(o,c)}return new cl(i,o,this.set)}}function Y8(t,e,r,n){switch(t){case-2:return r<e;case-1:return n>=e&&r<e;case 0:return r<e&&n>e;case 1:return r<=e&&n>e;case 2:return n>e;case 4:return!0}}function sp(t,e,r,n){for(var s;t.from==t.to||(r<1?t.from>=e:t.from>e)||(r>-1?t.to<=e:t.to<e);){let o=!n&&t instanceof si&&t.index<0?null:t.parent;if(!o)return t;t=o}let i=n?0:nr.IgnoreOverlays;if(n)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof si&&o.index<0&&((s=a.enter(e,r,i))===null||s===void 0?void 0:s.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,r,i);if(!o)return t;t=o}}class X8{cursor(e=0){return new ry(this,e)}getChild(e,r=null,n=null){let s=ZN(this,e,r,n);return s.length?s[0]:null}getChildren(e,r=null,n=null){return ZN(this,e,r,n)}resolve(e,r=0){return sp(this,e,r,!1)}resolveInner(e,r=0){return sp(this,e,r,!0)}matchContext(e){return mE(this.parent,e)}enterUnfinishedNodesBefore(e){let r=this.childBefore(e),n=this;for(;r;){let s=r.lastChild;if(!s||s.to!=r.to)break;s.type.isError&&s.from==s.to?(n=r,r=s.prevSibling):r=s}return n}get node(){return this}get next(){return this.parent}}let si=class G0 extends X8{constructor(e,r,n,s){super(),this._tree=e,this.from=r,this.index=n,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,r,n,s,i=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=r>0?a.length:-1;e!=c;e+=r){let u=a[e],d=l[e]+o.from,h;if(!(!(i&nr.EnterBracketed&&u instanceof zr&&(h=qu.get(u))&&!h.overlay&&h.bracketed&&n>=d&&n<=d+u.length)&&!Y8(s,n,d,d+u.length))){if(u instanceof cl){if(i&nr.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,r,n-d,s);if(f>-1)return new ho(new _ge(o,u,e,d),null,f)}else if(i&nr.IncludeAnonymous||!u.type.isAnonymous||Ik(u)){let f;if(!(i&nr.IgnoreMounts)&&(f=qu.get(u))&&!f.overlay)return new G0(f.tree,d,e,o);let b=new G0(u,d,e,o);return i&nr.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(r<0?u.children.length-1:0,r,n,s,i)}}}if(i&nr.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+r:e=r<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,r,n=0){let s;if(!(n&nr.IgnoreOverlays)&&(s=qu.get(this._tree))&&s.overlay){let i=e-this.from,o=n&nr.EnterBracketed&&s.bracketed;for(let{from:a,to:l}of s.overlay)if((r>0||o?a<=i:a<i)&&(r<0||o?l>=i:l>i))return new G0(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,r,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function ZN(t,e,r,n){let s=t.cursor(),i=[];if(!s.firstChild())return i;if(r!=null){for(let o=!1;!o;)if(o=s.type.is(r),!s.nextSibling())return i}for(;;){if(n!=null&&s.type.is(n))return i;if(s.type.is(e)&&i.push(s.node),!s.nextSibling())return n==null?i:[]}}function mE(t,e,r=e.length-1){for(let n=t;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[r]&&e[r]!=n.name)return!1;r--}}return!0}class _ge{constructor(e,r,n,s){this.parent=e,this.buffer=r,this.index=n,this.start=s}}class ho extends X8{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,r,n){super(),this.context=e,this._parent=r,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,r,n){let{buffer:s}=this.context,i=s.findChild(this.index+4,s.buffer[this.index+3],e,r-this.context.start,n);return i<0?null:new ho(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,r,n=0){if(n&nr.ExcludeBuffers)return null;let{buffer:s}=this.context,i=s.findChild(this.index+4,s.buffer[this.index+3],r>0?1:-1,e-this.context.start,r);return i<0?null:new ho(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,r=e.buffer[this.index+3];return r<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ho(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new ho(this.context,this._parent,e.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],r=[],{buffer:n}=this.context,s=this.index+4,i=n.buffer[this.index+3];if(i>s){let o=n.buffer[this.index+1];e.push(n.slice(s,i,o)),r.push(0)}return new zr(this.type,e,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function J8(t){if(!t.length)return null;let e=0,r=t[0];for(let i=1;i<t.length;i++){let o=t[i];(o.from>r.from||o.to<r.to)&&(r=o,e=i)}let n=r instanceof si&&r.index<0?null:r.parent,s=t.slice();return n?s[e]=n:s.splice(e,1),new xge(s,r)}class xge{constructor(e,r){this.heads=e,this.node=r}get next(){return J8(this.heads)}}function wge(t,e,r){let n=t.resolveInner(e,r),s=null;for(let i=n instanceof si?n:n.context.parent;i;i=i.parent)if(i.index<0){let o=i.parent;(s||(s=[n])).push(o.resolve(e,r)),i=o}else{let o=qu.get(i.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new si(o.tree,o.overlay[0].from+i.from,-1,i);(s||(s=[n])).push(sp(a,e,r,!1))}}return s?J8(s):n}class ry{get name(){return this.type.name}constructor(e,r=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=r&~nr.EnterBracketed,e instanceof si)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,r){this.index=e;let{start:n,buffer:s}=this.buffer;return this.type=r||s.set.types[s.buffer[e]],this.from=n+s.buffer[e+1],this.to=n+s.buffer[e+2],!0}yield(e){return e?e instanceof si?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,r,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,r,n,this.mode));let{buffer:s}=this.buffer,i=s.findChild(this.index+4,s.buffer[this.index+3],e,r-this.buffer.start,n);return i<0?!1:(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,r,n=this.mode){return this.buffer?n&nr.ExcludeBuffers?!1:this.enterChild(1,e,r):this.yield(this._tree.enter(e,r,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&nr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&nr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:r}=this.buffer,n=this.stack.length-1;if(e<0){let s=n<0?0:this.stack[n]+4;if(this.index!=s)return this.yieldBuf(r.findChild(s,this.index,-1,0,4))}else{let s=r.buffer[this.index+3];if(s<(n<0?r.buffer.length:r.buffer[this.stack[n]+3]))return this.yieldBuf(s)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let r,n,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let i=0;i<this.index;i++)if(s.buffer.buffer[i+3]<this.index)return!1;({index:r,parent:n}=s)}else({index:r,_parent:n}=this._tree);for(;n;{index:r,_parent:n}=n)if(r>-1)for(let i=r+e,o=e<0?-1:n._tree.children.length;i!=o;i+=e){let a=n._tree.children[i];if(this.mode&nr.IncludeAnonymous||a instanceof cl||!a.type.isAnonymous||Ik(a))return!1}return!0}move(e,r){if(r&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,r=0){for(;(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,r););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,r=null,n=0;if(e&&e.context==this.buffer)e:for(let s=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==s){if(s==this.index)return o;r=o,n=i+1;break e}s=this.stack[--i]}for(let s=n;s<this.stack.length;s++)r=new ho(this.buffer,r,this.stack[s]);return this.bufferNode=new ho(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,r){for(let n=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&r&&r(this),s=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,s=!0}}}matchContext(e){if(!this.buffer)return mE(this.node.parent,e);let{buffer:r}=this.buffer,{types:n}=r.set;for(let s=e.length-1,i=this.stack.length-1;s>=0;i--){if(i<0)return mE(this._tree,e,s);let o=n[r.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[s]&&e[s]!=o.name)return!1;s--}}return!0}}function Ik(t){return t.children.some(e=>e instanceof cl||!e.type.isAnonymous||Ik(e))}function Sge(t){var e;let{buffer:r,nodeSet:n,maxBufferLength:s=bge,reused:i=[],minRepeatType:o=n.types.length}=t,a=Array.isArray(r)?new Pk(r,r.length):r,l=n.types,c=0,u=0;function d(w,S,T,E,C,A){let{id:I,start:P,end:D,size:R}=a,F=u,G=c;if(R<0)if(a.next(),R==-1){let $=i[I];T.push($),E.push(P-w);return}else if(R==-3){c=I;return}else if(R==-4){u=I;return}else throw new RangeError(`Unrecognized record size: ${R}`);let z=l[I],K,L,O=P-w;if(D-P<=s&&(L=g(a.pos-S,C))){let $=new Uint16Array(L.size-L.skip),H=a.pos-L.size,U=$.length;for(;a.pos>H;)U=y(L.start,$,U);K=new cl($,D-L.start,n),O=L.start-w}else{let $=a.pos-R;a.next();let H=[],U=[],ee=I>=o?I:-1,X=0,ge=D;for(;a.pos>$;)ee>=0&&a.id==ee&&a.size>=0?(a.end<=ge-s&&(b(H,U,P,X,a.end,ge,ee,F,G),X=H.length,ge=a.end),a.next()):A>2500?h(P,$,H,U):d(P,$,H,U,ee,A+1);if(ee>=0&&X>0&&X<H.length&&b(H,U,P,X,P,ge,ee,F,G),H.reverse(),U.reverse(),ee>-1&&X>0){let J=f(z,G);K=Nk(z,H,U,0,H.length,0,D-P,J,J)}else K=m(z,H,U,D-P,F-D,G)}T.push(K),E.push(O)}function h(w,S,T,E){let C=[],A=0,I=-1;for(;a.pos>S;){let{id:P,start:D,end:R,size:F}=a;if(F>4)a.next();else{if(I>-1&&D<I)break;I<0&&(I=R-s),C.push(P,D,R),A++,a.next()}}if(A){let P=new Uint16Array(A*4),D=C[C.length-2];for(let R=C.length-3,F=0;R>=0;R-=3)P[F++]=C[R],P[F++]=C[R+1]-D,P[F++]=C[R+2]-D,P[F++]=F;T.push(new cl(P,C[2]-D,n)),E.push(D-w)}}function f(w,S){return(T,E,C)=>{let A=0,I=T.length-1,P,D;if(I>=0&&(P=T[I])instanceof zr){if(!I&&P.type==w&&P.length==C)return P;(D=P.prop(Ot.lookAhead))&&(A=E[I]+P.length+D)}return m(w,T,E,C,A,S)}}function b(w,S,T,E,C,A,I,P,D){let R=[],F=[];for(;w.length>E;)R.push(w.pop()),F.push(S.pop()+T-C);w.push(m(n.types[I],R,F,A-C,P-A,D)),S.push(C-T)}function m(w,S,T,E,C,A,I){if(A){let P=[Ot.contextHash,A];I=I?[P].concat(I):[P]}if(C>25){let P=[Ot.lookAhead,C];I=I?[P].concat(I):[P]}return new zr(w,S,T,E,I)}function g(w,S){let T=a.fork(),E=0,C=0,A=0,I=T.end-s,P={size:0,start:0,skip:0};e:for(let D=T.pos-w;T.pos>D;){let R=T.size;if(T.id==S&&R>=0){P.size=E,P.start=C,P.skip=A,A+=4,E+=4,T.next();continue}let F=T.pos-R;if(R<0||F<D||T.start<I)break;let G=T.id>=o?4:0,z=T.start;for(T.next();T.pos>F;){if(T.size<0)if(T.size==-3||T.size==-4)G+=4;else break e;else T.id>=o&&(G+=4);T.next()}C=z,E+=R,A+=G}return(S<0||E==w)&&(P.size=E,P.start=C,P.skip=A),P.size>4?P:void 0}function y(w,S,T){let{id:E,start:C,end:A,size:I}=a;if(a.next(),I>=0&&E<o){let P=T;if(I>4){let D=a.pos-(I-4);for(;a.pos>D;)T=y(w,S,T)}S[--T]=P,S[--T]=A-w,S[--T]=C-w,S[--T]=E}else I==-3?c=E:I==-4&&(u=E);return T}let v=[],_=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,v,_,-1,0);let x=(e=t.length)!==null&&e!==void 0?e:v.length?_[0]+v[0].length:0;return new zr(l[t.topID],v.reverse(),_.reverse(),x)}const QN=new WeakMap;function q0(t,e){if(!t.isAnonymous||e instanceof cl||e.type!=t)return 1;let r=QN.get(e);if(r==null){r=1;for(let n of e.children){if(n.type!=t||!(n instanceof zr)){r=1;break}r+=q0(t,n)}QN.set(e,r)}return r}function Nk(t,e,r,n,s,i,o,a,l){let c=0;for(let b=n;b<s;b++)c+=q0(t,e[b]);let u=Math.ceil(c*1.5/8),d=[],h=[];function f(b,m,g,y,v){for(let _=g;_<y;){let x=_,w=m[_],S=q0(t,b[_]);for(_++;_<y;_++){let T=q0(t,b[_]);if(S+T>=u)break;S+=T}if(_==x+1){if(S>u){let T=b[x];f(T.children,T.positions,0,T.children.length,m[x]+v);continue}d.push(b[x])}else{let T=m[_-1]+b[_-1].length-w;d.push(Nk(t,b,m,x,_,w,T,null,l))}h.push(w+v-i)}}return f(e,r,n,s,0),(a||l)(d,h,o)}class o8e{constructor(){this.map=new WeakMap}setBuffer(e,r,n){let s=this.map.get(e);s||this.map.set(e,s=new Map),s.set(r,n)}getBuffer(e,r){let n=this.map.get(e);return n&&n.get(r)}set(e,r){e instanceof ho?this.setBuffer(e.context.buffer,e.index,r):e instanceof si&&this.map.set(e.tree,r)}get(e){return e instanceof ho?this.getBuffer(e.context.buffer,e.index):e instanceof si?this.map.get(e.tree):void 0}cursorSet(e,r){e.buffer?this.setBuffer(e.buffer.buffer,e.index,r):this.map.set(e.tree,r)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Zo{constructor(e,r,n,s,i=!1,o=!1){this.from=e,this.to=r,this.tree=n,this.offset=s,this.open=(i?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,r=[],n=!1){let s=[new Zo(0,e.length,e,0,!1,n)];for(let i of r)i.to>e.length&&s.push(i);return s}static applyChanges(e,r,n=128){if(!r.length)return e;let s=[],i=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<r.length?r[a]:null,d=u?u.fromA:1e9;if(d-l>=n)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||c){let f=Math.max(h.from,l)-c,b=Math.min(h.to,d)-c;h=f>=b?null:new Zo(f,b,h.tree,h.offset+c,a>0,!!u)}if(h&&s.push(h),o.to>d)break;o=i<e.length?e[i++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return s}}let Ege=class{startParse(e,r,n){return typeof e=="string"&&(e=new Cge(e)),n=n?n.length?n.map(s=>new Xs(s.from,s.to)):[new Xs(0,0)]:[new Xs(0,e.length)],this.createParse(e,r||[],n)}parse(e,r,n){let s=this.startParse(e,r,n);for(;;){let i=s.advance();if(i)return i}}};class Cge{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,r){return this.string.slice(e,r)}}function l8e(t){return(e,r,n,s)=>new kge(e,t,r,n,s)}class eD{constructor(e,r,n,s,i,o){this.parser=e,this.parse=r,this.overlay=n,this.bracketed=s,this.target=i,this.from=o}}function tD(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class Tge{constructor(e,r,n,s,i,o,a,l){this.parser=e,this.predicate=r,this.mounts=n,this.index=s,this.start=i,this.bracketed=o,this.target=a,this.prev=l,this.depth=0,this.ranges=[]}}const gE=new Ot({perNode:!0});class kge{constructor(e,r,n,s,i){this.nest=r,this.input=n,this.fragments=s,this.ranges=i,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let n=this.baseParse.advance();if(!n)return null;if(this.baseParse=null,this.baseTree=n,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let n=this.baseTree;return this.stoppedAt!=null&&(n=new zr(n.type,n.children,n.positions,n.length,n.propValues.concat([[gE,this.stoppedAt]]))),n}let e=this.inner[this.innerDone],r=e.parse.advance();if(r){this.innerDone++;let n=Object.assign(Object.create(null),e.target.props);n[Ot.mounted.id]=new qu(r,e.overlay,e.parser,e.bracketed),e.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let r=this.innerDone;r<this.inner.length;r++)this.inner[r].from<e&&(e=Math.min(e,this.inner[r].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let r=this.innerDone;r<this.inner.length;r++)this.inner[r].parse.stopAt(e)}startInner(){let e=new Pge(this.fragments),r=null,n=null,s=new ry(new si(this.baseTree,this.ranges[0].from,0,null),nr.IncludeAnonymous|nr.IgnoreMounts);e:for(let i,o;;){let a=!0,l;if(this.stoppedAt!=null&&s.from>=this.stoppedAt)a=!1;else if(e.hasNode(s)){if(r){let c=r.mounts.find(u=>u.frag.from<=s.from&&u.frag.to>=s.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let d=u.from+c.pos,h=u.to+c.pos;d>=s.from&&h<=s.to&&!r.ranges.some(f=>f.from<h&&f.to>d)&&r.ranges.push({from:d,to:h})}}a=!1}else if(n&&(o=Age(n.ranges,s.from,s.to)))a=o!=2;else if(!s.type.isAnonymous&&(i=this.nest(s,this.input))&&(s.from<s.to||!i.overlay)){s.tree||(Rge(s),r&&r.depth++,n&&n.depth++);let c=e.findMounts(s.from,i.parser);if(typeof i.overlay=="function")r=new Tge(i.parser,i.overlay,c,this.inner.length,s.from,!!i.bracketed,s.tree,r);else{let u=sD(this.ranges,i.overlay||(s.from<s.to?[new Xs(s.from,s.to)]:[]));u.length&&tD(u),(u.length||!i.overlay)&&this.inner.push(new eD(i.parser,u.length?i.parser.startParse(this.input,iD(c,u),u):i.parser.startParse(""),i.overlay?i.overlay.map(d=>new Xs(d.from-s.from,d.to-s.from)):null,!!i.bracketed,s.tree,u.length?u[0].from:s.from)),i.overlay?u.length&&(n={ranges:u,depth:0,prev:n}):a=!1}}else if(r&&(l=r.predicate(s))&&(l===!0&&(l=new Xs(s.from,s.to)),l.from<l.to)){let c=r.ranges.length-1;c>=0&&r.ranges[c].to==l.from?r.ranges[c]={from:r.ranges[c].from,to:l.to}:r.ranges.push(l)}if(a&&s.firstChild())r&&r.depth++,n&&n.depth++;else for(;!s.nextSibling();){if(!s.parent())break e;if(r&&!--r.depth){let c=sD(this.ranges,r.ranges);c.length&&(tD(c),this.inner.splice(r.index,0,new eD(r.parser,r.parser.startParse(this.input,iD(r.mounts,c),c),r.ranges.map(u=>new Xs(u.from-r.start,u.to-r.start)),r.bracketed,r.target,c[0].from))),r=r.prev}n&&!--n.depth&&(n=n.prev)}}}}function Age(t,e,r){for(let n of t){if(n.from>=r)break;if(n.to>e)return n.from<=e&&n.to>=r?2:1}return 0}function rD(t,e,r,n,s,i){if(e<r){let o=t.buffer[e+1];n.push(t.slice(e,r,o)),s.push(o-i)}}function Rge(t){let{node:e}=t,r=[],n=e.context.buffer;do r.push(t.index),t.parent();while(!t.tree);let s=t.tree,i=s.children.indexOf(n),o=s.children[i],a=o.buffer,l=[i];function c(u,d,h,f,b,m){let g=r[m],y=[],v=[];rD(o,u,g,y,v,f);let _=a[g+1],x=a[g+2];l.push(y.length);let w=m?c(g+4,a[g+3],o.set.types[a[g]],_,x-_,m-1):e.toTree();return y.push(w),v.push(_-f),rD(o,a[g+3],d,y,v,f),new zr(h,y,v,b)}s.children[i]=c(0,a.length,bs.none,0,o.length,r.length-1);for(let u of l){let d=t.tree.children[u],h=t.tree.positions[u];t.yield(new si(d,h+t.from,u,t._tree))}}class nD{constructor(e,r){this.offset=r,this.done=!1,this.cursor=e.cursor(nr.IncludeAnonymous|nr.IgnoreMounts)}moveTo(e){let{cursor:r}=this,n=e-this.offset;for(;!this.done&&r.from<n;)r.to>=e&&r.enter(n,1,nr.IgnoreOverlays|nr.ExcludeBuffers)||r.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let r=this.cursor.tree;;){if(r==e.tree)return!0;if(r.children.length&&r.positions[0]==0&&r.children[0]instanceof zr)r=r.children[0];else break}return!1}}class Pge{constructor(e){var r;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let n=this.curFrag=e[0];this.curTo=(r=n.tree.prop(gE))!==null&&r!==void 0?r:n.to,this.inner=new nD(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let r=this.curFrag=this.fragments[this.fragI];this.curTo=(e=r.tree.prop(gE))!==null&&e!==void 0?e:r.to,this.inner=new nD(r.tree,-r.offset)}}findMounts(e,r){var n;let s=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let i=this.inner.cursor.node;i;i=i.parent){let o=(n=i.tree)===null||n===void 0?void 0:n.prop(Ot.mounted);if(o&&o.parser==r)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=i.to)break;l.tree==this.curFrag.tree&&s.push({frag:l,pos:i.from-l.offset,mount:o})}}}return s}}function sD(t,e){let r=null,n=e;for(let s=1,i=0;s<t.length;s++){let o=t[s-1].to,a=t[s].from;for(;i<n.length;i++){let l=n[i];if(l.from>=a)break;l.to<=o||(r||(n=r=e.slice()),l.from<o?(r[i]=new Xs(l.from,o),l.to>a&&r.splice(i+1,0,new Xs(a,l.to))):l.to>a?r[i--]=new Xs(a,l.to):r.splice(i--,1))}}return n}function Ige(t,e,r,n){let s=0,i=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let u=s==t.length?1e9:o?t[s].to:t[s].from,d=i==e.length?1e9:a?e[i].to:e[i].from;if(o!=a){let h=Math.max(l,r),f=Math.min(u,d,n);h<f&&c.push(new Xs(h,f))}if(l=Math.min(u,d),l==1e9)break;u==l&&(o?(o=!1,s++):o=!0),d==l&&(a?(a=!1,i++):a=!0)}return c}function iD(t,e){let r=[];for(let{pos:n,mount:s,frag:i}of t){let o=n+(s.overlay?s.overlay[0].from:0),a=o+s.tree.length,l=Math.max(i.from,o),c=Math.min(i.to,a);if(s.overlay){let u=s.overlay.map(h=>new Xs(h.from+n,h.to+n)),d=Ige(e,u,l,c);for(let h=0,f=l;;h++){let b=h==d.length,m=b?c:d[h].from;if(m>f&&r.push(new Zo(f,m,s.tree,-o,i.from>=f||i.openStart,i.to<=m||i.openEnd)),b)break;f=d[h].to}}else r.push(new Zo(l,c,s.tree,-o,i.from>=o||i.openStart,i.to<=a||i.openEnd))}return r}let Nge=0;class Vs{constructor(e,r,n,s){this.name=e,this.set=r,this.base=n,this.modified=s,this.id=Nge++}toString(){let{name:e}=this;for(let r of this.modified)r.name&&(e=`${r.name}(${e})`);return e}static define(e,r){let n=typeof e=="string"?e:"?";if(e instanceof Vs&&(r=e),r?.base)throw new Error("Can not derive from a modified tag");let s=new Vs(n,[],null,[]);if(s.set.push(s),r)for(let i of r.set)s.set.push(i);return s}static defineModifier(e){let r=new ny(e);return n=>n.modified.indexOf(r)>-1?n:ny.get(n.base||n,n.modified.concat(r).sort((s,i)=>s.id-i.id))}}let Dge=0;class ny{constructor(e){this.name=e,this.instances=[],this.id=Dge++}static get(e,r){if(!r.length)return e;let n=r[0].instances.find(a=>a.base==e&&Oge(r,a.modified));if(n)return n;let s=[],i=new Vs(e.name,s,e,r);for(let a of r)a.instances.push(i);let o=Lge(r);for(let a of e.set)if(!a.modified.length)for(let l of o)s.push(ny.get(a,l));return i}}function Oge(t,e){return t.length==e.length&&t.every((r,n)=>r==e[n])}function Lge(t){let e=[[]];for(let r=0;r<t.length;r++)for(let n=0,s=e.length;n<s;n++)e.push(e[n].concat(t[r]));return e.sort((r,n)=>n.length-r.length)}function Mge(t){let e=Object.create(null);for(let r in t){let n=t[r];Array.isArray(n)||(n=[n]);for(let s of r.split(" "))if(s){let i=[],o=2,a=s;for(let d=0;;){if(a=="..."&&d>0&&d+3==s.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+s);if(i.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==s.length)break;let f=s[d++];if(d==s.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+s);a=s.slice(d)}let l=i.length-1,c=i[l];if(!c)throw new RangeError("Invalid path: "+s);let u=new ip(n,o,l>0?i.slice(0,l):null);e[c]=u.sort(e[c])}}return Z8.add(e)}const Z8=new Ot({combine(t,e){let r,n,s;for(;t||e;){if(!t||e&&t.depth>=e.depth?(s=e,e=e.next):(s=t,t=t.next),r&&r.mode==s.mode&&!s.context&&!r.context)continue;let i=new ip(s.tags,s.mode,s.context);r?r.next=i:n=i,r=i}return n}});let ip=class{constructor(e,r,n,s){this.tags=e,this.mode=r,this.context=n,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};ip.empty=new ip([],2,null);function Q8(t,e){let r=Object.create(null);for(let i of t)if(!Array.isArray(i.tag))r[i.tag.id]=i.class;else for(let o of i.tag)r[o.id]=i.class;let{scope:n,all:s=null}=e||{};return{style:i=>{let o=s;for(let a of i)for(let l of a.set){let c=r[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:n}}function jge(t,e){let r=null;for(let n of t){let s=n.style(e);s&&(r=r?r+" "+s:s)}return r}function Fge(t,e,r,n=0,s=t.length){let i=new Bge(n,Array.isArray(e)?e:[e],r);i.highlightRange(t.cursor(),n,s,"",i.highlighters),i.flush(s)}class Bge{constructor(e,r,n){this.at=e,this.highlighters=r,this.span=n,this.class=""}startSpan(e,r){r!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=r)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,r,n,s,i){let{type:o,from:a,to:l}=e;if(a>=n||l<=r)return;o.isTop&&(i=this.highlighters.filter(f=>!f.scope||f.scope(o)));let c=s,u=$ge(e)||ip.empty,d=jge(i,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(s+=(s?" ":"")+d)),this.startSpan(Math.max(r,a),c),u.opaque)return;let h=e.tree&&e.tree.prop(Ot.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),b=this.highlighters.filter(g=>!g.scope||g.scope(h.tree.type)),m=e.firstChild();for(let g=0,y=a;;g++){let v=g<h.overlay.length?h.overlay[g]:null,_=v?v.from+a:l,x=Math.max(r,y),w=Math.min(n,_);if(x<w&&m)for(;e.from<w&&(this.highlightRange(e,x,w,s,i),this.startSpan(Math.min(w,e.to),c),!(e.to>=_||!e.nextSibling())););if(!v||_>n)break;y=v.to+a,y>r&&(this.highlightRange(f.cursor(),Math.max(r,v.from+a),Math.min(n,y),"",b),this.startSpan(Math.min(n,y),c))}m&&e.parent()}else if(e.firstChild()){h&&(s="");do if(!(e.to<=r)){if(e.from>=n)break;this.highlightRange(e,r,n,s,i),this.startSpan(Math.min(n,e.to),c)}while(e.nextSibling());e.parent()}}}function $ge(t){let e=t.type.prop(Z8);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Ge=Vs.define,Fg=Ge(),Ma=Ge(),oD=Ge(Ma),aD=Ge(Ma),ja=Ge(),Bg=Ge(ja),Qx=Ge(ja),qi=Ge(),Nl=Ge(qi),$i=Ge(),Ui=Ge(),bE=Ge(),gh=Ge(bE),$g=Ge(),we={comment:Fg,lineComment:Ge(Fg),blockComment:Ge(Fg),docComment:Ge(Fg),name:Ma,variableName:Ge(Ma),typeName:oD,tagName:Ge(oD),propertyName:aD,attributeName:Ge(aD),className:Ge(Ma),labelName:Ge(Ma),namespace:Ge(Ma),macroName:Ge(Ma),literal:ja,string:Bg,docString:Ge(Bg),character:Ge(Bg),attributeValue:Ge(Bg),number:Qx,integer:Ge(Qx),float:Ge(Qx),bool:Ge(ja),regexp:Ge(ja),escape:Ge(ja),color:Ge(ja),url:Ge(ja),keyword:$i,self:Ge($i),null:Ge($i),atom:Ge($i),unit:Ge($i),modifier:Ge($i),operatorKeyword:Ge($i),controlKeyword:Ge($i),definitionKeyword:Ge($i),moduleKeyword:Ge($i),operator:Ui,derefOperator:Ge(Ui),arithmeticOperator:Ge(Ui),logicOperator:Ge(Ui),bitwiseOperator:Ge(Ui),compareOperator:Ge(Ui),updateOperator:Ge(Ui),definitionOperator:Ge(Ui),typeOperator:Ge(Ui),controlOperator:Ge(Ui),punctuation:bE,separator:Ge(bE),bracket:gh,angleBracket:Ge(gh),squareBracket:Ge(gh),paren:Ge(gh),brace:Ge(gh),content:qi,heading:Nl,heading1:Ge(Nl),heading2:Ge(Nl),heading3:Ge(Nl),heading4:Ge(Nl),heading5:Ge(Nl),heading6:Ge(Nl),contentSeparator:Ge(qi),list:Ge(qi),quote:Ge(qi),emphasis:Ge(qi),strong:Ge(qi),link:Ge(qi),monospace:Ge(qi),strikethrough:Ge(qi),inserted:Ge(),deleted:Ge(),changed:Ge(),invalid:Ge(),meta:$g,documentMeta:Ge($g),annotation:Ge($g),processingInstruction:Ge($g),definition:Vs.defineModifier("definition"),constant:Vs.defineModifier("constant"),function:Vs.defineModifier("function"),standard:Vs.defineModifier("standard"),local:Vs.defineModifier("local"),special:Vs.defineModifier("special")};for(let t in we){let e=we[t];e instanceof Vs&&(e.name=t)}Q8([{tag:we.link,class:"tok-link"},{tag:we.heading,class:"tok-heading"},{tag:we.emphasis,class:"tok-emphasis"},{tag:we.strong,class:"tok-strong"},{tag:we.keyword,class:"tok-keyword"},{tag:we.atom,class:"tok-atom"},{tag:we.bool,class:"tok-bool"},{tag:we.url,class:"tok-url"},{tag:we.labelName,class:"tok-labelName"},{tag:we.inserted,class:"tok-inserted"},{tag:we.deleted,class:"tok-deleted"},{tag:we.literal,class:"tok-literal"},{tag:we.string,class:"tok-string"},{tag:we.number,class:"tok-number"},{tag:[we.regexp,we.escape,we.special(we.string)],class:"tok-string2"},{tag:we.variableName,class:"tok-variableName"},{tag:we.local(we.variableName),class:"tok-variableName tok-local"},{tag:we.definition(we.variableName),class:"tok-variableName tok-definition"},{tag:we.special(we.variableName),class:"tok-variableName2"},{tag:we.definition(we.propertyName),class:"tok-propertyName tok-definition"},{tag:we.typeName,class:"tok-typeName"},{tag:we.namespace,class:"tok-namespace"},{tag:we.className,class:"tok-className"},{tag:we.macroName,class:"tok-macroName"},{tag:we.propertyName,class:"tok-propertyName"},{tag:we.operator,class:"tok-operator"},{tag:we.comment,class:"tok-comment"},{tag:we.meta,class:"tok-meta"},{tag:we.invalid,class:"tok-invalid"},{tag:we.punctuation,class:"tok-punctuation"}]);var ew;const Pu=new Ot;function Uge(t){return Qe.define({combine:t?e=>e.concat(t):void 0})}const Hge=new Ot;class _i{constructor(e,r,n=[],s=""){this.data=e,this.name=s,Bt.prototype.hasOwnProperty("tree")||Object.defineProperty(Bt.prototype,"tree",{get(){return xn(this)}}),this.parser=r,this.extension=[ul.of(this),Bt.languageData.of((i,o,a)=>{let l=lD(i,o,a),c=l.type.prop(Pu);if(!c)return[];let u=i.facet(c),d=l.type.prop(Hge);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,i)){let b=i.facet(f.facet);return f.type=="replace"?b:b.concat(u)}}return u})].concat(n)}isActiveAt(e,r,n=-1){return lD(e,r,n).type.prop(Pu)==this.data}findRegions(e){let r=e.facet(ul);if(r?.data==this.data)return[{from:0,to:e.doc.length}];if(!r||!r.allowsNesting)return[];let n=[],s=(i,o)=>{if(i.prop(Pu)==this.data){n.push({from:o,to:o+i.length});return}let a=i.prop(Ot.mounted);if(a){if(a.tree.prop(Pu)==this.data){if(a.overlay)for(let l of a.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+i.length});return}else if(a.overlay){let l=n.length;if(s(a.tree,a.overlay[0].from+o),n.length>l)return}}for(let l=0;l<i.children.length;l++){let c=i.children[l];c instanceof zr&&s(c,i.positions[l]+o)}};return s(xn(e),0),n}get allowsNesting(){return!0}}_i.setState=Ct.define();function lD(t,e,r){let n=t.facet(ul),s=xn(t).topNode;if(!n||n.allowsNesting)for(let i=s;i;i=i.enter(e,r,nr.ExcludeBuffers|nr.EnterBracketed))i.type.isTop&&(s=i);return s}class yE extends _i{constructor(e,r,n){super(e,r,[],n),this.parser=r}static define(e){let r=Uge(e.languageData);return new yE(r,e.parser.configure({props:[Pu.add(n=>n.isTop?r:void 0)]}),e.name)}configure(e,r){return new yE(this.data,this.parser.configure(e),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function xn(t){let e=t.field(_i.state,!1);return e?e.tree:zr.empty}class zge{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,r){let n=this.cursorPos-this.string.length;return e<n||r>=this.cursorPos?this.doc.sliceString(e,r):this.string.slice(e-n,r-n)}}let bh=null;class sy{constructor(e,r,n=[],s,i,o,a,l){this.parser=e,this.state=r,this.fragments=n,this.tree=s,this.treeLen=i,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,r,n){return new sy(e,r,[],zr.empty,0,n,[],null)}startParse(){return this.parser.startParse(new zge(this.state.doc),this.fragments)}work(e,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=zr.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Zo.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,r;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=e,this.tree=r,this.fragments=this.withoutTempSkipped(Zo.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let r=bh;bh=this;try{return e()}finally{bh=r}}withoutTempSkipped(e){for(let r;r=this.tempSkipped.pop();)e=cD(e,r.from,r.to);return e}changes(e,r){let{fragments:n,tree:s,treeLen:i,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,h)=>l.push({fromA:c,toA:u,fromB:d,toB:h})),n=Zo.applyChanges(n,l),s=zr.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new sy(this.parser,r,n,s,i,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let r=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:s,to:i}=this.skipped[n];s<e.to&&i>e.from&&(this.fragments=cD(this.fragments,s,i),this.skipped.splice(n--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,r){this.skipped.push({from:e,to:r})}static getSkippingParser(e){return new class extends Ege{createParse(r,n,s){let i=s[0].from,o=s[s.length-1].to;return{parsedPos:i,advance(){let l=bh;if(l){for(let c of s)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new zr(bs.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let r=this.fragments;return this.treeLen>=e&&r.length&&r[0].from==0&&r[0].to>=e}static get(){return bh}}function cD(t,e,r){return Zo.applyChanges(t,[{fromA:e,toA:r,fromB:e,toB:r}])}class yd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,n)||r.takeTree(),new yd(r)}static init(e){let r=Math.min(3e3,e.doc.length),n=sy.create(e.facet(ul).parser,e,{from:0,to:r});return n.work(20,r)||n.takeTree(),new yd(n)}}_i.state=fn.define({create:yd.init,update(t,e){for(let r of e.effects)if(r.is(_i.setState))return r.value;return e.startState.facet(ul)!=e.state.facet(ul)?yd.init(e.state):t.apply(e)}});let e$=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(e$=t=>{let e=-1,r=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(r):cancelIdleCallback(e)});const tw=typeof navigator<"u"&&(!((ew=navigator.scheduling)===null||ew===void 0)&&ew.isInputPending)?()=>navigator.scheduling.isInputPending():null,Wge=hn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let r=this.view.state.field(_i.state).context;(r.updateViewport(e.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:e}=this.view,r=e.field(_i.state);(r.tree!=r.context.tree||!r.context.isDone(e.doc.length))&&(this.working=e$(this.work))}work(e){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:s}}=this.view,i=n.field(_i.state);if(i.tree==i.context.tree&&i.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!tw?Math.max(25,e.timeRemaining()-5):1e9),a=i.context.treeLen<s&&n.doc.length>s+1e3,l=i.context.work(()=>tw&&tw()||Date.now()>o,s+(a?0:1e5));this.chunkBudget-=Date.now()-r,(l||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:_i.setState.of(new yd(i.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(r=>Rs(this.view.state,r)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ul=Qe.define({combine(t){return t.length?t[0]:null},enables:t=>[_i.state,Wge,tt.contentAttributes.compute([t],e=>{let r=e.facet(t);return r&&r.name?{"data-language":r.name}:{}})]});class d8e{constructor(e,r=[]){this.language=e,this.support=r,this.extension=[e,r]}}class mn{constructor(e,r,n,s,i,o=void 0){this.name=e,this.alias=r,this.extensions=n,this.filename=s,this.loadFunc=i,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:r,support:n}=e;if(!r){if(!n)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");r=()=>Promise.resolve(n)}return new mn(e.name,(e.alias||[]).concat(e.name).map(s=>s.toLowerCase()),e.extensions||[],e.filename,r,n)}static matchFilename(e,r){for(let s of e)if(s.filename&&s.filename.test(r))return s;let n=/\.([^.]+)$/.exec(r);if(n){for(let s of e)if(s.extensions.indexOf(n[1])>-1)return s}return null}static matchLanguageName(e,r,n=!0){r=r.toLowerCase();for(let s of e)if(s.alias.some(i=>i==r))return s;if(n)for(let s of e)for(let i of s.alias){let o=r.indexOf(i);if(o>-1&&(i.length>2||!/\w/.test(r[o-1])&&!/\w/.test(r[o+i.length])))return s}return null}}const Vge=Qe.define(),Fd=Qe.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(r=>r!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function iy(t){let e=t.facet(Fd);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function op(t,e){let r="",n=t.tabSize,s=t.facet(Fd)[0];if(s=="	"){for(;e>=n;)r+="	",e-=n;s=" "}for(let i=0;i<e;i++)r+=s;return r}function Dk(t,e){t instanceof Bt&&(t=new Bv(t));for(let n of t.state.facet(Vge)){let s=n(t,e);if(s!==void 0)return s}let r=xn(t.state);return r.length>=e?qge(t,r,e):null}class Bv{constructor(e,r={}){this.state=e,this.options=r,this.unit=iy(e)}lineAt(e,r=1){let n=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:i}=this.options;return s!=null&&s>=n.from&&s<=n.to?i&&s==e?{text:"",from:e}:(r<0?s<e:s<=e)?{text:n.text.slice(s-n.from),from:s}:{text:n.text.slice(0,s-n.from),from:n.from}:n}textAfterPos(e,r=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:s}=this.lineAt(e,r);return n.slice(e-s,Math.min(n.length,e+100-s))}column(e,r=1){let{text:n,from:s}=this.lineAt(e,r),i=this.countColumn(n,e-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,r=e.length){return Iv(e,this.state.tabSize,r)}lineIndent(e,r=1){let{text:n,from:s}=this.lineAt(e,r),i=this.options.overrideIndentation;if(i){let o=i(s);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Gge=new Ot;function qge(t,e,r){let n=e.resolveStack(r),s=e.resolveInner(r,-1).resolve(r,0).enterUnfinishedNodesBefore(r);if(s!=n.node){let i=[];for(let o=s;o&&!(o.from<n.node.from||o.to>n.node.to||o.from==n.node.from&&o.type==n.node.type);o=o.parent)i.push(o);for(let o=i.length-1;o>=0;o--)n={node:i[o],next:n}}return t$(n,t,r)}function t$(t,e,r){for(let n=t;n;n=n.next){let s=Yge(n.node);if(s)return s(Ok.create(e,r,n))}return 0}function Kge(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Yge(t){let e=t.type.prop(Gge);if(e)return e;let r=t.firstChild,n;if(r&&(n=r.type.prop(Ot.closedBy))){let s=t.lastChild,i=s&&n.indexOf(s.name)>-1;return o=>r$(o,!0,1,void 0,i&&!Kge(o)?s.from:void 0)}return t.parent==null?Xge:null}function Xge(){return 0}class Ok extends Bv{constructor(e,r,n){super(e.state,e.options),this.base=e,this.pos=r,this.context=n}get node(){return this.context.node}static create(e,r,n){return new Ok(e,r,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let r=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(r.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(Jge(n,e))break;r=this.state.doc.lineAt(n.from)}return this.lineIndent(r.from)}continue(){return t$(this.context.next,this.base,this.pos)}}function Jge(t,e){for(let r=e;r;r=r.parent)if(t==r)return!0;return!1}function Zge(t){let e=t.node,r=e.childAfter(e.from),n=e.lastChild;if(!r)return null;let s=t.options.simulateBreak,i=t.state.doc.lineAt(r.from),o=s==null||s<=i.from?i.to:Math.min(i.to,s);for(let a=r.to;;){let l=e.childAfter(a);if(!l||l==n)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(i.text.slice(r.to-i.from))[0].length;return{from:r.from,to:r.to+c}}a=l.to}}function h8e({closing:t,align:e=!0,units:r=1}){return n=>r$(n,e,r,t)}function r$(t,e,r,n,s){let i=t.textAfter,o=i.match(/^\s*/)[0].length,a=n&&i.slice(o,o+n.length)==n||s==t.pos+o,l=e?Zge(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*r)}const f8e=t=>t.baseIndent;function p8e({except:t,units:e=1}={}){return r=>{let n=t&&t.test(r.textAfter);return r.baseIndent+(n?0:e*r.unit)}}const Qge=200;function e0e(){return Bt.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let r=t.newDoc,{head:n}=t.newSelection.main,s=r.lineAt(n);if(n>s.from+Qge)return t;let i=r.sliceString(s.from,n);if(!e.some(c=>c.test(i)))return t;let{state:o}=t,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let d=Dk(o,u.from);if(d==null)continue;let h=/^\s*/.exec(u.text)[0],f=op(o,d);h!=f&&l.push({from:u.from,to:u.from+h.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const t0e=Qe.define(),r0e=new Ot;function m8e(t){let e=t.firstChild,r=t.lastChild;return e&&e.to<r.from?{from:e.to,to:r.type.isError?t.to:r.from}:null}function n0e(t,e,r){let n=xn(t);if(n.length<r)return null;let s=n.resolveStack(r,1),i=null;for(let o=s;o;o=o.next){let a=o.node;if(a.to<=r||a.from>r)continue;if(i&&a.from<e)break;let l=a.type.prop(r0e);if(l&&(a.to<n.length-50||n.length==t.doc.length||!s0e(a))){let c=l(a,t);c&&c.from<=r&&c.from>=e&&c.to>r&&(i=c)}}return i}function s0e(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function uD(t,e,r){for(let n of t.facet(t0e)){let s=n(t,e,r);if(s)return s}return n0e(t,e,r)}function n$(t,e){let r=e.mapPos(t.from,1),n=e.mapPos(t.to,-1);return r>=n?void 0:{from:r,to:n}}const s$=Ct.define({map:n$}),Lk=Ct.define({map:n$}),oy=fn.define({create(){return It.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((r,n)=>t=dD(t,r,n)),t=t.map(e.changes);for(let r of e.effects)if(r.is(s$)&&!i0e(t,r.value.from,r.value.to)){let{preparePlaceholder:n}=e.state.facet(i$),s=n?It.replace({widget:new l0e(n(e.state,r.value))}):hD;t=t.update({add:[s.range(r.value.from,r.value.to)]})}else r.is(Lk)&&(t=t.update({filter:(n,s)=>r.value.from!=n||r.value.to!=s,filterFrom:r.value.from,filterTo:r.value.to}));return e.selection&&(t=dD(t,e.selection.main.head)),t},provide:t=>tt.decorations.from(t),toJSON(t,e){let r=[];return t.between(0,e.doc.length,(n,s)=>{r.push(n,s)}),r},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let r=0;r<t.length;){let n=t[r++],s=t[r++];if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(hD.range(n,s))}return It.set(e,!0)}});function dD(t,e,r=e){let n=!1;return t.between(e,r,(s,i)=>{s<r&&i>e&&(n=!0)}),n?t.update({filterFrom:e,filterTo:r,filter:(s,i)=>s>=r||i<=e}):t}function vE(t,e,r){var n;let s=null;return(n=t.field(oy,!1))===null||n===void 0||n.between(e,r,(i,o)=>{(!s||s.from>i)&&(s={from:i,to:o})}),s}function i0e(t,e,r){let n=!1;return t.between(e,e,(s,i)=>{s==e&&i==r&&(n=!0)}),n}const o0e={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},i$=Qe.define({combine(t){return Mc(t,o0e)}});function a0e(t){return[oy,d0e]}function o$(t,e){let{state:r}=t,n=r.facet(i$),s=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=vE(t.state,a.from,a.to);l&&t.dispatch({effects:Lk.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,s,e);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",r.phrase("folded code")),i.title=r.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=s,i}const hD=It.replace({widget:new class extends wl{toDOM(t){return o$(t,null)}}});class l0e extends wl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return o$(e,this.value)}}const c0e={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class rw extends la{constructor(e,r){super(),this.config=e,this.open=r}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=e.state.phrase(this.open?"Fold line":"Unfold line"),r}}function u0e(t={}){let e={...c0e,...t},r=new rw(e,!0),n=new rw(e,!1),s=hn.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(ul)!=o.state.facet(ul)||o.startState.field(oy,!1)!=o.state.field(oy,!1)||xn(o.startState)!=xn(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new vc;for(let l of o.viewportLineBlocks){let c=vE(o.state,l.from,l.to)?n:uD(o.state,l.from,l.to)?r:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:i}=e;return[s,oge({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(s))===null||a===void 0?void 0:a.markers)||Dt.empty},initialSpacer(){return new rw(e,!1)},domEventHandlers:{...i,click:(o,a,l)=>{if(i.click&&i.click(o,a,l))return!0;let c=vE(o.state,a.from,a.to);if(c)return o.dispatch({effects:Lk.of(c)}),!0;let u=uD(o.state,a.from,a.to);return u?(o.dispatch({effects:s$.of(u)}),!0):!1}}}),a0e()]}const d0e=tt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class $v{constructor(e,r){this.specs=e;let n;function s(a){let l=ol.newName();return(n||(n=Object.create(null)))["."+l]=a,l}const i=typeof r.all=="string"?r.all:r.all?s(r.all):void 0,o=r.scope;this.scope=o instanceof _i?a=>a.prop(Pu)==o.data:o?a=>a==o:void 0,this.style=Q8(e.map(a=>({tag:a.tag,class:a.class||s(Object.assign({},a,{tag:null}))})),{all:i}).style,this.module=n?new ol(n):null,this.themeType=r.themeType}static define(e,r){return new $v(e,r||{})}}const _E=Qe.define(),h0e=Qe.define({combine(t){return t.length?[t[0]]:null}});function nw(t){let e=t.facet(_E);return e.length?e:t.facet(h0e)}function f0e(t,e){let r=[m0e],n;return t instanceof $v&&(t.module&&r.push(tt.styleModule.of(t.module)),n=t.themeType),n?r.push(_E.computeN([tt.darkTheme],s=>s.facet(tt.darkTheme)==(n=="dark")?[t]:[])):r.push(_E.of(t)),r}class p0e{constructor(e){this.markCache=Object.create(null),this.tree=xn(e.state),this.decorations=this.buildDeco(e,nw(e.state)),this.decoratedTo=e.viewport.to}update(e){let r=xn(e.state),n=nw(e.state),s=n!=nw(e.startState),{viewport:i}=e.view,o=e.changes.mapPos(this.decoratedTo,1);r.length<i.to&&!s&&r.type==this.tree.type&&o>=i.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(r!=this.tree||e.viewportChanged||s)&&(this.tree=r,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=i.to)}buildDeco(e,r){if(!r||!this.tree.length)return It.none;let n=new vc;for(let{from:s,to:i}of e.visibleRanges)Fge(this.tree,r,(o,a,l)=>{n.add(o,a,this.markCache[l]||(this.markCache[l]=It.mark({class:l})))},s,i);return n.finish()}}const m0e=xl.high(hn.fromClass(p0e,{decorations:t=>t.decorations})),g0e=tt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),a$=1e4,l$="()[]{}",c$=Qe.define({combine(t){return Mc(t,{afterCursor:!0,brackets:l$,maxScanDistance:a$,renderMatch:v0e})}}),b0e=It.mark({class:"cm-matchingBracket"}),y0e=It.mark({class:"cm-nonmatchingBracket"});function v0e(t){let e=[],r=t.matched?b0e:y0e;return e.push(r.range(t.start.from,t.start.to)),t.end&&e.push(r.range(t.end.from,t.end.to)),e}const _0e=fn.define({create(){return It.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let r=[],n=e.state.facet(c$);for(let s of e.state.selection.ranges){if(!s.empty)continue;let i=fo(e.state,s.head,-1,n)||s.head>0&&fo(e.state,s.head-1,1,n)||n.afterCursor&&(fo(e.state,s.head,1,n)||s.head<e.state.doc.length&&fo(e.state,s.head+1,-1,n));i&&(r=r.concat(n.renderMatch(i,e.state)))}return It.set(r,!0)},provide:t=>tt.decorations.from(t)}),x0e=[_0e,g0e];function w0e(t={}){return[c$.of(t),x0e]}const S0e=new Ot;function xE(t,e,r){let n=t.prop(e<0?Ot.openedBy:Ot.closedBy);if(n)return n;if(t.name.length==1){let s=r.indexOf(t.name);if(s>-1&&s%2==(e<0?1:0))return[r[s+e]]}return null}function wE(t){let e=t.type.prop(S0e);return e?e(t.node):t}function fo(t,e,r,n={}){let s=n.maxScanDistance||a$,i=n.brackets||l$,o=xn(t),a=o.resolveInner(e,r);for(let l=a;l;l=l.parent){let c=xE(l.type,r,i);if(c&&l.from<l.to){let u=wE(l);if(u&&(r>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return E0e(t,e,r,l,u,c,i)}}return C0e(t,e,r,o,a.type,s,i)}function E0e(t,e,r,n,s,i,o){let a=n.parent,l={from:s.from,to:s.to},c=0,u=a?.cursor();if(u&&(r<0?u.childBefore(n.from):u.childAfter(n.to)))do if(r<0?u.to<=n.from:u.from>=n.to){if(c==0&&i.indexOf(u.type.name)>-1&&u.from<u.to){let d=wE(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(xE(u.type,r,o))c++;else if(xE(u.type,-r,o)){if(c==0){let d=wE(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(r<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function C0e(t,e,r,n,s,i,o){let a=r<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=r>0)return null;let c={from:r<0?e-1:e,to:r>0?e+1:e},u=t.doc.iterRange(e,r>0?t.doc.length:0),d=0;for(let h=0;!u.next().done&&h<=i;){let f=u.value;r<0&&(h+=f.length);let b=e+h*r;for(let m=r>0?0:f.length-1,g=r>0?f.length:-1;m!=g;m+=r){let y=o.indexOf(f[m]);if(!(y<0||n.resolveInner(b+m,1).type!=s))if(y%2==0==r>0)d++;else{if(d==1)return{start:c,end:{from:b+m,to:b+m+1},matched:y>>1==l>>1};d--}}r>0&&(h+=f.length)}return u.done?{start:c,matched:!1}:null}const T0e=Object.create(null),fD=[bs.none],pD=[],mD=Object.create(null),k0e=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])k0e[t]=A0e(T0e,e);function sw(t,e){pD.indexOf(t)>-1||(pD.push(t),console.warn(e))}function A0e(t,e){let r=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||we[c];u?typeof u=="function"?l.length?l=l.map(u):sw(c,`Modifier ${c} used at start of tag`):l.length?sw(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:sw(c,`Unknown highlighting tag ${c}`)}for(let c of l)r.push(c)}if(!r.length)return 0;let n=e.replace(/ /g,"_"),s=n+" "+r.map(a=>a.id),i=mD[s];if(i)return i.id;let o=mD[s]=bs.define({id:fD.length,name:n,props:[Mge({[n]:r})]});return fD.push(o),o.id}ur.RTL,ur.LTR;class u${constructor(e,r,n,s){this.state=e,this.pos=r,this.explicit=n,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let r=xn(this.state).resolveInner(this.pos,-1);for(;r&&e.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(e){let r=this.state.doc.lineAt(this.pos),n=Math.max(r.from,this.pos-250),s=r.text.slice(n-r.from,this.pos-r.from),i=s.search(d$(e,!1));return i<0?null:{from:n+i,to:this.pos,text:s.slice(i)}}get aborted(){return this.abortListeners==null}addEventListener(e,r,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(r),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function gD(t){let e=Object.keys(t).join(""),r=/\w/.test(e);return r&&(e=e.replace(/\w/g,"")),`[${r?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function R0e(t){let e=Object.create(null),r=Object.create(null);for(let{label:s}of t){e[s[0]]=!0;for(let i=1;i<s.length;i++)r[s[i]]=!0}let n=gD(e)+gD(r)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function P0e(t){let e=t.map(s=>typeof s=="string"?{label:s}:s),[r,n]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:R0e(e);return s=>{let i=s.matchBefore(n);return i||s.explicit?{from:i?i.from:s.pos,options:e,validFor:r}:null}}function g8e(t,e){return r=>{for(let n=xn(r.state).resolveInner(r.pos,-1);n;n=n.parent){if(t.indexOf(n.name)>-1)return null;if(n.type.isTop)break}return e(r)}}class bD{constructor(e,r,n,s){this.completion=e,this.source=r,this.match=n,this.score=s}}function uc(t){return t.selection.main.from}function d$(t,e){var r;let{source:n}=t,s=e&&n[0]!="^",i=n[n.length-1]!="$";return!s&&!i?t:new RegExp(`${s?"^":""}(?:${n})${i?"$":""}`,(r=t.flags)!==null&&r!==void 0?r:t.ignoreCase?"i":"")}const Mk=fa.define();function I0e(t,e,r,n){let{main:s}=t.selection,i=r-s.from,o=n-s.from;return{...t.changeByRange(a=>{if(a!=s&&r!=n&&t.sliceDoc(a.from+i,a.from+o)!=t.sliceDoc(r,n))return{range:a};let l=t.toText(e);return{changes:{from:a.from+i,to:n==s.from?a.to:a.from+o,insert:l},range:De.cursor(a.from+i+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const yD=new WeakMap;function N0e(t){if(!Array.isArray(t))return t;let e=yD.get(t);return e||yD.set(t,e=P0e(t)),e}const ay=Ct.define(),ap=Ct.define();class D0e{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<e.length;){let n=gi(e,r),s=Wo(n);this.chars.push(n);let i=e.slice(r,r+s),o=i.toUpperCase();this.folded.push(gi(o==i?i.toLowerCase():o,0)),r+=s}this.astral=e.length!=this.chars.length}ret(e,r){return this.score=e,this.matched=r,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:r,folded:n,any:s,precise:i,byWord:o}=this;if(r.length==1){let v=gi(e,0),_=Wo(v),x=_==e.length?0:-100;if(v!=r[0])if(v==n[0])x+=-200;else return null;return this.ret(x,[0,_])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=r.length,c=0;if(a<0){for(let v=0,_=Math.min(e.length,200);v<_&&c<l;){let x=gi(e,v);(x==r[c]||x==n[c])&&(s[c++]=v),v+=Wo(x)}if(c<l)return null}let u=0,d=0,h=!1,f=0,b=-1,m=-1,g=/[a-z]/.test(e),y=!0;for(let v=0,_=Math.min(e.length,200),x=0;v<_&&d<l;){let w=gi(e,v);a<0&&(u<l&&w==r[u]&&(i[u++]=v),f<l&&(w==r[f]||w==n[f]?(f==0&&(b=v),m=v+1,f++):f=0));let S,T=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(S=pk(w))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!v||T==1&&g||x==0&&T!=0)&&(r[d]==w||n[d]==w&&(h=!0)?o[d++]=v:o.length&&(y=!1)),x=T,v+=Wo(w)}return d==l&&o[0]==0&&y?this.result(-100+(h?-200:0),o,e):f==l&&b==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-900-e.length,[b,m]):d==l?this.result(-100+(h?-200:0)+-700+(y?0:-1100),o,e):r.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,r,n){let s=[],i=0;for(let o of r){let a=o+(this.astral?Wo(gi(n,o)):1);i&&s[i-1]==o?s[i-1]=a:(s[i++]=o,s[i++]=a)}return this.ret(e-n.length,s)}}class O0e{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let r=e.slice(0,this.pattern.length),n=r==this.pattern?0:r.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,r.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const an=Qe.define({combine(t){return Mc(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:L0e,filterStrict:!1,compareCompletions:(e,r)=>(e.sortText||e.label).localeCompare(r.sortText||r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,r)=>e&&r,closeOnBlur:(e,r)=>e&&r,icons:(e,r)=>e&&r,tooltipClass:(e,r)=>n=>vD(e(n),r(n)),optionClass:(e,r)=>n=>vD(e(n),r(n)),addToOptions:(e,r)=>e.concat(r),filterStrict:(e,r)=>e||r})}});function vD(t,e){return t?e?t+" "+e:t:e}function L0e(t,e,r,n,s,i){let o=t.textDirection==ur.RTL,a=o,l=!1,c="top",u,d,h=e.left-s.left,f=s.right-e.right,b=n.right-n.left,m=n.bottom-n.top;if(a&&h<Math.min(b,f)?a=!1:!a&&f<Math.min(b,h)&&(a=!0),b<=(a?h:f))u=Math.max(s.top,Math.min(r.top,s.bottom-m))-e.top,d=Math.min(400,a?h:f);else{l=!0,d=Math.min(400,(o?e.right:s.right-e.left)-30);let v=s.bottom-e.bottom;v>=m||v>e.top?u=r.bottom-e.top:(c="bottom",u=e.bottom-r.top)}let g=(e.bottom-e.top)/i.offsetHeight,y=(e.right-e.left)/i.offsetWidth;return{style:`${c}: ${u/g}px; max-width: ${d/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function M0e(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(r){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),r.type&&n.classList.add(...r.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(r,n,s,i){let o=document.createElement("span");o.className="cm-completionLabel";let a=r.displayLabel||r.label,l=0;for(let c=0;c<i.length;){let u=i[c++],d=i[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(a.slice(u,d))),h.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(r){if(!r.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=r.detail,n},position:80}),e.sort((r,n)=>r.position-n.position).map(r=>r.render)}function iw(t,e,r){if(t<=r)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let s=Math.floor(e/r);return{from:s*r,to:(s+1)*r}}let n=Math.floor((t-e)/r);return{from:t-(n+1)*r,to:t-n*r}}class j0e{constructor(e,r,n){this.view=e,this.stateField=r,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let s=e.state.field(r),{options:i,selected:o}=s.open,a=e.state.facet(an);this.optionContent=M0e(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=iw(i.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(r).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(an).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:ap.of(null)})}),this.showOptions(i,s.id)}mount(){this.updateSel()}showOptions(e,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var r;let n=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=s){let{options:i,selected:o,disabled:a}=n.open;(!s.open||s.open.options!=i)&&(this.range=iw(i.length,o,e.state.facet(an).maxRenderedOptions),this.showOptions(i,n.id)),this.updateSel(),a!=((r=s.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let r=this.tooltipClass(e);if(r!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of r.split(" "))n&&this.dom.classList.add(n);this.currentClass=r}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),r=e.open;(r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=iw(r.options.length,r.selected,this.view.state.facet(an).maxRenderedOptions),this.showOptions(r.options,e.id));let n=this.updateSelectedOption(r.selected);if(n){this.destroyInfo();let{completion:s}=r.options[r.selected],{info:i}=s;if(!i)return;let o=typeof i=="string"?document.createTextNode(i):i(s);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,s)}).catch(a=>Rs(this.view.state,a,"completion info")):(this.addInfoPane(o,s),n.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,r){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",n.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:i}=e;n.appendChild(s),this.infoDestroy=i||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let r=null;for(let n=this.list.firstChild,s=this.range.from;n;n=n.nextSibling,s++)n.nodeName!="LI"||!n.id?s--:s==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),r=n):n.hasAttribute("aria-selected")&&(n.removeAttribute("aria-selected"),n.removeAttribute("aria-describedby"));return r&&B0e(this.list,r),r}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let r=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),i=this.space;if(!i){let o=this.dom.ownerDocument.documentElement;i={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return s.top>Math.min(i.bottom,r.bottom)-10||s.bottom<Math.max(i.top,r.top)+10?null:this.view.state.facet(an).positionInfo(this.view,r,s,n,i,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,r,n){const s=document.createElement("ul");s.id=r,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions")),s.addEventListener("mousedown",o=>{o.target==s&&o.preventDefault()});let i=null;for(let o=n.from;o<n.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let h=typeof c=="string"?c:c.name;if(h!=i&&(o>n.from||n.from==0))if(i=h,typeof c!="string"&&c.header)s.appendChild(c.header(c));else{let f=s.appendChild(document.createElement("completion-section"));f.textContent=h}}const u=s.appendChild(document.createElement("li"));u.id=r+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,this.view,l);f&&u.appendChild(f)}}return n.from&&s.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function F0e(t,e){return r=>new j0e(r,t,e)}function B0e(t,e){let r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),s=r.height/t.offsetHeight;n.top<r.top?t.scrollTop-=(r.top-n.top)/s:n.bottom>r.bottom&&(t.scrollTop+=(n.bottom-r.bottom)/s)}function _D(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function $0e(t,e){let r=[],n=null,s=null,i=u=>{r.push(u);let{section:d}=u.completion;if(d){n||(n=[]);let h=typeof d=="string"?d:d.name;n.some(f=>f.name==h)||n.push(typeof d=="string"?{name:h}:d)}},o=e.facet(an);for(let u of t)if(u.hasResult()){let d=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)i(new bD(h,u.source,d?d(h):[],1e9-r.length));else{let h=e.sliceDoc(u.from,u.to),f,b=o.filterStrict?new O0e(h):new D0e(h);for(let m of u.result.options)if(f=b.match(m.label)){let g=m.displayLabel?d?d(m,f.matched):[]:f.matched,y=f.score+(m.boost||0);if(i(new bD(m,u.source,g,y)),typeof m.section=="object"&&m.section.rank==="dynamic"){let{name:v}=m.section;s||(s=Object.create(null)),s[v]=Math.max(y,s[v]||-1e9)}}}}if(n){let u=Object.create(null),d=0,h=(f,b)=>(f.rank==="dynamic"&&b.rank==="dynamic"?s[b.name]-s[f.name]:0)||(typeof f.rank=="number"?f.rank:1e9)-(typeof b.rank=="number"?b.rank:1e9)||(f.name<b.name?-1:1);for(let f of n.sort(h))d-=1e5,u[f.name]=d;for(let f of r){let{section:b}=f.completion;b&&(f.score+=u[typeof b=="string"?b:b.name])}}let a=[],l=null,c=o.compareCompletions;for(let u of r.sort((d,h)=>h.score-d.score||c(d.completion,h.completion))){let d=u.completion;!l||l.label!=d.label||l.detail!=d.detail||l.type!=null&&d.type!=null&&l.type!=d.type||l.apply!=d.apply||l.boost!=d.boost?a.push(u):_D(u.completion)>_D(l)&&(a[a.length-1]=u),l=u.completion}return a}class Iu{constructor(e,r,n,s,i,o){this.options=e,this.attrs=r,this.tooltip=n,this.timestamp=s,this.selected=i,this.disabled=o}setSelected(e,r){return e==this.selected||e>=this.options.length?this:new Iu(this.options,xD(r,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,r,n,s,i,o){if(s&&!o&&e.some(c=>c.isPending))return s.setDisabled();let a=$0e(e,r);if(!a.length)return s&&e.some(c=>c.isPending)?s.setDisabled():null;let l=r.facet(an).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let c=s.options[s.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new Iu(a,xD(n,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:G0e,above:i.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new Iu(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Iu(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class ly{constructor(e,r,n){this.active=e,this.id=r,this.open=n}static start(){return new ly(W0e,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:r}=e,n=r.facet(an),i=(n.override||r.languageDataAt("autocomplete",uc(r)).map(N0e)).map(l=>(this.active.find(u=>u.source==l)||new Js(l,this.active.some(u=>u.state!=0)?1:0)).update(e,n));i.length==this.active.length&&i.every((l,c)=>l==this.active[c])&&(i=this.active);let o=this.open,a=e.effects.some(l=>l.is(jk));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||i.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!U0e(i,this.active)||a?o=Iu.build(i,r,this.id,o,n,a):o&&o.disabled&&!i.some(l=>l.isPending)&&(o=null),!o&&i.every(l=>!l.isPending)&&i.some(l=>l.hasResult())&&(i=i.map(l=>l.hasResult()?new Js(l.source,0):l));for(let l of e.effects)l.is(f$)&&(o=o&&o.setSelected(l.value,this.id));return i==this.active&&o==this.open?this:new ly(i,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?H0e:z0e}}function U0e(t,e){if(t==e)return!0;for(let r=0,n=0;;){for(;r<t.length&&!t[r].hasResult();)r++;for(;n<e.length&&!e[n].hasResult();)n++;let s=r==t.length,i=n==e.length;if(s||i)return s==i;if(t[r++].result!=e[n++].result)return!1}}const H0e={"aria-autocomplete":"list"},z0e={};function xD(t,e){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(r["aria-activedescendant"]=t+"-"+e),r}const W0e=[];function h$(t,e){if(t.isUserEvent("input.complete")){let n=t.annotation(Mk);if(n&&e.activateOnCompletion(n))return 12}let r=t.isUserEvent("input.type");return r&&e.activateOnTyping?5:r?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Js{constructor(e,r,n=!1){this.source=e,this.state=r,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(e,r){let n=h$(e,r),s=this;(n&8||n&16&&this.touches(e))&&(s=new Js(s.source,0)),n&4&&s.state==0&&(s=new Js(this.source,1)),s=s.updateFor(e,n);for(let i of e.effects)if(i.is(ay))s=new Js(s.source,1,i.value);else if(i.is(ap))s=new Js(s.source,0);else if(i.is(jk))for(let o of i.value)o.source==s.source&&(s=o);return s}updateFor(e,r){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(uc(e.state))}}class Ku extends Js{constructor(e,r,n,s,i,o){super(e,3,r),this.limit=n,this.result=s,this.from=i,this.to=o}hasResult(){return!0}updateFor(e,r){var n;if(!(r&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=uc(e.state);if(a>o||!s||r&2&&(uc(e.startState)==this.from||a<this.limit))return new Js(this.source,r&4?1:0);let l=e.changes.mapPos(this.limit);return V0e(s.validFor,e.state,i,o)?new Ku(this.source,this.explicit,l,s,i,o):s.update&&(s=s.update(s,i,o,new u$(e.state,a,!1)))?new Ku(this.source,this.explicit,l,s,s.from,(n=s.to)!==null&&n!==void 0?n:uc(e.state)):new Js(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Ku(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Js(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function V0e(t,e,r,n){if(!t)return!1;let s=e.sliceDoc(r,n);return typeof t=="function"?t(s,r,n,e):d$(t,!0).test(s)}const jk=Ct.define({map(t,e){return t.map(r=>r.map(e))}}),f$=Ct.define(),as=fn.define({create(){return ly.start()},update(t,e){return t.update(e)},provide:t=>[Rk.from(t,e=>e.tooltip),tt.contentAttributes.from(t,e=>e.attrs)]});function Fk(t,e){const r=e.completion.apply||e.completion.label;let n=t.state.field(as).active.find(s=>s.source==e.source);return n instanceof Ku?(typeof r=="string"?t.dispatch({...I0e(t.state,r,n.from,n.to),annotations:Mk.of(e.completion)}):r(t,e.completion,n.from,n.to),!0):!1}const G0e=F0e(as,Fk);function Ug(t,e="option"){return r=>{let n=r.state.field(as,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<r.state.facet(an).interactionDelay)return!1;let s=1,i;e=="page"&&(i=U8(r,n.open.tooltip))&&(s=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,a=n.open.selected>-1?n.open.selected+s*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),r.dispatch({effects:f$.of(a)}),!0}}const p$=t=>{let e=t.state.field(as,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(an).interactionDelay?!1:Fk(t,e.open.options[e.open.selected])},ow=t=>t.state.field(as,!1)?(t.dispatch({effects:ay.of(!0)}),!0):!1,q0e=t=>{let e=t.state.field(as,!1);return!e||!e.active.some(r=>r.state!=0)?!1:(t.dispatch({effects:ap.of(null)}),!0)};class K0e{constructor(e,r){this.active=e,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const Y0e=50,X0e=1e3,J0e=hn.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(as).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(as),r=t.state.facet(an);if(!t.selectionSet&&!t.docChanged&&t.startState.field(as)==e)return;let n=t.transactions.some(i=>{let o=h$(i,r);return o&8||(i.selection||i.docChanged)&&!(o&3)});for(let i=0;i<this.running.length;i++){let o=this.running[i];if(n||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>Y0e&&Date.now()-o.time>X0e){for(let a of o.context.abortListeners)try{a()}catch(l){Rs(this.view.state,l)}o.context.abortListeners=null,this.running.splice(i--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(i=>i.effects.some(o=>o.is(ay)))&&(this.pendingStart=!0);let s=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(i=>i.isPending&&!this.running.some(o=>o.active.source==i.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let i of t.transactions)i.isUserEvent("input.type")?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(as);for(let r of e.active)r.isPending&&!this.running.some(n=>n.active.source==r.source)&&this.startQuery(r);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(an).updateSyncTime))}startQuery(t){let{state:e}=this.view,r=uc(e),n=new u$(e,r,t.explicit,this.view),s=new K0e(t,n);this.running.push(s),Promise.resolve(t.source(n)).then(i=>{s.context.aborted||(s.done=i||null,this.scheduleAccept())},i=>{this.view.dispatch({effects:ap.of(null)}),Rs(this.view.state,i)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(an).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],r=this.view.state.facet(an),n=this.view.state.field(as);for(let s=0;s<this.running.length;s++){let i=this.running[s];if(i.done===void 0)continue;if(this.running.splice(s--,1),i.done){let a=uc(i.updates.length?i.updates[0].startState:this.view.state),l=Math.min(a,i.done.from+(i.active.explicit?0:1)),c=new Ku(i.active.source,i.active.explicit,l,i.done,i.done.from,(t=i.done.to)!==null&&t!==void 0?t:a);for(let u of i.updates)c=c.update(u,r);if(c.hasResult()){e.push(c);continue}}let o=n.active.find(a=>a.source==i.active.source);if(o&&o.isPending)if(i.done==null){let a=new Js(i.active.source,0);for(let l of i.updates)a=a.update(l,r);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:jk.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(as,!1);if(e&&e.tooltip&&this.view.state.facet(an).closeOnBlur){let r=e.open&&U8(this.view,e.open.tooltip);(!r||!r.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:ap.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:ay.of(!1)}),20),this.composing=0}}}),Z0e=typeof navigator=="object"&&/Win/.test(navigator.platform),Q0e=xl.highest(tt.domEventHandlers({keydown(t,e){let r=e.state.field(as,!1);if(!r||!r.open||r.open.disabled||r.open.selected<0||t.key.length>1||t.ctrlKey&&!(Z0e&&t.altKey)||t.metaKey)return!1;let n=r.open.options[r.open.selected],s=r.active.find(o=>o.source==n.source),i=n.completion.commitCharacters||s.result.commitCharacters;return i&&i.indexOf(t.key)>-1&&Fk(e,n),!1}})),m$=tt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class ebe{constructor(e,r,n,s){this.field=e,this.line=r,this.from=n,this.to=s}}class Bk{constructor(e,r,n){this.field=e,this.from=r,this.to=n}map(e){let r=e.mapPos(this.from,-1,In.TrackDel),n=e.mapPos(this.to,1,In.TrackDel);return r==null||n==null?null:new Bk(this.field,r,n)}}class $k{constructor(e,r){this.lines=e,this.fieldPositions=r}instantiate(e,r){let n=[],s=[r],i=e.doc.lineAt(r),o=/^\s*/.exec(i.text)[0];for(let l of this.lines){if(n.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let d=0;d<u;d++)c+=e.facet(Fd);s.push(r+c.length-u),l=c+l.slice(u)}n.push(l),r+=l.length+1}let a=this.fieldPositions.map(l=>new Bk(l.field,s[l.line]+l.from,s[l.line]+l.to));return{text:n,ranges:a}}static parse(e){let r=[],n=[],s=[],i;for(let o of e.split(/\r\n?|\n/)){for(;i=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let a=i[1]?+i[1]:null,l=i[2]||i[3]||"",c=-1,u=l.replace(/\\[{}]/g,d=>d[1]);for(let d=0;d<r.length;d++)(a!=null?r[d].seq==a:u&&r[d].name==u)&&(c=d);if(c<0){let d=0;for(;d<r.length&&(a==null||r[d].seq!=null&&r[d].seq<a);)d++;r.splice(d,0,{seq:a,name:u}),c=d;for(let h of s)h.field>=c&&h.field++}for(let d of s)if(d.line==n.length&&d.from>i.index){let h=i[2]?3+(i[1]||"").length:2;d.from-=h,d.to-=h}s.push(new ebe(c,n.length,i.index,i.index+u.length)),o=o.slice(0,i.index)+l+o.slice(i.index+i[0].length)}o=o.replace(/\\([{}])/g,(a,l,c)=>{for(let u of s)u.line==n.length&&u.from>c&&(u.from--,u.to--);return l}),n.push(o)}return new $k(n,s)}}let tbe=It.widget({widget:new class extends wl{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),rbe=It.mark({class:"cm-snippetField"});class Bd{constructor(e,r){this.ranges=e,this.active=r,this.deco=It.set(e.map(n=>(n.from==n.to?tbe:rbe).range(n.from,n.to)),!0)}map(e){let r=[];for(let n of this.ranges){let s=n.map(e);if(!s)return null;r.push(s)}return new Bd(r,this.active)}selectionInsideField(e){return e.ranges.every(r=>this.ranges.some(n=>n.field==this.active&&n.from<=r.from&&n.to>=r.to))}}const em=Ct.define({map(t,e){return t&&t.map(e)}}),nbe=Ct.define(),lp=fn.define({create(){return null},update(t,e){for(let r of e.effects){if(r.is(em))return r.value;if(r.is(nbe)&&t)return new Bd(t.ranges,r.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>tt.decorations.from(t,e=>e?e.deco:It.none)});function Uk(t,e){return De.create(t.filter(r=>r.field==e).map(r=>De.range(r.from,r.to)))}function sbe(t){let e=$k.parse(t);return(r,n,s,i)=>{let{text:o,ranges:a}=e.instantiate(r.state,s),{main:l}=r.state.selection,c={changes:{from:s,to:i==l.from?l.to:i,insert:Vt.of(o)},scrollIntoView:!0,annotations:n?[Mk.of(n),Ur.userEvent.of("input.complete")]:void 0};if(a.length&&(c.selection=Uk(a,0)),a.some(u=>u.field>0)){let u=new Bd(a,0),d=c.effects=[em.of(u)];r.state.field(lp,!1)===void 0&&d.push(Ct.appendConfig.of([lp,cbe,ube,m$]))}r.dispatch(r.state.update(c))}}function g$(t){return({state:e,dispatch:r})=>{let n=e.field(lp,!1);if(!n||t<0&&n.active==0)return!1;let s=n.active+t,i=t>0&&!n.ranges.some(o=>o.field==s+t);return r(e.update({selection:Uk(n.ranges,s),effects:em.of(i?null:new Bd(n.ranges,s)),scrollIntoView:!0})),!0}}const ibe=({state:t,dispatch:e})=>t.field(lp,!1)?(e(t.update({effects:em.of(null)})),!0):!1,obe=g$(1),abe=g$(-1),lbe=[{key:"Tab",run:obe,shift:abe},{key:"Escape",run:ibe}],wD=Qe.define({combine(t){return t.length?t[0]:lbe}}),cbe=xl.highest(Fv.compute([wD],t=>t.facet(wD)));function b8e(t,e){return{...e,apply:sbe(t)}}const ube=tt.domEventHandlers({mousedown(t,e){let r=e.state.field(lp,!1),n;if(!r||(n=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let s=r.ranges.find(i=>i.from<=n&&i.to>=n);return!s||s.field==r.active?!1:(e.dispatch({selection:Uk(r.ranges,s.field),effects:em.of(r.ranges.some(i=>i.field>s.field)?new Bd(r.ranges,s.field):null),scrollIntoView:!0}),!0)}}),cy={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ql=Ct.define({map(t,e){let r=e.mapPos(t,-1,In.TrackAfter);return r??void 0}}),Hk=new class extends il{};Hk.startSide=1;Hk.endSide=-1;const b$=fn.define({create(){return Dt.empty},update(t,e){if(t=t.map(e.changes),e.selection){let r=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:n=>n>=r.from&&n<=r.to})}for(let r of e.effects)r.is(Ql)&&(t=t.update({add:[Hk.range(r.value,r.value+1)]}));return t}});function dbe(){return[mbe,b$]}const aw="()[]{}<>";function hbe(t){for(let e=0;e<aw.length;e+=2)if(aw.charCodeAt(e)==t)return aw.charAt(e+1);return pk(t<128?t:t+1)}function fbe(t,e){return t.languageDataAt("closeBrackets",e)[0]||cy}const pbe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),mbe=tt.inputHandler.of((t,e,r,n)=>{if((pbe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let s=t.state.selection.main;if(n.length>2||n.length==2&&Wo(gi(n,0))==1||e!=s.from||r!=s.to)return!1;let i=gbe(t.state,n);return i?(t.dispatch(i),!0):!1});function gbe(t,e){let r=fbe(t,t.selection.main.head),n=r.brackets||cy.brackets;for(let s of n){let i=hbe(gi(s,0));if(e==s)return i==s?vbe(t,s,n.indexOf(s+s+s)>-1,r):bbe(t,s,i,r.before||cy.before);if(e==i&&y$(t,t.selection.main.from))return ybe(t,s,i)}return null}function y$(t,e){let r=!1;return t.field(b$).between(0,t.doc.length,n=>{n==e&&(r=!0)}),r}function zk(t,e){let r=t.sliceString(e,e+2);return r.slice(0,Wo(gi(r,0)))}function bbe(t,e,r,n){let s=null,i=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:r,from:o.to}],effects:Ql.of(o.to+e.length),range:De.range(o.anchor+e.length,o.head+e.length)};let a=zk(t.doc,o.head);return!a||/\s/.test(a)||n.indexOf(a)>-1?{changes:{insert:e+r,from:o.head},effects:Ql.of(o.head+e.length),range:De.cursor(o.head+e.length)}:{range:s=o}});return s?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function ybe(t,e,r){let n=null,s=t.changeByRange(i=>i.empty&&zk(t.doc,i.head)==r?{changes:{from:i.head,to:i.head+r.length,insert:r},range:De.cursor(i.head+r.length)}:n={range:i});return n?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function vbe(t,e,r,n){let s=n.stringPrefixes||cy.stringPrefixes,i=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Ql.of(a.to+e.length),range:De.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=zk(t.doc,l),u;if(c==e){if(SD(t,l))return{changes:{insert:e+e,from:l},effects:Ql.of(l+e.length),range:De.cursor(l+e.length)};if(y$(t,l)){let h=r&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:De.cursor(l+h.length)}}}else{if(r&&t.sliceDoc(l-2*e.length,l)==e+e&&(u=ED(t,l-2*e.length,s))>-1&&SD(t,u))return{changes:{insert:e+e+e+e,from:l},effects:Ql.of(l+e.length),range:De.cursor(l+e.length)};if(t.charCategorizer(l)(c)!=Hr.Word&&ED(t,l,s)>-1&&!_be(t,l,e,s))return{changes:{insert:e+e,from:l},effects:Ql.of(l+e.length),range:De.cursor(l+e.length)}}return{range:i=a}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function SD(t,e){let r=xn(t).resolveInner(e+1);return r.parent&&r.from==e}function _be(t,e,r,n){let s=xn(t).resolveInner(e,-1),i=n.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(s.from,Math.min(s.to,s.from+r.length+i)),l=a.indexOf(r);if(!l||l>-1&&n.indexOf(a.slice(0,l))>-1){let u=s.firstChild;for(;u&&u.from==s.from&&u.to-u.from>r.length+l;){if(t.sliceDoc(u.to-r.length,u.to)==r)return!1;u=u.firstChild}return!0}let c=s.to==e&&s.parent;if(!c)break;s=c}return!1}function ED(t,e,r){let n=t.charCategorizer(e);if(n(t.sliceDoc(e-1,e))!=Hr.Word)return e;for(let s of r){let i=e-s.length;if(t.sliceDoc(i,e)==s&&n(t.sliceDoc(i-1,i))!=Hr.Word)return i}return-1}function xbe(t={}){return[Q0e,as,an.of(t),J0e,Sbe,m$]}const wbe=[{key:"Ctrl-Space",run:ow},{mac:"Alt-`",run:ow},{mac:"Alt-i",run:ow},{key:"Escape",run:q0e},{key:"ArrowDown",run:Ug(!0)},{key:"ArrowUp",run:Ug(!1)},{key:"PageDown",run:Ug(!0,"page")},{key:"PageUp",run:Ug(!1,"page")},{key:"Enter",run:p$}],Sbe=xl.highest(Fv.computeN([an],t=>t.facet(an).defaultKeymap?[wbe]:[])),Ebe=t=>{let{state:e}=t,r=e.doc.lineAt(e.selection.main.from),n=Vk(t.state,r.from);return n.line?Cbe(t):n.block?kbe(t):!1};function Wk(t,e){return({state:r,dispatch:n})=>{if(r.readOnly)return!1;let s=t(e,r);return s?(n(r.update(s)),!0):!1}}const Cbe=Wk(Pbe,0),Tbe=Wk(v$,0),kbe=Wk((t,e)=>v$(t,e,Rbe(e)),0);function Vk(t,e){let r=t.languageDataAt("commentTokens",e,1);return r.length?r[0]:{}}const yh=50;function Abe(t,{open:e,close:r},n,s){let i=t.sliceDoc(n-yh,n),o=t.sliceDoc(s,s+yh),a=/\s*$/.exec(i)[0].length,l=/^\s*/.exec(o)[0].length,c=i.length-a;if(i.slice(c-e.length,c)==e&&o.slice(l,l+r.length)==r)return{open:{pos:n-a,margin:a&&1},close:{pos:s+l,margin:l&&1}};let u,d;s-n<=2*yh?u=d=t.sliceDoc(n,s):(u=t.sliceDoc(n,n+yh),d=t.sliceDoc(s-yh,s));let h=/^\s*/.exec(u)[0].length,f=/\s*$/.exec(d)[0].length,b=d.length-f-r.length;return u.slice(h,h+e.length)==e&&d.slice(b,b+r.length)==r?{open:{pos:n+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:s-f-r.length,margin:/\s/.test(d.charAt(b-1))?1:0}}:null}function Rbe(t){let e=[];for(let r of t.selection.ranges){let n=t.doc.lineAt(r.from),s=r.to<=n.to?n:t.doc.lineAt(r.to);s.from>n.from&&s.from==r.to&&(s=r.to==n.to+1?n:t.doc.lineAt(r.to-1));let i=e.length-1;i>=0&&e[i].to>n.from?e[i].to=s.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:s.to})}return e}function v$(t,e,r=e.selection.ranges){let n=r.map(i=>Vk(e,i.from).block);if(!n.every(i=>i))return null;let s=r.map((i,o)=>Abe(e,n[o],i.from,i.to));if(t!=2&&!s.every(i=>i))return{changes:e.changes(r.map((i,o)=>s[o]?[]:[{from:i.from,insert:n[o].open+" "},{from:i.to,insert:" "+n[o].close}]))};if(t!=1&&s.some(i=>i)){let i=[];for(let o=0,a;o<s.length;o++)if(a=s[o]){let l=n[o],{open:c,close:u}=a;i.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:i}}return null}function Pbe(t,e,r=e.selection.ranges){let n=[],s=-1;e:for(let{from:i,to:o}of r){let a=n.length,l=1e9,c;for(let u=i;u<=o;){let d=e.doc.lineAt(u);if(c==null&&(c=Vk(e,d.from).line,!c))continue e;if(d.from>s&&(i==o||o>d.from)){s=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,b=d.text.slice(h,h+c.length)==c?h:-1;h<d.text.length&&h<l&&(l=h),n.push({line:d,comment:b,token:c,indent:h,empty:f,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<n.length;u++)n[u].indent<n[u].line.text.length&&(n[u].indent=l);n.length==a+1&&(n[a].single=!0)}if(t!=2&&n.some(i=>i.comment<0&&(!i.empty||i.single))){let i=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of n)(d||!u)&&i.push({from:a.from+c,insert:l+" "});let o=e.changes(i);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&n.some(i=>i.comment>=0)){let i=[];for(let{line:o,comment:a,token:l}of n)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,i.push({from:c,to:u})}return{changes:i}}return null}const SE=fa.define(),Ibe=fa.define(),Nbe=Qe.define(),_$=Qe.define({combine(t){return Mc(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,r)=>(n,s)=>e(n,s)||r(n,s)})}}),x$=fn.define({create(){return po.empty},update(t,e){let r=e.state.facet(_$),n=e.annotation(SE);if(n){let l=ds.fromTransaction(e,n.selection),c=n.side,u=c==0?t.undone:t.done;return l?u=uy(u,u.length,r.minDepth,l):u=E$(u,e.startState.selection),new po(c==0?n.rest:u,c==0?u:n.rest)}let s=e.annotation(Ibe);if((s=="full"||s=="before")&&(t=t.isolate()),e.annotation(Ur.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let i=ds.fromTransaction(e),o=e.annotation(Ur.time),a=e.annotation(Ur.userEvent);return i?t=t.addChanges(i,o,a,r,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,r.newGroupDelay)),(s=="full"||s=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new po(t.done.map(ds.fromJSON),t.undone.map(ds.fromJSON))}});function Dbe(t={}){return[x$,_$.of(t),tt.domEventHandlers({beforeinput(e,r){let n=e.inputType=="historyUndo"?w$:e.inputType=="historyRedo"?EE:null;return n?(e.preventDefault(),n(r)):!1}})]}function Uv(t,e){return function({state:r,dispatch:n}){if(!e&&r.readOnly)return!1;let s=r.field(x$,!1);if(!s)return!1;let i=s.pop(t,r,e);return i?(n(i),!0):!1}}const w$=Uv(0,!1),EE=Uv(1,!1),Obe=Uv(0,!0),Lbe=Uv(1,!0);class ds{constructor(e,r,n,s,i){this.changes=e,this.effects=r,this.mapped=n,this.startSelection=s,this.selectionsAfter=i}setSelAfter(e){return new ds(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,r,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new ds(e.changes&&Xr.fromJSON(e.changes),[],e.mapped&&_o.fromJSON(e.mapped),e.startSelection&&De.fromJSON(e.startSelection),e.selectionsAfter.map(De.fromJSON))}static fromTransaction(e,r){let n=Zs;for(let s of e.startState.facet(Nbe)){let i=s(e);i.length&&(n=n.concat(i))}return!n.length&&e.changes.empty?null:new ds(e.changes.invert(e.startState.doc),n,void 0,r||e.startState.selection,Zs)}static selection(e){return new ds(void 0,Zs,void 0,void 0,e)}}function uy(t,e,r,n){let s=e+1>r+20?e-r-1:0,i=t.slice(s,e);return i.push(n),i}function Mbe(t,e){let r=[],n=!1;return t.iterChangedRanges((s,i)=>r.push(s,i)),e.iterChangedRanges((s,i,o,a)=>{for(let l=0;l<r.length;){let c=r[l++],u=r[l++];a>=c&&o<=u&&(n=!0)}}),n}function jbe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((r,n)=>r.empty!=e.ranges[n].empty).length===0}function S$(t,e){return t.length?e.length?t.concat(e):t:e}const Zs=[],Fbe=200;function E$(t,e){if(t.length){let r=t[t.length-1],n=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-Fbe));return n.length&&n[n.length-1].eq(e)?t:(n.push(e),uy(t,t.length-1,1e9,r.setSelAfter(n)))}else return[ds.selection([e])]}function Bbe(t){let e=t[t.length-1],r=t.slice();return r[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),r}function lw(t,e){if(!t.length)return t;let r=t.length,n=Zs;for(;r;){let s=$be(t[r-1],e,n);if(s.changes&&!s.changes.empty||s.effects.length){let i=t.slice(0,r);return i[r-1]=s,i}else e=s.mapped,r--,n=s.selectionsAfter}return n.length?[ds.selection(n)]:Zs}function $be(t,e,r){let n=S$(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Zs,r);if(!t.changes)return ds.selection(n);let s=t.changes.map(e),i=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(i):i;return new ds(s,Ct.mapEffects(t.effects,e),o,t.startSelection.map(i),n)}const Ube=/^(input\.type|delete)($|\.)/;class po{constructor(e,r,n=0,s=void 0){this.done=e,this.undone=r,this.prevTime=n,this.prevUserEvent=s}isolate(){return this.prevTime?new po(this.done,this.undone):this}addChanges(e,r,n,s,i){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!n||Ube.test(n))&&(!a.selectionsAfter.length&&r-this.prevTime<s.newGroupDelay&&s.joinToEvent(i,Mbe(a.changes,e.changes))||n=="input.type.compose")?o=uy(o,o.length-1,s.minDepth,new ds(e.changes.compose(a.changes),S$(Ct.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Zs)):o=uy(o,o.length,s.minDepth,e),new po(o,Zs,r,n)}addSelection(e,r,n,s){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:Zs;return i.length>0&&r-this.prevTime<s&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&jbe(i[i.length-1],e)?this:new po(E$(this.done,e),this.undone,r,n)}addMapping(e){return new po(lw(this.done,e),lw(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,r,n){let s=e==0?this.done:this.undone;if(s.length==0)return null;let i=s[s.length-1],o=i.selectionsAfter[0]||(i.startSelection?i.startSelection.map(i.changes.invertedDesc,1):r.selection);if(n&&i.selectionsAfter.length)return r.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:SE.of({side:e,rest:Bbe(s),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let a=s.length==1?Zs:s.slice(0,s.length-1);return i.mapped&&(a=lw(a,i.mapped)),r.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:SE.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}po.empty=new po(Zs,Zs);const Hbe=[{key:"Mod-z",run:w$,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:EE,preventDefault:!0},{linux:"Ctrl-Shift-z",run:EE,preventDefault:!0},{key:"Mod-u",run:Obe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Lbe,preventDefault:!0}];function $d(t,e){return De.create(t.ranges.map(e),t.mainIndex)}function Ni(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Di({state:t,dispatch:e},r){let n=$d(t.selection,r);return n.eq(t.selection,!0)?!1:(e(Ni(t,n)),!0)}function Hv(t,e){return De.cursor(e?t.to:t.from)}function C$(t,e){return Di(t,r=>r.empty?t.moveByChar(r,e):Hv(r,e))}function On(t){return t.textDirectionAt(t.state.selection.main.head)==ur.LTR}const T$=t=>C$(t,!On(t)),k$=t=>C$(t,On(t));function A$(t,e){return Di(t,r=>r.empty?t.moveByGroup(r,e):Hv(r,e))}const zbe=t=>A$(t,!On(t)),Wbe=t=>A$(t,On(t));function Vbe(t,e,r){if(e.type.prop(r))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function zv(t,e,r){let n=xn(t).resolveInner(e.head),s=r?Ot.closedBy:Ot.openedBy;for(let l=e.head;;){let c=r?n.childAfter(l):n.childBefore(l);if(!c)break;Vbe(t,c,s)?n=c:l=r?c.to:c.from}let i=n.type.prop(s),o,a;return i&&(o=r?fo(t,n.from,1):fo(t,n.to,-1))&&o.matched?a=r?o.end.to:o.end.from:a=r?n.to:n.from,De.cursor(a,r?-1:1)}const Gbe=t=>Di(t,e=>zv(t.state,e,!On(t))),qbe=t=>Di(t,e=>zv(t.state,e,On(t)));function R$(t,e){return Di(t,r=>{if(!r.empty)return Hv(r,e);let n=t.moveVertically(r,e);return n.head!=r.head?n:t.moveToLineBoundary(r,e)})}const P$=t=>R$(t,!1),I$=t=>R$(t,!0);function N$(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,r=0,n=0,s;if(e){for(let i of t.state.facet(tt.scrollMargins)){let o=i(t);o?.top&&(r=Math.max(o?.top,r)),o?.bottom&&(n=Math.max(o?.bottom,n))}s=t.scrollDOM.clientHeight-r-n}else s=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:n,selfScroll:e,height:Math.max(t.defaultLineHeight,s-5)}}function D$(t,e){let r=N$(t),{state:n}=t,s=$d(n.selection,o=>o.empty?t.moveVertically(o,e,r.height):Hv(o,e));if(s.eq(n.selection))return!1;let i;if(r.selfScroll){let o=t.coordsAtPos(n.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+r.marginTop,c=a.bottom-r.marginBottom;o&&o.top>l&&o.bottom<c&&(i=tt.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Ni(n,s),{effects:i}),!0}const CD=t=>D$(t,!1),CE=t=>D$(t,!0);function Sl(t,e,r){let n=t.lineBlockAt(e.head),s=t.moveToLineBoundary(e,r);if(s.head==e.head&&s.head!=(r?n.to:n.from)&&(s=t.moveToLineBoundary(e,r,!1)),!r&&s.head==n.from&&n.length){let i=/^\s*/.exec(t.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;i&&e.head!=n.from+i&&(s=De.cursor(n.from+i))}return s}const Kbe=t=>Di(t,e=>Sl(t,e,!0)),Ybe=t=>Di(t,e=>Sl(t,e,!1)),Xbe=t=>Di(t,e=>Sl(t,e,!On(t))),Jbe=t=>Di(t,e=>Sl(t,e,On(t))),Zbe=t=>Di(t,e=>De.cursor(t.lineBlockAt(e.head).from,1)),Qbe=t=>Di(t,e=>De.cursor(t.lineBlockAt(e.head).to,-1));function eye(t,e,r){let n=!1,s=$d(t.selection,i=>{let o=fo(t,i.head,-1)||fo(t,i.head,1)||i.head>0&&fo(t,i.head-1,1)||i.head<t.doc.length&&fo(t,i.head+1,-1);if(!o||!o.end)return i;n=!0;let a=o.start.from==i.head?o.end.to:o.end.from;return De.cursor(a)});return n?(e(Ni(t,s)),!0):!1}const tye=({state:t,dispatch:e})=>eye(t,e);function li(t,e){let r=$d(t.state.selection,n=>{let s=e(n);return De.range(n.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return r.eq(t.state.selection)?!1:(t.dispatch(Ni(t.state,r)),!0)}function O$(t,e){return li(t,r=>t.moveByChar(r,e))}const L$=t=>O$(t,!On(t)),M$=t=>O$(t,On(t));function j$(t,e){return li(t,r=>t.moveByGroup(r,e))}const rye=t=>j$(t,!On(t)),nye=t=>j$(t,On(t)),sye=t=>li(t,e=>zv(t.state,e,!On(t))),iye=t=>li(t,e=>zv(t.state,e,On(t)));function F$(t,e){return li(t,r=>t.moveVertically(r,e))}const B$=t=>F$(t,!1),$$=t=>F$(t,!0);function U$(t,e){return li(t,r=>t.moveVertically(r,e,N$(t).height))}const TD=t=>U$(t,!1),kD=t=>U$(t,!0),oye=t=>li(t,e=>Sl(t,e,!0)),aye=t=>li(t,e=>Sl(t,e,!1)),lye=t=>li(t,e=>Sl(t,e,!On(t))),cye=t=>li(t,e=>Sl(t,e,On(t))),uye=t=>li(t,e=>De.cursor(t.lineBlockAt(e.head).from)),dye=t=>li(t,e=>De.cursor(t.lineBlockAt(e.head).to)),AD=({state:t,dispatch:e})=>(e(Ni(t,{anchor:0})),!0),RD=({state:t,dispatch:e})=>(e(Ni(t,{anchor:t.doc.length})),!0),PD=({state:t,dispatch:e})=>(e(Ni(t,{anchor:t.selection.main.anchor,head:0})),!0),ID=({state:t,dispatch:e})=>(e(Ni(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),hye=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),fye=({state:t,dispatch:e})=>{let r=Wv(t).map(({from:n,to:s})=>De.range(n,Math.min(s+1,t.doc.length)));return e(t.update({selection:De.create(r),userEvent:"select"})),!0},pye=({state:t,dispatch:e})=>{let r=$d(t.selection,n=>{let s=xn(t),i=s.resolveStack(n.from,1);if(n.empty){let o=s.resolveStack(n.from,-1);o.node.from>=i.node.from&&o.node.to<=i.node.to&&(i=o)}for(let o=i;o;o=o.next){let{node:a}=o;if((a.from<n.from&&a.to>=n.to||a.to>n.to&&a.from<=n.from)&&o.next)return De.range(a.to,a.from)}return n});return r.eq(t.selection)?!1:(e(Ni(t,r)),!0)};function H$(t,e){let{state:r}=t,n=r.selection,s=r.selection.ranges.slice();for(let i of r.selection.ranges){let o=r.doc.lineAt(i.head);if(e?o.to<t.state.doc.length:o.from>0)for(let a=i;;){let l=t.moveVertically(a,e);if(l.head<o.from||l.head>o.to){s.some(c=>c.head==l.head)||s.push(l);break}else{if(l.head==a.head)break;a=l}}}return s.length==n.ranges.length?!1:(t.dispatch(Ni(r,De.create(s,s.length-1))),!0)}const mye=t=>H$(t,!1),gye=t=>H$(t,!0),bye=({state:t,dispatch:e})=>{let r=t.selection,n=null;return r.ranges.length>1?n=De.create([r.main]):r.main.empty||(n=De.create([De.cursor(r.main.head)])),n?(e(Ni(t,n)),!0):!1};function tm(t,e){if(t.state.readOnly)return!1;let r="delete.selection",{state:n}=t,s=n.changeByRange(i=>{let{from:o,to:a}=i;if(o==a){let l=e(i);l<o?(r="delete.backward",l=Hg(t,l,!1)):l>o&&(r="delete.forward",l=Hg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Hg(t,o,!1),a=Hg(t,a,!0);return o==a?{range:i}:{changes:{from:o,to:a},range:De.cursor(o,o<i.head?-1:1)}});return s.changes.empty?!1:(t.dispatch(n.update(s,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?tt.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Hg(t,e,r){if(t instanceof tt)for(let n of t.state.facet(tt.atomicRanges).map(s=>s(t)))n.between(e,e,(s,i)=>{s<e&&i>e&&(e=r?i:s)});return e}const z$=(t,e,r)=>tm(t,n=>{let s=n.from,{state:i}=t,o=i.doc.lineAt(s),a,l;if(r&&!e&&s>o.from&&s<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,s-o.from))){if(a[a.length-1]=="	")return s-1;let c=Iv(a,i.tabSize),u=c%iy(i)||iy(i);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)s--;l=s}else l=un(o.text,s-o.from,e,e)+o.from,l==s&&o.number!=(e?i.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,s-o.from))&&(l=un(o.text,l-o.from,!1,!1)+o.from);return l}),TE=t=>z$(t,!1,!0),W$=t=>z$(t,!0,!1),V$=(t,e)=>tm(t,r=>{let n=r.head,{state:s}=t,i=s.doc.lineAt(n),o=s.charCategorizer(n);for(let a=null;;){if(n==(e?i.to:i.from)){n==r.head&&i.number!=(e?s.doc.lines:1)&&(n+=e?1:-1);break}let l=un(i.text,n-i.from,e)+i.from,c=i.text.slice(Math.min(n,l)-i.from,Math.max(n,l)-i.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||n!=r.head)&&(a=u),n=l}return n}),G$=t=>V$(t,!1),yye=t=>V$(t,!0),vye=t=>tm(t,e=>{let r=t.lineBlockAt(e.head).to;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),_ye=t=>tm(t,e=>{let r=t.moveToLineBoundary(e,!1).head;return e.head>r?r:Math.max(0,e.head-1)}),xye=t=>tm(t,e=>{let r=t.moveToLineBoundary(e,!0).head;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),wye=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Vt.of(["",""])},range:De.cursor(n.from)}));return e(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},Sye=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{if(!n.empty||n.from==0||n.from==t.doc.length)return{range:n};let s=n.from,i=t.doc.lineAt(s),o=s==i.from?s-1:un(i.text,s-i.from,!1)+i.from,a=s==i.to?s+1:un(i.text,s-i.from,!0)+i.from;return{changes:{from:o,to:a,insert:t.doc.slice(s,a).append(t.doc.slice(o,s))},range:De.cursor(a)}});return r.changes.empty?!1:(e(t.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Wv(t){let e=[],r=-1;for(let n of t.selection.ranges){let s=t.doc.lineAt(n.from),i=t.doc.lineAt(n.to);if(!n.empty&&n.to==i.from&&(i=t.doc.lineAt(n.to-1)),r>=s.number){let o=e[e.length-1];o.to=i.to,o.ranges.push(n)}else e.push({from:s.from,to:i.to,ranges:[n]});r=i.number+1}return e}function q$(t,e,r){if(t.readOnly)return!1;let n=[],s=[];for(let i of Wv(t)){if(r?i.to==t.doc.length:i.from==0)continue;let o=t.doc.lineAt(r?i.to+1:i.from-1),a=o.length+1;if(r){n.push({from:i.to,to:o.to},{from:i.from,insert:o.text+t.lineBreak});for(let l of i.ranges)s.push(De.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{n.push({from:o.from,to:i.from},{from:i.to,insert:t.lineBreak+o.text});for(let l of i.ranges)s.push(De.range(l.anchor-a,l.head-a))}}return n.length?(e(t.update({changes:n,scrollIntoView:!0,selection:De.create(s,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Eye=({state:t,dispatch:e})=>q$(t,e,!1),Cye=({state:t,dispatch:e})=>q$(t,e,!0);function K$(t,e,r){if(t.readOnly)return!1;let n=[];for(let i of Wv(t))r?n.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):n.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});let s=t.changes(n);return e(t.update({changes:s,selection:t.selection.map(s,r?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Tye=({state:t,dispatch:e})=>K$(t,e,!1),kye=({state:t,dispatch:e})=>K$(t,e,!0),Aye=t=>{if(t.state.readOnly)return!1;let{state:e}=t,r=e.changes(Wv(e).map(({from:s,to:i})=>(s>0?s--:i<e.doc.length&&i++,{from:s,to:i}))),n=$d(e.selection,s=>{let i;if(t.lineWrapping){let o=t.lineBlockAt(s.head),a=t.coordsAtPos(s.head,s.assoc||1);a&&(i=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(s,!0,i)}).map(r);return t.dispatch({changes:r,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Rye(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let r=xn(t).resolveInner(e),n=r.childBefore(e),s=r.childAfter(e),i;return n&&s&&n.to<=e&&s.from>=e&&(i=n.type.prop(Ot.closedBy))&&i.indexOf(s.name)>-1&&t.doc.lineAt(n.to).from==t.doc.lineAt(s.from).from&&!/\S/.test(t.sliceDoc(n.to,s.from))?{from:n.to,to:s.from}:null}const ND=Y$(!1),Pye=Y$(!0);function Y$(t){return({state:e,dispatch:r})=>{if(e.readOnly)return!1;let n=e.changeByRange(s=>{let{from:i,to:o}=s,a=e.doc.lineAt(i),l=!t&&i==o&&Rye(e,i);t&&(i=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new Bv(e,{simulateBreak:i,simulateDoubleBreak:!!l}),u=Dk(c,i);for(u==null&&(u=Iv(/^\s*/.exec(e.doc.lineAt(i).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:i,to:o}=l:i>a.from&&i<a.from+100&&!/\S/.test(a.text.slice(0,i))&&(i=a.from);let d=["",op(e,u)];return l&&d.push(op(e,c.lineIndent(a.from,-1))),{changes:{from:i,to:o,insert:Vt.of(d)},range:De.cursor(i+1+d[1].length)}});return r(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function Gk(t,e){let r=-1;return t.changeByRange(n=>{let s=[];for(let o=n.from;o<=n.to;){let a=t.doc.lineAt(o);a.number>r&&(n.empty||n.to>a.from)&&(e(a,s,n),r=a.number),o=a.to+1}let i=t.changes(s);return{changes:s,range:De.range(i.mapPos(n.anchor,1),i.mapPos(n.head,1))}})}const Iye=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Object.create(null),n=new Bv(t,{overrideIndentation:i=>{let o=r[i];return o??-1}}),s=Gk(t,(i,o,a)=>{let l=Dk(n,i.from);if(l==null)return;/\S/.test(i.text)||(l=0);let c=/^\s*/.exec(i.text)[0],u=op(t,l);(c!=u||a.from<i.from+c.length)&&(r[i.from]=l,o.push({from:i.from,to:i.from+c.length,insert:u}))});return s.changes.empty||e(t.update(s,{userEvent:"indent"})),!0},Nye=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Gk(t,(r,n)=>{n.push({from:r.from,insert:t.facet(Fd)})}),{userEvent:"input.indent"})),!0),X$=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Gk(t,(r,n)=>{let s=/^\s*/.exec(r.text)[0];if(!s)return;let i=Iv(s,t.tabSize),o=0,a=op(t,Math.max(0,i-iy(t)));for(;o<s.length&&o<a.length&&s.charCodeAt(o)==a.charCodeAt(o);)o++;n.push({from:r.from+o,to:r.from+s.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),Dye=t=>(t.setTabFocusMode(),!0),Oye=[{key:"Ctrl-b",run:T$,shift:L$,preventDefault:!0},{key:"Ctrl-f",run:k$,shift:M$},{key:"Ctrl-p",run:P$,shift:B$},{key:"Ctrl-n",run:I$,shift:$$},{key:"Ctrl-a",run:Zbe,shift:uye},{key:"Ctrl-e",run:Qbe,shift:dye},{key:"Ctrl-d",run:W$},{key:"Ctrl-h",run:TE},{key:"Ctrl-k",run:vye},{key:"Ctrl-Alt-h",run:G$},{key:"Ctrl-o",run:wye},{key:"Ctrl-t",run:Sye},{key:"Ctrl-v",run:CE}],Lye=[{key:"ArrowLeft",run:T$,shift:L$,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:zbe,shift:rye,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Xbe,shift:lye,preventDefault:!0},{key:"ArrowRight",run:k$,shift:M$,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Wbe,shift:nye,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Jbe,shift:cye,preventDefault:!0},{key:"ArrowUp",run:P$,shift:B$,preventDefault:!0},{mac:"Cmd-ArrowUp",run:AD,shift:PD},{mac:"Ctrl-ArrowUp",run:CD,shift:TD},{key:"ArrowDown",run:I$,shift:$$,preventDefault:!0},{mac:"Cmd-ArrowDown",run:RD,shift:ID},{mac:"Ctrl-ArrowDown",run:CE,shift:kD},{key:"PageUp",run:CD,shift:TD},{key:"PageDown",run:CE,shift:kD},{key:"Home",run:Ybe,shift:aye,preventDefault:!0},{key:"Mod-Home",run:AD,shift:PD},{key:"End",run:Kbe,shift:oye,preventDefault:!0},{key:"Mod-End",run:RD,shift:ID},{key:"Enter",run:ND,shift:ND},{key:"Mod-a",run:hye},{key:"Backspace",run:TE,shift:TE,preventDefault:!0},{key:"Delete",run:W$,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:G$,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:yye,preventDefault:!0},{mac:"Mod-Backspace",run:_ye,preventDefault:!0},{mac:"Mod-Delete",run:xye,preventDefault:!0}].concat(Oye.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Mye=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Gbe,shift:sye},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:qbe,shift:iye},{key:"Alt-ArrowUp",run:Eye},{key:"Shift-Alt-ArrowUp",run:Tye},{key:"Alt-ArrowDown",run:Cye},{key:"Shift-Alt-ArrowDown",run:kye},{key:"Mod-Alt-ArrowUp",run:mye},{key:"Mod-Alt-ArrowDown",run:gye},{key:"Escape",run:bye},{key:"Mod-Enter",run:Pye},{key:"Alt-l",mac:"Ctrl-l",run:fye},{key:"Mod-i",run:pye,preventDefault:!0},{key:"Mod-[",run:X$},{key:"Mod-]",run:Nye},{key:"Mod-Alt-\\",run:Iye},{key:"Shift-Mod-k",run:Aye},{key:"Shift-Mod-\\",run:tye},{key:"Mod-/",run:Ebe},{key:"Alt-A",run:Tbe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Dye}].concat(Lye),DD=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class cp{constructor(e,r,n=0,s=e.length,i,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,s),this.bufferStart=n,this.normalize=i?a=>i(DD(a)):DD,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return gi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let r=pk(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Wo(e);let s=this.normalize(r);if(s.length)for(let i=0,o=n;;i++){let a=s.charCodeAt(i),l=this.match(a,o,this.bufferPos+this.bufferStart);if(i==s.length-1){if(l)return this.value=l,this;break}o==n&&i<r.length&&r.charCodeAt(i)==a&&o++}}}match(e,r,n){let s=null;for(let i=0;i<this.matches.length;i+=2){let o=this.matches[i],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?s={from:this.matches[i+1],to:n}:(this.matches[i]++,a=!0)),a||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:r,to:n}:this.matches.push(1,r)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(cp.prototype[Symbol.iterator]=function(){return this});const J$={from:-1,to:-1,match:/.*/.exec("")},qk="gm"+(/x/.unicode==null?"":"u");class Z${constructor(e,r,n,s=0,i=e.length){if(this.text=e,this.to=i,this.curLine="",this.done=!1,this.value=J$,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new Q$(e,r,n,s,i);this.re=new RegExp(r,qk+(n?.ignoreCase?"i":"")),this.test=n?.test,this.iter=e.iter();let o=e.lineAt(s);this.curLineStart=o.from,this.matchPos=dy(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let n=this.curLineStart+r.index,s=n+r[0].length;if(this.matchPos=dy(this.text,s+(n==s?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<s||n>this.value.to)&&(!this.test||this.test(n,s,r)))return this.value={from:n,to:s,match:r},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const cw=new WeakMap;class Yu{constructor(e,r){this.from=e,this.text=r}get to(){return this.from+this.text.length}static get(e,r,n){let s=cw.get(e);if(!s||s.from>=n||s.to<=r){let a=new Yu(r,e.sliceString(r,n));return cw.set(e,a),a}if(s.from==r&&s.to==n)return s;let{text:i,from:o}=s;return o>r&&(i=e.sliceString(r,o)+i,o=r),s.to<n&&(i+=e.sliceString(s.to,n)),cw.set(e,new Yu(o,i)),new Yu(r,i.slice(r-o,n-o))}}class Q${constructor(e,r,n,s,i){this.text=e,this.to=i,this.done=!1,this.value=J$,this.matchPos=dy(e,s),this.re=new RegExp(r,qk+(n?.ignoreCase?"i":"")),this.test=n?.test,this.flat=Yu.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==e&&(this.re.lastIndex=e+1,r=this.re.exec(this.flat.text)),r){let n=this.flat.from+r.index,s=n+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,s,r)))return this.value={from:n,to:s,match:r},this.matchPos=dy(this.text,s+(n==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Yu.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Z$.prototype[Symbol.iterator]=Q$.prototype[Symbol.iterator]=function(){return this});function jye(t){try{return new RegExp(t,qk),!0}catch{return!1}}function dy(t,e){if(e>=t.length)return e;let r=t.lineAt(e),n;for(;e<r.to&&(n=r.text.charCodeAt(e-r.from))>=56320&&n<57344;)e++;return e}const Fye=t=>{let{state:e}=t,r=String(e.doc.lineAt(t.state.selection.main.head).number),{close:n,result:s}=rge(t,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:r},focus:!0,submitLabel:e.phrase("go")});return s.then(i=>{let o=i&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.elements.line.value);if(!o){t.dispatch({effects:n});return}let a=e.doc.lineAt(e.selection.main.head),[,l,c,u,d]=o,h=u?+u.slice(1):0,f=c?+c:a.number;if(c&&d){let g=f/100;l&&(g=g*(l=="-"?-1:1)+a.number/e.doc.lines),f=Math.round(e.doc.lines*g)}else c&&l&&(f=f*(l=="-"?-1:1)+a.number);let b=e.doc.line(Math.max(1,Math.min(e.doc.lines,f))),m=De.cursor(b.from+Math.max(0,Math.min(h,b.length)));t.dispatch({effects:[n,tt.scrollIntoView(m.from,{y:"center"})],selection:m})}),!0},Bye=({state:t,dispatch:e})=>{let{selection:r}=t,n=De.create(r.ranges.map(s=>t.wordAt(s.head)||De.cursor(s.head)),r.mainIndex);return n.eq(r)?!1:(e(t.update({selection:n})),!0)};function $ye(t,e){let{main:r,ranges:n}=t.selection,s=t.wordAt(r.head),i=s&&s.from==r.from&&s.to==r.to;for(let o=!1,a=new cp(t.doc,e,n[n.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new cp(t.doc,e,0,Math.max(0,n[n.length-1].from-1)),o=!0}else{if(o&&n.some(l=>l.from==a.value.from))continue;if(i){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Uye=({state:t,dispatch:e})=>{let{ranges:r}=t.selection;if(r.some(i=>i.from===i.to))return Bye({state:t,dispatch:e});let n=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some(i=>t.sliceDoc(i.from,i.to)!=n))return!1;let s=$ye(t,n);return s?(e(t.update({selection:t.selection.addRange(De.range(s.from,s.to),!1),effects:tt.scrollIntoView(s.to)})),!0):!1},Ud=Qe.define({combine(t){return Mc(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new tve(e),scrollToMatch:e=>tt.scrollIntoView(e)})}});class eU{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||jye(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(r,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new qye(this):new Wye(this)}getCursor(e,r=0,n){let s=e.doc?e:Bt.create({doc:e});return n==null&&(n=s.doc.length),this.regexp?mu(this,s,r,n):pu(this,s,r,n)}}class tU{constructor(e){this.spec=e}}function Hye(t,e,r){return(n,s,i,o)=>{if(r&&!r(n,s,i,o))return!1;let a=n>=o&&s<=o+i.length?i.slice(n-o,s-o):e.doc.sliceString(n,s);return t(a,e,n,s)}}function pu(t,e,r,n){let s;return t.wholeWord&&(s=zye(e.doc,e.charCategorizer(e.selection.main.head))),t.test&&(s=Hye(t.test,e,s)),new cp(e.doc,t.unquoted,r,n,t.caseSensitive?void 0:i=>i.toLowerCase(),s)}function zye(t,e){return(r,n,s,i)=>((i>r||i+s.length<n)&&(i=Math.max(0,r-2),s=t.sliceString(i,Math.min(t.length,n+2))),(e(hy(s,r-i))!=Hr.Word||e(fy(s,r-i))!=Hr.Word)&&(e(fy(s,n-i))!=Hr.Word||e(hy(s,n-i))!=Hr.Word))}class Wye extends tU{constructor(e){super(e)}nextMatch(e,r,n){let s=pu(this.spec,e,n,e.doc.length).nextOverlapping();if(s.done){let i=Math.min(e.doc.length,r+this.spec.unquoted.length);s=pu(this.spec,e,0,i).nextOverlapping()}return s.done||s.value.from==r&&s.value.to==n?null:s.value}prevMatchInRange(e,r,n){for(let s=n;;){let i=Math.max(r,s-1e4-this.spec.unquoted.length),o=pu(this.spec,e,i,s),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(i==r)return null;s-=1e4}}prevMatch(e,r,n){let s=this.prevMatchInRange(e,0,r);return s||(s=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=r||s.to!=n)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,r){let n=pu(this.spec,e,0,e.doc.length),s=[];for(;!n.next().done;){if(s.length>=r)return null;s.push(n.value)}return s}highlight(e,r,n,s){let i=pu(this.spec,e,Math.max(0,r-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!i.next().done;)s(i.value.from,i.value.to)}}function Vye(t,e,r){return(n,s,i)=>(!r||r(n,s,i))&&t(i[0],e,n,s)}function mu(t,e,r,n){let s;return t.wholeWord&&(s=Gye(e.charCategorizer(e.selection.main.head))),t.test&&(s=Vye(t.test,e,s)),new Z$(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:s},r,n)}function hy(t,e){return t.slice(un(t,e,!1),e)}function fy(t,e){return t.slice(e,un(t,e))}function Gye(t){return(e,r,n)=>!n[0].length||(t(hy(n.input,n.index))!=Hr.Word||t(fy(n.input,n.index))!=Hr.Word)&&(t(fy(n.input,n.index+n[0].length))!=Hr.Word||t(hy(n.input,n.index+n[0].length))!=Hr.Word)}class qye extends tU{nextMatch(e,r,n){let s=mu(this.spec,e,n,e.doc.length).next();return s.done&&(s=mu(this.spec,e,0,r).next()),s.done?null:s.value}prevMatchInRange(e,r,n){for(let s=1;;s++){let i=Math.max(r,n-s*1e4),o=mu(this.spec,e,i,n),a=null;for(;!o.next().done;)a=o.value;if(a&&(i==r||a.from>i+10))return a;if(i==r)return null}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(r,n)=>{if(n=="&")return e.match[0];if(n=="$")return"$";for(let s=n.length;s>0;s--){let i=+n.slice(0,s);if(i>0&&i<e.match.length)return e.match[i]+n.slice(s)}return r})}matchAll(e,r){let n=mu(this.spec,e,0,e.doc.length),s=[];for(;!n.next().done;){if(s.length>=r)return null;s.push(n.value)}return s}highlight(e,r,n,s){let i=mu(this.spec,e,Math.max(0,r-250),Math.min(n+250,e.doc.length));for(;!i.next().done;)s(i.value.from,i.value.to)}}const up=Ct.define(),Kk=Ct.define(),Qa=fn.define({create(t){return new uw(kE(t).create(),null)},update(t,e){for(let r of e.effects)r.is(up)?t=new uw(r.value.create(),t.panel):r.is(Kk)&&(t=new uw(t.query,r.value?Yk:null));return t},provide:t=>ty.from(t,e=>e.panel)});class uw{constructor(e,r){this.query=e,this.panel=r}}const Kye=It.mark({class:"cm-searchMatch"}),Yye=It.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Xye=hn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Qa))}update(t){let e=t.state.field(Qa);(e!=t.startState.field(Qa)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return It.none;let{view:r}=this,n=new vc;for(let s=0,i=r.visibleRanges,o=i.length;s<o;s++){let{from:a,to:l}=i[s];for(;s<o-1&&l>i[s+1].from-2*250;)l=i[++s].to;t.highlight(r.state,a,l,(c,u)=>{let d=r.state.selection.ranges.some(h=>h.from==c&&h.to==u);n.add(c,u,d?Yye:Kye)})}return n.finish()}},{decorations:t=>t.decorations});function rm(t){return e=>{let r=e.state.field(Qa,!1);return r&&r.query.spec.valid?t(e,r):sU(e)}}const py=rm((t,{query:e})=>{let{to:r}=t.state.selection.main,n=e.nextMatch(t.state,r,r);if(!n)return!1;let s=De.single(n.from,n.to),i=t.state.facet(Ud);return t.dispatch({selection:s,effects:[Xk(t,n),i.scrollToMatch(s.main,t)],userEvent:"select.search"}),nU(t),!0}),my=rm((t,{query:e})=>{let{state:r}=t,{from:n}=r.selection.main,s=e.prevMatch(r,n,n);if(!s)return!1;let i=De.single(s.from,s.to),o=t.state.facet(Ud);return t.dispatch({selection:i,effects:[Xk(t,s),o.scrollToMatch(i.main,t)],userEvent:"select.search"}),nU(t),!0}),Jye=rm((t,{query:e})=>{let r=e.matchAll(t.state,1e3);return!r||!r.length?!1:(t.dispatch({selection:De.create(r.map(n=>De.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),Zye=({state:t,dispatch:e})=>{let r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:s}=r.main,i=[],o=0;for(let a=new cp(t.doc,t.sliceDoc(n,s));!a.next().done;){if(i.length>1e3)return!1;a.value.from==n&&(o=i.length),i.push(De.range(a.value.from,a.value.to))}return e(t.update({selection:De.create(i,o),userEvent:"select.search.matches"})),!0},OD=rm((t,{query:e})=>{let{state:r}=t,{from:n,to:s}=r.selection.main;if(r.readOnly)return!1;let i=e.nextMatch(r,n,n);if(!i)return!1;let o=i,a=[],l,c,u=[];o.from==n&&o.to==s&&(c=r.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(r,o.from,o.to),u.push(tt.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(n).number)+".")));let d=t.state.changes(a);return o&&(l=De.single(o.from,o.to).map(d),u.push(Xk(t,o)),u.push(r.facet(Ud).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),Qye=rm((t,{query:e})=>{if(t.state.readOnly)return!1;let r=e.matchAll(t.state,1e9).map(s=>{let{from:i,to:o}=s;return{from:i,to:o,insert:e.getReplacement(s)}});if(!r.length)return!1;let n=t.state.phrase("replaced $ matches",r.length)+".";return t.dispatch({changes:r,effects:tt.announce.of(n),userEvent:"input.replace.all"}),!0});function Yk(t){return t.state.facet(Ud).createPanel(t)}function kE(t,e){var r,n,s,i,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Ud);return new eU({search:((r=e?.literal)!==null&&r!==void 0?r:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=e?.caseSensitive)!==null&&n!==void 0?n:c.caseSensitive,literal:(s=e?.literal)!==null&&s!==void 0?s:c.literal,regexp:(i=e?.regexp)!==null&&i!==void 0?i:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function rU(t){let e=H8(t,Yk);return e&&e.dom.querySelector("[main-field]")}function nU(t){let e=rU(t);e&&e==t.root.activeElement&&e.select()}const sU=t=>{let e=t.state.field(Qa,!1);if(e&&e.panel){let r=rU(t);if(r&&r!=t.root.activeElement){let n=kE(t.state,e.query.spec);n.valid&&t.dispatch({effects:up.of(n)}),r.focus(),r.select()}}else t.dispatch({effects:[Kk.of(!0),e?up.of(kE(t.state,e.query.spec)):Ct.appendConfig.of(nve)]});return!0},iU=t=>{let e=t.state.field(Qa,!1);if(!e||!e.panel)return!1;let r=H8(t,Yk);return r&&r.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Kk.of(!1)}),!0},eve=[{key:"Mod-f",run:sU,scope:"editor search-panel"},{key:"F3",run:py,shift:my,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:py,shift:my,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:iU,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Zye},{key:"Mod-Alt-g",run:Fye},{key:"Mod-d",run:Uye,preventDefault:!0}];class tve{constructor(e){this.view=e;let r=this.query=e.state.field(Qa).query.spec;this.commit=this.commit.bind(this),this.searchField=nn("input",{value:r.search,placeholder:ws(e,"Find"),"aria-label":ws(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=nn("input",{value:r.replace,placeholder:ws(e,"Replace"),"aria-label":ws(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=nn("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=nn("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=nn("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function n(s,i,o){return nn("button",{class:"cm-button",name:s,onclick:i,type:"button"},o)}this.dom=nn("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,n("next",()=>py(e),[ws(e,"next")]),n("prev",()=>my(e),[ws(e,"previous")]),n("select",()=>Jye(e),[ws(e,"all")]),nn("label",null,[this.caseField,ws(e,"match case")]),nn("label",null,[this.reField,ws(e,"regexp")]),nn("label",null,[this.wordField,ws(e,"by word")]),...e.state.readOnly?[]:[nn("br"),this.replaceField,n("replace",()=>OD(e),[ws(e,"replace")]),n("replaceAll",()=>Qye(e),[ws(e,"replace all")])],nn("button",{name:"close",onclick:()=>iU(e),"aria-label":ws(e,"close"),type:"button"},[""])])}commit(){let e=new eU({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:up.of(e)}))}keydown(e){Lme(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?my:py)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),OD(this.view))}update(e){for(let r of e.transactions)for(let n of r.effects)n.is(up)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ud).top}}function ws(t,e){return t.state.phrase(e)}const zg=30,Wg=/[\s\.,:;?!]/;function Xk(t,{from:e,to:r}){let n=t.state.doc.lineAt(e),s=t.state.doc.lineAt(r).to,i=Math.max(n.from,e-zg),o=Math.min(s,r+zg),a=t.state.sliceDoc(i,o);if(i!=n.from){for(let l=0;l<zg;l++)if(!Wg.test(a[l+1])&&Wg.test(a[l])){a=a.slice(l);break}}if(o!=s){for(let l=a.length-1;l>a.length-zg;l--)if(!Wg.test(a[l-1])&&Wg.test(a[l])){a=a.slice(0,l);break}}return tt.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${n.number}.`)}const rve=tt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),nve=[Qa,xl.low(Xye),rve];function sve(){return p.jsx("div",{className:"flex items-center justify-center absolute inset-0 z-10 text-sm bg-bolt-elements-background-depth-2 text-bolt-elements-textPrimary",children:"File format cannot be displayed."})}var oU=t=>{var{theme:e,settings:r={},styles:n=[]}=t,s={".cm-gutters":{}},i={};r.background&&(i.backgroundColor=r.background),r.backgroundImage&&(i.backgroundImage=r.backgroundImage),r.foreground&&(i.color=r.foreground),r.fontSize&&(i.fontSize=r.fontSize),(r.background||r.foreground)&&(s["&"]=i),r.fontFamily&&(s["&.cm-editor .cm-scroller"]={fontFamily:r.fontFamily}),r.gutterBackground&&(s[".cm-gutters"].backgroundColor=r.gutterBackground),r.gutterForeground&&(s[".cm-gutters"].color=r.gutterForeground),r.gutterBorder&&(s[".cm-gutters"].borderRightColor=r.gutterBorder),r.caret&&(s[".cm-content"]={caretColor:r.caret},s[".cm-cursor, .cm-dropCursor"]={borderLeftColor:r.caret});var o={};r.gutterActiveForeground&&(o.color=r.gutterActiveForeground),r.lineHighlight&&(s[".cm-activeLine"]={backgroundColor:r.lineHighlight},o.backgroundColor=r.lineHighlight),s[".cm-activeLineGutter"]=o,r.selection&&(s["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:r.selection+" !important"}),r.selectionMatch&&(s["& .cm-selectionMatch"]={backgroundColor:r.selectionMatch});var a=tt.theme(s,{dark:e==="dark"}),l=$v.define(n),c=[a,f0e(l)];return c},ive={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},ove=[{tag:[we.keyword,we.operatorKeyword,we.modifier,we.color,we.constant(we.name),we.standard(we.name),we.standard(we.tagName),we.special(we.brace),we.atom,we.bool,we.special(we.variableName)],color:"#0000ff"},{tag:[we.moduleKeyword,we.controlKeyword],color:"#af00db"},{tag:[we.name,we.deleted,we.character,we.macroName,we.propertyName,we.variableName,we.labelName,we.definition(we.name)],color:"#0070c1"},{tag:we.heading,fontWeight:"bold",color:"#0070c1"},{tag:[we.typeName,we.className,we.tagName,we.number,we.changed,we.annotation,we.self,we.namespace],color:"#267f99"},{tag:[we.function(we.variableName),we.function(we.propertyName)],color:"#795e26"},{tag:[we.number],color:"#098658"},{tag:[we.operator,we.punctuation,we.separator,we.url,we.escape,we.regexp],color:"#383a42"},{tag:[we.regexp],color:"#af00db"},{tag:[we.special(we.string),we.processingInstruction,we.string,we.inserted],color:"#a31515"},{tag:[we.angleBracket],color:"#383a42"},{tag:we.strong,fontWeight:"bold"},{tag:we.emphasis,fontStyle:"italic"},{tag:we.strikethrough,textDecoration:"line-through"},{tag:[we.meta,we.comment],color:"#008000"},{tag:we.link,color:"#4078f2",textDecoration:"underline"},{tag:we.invalid,color:"#e45649"}];function ave(t){var{theme:e="light",settings:r={},styles:n=[]}={};return oU({theme:e,settings:$f({},ive,r),styles:[...ove,...n]})}var lve=ave(),cve={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},uve=[{tag:[we.keyword,we.operatorKeyword,we.modifier,we.color,we.constant(we.name),we.standard(we.name),we.standard(we.tagName),we.special(we.brace),we.atom,we.bool,we.special(we.variableName)],color:"#569cd6"},{tag:[we.controlKeyword,we.moduleKeyword],color:"#c586c0"},{tag:[we.name,we.deleted,we.character,we.macroName,we.propertyName,we.variableName,we.labelName,we.definition(we.name)],color:"#9cdcfe"},{tag:we.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[we.typeName,we.className,we.tagName,we.number,we.changed,we.annotation,we.self,we.namespace],color:"#4ec9b0"},{tag:[we.function(we.variableName),we.function(we.propertyName)],color:"#dcdcaa"},{tag:[we.number],color:"#b5cea8"},{tag:[we.operator,we.punctuation,we.separator,we.url,we.escape,we.regexp],color:"#d4d4d4"},{tag:[we.regexp],color:"#d16969"},{tag:[we.special(we.string),we.processingInstruction,we.string,we.inserted],color:"#ce9178"},{tag:[we.angleBracket],color:"#808080"},{tag:we.strong,fontWeight:"bold"},{tag:we.emphasis,fontStyle:"italic"},{tag:we.strikethrough,textDecoration:"line-through"},{tag:[we.meta,we.comment],color:"#6a9955"},{tag:we.link,color:"#6a9955",textDecoration:"underline"},{tag:we.invalid,color:"#ff0000"}];function dve(t){var{theme:e="dark",settings:r={},styles:n=[]}={};return oU({theme:e,settings:$f({},cve,r),styles:[...uve,...n]})}var hve=dve();tt.theme({},{dark:!0});const AE=new yc;function fve(t,e={}){return[pve(e),t==="dark"?AE.of([cU()]):AE.of([lU()])]}function aU(t){return AE.reconfigure(t==="dark"?cU():lU())}function pve(t){return tt.theme({"&":{fontSize:t.fontSize??"12px"},"&.cm-editor":{height:"100%",background:"var(--cm-backgroundColor, #0d1117)",color:"var(--cm-textColor, #e4e4e7)"},".cm-cursor":{borderLeft:"var(--cm-cursor-width) solid var(--cm-cursor-backgroundColor)"},".cm-scroller":{lineHeight:"1.5",background:"inherit","&:focus-visible":{outline:"none"}},".cm-content":{background:"inherit"},".cm-line":{padding:"0 0 0 4px"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorFocused) !important",opacity:"var(--cm-selection-backgroundOpacityFocused, 0.3)"},"&:not(.cm-focused) > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorBlured)",opacity:"var(--cm-selection-backgroundOpacityBlured, 0.3)"},"&.cm-focused > .cm-scroller .cm-matchingBracket":{backgroundColor:"var(--cm-matching-bracket)"},".cm-activeLine":{background:"var(--cm-activeLineBackgroundColor, #0d1117)"},".cm-gutters":{background:"var(--cm-gutter-backgroundColor, #0d1117)",borderRight:0,color:"var(--cm-gutter-textColor, #6b7280)"},".cm-gutter":{"&.cm-lineNumbers":{fontFamily:"Roboto Mono, monospace",fontSize:t.gutterFontSize??t.fontSize??"12px",minWidth:"40px"},"& .cm-activeLineGutter":{background:"transparent",color:"var(--cm-gutter-activeLineTextColor)"},"&.cm-foldGutter .cm-gutterElement > .fold-icon":{cursor:"pointer",color:"var(--cm-foldGutter-textColor)",transform:"translateY(2px)","&:hover":{color:"var(--cm-foldGutter-textColorHover)"}}},".cm-foldGutter .cm-gutterElement":{padding:"0 4px"},".cm-tooltip-autocomplete > ul > li":{minHeight:"18px"},".cm-panel.cm-search label":{marginLeft:"2px",fontSize:"12px"},".cm-panel.cm-search .cm-button":{fontSize:"12px"},".cm-panel.cm-search .cm-textfield":{fontSize:"12px"},".cm-panel.cm-search input[type=checkbox]":{position:"relative",transform:"translateY(2px)",marginRight:"4px"},".cm-panels":{borderColor:"var(--cm-panels-borderColor)"},".cm-panels-bottom":{borderTop:"1px solid var(--cm-panels-borderColor)",backgroundColor:"transparent"},".cm-panel.cm-search":{background:"var(--cm-search-backgroundColor)",color:"var(--cm-search-textColor)",padding:"8px"},".cm-search .cm-button":{background:"var(--cm-search-button-backgroundColor)",borderColor:"var(--cm-search-button-borderColor)",color:"var(--cm-search-button-textColor)",borderRadius:"4px","&:hover":{color:"var(--cm-search-button-textColorHover)"},"&:focus-visible":{outline:"none",borderColor:"var(--cm-search-button-borderColorFocused)"},"&:hover:not(:focus-visible)":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorHover)"},"&:hover:focus-visible":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorFocused)"}},".cm-panel.cm-search [name=close]":{top:"6px",right:"6px",padding:"0 6px",fontSize:"1rem",backgroundColor:"var(--cm-search-closeButton-backgroundColor)",color:"var(--cm-search-closeButton-textColor)","&:hover":{"border-radius":"6px",color:"var(--cm-search-closeButton-textColorHover)",backgroundColor:"var(--cm-search-closeButton-backgroundColorHover)"}},".cm-search input":{background:"var(--cm-search-input-backgroundColor)",borderColor:"var(--cm-search-input-borderColor)",color:"var(--cm-search-input-textColor)",outline:"none",borderRadius:"4px","&:focus-visible":{borderColor:"var(--cm-search-input-borderColorFocused)"}},".cm-tooltip":{background:"var(--cm-tooltip-backgroundColor)",border:"1px solid transparent",borderColor:"var(--cm-tooltip-borderColor)",color:"var(--cm-tooltip-textColor)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected]":{background:"var(--cm-tooltip-backgroundColorSelected)",color:"var(--cm-tooltip-textColorSelected)"},".cm-searchMatch":{backgroundColor:"var(--cm-searchMatch-backgroundColor)"},".cm-tooltip.cm-readonly-tooltip":{padding:"4px",whiteSpace:"nowrap",backgroundColor:"var(--bolt-elements-bg-depth-2)",borderColor:"var(--bolt-elements-borderColorActive)","& .cm-tooltip-arrow:before":{borderTopColor:"var(--bolt-elements-borderColorActive)"},"& .cm-tooltip-arrow:after":{borderTopColor:"transparent"}}})}function lU(){return lve}function cU(){return hve}const mve={key:"Tab",run:gve,shift:X$};function gve({state:t,dispatch:e}){return t.readOnly?!1:(e(t.update(bve(t,(r,n,s)=>{s.push({from:r,to:n,insert:t.facet(Fd)})}),{userEvent:"input.indent"})),!0)}function bve(t,e){return t.changeByRange(r=>{const n=[],s=t.doc.lineAt(r.from);if(r.from===r.to)e(r.from,void 0,n,s);else if(r.from<r.to&&r.to<=s.to)e(r.from,r.to,n,s);else{let o=-1;for(let a=r.from;a<=r.to;){const l=t.doc.lineAt(a);l.number>o&&(r.empty||r.to>l.from)&&(e(l.from,void 0,n,l),o=l.number),a=l.to+1}}const i=t.changes(n);return{changes:n,range:De.range(i.mapPos(r.anchor,1),i.mapPos(r.head,1))}})}const yve=[mn.of({name:"VUE",extensions:["vue"],async load(){return Z(()=>import("./index-DPTfyjiD.js"),__vite__mapDeps([29,30,31,3,32,1,2,4,33])).then(t=>t.vue())}}),mn.of({name:"TS",extensions:["ts"],async load(){return Z(()=>import("./index-DdmY0o-O.js"),__vite__mapDeps([33,31,3,1,2,4])).then(t=>t.javascript({typescript:!0}))}}),mn.of({name:"JS",extensions:["js","mjs","cjs"],async load(){return Z(()=>import("./index-DdmY0o-O.js"),__vite__mapDeps([33,31,3,1,2,4])).then(t=>t.javascript())}}),mn.of({name:"TSX",extensions:["tsx"],async load(){return Z(()=>import("./index-DdmY0o-O.js"),__vite__mapDeps([33,31,3,1,2,4])).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),mn.of({name:"JSX",extensions:["jsx"],async load(){return Z(()=>import("./index-DdmY0o-O.js"),__vite__mapDeps([33,31,3,1,2,4])).then(t=>t.javascript({jsx:!0}))}}),mn.of({name:"HTML",extensions:["html"],async load(){return Z(()=>import("./index-DsGapVyo.js"),__vite__mapDeps([30,31,3,32,1,2,4,33])).then(t=>t.html())}}),mn.of({name:"CSS",extensions:["css"],async load(){return Z(()=>import("./index-BXWfFN9l.js"),__vite__mapDeps([32,31,3,1,2,4])).then(t=>t.css())}}),mn.of({name:"SASS",extensions:["sass"],async load(){return Z(()=>import("./index-xx_buS9h.js"),__vite__mapDeps([34,31,3,32,1,2,4])).then(t=>t.sass({indented:!0}))}}),mn.of({name:"SCSS",extensions:["scss"],async load(){return Z(()=>import("./index-xx_buS9h.js"),__vite__mapDeps([34,31,3,32,1,2,4])).then(t=>t.sass({indented:!1}))}}),mn.of({name:"JSON",extensions:["json"],async load(){return Z(()=>import("./index-BktfIhHm.js"),__vite__mapDeps([35,31,3,1,2,4])).then(t=>t.json())}}),mn.of({name:"Markdown",extensions:["md"],async load(){return Z(()=>import("./index-DgQ-67Py.js"),__vite__mapDeps([36,30,31,3,32,1,2,4,33])).then(t=>t.markdown())}}),mn.of({name:"Wasm",extensions:["wat"],async load(){return Z(()=>import("./index-BzeziZS4.js"),__vite__mapDeps([37,31,3,1,2,4])).then(t=>t.wast())}}),mn.of({name:"Python",extensions:["py"],async load(){return Z(()=>import("./index-CGqOpL4I.js"),__vite__mapDeps([38,31,3,1,2,4])).then(t=>t.python())}}),mn.of({name:"C++",extensions:["cpp"],async load(){return Z(()=>import("./index-BqkQDTWv.js"),__vite__mapDeps([39,31,3,1,2,4])).then(t=>t.cpp())}})];async function vve(t){const e=mn.matchFilename(yve,t);if(e)return await e.load()}class _ve extends wl{constructor(e){super(),this._value=e}eq(e){return e._value===this._value}toDOM(){const e=document.createElement("span");return e.textContent="*".repeat(this._value.length),e.className="cm-masked-text",e}ignoreEvent(){return!1}}function xve(t){return hn.fromClass(class{decorations;constructor(e){this.decorations=this.buildDecorations(e)}update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=this.buildDecorations(e.view))}buildDecorations(e){const r=t();if(!(r?.endsWith(".env")||r?.includes(".env.")||r?.includes("/.env")))return It.none;const s=[],i=e.state.doc;for(let o=1;o<=i.lines;o++){const a=i.line(o),l=a.text,c=l.match(/^([^=]+)=(.+)$/);if(c&&!l.trim().startsWith("#")){const[,u,d]=c,h=a.from+u.length+1;s.push(It.replace({inclusive:!0,widget:new _ve(d)}).range(h,a.to))}}return It.set(s)}},{decorations:e=>e.decorations})}const df=Qt("CodeMirrorEditor");let uU;const dU=Ct.define(),wve=fn.define({create:()=>[],update(t,e){if(!e.state.readOnly)return[];for(const r of e.effects)if(r.is(dU)&&r.value)return Cve(e.state);return[]},provide:t=>Rk.computeN([t],e=>e.field(t))}),Jk=Ct.define(),LD=fn.define({create(){return!0},update(t,e){for(const r of e.effects)if(r.is(Jk))return r.value;return t}}),hU=k.memo(({id:t,doc:e,debounceScroll:r=100,debounceChange:n=150,autoFocusOnDocumentChange:s=!1,editable:i=!0,onScroll:o,onChange:a,onSave:l,theme:c,settings:u,className:d=""})=>{Id.trace("CodeMirrorEditor");const[h]=k.useState(new yc),[f]=k.useState(new yc),b=k.useRef(null),m=k.useRef(),g=k.useRef(),y=k.useRef(),v=k.useRef(),_=k.useRef(o),x=k.useRef(a),w=k.useRef(l);return k.useEffect(()=>{_.current=o,x.current=a,w.current=l,y.current=e,uU=e,g.current=c}),k.useEffect(()=>{if(!(!m.current||!e||e.isBinary))if(typeof e.scroll?.line=="number"){const S=e.scroll.line,T=e.scroll.column??0;try{const E=m.current.state.doc.lines;if(S<E){const C=m.current.state.doc.line(S+1).from+T;m.current.dispatch({selection:{anchor:C},scrollIntoView:!0}),m.current.focus()}else df.warn(`Invalid line number ${S+1} in ${E}-line document`)}catch(E){df.error("Error scrolling to line:",E)}}else(typeof e.scroll?.top=="number"||typeof e.scroll?.left=="number")&&m.current.scrollDOM.scrollTo(e.scroll.left??0,e.scroll.top??0)},[e?.scroll?.line,e?.scroll?.column,e?.scroll?.top,e?.scroll?.left]),k.useEffect(()=>{const S=Yp(E=>{x.current?.(E)},n),T=new tt({parent:b.current,dispatchTransactions(E){const C=T.state.selection;T.update(E);const A=T.state.selection,I=A!==C&&(A===void 0||C===void 0||!A.eq(C));y.current&&(E.some(P=>P.docChanged)||I)&&(S({selection:T.state.selection,content:T.state.doc.toString()}),v.current.set(y.current.filePath,T.state))}});return m.current=T,()=>{m.current?.destroy(),m.current=void 0}},[]),k.useEffect(()=>{m.current&&m.current.dispatch({effects:[aU(c)]})},[c]),k.useEffect(()=>{v.current=new Map},[t]),k.useEffect(()=>{const S=v.current,T=m.current,E=g.current;if(!e){const P=MD("",E,u,_,r,w,[h.of([]),f.of([])]);T.setState(P),Sve(T);return}if(e.isBinary)return;e.filePath===""&&df.warn("File path should not be empty");let C=S.get(e.filePath);C||(C=MD(e.value,E,u,_,r,w,[h.of([]),f.of([xve(()=>y.current?.filePath)])]),S.set(e.filePath,C)),T.setState(C),Eve(T,E,i,h,s,e);const A=kn(),{locked:I}=XT(e.filePath,A);I&&T.dispatch({effects:[Jk.of(!1)]})},[e?.value,i,e?.filePath,s]),p.jsxs("div",{className:ye("relative h-full",d),style:{background:"var(--cm-backgroundColor, #0d1117)"},children:[e?.isBinary&&p.jsx(sve,{}),p.jsx("div",{className:"h-full overflow-hidden",ref:b})]})});hU.displayName="CodeMirrorEditor";function MD(t,e,r,n,s,i,o){return Bt.create({doc:t,extensions:[tt.domEventHandlers({scroll:Yp((a,l)=>{a.target===l.scrollDOM&&n.current?.({left:l.scrollDOM.scrollLeft,top:l.scrollDOM.scrollTop})},s),keydown:(a,l)=>l.state.readOnly?(l.dispatch({effects:[dU.of(a.key!=="Escape")]}),!0):!1}),fve(e,r),Dbe(),Fv.of([...Mye,...Hbe,...eve,{key:"Tab",run:p$},{key:"Mod-s",preventDefault:!0,run:()=>(i.current?.(),!0)},mve]),Fd.of("	"),xbe({closeOnBlur:!1}),Zme({position:"absolute",parent:document.body,tooltipSpace:a=>{const l=a.dom.getBoundingClientRect();return{top:l.top-50,left:l.left,bottom:l.bottom,right:l.right+10}}}),dbe(),fge(),qme(),Gme(),Ume(),w0e(),Bt.tabSize.of(r?.tabSize??2),e0e(),wve,LD,Bt.readOnly.from(LD,a=>!a),gge(),Kme(),u0e({markerDOM:a=>{const l=document.createElement("div");return l.className=`fold-icon ${a?"i-ph-caret-down-bold":"i-ph-caret-right-bold"}`,l}}),...o]})}function Sve(t){t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:""}}),t.scrollDOM.scrollTo(0,0)}function Eve(t,e,r,n,s,i){i.value!==t.state.doc.toString()&&t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:i.value}});const o=kn(),{locked:a}=XT(i.filePath,o);t.dispatch({effects:[Jk.of(r&&!i.isBinary&&!a)]}),vve(i.filePath).then(l=>{l&&(t.dispatch({effects:[n.reconfigure([l]),aU(e)]}),requestAnimationFrame(()=>{const c=t.scrollDOM.scrollLeft,u=t.scrollDOM.scrollTop,d=i.scroll?.left??0,h=i.scroll?.top??0;if(typeof i.scroll?.line=="number"){const b=i.scroll.line,m=i.scroll.column??0;try{const g=t.state.doc.lines;if(b<g){const y=t.state.doc.line(b+1).from+m;t.dispatch({selection:{anchor:y},scrollIntoView:!0}),t.focus()}else df.warn(`Invalid line number ${b+1} in ${g}-line document`)}catch(g){df.error("Error scrolling to line:",g)}return}s&&r&&(c!==d||u!==h?t.scrollDOM.addEventListener("scroll",()=>{t.focus()},{once:!0}):t.focus()),t.scrollDOM.scrollTo(d,h)}))})}function Cve(t){if(!t.readOnly)return[];const e=uU;let r="Cannot edit file while AI response is being generated";if(e?.filePath){const n=kn(),{locked:s}=XT(e.filePath,n);s&&(r="This file is locked and cannot be edited")}return t.selection.ranges.filter(n=>n.empty).map(n=>({pos:n.head,above:!0,strictSide:!0,arrow:!0,create:()=>{const s=document.createElement("div");return s.className="cm-readonly-tooltip",s.textContent=r,{dom:s}}}))}const Tve=k.memo,kve=Tve(({selected:t,options:e,setSelected:r})=>{const n=!!e.middle,s=t===e.left.value,i=n&&e.middle?t===e.middle.value:!1;return p.jsxs("div",{className:"flex items-center flex-wrap shrink-0 gap-1 bg-bolt-elements-background-depth-1 overflow-hidden rounded-full p-1",children:[p.jsx(dw,{selected:s,setSelected:()=>r?.(e.left.value),children:e.left.text}),e.middle&&p.jsx(dw,{selected:i,setSelected:()=>r?.(e.middle.value),children:e.middle.text}),p.jsx(dw,{selected:!s&&!i,setSelected:()=>r?.(e.right.value),children:e.right.text})]})}),dw=k.memo(({selected:t,children:e,setSelected:r})=>p.jsxs("button",{onClick:r,className:"bg-transparent text-sm px-2.5 py-0.5 rounded-full relative",style:{color:t?"#60a5fa":"rgba(255,255,255,0.5)"},children:[p.jsx("span",{className:"relative z-10",children:e}),t&&p.jsx(rt.span,{layoutId:"pill-tab",transition:{duration:.2,ease:Dn},className:"absolute inset-0 z-0 rounded-full",style:{background:"rgba(59, 130, 246, 0.15)"}})]})),Vv=k.createContext(null);Vv.displayName="PanelGroupContext";const Ir={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Zk=10,dc=k.useLayoutEffect,jD=Qy.useId,Ave=typeof jD=="function"?jD:()=>null;let Rve=0;function Qk(t=null){const e=Ave(),r=k.useRef(t||e||null);return r.current===null&&(r.current=""+Rve++),t??r.current}function fU({children:t,className:e="",collapsedSize:r,collapsible:n,defaultSize:s,forwardedRef:i,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:h,style:f,tagName:b="div",...m}){const g=k.useContext(Vv);if(g===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:v,getPanelSize:_,getPanelStyle:x,groupId:w,isPanelCollapsed:S,reevaluatePanelConstraints:T,registerPanel:E,resizePanel:C,unregisterPanel:A}=g,I=Qk(o),P=k.useRef({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:r,collapsible:n,defaultSize:s,maxSize:a,minSize:l},id:I,idIsFromProps:o!==void 0,order:h});k.useRef({didLogMissingDefaultSizeWarning:!1}).current.didLogMissingDefaultSizeWarning,dc(()=>{const{callbacks:F,constraints:G}=P.current,z={...G};P.current.id=I,P.current.idIsFromProps=o!==void 0,P.current.order=h,F.onCollapse=c,F.onExpand=u,F.onResize=d,G.collapsedSize=r,G.collapsible=n,G.defaultSize=s,G.maxSize=a,G.minSize=l,(z.collapsedSize!==G.collapsedSize||z.collapsible!==G.collapsible||z.maxSize!==G.maxSize||z.minSize!==G.minSize)&&T(P.current,z)}),dc(()=>{const F=P.current;return E(F),()=>{A(F)}},[h,I,E,A]),k.useImperativeHandle(i,()=>({collapse:()=>{y(P.current)},expand:F=>{v(P.current,F)},getId(){return I},getSize(){return _(P.current)},isCollapsed(){return S(P.current)},isExpanded(){return!S(P.current)},resize:F=>{C(P.current,F)}}),[y,v,_,S,I,C]);const R=x(P.current,s);return k.createElement(b,{...m,children:t,className:e,id:I,style:{...R,...f},[Ir.groupId]:w,[Ir.panel]:"",[Ir.panelCollapsible]:n||void 0,[Ir.panelId]:I,[Ir.panelSize]:parseFloat(""+R.flexGrow).toFixed(1)})}const hf=k.forwardRef((t,e)=>k.createElement(fU,{...t,forwardedRef:e}));fU.displayName="Panel";hf.displayName="forwardRef(Panel)";let RE=null,K0=-1,$a=null;function Pve(t,e){if(e){const r=(e&yU)!==0,n=(e&vU)!==0,s=(e&_U)!==0,i=(e&xU)!==0;if(r)return s?"se-resize":i?"ne-resize":"e-resize";if(n)return s?"sw-resize":i?"nw-resize":"w-resize";if(s)return"s-resize";if(i)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Ive(){$a!==null&&(document.head.removeChild($a),RE=null,$a=null,K0=-1)}function hw(t,e){var r,n;const s=Pve(t,e);if(RE!==s){if(RE=s,$a===null&&($a=document.createElement("style"),document.head.appendChild($a)),K0>=0){var i;(i=$a.sheet)===null||i===void 0||i.removeRule(K0)}K0=(r=(n=$a.sheet)===null||n===void 0?void 0:n.insertRule(`*{cursor: ${s} !important;}`))!==null&&r!==void 0?r:-1}}function pU(t){return t.type==="keydown"}function mU(t){return t.type.startsWith("pointer")}function gU(t){return t.type.startsWith("mouse")}function Gv(t){if(mU(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(gU(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function Nve(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Dve(t,e,r){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function Ove(t,e){if(t===e)throw new Error("Cannot compare node with itself");const r={a:$D(t),b:$D(e)};let n;for(;r.a.at(-1)===r.b.at(-1);)t=r.a.pop(),e=r.b.pop(),n=t;xt(n,"Stacking order can only be calculated for elements with a common ancestor");const s={a:BD(FD(r.a)),b:BD(FD(r.b))};if(s.a===s.b){const i=n.childNodes,o={a:r.a.at(-1),b:r.b.at(-1)};let a=i.length;for(;a--;){const l=i[a];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(s.a-s.b)}const Lve=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Mve(t){var e;const r=getComputedStyle((e=bU(t))!==null&&e!==void 0?e:t).display;return r==="flex"||r==="inline-flex"}function jve(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||Mve(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||Lve.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function FD(t){let e=t.length;for(;e--;){const r=t[e];if(xt(r,"Missing node"),jve(r))return r}return null}function BD(t){return t&&Number(getComputedStyle(t).zIndex)||0}function $D(t){const e=[];for(;t;)e.push(t),t=bU(t);return e}function bU(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const yU=1,vU=2,_U=4,xU=8,Fve=Nve()==="coarse";let wi=[],Xu=!1,Gl=new Map,qv=new Map;const dp=new Set;function Bve(t,e,r,n,s){var i;const{ownerDocument:o}=e,a={direction:r,element:e,hitAreaMargins:n,setResizeHandlerState:s},l=(i=Gl.get(o))!==null&&i!==void 0?i:0;return Gl.set(o,l+1),dp.add(a),gy(),function(){var u;qv.delete(t),dp.delete(a);const d=(u=Gl.get(o))!==null&&u!==void 0?u:1;if(Gl.set(o,d-1),gy(),d===1&&Gl.delete(o),wi.includes(a)){const h=wi.indexOf(a);h>=0&&wi.splice(h,1),tA(),s("up",!0,null)}}}function $ve(t){const{target:e}=t,{x:r,y:n}=Gv(t);Xu=!0,eA({target:e,x:r,y:n}),gy(),wi.length>0&&(by("down",t),t.preventDefault(),wU(e)||t.stopImmediatePropagation())}function fw(t){const{x:e,y:r}=Gv(t);if(Xu&&t.buttons===0&&(Xu=!1,by("up",t)),!Xu){const{target:n}=t;eA({target:n,x:e,y:r})}by("move",t),tA(),wi.length>0&&t.preventDefault()}function pw(t){const{target:e}=t,{x:r,y:n}=Gv(t);qv.clear(),Xu=!1,wi.length>0&&(t.preventDefault(),wU(e)||t.stopImmediatePropagation()),by("up",t),eA({target:e,x:r,y:n}),tA(),gy()}function wU(t){let e=t;for(;e;){if(e.hasAttribute(Ir.resizeHandle))return!0;e=e.parentElement}return!1}function eA({target:t,x:e,y:r}){wi.splice(0);let n=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(n=t),dp.forEach(s=>{const{element:i,hitAreaMargins:o}=s,a=i.getBoundingClientRect(),{bottom:l,left:c,right:u,top:d}=a,h=Fve?o.coarse:o.fine;if(e>=c-h&&e<=u+h&&r>=d-h&&r<=l+h){if(n!==null&&document.contains(n)&&i!==n&&!i.contains(n)&&!n.contains(i)&&Ove(n,i)>0){let b=n,m=!1;for(;b&&!b.contains(i);){if(Dve(b.getBoundingClientRect(),a)){m=!0;break}b=b.parentElement}if(m)return}wi.push(s)}})}function mw(t,e){qv.set(t,e)}function tA(){let t=!1,e=!1;wi.forEach(n=>{const{direction:s}=n;s==="horizontal"?t=!0:e=!0});let r=0;qv.forEach(n=>{r|=n}),t&&e?hw("intersection",r):t?hw("horizontal",r):e?hw("vertical",r):Ive()}let gw=new AbortController;function gy(){gw.abort(),gw=new AbortController;const t={capture:!0,signal:gw.signal};dp.size&&(Xu?(wi.length>0&&Gl.forEach((e,r)=>{const{body:n}=r;e>0&&(n.addEventListener("contextmenu",pw,t),n.addEventListener("pointerleave",fw,t),n.addEventListener("pointermove",fw,t))}),window.addEventListener("pointerup",pw,t),window.addEventListener("pointercancel",pw,t)):Gl.forEach((e,r)=>{const{body:n}=r;e>0&&(n.addEventListener("pointerdown",$ve,t),n.addEventListener("pointermove",fw,t))}))}function by(t,e){dp.forEach(r=>{const{setResizeHandlerState:n}=r,s=wi.includes(r);n(t,s,e)})}function Uve(){const[t,e]=k.useState(0);return k.useCallback(()=>e(r=>r+1),[])}function xt(t,e){if(!t)throw console.error(e),Error(e)}function Sc(t,e,r=Zk){return t.toFixed(r)===e.toFixed(r)?0:t>e?1:-1}function Go(t,e,r=Zk){return Sc(t,e,r)===0}function ks(t,e,r){return Sc(t,e,r)===0}function Hve(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++){const s=t[n],i=e[n];if(!ks(s,i,r))return!1}return!0}function Nu({panelConstraints:t,panelIndex:e,size:r}){const n=t[e];xt(n!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:i,maxSize:o=100,minSize:a=0}=n;if(Sc(r,a)<0)if(i){const l=(s+a)/2;Sc(r,l)<0?r=s:r=a}else r=a;return r=Math.min(o,r),r=parseFloat(r.toFixed(Zk)),r}function Bh({delta:t,initialLayout:e,panelConstraints:r,pivotIndices:n,prevLayout:s,trigger:i}){if(ks(t,0))return e;const o=[...e],[a,l]=n;xt(a!=null,"Invalid first pivot index"),xt(l!=null,"Invalid second pivot index");let c=0;if(i==="keyboard"){{const d=t<0?l:a,h=r[d];xt(h,`Panel constraints not found for index ${d}`);const{collapsedSize:f=0,collapsible:b,minSize:m=0}=h;if(b){const g=e[d];if(xt(g!=null,`Previous layout not found for panel index ${d}`),ks(g,f)){const y=m-g;Sc(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}{const d=t<0?a:l,h=r[d];xt(h,`No panel constraints found for index ${d}`);const{collapsedSize:f=0,collapsible:b,minSize:m=0}=h;if(b){const g=e[d];if(xt(g!=null,`Previous layout not found for panel index ${d}`),ks(g,m)){const y=g-f;Sc(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const d=t<0?1:-1;let h=t<0?l:a,f=0;for(;;){const m=e[h];xt(m!=null,`Previous layout not found for panel index ${h}`);const y=Nu({panelConstraints:r,panelIndex:h,size:100})-m;if(f+=y,h+=d,h<0||h>=r.length)break}const b=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-b:b}{let h=t<0?a:l;for(;h>=0&&h<r.length;){const f=Math.abs(t)-Math.abs(c),b=e[h];xt(b!=null,`Previous layout not found for panel index ${h}`);const m=b-f,g=Nu({panelConstraints:r,panelIndex:h,size:m});if(!ks(b,g)&&(c+=b-g,o[h]=g,c.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?h--:h++}}if(Hve(s,o))return s;{const d=t<0?l:a,h=e[d];xt(h!=null,`Previous layout not found for panel index ${d}`);const f=h+c,b=Nu({panelConstraints:r,panelIndex:d,size:f});if(o[d]=b,!ks(b,f)){let m=f-b,y=t<0?l:a;for(;y>=0&&y<r.length;){const v=o[y];xt(v!=null,`Previous layout not found for panel index ${y}`);const _=v+m,x=Nu({panelConstraints:r,panelIndex:y,size:_});if(ks(v,x)||(m-=x-v,o[y]=x),ks(m,0))break;t>0?y--:y++}}}const u=o.reduce((d,h)=>h+d,0);return ks(u,100)?o:s}function zve({layout:t,panelsArray:e,pivotIndices:r}){let n=0,s=100,i=0,o=0;const a=r[0];xt(a!=null,"No pivot index found"),e.forEach((d,h)=>{const{constraints:f}=d,{maxSize:b=100,minSize:m=0}=f;h===a?(n=m,s=b):(i+=m,o+=b)});const l=Math.min(s,100-i),c=Math.max(n,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function hp(t,e=document){return Array.from(e.querySelectorAll(`[${Ir.resizeHandleId}][data-panel-group-id="${t}"]`))}function SU(t,e,r=document){const s=hp(t,r).findIndex(i=>i.getAttribute(Ir.resizeHandleId)===e);return s??null}function EU(t,e,r){const n=SU(t,e,r);return n!=null?[n,n+1]:[-1,-1]}function CU(t,e=document){var r;if(e instanceof HTMLElement&&(e==null||(r=e.dataset)===null||r===void 0?void 0:r.panelGroupId)==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Kv(t,e=document){const r=e.querySelector(`[${Ir.resizeHandleId}="${t}"]`);return r||null}function Wve(t,e,r,n=document){var s,i,o,a;const l=Kv(e,n),c=hp(t,n),u=l?c.indexOf(l):-1,d=(s=(i=r[u])===null||i===void 0?void 0:i.id)!==null&&s!==void 0?s:null,h=(o=(a=r[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,h]}function Vve({committedValuesRef:t,eagerValuesRef:e,groupId:r,layout:n,panelDataArray:s,panelGroupElement:i,setLayout:o}){const a=k.useRef({didWarnAboutMissingResizeHandle:!1});dc(()=>{if(!i)return;const l=hp(r,i);for(let c=0;c<s.length-1;c++){const{valueMax:u,valueMin:d,valueNow:h}=zve({layout:n,panelsArray:s,pivotIndices:[c,c+1]}),f=l[c];if(f==null){const{didWarnAboutMissingResizeHandle:b}=a.current;b||(a.current.didWarnAboutMissingResizeHandle=!0,console.warn(`WARNING: Missing resize handle for PanelGroup "${r}"`))}else{const b=s[c];xt(b,`No panel data found for index "${c}"`),f.setAttribute("aria-controls",b.id),f.setAttribute("aria-valuemax",""+Math.round(u)),f.setAttribute("aria-valuemin",""+Math.round(d)),f.setAttribute("aria-valuenow",h!=null?""+Math.round(h):"")}}return()=>{l.forEach((c,u)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[r,n,s,i]),k.useEffect(()=>{if(!i)return;const l=e.current;xt(l,"Eager values not found");const{panelDataArray:c}=l,u=CU(r,i);xt(u!=null,`No group found for id "${r}"`);const d=hp(r,i);xt(d,`No resize handles found for group id "${r}"`);const h=d.map(f=>{const b=f.getAttribute(Ir.resizeHandleId);xt(b,"Resize handle element has no handle id attribute");const[m,g]=Wve(r,b,c,i);if(m==null||g==null)return()=>{};const y=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const _=c.findIndex(x=>x.id===m);if(_>=0){const x=c[_];xt(x,`No panel data found for index ${_}`);const w=n[_],{collapsedSize:S=0,collapsible:T,minSize:E=0}=x.constraints;if(w!=null&&T){const C=Bh({delta:ks(w,S)?E-S:S-w,initialLayout:n,panelConstraints:c.map(A=>A.constraints),pivotIndices:EU(r,b,i),prevLayout:n,trigger:"keyboard"});n!==C&&o(C)}}break}}};return f.addEventListener("keydown",y),()=>{f.removeEventListener("keydown",y)}});return()=>{h.forEach(f=>f())}},[i,t,e,r,n,s,o])}function bw(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function TU(t,e){const r=t==="horizontal",{x:n,y:s}=Gv(e);return r?n:s}function Gve(t,e,r,n,s){const i=r==="horizontal",o=Kv(e,s);xt(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute(Ir.groupId);xt(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=n;const c=TU(r,t),u=CU(a,s);xt(u,`No group element found for id "${a}"`);const d=u.getBoundingClientRect(),h=i?d.width:d.height;return(c-l)/h*100}function qve(t,e,r,n,s,i){if(pU(t)){const o=r==="horizontal";let a=0;t.shiftKey?a=100:s!=null?a=s:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return n==null?0:Gve(t,e,r,n,i)}function Kve({panelDataArray:t}){const e=Array(t.length),r=t.map(i=>i.constraints);let n=0,s=100;for(let i=0;i<t.length;i++){const o=r[i];xt(o,`Panel constraints not found for index ${i}`);const{defaultSize:a}=o;a!=null&&(n++,e[i]=a,s-=a)}for(let i=0;i<t.length;i++){const o=r[i];xt(o,`Panel constraints not found for index ${i}`);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-n,c=s/l;n++,e[i]=c,s-=c}return e}function ou(t,e,r){e.forEach((n,s)=>{const i=t[s];xt(i,`Panel data not found for index ${s}`);const{callbacks:o,constraints:a,id:l}=i,{collapsedSize:c=0,collapsible:u}=a,d=r[l];if(d==null||n!==d){r[l]=n;const{onCollapse:h,onExpand:f,onResize:b}=o;b&&b(n,d),u&&(h||f)&&(f&&(d==null||Go(d,c))&&!Go(n,c)&&f(),h&&(d==null||!Go(d,c))&&Go(n,c)&&h())}})}function Vg(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!=e[r])return!1;return!0}function Yve({defaultSize:t,dragState:e,layout:r,panelData:n,panelIndex:s,precision:i=3}){const o=r[s];let a;return o==null?a=t!=null?t.toPrecision(i):"1":n.length===1?a="1":a=o.toPrecision(i),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function Xve(t,e=10){let r=null;return(...s)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{t(...s)},e)}}function UD(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,r)=>{localStorage.setItem(e,r)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function kU(t){return`react-resizable-panels:${t}`}function AU(t){return t.map(e=>{const{constraints:r,id:n,idIsFromProps:s,order:i}=e;return s?n:i?`${i}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((e,r)=>e.localeCompare(r)).join(",")}function RU(t,e){try{const r=kU(t),n=e.getItem(r);if(n){const s=JSON.parse(n);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function Jve(t,e,r){var n,s;const i=(n=RU(t,r))!==null&&n!==void 0?n:{},o=AU(e);return(s=i[o])!==null&&s!==void 0?s:null}function Zve(t,e,r,n,s){var i;const o=kU(t),a=AU(e),l=(i=RU(t,s))!==null&&i!==void 0?i:{};l[a]={expandToSizes:Object.fromEntries(r.entries()),layout:n};try{s.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function Qve({panelConstraints:t,panelId:e,panelIndex:r}){{const n=[],s=t[r];xt(s,`No panel constraints found for index ${r}`);const{collapsedSize:i=0,collapsible:o=!1,defaultSize:a,maxSize:l=100,minSize:c=0}=s;if(c>l&&n.push(`min size (${c}%) should not be greater than max size (${l}%)`),a!=null&&(a<0?n.push("default size should not be less than 0"):a<c&&(!o||a!==i)&&n.push("default size should not be less than min size"),a>100?n.push("default size should not be greater than 100"):a>l&&n.push("default size should not be greater than max size")),i>c&&n.push("collapsed size should not be greater than min size"),n.length>0){const u=e!=null?`Panel "${e}"`:"Panel";return console.warn(`${u} has an invalid configuration:

${n.join(`
`)}`),!1}}return!0}function HD({layout:t,panelConstraints:e}){const r=[...t],n=r.reduce((i,o)=>i+o,0);if(r.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${r.map(i=>`${i}%`).join(", ")}`);if(!ks(n,100)&&r.length>0){console.warn(`WARNING: Invalid layout total size: ${r.map(i=>`${i}%`).join(", ")}. Layout normalization will be applied.`);for(let i=0;i<e.length;i++){const o=r[i];xt(o!=null,`No layout data found for index ${i}`);const a=100/n*o;r[i]=a}}let s=0;for(let i=0;i<e.length;i++){const o=r[i];xt(o!=null,`No layout data found for index ${i}`);const a=Nu({panelConstraints:e,panelIndex:i,size:o});o!=a&&(s+=o-a,r[i]=a)}if(!ks(s,0))for(let i=0;i<e.length;i++){const o=r[i];xt(o!=null,`No layout data found for index ${i}`);const a=o+s,l=Nu({panelConstraints:e,panelIndex:i,size:a});if(o!==l&&(s-=l-o,r[i]=l,ks(s,0)))break}return r}const e_e=100,$h={getItem:t=>(UD($h),$h.getItem(t)),setItem:(t,e)=>{UD($h),$h.setItem(t,e)}},zD={};function PU({autoSaveId:t=null,children:e,className:r="",direction:n,forwardedRef:s,id:i=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=$h,style:c,tagName:u="div",...d}){const h=Qk(i),f=k.useRef(null),[b,m]=k.useState(null),[g,y]=k.useState([]),v=Uve(),_=k.useRef({}),x=k.useRef(new Map),w=k.useRef(0),S=k.useRef({autoSaveId:t,direction:n,dragState:b,id:h,keyboardResizeBy:a,onLayout:o,storage:l}),T=k.useRef({layout:g,panelDataArray:[],panelDataArrayChanged:!1}),E=k.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]});k.useImperativeHandle(s,()=>({getId:()=>S.current.id,getLayout:()=>{const{layout:ee}=T.current;return ee},setLayout:ee=>{const{onLayout:X}=S.current,{layout:ge,panelDataArray:J}=T.current,j=HD({layout:ee,panelConstraints:J.map(Y=>Y.constraints)});bw(ge,j)||(y(j),T.current.layout=j,X&&X(j),ou(J,j,_.current))}}),[]),dc(()=>{S.current.autoSaveId=t,S.current.direction=n,S.current.dragState=b,S.current.id=h,S.current.onLayout=o,S.current.storage=l}),Vve({committedValuesRef:S,eagerValuesRef:T,groupId:h,layout:g,panelDataArray:T.current.panelDataArray,setLayout:y,panelGroupElement:f.current}),k.useEffect(()=>{const{panelDataArray:ee}=T.current;if(t){if(g.length===0||g.length!==ee.length)return;let X=zD[t];X==null&&(X=Xve(Zve,e_e),zD[t]=X);const ge=[...ee],J=new Map(x.current);X(t,ge,J,g,l)}},[t,g,l]),k.useEffect(()=>{{const{panelDataArray:ee}=T.current,{didLogIdAndOrderWarning:X,didLogPanelConstraintsWarning:ge,prevPanelIds:J}=E.current;if(!X){const j=ee.map(({id:Q})=>Q);E.current.prevPanelIds=j,J.length>0&&!bw(J,j)&&ee.find(({idIsFromProps:Q,order:ie})=>!Q||ie==null)&&(E.current.didLogIdAndOrderWarning=!0,console.warn("WARNING: Panel id and order props recommended when panels are dynamically rendered"))}if(!ge){const j=ee.map(Y=>Y.constraints);for(let Y=0;Y<j.length;Y++){const Q=ee[Y];if(xt(Q,`Panel data not found for index ${Y}`),!Qve({panelConstraints:j,panelId:Q.id,panelIndex:Y})){E.current.didLogPanelConstraintsWarning=!0;break}}}}});const C=k.useCallback(ee=>{const{onLayout:X}=S.current,{layout:ge,panelDataArray:J}=T.current;if(ee.constraints.collapsible){const j=J.map(re=>re.constraints),{collapsedSize:Y=0,panelSize:Q,pivotIndices:ie}=Dl(J,ee,ge);if(xt(Q!=null,`Panel size not found for panel "${ee.id}"`),!Go(Q,Y)){x.current.set(ee.id,Q);const pe=gu(J,ee)===J.length-1?Q-Y:Y-Q,M=Bh({delta:pe,initialLayout:ge,panelConstraints:j,pivotIndices:ie,prevLayout:ge,trigger:"imperative-api"});Vg(ge,M)||(y(M),T.current.layout=M,X&&X(M),ou(J,M,_.current))}}},[]),A=k.useCallback((ee,X)=>{const{onLayout:ge}=S.current,{layout:J,panelDataArray:j}=T.current;if(ee.constraints.collapsible){const Y=j.map(oe=>oe.constraints),{collapsedSize:Q=0,panelSize:ie=0,minSize:re=0,pivotIndices:pe}=Dl(j,ee,J),M=X??re;if(Go(ie,Q)){const oe=x.current.get(ee.id),le=oe!=null&&oe>=M?oe:M,V=gu(j,ee)===j.length-1?ie-le:le-ie,ae=Bh({delta:V,initialLayout:J,panelConstraints:Y,pivotIndices:pe,prevLayout:J,trigger:"imperative-api"});Vg(J,ae)||(y(ae),T.current.layout=ae,ge&&ge(ae),ou(j,ae,_.current))}}},[]),I=k.useCallback(ee=>{const{layout:X,panelDataArray:ge}=T.current,{panelSize:J}=Dl(ge,ee,X);return xt(J!=null,`Panel size not found for panel "${ee.id}"`),J},[]),P=k.useCallback((ee,X)=>{const{panelDataArray:ge}=T.current,J=gu(ge,ee);return Yve({defaultSize:X,dragState:b,layout:g,panelData:ge,panelIndex:J})},[b,g]),D=k.useCallback(ee=>{const{layout:X,panelDataArray:ge}=T.current,{collapsedSize:J=0,collapsible:j,panelSize:Y}=Dl(ge,ee,X);return xt(Y!=null,`Panel size not found for panel "${ee.id}"`),j===!0&&Go(Y,J)},[]),R=k.useCallback(ee=>{const{layout:X,panelDataArray:ge}=T.current,{collapsedSize:J=0,collapsible:j,panelSize:Y}=Dl(ge,ee,X);return xt(Y!=null,`Panel size not found for panel "${ee.id}"`),!j||Sc(Y,J)>0},[]),F=k.useCallback(ee=>{const{panelDataArray:X}=T.current;X.push(ee),X.sort((ge,J)=>{const j=ge.order,Y=J.order;return j==null&&Y==null?0:j==null?-1:Y==null?1:j-Y}),T.current.panelDataArrayChanged=!0,v()},[v]);dc(()=>{if(T.current.panelDataArrayChanged){T.current.panelDataArrayChanged=!1;const{autoSaveId:ee,onLayout:X,storage:ge}=S.current,{layout:J,panelDataArray:j}=T.current;let Y=null;if(ee){const ie=Jve(ee,j,ge);ie&&(x.current=new Map(Object.entries(ie.expandToSizes)),Y=ie.layout)}Y==null&&(Y=Kve({panelDataArray:j}));const Q=HD({layout:Y,panelConstraints:j.map(ie=>ie.constraints)});bw(J,Q)||(y(Q),T.current.layout=Q,X&&X(Q),ou(j,Q,_.current))}}),dc(()=>{const ee=T.current;return()=>{ee.layout=[]}},[]);const G=k.useCallback(ee=>{let X=!1;const ge=f.current;return ge&&window.getComputedStyle(ge,null).getPropertyValue("direction")==="rtl"&&(X=!0),function(j){j.preventDefault();const Y=f.current;if(!Y)return()=>null;const{direction:Q,dragState:ie,id:re,keyboardResizeBy:pe,onLayout:M}=S.current,{layout:oe,panelDataArray:le}=T.current,{initialLayout:q}=ie??{},V=EU(re,ee,Y);let ae=qve(j,ee,Q,ie,pe,Y);const xe=Q==="horizontal";xe&&X&&(ae=-ae);const Te=le.map(Me=>Me.constraints),fe=Bh({delta:ae,initialLayout:q??oe,panelConstraints:Te,pivotIndices:V,prevLayout:oe,trigger:pU(j)?"keyboard":"mouse-or-touch"}),ke=!Vg(oe,fe);(mU(j)||gU(j))&&w.current!=ae&&(w.current=ae,!ke&&ae!==0?xe?mw(ee,ae<0?yU:vU):mw(ee,ae<0?_U:xU):mw(ee,0)),ke&&(y(fe),T.current.layout=fe,M&&M(fe),ou(le,fe,_.current))}},[]),z=k.useCallback((ee,X)=>{const{onLayout:ge}=S.current,{layout:J,panelDataArray:j}=T.current,Y=j.map(oe=>oe.constraints),{panelSize:Q,pivotIndices:ie}=Dl(j,ee,J);xt(Q!=null,`Panel size not found for panel "${ee.id}"`);const pe=gu(j,ee)===j.length-1?Q-X:X-Q,M=Bh({delta:pe,initialLayout:J,panelConstraints:Y,pivotIndices:ie,prevLayout:J,trigger:"imperative-api"});Vg(J,M)||(y(M),T.current.layout=M,ge&&ge(M),ou(j,M,_.current))},[]),K=k.useCallback((ee,X)=>{const{layout:ge,panelDataArray:J}=T.current,{collapsedSize:j=0,collapsible:Y}=X,{collapsedSize:Q=0,collapsible:ie,maxSize:re=100,minSize:pe=0}=ee.constraints,{panelSize:M}=Dl(J,ee,ge);M!=null&&(Y&&ie&&Go(M,j)?Go(j,Q)||z(ee,Q):M<pe?z(ee,pe):M>re&&z(ee,re))},[z]),L=k.useCallback((ee,X)=>{const{direction:ge}=S.current,{layout:J}=T.current;if(!f.current)return;const j=Kv(ee,f.current);xt(j,`Drag handle element not found for id "${ee}"`);const Y=TU(ge,X);m({dragHandleId:ee,dragHandleRect:j.getBoundingClientRect(),initialCursorPosition:Y,initialLayout:J})},[]),O=k.useCallback(()=>{m(null)},[]),$=k.useCallback(ee=>{const{panelDataArray:X}=T.current,ge=gu(X,ee);ge>=0&&(X.splice(ge,1),delete _.current[ee.id],T.current.panelDataArrayChanged=!0,v())},[v]),H=k.useMemo(()=>({collapsePanel:C,direction:n,dragState:b,expandPanel:A,getPanelSize:I,getPanelStyle:P,groupId:h,isPanelCollapsed:D,isPanelExpanded:R,reevaluatePanelConstraints:K,registerPanel:F,registerResizeHandle:G,resizePanel:z,startDragging:L,stopDragging:O,unregisterPanel:$,panelGroupElement:f.current}),[C,b,n,A,I,P,h,D,R,K,F,G,z,L,O,$]),U={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return k.createElement(Vv.Provider,{value:H},k.createElement(u,{...d,children:e,className:r,id:i,ref:f,style:{...U,...c},[Ir.group]:"",[Ir.groupDirection]:n,[Ir.groupId]:h}))}const PE=k.forwardRef((t,e)=>k.createElement(PU,{...t,forwardedRef:e}));PU.displayName="PanelGroup";PE.displayName="forwardRef(PanelGroup)";function gu(t,e){return t.findIndex(r=>r===e||r.id===e.id)}function Dl(t,e,r){const n=gu(t,e),i=n===t.length-1?[n-1,n]:[n,n+1],o=r[n];return{...e.constraints,panelSize:o,pivotIndices:i}}function t_e({disabled:t,handleId:e,resizeHandler:r,panelGroupElement:n}){k.useEffect(()=>{if(t||r==null||n==null)return;const s=Kv(e,n);if(s==null)return;const i=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),r(o);break}case"F6":{o.preventDefault();const a=s.getAttribute(Ir.groupId);xt(a,`No group element found for id "${a}"`);const l=hp(a,n),c=SU(a,e,n);xt(c!==null,`No resize element found for id "${e}"`);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return s.addEventListener("keydown",i),()=>{s.removeEventListener("keydown",i)}},[n,t,e,r])}function IE({children:t=null,className:e="",disabled:r=!1,hitAreaMargins:n,id:s,onBlur:i,onClick:o,onDragging:a,onFocus:l,onPointerDown:c,onPointerUp:u,style:d={},tabIndex:h=0,tagName:f="div",...b}){var m,g;const y=k.useRef(null),v=k.useRef({onClick:o,onDragging:a,onPointerDown:c,onPointerUp:u});k.useEffect(()=>{v.current.onClick=o,v.current.onDragging=a,v.current.onPointerDown=c,v.current.onPointerUp=u});const _=k.useContext(Vv);if(_===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:x,groupId:w,registerResizeHandle:S,startDragging:T,stopDragging:E,panelGroupElement:C}=_,A=Qk(s),[I,P]=k.useState("inactive"),[D,R]=k.useState(!1),[F,G]=k.useState(null),z=k.useRef({state:I});dc(()=>{z.current.state=I}),k.useEffect(()=>{if(r)G(null);else{const $=S(A);G(()=>$)}},[r,A,S]);const K=(m=n?.coarse)!==null&&m!==void 0?m:15,L=(g=n?.fine)!==null&&g!==void 0?g:5;k.useEffect(()=>{if(r||F==null)return;const $=y.current;xt($,"Element ref not attached");let H=!1;return Bve(A,$,x,{coarse:K,fine:L},(ee,X,ge)=>{if(!X){P("inactive");return}switch(ee){case"down":{P("drag"),H=!1,xt(ge,'Expected event to be defined for "down" action'),T(A,ge);const{onDragging:J,onPointerDown:j}=v.current;J?.(!0),j?.();break}case"move":{const{state:J}=z.current;H=!0,J!=="drag"&&P("hover"),xt(ge,'Expected event to be defined for "move" action'),F(ge);break}case"up":{P("hover"),E();const{onClick:J,onDragging:j,onPointerUp:Y}=v.current;j?.(!1),Y?.(),H||J?.();break}}})},[K,x,r,L,S,A,F,T,E]),t_e({disabled:r,handleId:A,resizeHandler:F,panelGroupElement:C});const O={touchAction:"none",userSelect:"none"};return k.createElement(f,{...b,children:t,className:e,id:s,onBlur:()=>{R(!1),i?.()},onFocus:()=>{R(!0),l?.()},ref:y,role:"separator",style:{...O,...d},tabIndex:h,[Ir.groupDirection]:x,[Ir.groupId]:w,[Ir.resizeHandle]:"",[Ir.resizeHandleActive]:I==="drag"?"pointer":D?"keyboard":void 0,[Ir.resizeHandleEnabled]:!r,[Ir.resizeHandleId]:A,[Ir.resizeHandleState]:I})}IE.displayName="PanelResizeHandle";function IU(t){const e=t+"CollectionProvider",[r,n]=ai(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:y}=m,v=Yr.useRef(null),_=Yr.useRef(new Map).current;return p.jsx(s,{scope:g,itemMap:_,collectionRef:v,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=ld(a),c=Yr.forwardRef((m,g)=>{const{scope:y,children:v}=m,_=i(a,y),x=Sr(g,_.collectionRef);return p.jsx(l,{ref:x,children:v})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=ld(u),f=Yr.forwardRef((m,g)=>{const{scope:y,children:v,..._}=m,x=Yr.useRef(null),w=Sr(g,x),S=i(u,y);return Yr.useEffect(()=>(S.itemMap.set(x,{ref:x,..._}),()=>void S.itemMap.delete(x))),p.jsx(h,{[d]:"",ref:w,children:v})});f.displayName=u;function b(m){const g=i(t+"CollectionConsumer",m);return Yr.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const _=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((S,T)=>_.indexOf(S.ref.current)-_.indexOf(T.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},b,n]}var r_e=k.createContext(void 0);function rA(t){const e=k.useContext(r_e);return t||e||"ltr"}var yw="rovingFocusGroup.onEntryFocus",n_e={bubbles:!1,cancelable:!0},nm="RovingFocusGroup",[NE,NU,s_e]=IU(nm),[i_e,Yv]=ai(nm,[s_e]),[o_e,a_e]=i_e(nm),DU=k.forwardRef((t,e)=>p.jsx(NE.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(NE.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(l_e,{...t,ref:e})})}));DU.displayName=nm;var l_e=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=k.useRef(null),f=Sr(e,h),b=rA(i),[m,g]=yl({prop:o,defaultProp:a??null,onChange:l,caller:nm}),[y,v]=k.useState(!1),_=So(c),x=NU(r),w=k.useRef(!1),[S,T]=k.useState(0);return k.useEffect(()=>{const E=h.current;if(E)return E.addEventListener(yw,_),()=>E.removeEventListener(yw,_)},[_]),p.jsx(o_e,{scope:r,orientation:n,dir:b,loop:s,currentTabStopId:m,onItemFocus:k.useCallback(E=>g(E),[g]),onItemShiftTab:k.useCallback(()=>v(!0),[]),onFocusableItemAdd:k.useCallback(()=>T(E=>E+1),[]),onFocusableItemRemove:k.useCallback(()=>T(E=>E-1),[]),children:p.jsx(Ft.div,{tabIndex:y||S===0?-1:0,"data-orientation":n,...d,ref:f,style:{outline:"none",...t.style},onMouseDown:it(t.onMouseDown,()=>{w.current=!0}),onFocus:it(t.onFocus,E=>{const C=!w.current;if(E.target===E.currentTarget&&C&&!y){const A=new CustomEvent(yw,n_e);if(E.currentTarget.dispatchEvent(A),!A.defaultPrevented){const I=x().filter(G=>G.focusable),P=I.find(G=>G.active),D=I.find(G=>G.id===m),F=[P,D,...I].filter(Boolean).map(G=>G.ref.current);MU(F,u)}}w.current=!1}),onBlur:it(t.onBlur,()=>v(!1))})})}),OU="RovingFocusGroupItem",LU=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:o,...a}=t,l=yo(),c=i||l,u=a_e(OU,r),d=u.currentTabStopId===c,h=NU(r),{onFocusableItemAdd:f,onFocusableItemRemove:b,currentTabStopId:m}=u;return k.useEffect(()=>{if(n)return f(),()=>b()},[n,f,b]),p.jsx(NE.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:p.jsx(Ft.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:it(t.onMouseDown,g=>{n?u.onItemFocus(c):g.preventDefault()}),onFocus:it(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:it(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=d_e(g,u.orientation,u.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let _=h().filter(x=>x.focusable).map(x=>x.ref.current);if(y==="last")_.reverse();else if(y==="prev"||y==="next"){y==="prev"&&_.reverse();const x=_.indexOf(g.currentTarget);_=u.loop?h_e(_,x+1):_.slice(x+1)}setTimeout(()=>MU(_))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:m!=null}):o})})});LU.displayName=OU;var c_e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function u_e(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function d_e(t,e,r){const n=u_e(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return c_e[n]}function MU(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function h_e(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var jU=DU,FU=LU,Xv="Tabs",[f_e]=ai(Xv,[Yv]),BU=Yv(),[p_e,nA]=f_e(Xv),$U=k.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=rA(a),[d,h]=yl({prop:n,onChange:s,defaultProp:i??"",caller:Xv});return p.jsx(p_e,{scope:r,baseId:yo(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:l,children:p.jsx(Ft.div,{dir:u,"data-orientation":o,...c,ref:e})})});$U.displayName=Xv;var UU="TabsList",HU=k.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,i=nA(UU,r),o=BU(r);return p.jsx(jU,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:p.jsx(Ft.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});HU.displayName=UU;var zU="TabsTrigger",WU=k.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=t,o=nA(zU,r),a=BU(r),l=qU(o.baseId,n),c=KU(o.baseId,n),u=n===o.value;return p.jsx(FU,{asChild:!0,...a,focusable:!s,active:u,children:p.jsx(Ft.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:it(t.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?o.onValueChange(n):d.preventDefault()}),onKeyDown:it(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(n)}),onFocus:it(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!s&&d&&o.onValueChange(n)})})})});WU.displayName=zU;var VU="TabsContent",GU=k.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...o}=t,a=nA(VU,r),l=qU(a.baseId,n),c=KU(a.baseId,n),u=n===a.value,d=k.useRef(u);return k.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),p.jsx(Jn,{present:s||u,children:({present:h})=>p.jsx(Ft.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&i})})});GU.displayName=VU;function qU(t,e){return`${t}-trigger-${e}`}function KU(t,e){return`${t}-content-${e}`}var m_e=$U,g_e=HU,vw=WU,_w=GU;const WD=k.memo(({className:t,children:e})=>p.jsx("div",{className:ye("flex items-center gap-2 text-bolt-elements-textSecondary border-b border-bolt-elements-borderColor px-4 py-1 min-h-[34px] text-sm",t),style:{background:"#0b0d13"},children:e})),VD=k.memo(({className:t,disabledClassName:e,disabled:r=!1,children:n,onClick:s})=>p.jsx("button",{className:ye("flex items-center shrink-0 gap-1.5 px-1.5 rounded-md py-0.5 text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[ye("opacity-30",e)]:r},t),disabled:r,onClick:i=>{r||s?.(i)},children:n}));var DE=["Enter"," "],b_e=["ArrowDown","PageUp","Home"],YU=["ArrowUp","PageDown","End"],y_e=[...b_e,...YU],v_e={ltr:[...DE,"ArrowRight"],rtl:[...DE,"ArrowLeft"]},__e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},sm="Menu",[fp,x_e,w_e]=IU(sm),[jc,Jv]=ai(sm,[w_e,jd,Yv]),Zv=jd(),XU=Yv(),[S_e,Fc]=jc(sm),[E_e,im]=jc(sm),JU=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:i,modal:o=!0}=t,a=Zv(e),[l,c]=k.useState(null),u=k.useRef(!1),d=So(i),h=rA(s);return k.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),p.jsx(ck,{...a,children:p.jsx(S_e,{scope:e,open:r,onOpenChange:d,content:l,onContentChange:c,children:p.jsx(E_e,{scope:e,onClose:k.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:o,children:n})})})};JU.displayName=sm;var C_e="MenuAnchor",sA=k.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Zv(r);return p.jsx(kv,{...s,...n,ref:e})});sA.displayName=C_e;var iA="MenuPortal",[T_e,ZU]=jc(iA,{forceMount:void 0}),QU=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,i=Fc(iA,e);return p.jsx(T_e,{scope:e,forceMount:r,children:p.jsx(Jn,{present:r||i.open,children:p.jsx(zp,{asChild:!0,container:s,children:n})})})};QU.displayName=iA;var Qs="MenuContent",[k_e,oA]=jc(Qs),eH=k.forwardRef((t,e)=>{const r=ZU(Qs,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Fc(Qs,t.__scopeMenu),o=im(Qs,t.__scopeMenu);return p.jsx(fp.Provider,{scope:t.__scopeMenu,children:p.jsx(Jn,{present:n||i.open,children:p.jsx(fp.Slot,{scope:t.__scopeMenu,children:o.modal?p.jsx(A_e,{...s,ref:e}):p.jsx(R_e,{...s,ref:e})})})})}),A_e=k.forwardRef((t,e)=>{const r=Fc(Qs,t.__scopeMenu),n=k.useRef(null),s=Sr(e,n);return k.useEffect(()=>{const i=n.current;if(i)return CT(i)},[]),p.jsx(aA,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:it(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),R_e=k.forwardRef((t,e)=>{const r=Fc(Qs,t.__scopeMenu);return p.jsx(aA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),P_e=ld("MenuContent.ScrollLock"),aA=k.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:b,...m}=t,g=Fc(Qs,r),y=im(Qs,r),v=Zv(r),_=XU(r),x=x_e(r),[w,S]=k.useState(null),T=k.useRef(null),E=Sr(e,T,g.onContentChange),C=k.useRef(0),A=k.useRef(""),I=k.useRef(0),P=k.useRef(null),D=k.useRef("right"),R=k.useRef(0),F=b?fv:k.Fragment,G=b?{as:P_e,allowPinchZoom:!0}:void 0,z=L=>{const O=A.current+L,$=x().filter(J=>!J.disabled),H=document.activeElement,U=$.find(J=>J.ref.current===H)?.textValue,ee=$.map(J=>J.textValue),X=H_e(ee,O,U),ge=$.find(J=>J.textValue===X)?.ref.current;(function J(j){A.current=j,window.clearTimeout(C.current),j!==""&&(C.current=window.setTimeout(()=>J(""),1e3))})(O),ge&&setTimeout(()=>ge.focus())};k.useEffect(()=>()=>window.clearTimeout(C.current),[]),ET();const K=k.useCallback(L=>D.current===P.current?.side&&W_e(L,P.current?.area),[]);return p.jsx(k_e,{scope:r,searchRef:A,onItemEnter:k.useCallback(L=>{K(L)&&L.preventDefault()},[K]),onItemLeave:k.useCallback(L=>{K(L)||(T.current?.focus(),S(null))},[K]),onTriggerLeave:k.useCallback(L=>{K(L)&&L.preventDefault()},[K]),pointerGraceTimerRef:I,onPointerGraceIntentChange:k.useCallback(L=>{P.current=L},[]),children:p.jsx(F,{...G,children:p.jsx(dv,{asChild:!0,trapped:s,onMountAutoFocus:it(i,L=>{L.preventDefault(),T.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(Hp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:p.jsx(jU,{asChild:!0,..._,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:w,onCurrentTabStopIdChange:S,onEntryFocus:it(l,L=>{y.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(uk,{role:"menu","aria-orientation":"vertical","data-state":gH(g.open),"data-radix-menu-content":"",dir:y.dir,...v,...m,ref:E,style:{outline:"none",...m.style},onKeyDown:it(m.onKeyDown,L=>{const $=L.target.closest("[data-radix-menu-content]")===L.currentTarget,H=L.ctrlKey||L.altKey||L.metaKey,U=L.key.length===1;$&&(L.key==="Tab"&&L.preventDefault(),!H&&U&&z(L.key));const ee=T.current;if(L.target!==ee||!y_e.includes(L.key))return;L.preventDefault();const ge=x().filter(J=>!J.disabled).map(J=>J.ref.current);YU.includes(L.key)&&ge.reverse(),$_e(ge)}),onBlur:it(t.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(C.current),A.current="")}),onPointerMove:it(t.onPointerMove,pp(L=>{const O=L.target,$=R.current!==L.clientX;if(L.currentTarget.contains(O)&&$){const H=L.clientX>R.current?"right":"left";D.current=H,R.current=L.clientX}}))})})})})})})});eH.displayName=Qs;var I_e="MenuGroup",lA=k.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return p.jsx(Ft.div,{role:"group",...n,ref:e})});lA.displayName=I_e;var N_e="MenuLabel",tH=k.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return p.jsx(Ft.div,{...n,ref:e})});tH.displayName=N_e;var yy="MenuItem",GD="menu.itemSelect",Qv=k.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,i=k.useRef(null),o=im(yy,t.__scopeMenu),a=oA(yy,t.__scopeMenu),l=Sr(e,i),c=k.useRef(!1),u=()=>{const d=i.current;if(!r&&d){const h=new CustomEvent(GD,{bubbles:!0,cancelable:!0});d.addEventListener(GD,f=>n?.(f),{once:!0}),X5(d,h),h.defaultPrevented?c.current=!1:o.onClose()}};return p.jsx(rH,{...s,ref:l,disabled:r,onClick:it(t.onClick,u),onPointerDown:d=>{t.onPointerDown?.(d),c.current=!0},onPointerUp:it(t.onPointerUp,d=>{c.current||d.currentTarget?.click()}),onKeyDown:it(t.onKeyDown,d=>{const h=a.searchRef.current!=="";r||h&&d.key===" "||DE.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Qv.displayName=yy;var rH=k.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=t,o=oA(yy,r),a=XU(r),l=k.useRef(null),c=Sr(e,l),[u,d]=k.useState(!1),[h,f]=k.useState("");return k.useEffect(()=>{const b=l.current;b&&f((b.textContent??"").trim())},[i.children]),p.jsx(fp.ItemSlot,{scope:r,disabled:n,textValue:s??h,children:p.jsx(FU,{asChild:!0,...a,focusable:!n,children:p.jsx(Ft.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:c,onPointerMove:it(t.onPointerMove,pp(b=>{n?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:it(t.onPointerLeave,pp(b=>o.onItemLeave(b))),onFocus:it(t.onFocus,()=>d(!0)),onBlur:it(t.onBlur,()=>d(!1))})})})}),D_e="MenuCheckboxItem",nH=k.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return p.jsx(lH,{scope:t.__scopeMenu,checked:r,children:p.jsx(Qv,{role:"menuitemcheckbox","aria-checked":vy(r)?"mixed":r,...s,ref:e,"data-state":uA(r),onSelect:it(s.onSelect,()=>n?.(vy(r)?!0:!r),{checkForDefaultPrevented:!1})})})});nH.displayName=D_e;var sH="MenuRadioGroup",[O_e,L_e]=jc(sH,{value:void 0,onValueChange:()=>{}}),iH=k.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,i=So(n);return p.jsx(O_e,{scope:t.__scopeMenu,value:r,onValueChange:i,children:p.jsx(lA,{...s,ref:e})})});iH.displayName=sH;var oH="MenuRadioItem",aH=k.forwardRef((t,e)=>{const{value:r,...n}=t,s=L_e(oH,t.__scopeMenu),i=r===s.value;return p.jsx(lH,{scope:t.__scopeMenu,checked:i,children:p.jsx(Qv,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":uA(i),onSelect:it(n.onSelect,()=>s.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});aH.displayName=oH;var cA="MenuItemIndicator",[lH,M_e]=jc(cA,{checked:!1}),cH=k.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,i=M_e(cA,r);return p.jsx(Jn,{present:n||vy(i.checked)||i.checked===!0,children:p.jsx(Ft.span,{...s,ref:e,"data-state":uA(i.checked)})})});cH.displayName=cA;var j_e="MenuSeparator",uH=k.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return p.jsx(Ft.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});uH.displayName=j_e;var F_e="MenuArrow",dH=k.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Zv(r);return p.jsx(dk,{...s,...n,ref:e})});dH.displayName=F_e;var B_e="MenuSub",[y8e,hH]=jc(B_e),Uh="MenuSubTrigger",fH=k.forwardRef((t,e)=>{const r=Fc(Uh,t.__scopeMenu),n=im(Uh,t.__scopeMenu),s=hH(Uh,t.__scopeMenu),i=oA(Uh,t.__scopeMenu),o=k.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},u=k.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return k.useEffect(()=>u,[u]),k.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),p.jsx(sA,{asChild:!0,...c,children:p.jsx(rH,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":gH(r.open),...t,ref:Up(e,s.onTriggerChange),onClick:d=>{t.onClick?.(d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:it(t.onPointerMove,pp(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:it(t.onPointerLeave,pp(d=>{u();const h=r.content?.getBoundingClientRect();if(h){const f=r.content?.dataset.side,b=f==="right",m=b?-5:5,g=h[b?"left":"right"],y=h[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+m,y:d.clientY},{x:g,y:h.top},{x:y,y:h.top},{x:y,y:h.bottom},{x:g,y:h.bottom}],side:f}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:it(t.onKeyDown,d=>{const h=i.searchRef.current!=="";t.disabled||h&&d.key===" "||v_e[n.dir].includes(d.key)&&(r.onOpenChange(!0),r.content?.focus(),d.preventDefault())})})})});fH.displayName=Uh;var pH="MenuSubContent",mH=k.forwardRef((t,e)=>{const r=ZU(Qs,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Fc(Qs,t.__scopeMenu),o=im(Qs,t.__scopeMenu),a=hH(pH,t.__scopeMenu),l=k.useRef(null),c=Sr(e,l);return p.jsx(fp.Provider,{scope:t.__scopeMenu,children:p.jsx(Jn,{present:n||i.open,children:p.jsx(fp.Slot,{scope:t.__scopeMenu,children:p.jsx(aA,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{o.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:it(t.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:it(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:it(t.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),h=__e[o.dir].includes(u.key);d&&h&&(i.onOpenChange(!1),a.trigger?.focus(),u.preventDefault())})})})})})});mH.displayName=pH;function gH(t){return t?"open":"closed"}function vy(t){return t==="indeterminate"}function uA(t){return vy(t)?"indeterminate":t?"checked":"unchecked"}function $_e(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function U_e(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function H_e(t,e,r){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=U_e(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==r));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function z_e(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,d=l.x,h=l.y;u>n!=h>n&&r<(d-c)*(n-u)/(h-u)+c&&(s=!s)}return s}function W_e(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return z_e(r,e)}function pp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var bH=JU,yH=sA,vH=QU,_H=eH,xH=lA,wH=tH,SH=Qv,EH=nH,CH=iH,TH=aH,kH=cH,AH=uH,RH=dH,PH=fH,IH=mH,e_="DropdownMenu",[V_e]=ai(e_,[Jv]),Zn=Jv(),[G_e,NH]=V_e(e_),DH=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=Zn(e),c=k.useRef(null),[u,d]=yl({prop:s,defaultProp:i??!1,onChange:o,caller:e_});return p.jsx(G_e,{scope:e,triggerId:yo(),triggerRef:c,contentId:yo(),open:u,onOpenChange:d,onOpenToggle:k.useCallback(()=>d(h=>!h),[d]),modal:a,children:p.jsx(bH,{...l,open:u,onOpenChange:d,dir:n,modal:a,children:r})})};DH.displayName=e_;var OH="DropdownMenuTrigger",LH=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,i=NH(OH,r),o=Zn(r);return p.jsx(yH,{asChild:!0,...o,children:p.jsx(Ft.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Up(e,i.triggerRef),onPointerDown:it(t.onPointerDown,a=>{!n&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:it(t.onKeyDown,a=>{n||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});LH.displayName=OH;var q_e="DropdownMenuPortal",MH=t=>{const{__scopeDropdownMenu:e,...r}=t,n=Zn(e);return p.jsx(vH,{...n,...r})};MH.displayName=q_e;var jH="DropdownMenuContent",FH=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=NH(jH,r),i=Zn(r),o=k.useRef(!1);return p.jsx(_H,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:e,onCloseAutoFocus:it(t.onCloseAutoFocus,a=>{o.current||s.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:it(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FH.displayName=jH;var K_e="DropdownMenuGroup",Y_e=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Zn(r);return p.jsx(xH,{...s,...n,ref:e})});Y_e.displayName=K_e;var X_e="DropdownMenuLabel",J_e=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Zn(r);return p.jsx(wH,{...s,...n,ref:e})});J_e.displayName=X_e;var Z_e="DropdownMenuItem",BH=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Zn(r);return p.jsx(SH,{...s,...n,ref:e})});BH.displayName=Z_e;var Q_e="DropdownMenuCheckboxItem",exe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Zn(r);return p.jsx(EH,{...s,...n,ref:e})});exe.displayName=Q_e;var txe="DropdownMenuRadioGroup",rxe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Zn(r);return p.jsx(CH,{...s,...n,ref:e})});rxe.displayName=txe;var nxe="DropdownMenuRadioItem",sxe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Zn(r);return p.jsx(TH,{...s,...n,ref:e})});sxe.displayName=nxe;var ixe="DropdownMenuItemIndicator",oxe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Zn(r);return p.jsx(kH,{...s,...n,ref:e})});oxe.displayName=ixe;var axe="DropdownMenuSeparator",lxe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Zn(r);return p.jsx(AH,{...s,...n,ref:e})});lxe.displayName=axe;var cxe="DropdownMenuArrow",$H=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Zn(r);return p.jsx(RH,{...s,...n,ref:e})});$H.displayName=cxe;var uxe="DropdownMenuSubTrigger",dxe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Zn(r);return p.jsx(PH,{...s,...n,ref:e})});dxe.displayName=uxe;var hxe="DropdownMenuSubContent",fxe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Zn(r);return p.jsx(IH,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fxe.displayName=hxe;var t_=DH,r_=LH,n_=MH,s_=FH,Ju=BH,pxe=$H,dA="ContextMenu",[mxe]=ai(dA,[Jv]),Qn=Jv(),[gxe,UH]=mxe(dA),HH=t=>{const{__scopeContextMenu:e,children:r,onOpenChange:n,dir:s,modal:i=!0}=t,[o,a]=k.useState(!1),l=Qn(e),c=So(n),u=k.useCallback(d=>{a(d),c(d)},[c]);return p.jsx(gxe,{scope:e,open:o,onOpenChange:u,modal:i,children:p.jsx(bH,{...l,dir:s,open:o,onOpenChange:u,modal:i,children:r})})};HH.displayName=dA;var zH="ContextMenuTrigger",WH=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,disabled:n=!1,...s}=t,i=UH(zH,r),o=Qn(r),a=k.useRef({x:0,y:0}),l=k.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),c=k.useRef(0),u=k.useCallback(()=>window.clearTimeout(c.current),[]),d=h=>{a.current={x:h.clientX,y:h.clientY},i.onOpenChange(!0)};return k.useEffect(()=>u,[u]),k.useEffect(()=>void(n&&u()),[n,u]),p.jsxs(p.Fragment,{children:[p.jsx(yH,{...o,virtualRef:l}),p.jsx(Ft.span,{"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,...s,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:n?t.onContextMenu:it(t.onContextMenu,h=>{u(),d(h),h.preventDefault()}),onPointerDown:n?t.onPointerDown:it(t.onPointerDown,Gg(h=>{u(),c.current=window.setTimeout(()=>d(h),700)})),onPointerMove:n?t.onPointerMove:it(t.onPointerMove,Gg(u)),onPointerCancel:n?t.onPointerCancel:it(t.onPointerCancel,Gg(u)),onPointerUp:n?t.onPointerUp:it(t.onPointerUp,Gg(u))})]})});WH.displayName=zH;var bxe="ContextMenuPortal",VH=t=>{const{__scopeContextMenu:e,...r}=t,n=Qn(e);return p.jsx(vH,{...n,...r})};VH.displayName=bxe;var GH="ContextMenuContent",qH=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=UH(GH,r),i=Qn(r),o=k.useRef(!1);return p.jsx(_H,{...i,...n,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),!a.defaultPrevented&&o.current&&a.preventDefault(),o.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),!a.defaultPrevented&&!s.modal&&(o.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qH.displayName=GH;var yxe="ContextMenuGroup",KH=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=Qn(r);return p.jsx(xH,{...s,...n,ref:e})});KH.displayName=yxe;var vxe="ContextMenuLabel",_xe=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=Qn(r);return p.jsx(wH,{...s,...n,ref:e})});_xe.displayName=vxe;var xxe="ContextMenuItem",YH=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=Qn(r);return p.jsx(SH,{...s,...n,ref:e})});YH.displayName=xxe;var wxe="ContextMenuCheckboxItem",Sxe=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=Qn(r);return p.jsx(EH,{...s,...n,ref:e})});Sxe.displayName=wxe;var Exe="ContextMenuRadioGroup",Cxe=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=Qn(r);return p.jsx(CH,{...s,...n,ref:e})});Cxe.displayName=Exe;var Txe="ContextMenuRadioItem",kxe=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=Qn(r);return p.jsx(TH,{...s,...n,ref:e})});kxe.displayName=Txe;var Axe="ContextMenuItemIndicator",Rxe=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=Qn(r);return p.jsx(kH,{...s,...n,ref:e})});Rxe.displayName=Axe;var Pxe="ContextMenuSeparator",Ixe=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=Qn(r);return p.jsx(AH,{...s,...n,ref:e})});Ixe.displayName=Pxe;var Nxe="ContextMenuArrow",Dxe=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=Qn(r);return p.jsx(RH,{...s,...n,ref:e})});Dxe.displayName=Nxe;var Oxe="ContextMenuSubTrigger",Lxe=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=Qn(r);return p.jsx(PH,{...s,...n,ref:e})});Lxe.displayName=Oxe;var Mxe="ContextMenuSubContent",jxe=k.forwardRef((t,e)=>{const{__scopeContextMenu:r,...n}=t,s=Qn(r);return p.jsx(IH,{...s,...n,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jxe.displayName=Mxe;function Gg(t){return e=>e.pointerType!=="mouse"?t(e):void 0}var Fxe=HH,Bxe=WH,$xe=VH,Uxe=qH,qg=KH,Hxe=YH;const Bo=Qt("FileTree"),XH=8,zxe=[/\/node_modules\//,/\/\.next/,/\/\.astro/],JH=k.memo(({files:t={},onFileSelect:e,selectedFile:r,rootFolder:n,hideRoot:s=!1,collapsed:i=!1,allowFolderSelection:o=!1,hiddenFiles:a,className:l,unsavedFiles:c,fileHistory:u={}})=>{const{t:d}=Ms();Id.trace("FileTree");const h=k.useMemo(()=>[...zxe,...a??[]],[a]),f=k.useMemo(()=>Gxe(t,n,s,h),[t,n,s,h]),[b,m]=k.useState(()=>i?new Set(f.filter(x=>x.kind==="folder").map(x=>x.fullPath)):new Set);k.useEffect(()=>{if(i){m(new Set(f.filter(x=>x.kind==="folder").map(x=>x.fullPath)));return}m(x=>{const w=new Set;for(const S of f)S.kind==="folder"&&x.has(S.fullPath)&&w.add(S.fullPath);return w})},[f,i]);const g=k.useMemo(()=>{const x=[];let w=Number.MAX_SAFE_INTEGER;for(const S of f){const T=S.depth;w===T&&(w=Number.MAX_SAFE_INTEGER),b.has(S.fullPath)&&(w=Math.min(w,T)),!(w<T)&&x.push(S)}return x},[f,b]),y=x=>{m(w=>{const S=new Set(w);return S.has(x)?S.delete(x):S.add(x),S})},v=x=>{try{navigator.clipboard.writeText(x.fullPath)}catch(w){Bo.error(w)}},_=x=>{try{navigator.clipboard.writeText(x.fullPath.substring((n||"").length))}catch(w){Bo.error(w)}};return p.jsx("div",{className:ye("text-sm",l,"overflow-y-auto modern-scrollbar"),children:g.map(x=>{switch(x.kind){case"file":return p.jsx(Vxe,{selected:r===x.fullPath,file:x,unsavedChanges:c instanceof Set&&c.has(x.fullPath),fileHistory:u,onCopyPath:()=>{v(x)},onCopyRelativePath:()=>{_(x)},onClick:()=>{e?.(x.fullPath)},t:d},x.id);case"folder":return p.jsx(Wxe,{folder:x,selected:o&&r===x.fullPath,collapsed:b.has(x.fullPath),onCopyPath:()=>{v(x)},onCopyRelativePath:()=>{_(x)},onClick:()=>{y(x.fullPath)},t:d},x.id);default:return}})})});function Oo({onSelect:t,children:e}){return p.jsxs(Hxe,{onSelect:t,className:"flex items-center gap-2 px-2 py-1.5 outline-0 text-sm text-bolt-elements-textPrimary cursor-pointer ws-nowrap text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive hover:bg-bolt-elements-item-backgroundActive rounded-md",children:[p.jsx("span",{className:"size-4 shrink-0"}),p.jsx("span",{children:e})]})}function qD({depth:t,placeholder:e,initialValue:r="",onSubmit:n,onCancel:s}){const i=k.useRef(null);k.useEffect(()=>{const a=setTimeout(()=>{i.current&&(i.current.focus(),r&&(i.current.value=r,i.current.select()))},50);return()=>clearTimeout(a)},[r]);const o=a=>{if(a.key==="Enter"){const l=i.current?.value.trim();l&&n(l)}else a.key==="Escape"&&s()};return p.jsxs("div",{className:"flex items-center w-full px-2 bg-bolt-elements-background-depth-4 border border-bolt-elements-item-contentAccent py-0.5 text-bolt-elements-textPrimary",style:{paddingLeft:`${6+t*XH}px`},children:[p.jsx("div",{className:"scale-120 shrink-0 i-ph:file-plus text-bolt-elements-textTertiary"}),p.jsx("input",{ref:i,type:"text",className:"ml-2 flex-1 bg-transparent border-none outline-none py-0.5 text-sm text-bolt-elements-textPrimary placeholder:text-bolt-elements-textTertiary min-w-0",placeholder:e,onKeyDown:o,onBlur:()=>{setTimeout(()=>{document.activeElement!==i.current&&s()},100)}})]})}function ZH({onCopyPath:t,onCopyRelativePath:e,fullPath:r,children:n,t:s}){const[i,o]=k.useState(!1),[a,l]=k.useState(!1),[c,u]=k.useState(!1),d=k.useMemo(()=>r.split("/").length,[r]),h=k.useMemo(()=>$r.basename(r),[r]),f=k.useMemo(()=>{const A=Pe.files.get()[r];return!A||A.type==="folder"},[r]),b=k.useMemo(()=>f?r:$r.dirname(r),[r,f]),m=k.useCallback(C=>{C.preventDefault(),C.stopPropagation(),u(!0)},[]),g=k.useCallback(C=>{C.preventDefault(),C.stopPropagation(),u(!1)},[]),y=k.useCallback(async C=>{C.preventDefault(),C.stopPropagation();const I=Array.from(C.dataTransfer.items).filter(P=>P.kind==="file");for(const P of I){const D=P.getAsFile();if(D)try{const R=$r.join(r,D.name),F=await D.arrayBuffer(),G=new Uint8Array(F);await Pe.createFile(R,G)?Ie.success(`File ${D.name} uploaded successfully`):Ie.error(`Failed to upload file ${D.name}`)}catch(R){Ie.error(`Error uploading ${D.name}`),Bo.error(R)}}u(!1)},[r]),v=async C=>{const A=$r.join(b,C);await Pe.createFile(A,"")?Ie.success(s("workbench.file_created","File created successfully")):Ie.error(s("workbench.file_create_failed","Failed to create file")),o(!1)},_=async C=>{const A=$r.join(b,C);await Pe.createFolder(A)?Ie.success(s("workbench.folder_created","Folder created successfully")):Ie.error(s("workbench.folder_create_failed","Failed to create folder")),l(!1)},x=async()=>{try{if(!confirm(`Are you sure you want to delete ${f?"folder":"file"}: ${h}?`))return;let C;f?C=await Pe.deleteFolder(r):C=await Pe.deleteFile(r),C?Ie.success(`${f?"Folder":"File"} deleted successfully`):Ie.error(`Failed to delete ${f?"folder":"file"}`)}catch(C){Ie.error(`Error deleting ${f?"folder":"file"}`),Bo.error(C)}},w=()=>{try{if(f)return;Pe.lockFile(r)?Ie.success("File locked successfully"):Ie.error("Failed to lock file")}catch(C){Ie.error("Error locking file"),Bo.error(C)}},S=()=>{try{if(f)return;Pe.unlockFile(r)?Ie.success("File unlocked successfully"):Ie.error("Failed to unlock file")}catch(C){Ie.error("Error unlocking file"),Bo.error(C)}},T=()=>{try{if(!f)return;Pe.lockFolder(r)?Ie.success("Folder locked successfully"):Ie.error("Failed to lock folder")}catch(C){Ie.error("Error locking folder"),Bo.error(C)}},E=()=>{try{if(!f)return;Pe.unlockFolder(r)?Ie.success("Folder unlocked successfully"):Ie.error("Failed to unlock folder")}catch(C){Ie.error("Error unlocking folder"),Bo.error(C)}};return p.jsxs(p.Fragment,{children:[p.jsxs(Fxe,{children:[p.jsx(Bxe,{children:p.jsx("div",{onDragOver:m,onDragLeave:g,onDrop:y,className:ye("relative",{"bg-bolt-elements-background-depth-2 border border-dashed border-bolt-elements-item-contentAccent rounded-md":c}),children:n})}),p.jsx($xe,{children:p.jsxs(Uxe,{style:{zIndex:998},className:"border border-bolt-elements-borderColor rounded-md z-context-menu bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-2 data-[state=open]:animate-in animate-duration-100 data-[state=open]:fade-in-0 data-[state=open]:zoom-in-98 w-56",children:[p.jsxs(qg,{className:"p-1 border-b-px border-solid border-bolt-elements-borderColor",children:[p.jsx(Oo,{onSelect:()=>o(!0),children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:file-plus"}),s("workbench.new_file","New File")]})}),p.jsx(Oo,{onSelect:()=>l(!0),children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:folder-plus"}),s("workbench.new_folder","New Folder")]})})]}),p.jsxs(qg,{className:"p-1",children:[p.jsx(Oo,{onSelect:t,children:s("workbench.copy_path","Copy path")}),p.jsx(Oo,{onSelect:e,children:s("workbench.copy_relative_path","Copy relative path")})]}),p.jsx(qg,{className:"p-1 border-t-px border-solid border-bolt-elements-borderColor",children:f?p.jsxs(p.Fragment,{children:[p.jsx(Oo,{onSelect:T,children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:lock-simple"}),s("workbench.lock_folder","Lock Folder")]})}),p.jsx(Oo,{onSelect:E,children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:lock-key-open"}),s("workbench.unlock_folder","Unlock Folder")]})})]}):p.jsxs(p.Fragment,{children:[p.jsx(Oo,{onSelect:w,children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:lock-simple"}),s("workbench.lock_file","Lock File")]})}),p.jsx(Oo,{onSelect:S,children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:lock-key-open"}),s("workbench.unlock_file","Unlock File")]})})]})}),p.jsx(qg,{className:"p-1 border-t-px border-solid border-bolt-elements-borderColor",children:p.jsx(Oo,{onSelect:x,children:p.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[p.jsx("div",{className:"i-ph:trash"}),s("workbench.delete_item","Delete {{item}}",{item:f?s("common.folder","Folder"):s("common.file","File")})]})})})]})})]}),i&&p.jsx(qD,{depth:d,placeholder:"Enter file name...",onSubmit:v,onCancel:()=>o(!1)}),a&&p.jsx(qD,{depth:d,placeholder:"Enter folder name...",onSubmit:_,onCancel:()=>l(!1)})]})}function Wxe({folder:t,collapsed:e,selected:r=!1,onCopyPath:n,onCopyRelativePath:s,onClick:i,t:o}){const{isLocked:a}=Pe.isFolderLocked(t.fullPath);return p.jsx(ZH,{onCopyPath:n,onCopyRelativePath:s,fullPath:t.fullPath,t:o,children:p.jsx(QH,{className:ye("group",{"bg-transparent text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive hover:bg-bolt-elements-item-backgroundActive":!r,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":r}),depth:t.depth,iconClasses:ye({"i-ph:caret-right scale-98":e,"i-ph:caret-down scale-98":!e}),onClick:i,children:p.jsxs("div",{className:"flex items-center w-full",children:[p.jsx("div",{className:"flex-1 truncate pr-2",children:t.name}),a&&p.jsx("span",{className:ye("shrink-0","i-ph:lock-simple scale-80 text-red-500"),title:"Folder is locked"})]})})})}function Vxe({file:t,onClick:e,onCopyPath:r,onCopyRelativePath:n,selected:s,unsavedChanges:i=!1,fileHistory:o={},t:a}){const{depth:l,name:c,fullPath:u}=t,{locked:d}=Pe.isFileLocked(u),h=o[u],{additions:f,deletions:b}=k.useMemo(()=>{if(!h?.originalContent)return{additions:0,deletions:0};const g=h.originalContent.replace(/\r\n/g,`
`),y=h.versions[h.versions.length-1]?.content.replace(/\r\n/g,`
`)||"";return g===y?{additions:0,deletions:0}:GT(g,y,{newlineIsToken:!1,ignoreWhitespace:!0,ignoreCase:!1}).reduce((_,x)=>(x.added&&(_.additions+=x.value.split(`
`).length),x.removed&&(_.deletions+=x.value.split(`
`).length),_),{additions:0,deletions:0})},[h]),m=f>0||b>0;return p.jsx(ZH,{onCopyPath:r,onCopyRelativePath:n,fullPath:u,t:a,children:p.jsx(QH,{className:ye("group",{"bg-transparent hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-item-contentDefault":!s,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":s}),depth:l,iconClasses:ye("i-ph:file-duotone scale-98",{"group-hover:text-bolt-elements-item-contentActive":!s}),onClick:e,children:p.jsxs("div",{className:ye("flex items-center",{"group-hover:text-bolt-elements-item-contentActive":!s}),children:[p.jsx("div",{className:"flex-1 truncate pr-2",children:c}),p.jsxs("div",{className:"flex items-center gap-1",children:[m&&p.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[f>0&&p.jsxs("span",{className:"text-emerald-500",children:["+",f]}),b>0&&p.jsxs("span",{className:"text-red-500",children:["-",b]})]}),d&&p.jsx("span",{className:ye("shrink-0","i-ph:lock-simple scale-80 text-red-500"),title:"File is locked"}),i&&p.jsx("span",{className:"i-ph:circle-fill scale-68 shrink-0 text-orange-500"})]})]})})})}function QH({depth:t,iconClasses:e,onClick:r,className:n,children:s}){return p.jsxs("button",{className:ye("flex items-center gap-1.5 w-full pr-2 border-2 border-transparent text-faded py-0.5",n),style:{paddingLeft:`${6+t*XH}px`},onClick:()=>r?.(),children:[p.jsx("div",{className:ye("scale-120 shrink-0",e)}),p.jsx("div",{className:"truncate w-full text-left",children:s})]})}function Gxe(t,e="/",r,n){const s=new Set,i=[];let o=0;e==="/"&&!r&&(o=1,i.push({kind:"folder",name:"/",depth:0,id:0,fullPath:"/"}));for(const[a,l]of Object.entries(t)){const c=a.split("/").filter(b=>b),u=c.at(-1);if(!u||qxe(a,u,n))continue;let d="",h=0,f=0;for(;h<c.length;){const b=c[h],m=d+=`/${b}`;if(!m.startsWith(e)||r&&m===e){h++;continue}h===c.length-1&&l?.type==="file"?i.push({kind:"file",id:i.length,name:b,fullPath:m,depth:f+o}):s.has(m)||(s.add(m),i.push({kind:"folder",id:i.length,name:b,fullPath:m,depth:f+o})),h++,f++}}return Kxe(e,i,r)}function qxe(t,e,r){return r.some(n=>typeof n=="string"?e===n:n.test(t))}function Kxe(t,e,r){Bo.trace("sortFileList");const n=new Map,s=new Map;e.sort((a,l)=>Yxe(a,l));for(const a of e){n.set(a.fullPath,a);const l=a.fullPath.slice(0,a.fullPath.lastIndexOf("/"));l!==t.slice(0,t.lastIndexOf("/"))&&(s.has(l)||s.set(l,[]),s.get(l)?.push(a))}const i=[],o=a=>{const l=n.get(a);l&&i.push(l);const c=s.get(a);if(c)for(const u of c)u.kind==="folder"?o(u.fullPath):i.push(u)};if(r){const a=s.get(t)||[];for(const l of a)o(l.fullPath)}else o(t);return i}function Yxe(t,e){return t.kind!==e.kind?t.kind==="folder"?-1:1:t.name.localeCompare(e.name,void 0,{numeric:!0,sensitivity:"base"})}const Xxe=new RegExp(`^${us.split("/").slice(0,-1).join("/").replaceAll("/","\\/")}/`),Jxe={open:{y:0,opacity:1,transition:{duration:.15,ease:Dn}},close:{y:6,opacity:0,transition:{duration:.15,ease:Dn}}},Zxe=k.memo(({files:t,pathSegments:e=[],onFileSelect:r})=>{Id.trace("FileBreadcrumb");const[n,s]=k.useState(null),i=k.useRef(null),o=k.useRef([]),a=l=>{s(c=>c===l?null:l)};return k.useEffect(()=>{const l=c=>{n!==null&&!i.current?.contains(c.target)&&!o.current.some(u=>u?.contains(c.target))&&s(null)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[n]),t===void 0||e.length===0?null:p.jsx("div",{className:"flex",children:e.map((l,c)=>{const u=c===e.length-1,d=e.slice(0,c).join("/");if(!Xxe.test(d))return null;const h=n===c;return p.jsx("div",{className:"relative flex items-center",children:p.jsxs(t_,{open:h,modal:!1,children:[p.jsx(r_,{asChild:!0,children:p.jsxs("span",{ref:f=>{o.current[c]=f},className:ye("flex items-center gap-1.5 cursor-pointer shrink-0",{"text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!h,"text-bolt-elements-textPrimary underline":h,"pr-4":u}),onClick:()=>a(c),children:[u&&p.jsx("div",{className:"i-ph:file-duotone"}),l]})}),c>0&&!u&&p.jsx("span",{className:"i-ph:caret-right inline-block mx-1"}),p.jsx(Nr,{children:h&&p.jsx(n_,{children:p.jsx(s_,{className:"z-file-tree-breadcrumb",asChild:!0,align:"start",side:"bottom",avoidCollisions:!1,children:p.jsxs(rt.div,{ref:i,initial:"close",animate:"open",exit:"close",variants:Jxe,children:[p.jsx("div",{className:"rounded-lg overflow-hidden",children:p.jsx("div",{className:"max-h-[50vh] min-w-[300px] overflow-scroll bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor shadow-sm rounded-lg",children:p.jsx(JH,{files:t,hideRoot:!0,rootFolder:d,collapsed:!0,allowFolderSelection:!0,selectedFile:`${d}/${l}`,onFileSelect:f=>{s(null),r?.(f)}})})}),p.jsx(pxe,{className:"fill-bolt-elements-borderColor"})]})})})})]})},c)})})});var e9={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(self,()=>(()=>{var r={};return(()=>{var n=r;Object.defineProperty(n,"__esModule",{value:!0}),n.FitAddon=void 0,n.FitAddon=class{activate(s){this._terminal=s}dispose(){}fit(){const s=this.proposeDimensions();if(!s||!this._terminal||isNaN(s.cols)||isNaN(s.rows))return;const i=this._terminal._core;this._terminal.rows===s.rows&&this._terminal.cols===s.cols||(i._renderService.clear(),this._terminal.resize(s.cols,s.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const s=this._terminal._core,i=s._renderService.dimensions;if(i.css.cell.width===0||i.css.cell.height===0)return;const o=this._terminal.options.scrollback===0?0:s.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(a.getPropertyValue("height")),c=Math.max(0,parseInt(a.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),d=l-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),h=c-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(h/i.css.cell.width)),rows:Math.max(1,Math.floor(d/i.css.cell.height))}}}})(),r})())})(e9);var Qxe=e9.exports,t9={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(self,()=>(()=>{var r={6:(o,a)=>{function l(u){try{const d=new URL(u),h=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return u.toLocaleLowerCase().startsWith(h.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(a,"__esModule",{value:!0}),a.LinkComputer=a.WebLinkProvider=void 0,a.WebLinkProvider=class{constructor(u,d,h,f={}){this._terminal=u,this._regex=d,this._handler=h,this._options=f}provideLinks(u,d){const h=c.computeLink(u,this._regex,this._terminal,this._handler);d(this._addCallbacks(h))}_addCallbacks(u){return u.map(d=>(d.leave=this._options.leave,d.hover=(h,f)=>{if(this._options.hover){const{range:b}=d;this._options.hover(h,f,b)}},d))}};class c{static computeLink(d,h,f,b){const m=new RegExp(h.source,(h.flags||"")+"g"),[g,y]=c._getWindowedLineStrings(d-1,f),v=g.join("");let _;const x=[];for(;_=m.exec(v);){const w=_[0];if(!l(w))continue;const[S,T]=c._mapStrIdx(f,y,0,_.index),[E,C]=c._mapStrIdx(f,S,T,w.length);if(S===-1||T===-1||E===-1||C===-1)continue;const A={start:{x:T+1,y:S+1},end:{x:C,y:E+1}};x.push({range:A,text:w,activate:b})}return x}static _getWindowedLineStrings(d,h){let f,b=d,m=d,g=0,y="";const v=[];if(f=h.buffer.active.getLine(d)){const _=f.translateToString(!0);if(f.isWrapped&&_[0]!==" "){for(g=0;(f=h.buffer.active.getLine(--b))&&g<2048&&(y=f.translateToString(!0),g+=y.length,v.push(y),f.isWrapped&&y.indexOf(" ")===-1););v.reverse()}for(v.push(_),g=0;(f=h.buffer.active.getLine(++m))&&f.isWrapped&&g<2048&&(y=f.translateToString(!0),g+=y.length,v.push(y),y.indexOf(" ")===-1););}return[v,b]}static _mapStrIdx(d,h,f,b){const m=d.buffer.active,g=m.getNullCell();let y=f;for(;b;){const v=m.getLine(h);if(!v)return[-1,-1];for(let _=y;_<v.length;++_){v.getCell(_,g);const x=g.getChars();if(g.getWidth()&&(b-=x.length||1,_===v.length-1&&x==="")){const w=m.getLine(h+1);w&&w.isWrapped&&(w.getCell(0,g),g.getWidth()===2&&(b+=1))}if(b<0)return[h,_]}h++,y=0}return[h,y]}}a.LinkComputer=c}},n={};function s(o){var a=n[o];if(a!==void 0)return a.exports;var l=n[o]={exports:{}};return r[o](l,l.exports,s),l.exports}var i={};return(()=>{var o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.WebLinksAddon=void 0;const a=s(6),l=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function c(u,d){const h=window.open();if(h){try{h.opener=null}catch{}h.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}o.WebLinksAddon=class{constructor(u=c,d={}){this._handler=u,this._options=d}activate(u){this._terminal=u;const d=this._options,h=d.urlRegex||l;this._linkProvider=this._terminal.registerLinkProvider(new a.WebLinkProvider(this._terminal,h,this._handler,d))}dispose(){this._linkProvider?.dispose()}}})(),i})())})(t9);var ewe=t9.exports,r9={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(globalThis,()=>(()=>{var r={4567:function(o,a,l){var c=this&&this.__decorate||function(v,_,x,w){var S,T=arguments.length,E=T<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,x):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,_,x,w);else for(var C=v.length-1;C>=0;C--)(S=v[C])&&(E=(T<3?S(E):T>3?S(_,x,E):S(_,x))||E);return T>3&&E&&Object.defineProperty(_,x,E),E},u=this&&this.__param||function(v,_){return function(x,w){_(x,w,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;const d=l(9042),h=l(9924),f=l(844),b=l(4725),m=l(2585),g=l(3656);let y=a.AccessibilityManager=class extends f.Disposable{constructor(v,_,x,w){super(),this._terminal=v,this._coreBrowserService=x,this._renderService=w,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new h.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,g.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,f.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(v){for(let _=0;_<v;_++)this._handleChar(" ")}_handleChar(v){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==v&&(this._charsToAnnounce+=v):this._charsToAnnounce+=v,v===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(v){this._clearLiveRegion(),/\p{Control}/u.test(v)||this._charsToConsume.push(v)}_refreshRows(v,_){this._liveRegionDebouncer.refresh(v,_,this._terminal.rows)}_renderRows(v,_){const x=this._terminal.buffer,w=x.lines.length.toString();for(let S=v;S<=_;S++){const T=x.lines.get(x.ydisp+S),E=[],C=T?.translateToString(!0,void 0,void 0,E)||"",A=(x.ydisp+S+1).toString(),I=this._rowElements[S];I&&(C.length===0?(I.innerText="",this._rowColumns.set(I,[0,1])):(I.textContent=C,this._rowColumns.set(I,E)),I.setAttribute("aria-posinset",A),I.setAttribute("aria-setsize",w))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(v,_){const x=v.target,w=this._rowElements[_===0?1:this._rowElements.length-2];if(x.getAttribute("aria-posinset")===(_===0?"1":`${this._terminal.buffer.lines.length}`)||v.relatedTarget!==w)return;let S,T;if(_===0?(S=x,T=this._rowElements.pop(),this._rowContainer.removeChild(T)):(S=this._rowElements.shift(),T=x,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),T.removeEventListener("focus",this._bottomBoundaryFocusListener),_===0){const E=this._createAccessibilityTreeNode();this._rowElements.unshift(E),this._rowContainer.insertAdjacentElement("afterbegin",E)}else{const E=this._createAccessibilityTreeNode();this._rowElements.push(E),this._rowContainer.appendChild(E)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(_===0?-1:1),this._rowElements[_===0?1:this._rowElements.length-2].focus(),v.preventDefault(),v.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const v=document.getSelection();if(!v)return;if(v.isCollapsed)return void(this._rowContainer.contains(v.anchorNode)&&this._terminal.clearSelection());if(!v.anchorNode||!v.focusNode)return void console.error("anchorNode and/or focusNode are null");let _={node:v.anchorNode,offset:v.anchorOffset},x={node:v.focusNode,offset:v.focusOffset};if((_.node.compareDocumentPosition(x.node)&Node.DOCUMENT_POSITION_PRECEDING||_.node===x.node&&_.offset>x.offset)&&([_,x]=[x,_]),_.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(_={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(_.node))return;const w=this._rowElements.slice(-1)[0];if(x.node.compareDocumentPosition(w)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(x={node:w,offset:w.textContent?.length??0}),!this._rowContainer.contains(x.node))return;const S=({node:C,offset:A})=>{const I=C instanceof Text?C.parentNode:C;let P=parseInt(I?.getAttribute("aria-posinset"),10)-1;if(isNaN(P))return console.warn("row is invalid. Race condition?"),null;const D=this._rowColumns.get(I);if(!D)return console.warn("columns is null. Race condition?"),null;let R=A<D.length?D[A]:D.slice(-1)[0]+1;return R>=this._terminal.cols&&(++P,R=0),{row:P,column:R}},T=S(_),E=S(x);if(T&&E){if(T.row>E.row||T.row===E.row&&T.column>=E.column)throw new Error("invalid range");this._terminal.select(T.column,T.row,(E.row-T.row)*this._terminal.cols-T.column+E.column)}}_handleResize(v){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let _=this._rowContainer.children.length;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);for(;this._rowElements.length>v;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const v=this._coreBrowserService.mainDocument.createElement("div");return v.setAttribute("role","listitem"),v.tabIndex=-1,this._refreshRowDimensions(v),v}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let v=0;v<this._terminal.rows;v++)this._refreshRowDimensions(this._rowElements[v])}}_refreshRowDimensions(v){v.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=y=c([u(1,m.IInstantiationService),u(2,b.ICoreBrowserService),u(3,b.IRenderService)],y)},3614:(o,a)=>{function l(h){return h.replace(/\r?\n/g,"\r")}function c(h,f){return f?"\x1B[200~"+h+"\x1B[201~":h}function u(h,f,b,m){h=c(h=l(h),b.decPrivateModes.bracketedPasteMode&&m.rawOptions.ignoreBracketedPasteMode!==!0),b.triggerDataEvent(h,!0),f.value=""}function d(h,f,b){const m=b.getBoundingClientRect(),g=h.clientX-m.left-10,y=h.clientY-m.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${g}px`,f.style.top=`${y}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=l,a.bracketTextForPaste=c,a.copyHandler=function(h,f){h.clipboardData&&h.clipboardData.setData("text/plain",f.selectionText),h.preventDefault()},a.handlePasteEvent=function(h,f,b,m){h.stopPropagation(),h.clipboardData&&u(h.clipboardData.getData("text/plain"),f,b,m)},a.paste=u,a.moveTextAreaUnderMouseCursor=d,a.rightClickHandler=function(h,f,b,m,g){d(h,f,b),g&&m.rightClickSelect(h),f.value=m.selectionText,f.select()}},7239:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;const c=l(1505);a.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(u,d,h){this._css.set(u,d,h)}getCss(u,d){return this._css.get(u,d)}setColor(u,d,h){this._color.set(u,d,h)}getColor(u,d){return this._color.get(u,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(l,c,u,d){l.addEventListener(c,u,d);let h=!1;return{dispose:()=>{h||(h=!0,l.removeEventListener(c,u,d))}}}},3551:function(o,a,l){var c=this&&this.__decorate||function(y,v,_,x){var w,S=arguments.length,T=S<3?v:x===null?x=Object.getOwnPropertyDescriptor(v,_):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(y,v,_,x);else for(var E=y.length-1;E>=0;E--)(w=y[E])&&(T=(S<3?w(T):S>3?w(v,_,T):w(v,_))||T);return S>3&&T&&Object.defineProperty(v,_,T),T},u=this&&this.__param||function(y,v){return function(_,x){v(_,x,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier=void 0;const d=l(3656),h=l(8460),f=l(844),b=l(2585),m=l(4725);let g=a.Linkifier=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(y,v,_,x,w){super(),this._element=y,this._mouseService=v,this._renderService=_,this._bufferService=x,this._linkProviderService=w,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new h.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new h.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(y){this._lastMouseEvent=y;const v=this._positionFromMouseEvent(y,this._element,this._mouseService);if(!v)return;this._isMouseOut=!1;const _=y.composedPath();for(let x=0;x<_.length;x++){const w=_[x];if(w.classList.contains("xterm"))break;if(w.classList.contains("xterm-hover"))return}this._lastBufferCell&&v.x===this._lastBufferCell.x&&v.y===this._lastBufferCell.y||(this._handleHover(v),this._lastBufferCell=v)}_handleHover(y){if(this._activeLine!==y.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(y,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,y)||(this._clearCurrentLink(),this._askForLink(y,!0))}_askForLink(y,v){this._activeProviderReplies&&v||(this._activeProviderReplies?.forEach(x=>{x?.forEach(w=>{w.link.dispose&&w.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=y.y);let _=!1;for(const[x,w]of this._linkProviderService.linkProviders.entries())v?this._activeProviderReplies?.get(x)&&(_=this._checkLinkProviderResult(x,y,_)):w.provideLinks(y.y,S=>{if(this._isMouseOut)return;const T=S?.map(E=>({link:E}));this._activeProviderReplies?.set(x,T),_=this._checkLinkProviderResult(x,y,_),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(y.y,this._activeProviderReplies)})}_removeIntersectingLinks(y,v){const _=new Set;for(let x=0;x<v.size;x++){const w=v.get(x);if(w)for(let S=0;S<w.length;S++){const T=w[S],E=T.link.range.start.y<y?0:T.link.range.start.x,C=T.link.range.end.y>y?this._bufferService.cols:T.link.range.end.x;for(let A=E;A<=C;A++){if(_.has(A)){w.splice(S--,1);break}_.add(A)}}}}_checkLinkProviderResult(y,v,_){if(!this._activeProviderReplies)return _;const x=this._activeProviderReplies.get(y);let w=!1;for(let S=0;S<y;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(w=!0);if(!w&&x){const S=x.find(T=>this._linkAtPosition(T.link,v));S&&(_=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!_)for(let S=0;S<this._activeProviderReplies.size;S++){const T=this._activeProviderReplies.get(S)?.find(E=>this._linkAtPosition(E.link,v));if(T){_=!0,this._handleNewLink(T);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(y){if(!this._currentLink)return;const v=this._positionFromMouseEvent(y,this._element,this._mouseService);v&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,v)&&this._currentLink.link.activate(y,this._currentLink.link.text)}_clearCurrentLink(y,v){this._currentLink&&this._lastMouseEvent&&(!y||!v||this._currentLink.link.range.start.y>=y&&this._currentLink.link.range.end.y<=v)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(y){if(!this._lastMouseEvent)return;const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._linkAtPosition(y.link,v)&&(this._currentLink=y,this._currentLink.state={decorations:{underline:y.link.decorations===void 0||y.link.decorations.underline,pointerCursor:y.link.decorations===void 0||y.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,y.link,this._lastMouseEvent),y.link.decorations={},Object.defineProperties(y.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:_=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",_))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:_=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(y.link,_))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{if(!this._currentLink)return;const x=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=x&&this._currentLink.link.range.end.y<=w&&(this._clearCurrentLink(x,w),this._lastMouseEvent)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(y,v,_){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!0),this._currentLink.state.decorations.pointerCursor&&y.classList.add("xterm-cursor-pointer")),v.hover&&v.hover(_,v.text)}_fireUnderlineEvent(y,v){const _=y.range,x=this._bufferService.buffer.ydisp,w=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-x-1,_.end.x,_.end.y-x-1,void 0);(v?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(w)}_linkLeave(y,v,_){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!1),this._currentLink.state.decorations.pointerCursor&&y.classList.remove("xterm-cursor-pointer")),v.leave&&v.leave(_,v.text)}_linkAtPosition(y,v){const _=y.range.start.y*this._bufferService.cols+y.range.start.x,x=y.range.end.y*this._bufferService.cols+y.range.end.x,w=v.y*this._bufferService.cols+v.x;return _<=w&&w<=x}_positionFromMouseEvent(y,v,_){const x=_.getCoords(y,v,this._bufferService.cols,this._bufferService.rows);if(x)return{x:x[0],y:x[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(y,v,_,x,w){return{x1:y,y1:v,x2:_,y2:x,cols:this._bufferService.cols,fg:w}}};a.Linkifier=g=c([u(1,m.IMouseService),u(2,m.IRenderService),u(3,b.IBufferService),u(4,m.ILinkProviderService)],g)},9042:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(o,a,l){var c=this&&this.__decorate||function(m,g,y,v){var _,x=arguments.length,w=x<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,g,y,v);else for(var S=m.length-1;S>=0;S--)(_=m[S])&&(w=(x<3?_(w):x>3?_(g,y,w):_(g,y))||w);return x>3&&w&&Object.defineProperty(g,y,w),w},u=this&&this.__param||function(m,g){return function(y,v){g(y,v,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;const d=l(511),h=l(2585);let f=a.OscLinkProvider=class{constructor(m,g,y){this._bufferService=m,this._optionsService=g,this._oscLinkService=y}provideLinks(m,g){const y=this._bufferService.buffer.lines.get(m-1);if(!y)return void g(void 0);const v=[],_=this._optionsService.rawOptions.linkHandler,x=new d.CellData,w=y.getTrimmedLength();let S=-1,T=-1,E=!1;for(let C=0;C<w;C++)if(T!==-1||y.hasContent(C)){if(y.loadCell(C,x),x.hasExtendedAttrs()&&x.extended.urlId){if(T===-1){T=C,S=x.extended.urlId;continue}E=x.extended.urlId!==S}else T!==-1&&(E=!0);if(E||T!==-1&&C===w-1){const A=this._oscLinkService.getLinkData(S)?.uri;if(A){const I={start:{x:T+1,y:m},end:{x:C+(E||C!==w-1?0:1),y:m}};let P=!1;if(!_?.allowNonHttpProtocols)try{const D=new URL(A);["http:","https:"].includes(D.protocol)||(P=!0)}catch{P=!0}P||v.push({text:A,range:I,activate:(D,R)=>_?_.activate(D,R,I):b(0,R),hover:(D,R)=>_?.hover?.(D,R,I),leave:(D,R)=>_?.leave?.(D,R,I)})}E=!1,x.hasExtendedAttrs()&&x.extended.urlId?(T=C,S=x.extended.urlId):(T=-1,S=-1)}}g(v)}};function b(m,g){if(confirm(`Do you want to navigate to ${g}?

WARNING: This link could potentially be dangerous`)){const y=window.open();if(y){try{y.opener=null}catch{}y.location.href=g}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=f=c([u(0,h.IBufferService),u(1,h.IOptionsService),u(2,h.IOscLinkService)],f)},6193:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(l,c){this._renderCallback=l,this._coreBrowserService=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},3236:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const c=l(3614),u=l(3656),d=l(3551),h=l(9042),f=l(3730),b=l(1680),m=l(3107),g=l(5744),y=l(2950),v=l(1296),_=l(428),x=l(4269),w=l(5114),S=l(8934),T=l(3230),E=l(9312),C=l(4725),A=l(6731),I=l(8055),P=l(8969),D=l(8460),R=l(844),F=l(6114),G=l(8437),z=l(2584),K=l(7399),L=l(5941),O=l(9074),$=l(2585),H=l(5435),U=l(4567),ee=l(779);class X extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(J={}){super(J),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new R.MutableDisposable),this._onCursorMove=this.register(new D.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new D.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new D.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new D.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new D.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new D.EventEmitter),this._onBlur=this.register(new D.EventEmitter),this._onA11yCharEmitter=this.register(new D.EventEmitter),this._onA11yTabEmitter=this.register(new D.EventEmitter),this._onWillOpen=this.register(new D.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(O.DecorationService),this._instantiationService.setService($.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(ee.LinkProviderService),this._instantiationService.setService(C.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((j,Y)=>this.refresh(j,Y))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(j=>this._reportWindowsOptions(j))),this.register(this._inputHandler.onColor(j=>this._handleColorEvent(j))),this.register((0,D.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,D.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(j=>this._afterResize(j.cols,j.rows))),this.register((0,R.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(J){if(this._themeService)for(const j of J){let Y,Q="";switch(j.index){case 256:Y="foreground",Q="10";break;case 257:Y="background",Q="11";break;case 258:Y="cursor",Q="12";break;default:Y="ansi",Q="4;"+j.index}switch(j.type){case 0:const ie=I.color.toColorRGB(Y==="ansi"?this._themeService.colors.ansi[j.index]:this._themeService.colors[Y]);this.coreService.triggerDataEvent(`${z.C0.ESC}]${Q};${(0,L.toRgbString)(ie)}${z.C1_ESCAPED.ST}`);break;case 1:if(Y==="ansi")this._themeService.modifyColors(re=>re.ansi[j.index]=I.channels.toColor(...j.color));else{const re=Y;this._themeService.modifyColors(pe=>pe[re]=I.channels.toColor(...j.color))}break;case 2:this._themeService.restoreColor(j.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(J){J?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(J){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(z.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(z.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const J=this.buffer.ybase+this.buffer.y,j=this.buffer.lines.get(J);if(!j)return;const Y=Math.min(this.buffer.x,this.cols-1),Q=this._renderService.dimensions.css.cell.height,ie=j.getWidth(Y),re=this._renderService.dimensions.css.cell.width*ie,pe=this.buffer.y*this._renderService.dimensions.css.cell.height,M=Y*this._renderService.dimensions.css.cell.width;this.textarea.style.left=M+"px",this.textarea.style.top=pe+"px",this.textarea.style.width=re+"px",this.textarea.style.height=Q+"px",this.textarea.style.lineHeight=Q+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",j=>{this.hasSelection()&&(0,c.copyHandler)(j,this._selectionService)}));const J=j=>(0,c.handlePasteEvent)(j,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",J)),this.register((0,u.addDisposableDomListener)(this.element,"paste",J)),F.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",j=>{j.button===2&&(0,c.rightClickHandler)(j,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",j=>{(0,c.rightClickHandler)(j,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",j=>{j.button===1&&(0,c.moveTextAreaUnderMouseCursor)(j,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",J=>this._keyUp(J),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",J=>this._keyDown(J),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",J=>this._keyPress(J),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",J=>this._compositionHelper.compositionupdate(J))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",J=>this._inputEvent(J),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(J){if(!J)throw new Error("Terminal requires a parent element.");if(J.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=J.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),J.appendChild(this.element);const j=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),j.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,u.addDisposableDomListener)(this.screenElement,"mousemove",Y=>this.updateCursorStyle(Y))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),j.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",h.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(w.CoreBrowserService,this.textarea,J.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(C.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",Y=>this._handleTextAreaFocus(Y))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(_.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(C.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(A.ThemeService),this._instantiationService.setService(C.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(x.CharacterJoinerService),this._instantiationService.setService(C.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(T.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(C.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(Y=>this._onRender.fire(Y))),this.onResize(Y=>this._renderService.resize(Y.cols,Y.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(y.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(C.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(j);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(b.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(Y=>this.scrollLines(Y.amount,Y.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(E.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(C.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(Y=>this.scrollLines(Y.amount,Y.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(Y=>this._renderService.handleSelectionChanged(Y.start,Y.end,Y.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(Y=>{this.textarea.value=Y,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(Y=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(m.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",Y=>this._selectionService.handleMouseDown(Y))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",Y=>this._handleScreenReaderModeOptionChange(Y))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(g.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",Y=>{!this._overviewRulerRenderer&&Y&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(g.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(v.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const J=this,j=this.element;function Y(re){const pe=J._mouseService.getMouseReportCoords(re,J.screenElement);if(!pe)return!1;let M,oe;switch(re.overrideType||re.type){case"mousemove":oe=32,re.buttons===void 0?(M=3,re.button!==void 0&&(M=re.button<3?re.button:3)):M=1&re.buttons?0:4&re.buttons?1:2&re.buttons?2:3;break;case"mouseup":oe=0,M=re.button<3?re.button:3;break;case"mousedown":oe=1,M=re.button<3?re.button:3;break;case"wheel":if(J._customWheelEventHandler&&J._customWheelEventHandler(re)===!1||J.viewport.getLinesScrolled(re)===0)return!1;oe=re.deltaY<0?0:1,M=4;break;default:return!1}return!(oe===void 0||M===void 0||M>4)&&J.coreMouseService.triggerMouseEvent({col:pe.col,row:pe.row,x:pe.x,y:pe.y,button:M,action:oe,ctrl:re.ctrlKey,alt:re.altKey,shift:re.shiftKey})}const Q={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ie={mouseup:re=>(Y(re),re.buttons||(this._document.removeEventListener("mouseup",Q.mouseup),Q.mousedrag&&this._document.removeEventListener("mousemove",Q.mousedrag)),this.cancel(re)),wheel:re=>(Y(re),this.cancel(re,!0)),mousedrag:re=>{re.buttons&&Y(re)},mousemove:re=>{re.buttons||Y(re)}};this.register(this.coreMouseService.onProtocolChange(re=>{re?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(re)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&re?Q.mousemove||(j.addEventListener("mousemove",ie.mousemove),Q.mousemove=ie.mousemove):(j.removeEventListener("mousemove",Q.mousemove),Q.mousemove=null),16&re?Q.wheel||(j.addEventListener("wheel",ie.wheel,{passive:!1}),Q.wheel=ie.wheel):(j.removeEventListener("wheel",Q.wheel),Q.wheel=null),2&re?Q.mouseup||(Q.mouseup=ie.mouseup):(this._document.removeEventListener("mouseup",Q.mouseup),Q.mouseup=null),4&re?Q.mousedrag||(Q.mousedrag=ie.mousedrag):(this._document.removeEventListener("mousemove",Q.mousedrag),Q.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(j,"mousedown",re=>{if(re.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(re))return Y(re),Q.mouseup&&this._document.addEventListener("mouseup",Q.mouseup),Q.mousedrag&&this._document.addEventListener("mousemove",Q.mousedrag),this.cancel(re)})),this.register((0,u.addDisposableDomListener)(j,"wheel",re=>{if(!Q.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(re)===!1)return!1;if(!this.buffer.hasScrollback){const pe=this.viewport.getLinesScrolled(re);if(pe===0)return;const M=z.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(re.deltaY<0?"A":"B");let oe="";for(let le=0;le<Math.abs(pe);le++)oe+=M;return this.coreService.triggerDataEvent(oe,!0),this.cancel(re,!0)}return this.viewport.handleWheel(re)?this.cancel(re):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(j,"touchstart",re=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(re),this.cancel(re)},{passive:!0})),this.register((0,u.addDisposableDomListener)(j,"touchmove",re=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(re)?void 0:this.cancel(re)},{passive:!1}))}refresh(J,j){this._renderService?.refreshRows(J,j)}updateCursorStyle(J){this._selectionService?.shouldColumnSelect(J)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(J,j,Y=0){Y===1?(super.scrollLines(J,j,Y),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(J)}paste(J){(0,c.paste)(J,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(J){this._customKeyEventHandler=J}attachCustomWheelEventHandler(J){this._customWheelEventHandler=J}registerLinkProvider(J){return this._linkProviderService.registerLinkProvider(J)}registerCharacterJoiner(J){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const j=this._characterJoinerService.register(J);return this.refresh(0,this.rows-1),j}deregisterCharacterJoiner(J){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(J)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(J){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+J)}registerDecoration(J){return this._decorationService.registerDecoration(J)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(J,j,Y){this._selectionService.setSelection(J,j,Y)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(J,j){this._selectionService?.selectLines(J,j)}_keyDown(J){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(J)===!1)return!1;const j=this.browser.isMac&&this.options.macOptionIsMeta&&J.altKey;if(!j&&!this._compositionHelper.keydown(J))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;j||J.key!=="Dead"&&J.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const Y=(0,K.evaluateKeyboardEvent)(J,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(J),Y.type===3||Y.type===2){const Q=this.rows-1;return this.scrollLines(Y.type===2?-Q:Q),this.cancel(J,!0)}return Y.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,J)||(Y.cancel&&this.cancel(J,!0),!Y.key||!!(J.key&&!J.ctrlKey&&!J.altKey&&!J.metaKey&&J.key.length===1&&J.key.charCodeAt(0)>=65&&J.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(Y.key!==z.C0.ETX&&Y.key!==z.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Y.key,domEvent:J}),this._showCursor(),this.coreService.triggerDataEvent(Y.key,!0),!this.optionsService.rawOptions.screenReaderMode||J.altKey||J.ctrlKey?this.cancel(J,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(J,j){const Y=J.isMac&&!this.options.macOptionIsMeta&&j.altKey&&!j.ctrlKey&&!j.metaKey||J.isWindows&&j.altKey&&j.ctrlKey&&!j.metaKey||J.isWindows&&j.getModifierState("AltGraph");return j.type==="keypress"?Y:Y&&(!j.keyCode||j.keyCode>47)}_keyUp(J){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(J)===!1||(function(j){return j.keyCode===16||j.keyCode===17||j.keyCode===18}(J)||this.focus(),this.updateCursorStyle(J),this._keyPressHandled=!1)}_keyPress(J){let j;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(J)===!1)return!1;if(this.cancel(J),J.charCode)j=J.charCode;else if(J.which===null||J.which===void 0)j=J.keyCode;else{if(J.which===0||J.charCode===0)return!1;j=J.which}return!(!j||(J.altKey||J.ctrlKey||J.metaKey)&&!this._isThirdLevelShift(this.browser,J)||(j=String.fromCharCode(j),this._onKey.fire({key:j,domEvent:J}),this._showCursor(),this.coreService.triggerDataEvent(j,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(J){if(J.data&&J.inputType==="insertText"&&(!J.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const j=J.data;return this.coreService.triggerDataEvent(j,!0),this.cancel(J),!0}return!1}resize(J,j){J!==this.cols||j!==this.rows?super.resize(J,j):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(J,j){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let J=1;J<this.rows;J++)this.buffer.lines.push(this.buffer.getBlankLine(G.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const J=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=J,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(z.C0.ESC+"[I"):this.coreService.triggerDataEvent(z.C0.ESC+"[O")}_reportWindowsOptions(J){if(this._renderService)switch(J){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const j=this._renderService.dimensions.css.canvas.width.toFixed(0),Y=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${z.C0.ESC}[4;${Y};${j}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const Q=this._renderService.dimensions.css.cell.width.toFixed(0),ie=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${z.C0.ESC}[6;${ie};${Q}t`)}}cancel(J,j){if(this.options.cancelEvents||j)return J.preventDefault(),J.stopPropagation(),!1}}a.Terminal=X},9924:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(l,c=1e3){this._renderCallback=l,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const h=d-this._lastRefreshMs,f=this._debounceThresholdMS-h;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c)}}},1680:function(o,a,l){var c=this&&this.__decorate||function(y,v,_,x){var w,S=arguments.length,T=S<3?v:x===null?x=Object.getOwnPropertyDescriptor(v,_):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(y,v,_,x);else for(var E=y.length-1;E>=0;E--)(w=y[E])&&(T=(S<3?w(T):S>3?w(v,_,T):w(v,_))||T);return S>3&&T&&Object.defineProperty(v,_,T),T},u=this&&this.__param||function(y,v){return function(_,x){v(_,x,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;const d=l(3656),h=l(4725),f=l(8460),b=l(844),m=l(2585);let g=a.Viewport=class extends b.Disposable{constructor(y,v,_,x,w,S,T,E){super(),this._viewportElement=y,this._scrollArea=v,this._bufferService=_,this._optionsService=x,this._charSizeService=w,this._renderService=S,this._coreBrowserService=T,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(C=>this._activeBuffer=C.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(C=>this._renderDimensions=C)),this._handleThemeChange(E.colors),this.register(E.onChangeColors(C=>this._handleThemeChange(C))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(y){this._viewportElement.style.backgroundColor=y.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(y){if(y)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const v=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==v&&(this._lastRecordedBufferHeight=v,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const y=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==y&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=y),this._refreshAnimationFrame=null}syncScrollArea(y=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(y);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(y)}_handleScroll(y){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const v=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:v,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const y=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(y*(this._smoothScrollState.target-this._smoothScrollState.origin)),y<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(y,v){const _=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(v<0&&this._viewportElement.scrollTop!==0||v>0&&_<this._lastRecordedBufferHeight)||(y.cancelable&&y.preventDefault(),!1)}handleWheel(y){const v=this._getPixelsScrolled(y);return v!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+v:this._smoothScrollState.target+=v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=v,this._bubbleScroll(y,v))}scrollLines(y){if(y!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const v=y*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:y,suppressScrollEvent:!1})}_getPixelsScrolled(y){if(y.deltaY===0||y.shiftKey)return 0;let v=this._applyScrollModifier(y.deltaY,y);return y.deltaMode===WheelEvent.DOM_DELTA_LINE?v*=this._currentRowHeight:y.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._currentRowHeight*this._bufferService.rows),v}getBufferElements(y,v){let _,x="";const w=[],S=v??this._bufferService.buffer.lines.length,T=this._bufferService.buffer.lines;for(let E=y;E<S;E++){const C=T.get(E);if(!C)continue;const A=T.get(E+1)?.isWrapped;if(x+=C.translateToString(!A),!A||E===T.length-1){const I=document.createElement("div");I.textContent=x,w.push(I),x.length>0&&(_=I),x=""}}return{bufferElements:w,cursorElement:_}}getLinesScrolled(y){if(y.deltaY===0||y.shiftKey)return 0;let v=this._applyScrollModifier(y.deltaY,y);return y.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(v/=this._currentRowHeight+0,this._wheelPartialScroll+=v,v=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):y.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._bufferService.rows),v}_applyScrollModifier(y,v){const _=this._optionsService.rawOptions.fastScrollModifier;return _==="alt"&&v.altKey||_==="ctrl"&&v.ctrlKey||_==="shift"&&v.shiftKey?y*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:y*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(y){this._lastTouchY=y.touches[0].pageY}handleTouchMove(y){const v=this._lastTouchY-y.touches[0].pageY;return this._lastTouchY=y.touches[0].pageY,v!==0&&(this._viewportElement.scrollTop+=v,this._bubbleScroll(y,v))}};a.Viewport=g=c([u(2,m.IBufferService),u(3,m.IOptionsService),u(4,h.ICharSizeService),u(5,h.IRenderService),u(6,h.ICoreBrowserService),u(7,h.IThemeService)],g)},3107:function(o,a,l){var c=this&&this.__decorate||function(m,g,y,v){var _,x=arguments.length,w=x<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,g,y,v);else for(var S=m.length-1;S>=0;S--)(_=m[S])&&(w=(x<3?_(w):x>3?_(g,y,w):_(g,y))||w);return x>3&&w&&Object.defineProperty(g,y,w),w},u=this&&this.__param||function(m,g){return function(y,v){g(y,v,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;const d=l(4725),h=l(844),f=l(2585);let b=a.BufferDecorationRenderer=class extends h.Disposable{constructor(m,g,y,v,_){super(),this._screenElement=m,this._bufferService=g,this._coreBrowserService=y,this._decorationService=v,this._renderService=_,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(x=>this._removeDecoration(x))),this.register((0,h.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const m of this._decorationService.decorations)this._renderDecoration(m);this._dimensionsChanged=!1}_renderDecoration(m){this._refreshStyle(m),this._dimensionsChanged&&this._refreshXPosition(m)}_createElement(m){const g=this._coreBrowserService.mainDocument.createElement("div");g.classList.add("xterm-decoration"),g.classList.toggle("xterm-decoration-top-layer",m?.options?.layer==="top"),g.style.width=`${Math.round((m.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,g.style.height=(m.options.height||1)*this._renderService.dimensions.css.cell.height+"px",g.style.top=(m.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",g.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const y=m.options.x??0;return y&&y>this._bufferService.cols&&(g.style.display="none"),this._refreshXPosition(m,g),g}_refreshStyle(m){const g=m.marker.line-this._bufferService.buffers.active.ydisp;if(g<0||g>=this._bufferService.rows)m.element&&(m.element.style.display="none",m.onRenderEmitter.fire(m.element));else{let y=this._decorationElements.get(m);y||(y=this._createElement(m),m.element=y,this._decorationElements.set(m,y),this._container.appendChild(y),m.onDispose(()=>{this._decorationElements.delete(m),y.remove()})),y.style.top=g*this._renderService.dimensions.css.cell.height+"px",y.style.display=this._altBufferIsActive?"none":"block",m.onRenderEmitter.fire(y)}}_refreshXPosition(m,g=m.element){if(!g)return;const y=m.options.x??0;(m.options.anchor||"left")==="right"?g.style.right=y?y*this._renderService.dimensions.css.cell.width+"px":"":g.style.left=y?y*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(m){this._decorationElements.get(m)?.remove(),this._decorationElements.delete(m),m.dispose()}};a.BufferDecorationRenderer=b=c([u(1,f.IBufferService),u(2,d.ICoreBrowserService),u(3,f.IDecorationService),u(4,d.IRenderService)],b)},5871:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const c of this._zones)if(c.color===l.options.overviewRulerOptions.color&&c.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,l.marker.line))return;if(this._lineAdjacentToZone(c,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(c,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,c){return c>=l.startBufferLine&&c<=l.endBufferLine}_lineAdjacentToZone(l,c,u){return c>=l.startBufferLine-this._linePadding[u||"full"]&&c<=l.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(l,c){l.startBufferLine=Math.min(l.startBufferLine,c),l.endBufferLine=Math.max(l.endBufferLine,c)}}},5744:function(o,a,l){var c=this&&this.__decorate||function(_,x,w,S){var T,E=arguments.length,C=E<3?x:S===null?S=Object.getOwnPropertyDescriptor(x,w):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,x,w,S);else for(var A=_.length-1;A>=0;A--)(T=_[A])&&(C=(E<3?T(C):E>3?T(x,w,C):T(x,w))||C);return E>3&&C&&Object.defineProperty(x,w,C),C},u=this&&this.__param||function(_,x){return function(w,S){x(w,S,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;const d=l(5871),h=l(4725),f=l(844),b=l(2585),m={full:0,left:0,center:0,right:0},g={full:0,left:0,center:0,right:0},y={full:0,left:0,center:0,right:0};let v=a.OverviewRulerRenderer=class extends f.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(_,x,w,S,T,E,C){super(),this._viewportElement=_,this._screenElement=x,this._bufferService=w,this._decorationService=S,this._renderService=T,this._optionsService=E,this._coreBrowserService=C,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,f.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const _=Math.floor(this._canvas.width/3),x=Math.ceil(this._canvas.width/3);g.full=this._canvas.width,g.left=_,g.center=x,g.right=_,this._refreshDrawHeightConstants(),y.full=0,y.left=0,y.center=g.left,y.right=g.left+g.center}_refreshDrawHeightConstants(){m.full=Math.round(2*this._coreBrowserService.dpr);const _=this._canvas.height/this._bufferService.buffer.lines.length,x=Math.round(Math.max(Math.min(_,12),6)*this._coreBrowserService.dpr);m.left=x,m.center=x,m.right=x}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const x of this._decorationService.decorations)this._colorZoneStore.addDecoration(x);this._ctx.lineWidth=1;const _=this._colorZoneStore.zones;for(const x of _)x.position!=="full"&&this._renderColorZone(x);for(const x of _)x.position==="full"&&this._renderColorZone(x);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(_){this._ctx.fillStyle=_.color,this._ctx.fillRect(y[_.position||"full"],Math.round((this._canvas.height-1)*(_.startBufferLine/this._bufferService.buffers.active.lines.length)-m[_.position||"full"]/2),g[_.position||"full"],Math.round((this._canvas.height-1)*((_.endBufferLine-_.startBufferLine)/this._bufferService.buffers.active.lines.length)+m[_.position||"full"]))}_queueRefresh(_,x){this._shouldUpdateDimensions=_||this._shouldUpdateDimensions,this._shouldUpdateAnchor=x||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=v=c([u(2,b.IBufferService),u(3,b.IDecorationService),u(4,h.IRenderService),u(5,b.IOptionsService),u(6,h.ICoreBrowserService)],v)},2950:function(o,a,l){var c=this&&this.__decorate||function(m,g,y,v){var _,x=arguments.length,w=x<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,g,y,v);else for(var S=m.length-1;S>=0;S--)(_=m[S])&&(w=(x<3?_(w):x>3?_(g,y,w):_(g,y))||w);return x>3&&w&&Object.defineProperty(g,y,w),w},u=this&&this.__param||function(m,g){return function(y,v){g(y,v,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;const d=l(4725),h=l(2585),f=l(2584);let b=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(m,g,y,v,_,x){this._textarea=m,this._compositionView=g,this._bufferService=y,this._optionsService=v,this._coreService=_,this._renderService=x,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(m){this._compositionView.textContent=m.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(m){if(this._isComposing||this._isSendingComposition){if(m.keyCode===229||m.keyCode===16||m.keyCode===17||m.keyCode===18)return!1;this._finalizeComposition(!1)}return m.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(m){if(this._compositionView.classList.remove("active"),this._isComposing=!1,m){const g={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let y;this._isSendingComposition=!1,g.start+=this._dataAlreadySent.length,y=this._isComposing?this._textarea.value.substring(g.start,g.end):this._textarea.value.substring(g.start),y.length>0&&this._coreService.triggerDataEvent(y,!0)}},0)}else{this._isSendingComposition=!1;const g=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(g,!0)}}_handleAnyTextareaChanges(){const m=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const g=this._textarea.value,y=g.replace(m,"");this._dataAlreadySent=y,g.length>m.length?this._coreService.triggerDataEvent(y,!0):g.length<m.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):g.length===m.length&&g!==m&&this._coreService.triggerDataEvent(g,!0)}},0)}updateCompositionElements(m){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const g=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),y=this._renderService.dimensions.css.cell.height,v=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,_=g*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=_+"px",this._compositionView.style.top=v+"px",this._compositionView.style.height=y+"px",this._compositionView.style.lineHeight=y+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const x=this._compositionView.getBoundingClientRect();this._textarea.style.left=_+"px",this._textarea.style.top=v+"px",this._textarea.style.width=Math.max(x.width,1)+"px",this._textarea.style.height=Math.max(x.height,1)+"px",this._textarea.style.lineHeight=x.height+"px"}m||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=b=c([u(2,h.IBufferService),u(3,h.IOptionsService),u(4,h.ICoreService),u(5,d.IRenderService)],b)},9806:(o,a)=>{function l(c,u,d){const h=d.getBoundingClientRect(),f=c.getComputedStyle(d),b=parseInt(f.getPropertyValue("padding-left")),m=parseInt(f.getPropertyValue("padding-top"));return[u.clientX-h.left-b,u.clientY-h.top-m]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=l,a.getCoords=function(c,u,d,h,f,b,m,g,y){if(!b)return;const v=l(c,u,d);return v?(v[0]=Math.ceil((v[0]+(y?m/2:0))/m),v[1]=Math.ceil(v[1]/g),v[0]=Math.min(Math.max(v[0],1),h+(y?1:0)),v[1]=Math.min(Math.max(v[1],1),f),v):void 0}},9504:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;const c=l(2584);function u(g,y,v,_){const x=g-d(g,v),w=y-d(y,v),S=Math.abs(x-w)-function(T,E,C){let A=0;const I=T-d(T,C),P=E-d(E,C);for(let D=0;D<Math.abs(I-P);D++){const R=h(T,E)==="A"?-1:1;C.buffer.lines.get(I+R*D)?.isWrapped&&A++}return A}(g,y,v);return m(S,b(h(g,y),_))}function d(g,y){let v=0,_=y.buffer.lines.get(g),x=_?.isWrapped;for(;x&&g>=0&&g<y.rows;)v++,_=y.buffer.lines.get(--g),x=_?.isWrapped;return v}function h(g,y){return g>y?"A":"B"}function f(g,y,v,_,x,w){let S=g,T=y,E="";for(;S!==v||T!==_;)S+=x?1:-1,x&&S>w.cols-1?(E+=w.buffer.translateBufferLineToString(T,!1,g,S),S=0,g=0,T++):!x&&S<0&&(E+=w.buffer.translateBufferLineToString(T,!1,0,g+1),S=w.cols-1,g=S,T--);return E+w.buffer.translateBufferLineToString(T,!1,g,S)}function b(g,y){const v=y?"O":"[";return c.C0.ESC+v+g}function m(g,y){g=Math.floor(g);let v="";for(let _=0;_<g;_++)v+=y;return v}a.moveToCellSequence=function(g,y,v,_){const x=v.buffer.x,w=v.buffer.y;if(!v.buffer.hasScrollback)return function(E,C,A,I,P,D){return u(C,I,P,D).length===0?"":m(f(E,C,E,C-d(C,P),!1,P).length,b("D",D))}(x,w,0,y,v,_)+u(w,y,v,_)+function(E,C,A,I,P,D){let R;R=u(C,I,P,D).length>0?I-d(I,P):C;const F=I,G=function(z,K,L,O,$,H){let U;return U=u(L,O,$,H).length>0?O-d(O,$):K,z<L&&U<=O||z>=L&&U<O?"C":"D"}(E,C,A,I,P,D);return m(f(E,R,A,F,G==="C",P).length,b(G,D))}(x,w,g,y,v,_);let S;if(w===y)return S=x>g?"D":"C",m(Math.abs(x-g),b(S,_));S=w>y?"D":"C";const T=Math.abs(w-y);return m(function(E,C){return C.cols-E}(w>y?g:x,v)+(T-1)*v.cols+1+((w>y?x:g)-1),b(S,_))}},1296:function(o,a,l){var c=this&&this.__decorate||function(D,R,F,G){var z,K=arguments.length,L=K<3?R:G===null?G=Object.getOwnPropertyDescriptor(R,F):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(D,R,F,G);else for(var O=D.length-1;O>=0;O--)(z=D[O])&&(L=(K<3?z(L):K>3?z(R,F,L):z(R,F))||L);return K>3&&L&&Object.defineProperty(R,F,L),L},u=this&&this.__param||function(D,R){return function(F,G){R(F,G,D)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;const d=l(3787),h=l(2550),f=l(2223),b=l(6171),m=l(6052),g=l(4725),y=l(8055),v=l(8460),_=l(844),x=l(2585),w="xterm-dom-renderer-owner-",S="xterm-rows",T="xterm-fg-",E="xterm-bg-",C="xterm-focus",A="xterm-selection";let I=1,P=a.DomRenderer=class extends _.Disposable{constructor(D,R,F,G,z,K,L,O,$,H,U,ee,X){super(),this._terminal=D,this._document=R,this._element=F,this._screenElement=G,this._viewportElement=z,this._helperContainer=K,this._linkifier2=L,this._charSizeService=$,this._optionsService=H,this._bufferService=U,this._coreBrowserService=ee,this._themeService=X,this._terminalClass=I++,this._rowElements=[],this._selectionRenderModel=(0,m.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new v.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(A),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,b.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(ge=>this._injectCss(ge))),this._injectCss(this._themeService.colors),this._rowFactory=O.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(w+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(ge=>this._handleLinkHover(ge))),this.register(this._linkifier2.onHideLinkUnderline(ge=>this._handleLinkLeave(ge))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(w+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new h.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const F of this._rowElements)F.style.width=`${this.dimensions.css.canvas.width}px`,F.style.height=`${this.dimensions.css.cell.height}px`,F.style.lineHeight=`${this.dimensions.css.cell.height}px`,F.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const R=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=R,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let R=`${this._terminalSelector} .${S} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;R+=`${this._terminalSelector} .${S} .xterm-dim { color: ${y.color.multiplyOpacity(D.foreground,.5).css};}`,R+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const F=`blink_underline_${this._terminalClass}`,G=`blink_bar_${this._terminalClass}`,z=`blink_block_${this._terminalClass}`;R+=`@keyframes ${F} { 50% {  border-bottom-style: hidden; }}`,R+=`@keyframes ${G} { 50% {  box-shadow: none; }}`,R+=`@keyframes ${z} { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,R+=`${this._terminalSelector} .${S}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${F} 1s step-end infinite;}${this._terminalSelector} .${S}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${G} 1s step-end infinite;}${this._terminalSelector} .${S}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${z} 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${D.cursor.css} !important; color: ${D.cursorAccent.css} !important;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,R+=`${this._terminalSelector} .${A} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${A} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${A} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[K,L]of D.ansi.entries())R+=`${this._terminalSelector} .${T}${K} { color: ${L.css}; }${this._terminalSelector} .${T}${K}.xterm-dim { color: ${y.color.multiplyOpacity(L,.5).css}; }${this._terminalSelector} .${E}${K} { background-color: ${L.css}; }`;R+=`${this._terminalSelector} .${T}${f.INVERTED_DEFAULT_COLOR} { color: ${y.color.opaque(D.background).css}; }${this._terminalSelector} .${T}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${y.color.multiplyOpacity(y.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${E}${f.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=R}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,R){for(let F=this._rowElements.length;F<=R;F++){const G=this._document.createElement("div");this._rowContainer.appendChild(G),this._rowElements.push(G)}for(;this._rowElements.length>R;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,R){this._refreshRowElements(D,R),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(C),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(C),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,R,F){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,R,F),this.renderRows(0,this._bufferService.rows-1),!D||!R)return;this._selectionRenderModel.update(this._terminal,D,R,F);const G=this._selectionRenderModel.viewportStartRow,z=this._selectionRenderModel.viewportEndRow,K=this._selectionRenderModel.viewportCappedStartRow,L=this._selectionRenderModel.viewportCappedEndRow;if(K>=this._bufferService.rows||L<0)return;const O=this._document.createDocumentFragment();if(F){const $=D[0]>R[0];O.appendChild(this._createSelectionElement(K,$?R[0]:D[0],$?D[0]:R[0],L-K+1))}else{const $=G===K?D[0]:0,H=K===z?R[0]:this._bufferService.cols;O.appendChild(this._createSelectionElement(K,$,H));const U=L-K-1;if(O.appendChild(this._createSelectionElement(K+1,0,this._bufferService.cols,U)),K!==L){const ee=z===L?R[0]:this._bufferService.cols;O.appendChild(this._createSelectionElement(L,0,ee))}}this._selectionContainer.appendChild(O)}_createSelectionElement(D,R,F,G=1){const z=this._document.createElement("div"),K=R*this.dimensions.css.cell.width;let L=this.dimensions.css.cell.width*(F-R);return K+L>this.dimensions.css.canvas.width&&(L=this.dimensions.css.canvas.width-K),z.style.height=G*this.dimensions.css.cell.height+"px",z.style.top=D*this.dimensions.css.cell.height+"px",z.style.left=`${K}px`,z.style.width=`${L}px`,z}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,R){const F=this._bufferService.buffer,G=F.ybase+F.y,z=Math.min(F.x,this._bufferService.cols-1),K=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,O=this._optionsService.rawOptions.cursorInactiveStyle;for(let $=D;$<=R;$++){const H=$+F.ydisp,U=this._rowElements[$],ee=F.lines.get(H);if(!U||!ee)break;U.replaceChildren(...this._rowFactory.createRow(ee,H,H===G,L,O,z,K,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${w}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,R,F,G,z,K){F<0&&(D=0),G<0&&(R=0);const L=this._bufferService.rows-1;F=Math.max(Math.min(F,L),0),G=Math.max(Math.min(G,L),0),z=Math.min(z,this._bufferService.cols);const O=this._bufferService.buffer,$=O.ybase+O.y,H=Math.min(O.x,z-1),U=this._optionsService.rawOptions.cursorBlink,ee=this._optionsService.rawOptions.cursorStyle,X=this._optionsService.rawOptions.cursorInactiveStyle;for(let ge=F;ge<=G;++ge){const J=ge+O.ydisp,j=this._rowElements[ge],Y=O.lines.get(J);if(!j||!Y)break;j.replaceChildren(...this._rowFactory.createRow(Y,J,J===$,ee,X,H,U,this.dimensions.css.cell.width,this._widthCache,K?ge===F?D:0:-1,K?(ge===G?R:z)-1:-1))}}};a.DomRenderer=P=c([u(7,x.IInstantiationService),u(8,g.ICharSizeService),u(9,x.IOptionsService),u(10,x.IBufferService),u(11,g.ICoreBrowserService),u(12,g.IThemeService)],P)},3787:function(o,a,l){var c=this&&this.__decorate||function(S,T,E,C){var A,I=arguments.length,P=I<3?T:C===null?C=Object.getOwnPropertyDescriptor(T,E):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(S,T,E,C);else for(var D=S.length-1;D>=0;D--)(A=S[D])&&(P=(I<3?A(P):I>3?A(T,E,P):A(T,E))||P);return I>3&&P&&Object.defineProperty(T,E,P),P},u=this&&this.__param||function(S,T){return function(E,C){T(E,C,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;const d=l(2223),h=l(643),f=l(511),b=l(2585),m=l(8055),g=l(4725),y=l(4269),v=l(6171),_=l(3734);let x=a.DomRendererRowFactory=class{constructor(S,T,E,C,A,I,P){this._document=S,this._characterJoinerService=T,this._optionsService=E,this._coreBrowserService=C,this._coreService=A,this._decorationService=I,this._themeService=P,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,T,E){this._selectionStart=S,this._selectionEnd=T,this._columnSelectMode=E}createRow(S,T,E,C,A,I,P,D,R,F,G){const z=[],K=this._characterJoinerService.getJoinedCharacters(T),L=this._themeService.colors;let O,$=S.getNoBgTrimmedLength();E&&$<I+1&&($=I+1);let H=0,U="",ee=0,X=0,ge=0,J=!1,j=0,Y=!1,Q=0;const ie=[],re=F!==-1&&G!==-1;for(let pe=0;pe<$;pe++){S.loadCell(pe,this._workCell);let M=this._workCell.getWidth();if(M===0)continue;let oe=!1,le=pe,q=this._workCell;if(K.length>0&&pe===K[0][0]){oe=!0;const at=K.shift();q=new y.JoinedCellData(this._workCell,S.translateToString(!0,at[0],at[1]),at[1]-at[0]),le=at[1]-1,M=q.getWidth()}const V=this._isCellInSelection(pe,T),ae=E&&pe===I,xe=re&&pe>=F&&pe<=G;let Te=!1;this._decorationService.forEachDecorationAtCell(pe,T,void 0,at=>{Te=!0});let fe=q.getChars()||h.WHITESPACE_CELL_CHAR;if(fe===" "&&(q.isUnderline()||q.isOverline())&&(fe=""),Q=M*D-R.get(fe,q.isBold(),q.isItalic()),O){if(H&&(V&&Y||!V&&!Y&&q.bg===ee)&&(V&&Y&&L.selectionForeground||q.fg===X)&&q.extended.ext===ge&&xe===J&&Q===j&&!ae&&!oe&&!Te){q.isInvisible()?U+=h.WHITESPACE_CELL_CHAR:U+=fe,H++;continue}H&&(O.textContent=U),O=this._document.createElement("span"),H=0,U=""}else O=this._document.createElement("span");if(ee=q.bg,X=q.fg,ge=q.extended.ext,J=xe,j=Q,Y=V,oe&&I>=pe&&I<=le&&(I=pe),!this._coreService.isCursorHidden&&ae&&this._coreService.isCursorInitialized){if(ie.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&ie.push("xterm-cursor-blink"),ie.push(C==="bar"?"xterm-cursor-bar":C==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(A)switch(A){case"outline":ie.push("xterm-cursor-outline");break;case"block":ie.push("xterm-cursor-block");break;case"bar":ie.push("xterm-cursor-bar");break;case"underline":ie.push("xterm-cursor-underline")}}if(q.isBold()&&ie.push("xterm-bold"),q.isItalic()&&ie.push("xterm-italic"),q.isDim()&&ie.push("xterm-dim"),U=q.isInvisible()?h.WHITESPACE_CELL_CHAR:q.getChars()||h.WHITESPACE_CELL_CHAR,q.isUnderline()&&(ie.push(`xterm-underline-${q.extended.underlineStyle}`),U===" "&&(U=""),!q.isUnderlineColorDefault()))if(q.isUnderlineColorRGB())O.style.textDecorationColor=`rgb(${_.AttributeData.toColorRGB(q.getUnderlineColor()).join(",")})`;else{let at=q.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&q.isBold()&&at<8&&(at+=8),O.style.textDecorationColor=L.ansi[at].css}q.isOverline()&&(ie.push("xterm-overline"),U===" "&&(U="")),q.isStrikethrough()&&ie.push("xterm-strikethrough"),xe&&(O.style.textDecoration="underline");let ke=q.getFgColor(),Me=q.getFgColorMode(),Re=q.getBgColor(),de=q.getBgColorMode();const be=!!q.isInverse();if(be){const at=ke;ke=Re,Re=at;const pt=Me;Me=de,de=pt}let Se,ze,Ye,ut=!1;switch(this._decorationService.forEachDecorationAtCell(pe,T,void 0,at=>{at.options.layer!=="top"&&ut||(at.backgroundColorRGB&&(de=50331648,Re=at.backgroundColorRGB.rgba>>8&16777215,Se=at.backgroundColorRGB),at.foregroundColorRGB&&(Me=50331648,ke=at.foregroundColorRGB.rgba>>8&16777215,ze=at.foregroundColorRGB),ut=at.options.layer==="top")}),!ut&&V&&(Se=this._coreBrowserService.isFocused?L.selectionBackgroundOpaque:L.selectionInactiveBackgroundOpaque,Re=Se.rgba>>8&16777215,de=50331648,ut=!0,L.selectionForeground&&(Me=50331648,ke=L.selectionForeground.rgba>>8&16777215,ze=L.selectionForeground)),ut&&ie.push("xterm-decoration-top"),de){case 16777216:case 33554432:Ye=L.ansi[Re],ie.push(`xterm-bg-${Re}`);break;case 50331648:Ye=m.channels.toColor(Re>>16,Re>>8&255,255&Re),this._addStyle(O,`background-color:#${w((Re>>>0).toString(16),"0",6)}`);break;default:be?(Ye=L.foreground,ie.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):Ye=L.background}switch(Se||q.isDim()&&(Se=m.color.multiplyOpacity(Ye,.5)),Me){case 16777216:case 33554432:q.isBold()&&ke<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ke+=8),this._applyMinimumContrast(O,Ye,L.ansi[ke],q,Se,void 0)||ie.push(`xterm-fg-${ke}`);break;case 50331648:const at=m.channels.toColor(ke>>16&255,ke>>8&255,255&ke);this._applyMinimumContrast(O,Ye,at,q,Se,ze)||this._addStyle(O,`color:#${w(ke.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(O,Ye,L.foreground,q,Se,ze)||be&&ie.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}ie.length&&(O.className=ie.join(" "),ie.length=0),ae||oe||Te?O.textContent=U:H++,Q!==this.defaultSpacing&&(O.style.letterSpacing=`${Q}px`),z.push(O),pe=le}return O&&H&&(O.textContent=U),z}_applyMinimumContrast(S,T,E,C,A,I){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,v.treatGlyphAsBackgroundColor)(C.getCode()))return!1;const P=this._getContrastCache(C);let D;if(A||I||(D=P.getColor(T.rgba,E.rgba)),D===void 0){const R=this._optionsService.rawOptions.minimumContrastRatio/(C.isDim()?2:1);D=m.color.ensureContrastRatio(A||T,I||E,R),P.setColor((A||T).rgba,(I||E).rgba,D??null)}return!!D&&(this._addStyle(S,`color:${D.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,T){S.setAttribute("style",`${S.getAttribute("style")||""}${T};`)}_isCellInSelection(S,T){const E=this._selectionStart,C=this._selectionEnd;return!(!E||!C)&&(this._columnSelectMode?E[0]<=C[0]?S>=E[0]&&T>=E[1]&&S<C[0]&&T<=C[1]:S<E[0]&&T>=E[1]&&S>=C[0]&&T<=C[1]:T>E[1]&&T<C[1]||E[1]===C[1]&&T===E[1]&&S>=E[0]&&S<C[0]||E[1]<C[1]&&T===C[1]&&S<C[0]||E[1]<C[1]&&T===E[1]&&S>=E[0])}};function w(S,T,E){for(;S.length<E;)S=T+S;return S}a.DomRendererRowFactory=x=c([u(1,g.ICharacterJoinerService),u(2,b.IOptionsService),u(3,g.ICoreBrowserService),u(4,b.ICoreService),u(5,b.IDecorationService),u(6,g.IThemeService)],x)},2550:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(l,c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=l.createElement("span");u.classList.add("xterm-char-measure-element");const d=l.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const h=l.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontStyle="italic";const f=l.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontWeight="bold",f.style.fontStyle="italic",this._measureElements=[u,d,h,f],this._container.appendChild(u),this._container.appendChild(d),this._container.appendChild(h),this._container.appendChild(f),c.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,c,u,d){l===this._font&&c===this._fontSize&&u===this._weight&&d===this._weightBold||(this._font=l,this._fontSize=c,this._weight=u,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(l,c,u){let d=0;if(!c&&!u&&l.length===1&&(d=l.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const b=this._measure(l,0);return b>0&&(this._flat[d]=b),b}let h=l;c&&(h+="B"),u&&(h+="I");let f=this._holey.get(h);if(f===void 0){let b=0;c&&(b|=1),u&&(b|=2),f=this._measure(l,b),f>0&&this._holey.set(h,f)}return f}_measure(l,c){const u=this._measureElements[c];return u.textContent=l.repeat(32),u.offsetWidth/32}}},2223:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;const c=l(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(o,a)=>{function l(u){return 57508<=u&&u<=57558}function c(u){return u>=128512&&u<=128591||u>=127744&&u<=128511||u>=128640&&u<=128767||u>=9728&&u<=9983||u>=9984&&u<=10175||u>=65024&&u<=65039||u>=129280&&u<=129535||u>=127462&&u<=127487}Object.defineProperty(a,"__esModule",{value:!0}),a.computeNextVariantOffset=a.createRenderDimensions=a.treatGlyphAsBackgroundColor=a.allowRescaling=a.isEmoji=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},a.isPowerlineGlyph=l,a.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},a.isEmoji=c,a.allowRescaling=function(u,d,h,f){return d===1&&h>Math.ceil(1.5*f)&&u!==void 0&&u>255&&!c(u)&&!l(u)&&!function(b){return 57344<=b&&b<=63743}(u)},a.treatGlyphAsBackgroundColor=function(u){return l(u)||function(d){return 9472<=d&&d<=9631}(u)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},a.computeNextVariantOffset=function(u,d,h=0){return(u-(2*Math.round(d)-h))%(2*Math.round(d))}},6052:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class l{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,d,h,f=!1){if(this.selectionStart=d,this.selectionEnd=h,!d||!h||d[0]===h[0]&&d[1]===h[1])return void this.clear();const b=u.buffers.active.ydisp,m=d[1]-b,g=h[1]-b,y=Math.max(m,0),v=Math.min(g,u.rows-1);y>=u.rows||v<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=m,this.viewportEndRow=g,this.viewportCappedStartRow=y,this.viewportCappedEndRow=v,this.startCol=d[0],this.endCol=h[0])}isCellSelected(u,d,h){return!!this.hasSelection&&(h-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&h>=this.viewportCappedStartRow&&d<this.endCol&&h<=this.viewportCappedEndRow:d<this.startCol&&h>=this.viewportCappedStartRow&&d>=this.endCol&&h<=this.viewportCappedEndRow:h>this.viewportStartRow&&h<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&h===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&h===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&h===this.viewportStartRow&&d>=this.startCol)}}a.createSelectionRenderModel=function(){return new l}},456:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,c=this.selectionEnd;return!(!l||!c)&&(l[1]>c[1]||l[1]===c[1]&&l[0]>c[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(o,a,l){var c=this&&this.__decorate||function(v,_,x,w){var S,T=arguments.length,E=T<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,x):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,_,x,w);else for(var C=v.length-1;C>=0;C--)(S=v[C])&&(E=(T<3?S(E):T>3?S(_,x,E):S(_,x))||E);return T>3&&E&&Object.defineProperty(_,x,E),E},u=this&&this.__param||function(v,_){return function(x,w){_(x,w,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;const d=l(2585),h=l(8460),f=l(844);let b=a.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(v,_,x){super(),this._optionsService=x,this.width=0,this.height=0,this._onCharSizeChange=this.register(new h.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new y(this._optionsService))}catch{this._measureStrategy=this.register(new g(v,_,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const v=this._measureStrategy.measure();v.width===this.width&&v.height===this.height||(this.width=v.width,this.height=v.height,this._onCharSizeChange.fire())}};a.CharSizeService=b=c([u(2,d.IOptionsService)],b);class m extends f.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(_,x){_!==void 0&&_>0&&x!==void 0&&x>0&&(this._result.width=_,this._result.height=x)}}class g extends m{constructor(_,x,w){super(),this._document=_,this._parentElement=x,this._optionsService=w,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class y extends m{constructor(_){super(),this._optionsService=_,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const x=this._ctx.measureText("W");if(!("width"in x&&"fontBoundingBoxAscent"in x&&"fontBoundingBoxDescent"in x))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const _=this._ctx.measureText("W");return this._validateAndSet(_.width,_.fontBoundingBoxAscent+_.fontBoundingBoxDescent),this._result}}},4269:function(o,a,l){var c=this&&this.__decorate||function(y,v,_,x){var w,S=arguments.length,T=S<3?v:x===null?x=Object.getOwnPropertyDescriptor(v,_):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(y,v,_,x);else for(var E=y.length-1;E>=0;E--)(w=y[E])&&(T=(S<3?w(T):S>3?w(v,_,T):w(v,_))||T);return S>3&&T&&Object.defineProperty(v,_,T),T},u=this&&this.__param||function(y,v){return function(_,x){v(_,x,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;const d=l(3734),h=l(643),f=l(511),b=l(2585);class m extends d.AttributeData{constructor(v,_,x){super(),this.content=0,this.combinedData="",this.fg=v.fg,this.bg=v.bg,this.combinedData=_,this._width=x}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(v){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=m;let g=a.CharacterJoinerService=class n9{constructor(v){this._bufferService=v,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(v){const _={id:this._nextCharacterJoinerId++,handler:v};return this._characterJoiners.push(_),_.id}deregister(v){for(let _=0;_<this._characterJoiners.length;_++)if(this._characterJoiners[_].id===v)return this._characterJoiners.splice(_,1),!0;return!1}getJoinedCharacters(v){if(this._characterJoiners.length===0)return[];const _=this._bufferService.buffer.lines.get(v);if(!_||_.length===0)return[];const x=[],w=_.translateToString(!0);let S=0,T=0,E=0,C=_.getFg(0),A=_.getBg(0);for(let I=0;I<_.getTrimmedLength();I++)if(_.loadCell(I,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==C||this._workCell.bg!==A){if(I-S>1){const P=this._getJoinedRanges(w,E,T,_,S);for(let D=0;D<P.length;D++)x.push(P[D])}S=I,E=T,C=this._workCell.fg,A=this._workCell.bg}T+=this._workCell.getChars().length||h.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){const I=this._getJoinedRanges(w,E,T,_,S);for(let P=0;P<I.length;P++)x.push(I[P])}return x}_getJoinedRanges(v,_,x,w,S){const T=v.substring(_,x);let E=[];try{E=this._characterJoiners[0].handler(T)}catch(C){console.error(C)}for(let C=1;C<this._characterJoiners.length;C++)try{const A=this._characterJoiners[C].handler(T);for(let I=0;I<A.length;I++)n9._mergeRanges(E,A[I])}catch(A){console.error(A)}return this._stringRangesToCellRanges(E,w,S),E}_stringRangesToCellRanges(v,_,x){let w=0,S=!1,T=0,E=v[w];if(E){for(let C=x;C<this._bufferService.cols;C++){const A=_.getWidth(C),I=_.getString(C).length||h.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!S&&E[0]<=T&&(E[0]=C,S=!0),E[1]<=T){if(E[1]=C,E=v[++w],!E)break;E[0]<=T?(E[0]=C,S=!0):S=!1}T+=I}}E&&(E[1]=this._bufferService.cols)}}static _mergeRanges(v,_){let x=!1;for(let w=0;w<v.length;w++){const S=v[w];if(x){if(_[1]<=S[0])return v[w-1][1]=_[1],v;if(_[1]<=S[1])return v[w-1][1]=Math.max(_[1],S[1]),v.splice(w,1),v;v.splice(w,1),w--}else{if(_[1]<=S[0])return v.splice(w,0,_),v;if(_[1]<=S[1])return S[0]=Math.min(_[0],S[0]),v;_[0]<S[1]&&(S[0]=Math.min(_[0],S[0]),x=!0)}}return x?v[v.length-1][1]=_[1]:v.push(_),v}};a.CharacterJoinerService=g=c([u(0,b.IBufferService)],g)},5114:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;const c=l(844),u=l(8460),d=l(3656);class h extends c.Disposable{constructor(m,g,y){super(),this._textarea=m,this._window=g,this.mainDocument=y,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new f(this._window),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new u.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(v=>this._screenDprMonitor.setWindow(v))),this.register((0,u.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(m){this._window!==m&&(this._window=m,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}a.CoreBrowserService=h;class f extends c.Disposable{constructor(m){super(),this._parentWindow=m,this._windowResizeListener=this.register(new c.MutableDisposable),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,c.toDisposable)(()=>this.clearListener()))}setWindow(m){this._parentWindow=m,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkProviderService=void 0;const c=l(844);class u extends c.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,c.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(h){return this.linkProviders.push(h),{dispose:()=>{const f=this.linkProviders.indexOf(h);f!==-1&&this.linkProviders.splice(f,1)}}}}a.LinkProviderService=u},8934:function(o,a,l){var c=this&&this.__decorate||function(b,m,g,y){var v,_=arguments.length,x=_<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,g):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(b,m,g,y);else for(var w=b.length-1;w>=0;w--)(v=b[w])&&(x=(_<3?v(x):_>3?v(m,g,x):v(m,g))||x);return _>3&&x&&Object.defineProperty(m,g,x),x},u=this&&this.__param||function(b,m){return function(g,y){m(g,y,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;const d=l(4725),h=l(9806);let f=a.MouseService=class{constructor(b,m){this._renderService=b,this._charSizeService=m}getCoords(b,m,g,y,v){return(0,h.getCoords)(window,b,m,g,y,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,v)}getMouseReportCoords(b,m){const g=(0,h.getCoordsRelativeToElement)(window,b,m);if(this._charSizeService.hasValidSize)return g[0]=Math.min(Math.max(g[0],0),this._renderService.dimensions.css.canvas.width-1),g[1]=Math.min(Math.max(g[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(g[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(g[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(g[0]),y:Math.floor(g[1])}}};a.MouseService=f=c([u(0,d.IRenderService),u(1,d.ICharSizeService)],f)},3230:function(o,a,l){var c=this&&this.__decorate||function(v,_,x,w){var S,T=arguments.length,E=T<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,x):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,_,x,w);else for(var C=v.length-1;C>=0;C--)(S=v[C])&&(E=(T<3?S(E):T>3?S(_,x,E):S(_,x))||E);return T>3&&E&&Object.defineProperty(_,x,E),E},u=this&&this.__param||function(v,_){return function(x,w){_(x,w,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;const d=l(6193),h=l(4725),f=l(8460),b=l(844),m=l(7226),g=l(2585);let y=a.RenderService=class extends b.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(v,_,x,w,S,T,E,C){super(),this._rowCount=v,this._charSizeService=w,this._renderer=this.register(new b.MutableDisposable),this._pausedResizeTask=new m.DebouncedIdleTask,this._observerDisposable=this.register(new b.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer((A,I)=>this._renderRows(A,I),E),this.register(this._renderDebouncer),this.register(E.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(T.onResize(()=>this._fullRefresh())),this.register(T.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(x.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(x.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(T.cols,T.rows),this._fullRefresh()})),this.register(x.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(T.buffer.y,T.buffer.y,!0))),this.register(C.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(E.window,_),this.register(E.onWindowChange(A=>this._registerIntersectionObserver(A,_)))}_registerIntersectionObserver(v,_){if("IntersectionObserver"in v){const x=new v.IntersectionObserver(w=>this._handleIntersectionChange(w[w.length-1]),{threshold:0});x.observe(_),this._observerDisposable.value=(0,b.toDisposable)(()=>x.disconnect())}}_handleIntersectionChange(v){this._isPaused=v.isIntersecting===void 0?v.intersectionRatio===0:!v.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(v,_,x=!1){this._isPaused?this._needsFullRefresh=!0:(x||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(v,_,this._rowCount))}_renderRows(v,_){this._renderer.value&&(v=Math.min(v,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(v,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:v,end:_}),this._onRender.fire({start:v,end:_}),this._isNextRenderRedrawOnly=!0)}resize(v,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(v){this._renderer.value=v,this._renderer.value&&(this._renderer.value.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(v){return this._renderDebouncer.addRefreshCallback(v)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(v,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(v,_)):this._renderer.value.handleResize(v,_),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(v,_,x){this._selectionState.start=v,this._selectionState.end=_,this._selectionState.columnSelectMode=x,this._renderer.value?.handleSelectionChanged(v,_,x)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};a.RenderService=y=c([u(2,g.IOptionsService),u(3,h.ICharSizeService),u(4,g.IDecorationService),u(5,g.IBufferService),u(6,h.ICoreBrowserService),u(7,h.IThemeService)],y)},9312:function(o,a,l){var c=this&&this.__decorate||function(E,C,A,I){var P,D=arguments.length,R=D<3?C:I===null?I=Object.getOwnPropertyDescriptor(C,A):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(E,C,A,I);else for(var F=E.length-1;F>=0;F--)(P=E[F])&&(R=(D<3?P(R):D>3?P(C,A,R):P(C,A))||R);return D>3&&R&&Object.defineProperty(C,A,R),R},u=this&&this.__param||function(E,C){return function(A,I){C(A,I,E)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;const d=l(9806),h=l(9504),f=l(456),b=l(4725),m=l(8460),g=l(844),y=l(6114),v=l(4841),_=l(511),x=l(2585),w="",S=new RegExp(w,"g");let T=a.SelectionService=class extends g.Disposable{constructor(E,C,A,I,P,D,R,F,G){super(),this._element=E,this._screenElement=C,this._linkifier=A,this._bufferService=I,this._coreService=P,this._mouseService=D,this._optionsService=R,this._renderService=F,this._coreBrowserService=G,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new _.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new m.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new m.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new m.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=z=>this._handleMouseMove(z),this._mouseUpListener=z=>this._handleMouseUp(z),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(z=>this._handleTrim(z)),this.register(this._bufferService.buffers.onBufferActivate(z=>this._handleBufferActivate(z))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,g.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const E=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!E||!C||E[0]===C[0]&&E[1]===C[1])}get selectionText(){const E=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!E||!C)return"";const A=this._bufferService.buffer,I=[];if(this._activeSelectionMode===3){if(E[0]===C[0])return"";const P=E[0]<C[0]?E[0]:C[0],D=E[0]<C[0]?C[0]:E[0];for(let R=E[1];R<=C[1];R++){const F=A.translateBufferLineToString(R,!0,P,D);I.push(F)}}else{const P=E[1]===C[1]?C[0]:void 0;I.push(A.translateBufferLineToString(E[1],!0,E[0],P));for(let D=E[1]+1;D<=C[1]-1;D++){const R=A.lines.get(D),F=A.translateBufferLineToString(D,!0);R?.isWrapped?I[I.length-1]+=F:I.push(F)}if(E[1]!==C[1]){const D=A.lines.get(C[1]),R=A.translateBufferLineToString(C[1],!0,0,C[0]);D&&D.isWrapped?I[I.length-1]+=R:I.push(R)}}return I.map(P=>P.replace(S," ")).join(y.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(E){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),y.isLinux&&E&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(E){const C=this._getMouseBufferCoords(E),A=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!!(A&&I&&C)&&this._areCoordsInSelection(C,A,I)}isCellInSelection(E,C){const A=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!(!A||!I)&&this._areCoordsInSelection([E,C],A,I)}_areCoordsInSelection(E,C,A){return E[1]>C[1]&&E[1]<A[1]||C[1]===A[1]&&E[1]===C[1]&&E[0]>=C[0]&&E[0]<A[0]||C[1]<A[1]&&E[1]===A[1]&&E[0]<A[0]||C[1]<A[1]&&E[1]===C[1]&&E[0]>=C[0]}_selectWordAtCursor(E,C){const A=this._linkifier.currentLink?.link?.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,v.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const I=this._getMouseBufferCoords(E);return!!I&&(this._selectWordAt(I,C),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(E,C){this._model.clearSelection(),E=Math.max(E,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,E],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()}_handleTrim(E){this._model.handleTrim(E)&&this.refresh()}_getMouseBufferCoords(E){const C=this._mouseService.getCoords(E,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C}_getMouseEventScrollAmount(E){let C=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,E,this._screenElement)[1];const A=this._renderService.dimensions.css.canvas.height;return C>=0&&C<=A?0:(C>A&&(C-=A),C=Math.min(Math.max(C,-50),50),C/=50,C/Math.abs(C)+Math.round(14*C))}shouldForceSelection(E){return y.isMac?E.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:E.shiftKey}handleMouseDown(E){if(this._mouseDownTimeStamp=E.timeStamp,(E.button!==2||!this.hasSelection)&&E.button===0){if(!this._enabled){if(!this.shouldForceSelection(E))return;E.stopPropagation()}E.preventDefault(),this._dragScrollAmount=0,this._enabled&&E.shiftKey?this._handleIncrementalClick(E):E.detail===1?this._handleSingleClick(E):E.detail===2?this._handleDoubleClick(E):E.detail===3&&this._handleTripleClick(E),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(E){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(E))}_handleSingleClick(E){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(E)?3:0,this._model.selectionStart=this._getMouseBufferCoords(E),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(E){this._selectWordAtCursor(E,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(E){const C=this._getMouseBufferCoords(E);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))}shouldColumnSelect(E){return E.altKey&&!(y.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(E){if(E.stopImmediatePropagation(),!this._model.selectionStart)return;const C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(E),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(E),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){const I=A.lines.get(this._model.selectionEnd[1]);I&&I.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const E=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(E.ydisp+this._bufferService.rows,E.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=E.ydisp),this.refresh()}}_handleMouseUp(E){const C=E.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&E.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const A=this._mouseService.getCoords(E,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&A[0]!==void 0&&A[1]!==void 0){const I=(0,h.moveToCellSequence)(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(I,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const E=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,A=!(!E||!C||E[0]===C[0]&&E[1]===C[1]);A?E&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&E[0]===this._oldSelectionStart[0]&&E[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(E,C,A)):this._oldHasSelection&&this._fireOnSelectionChange(E,C,A)}_fireOnSelectionChange(E,C,A){this._oldSelectionStart=E,this._oldSelectionEnd=C,this._oldHasSelection=A,this._onSelectionChange.fire()}_handleBufferActivate(E){this.clearSelection(),this._trimListener.dispose(),this._trimListener=E.activeBuffer.lines.onTrim(C=>this._handleTrim(C))}_convertViewportColToCharacterIndex(E,C){let A=C;for(let I=0;C>=I;I++){const P=E.loadCell(I,this._workCell).getChars().length;this._workCell.getWidth()===0?A--:P>1&&C!==I&&(A+=P-1)}return A}setSelection(E,C,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[E,C],this._model.selectionStartLength=A,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(E){this._isClickInSelection(E)||(this._selectWordAtCursor(E,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(E,C,A=!0,I=!0){if(E[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,D=P.lines.get(E[1]);if(!D)return;const R=P.translateBufferLineToString(E[1],!1);let F=this._convertViewportColToCharacterIndex(D,E[0]),G=F;const z=E[0]-F;let K=0,L=0,O=0,$=0;if(R.charAt(F)===" "){for(;F>0&&R.charAt(F-1)===" ";)F--;for(;G<R.length&&R.charAt(G+1)===" ";)G++}else{let ee=E[0],X=E[0];D.getWidth(ee)===0&&(K++,ee--),D.getWidth(X)===2&&(L++,X++);const ge=D.getString(X).length;for(ge>1&&($+=ge-1,G+=ge-1);ee>0&&F>0&&!this._isCharWordSeparator(D.loadCell(ee-1,this._workCell));){D.loadCell(ee-1,this._workCell);const J=this._workCell.getChars().length;this._workCell.getWidth()===0?(K++,ee--):J>1&&(O+=J-1,F-=J-1),F--,ee--}for(;X<D.length&&G+1<R.length&&!this._isCharWordSeparator(D.loadCell(X+1,this._workCell));){D.loadCell(X+1,this._workCell);const J=this._workCell.getChars().length;this._workCell.getWidth()===2?(L++,X++):J>1&&($+=J-1,G+=J-1),G++,X++}}G++;let H=F+z-K+O,U=Math.min(this._bufferService.cols,G-F+K+L-O-$);if(C||R.slice(F,G).trim()!==""){if(A&&H===0&&D.getCodePoint(0)!==32){const ee=P.lines.get(E[1]-1);if(ee&&D.isWrapped&&ee.getCodePoint(this._bufferService.cols-1)!==32){const X=this._getWordAt([this._bufferService.cols-1,E[1]-1],!1,!0,!1);if(X){const ge=this._bufferService.cols-X.start;H-=ge,U+=ge}}}if(I&&H+U===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){const ee=P.lines.get(E[1]+1);if(ee?.isWrapped&&ee.getCodePoint(0)!==32){const X=this._getWordAt([0,E[1]+1],!1,!1,!0);X&&(U+=X.length)}}return{start:H,length:U}}}_selectWordAt(E,C){const A=this._getWordAt(E,C);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,E[1]--;this._model.selectionStart=[A.start,E[1]],this._model.selectionStartLength=A.length}}_selectToWordAt(E){const C=this._getWordAt(E,!0);if(C){let A=E[1];for(;C.start<0;)C.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,A]}}_isCharWordSeparator(E){return E.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(E.getChars())>=0}_selectLineAt(E){const C=this._bufferService.buffer.getWrappedRangeForLine(E),A={start:{x:0,y:C.first},end:{x:this._bufferService.cols-1,y:C.last}};this._model.selectionStart=[0,C.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,v.getRangeLength)(A,this._bufferService.cols)}};a.SelectionService=T=c([u(3,x.IBufferService),u(4,x.ICoreService),u(5,b.IMouseService),u(6,x.IOptionsService),u(7,b.IRenderService),u(8,b.ICoreBrowserService)],T)},4725:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ILinkProviderService=a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;const c=l(8343);a.ICharSizeService=(0,c.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),a.IMouseService=(0,c.createDecorator)("MouseService"),a.IRenderService=(0,c.createDecorator)("RenderService"),a.ISelectionService=(0,c.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,c.createDecorator)("ThemeService"),a.ILinkProviderService=(0,c.createDecorator)("LinkProviderService")},6731:function(o,a,l){var c=this&&this.__decorate||function(T,E,C,A){var I,P=arguments.length,D=P<3?E:A===null?A=Object.getOwnPropertyDescriptor(E,C):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(T,E,C,A);else for(var R=T.length-1;R>=0;R--)(I=T[R])&&(D=(P<3?I(D):P>3?I(E,C,D):I(E,C))||D);return P>3&&D&&Object.defineProperty(E,C,D),D},u=this&&this.__param||function(T,E){return function(C,A){E(C,A,T)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;const d=l(7239),h=l(8055),f=l(8460),b=l(844),m=l(2585),g=h.css.toColor("#ffffff"),y=h.css.toColor("#000000"),v=h.css.toColor("#ffffff"),_=h.css.toColor("#000000"),x={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const T=[h.css.toColor("#2e3436"),h.css.toColor("#cc0000"),h.css.toColor("#4e9a06"),h.css.toColor("#c4a000"),h.css.toColor("#3465a4"),h.css.toColor("#75507b"),h.css.toColor("#06989a"),h.css.toColor("#d3d7cf"),h.css.toColor("#555753"),h.css.toColor("#ef2929"),h.css.toColor("#8ae234"),h.css.toColor("#fce94f"),h.css.toColor("#729fcf"),h.css.toColor("#ad7fa8"),h.css.toColor("#34e2e2"),h.css.toColor("#eeeeec")],E=[0,95,135,175,215,255];for(let C=0;C<216;C++){const A=E[C/36%6|0],I=E[C/6%6|0],P=E[C%6];T.push({css:h.channels.toCss(A,I,P),rgba:h.channels.toRgba(A,I,P)})}for(let C=0;C<24;C++){const A=8+10*C;T.push({css:h.channels.toCss(A,A,A),rgba:h.channels.toRgba(A,A,A)})}return T})());let w=a.ThemeService=class extends b.Disposable{get colors(){return this._colors}constructor(T){super(),this._optionsService=T,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:g,background:y,cursor:v,cursorAccent:_,selectionForeground:void 0,selectionBackgroundTransparent:x,selectionBackgroundOpaque:h.color.blend(y,x),selectionInactiveBackgroundTransparent:x,selectionInactiveBackgroundOpaque:h.color.blend(y,x),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(T={}){const E=this._colors;if(E.foreground=S(T.foreground,g),E.background=S(T.background,y),E.cursor=S(T.cursor,v),E.cursorAccent=S(T.cursorAccent,_),E.selectionBackgroundTransparent=S(T.selectionBackground,x),E.selectionBackgroundOpaque=h.color.blend(E.background,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundTransparent=S(T.selectionInactiveBackground,E.selectionBackgroundTransparent),E.selectionInactiveBackgroundOpaque=h.color.blend(E.background,E.selectionInactiveBackgroundTransparent),E.selectionForeground=T.selectionForeground?S(T.selectionForeground,h.NULL_COLOR):void 0,E.selectionForeground===h.NULL_COLOR&&(E.selectionForeground=void 0),h.color.isOpaque(E.selectionBackgroundTransparent)&&(E.selectionBackgroundTransparent=h.color.opacity(E.selectionBackgroundTransparent,.3)),h.color.isOpaque(E.selectionInactiveBackgroundTransparent)&&(E.selectionInactiveBackgroundTransparent=h.color.opacity(E.selectionInactiveBackgroundTransparent,.3)),E.ansi=a.DEFAULT_ANSI_COLORS.slice(),E.ansi[0]=S(T.black,a.DEFAULT_ANSI_COLORS[0]),E.ansi[1]=S(T.red,a.DEFAULT_ANSI_COLORS[1]),E.ansi[2]=S(T.green,a.DEFAULT_ANSI_COLORS[2]),E.ansi[3]=S(T.yellow,a.DEFAULT_ANSI_COLORS[3]),E.ansi[4]=S(T.blue,a.DEFAULT_ANSI_COLORS[4]),E.ansi[5]=S(T.magenta,a.DEFAULT_ANSI_COLORS[5]),E.ansi[6]=S(T.cyan,a.DEFAULT_ANSI_COLORS[6]),E.ansi[7]=S(T.white,a.DEFAULT_ANSI_COLORS[7]),E.ansi[8]=S(T.brightBlack,a.DEFAULT_ANSI_COLORS[8]),E.ansi[9]=S(T.brightRed,a.DEFAULT_ANSI_COLORS[9]),E.ansi[10]=S(T.brightGreen,a.DEFAULT_ANSI_COLORS[10]),E.ansi[11]=S(T.brightYellow,a.DEFAULT_ANSI_COLORS[11]),E.ansi[12]=S(T.brightBlue,a.DEFAULT_ANSI_COLORS[12]),E.ansi[13]=S(T.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),E.ansi[14]=S(T.brightCyan,a.DEFAULT_ANSI_COLORS[14]),E.ansi[15]=S(T.brightWhite,a.DEFAULT_ANSI_COLORS[15]),T.extendedAnsi){const C=Math.min(E.ansi.length-16,T.extendedAnsi.length);for(let A=0;A<C;A++)E.ansi[A+16]=S(T.extendedAnsi[A],a.DEFAULT_ANSI_COLORS[A+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(T){this._restoreColor(T),this._onChangeColors.fire(this.colors)}_restoreColor(T){if(T!==void 0)switch(T){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[T]=this._restoreColors.ansi[T]}else for(let E=0;E<this._restoreColors.ansi.length;++E)this._colors.ansi[E]=this._restoreColors.ansi[E]}modifyColors(T){T(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(T,E){if(T!==void 0)try{return h.css.toColor(T)}catch{}return E}a.ThemeService=w=c([u(0,m.IOptionsService)],w)},6349:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;const c=l(8460),u=l(844);class d extends u.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;const b=new Array(f);for(let m=0;m<Math.min(f,this.length);m++)b[m]=this._array[this._getCyclicIndex(m)];this._array=b,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let b=this._length;b<f;b++)this._array[b]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,b){this._array[this._getCyclicIndex(f)]=b}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,b,...m){if(b){for(let g=f;g<this._length-b;g++)this._array[this._getCyclicIndex(g)]=this._array[this._getCyclicIndex(g+b)];this._length-=b,this.onDeleteEmitter.fire({index:f,amount:b})}for(let g=this._length-1;g>=f;g--)this._array[this._getCyclicIndex(g+m.length)]=this._array[this._getCyclicIndex(g)];for(let g=0;g<m.length;g++)this._array[this._getCyclicIndex(f+g)]=m[g];if(m.length&&this.onInsertEmitter.fire({index:f,amount:m.length}),this._length+m.length>this._maxLength){const g=this._length+m.length-this._maxLength;this._startIndex+=g,this._length=this._maxLength,this.onTrimEmitter.fire(g)}else this._length+=m.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,b,m){if(!(b<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+m<0)throw new Error("Cannot shift elements in list beyond index 0");if(m>0){for(let y=b-1;y>=0;y--)this.set(f+y+m,this.get(f+y));const g=f+b+m-this._length;if(g>0)for(this._length+=g;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let g=0;g<b;g++)this.set(f+g+m,this.get(f+g))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}a.CircularList=d},1439:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function l(c,u=5){if(typeof c!="object")return c;const d=Array.isArray(c)?[]:{};for(const h in c)d[h]=u<=1?c[h]:c[h]&&l(c[h],u-1);return d}},8055:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let l=0,c=0,u=0,d=0;var h,f,b,m,g;function y(_){const x=_.toString(16);return x.length<2?"0"+x:x}function v(_,x){return _<x?(x+.05)/(_+.05):(_+.05)/(x+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(x,w,S,T){return T!==void 0?`#${y(x)}${y(w)}${y(S)}${y(T)}`:`#${y(x)}${y(w)}${y(S)}`},_.toRgba=function(x,w,S,T=255){return(x<<24|w<<16|S<<8|T)>>>0},_.toColor=function(x,w,S,T){return{css:_.toCss(x,w,S,T),rgba:_.toRgba(x,w,S,T)}}}(h||(a.channels=h={})),function(_){function x(w,S){return d=Math.round(255*S),[l,c,u]=g.toChannels(w.rgba),{css:h.toCss(l,c,u,d),rgba:h.toRgba(l,c,u,d)}}_.blend=function(w,S){if(d=(255&S.rgba)/255,d===1)return{css:S.css,rgba:S.rgba};const T=S.rgba>>24&255,E=S.rgba>>16&255,C=S.rgba>>8&255,A=w.rgba>>24&255,I=w.rgba>>16&255,P=w.rgba>>8&255;return l=A+Math.round((T-A)*d),c=I+Math.round((E-I)*d),u=P+Math.round((C-P)*d),{css:h.toCss(l,c,u),rgba:h.toRgba(l,c,u)}},_.isOpaque=function(w){return(255&w.rgba)==255},_.ensureContrastRatio=function(w,S,T){const E=g.ensureContrastRatio(w.rgba,S.rgba,T);if(E)return h.toColor(E>>24&255,E>>16&255,E>>8&255)},_.opaque=function(w){const S=(255|w.rgba)>>>0;return[l,c,u]=g.toChannels(S),{css:h.toCss(l,c,u),rgba:S}},_.opacity=x,_.multiplyOpacity=function(w,S){return d=255&w.rgba,x(w,d*S/255)},_.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(f||(a.color=f={})),function(_){let x,w;try{const S=document.createElement("canvas");S.width=1,S.height=1;const T=S.getContext("2d",{willReadFrequently:!0});T&&(x=T,x.globalCompositeOperation="copy",w=x.createLinearGradient(0,0,1,1))}catch{}_.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return l=parseInt(S.slice(1,2).repeat(2),16),c=parseInt(S.slice(2,3).repeat(2),16),u=parseInt(S.slice(3,4).repeat(2),16),h.toColor(l,c,u);case 5:return l=parseInt(S.slice(1,2).repeat(2),16),c=parseInt(S.slice(2,3).repeat(2),16),u=parseInt(S.slice(3,4).repeat(2),16),d=parseInt(S.slice(4,5).repeat(2),16),h.toColor(l,c,u,d);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}const T=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(T)return l=parseInt(T[1]),c=parseInt(T[2]),u=parseInt(T[3]),d=Math.round(255*(T[5]===void 0?1:parseFloat(T[5]))),h.toColor(l,c,u,d);if(!x||!w)throw new Error("css.toColor: Unsupported css format");if(x.fillStyle=w,x.fillStyle=S,typeof x.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(x.fillRect(0,0,1,1),[l,c,u,d]=x.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:h.toRgba(l,c,u,d),css:S}}}(b||(a.css=b={})),function(_){function x(w,S,T){const E=w/255,C=S/255,A=T/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}_.relativeLuminance=function(w){return x(w>>16&255,w>>8&255,255&w)},_.relativeLuminance2=x}(m||(a.rgb=m={})),function(_){function x(S,T,E){const C=S>>24&255,A=S>>16&255,I=S>>8&255;let P=T>>24&255,D=T>>16&255,R=T>>8&255,F=v(m.relativeLuminance2(P,D,R),m.relativeLuminance2(C,A,I));for(;F<E&&(P>0||D>0||R>0);)P-=Math.max(0,Math.ceil(.1*P)),D-=Math.max(0,Math.ceil(.1*D)),R-=Math.max(0,Math.ceil(.1*R)),F=v(m.relativeLuminance2(P,D,R),m.relativeLuminance2(C,A,I));return(P<<24|D<<16|R<<8|255)>>>0}function w(S,T,E){const C=S>>24&255,A=S>>16&255,I=S>>8&255;let P=T>>24&255,D=T>>16&255,R=T>>8&255,F=v(m.relativeLuminance2(P,D,R),m.relativeLuminance2(C,A,I));for(;F<E&&(P<255||D<255||R<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),D=Math.min(255,D+Math.ceil(.1*(255-D))),R=Math.min(255,R+Math.ceil(.1*(255-R))),F=v(m.relativeLuminance2(P,D,R),m.relativeLuminance2(C,A,I));return(P<<24|D<<16|R<<8|255)>>>0}_.blend=function(S,T){if(d=(255&T)/255,d===1)return T;const E=T>>24&255,C=T>>16&255,A=T>>8&255,I=S>>24&255,P=S>>16&255,D=S>>8&255;return l=I+Math.round((E-I)*d),c=P+Math.round((C-P)*d),u=D+Math.round((A-D)*d),h.toRgba(l,c,u)},_.ensureContrastRatio=function(S,T,E){const C=m.relativeLuminance(S>>8),A=m.relativeLuminance(T>>8);if(v(C,A)<E){if(A<C){const D=x(S,T,E),R=v(C,m.relativeLuminance(D>>8));if(R<E){const F=w(S,T,E);return R>v(C,m.relativeLuminance(F>>8))?D:F}return D}const I=w(S,T,E),P=v(C,m.relativeLuminance(I>>8));if(P<E){const D=x(S,T,E);return P>v(C,m.relativeLuminance(D>>8))?I:D}return I}},_.reduceLuminance=x,_.increaseLuminance=w,_.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]}}(g||(a.rgba=g={})),a.toPaddedHex=y,a.contrastRatio=v},8969:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;const c=l(844),u=l(2585),d=l(4348),h=l(7866),f=l(744),b=l(7302),m=l(6975),g=l(8460),y=l(1753),v=l(1480),_=l(7994),x=l(9282),w=l(5435),S=l(5981),T=l(2660);let E=!1;class C extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new g.EventEmitter),this._onScroll.event(I=>{this._onScrollApi?.fire(I.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(I){for(const P in I)this.optionsService.options[P]=I[P]}constructor(I){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new g.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new g.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new g.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new g.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new b.OptionsService(I)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(h.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(m.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(y.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(v.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(_.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(T.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new w.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,g.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,g.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,g.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,g.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((P,D)=>this._inputHandler.parse(P,D))),this.register((0,g.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(I,P){this._writeBuffer.write(I,P)}writeSync(I,P){this._logService.logLevel<=u.LogLevelEnum.WARN&&!E&&(this._logService.warn("writeSync is unreliable and will be removed soon."),E=!0),this._writeBuffer.writeSync(I,P)}input(I,P=!0){this.coreService.triggerDataEvent(I,P)}resize(I,P){isNaN(I)||isNaN(P)||(I=Math.max(I,f.MINIMUM_COLS),P=Math.max(P,f.MINIMUM_ROWS),this._bufferService.resize(I,P))}scroll(I,P=!1){this._bufferService.scroll(I,P)}scrollLines(I,P,D){this._bufferService.scrollLines(I,P,D)}scrollPages(I){this.scrollLines(I*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(I){const P=I-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(I,P){return this._inputHandler.registerEscHandler(I,P)}registerDcsHandler(I,P){return this._inputHandler.registerDcsHandler(I,P)}registerCsiHandler(I,P){return this._inputHandler.registerCsiHandler(I,P)}registerOscHandler(I,P){return this._inputHandler.registerOscHandler(I,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let I=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?I=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(I=!0),I?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const I=[];I.push(this.onLineFeed(x.updateWindowsModeWrappedState.bind(null,this._bufferService))),I.push(this.registerCsiHandler({final:"H"},()=>((0,x.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const P of I)P.dispose()})}}}a.CoreTerminal=C},8460:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.runAndSubscribe=a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===l)return void this._listeners.splice(c,1)}}})),this._event}fire(l,c){const u=[];for(let d=0;d<this._listeners.length;d++)u.push(this._listeners[d]);for(let d=0;d<u.length;d++)u[d].call(void 0,l,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(l,c){return l(u=>c.fire(u))},a.runAndSubscribe=function(l,c){return c(void 0),l(u=>c(u))}},5435:function(o,a,l){var c=this&&this.__decorate||function(K,L,O,$){var H,U=arguments.length,ee=U<3?L:$===null?$=Object.getOwnPropertyDescriptor(L,O):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(K,L,O,$);else for(var X=K.length-1;X>=0;X--)(H=K[X])&&(ee=(U<3?H(ee):U>3?H(L,O,ee):H(L,O))||ee);return U>3&&ee&&Object.defineProperty(L,O,ee),ee},u=this&&this.__param||function(K,L){return function(O,$){L(O,$,K)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;const d=l(2584),h=l(7116),f=l(2015),b=l(844),m=l(482),g=l(8437),y=l(8460),v=l(643),_=l(511),x=l(3734),w=l(2585),S=l(1480),T=l(6242),E=l(6351),C=l(5941),A={"(":0,")":1,"*":2,"+":3,"-":1,".":2},I=131072;function P(K,L){if(K>24)return L.setWinLines||!1;switch(K){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var D;(function(K){K[K.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",K[K.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(a.WindowsOptionsReportType=D={}));let R=0;class F extends b.Disposable{getAttrData(){return this._curAttrData}constructor(L,O,$,H,U,ee,X,ge,J=new f.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=O,this._coreService=$,this._logService=H,this._optionsService=U,this._oscLinkService=ee,this._coreMouseService=X,this._unicodeService=ge,this._parser=J,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new m.StringToUtf32,this._utf8Decoder=new m.Utf8ToUtf32,this._workCell=new _.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=g.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=g.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new y.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new y.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new y.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new y.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new y.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new y.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new y.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new y.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new y.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new y.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new y.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new y.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new y.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new G(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(j=>this._activeBuffer=j.activeBuffer)),this._parser.setCsiHandlerFallback((j,Y)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(j),params:Y.toArray()})}),this._parser.setEscHandlerFallback(j=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(j)})}),this._parser.setExecuteHandlerFallback(j=>{this._logService.debug("Unknown EXECUTE code: ",{code:j})}),this._parser.setOscHandlerFallback((j,Y,Q)=>{this._logService.debug("Unknown OSC code: ",{identifier:j,action:Y,data:Q})}),this._parser.setDcsHandlerFallback((j,Y,Q)=>{Y==="HOOK"&&(Q=Q.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(j),action:Y,payload:Q})}),this._parser.setPrintHandler((j,Y,Q)=>this.print(j,Y,Q)),this._parser.registerCsiHandler({final:"@"},j=>this.insertChars(j)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},j=>this.scrollLeft(j)),this._parser.registerCsiHandler({final:"A"},j=>this.cursorUp(j)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},j=>this.scrollRight(j)),this._parser.registerCsiHandler({final:"B"},j=>this.cursorDown(j)),this._parser.registerCsiHandler({final:"C"},j=>this.cursorForward(j)),this._parser.registerCsiHandler({final:"D"},j=>this.cursorBackward(j)),this._parser.registerCsiHandler({final:"E"},j=>this.cursorNextLine(j)),this._parser.registerCsiHandler({final:"F"},j=>this.cursorPrecedingLine(j)),this._parser.registerCsiHandler({final:"G"},j=>this.cursorCharAbsolute(j)),this._parser.registerCsiHandler({final:"H"},j=>this.cursorPosition(j)),this._parser.registerCsiHandler({final:"I"},j=>this.cursorForwardTab(j)),this._parser.registerCsiHandler({final:"J"},j=>this.eraseInDisplay(j,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},j=>this.eraseInDisplay(j,!0)),this._parser.registerCsiHandler({final:"K"},j=>this.eraseInLine(j,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},j=>this.eraseInLine(j,!0)),this._parser.registerCsiHandler({final:"L"},j=>this.insertLines(j)),this._parser.registerCsiHandler({final:"M"},j=>this.deleteLines(j)),this._parser.registerCsiHandler({final:"P"},j=>this.deleteChars(j)),this._parser.registerCsiHandler({final:"S"},j=>this.scrollUp(j)),this._parser.registerCsiHandler({final:"T"},j=>this.scrollDown(j)),this._parser.registerCsiHandler({final:"X"},j=>this.eraseChars(j)),this._parser.registerCsiHandler({final:"Z"},j=>this.cursorBackwardTab(j)),this._parser.registerCsiHandler({final:"`"},j=>this.charPosAbsolute(j)),this._parser.registerCsiHandler({final:"a"},j=>this.hPositionRelative(j)),this._parser.registerCsiHandler({final:"b"},j=>this.repeatPrecedingCharacter(j)),this._parser.registerCsiHandler({final:"c"},j=>this.sendDeviceAttributesPrimary(j)),this._parser.registerCsiHandler({prefix:">",final:"c"},j=>this.sendDeviceAttributesSecondary(j)),this._parser.registerCsiHandler({final:"d"},j=>this.linePosAbsolute(j)),this._parser.registerCsiHandler({final:"e"},j=>this.vPositionRelative(j)),this._parser.registerCsiHandler({final:"f"},j=>this.hVPosition(j)),this._parser.registerCsiHandler({final:"g"},j=>this.tabClear(j)),this._parser.registerCsiHandler({final:"h"},j=>this.setMode(j)),this._parser.registerCsiHandler({prefix:"?",final:"h"},j=>this.setModePrivate(j)),this._parser.registerCsiHandler({final:"l"},j=>this.resetMode(j)),this._parser.registerCsiHandler({prefix:"?",final:"l"},j=>this.resetModePrivate(j)),this._parser.registerCsiHandler({final:"m"},j=>this.charAttributes(j)),this._parser.registerCsiHandler({final:"n"},j=>this.deviceStatus(j)),this._parser.registerCsiHandler({prefix:"?",final:"n"},j=>this.deviceStatusPrivate(j)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},j=>this.softReset(j)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},j=>this.setCursorStyle(j)),this._parser.registerCsiHandler({final:"r"},j=>this.setScrollRegion(j)),this._parser.registerCsiHandler({final:"s"},j=>this.saveCursor(j)),this._parser.registerCsiHandler({final:"t"},j=>this.windowOptions(j)),this._parser.registerCsiHandler({final:"u"},j=>this.restoreCursor(j)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},j=>this.insertColumns(j)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},j=>this.deleteColumns(j)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},j=>this.selectProtected(j)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},j=>this.requestMode(j,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},j=>this.requestMode(j,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new T.OscHandler(j=>(this.setTitle(j),this.setIconName(j),!0))),this._parser.registerOscHandler(1,new T.OscHandler(j=>this.setIconName(j))),this._parser.registerOscHandler(2,new T.OscHandler(j=>this.setTitle(j))),this._parser.registerOscHandler(4,new T.OscHandler(j=>this.setOrReportIndexedColor(j))),this._parser.registerOscHandler(8,new T.OscHandler(j=>this.setHyperlink(j))),this._parser.registerOscHandler(10,new T.OscHandler(j=>this.setOrReportFgColor(j))),this._parser.registerOscHandler(11,new T.OscHandler(j=>this.setOrReportBgColor(j))),this._parser.registerOscHandler(12,new T.OscHandler(j=>this.setOrReportCursorColor(j))),this._parser.registerOscHandler(104,new T.OscHandler(j=>this.restoreIndexedColor(j))),this._parser.registerOscHandler(110,new T.OscHandler(j=>this.restoreFgColor(j))),this._parser.registerOscHandler(111,new T.OscHandler(j=>this.restoreBgColor(j))),this._parser.registerOscHandler(112,new T.OscHandler(j=>this.restoreCursorColor(j))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const j in h.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:j},()=>this.selectCharset("("+j)),this._parser.registerEscHandler({intermediates:")",final:j},()=>this.selectCharset(")"+j)),this._parser.registerEscHandler({intermediates:"*",final:j},()=>this.selectCharset("*"+j)),this._parser.registerEscHandler({intermediates:"+",final:j},()=>this.selectCharset("+"+j)),this._parser.registerEscHandler({intermediates:"-",final:j},()=>this.selectCharset("-"+j)),this._parser.registerEscHandler({intermediates:".",final:j},()=>this.selectCharset("."+j)),this._parser.registerEscHandler({intermediates:"/",final:j},()=>this.selectCharset("/"+j));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(j=>(this._logService.error("Parsing error: ",j),j)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler((j,Y)=>this.requestStatusString(j,Y)))}_preserveStack(L,O,$,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=O,this._parseStack.decodedLength=$,this._parseStack.position=H}_logSlowResolvingAsync(L){this._logService.logLevel<=w.LogLevelEnum.WARN&&Promise.race([L,new Promise((O,$)=>setTimeout(()=>$("#SLOW_TIMEOUT"),5e3))]).catch(O=>{if(O!=="#SLOW_TIMEOUT")throw O;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,O){let $,H=this._activeBuffer.x,U=this._activeBuffer.y,ee=0;const X=this._parseStack.paused;if(X){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,O))return this._logSlowResolvingAsync($),$;H=this._parseStack.cursorStartX,U=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>I&&(ee=this._parseStack.position+I)}if(this._logService.logLevel<=w.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,j=>String.fromCharCode(j)).join("")}"`),typeof L=="string"?L.split("").map(j=>j.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<I&&(this._parseBuffer=new Uint32Array(Math.min(L.length,I))),X||this._dirtyRowTracker.clearRange(),L.length>I)for(let j=ee;j<L.length;j+=I){const Y=j+I<L.length?j+I:L.length,Q=typeof L=="string"?this._stringDecoder.decode(L.substring(j,Y),this._parseBuffer):this._utf8Decoder.decode(L.subarray(j,Y),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,Q))return this._preserveStack(H,U,Q,j),this._logSlowResolvingAsync($),$}else if(!X){const j=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if($=this._parser.parse(this._parseBuffer,j))return this._preserveStack(H,U,j,0),this._logSlowResolvingAsync($),$}this._activeBuffer.x===H&&this._activeBuffer.y===U||this._onCursorMove.fire();const ge=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),J=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);J<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(J,this._bufferService.rows-1),Math.min(ge,this._bufferService.rows-1))}print(L,O,$){let H,U;const ee=this._charsetService.charset,X=this._optionsService.rawOptions.screenReaderMode,ge=this._bufferService.cols,J=this._coreService.decPrivateModes.wraparound,j=this._coreService.modes.insertMode,Y=this._curAttrData;let Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-O>0&&Q.getWidth(this._activeBuffer.x-1)===2&&Q.setCellFromCodepoint(this._activeBuffer.x-1,0,1,Y);let ie=this._parser.precedingJoinState;for(let re=O;re<$;++re){if(H=L[re],H<127&&ee){const le=ee[String.fromCharCode(H)];le&&(H=le.charCodeAt(0))}const pe=this._unicodeService.charProperties(H,ie);U=S.UnicodeService.extractWidth(pe);const M=S.UnicodeService.extractShouldJoin(pe),oe=M?S.UnicodeService.extractWidth(ie):0;if(ie=pe,X&&this._onA11yChar.fire((0,m.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+U-oe>ge){if(J){const le=Q;let q=this._activeBuffer.x-oe;for(this._activeBuffer.x=oe,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),oe>0&&Q instanceof g.BufferLine&&Q.copyCellsFrom(le,q,0,oe,!1);q<ge;)le.setCellFromCodepoint(q++,0,1,Y)}else if(this._activeBuffer.x=ge-1,U===2)continue}if(M&&this._activeBuffer.x){const le=Q.getWidth(this._activeBuffer.x-1)?1:2;Q.addCodepointToCell(this._activeBuffer.x-le,H,U);for(let q=U-oe;--q>=0;)Q.setCellFromCodepoint(this._activeBuffer.x++,0,0,Y)}else if(j&&(Q.insertCells(this._activeBuffer.x,U-oe,this._activeBuffer.getNullCell(Y)),Q.getWidth(ge-1)===2&&Q.setCellFromCodepoint(ge-1,v.NULL_CELL_CODE,v.NULL_CELL_WIDTH,Y)),Q.setCellFromCodepoint(this._activeBuffer.x++,H,U,Y),U>0)for(;--U;)Q.setCellFromCodepoint(this._activeBuffer.x++,0,0,Y)}this._parser.precedingJoinState=ie,this._activeBuffer.x<ge&&$-O>0&&Q.getWidth(this._activeBuffer.x)===0&&!Q.hasContent(this._activeBuffer.x)&&Q.setCellFromCodepoint(this._activeBuffer.x,0,1,Y),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,O){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,O):this._parser.registerCsiHandler(L,$=>!P($.params[0],this._optionsService.rawOptions.windowOptions)||O($))}registerDcsHandler(L,O){return this._parser.registerDcsHandler(L,new E.DcsHandler(O))}registerEscHandler(L,O){return this._parser.registerEscHandler(L,O)}registerOscHandler(L,O){return this._parser.registerOscHandler(L,new T.OscHandler(O))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);L.hasWidth(this._activeBuffer.x)&&!L.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,O){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+O):(this._activeBuffer.x=L,this._activeBuffer.y=O),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,O){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+O)}cursorUp(L){const O=this._activeBuffer.y-this._activeBuffer.scrollTop;return O>=0?this._moveCursor(0,-Math.min(O,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const O=this._activeBuffer.scrollBottom-this._activeBuffer.y;return O>=0?this._moveCursor(0,Math.min(O,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const O=L.params[0];return O===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:O===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=L.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=L.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const O=L.params[0];return O===1&&(this._curAttrData.bg|=536870912),O!==2&&O!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,O,$,H=!1,U=!1){const ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);ee.replaceCells(O,$,this._activeBuffer.getNullCell(this._eraseAttrData()),U),H&&(ee.isWrapped=!1)}_resetBufferLine(L,O=!1){const $=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);$&&($.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),O),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),$.isWrapped=!1)}eraseInDisplay(L,O=!1){let $;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);$<this._bufferService.rows;$++)this._resetBufferLine($,O);this._dirtyRowTracker.markDirty($);break;case 1:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($,0,this._activeBuffer.x+1,!0,O),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get($+1).isWrapped=!1);$--;)this._resetBufferLine($,O);this._dirtyRowTracker.markDirty(0);break;case 2:for($=this._bufferService.rows,this._dirtyRowTracker.markDirty($-1);$--;)this._resetBufferLine($,O);this._dirtyRowTracker.markDirty(0);break;case 3:const H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(L,O=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,O);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,O)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let O=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const $=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;O--;)this._activeBuffer.lines.splice(U-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let O=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const $=this._activeBuffer.ybase+this._activeBuffer.y;let H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;O--;)this._activeBuffer.lines.splice($,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let O=L.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let O=L.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(g.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=L.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=L.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=L.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=L.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){const O=this._parser.precedingJoinState;if(!O)return!0;const $=L.params[0]||1,H=S.UnicodeService.extractWidth(O),U=this._activeBuffer.x-H,ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(U),X=new Uint32Array(ee.length*$);let ge=0;for(let j=0;j<ee.length;){const Y=ee.codePointAt(j)||0;X[ge++]=Y,j+=Y>65535?2:1}let J=ge;for(let j=1;j<$;++j)X.copyWithin(J,0,ge),J+=ge;return this.print(X,0,J),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let O=0;O<L.length;O++)switch(L.params[O]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let O=0;O<L.length;O++)switch(L.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,h.DEFAULT_CHARSET),this._charsetService.setgCharset(1,h.DEFAULT_CHARSET),this._charsetService.setgCharset(2,h.DEFAULT_CHARSET),this._charsetService.setgCharset(3,h.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let O=0;O<L.length;O++)switch(L.params[O]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let O=0;O<L.length;O++)switch(L.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[O]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,O){const $=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:U}=this._coreMouseService,ee=this._coreService,{buffers:X,cols:ge}=this._bufferService,{active:J,alt:j}=X,Y=this._optionsService.rawOptions,Q=M=>M?1:2,ie=L.params[0];return re=ie,pe=O?ie===2?4:ie===4?Q(ee.modes.insertMode):ie===12?3:ie===20?Q(Y.convertEol):0:ie===1?Q($.applicationCursorKeys):ie===3?Y.windowOptions.setWinLines?ge===80?2:ge===132?1:0:0:ie===6?Q($.origin):ie===7?Q($.wraparound):ie===8?3:ie===9?Q(H==="X10"):ie===12?Q(Y.cursorBlink):ie===25?Q(!ee.isCursorHidden):ie===45?Q($.reverseWraparound):ie===66?Q($.applicationKeypad):ie===67?4:ie===1e3?Q(H==="VT200"):ie===1002?Q(H==="DRAG"):ie===1003?Q(H==="ANY"):ie===1004?Q($.sendFocus):ie===1005?4:ie===1006?Q(U==="SGR"):ie===1015?4:ie===1016?Q(U==="SGR_PIXELS"):ie===1048?1:ie===47||ie===1047||ie===1049?Q(J===j):ie===2004?Q($.bracketedPasteMode):0,ee.triggerDataEvent(`${d.C0.ESC}[${O?"":"?"}${re};${pe}$y`),!0;var re,pe}_updateAttrColor(L,O,$,H,U){return O===2?(L|=50331648,L&=-16777216,L|=x.AttributeData.fromColorRGB([$,H,U])):O===5&&(L&=-50331904,L|=33554432|255&$),L}_extractColor(L,O,$){const H=[0,0,-1,0,0,0];let U=0,ee=0;do{if(H[ee+U]=L.params[O+ee],L.hasSubParams(O+ee)){const X=L.getSubParams(O+ee);let ge=0;do H[1]===5&&(U=1),H[ee+ge+1+U]=X[ge];while(++ge<X.length&&ge+ee+1+U<H.length);break}if(H[1]===5&&ee+U>=2||H[1]===2&&ee+U>=5)break;H[1]&&(U=1)}while(++ee+O<L.length&&ee+U<H.length);for(let X=2;X<H.length;++X)H[X]===-1&&(H[X]=0);switch(H[0]){case 38:$.fg=this._updateAttrColor($.fg,H[1],H[3],H[4],H[5]);break;case 48:$.bg=this._updateAttrColor($.bg,H[1],H[3],H[4],H[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,H[1],H[3],H[4],H[5])}return ee}_processUnderline(L,O){O.extended=O.extended.clone(),(!~L||L>5)&&(L=1),O.extended.underlineStyle=L,O.fg|=268435456,L===0&&(O.fg&=-268435457),O.updateExtended()}_processSGR0(L){L.fg=g.DEFAULT_ATTR_DATA.fg,L.bg=g.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const O=L.length;let $;const H=this._curAttrData;for(let U=0;U<O;U++)$=L.params[U],$>=30&&$<=37?(H.fg&=-50331904,H.fg|=16777216|$-30):$>=40&&$<=47?(H.bg&=-50331904,H.bg|=16777216|$-40):$>=90&&$<=97?(H.fg&=-50331904,H.fg|=16777224|$-90):$>=100&&$<=107?(H.bg&=-50331904,H.bg|=16777224|$-100):$===0?this._processSGR0(H):$===1?H.fg|=134217728:$===3?H.bg|=67108864:$===4?(H.fg|=268435456,this._processUnderline(L.hasSubParams(U)?L.getSubParams(U)[0]:1,H)):$===5?H.fg|=536870912:$===7?H.fg|=67108864:$===8?H.fg|=1073741824:$===9?H.fg|=2147483648:$===2?H.bg|=134217728:$===21?this._processUnderline(2,H):$===22?(H.fg&=-134217729,H.bg&=-134217729):$===23?H.bg&=-67108865:$===24?(H.fg&=-268435457,this._processUnderline(0,H)):$===25?H.fg&=-536870913:$===27?H.fg&=-67108865:$===28?H.fg&=-1073741825:$===29?H.fg&=2147483647:$===39?(H.fg&=-67108864,H.fg|=16777215&g.DEFAULT_ATTR_DATA.fg):$===49?(H.bg&=-67108864,H.bg|=16777215&g.DEFAULT_ATTR_DATA.bg):$===38||$===48||$===58?U+=this._extractColor(L,U,H):$===53?H.bg|=1073741824:$===55?H.bg&=-1073741825:$===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):$===100?(H.fg&=-67108864,H.fg|=16777215&g.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&g.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",$);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const O=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${O};${$}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const O=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${O};${$}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=g.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const O=L.params[0]||1;switch(O){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const $=O%2==1;return this._optionsService.options.cursorBlink=$,!0}setScrollRegion(L){const O=L.params[0]||1;let $;return(L.length<2||($=L.params[1])>this._bufferService.rows||$===0)&&($=this._bufferService.rows),$>O&&(this._activeBuffer.scrollTop=O-1,this._activeBuffer.scrollBottom=$-1,this._setCursor(0,0)),!0}windowOptions(L){if(!P(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const O=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:O!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:O!==0&&O!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),O!==0&&O!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:O!==0&&O!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),O!==0&&O!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const O=[],$=L.split(";");for(;$.length>1;){const H=$.shift(),U=$.shift();if(/^\d+$/.exec(H)){const ee=parseInt(H);if(z(ee))if(U==="?")O.push({type:0,index:ee});else{const X=(0,C.parseColor)(U);X&&O.push({type:1,index:ee,color:X})}}}return O.length&&this._onColor.fire(O),!0}setHyperlink(L){const O=L.split(";");return!(O.length<2)&&(O[1]?this._createHyperlink(O[0],O[1]):!O[0]&&this._finishHyperlink())}_createHyperlink(L,O){this._getCurrentLinkId()&&this._finishHyperlink();const $=L.split(":");let H;const U=$.findIndex(ee=>ee.startsWith("id="));return U!==-1&&(H=$[U].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:O}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,O){const $=L.split(";");for(let H=0;H<$.length&&!(O>=this._specialColors.length);++H,++O)if($[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[O]}]);else{const U=(0,C.parseColor)($[H]);U&&this._onColor.fire([{type:1,index:this._specialColors[O],color:U}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const O=[],$=L.split(";");for(let H=0;H<$.length;++H)if(/^\d+$/.exec($[H])){const U=parseInt($[H]);z(U)&&O.push({type:2,index:U})}return O.length&&this._onColor.fire(O),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,h.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(A[L[0]],h.CHARSETS[L[1]]||h.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=g.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=g.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new _.CellData;L.content=4194373,L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let O=0;O<this._bufferService.rows;++O){const $=this._activeBuffer.ybase+this._activeBuffer.y+O,H=this._activeBuffer.lines.get($);H&&(H.fill(L),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,O){const $=this._bufferService.buffer,H=this._optionsService.rawOptions;return(U=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${U}${d.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${$.scrollTop+1};${$.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,O){this._dirtyRowTracker.markRangeDirty(L,O)}}a.InputHandler=F;let G=class{constructor(K){this._bufferService=K,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(K){K<this.start?this.start=K:K>this.end&&(this.end=K)}markRangeDirty(K,L){K>L&&(R=K,K=L,L=R),K<this.start&&(this.start=K),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function z(K){return 0<=K&&K<256}G=c([u(0,w.IBufferService)],G)},844:(o,a)=>{function l(c){for(const u of c)u.dispose();c.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const u=this._disposables.indexOf(c);u!==-1&&this._disposables.splice(u,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){this._isDisposed||c===this._value||(this._value?.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},a.toDisposable=function(c){return{dispose:c}},a.disposeArray=l,a.getDisposeArrayDisposable=function(c){return{dispose:()=>l(c)}}},1505:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(u,d,h){this._data[u]||(this._data[u]={}),this._data[u][d]=h}get(u,d){return this._data[u]?this._data[u][d]:void 0}clear(){this._data={}}}a.TwoKeyMap=l,a.FourKeyMap=class{constructor(){this._data=new l}set(c,u,d,h,f){this._data.get(c,u)||this._data.set(c,u,new l),this._data.get(c,u).set(d,h,f)}get(c,u,d,h){return this._data.get(c,u)?.get(d,h)}clear(){this._data.clear()}}},6114:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof xr<"u"&&"title"in xr;const l=a.isNode?"node":navigator.userAgent,c=a.isNode?"node":navigator.platform;a.isFirefox=l.includes("Firefox"),a.isLegacyEdge=l.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(l),a.getSafariVersion=function(){if(!a.isSafari)return 0;const u=l.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),a.isIpad=c==="iPad",a.isIphone=c==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),a.isLinux=c.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(l)},6106:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let l=0;a.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(l=this._search(this._getKey(c)),this._array.splice(l,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const u=this._getKey(c);if(u===void 0||(l=this._search(u),l===-1)||this._getKey(this._array[l])!==u)return!1;do if(this._array[l]===c)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===u);return!1}*getKeyIterator(c){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===c)}forEachByKey(c,u){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do u(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===c)}values(){return[...this._array].values()}_search(c){let u=0,d=this._array.length-1;for(;d>=u;){let h=u+d>>1;const f=this._getKey(this._array[h]);if(f>c)d=h-1;else{if(!(f<c)){for(;h>0&&this._getKey(this._array[h-1])===c;)h--;return h}u=h+1}}return u}}},7226:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;const c=l(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let b=0,m=0,g=f.timeRemaining(),y=0;for(;this._i<this._tasks.length;){if(b=Date.now(),this._tasks[this._i]()||this._i++,b=Math.max(1,Date.now()-b),m=Math.max(b,m),y=f.timeRemaining(),1.5*m>y)return g-b<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(g-b))}ms`),void this._start();g=y}this.clear()}}class d extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){const b=Date.now()+f;return{timeRemaining:()=>Math.max(0,b-Date.now())}}}a.PriorityTaskQueue=d,a.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(h){return requestIdleCallback(h)}_cancelCallback(h){cancelIdleCallback(h)}}:d,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(h){this._queue.clear(),this._queue.enqueue(h)}flush(){this._queue.flush()}}},9282:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;const c=l(643);a.updateWindowsModeWrappedState=function(u){const d=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),h=d?.get(u.cols-1),f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);f&&h&&(f.isWrapped=h[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&h[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new l;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}a.AttributeData=l;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,h=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=h}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=c},9092:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;const c=l(6349),u=l(7226),d=l(3734),h=l(8437),f=l(4634),b=l(511),m=l(643),g=l(4863),y=l(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(v,_,x){this._hasScrollback=v,this._optionsService=_,this._bufferService=x,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=h.DEFAULT_ATTR_DATA.clone(),this.savedCharset=y.DEFAULT_CHARSET,this.markers=[],this._nullCell=b.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]),this._whitespaceCell=b.CellData.fromCharData([0,m.WHITESPACE_CELL_CHAR,m.WHITESPACE_CELL_WIDTH,m.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(v){return v?(this._nullCell.fg=v.fg,this._nullCell.bg=v.bg,this._nullCell.extended=v.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(v){return v?(this._whitespaceCell.fg=v.fg,this._whitespaceCell.bg=v.bg,this._whitespaceCell.extended=v.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(v,_){return new h.BufferLine(this._bufferService.cols,this.getNullCell(v),_)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const v=this.ybase+this.y-this.ydisp;return v>=0&&v<this._rows}_getCorrectBufferLength(v){if(!this._hasScrollback)return v;const _=v+this._optionsService.rawOptions.scrollback;return _>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:_}fillViewportRows(v){if(this.lines.length===0){v===void 0&&(v=h.DEFAULT_ATTR_DATA);let _=this._rows;for(;_--;)this.lines.push(this.getBlankLine(v))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(v,_){const x=this.getNullCell(h.DEFAULT_ATTR_DATA);let w=0;const S=this._getCorrectBufferLength(_);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<v)for(let E=0;E<this.lines.length;E++)w+=+this.lines.get(E).resize(v,x);let T=0;if(this._rows<_)for(let E=this._rows;E<_;E++)this.lines.length<_+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new h.BufferLine(v,x)):this.ybase>0&&this.lines.length<=this.ybase+this.y+T+1?(this.ybase--,T++,this.ydisp>0&&this.ydisp--):this.lines.push(new h.BufferLine(v,x)));else for(let E=this._rows;E>_;E--)this.lines.length>_+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){const E=this.lines.length-S;E>0&&(this.lines.trimStart(E),this.ybase=Math.max(this.ybase-E,0),this.ydisp=Math.max(this.ydisp-E,0),this.savedY=Math.max(this.savedY-E,0)),this.lines.maxLength=S}this.x=Math.min(this.x,v-1),this.y=Math.min(this.y,_-1),T&&(this.y+=T),this.savedX=Math.min(this.savedX,v-1),this.scrollTop=0}if(this.scrollBottom=_-1,this._isReflowEnabled&&(this._reflow(v,_),this._cols>v))for(let T=0;T<this.lines.length;T++)w+=+this.lines.get(T).resize(v,x);this._cols=v,this._rows=_,this._memoryCleanupQueue.clear(),w>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let v=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,v=!1);let _=0;for(;this._memoryCleanupPosition<this.lines.length;)if(_+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),_>100)return!0;return v}get _isReflowEnabled(){const v=this._optionsService.rawOptions.windowsPty;return v&&v.buildNumber?this._hasScrollback&&v.backend==="conpty"&&v.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(v,_){this._cols!==v&&(v>this._cols?this._reflowLarger(v,_):this._reflowSmaller(v,_))}_reflowLarger(v,_){const x=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,v,this.ybase+this.y,this.getNullCell(h.DEFAULT_ATTR_DATA));if(x.length>0){const w=(0,f.reflowLargerCreateNewLayout)(this.lines,x);(0,f.reflowLargerApplyNewLayout)(this.lines,w.layout),this._reflowLargerAdjustViewport(v,_,w.countRemoved)}}_reflowLargerAdjustViewport(v,_,x){const w=this.getNullCell(h.DEFAULT_ATTR_DATA);let S=x;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<_&&this.lines.push(new h.BufferLine(v,w))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-x,0)}_reflowSmaller(v,_){const x=this.getNullCell(h.DEFAULT_ATTR_DATA),w=[];let S=0;for(let T=this.lines.length-1;T>=0;T--){let E=this.lines.get(T);if(!E||!E.isWrapped&&E.getTrimmedLength()<=v)continue;const C=[E];for(;E.isWrapped&&T>0;)E=this.lines.get(--T),C.unshift(E);const A=this.ybase+this.y;if(A>=T&&A<T+C.length)continue;const I=C[C.length-1].getTrimmedLength(),P=(0,f.reflowSmallerGetNewLineLengths)(C,this._cols,v),D=P.length-C.length;let R;R=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+D):Math.max(0,this.lines.length-this.lines.maxLength+D);const F=[];for(let $=0;$<D;$++){const H=this.getBlankLine(h.DEFAULT_ATTR_DATA,!0);F.push(H)}F.length>0&&(w.push({start:T+C.length+S,newLines:F}),S+=F.length),C.push(...F);let G=P.length-1,z=P[G];z===0&&(G--,z=P[G]);let K=C.length-D-1,L=I;for(;K>=0;){const $=Math.min(L,z);if(C[G]===void 0)break;if(C[G].copyCellsFrom(C[K],L-$,z-$,$,!0),z-=$,z===0&&(G--,z=P[G]),L-=$,L===0){K--;const H=Math.max(K,0);L=(0,f.getWrappedLineTrimmedLength)(C,H,this._cols)}}for(let $=0;$<C.length;$++)P[$]<v&&C[$].setCell(P[$],x);let O=D-R;for(;O-- >0;)this.ybase===0?this.y<_-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-_&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+D,this.ybase+_-1)}if(w.length>0){const T=[],E=[];for(let G=0;G<this.lines.length;G++)E.push(this.lines.get(G));const C=this.lines.length;let A=C-1,I=0,P=w[I];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let D=0;for(let G=Math.min(this.lines.maxLength-1,C+S-1);G>=0;G--)if(P&&P.start>A+D){for(let z=P.newLines.length-1;z>=0;z--)this.lines.set(G--,P.newLines[z]);G++,T.push({index:A+1,amount:P.newLines.length}),D+=P.newLines.length,P=w[++I]}else this.lines.set(G,E[A--]);let R=0;for(let G=T.length-1;G>=0;G--)T[G].index+=R,this.lines.onInsertEmitter.fire(T[G]),R+=T[G].amount;const F=Math.max(0,C+S-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(v,_,x=0,w){const S=this.lines.get(v);return S?S.translateToString(_,x,w):""}getWrappedRangeForLine(v){let _=v,x=v;for(;_>0&&this.lines.get(_).isWrapped;)_--;for(;x+1<this.lines.length&&this.lines.get(x+1).isWrapped;)x++;return{first:_,last:x}}setupTabStops(v){for(v!=null?this.tabs[v]||(v=this.prevStop(v)):(this.tabs={},v=0);v<this._cols;v+=this._optionsService.rawOptions.tabStopWidth)this.tabs[v]=!0}prevStop(v){for(v==null&&(v=this.x);!this.tabs[--v]&&v>0;);return v>=this._cols?this._cols-1:v<0?0:v}nextStop(v){for(v==null&&(v=this.x);!this.tabs[++v]&&v<this._cols;);return v>=this._cols?this._cols-1:v<0?0:v}clearMarkers(v){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].line===v&&(this.markers[_].dispose(),this.markers.splice(_--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].dispose(),this.markers.splice(v--,1);this._isClearing=!1}addMarker(v){const _=new g.Marker(v);return this.markers.push(_),_.register(this.lines.onTrim(x=>{_.line-=x,_.line<0&&_.dispose()})),_.register(this.lines.onInsert(x=>{_.line>=x.index&&(_.line+=x.amount)})),_.register(this.lines.onDelete(x=>{_.line>=x.index&&_.line<x.index+x.amount&&_.dispose(),_.line>x.index&&(_.line-=x.amount)})),_.register(_.onDispose(()=>this._removeMarker(_))),_}_removeMarker(v){this._isClearing||this.markers.splice(this.markers.indexOf(v),1)}}},8437:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;const c=l(3734),u=l(511),d=l(643),h=l(482);a.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let f=0;class b{constructor(g,y,v=!1){this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*g);const _=y||u.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let x=0;x<g;++x)this.setCell(x,_);this.length=g}get(g){const y=this._data[3*g+0],v=2097151&y;return[this._data[3*g+1],2097152&y?this._combined[g]:v?(0,h.stringFromCodePoint)(v):"",y>>22,2097152&y?this._combined[g].charCodeAt(this._combined[g].length-1):v]}set(g,y){this._data[3*g+1]=y[d.CHAR_DATA_ATTR_INDEX],y[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[g]=y[1],this._data[3*g+0]=2097152|g|y[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*g+0]=y[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(g){return this._data[3*g+0]>>22}hasWidth(g){return 12582912&this._data[3*g+0]}getFg(g){return this._data[3*g+1]}getBg(g){return this._data[3*g+2]}hasContent(g){return 4194303&this._data[3*g+0]}getCodePoint(g){const y=this._data[3*g+0];return 2097152&y?this._combined[g].charCodeAt(this._combined[g].length-1):2097151&y}isCombined(g){return 2097152&this._data[3*g+0]}getString(g){const y=this._data[3*g+0];return 2097152&y?this._combined[g]:2097151&y?(0,h.stringFromCodePoint)(2097151&y):""}isProtected(g){return 536870912&this._data[3*g+2]}loadCell(g,y){return f=3*g,y.content=this._data[f+0],y.fg=this._data[f+1],y.bg=this._data[f+2],2097152&y.content&&(y.combinedData=this._combined[g]),268435456&y.bg&&(y.extended=this._extendedAttrs[g]),y}setCell(g,y){2097152&y.content&&(this._combined[g]=y.combinedData),268435456&y.bg&&(this._extendedAttrs[g]=y.extended),this._data[3*g+0]=y.content,this._data[3*g+1]=y.fg,this._data[3*g+2]=y.bg}setCellFromCodepoint(g,y,v,_){268435456&_.bg&&(this._extendedAttrs[g]=_.extended),this._data[3*g+0]=y|v<<22,this._data[3*g+1]=_.fg,this._data[3*g+2]=_.bg}addCodepointToCell(g,y,v){let _=this._data[3*g+0];2097152&_?this._combined[g]+=(0,h.stringFromCodePoint)(y):2097151&_?(this._combined[g]=(0,h.stringFromCodePoint)(2097151&_)+(0,h.stringFromCodePoint)(y),_&=-2097152,_|=2097152):_=y|4194304,v&&(_&=-12582913,_|=v<<22),this._data[3*g+0]=_}insertCells(g,y,v){if((g%=this.length)&&this.getWidth(g-1)===2&&this.setCellFromCodepoint(g-1,0,1,v),y<this.length-g){const _=new u.CellData;for(let x=this.length-g-y-1;x>=0;--x)this.setCell(g+y+x,this.loadCell(g+x,_));for(let x=0;x<y;++x)this.setCell(g+x,v)}else for(let _=g;_<this.length;++_)this.setCell(_,v);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,v)}deleteCells(g,y,v){if(g%=this.length,y<this.length-g){const _=new u.CellData;for(let x=0;x<this.length-g-y;++x)this.setCell(g+x,this.loadCell(g+y+x,_));for(let x=this.length-y;x<this.length;++x)this.setCell(x,v)}else for(let _=g;_<this.length;++_)this.setCell(_,v);g&&this.getWidth(g-1)===2&&this.setCellFromCodepoint(g-1,0,1,v),this.getWidth(g)!==0||this.hasContent(g)||this.setCellFromCodepoint(g,0,1,v)}replaceCells(g,y,v,_=!1){if(_)for(g&&this.getWidth(g-1)===2&&!this.isProtected(g-1)&&this.setCellFromCodepoint(g-1,0,1,v),y<this.length&&this.getWidth(y-1)===2&&!this.isProtected(y)&&this.setCellFromCodepoint(y,0,1,v);g<y&&g<this.length;)this.isProtected(g)||this.setCell(g,v),g++;else for(g&&this.getWidth(g-1)===2&&this.setCellFromCodepoint(g-1,0,1,v),y<this.length&&this.getWidth(y-1)===2&&this.setCellFromCodepoint(y,0,1,v);g<y&&g<this.length;)this.setCell(g++,v)}resize(g,y){if(g===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const v=3*g;if(g>this.length){if(this._data.buffer.byteLength>=4*v)this._data=new Uint32Array(this._data.buffer,0,v);else{const _=new Uint32Array(v);_.set(this._data),this._data=_}for(let _=this.length;_<g;++_)this.setCell(_,y)}else{this._data=this._data.subarray(0,v);const _=Object.keys(this._combined);for(let w=0;w<_.length;w++){const S=parseInt(_[w],10);S>=g&&delete this._combined[S]}const x=Object.keys(this._extendedAttrs);for(let w=0;w<x.length;w++){const S=parseInt(x[w],10);S>=g&&delete this._extendedAttrs[S]}}return this.length=g,4*v*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const g=new Uint32Array(this._data.length);return g.set(this._data),this._data=g,1}return 0}fill(g,y=!1){if(y)for(let v=0;v<this.length;++v)this.isProtected(v)||this.setCell(v,g);else{this._combined={},this._extendedAttrs={};for(let v=0;v<this.length;++v)this.setCell(v,g)}}copyFrom(g){this.length!==g.length?this._data=new Uint32Array(g._data):this._data.set(g._data),this.length=g.length,this._combined={};for(const y in g._combined)this._combined[y]=g._combined[y];this._extendedAttrs={};for(const y in g._extendedAttrs)this._extendedAttrs[y]=g._extendedAttrs[y];this.isWrapped=g.isWrapped}clone(){const g=new b(0);g._data=new Uint32Array(this._data),g.length=this.length;for(const y in this._combined)g._combined[y]=this._combined[y];for(const y in this._extendedAttrs)g._extendedAttrs[y]=this._extendedAttrs[y];return g.isWrapped=this.isWrapped,g}getTrimmedLength(){for(let g=this.length-1;g>=0;--g)if(4194303&this._data[3*g+0])return g+(this._data[3*g+0]>>22);return 0}getNoBgTrimmedLength(){for(let g=this.length-1;g>=0;--g)if(4194303&this._data[3*g+0]||50331648&this._data[3*g+2])return g+(this._data[3*g+0]>>22);return 0}copyCellsFrom(g,y,v,_,x){const w=g._data;if(x)for(let T=_-1;T>=0;T--){for(let E=0;E<3;E++)this._data[3*(v+T)+E]=w[3*(y+T)+E];268435456&w[3*(y+T)+2]&&(this._extendedAttrs[v+T]=g._extendedAttrs[y+T])}else for(let T=0;T<_;T++){for(let E=0;E<3;E++)this._data[3*(v+T)+E]=w[3*(y+T)+E];268435456&w[3*(y+T)+2]&&(this._extendedAttrs[v+T]=g._extendedAttrs[y+T])}const S=Object.keys(g._combined);for(let T=0;T<S.length;T++){const E=parseInt(S[T],10);E>=y&&(this._combined[E-y+v]=g._combined[E])}}translateToString(g,y,v,_){y=y??0,v=v??this.length,g&&(v=Math.min(v,this.getTrimmedLength())),_&&(_.length=0);let x="";for(;y<v;){const w=this._data[3*y+0],S=2097151&w,T=2097152&w?this._combined[y]:S?(0,h.stringFromCodePoint)(S):d.WHITESPACE_CELL_CHAR;if(x+=T,_)for(let E=0;E<T.length;++E)_.push(y);y+=w>>22||1}return _&&_.push(y),x}}a.BufferLine=b},4841:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(l,c){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return c*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(o,a)=>{function l(c,u,d){if(u===c.length-1)return c[u].getTrimmedLength();const h=!c[u].hasContent(d-1)&&c[u].getWidth(d-1)===1,f=c[u+1].getWidth(0)===2;return h&&f?d-1:d}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(c,u,d,h,f){const b=[];for(let m=0;m<c.length-1;m++){let g=m,y=c.get(++g);if(!y.isWrapped)continue;const v=[c.get(m)];for(;g<c.length&&y.isWrapped;)v.push(y),y=c.get(++g);if(h>=m&&h<g){m+=v.length-1;continue}let _=0,x=l(v,_,u),w=1,S=0;for(;w<v.length;){const E=l(v,w,u),C=E-S,A=d-x,I=Math.min(C,A);v[_].copyCellsFrom(v[w],S,x,I,!1),x+=I,x===d&&(_++,x=0),S+=I,S===E&&(w++,S=0),x===0&&_!==0&&v[_-1].getWidth(d-1)===2&&(v[_].copyCellsFrom(v[_-1],d-1,x++,1,!1),v[_-1].setCell(d-1,f))}v[_].replaceCells(x,d,f);let T=0;for(let E=v.length-1;E>0&&(E>_||v[E].getTrimmedLength()===0);E--)T++;T>0&&(b.push(m+v.length-T),b.push(T)),m+=v.length-1}return b},a.reflowLargerCreateNewLayout=function(c,u){const d=[];let h=0,f=u[h],b=0;for(let m=0;m<c.length;m++)if(f===m){const g=u[++h];c.onDeleteEmitter.fire({index:m-b,amount:g}),m+=g-1,b+=g,f=u[++h]}else d.push(m);return{layout:d,countRemoved:b}},a.reflowLargerApplyNewLayout=function(c,u){const d=[];for(let h=0;h<u.length;h++)d.push(c.get(u[h]));for(let h=0;h<d.length;h++)c.set(h,d[h]);c.length=u.length},a.reflowSmallerGetNewLineLengths=function(c,u,d){const h=[],f=c.map((y,v)=>l(c,v,u)).reduce((y,v)=>y+v);let b=0,m=0,g=0;for(;g<f;){if(f-g<d){h.push(f-g);break}b+=d;const y=l(c,m,u);b>y&&(b-=y,m++);const v=c[m].getWidth(b-1)===2;v&&b--;const _=v?d-1:d;h.push(_),g+=_}return h},a.getWrappedLineTrimmedLength=l},5295:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;const c=l(8460),u=l(844),d=l(9092);class h extends u.Disposable{constructor(b,m){super(),this._optionsService=b,this._bufferService=m,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(b){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(b),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(b,m){this._normal.resize(b,m),this._alt.resize(b,m),this.setupTabStops(b)}setupTabStops(b){this._normal.setupTabStops(b),this._alt.setupTabStops(b)}}a.BufferSet=h},511:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;const c=l(482),u=l(643),d=l(3734);class h extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(b){const m=new h;return m.setFromCharData(b),m}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(b){this.fg=b[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let m=!1;if(b[u.CHAR_DATA_CHAR_INDEX].length>2)m=!0;else if(b[u.CHAR_DATA_CHAR_INDEX].length===2){const g=b[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=g&&g<=56319){const y=b[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=y&&y<=57343?this.content=1024*(g-55296)+y-56320+65536|b[u.CHAR_DATA_WIDTH_INDEX]<<22:m=!0}else m=!0}else this.content=b[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[u.CHAR_DATA_WIDTH_INDEX]<<22;m&&(this.combinedData=b[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|b[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=h},643:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;const c=l(8460),u=l(844);class d{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}a.Marker=d,d._nextId=1},7116:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},a.CHARSETS.A={"#":""},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},a.CHARSETS.C=a.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.E=a.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},a.CHARSETS.H=a.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(o,a)=>{var l,c,u;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""}(l||(a.C0=l={})),function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""}(c||(a.C1=c={})),function(d){d.ST=`${l.ESC}\\`}(u||(a.C1_ESCAPED=u={}))},7399:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;const c=l(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(d,h,f,b){const m={type:0,cancel:!1,key:void 0},g=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?m.key=h?c.C0.ESC+"OA":c.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?m.key=h?c.C0.ESC+"OD":c.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?m.key=h?c.C0.ESC+"OC":c.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(m.key=h?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:m.key=d.ctrlKey?"\b":c.C0.DEL,d.altKey&&(m.key=c.C0.ESC+m.key);break;case 9:if(d.shiftKey){m.key=c.C0.ESC+"[Z";break}m.key=c.C0.HT,m.cancel=!0;break;case 13:m.key=d.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,m.cancel=!0;break;case 27:m.key=c.C0.ESC,d.altKey&&(m.key=c.C0.ESC+c.C0.ESC),m.cancel=!0;break;case 37:if(d.metaKey)break;g?(m.key=c.C0.ESC+"[1;"+(g+1)+"D",m.key===c.C0.ESC+"[1;3D"&&(m.key=c.C0.ESC+(f?"b":"[1;5D"))):m.key=h?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(d.metaKey)break;g?(m.key=c.C0.ESC+"[1;"+(g+1)+"C",m.key===c.C0.ESC+"[1;3C"&&(m.key=c.C0.ESC+(f?"f":"[1;5C"))):m.key=h?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(d.metaKey)break;g?(m.key=c.C0.ESC+"[1;"+(g+1)+"A",f||m.key!==c.C0.ESC+"[1;3A"||(m.key=c.C0.ESC+"[1;5A")):m.key=h?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(d.metaKey)break;g?(m.key=c.C0.ESC+"[1;"+(g+1)+"B",f||m.key!==c.C0.ESC+"[1;3B"||(m.key=c.C0.ESC+"[1;5B")):m.key=h?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(m.key=c.C0.ESC+"[2~");break;case 46:m.key=g?c.C0.ESC+"[3;"+(g+1)+"~":c.C0.ESC+"[3~";break;case 36:m.key=g?c.C0.ESC+"[1;"+(g+1)+"H":h?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:m.key=g?c.C0.ESC+"[1;"+(g+1)+"F":h?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:d.shiftKey?m.type=2:d.ctrlKey?m.key=c.C0.ESC+"[5;"+(g+1)+"~":m.key=c.C0.ESC+"[5~";break;case 34:d.shiftKey?m.type=3:d.ctrlKey?m.key=c.C0.ESC+"[6;"+(g+1)+"~":m.key=c.C0.ESC+"[6~";break;case 112:m.key=g?c.C0.ESC+"[1;"+(g+1)+"P":c.C0.ESC+"OP";break;case 113:m.key=g?c.C0.ESC+"[1;"+(g+1)+"Q":c.C0.ESC+"OQ";break;case 114:m.key=g?c.C0.ESC+"[1;"+(g+1)+"R":c.C0.ESC+"OR";break;case 115:m.key=g?c.C0.ESC+"[1;"+(g+1)+"S":c.C0.ESC+"OS";break;case 116:m.key=g?c.C0.ESC+"[15;"+(g+1)+"~":c.C0.ESC+"[15~";break;case 117:m.key=g?c.C0.ESC+"[17;"+(g+1)+"~":c.C0.ESC+"[17~";break;case 118:m.key=g?c.C0.ESC+"[18;"+(g+1)+"~":c.C0.ESC+"[18~";break;case 119:m.key=g?c.C0.ESC+"[19;"+(g+1)+"~":c.C0.ESC+"[19~";break;case 120:m.key=g?c.C0.ESC+"[20;"+(g+1)+"~":c.C0.ESC+"[20~";break;case 121:m.key=g?c.C0.ESC+"[21;"+(g+1)+"~":c.C0.ESC+"[21~";break;case 122:m.key=g?c.C0.ESC+"[23;"+(g+1)+"~":c.C0.ESC+"[23~";break;case 123:m.key=g?c.C0.ESC+"[24;"+(g+1)+"~":c.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(f&&!b||!d.altKey||d.metaKey)!f||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?m.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(m.key=c.C0.US),d.key==="@"&&(m.key=c.C0.NUL)):d.keyCode===65&&(m.type=1);else{const y=u[d.keyCode],v=y?.[d.shiftKey?1:0];if(v)m.key=c.C0.ESC+v;else if(d.keyCode>=65&&d.keyCode<=90){const _=d.ctrlKey?d.keyCode-64:d.keyCode+32;let x=String.fromCharCode(_);d.shiftKey&&(x=x.toUpperCase()),m.key=c.C0.ESC+x}else if(d.keyCode===32)m.key=c.C0.ESC+(d.ctrlKey?c.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let _=d.code.slice(3,4);d.shiftKey||(_=_.toLowerCase()),m.key=c.C0.ESC+_,m.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?m.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?m.key=c.C0.NUL:d.keyCode>=51&&d.keyCode<=55?m.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?m.key=c.C0.DEL:d.keyCode===219?m.key=c.C0.ESC:d.keyCode===220?m.key=c.C0.FS:d.keyCode===221&&(m.key=c.C0.GS)}return m}},482:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},a.utf32ToString=function(l,c=0,u=l.length){let d="";for(let h=c;h<u;++h){let f=l[h];f>65535?(f-=65536,d+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):d+=String.fromCharCode(f)}return d},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,c){const u=l.length;if(!u)return 0;let d=0,h=0;if(this._interim){const f=l.charCodeAt(h++);56320<=f&&f<=57343?c[d++]=1024*(this._interim-55296)+f-56320+65536:(c[d++]=this._interim,c[d++]=f),this._interim=0}for(let f=h;f<u;++f){const b=l.charCodeAt(f);if(55296<=b&&b<=56319){if(++f>=u)return this._interim=b,d;const m=l.charCodeAt(f);56320<=m&&m<=57343?c[d++]=1024*(b-55296)+m-56320+65536:(c[d++]=b,c[d++]=m)}else b!==65279&&(c[d++]=b)}return d}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,c){const u=l.length;if(!u)return 0;let d,h,f,b,m=0,g=0,y=0;if(this.interim[0]){let x=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let S,T=0;for(;(S=63&this.interim[++T])&&T<4;)w<<=6,w|=S;const E=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=E-T;for(;y<C;){if(y>=u)return 0;if(S=l[y++],(192&S)!=128){y--,x=!0;break}this.interim[T++]=S,w<<=6,w|=63&S}x||(E===2?w<128?y--:c[m++]=w:E===3?w<2048||w>=55296&&w<=57343||w===65279||(c[m++]=w):w<65536||w>1114111||(c[m++]=w)),this.interim.fill(0)}const v=u-4;let _=y;for(;_<u;){for(;!(!(_<v)||128&(d=l[_])||128&(h=l[_+1])||128&(f=l[_+2])||128&(b=l[_+3]));)c[m++]=d,c[m++]=h,c[m++]=f,c[m++]=b,_+=4;if(d=l[_++],d<128)c[m++]=d;else if((224&d)==192){if(_>=u)return this.interim[0]=d,m;if(h=l[_++],(192&h)!=128){_--;continue}if(g=(31&d)<<6|63&h,g<128){_--;continue}c[m++]=g}else if((240&d)==224){if(_>=u)return this.interim[0]=d,m;if(h=l[_++],(192&h)!=128){_--;continue}if(_>=u)return this.interim[0]=d,this.interim[1]=h,m;if(f=l[_++],(192&f)!=128){_--;continue}if(g=(15&d)<<12|(63&h)<<6|63&f,g<2048||g>=55296&&g<=57343||g===65279)continue;c[m++]=g}else if((248&d)==240){if(_>=u)return this.interim[0]=d,m;if(h=l[_++],(192&h)!=128){_--;continue}if(_>=u)return this.interim[0]=d,this.interim[1]=h,m;if(f=l[_++],(192&f)!=128){_--;continue}if(_>=u)return this.interim[0]=d,this.interim[1]=h,this.interim[2]=f,m;if(b=l[_++],(192&b)!=128){_--;continue}if(g=(7&d)<<18|(63&h)<<12|(63&f)<<6|63&b,g<65536||g>1114111)continue;c[m++]=g}}return m}}},225:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;const c=l(1480),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let h;a.UnicodeV6=class{constructor(){if(this.version="6",!h){h=new Uint8Array(65536),h.fill(1),h[0]=0,h.fill(0,1,32),h.fill(0,127,160),h.fill(2,4352,4448),h[9001]=2,h[9002]=2,h.fill(2,11904,42192),h[12351]=1,h.fill(2,44032,55204),h.fill(2,63744,64256),h.fill(2,65040,65050),h.fill(2,65072,65136),h.fill(2,65280,65377),h.fill(2,65504,65511);for(let f=0;f<u.length;++f)h.fill(0,u[f][0],u[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?h[f]:function(b,m){let g,y=0,v=m.length-1;if(b<m[0][0]||b>m[v][1])return!1;for(;v>=y;)if(g=y+v>>1,b>m[g][1])y=g+1;else{if(!(b<m[g][0]))return!0;v=g-1}return!1}(f,d)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}charProperties(f,b){let m=this.wcwidth(f),g=m===0&&b!==0;if(g){const y=c.UnicodeService.extractWidth(b);y===0?g=!1:y>m&&(m=y)}return c.UnicodeService.createPropertyValue(0,m,g)}}},5981:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;const c=l(8460),u=l(844);class d extends u.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,b){if(b!==void 0&&this._syncCalls>b)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let m;for(this._isSyncWriting=!0;m=this._writeBuffer.shift();){this._action(m);const g=this._callbacks.shift();g&&g()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,b){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(b),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(b)}_innerWrite(f=0,b=!0){const m=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const g=this._writeBuffer[this._bufferOffset],y=this._action(g,b);if(y){const _=x=>Date.now()-m>=12?setTimeout(()=>this._innerWrite(0,x)):this._innerWrite(m,x);return void y.catch(x=>(queueMicrotask(()=>{throw x}),Promise.resolve(!1))).then(_)}const v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=g.length,Date.now()-m>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=d},5941:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function u(d,h){const f=d.toString(16),b=f.length<2?"0"+f:f;switch(h){case 4:return f[0];case 8:return b;case 12:return(b+b).slice(0,3);default:return b+b}}a.parseColor=function(d){if(!d)return;let h=d.toLowerCase();if(h.indexOf("rgb:")===0){h=h.slice(4);const f=l.exec(h);if(f){const b=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/b*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/b*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/b*255)]}}else if(h.indexOf("#")===0&&(h=h.slice(1),c.exec(h)&&[3,6,9,12].includes(h.length))){const f=h.length/3,b=[0,0,0];for(let m=0;m<3;++m){const g=parseInt(h.slice(f*m,f*m+f),16);b[m]=f===1?g<<4:f===2?g:f===3?g>>4:g>>8}return b}},a.toRgbString=function(d,h=16){const[f,b,m]=d;return`rgb:${u(f,h)}/${u(b,h)}/${u(m,h)}`}},5770:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;const c=l(482),u=l(8742),d=l(5770),h=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=h,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}registerHandler(b,m){this._handlers[b]===void 0&&(this._handlers[b]=[]);const g=this._handlers[b];return g.push(m),{dispose:()=>{const y=g.indexOf(m);y!==-1&&g.splice(y,1)}}}clearHandler(b){this._handlers[b]&&delete this._handlers[b]}setHandlerFallback(b){this._handlerFb=b}reset(){if(this._active.length)for(let b=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;b>=0;--b)this._active[b].unhook(!1);this._stack.paused=!1,this._active=h,this._ident=0}hook(b,m){if(this.reset(),this._ident=b,this._active=this._handlers[b]||h,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].hook(m);else this._handlerFb(this._ident,"HOOK",m)}put(b,m,g){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(b,m,g);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(b,m,g))}unhook(b,m=!0){if(this._active.length){let g=!1,y=this._active.length-1,v=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,g=m,v=this._stack.fallThrough,this._stack.paused=!1),!v&&g===!1){for(;y>=0&&(g=this._active[y].unhook(b),g!==!0);y--)if(g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,g;y--}for(;y>=0;y--)if(g=this._active[y].unhook(!1),g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,g}else this._handlerFb(this._ident,"UNHOOK",b);this._active=h,this._ident=0}};const f=new u.Params;f.addParam(0),a.DcsHandler=class{constructor(b){this._handler=b,this._data="",this._params=f,this._hitLimit=!1}hook(b){this._params=b.length>1||b.params[0]?b.clone():f,this._data="",this._hitLimit=!1}put(b,m,g){this._hitLimit||(this._data+=(0,c.utf32ToString)(b,m,g),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(b){let m=!1;if(this._hitLimit)m=!1;else if(b&&(m=this._handler(this._data,this._params),m instanceof Promise))return m.then(g=>(this._params=f,this._data="",this._hitLimit=!1,g));return this._params=f,this._data="",this._hitLimit=!1,m}}},2015:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;const c=l(844),u=l(8742),d=l(6242),h=l(6351);class f{constructor(y){this.table=new Uint8Array(y)}setDefault(y,v){this.table.fill(y<<4|v)}add(y,v,_,x){this.table[v<<8|y]=_<<4|x}addMany(y,v,_,x){for(let w=0;w<y.length;w++)this.table[v<<8|y[w]]=_<<4|x}}a.TransitionTable=f;const b=160;a.VT500_TRANSITION_TABLE=function(){const g=new f(4095),y=Array.apply(null,Array(256)).map((T,E)=>E),v=(T,E)=>y.slice(T,E),_=v(32,127),x=v(0,24);x.push(25),x.push.apply(x,v(28,32));const w=v(0,14);let S;for(S in g.setDefault(1,0),g.addMany(_,0,2,0),w)g.addMany([24,26,153,154],S,3,0),g.addMany(v(128,144),S,3,0),g.addMany(v(144,152),S,3,0),g.add(156,S,0,0),g.add(27,S,11,1),g.add(157,S,4,8),g.addMany([152,158,159],S,0,7),g.add(155,S,11,3),g.add(144,S,11,9);return g.addMany(x,0,3,0),g.addMany(x,1,3,1),g.add(127,1,0,1),g.addMany(x,8,0,8),g.addMany(x,3,3,3),g.add(127,3,0,3),g.addMany(x,4,3,4),g.add(127,4,0,4),g.addMany(x,6,3,6),g.addMany(x,5,3,5),g.add(127,5,0,5),g.addMany(x,2,3,2),g.add(127,2,0,2),g.add(93,1,4,8),g.addMany(_,8,5,8),g.add(127,8,5,8),g.addMany([156,27,24,26,7],8,6,0),g.addMany(v(28,32),8,0,8),g.addMany([88,94,95],1,0,7),g.addMany(_,7,0,7),g.addMany(x,7,0,7),g.add(156,7,0,0),g.add(127,7,0,7),g.add(91,1,11,3),g.addMany(v(64,127),3,7,0),g.addMany(v(48,60),3,8,4),g.addMany([60,61,62,63],3,9,4),g.addMany(v(48,60),4,8,4),g.addMany(v(64,127),4,7,0),g.addMany([60,61,62,63],4,0,6),g.addMany(v(32,64),6,0,6),g.add(127,6,0,6),g.addMany(v(64,127),6,0,0),g.addMany(v(32,48),3,9,5),g.addMany(v(32,48),5,9,5),g.addMany(v(48,64),5,0,6),g.addMany(v(64,127),5,7,0),g.addMany(v(32,48),4,9,5),g.addMany(v(32,48),1,9,2),g.addMany(v(32,48),2,9,2),g.addMany(v(48,127),2,10,0),g.addMany(v(48,80),1,10,0),g.addMany(v(81,88),1,10,0),g.addMany([89,90,92],1,10,0),g.addMany(v(96,127),1,10,0),g.add(80,1,11,9),g.addMany(x,9,0,9),g.add(127,9,0,9),g.addMany(v(28,32),9,0,9),g.addMany(v(32,48),9,9,12),g.addMany(v(48,60),9,8,10),g.addMany([60,61,62,63],9,9,10),g.addMany(x,11,0,11),g.addMany(v(32,128),11,0,11),g.addMany(v(28,32),11,0,11),g.addMany(x,10,0,10),g.add(127,10,0,10),g.addMany(v(28,32),10,0,10),g.addMany(v(48,60),10,8,10),g.addMany([60,61,62,63],10,0,11),g.addMany(v(32,48),10,9,12),g.addMany(x,12,0,12),g.add(127,12,0,12),g.addMany(v(28,32),12,0,12),g.addMany(v(32,48),12,9,12),g.addMany(v(48,64),12,0,11),g.addMany(v(64,127),12,12,13),g.addMany(v(64,127),10,12,13),g.addMany(v(64,127),9,12,13),g.addMany(x,13,13,13),g.addMany(_,13,13,13),g.add(127,13,0,13),g.addMany([27,156,24,26],13,14,0),g.add(b,0,2,0),g.add(b,8,5,8),g.add(b,6,0,6),g.add(b,11,0,11),g.add(b,13,13,13),g}();class m extends c.Disposable{constructor(y=a.VT500_TRANSITION_TABLE){super(),this._transitions=y,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(v,_,x)=>{},this._executeHandlerFb=v=>{},this._csiHandlerFb=(v,_)=>{},this._escHandlerFb=v=>{},this._errorHandlerFb=v=>v,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new h.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(y,v=[64,126]){let _=0;if(y.prefix){if(y.prefix.length>1)throw new Error("only one byte as prefix supported");if(_=y.prefix.charCodeAt(0),_&&60>_||_>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(y.intermediates){if(y.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let w=0;w<y.intermediates.length;++w){const S=y.intermediates.charCodeAt(w);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");_<<=8,_|=S}}if(y.final.length!==1)throw new Error("final must be a single byte");const x=y.final.charCodeAt(0);if(v[0]>x||x>v[1])throw new Error(`final must be in range ${v[0]} .. ${v[1]}`);return _<<=8,_|=x,_}identToString(y){const v=[];for(;y;)v.push(String.fromCharCode(255&y)),y>>=8;return v.reverse().join("")}setPrintHandler(y){this._printHandler=y}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(y,v){const _=this._identifier(y,[48,126]);this._escHandlers[_]===void 0&&(this._escHandlers[_]=[]);const x=this._escHandlers[_];return x.push(v),{dispose:()=>{const w=x.indexOf(v);w!==-1&&x.splice(w,1)}}}clearEscHandler(y){this._escHandlers[this._identifier(y,[48,126])]&&delete this._escHandlers[this._identifier(y,[48,126])]}setEscHandlerFallback(y){this._escHandlerFb=y}setExecuteHandler(y,v){this._executeHandlers[y.charCodeAt(0)]=v}clearExecuteHandler(y){this._executeHandlers[y.charCodeAt(0)]&&delete this._executeHandlers[y.charCodeAt(0)]}setExecuteHandlerFallback(y){this._executeHandlerFb=y}registerCsiHandler(y,v){const _=this._identifier(y);this._csiHandlers[_]===void 0&&(this._csiHandlers[_]=[]);const x=this._csiHandlers[_];return x.push(v),{dispose:()=>{const w=x.indexOf(v);w!==-1&&x.splice(w,1)}}}clearCsiHandler(y){this._csiHandlers[this._identifier(y)]&&delete this._csiHandlers[this._identifier(y)]}setCsiHandlerFallback(y){this._csiHandlerFb=y}registerDcsHandler(y,v){return this._dcsParser.registerHandler(this._identifier(y),v)}clearDcsHandler(y){this._dcsParser.clearHandler(this._identifier(y))}setDcsHandlerFallback(y){this._dcsParser.setHandlerFallback(y)}registerOscHandler(y,v){return this._oscParser.registerHandler(y,v)}clearOscHandler(y){this._oscParser.clearHandler(y)}setOscHandlerFallback(y){this._oscParser.setHandlerFallback(y)}setErrorHandler(y){this._errorHandler=y}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(y,v,_,x,w){this._parseStack.state=y,this._parseStack.handlers=v,this._parseStack.handlerPos=_,this._parseStack.transition=x,this._parseStack.chunkPos=w}parse(y,v,_){let x,w=0,S=0,T=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,T=this._parseStack.chunkPos+1;else{if(_===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const E=this._parseStack.handlers;let C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(_===!1&&C>-1){for(;C>=0&&(x=E[C](this._params),x!==!0);C--)if(x instanceof Promise)return this._parseStack.handlerPos=C,x}this._parseStack.handlers=[];break;case 4:if(_===!1&&C>-1){for(;C>=0&&(x=E[C](),x!==!0);C--)if(x instanceof Promise)return this._parseStack.handlerPos=C,x}this._parseStack.handlers=[];break;case 6:if(w=y[this._parseStack.chunkPos],x=this._dcsParser.unhook(w!==24&&w!==26,_),x)return x;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(w=y[this._parseStack.chunkPos],x=this._oscParser.end(w!==24&&w!==26,_),x)return x;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,T=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let E=T;E<v;++E){switch(w=y[E],S=this._transitions.table[this.currentState<<8|(w<160?w:b)],S>>4){case 2:for(let D=E+1;;++D){if(D>=v||(w=y[D])<32||w>126&&w<b){this._printHandler(y,E,D),E=D-1;break}if(++D>=v||(w=y[D])<32||w>126&&w<b){this._printHandler(y,E,D),E=D-1;break}if(++D>=v||(w=y[D])<32||w>126&&w<b){this._printHandler(y,E,D),E=D-1;break}if(++D>=v||(w=y[D])<32||w>126&&w<b){this._printHandler(y,E,D),E=D-1;break}}break;case 3:this._executeHandlers[w]?this._executeHandlers[w]():this._executeHandlerFb(w),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:E,code:w,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const C=this._csiHandlers[this._collect<<8|w];let A=C?C.length-1:-1;for(;A>=0&&(x=C[A](this._params),x!==!0);A--)if(x instanceof Promise)return this._preserveStack(3,C,A,S,E),x;A<0&&this._csiHandlerFb(this._collect<<8|w,this._params),this.precedingJoinState=0;break;case 8:do switch(w){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(w-48)}while(++E<v&&(w=y[E])>47&&w<60);E--;break;case 9:this._collect<<=8,this._collect|=w;break;case 10:const I=this._escHandlers[this._collect<<8|w];let P=I?I.length-1:-1;for(;P>=0&&(x=I[P](),x!==!0);P--)if(x instanceof Promise)return this._preserveStack(4,I,P,S,E),x;P<0&&this._escHandlerFb(this._collect<<8|w),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|w,this._params);break;case 13:for(let D=E+1;;++D)if(D>=v||(w=y[D])===24||w===26||w===27||w>127&&w<b){this._dcsParser.put(y,E,D),E=D-1;break}break;case 14:if(x=this._dcsParser.unhook(w!==24&&w!==26),x)return this._preserveStack(6,[],0,S,E),x;w===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let D=E+1;;D++)if(D>=v||(w=y[D])<32||w>127&&w<b){this._oscParser.put(y,E,D),E=D-1;break}break;case 6:if(x=this._oscParser.end(w!==24&&w!==26),x)return this._preserveStack(5,[],0,S,E),x;w===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&S}}}a.EscapeSequenceParser=m},6242:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;const c=l(5770),u=l(482),d=[];a.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(h,f){this._handlers[h]===void 0&&(this._handlers[h]=[]);const b=this._handlers[h];return b.push(f),{dispose:()=>{const m=b.indexOf(f);m!==-1&&b.splice(m,1)}}}clearHandler(h){this._handlers[h]&&delete this._handlers[h]}setHandlerFallback(h){this._handlerFb=h}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let h=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;h>=0;--h)this._active[h].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].start();else this._handlerFb(this._id,"START")}_put(h,f,b){if(this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].put(h,f,b);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(h,f,b))}start(){this.reset(),this._state=1}put(h,f,b){if(this._state!==3){if(this._state===1)for(;f<b;){const m=h[f++];if(m===59){this._state=2,this._start();break}if(m<48||57<m)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+m-48}this._state===2&&b-f>0&&this._put(h,f,b)}}end(h,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let b=!1,m=this._active.length-1,g=!1;if(this._stack.paused&&(m=this._stack.loopPosition-1,b=f,g=this._stack.fallThrough,this._stack.paused=!1),!g&&b===!1){for(;m>=0&&(b=this._active[m].end(h),b!==!0);m--)if(b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!1,b;m--}for(;m>=0;m--)if(b=this._active[m].end(!1),b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!0,b}else this._handlerFb(this._id,"END",h);this._active=d,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(h){this._handler=h,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(h,f,b){this._hitLimit||(this._data+=(0,u.utf32ToString)(h,f,b),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(h){let f=!1;if(this._hitLimit)f=!1;else if(h&&(f=this._handler(this._data),f instanceof Promise))return f.then(b=>(this._data="",this._hitLimit=!1,b));return this._data="",this._hitLimit=!1,f}}},8742:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;const l=2147483647;class c{static fromArray(d){const h=new c;if(!d.length)return h;for(let f=Array.isArray(d[0])?1:0;f<d.length;++f){const b=d[f];if(Array.isArray(b))for(let m=0;m<b.length;++m)h.addSubParam(b[m]);else h.addParam(b)}return h}constructor(d=32,h=32){if(this.maxLength=d,this.maxSubParamsLength=h,h>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(h),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new c(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let h=0;h<this.length;++h){d.push(this.params[h]);const f=this._subParamsIdx[h]>>8,b=255&this._subParamsIdx[h];b-f>0&&d.push(Array.prototype.slice.call(this._subParams,f,b))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>l?l:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>l?l:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const h=this._subParamsIdx[d]>>8,f=255&this._subParamsIdx[d];return f-h>0?this._subParams.subarray(h,f):null}getSubParamsAll(){const d={};for(let h=0;h<this.length;++h){const f=this._subParamsIdx[h]>>8,b=255&this._subParamsIdx[h];b-f>0&&(d[h]=this._subParams.slice(f,b))}return d}addDigit(d){let h;if(this._rejectDigits||!(h=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const f=this._digitIsSub?this._subParams:this.params,b=f[h-1];f[h-1]=~b?Math.min(10*b+d,l):d}}a.Params=c},5741:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,c){const u={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(u),c.dispose=()=>this._wrappedAddonDispose(u),c.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let c=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===l){c=u;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(c,1)}}},8771:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;const c=l(3785),u=l(511);a.BufferApiView=class{constructor(d,h){this._buffer=d,this.type=h}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const h=this._buffer.lines.get(d);if(h)return new c.BufferLineApiView(h)}getNullCell(){return new u.CellData}}},3785:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;const c=l(511);a.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,d){if(!(u<0||u>=this._line.length))return d?(this._line.loadCell(u,d),d):this._line.loadCell(u,new c.CellData)}translateToString(u,d,h){return this._line.translateToString(u,d,h)}}},8285:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;const c=l(8771),u=l(8460),d=l(844);class h extends d.Disposable{constructor(b){super(),this._core=b,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=h},7975:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,c){return this._core.registerCsiHandler(l,u=>c(u.toArray()))}addCsiHandler(l,c){return this.registerCsiHandler(l,c)}registerDcsHandler(l,c){return this._core.registerDcsHandler(l,(u,d)=>c(u,d.toArray()))}addDcsHandler(l,c){return this.registerDcsHandler(l,c)}registerEscHandler(l,c){return this._core.registerEscHandler(l,c)}addEscHandler(l,c){return this.registerEscHandler(l,c)}registerOscHandler(l,c){return this._core.registerOscHandler(l,c)}addOscHandler(l,c){return this.registerOscHandler(l,c)}}},7090:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(o,a,l){var c=this&&this.__decorate||function(g,y,v,_){var x,w=arguments.length,S=w<3?y:_===null?_=Object.getOwnPropertyDescriptor(y,v):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,y,v,_);else for(var T=g.length-1;T>=0;T--)(x=g[T])&&(S=(w<3?x(S):w>3?x(y,v,S):x(y,v))||S);return w>3&&S&&Object.defineProperty(y,v,S),S},u=this&&this.__param||function(g,y){return function(v,_){y(v,_,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;const d=l(8460),h=l(844),f=l(5295),b=l(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let m=a.BufferService=class extends h.Disposable{get buffer(){return this.buffers.active}constructor(g){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(g.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(g.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(g,this))}resize(g,y){this.cols=g,this.rows=y,this.buffers.resize(g,y),this._onResize.fire({cols:g,rows:y})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(g,y=!1){const v=this.buffer;let _;_=this._cachedBlankLine,_&&_.length===this.cols&&_.getFg(0)===g.fg&&_.getBg(0)===g.bg||(_=v.getBlankLine(g,y),this._cachedBlankLine=_),_.isWrapped=y;const x=v.ybase+v.scrollTop,w=v.ybase+v.scrollBottom;if(v.scrollTop===0){const S=v.lines.isFull;w===v.lines.length-1?S?v.lines.recycle().copyFrom(_):v.lines.push(_.clone()):v.lines.splice(w+1,0,_.clone()),S?this.isUserScrolling&&(v.ydisp=Math.max(v.ydisp-1,0)):(v.ybase++,this.isUserScrolling||v.ydisp++)}else{const S=w-x+1;v.lines.shiftElements(x+1,S-1,-1),v.lines.set(w,_.clone())}this.isUserScrolling||(v.ydisp=v.ybase),this._onScroll.fire(v.ydisp)}scrollLines(g,y,v){const _=this.buffer;if(g<0){if(_.ydisp===0)return;this.isUserScrolling=!0}else g+_.ydisp>=_.ybase&&(this.isUserScrolling=!1);const x=_.ydisp;_.ydisp=Math.max(Math.min(_.ydisp+g,_.ybase),0),x!==_.ydisp&&(y||this._onScroll.fire(_.ydisp))}};a.BufferService=m=c([u(0,b.IOptionsService)],m)},7994:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,c){this._charsets[l]=c,this.glevel===l&&(this.charset=c)}}},1753:function(o,a,l){var c=this&&this.__decorate||function(_,x,w,S){var T,E=arguments.length,C=E<3?x:S===null?S=Object.getOwnPropertyDescriptor(x,w):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,x,w,S);else for(var A=_.length-1;A>=0;A--)(T=_[A])&&(C=(E<3?T(C):E>3?T(x,w,C):T(x,w))||C);return E>3&&C&&Object.defineProperty(x,w,C),C},u=this&&this.__param||function(_,x){return function(w,S){x(w,S,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;const d=l(2585),h=l(8460),f=l(844),b={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:_=>_.button!==4&&_.action===1&&(_.ctrl=!1,_.alt=!1,_.shift=!1,!0)},VT200:{events:19,restrict:_=>_.action!==32},DRAG:{events:23,restrict:_=>_.action!==32||_.button!==3},ANY:{events:31,restrict:_=>!0}};function m(_,x){let w=(_.ctrl?16:0)|(_.shift?4:0)|(_.alt?8:0);return _.button===4?(w|=64,w|=_.action):(w|=3&_.button,4&_.button&&(w|=64),8&_.button&&(w|=128),_.action===32?w|=32:_.action!==0||x||(w|=3)),w}const g=String.fromCharCode,y={DEFAULT:_=>{const x=[m(_,!1)+32,_.col+32,_.row+32];return x[0]>255||x[1]>255||x[2]>255?"":`\x1B[M${g(x[0])}${g(x[1])}${g(x[2])}`},SGR:_=>{const x=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${m(_,!0)};${_.col};${_.row}${x}`},SGR_PIXELS:_=>{const x=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${m(_,!0)};${_.x};${_.y}${x}`}};let v=a.CoreMouseService=class extends f.Disposable{constructor(_,x){super(),this._bufferService=_,this._coreService=x,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new h.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const w of Object.keys(b))this.addProtocol(w,b[w]);for(const w of Object.keys(y))this.addEncoding(w,y[w]);this.reset()}addProtocol(_,x){this._protocols[_]=x}addEncoding(_,x){this._encodings[_]=x}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(_){if(!this._protocols[_])throw new Error(`unknown protocol "${_}"`);this._activeProtocol=_,this._onProtocolChange.fire(this._protocols[_].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(_){if(!this._encodings[_])throw new Error(`unknown encoding "${_}"`);this._activeEncoding=_}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(_){if(_.col<0||_.col>=this._bufferService.cols||_.row<0||_.row>=this._bufferService.rows||_.button===4&&_.action===32||_.button===3&&_.action!==32||_.button!==4&&(_.action===2||_.action===3)||(_.col++,_.row++,_.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,_,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(_))return!1;const x=this._encodings[this._activeEncoding](_);return x&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(x):this._coreService.triggerDataEvent(x,!0)),this._lastEvent=_,!0}explainEvents(_){return{down:!!(1&_),up:!!(2&_),drag:!!(4&_),move:!!(8&_),wheel:!!(16&_)}}_equalEvents(_,x,w){if(w){if(_.x!==x.x||_.y!==x.y)return!1}else if(_.col!==x.col||_.row!==x.row)return!1;return _.button===x.button&&_.action===x.action&&_.ctrl===x.ctrl&&_.alt===x.alt&&_.shift===x.shift}};a.CoreMouseService=v=c([u(0,d.IBufferService),u(1,d.ICoreService)],v)},6975:function(o,a,l){var c=this&&this.__decorate||function(v,_,x,w){var S,T=arguments.length,E=T<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,x):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,_,x,w);else for(var C=v.length-1;C>=0;C--)(S=v[C])&&(E=(T<3?S(E):T>3?S(_,x,E):S(_,x))||E);return T>3&&E&&Object.defineProperty(_,x,E),E},u=this&&this.__param||function(v,_){return function(x,w){_(x,w,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;const d=l(1439),h=l(8460),f=l(844),b=l(2585),m=Object.freeze({insertMode:!1}),g=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let y=a.CoreService=class extends f.Disposable{constructor(v,_,x){super(),this._bufferService=v,this._logService=_,this._optionsService=x,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new h.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new h.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(m),this.decPrivateModes=(0,d.clone)(g)}reset(){this.modes=(0,d.clone)(m),this.decPrivateModes=(0,d.clone)(g)}triggerDataEvent(v,_=!1){if(this._optionsService.rawOptions.disableStdin)return;const x=this._bufferService.buffer;_&&this._optionsService.rawOptions.scrollOnUserInput&&x.ybase!==x.ydisp&&this._onRequestScrollToBottom.fire(),_&&this._onUserInput.fire(),this._logService.debug(`sending data "${v}"`,()=>v.split("").map(w=>w.charCodeAt(0))),this._onData.fire(v)}triggerBinaryEvent(v){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${v}"`,()=>v.split("").map(_=>_.charCodeAt(0))),this._onBinary.fire(v))}};a.CoreService=y=c([u(0,b.IBufferService),u(1,b.ILogService),u(2,b.IOptionsService)],y)},9074:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;const c=l(8055),u=l(8460),d=l(844),h=l(6106);let f=0,b=0;class m extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new h.SortedList(v=>v?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>this.reset()))}registerDecoration(v){if(v.marker.isDisposed)return;const _=new g(v);if(_){const x=_.marker.onDispose(()=>_.dispose());_.onDispose(()=>{_&&(this._decorations.delete(_)&&this._onDecorationRemoved.fire(_),x.dispose())}),this._decorations.insert(_),this._onDecorationRegistered.fire(_)}return _}reset(){for(const v of this._decorations.values())v.dispose();this._decorations.clear()}*getDecorationsAtCell(v,_,x){let w=0,S=0;for(const T of this._decorations.getKeyIterator(_))w=T.options.x??0,S=w+(T.options.width??1),v>=w&&v<S&&(!x||(T.options.layer??"bottom")===x)&&(yield T)}forEachDecorationAtCell(v,_,x,w){this._decorations.forEachByKey(_,S=>{f=S.options.x??0,b=f+(S.options.width??1),v>=f&&v<b&&(!x||(S.options.layer??"bottom")===x)&&w(S)})}}a.DecorationService=m;class g extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(v){super(),this.options=v,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=v.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;const c=l(2585),u=l(8343);class d{constructor(...f){this._entries=new Map;for(const[b,m]of f)this.set(b,m)}set(f,b){const m=this._entries.get(f);return this._entries.set(f,b),m}forEach(f){for(const[b,m]of this._entries.entries())f(b,m)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}a.ServiceCollection=d,a.InstantiationService=class{constructor(){this._services=new d,this._services.set(c.IInstantiationService,this)}setService(h,f){this._services.set(h,f)}getService(h){return this._services.get(h)}createInstance(h,...f){const b=(0,u.getServiceDependencies)(h).sort((y,v)=>y.index-v.index),m=[];for(const y of b){const v=this._services.get(y.id);if(!v)throw new Error(`[createInstance] ${h.name} depends on UNKNOWN service ${y.id}.`);m.push(v)}const g=b.length>0?b[0].index:f.length;if(f.length!==g)throw new Error(`[createInstance] First service dependency of ${h.name} at position ${g+1} conflicts with ${f.length} static arguments`);return new h(...f,...m)}}},7866:function(o,a,l){var c=this&&this.__decorate||function(g,y,v,_){var x,w=arguments.length,S=w<3?y:_===null?_=Object.getOwnPropertyDescriptor(y,v):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,y,v,_);else for(var T=g.length-1;T>=0;T--)(x=g[T])&&(S=(w<3?x(S):w>3?x(y,v,S):x(y,v))||S);return w>3&&S&&Object.defineProperty(y,v,S),S},u=this&&this.__param||function(g,y){return function(v,_){y(v,_,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;const d=l(844),h=l(2585),f={trace:h.LogLevelEnum.TRACE,debug:h.LogLevelEnum.DEBUG,info:h.LogLevelEnum.INFO,warn:h.LogLevelEnum.WARN,error:h.LogLevelEnum.ERROR,off:h.LogLevelEnum.OFF};let b,m=a.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(g){super(),this._optionsService=g,this._logLevel=h.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),b=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(g){for(let y=0;y<g.length;y++)typeof g[y]=="function"&&(g[y]=g[y]())}_log(g,y,v){this._evalLazyOptionalParams(v),g.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+y,...v)}trace(g,...y){this._logLevel<=h.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,g,y)}debug(g,...y){this._logLevel<=h.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,g,y)}info(g,...y){this._logLevel<=h.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,g,y)}warn(g,...y){this._logLevel<=h.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,g,y)}error(g,...y){this._logLevel<=h.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,g,y)}};a.LogService=m=c([u(0,h.IOptionsService)],m),a.setTraceLogger=function(g){b=g},a.traceCall=function(g,y,v){if(typeof v.value!="function")throw new Error("not supported");const _=v.value;v.value=function(...x){if(b.logLevel!==h.LogLevelEnum.TRACE)return _.apply(this,x);b.trace(`GlyphRenderer#${_.name}(${x.map(S=>JSON.stringify(S)).join(", ")})`);const w=_.apply(this,x);return b.trace(`GlyphRenderer#${_.name} return`,w),w}}},7302:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;const c=l(8460),u=l(844),d=l(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const h=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends u.Disposable{constructor(m){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const g={...a.DEFAULT_OPTIONS};for(const y in m)if(y in g)try{const v=m[y];g[y]=this._sanitizeAndValidateOption(y,v)}catch(v){console.error(v)}this.rawOptions=g,this.options={...g},this._setupOptions(),this.register((0,u.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(m,g){return this.onOptionChange(y=>{y===m&&g(this.rawOptions[m])})}onMultipleOptionChange(m,g){return this.onOptionChange(y=>{m.indexOf(y)!==-1&&g()})}_setupOptions(){const m=y=>{if(!(y in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${y}"`);return this.rawOptions[y]},g=(y,v)=>{if(!(y in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${y}"`);v=this._sanitizeAndValidateOption(y,v),this.rawOptions[y]!==v&&(this.rawOptions[y]=v,this._onOptionChange.fire(y))};for(const y in this.rawOptions){const v={get:m.bind(this,y),set:g.bind(this,y)};Object.defineProperty(this.options,y,v)}}_sanitizeAndValidateOption(m,g){switch(m){case"cursorStyle":if(g||(g=a.DEFAULT_OPTIONS[m]),!function(y){return y==="block"||y==="underline"||y==="bar"}(g))throw new Error(`"${g}" is not a valid value for ${m}`);break;case"wordSeparator":g||(g=a.DEFAULT_OPTIONS[m]);break;case"fontWeight":case"fontWeightBold":if(typeof g=="number"&&1<=g&&g<=1e3)break;g=h.includes(g)?g:a.DEFAULT_OPTIONS[m];break;case"cursorWidth":g=Math.floor(g);case"lineHeight":case"tabStopWidth":if(g<1)throw new Error(`${m} cannot be less than 1, value: ${g}`);break;case"minimumContrastRatio":g=Math.max(1,Math.min(21,Math.round(10*g)/10));break;case"scrollback":if((g=Math.min(g,4294967295))<0)throw new Error(`${m} cannot be less than 0, value: ${g}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(g<=0)throw new Error(`${m} cannot be less than or equal to 0, value: ${g}`);break;case"rows":case"cols":if(!g&&g!==0)throw new Error(`${m} must be numeric, value: ${g}`);break;case"windowsPty":g=g??{}}return g}}a.OptionsService=f},2660:function(o,a,l){var c=this&&this.__decorate||function(f,b,m,g){var y,v=arguments.length,_=v<3?b:g===null?g=Object.getOwnPropertyDescriptor(b,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(f,b,m,g);else for(var x=f.length-1;x>=0;x--)(y=f[x])&&(_=(v<3?y(_):v>3?y(b,m,_):y(b,m))||_);return v>3&&_&&Object.defineProperty(b,m,_),_},u=this&&this.__param||function(f,b){return function(m,g){b(m,g,f)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;const d=l(2585);let h=a.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){const b=this._bufferService.buffer;if(f.id===void 0){const x=b.addMarker(b.ybase+b.y),w={data:f,id:this._nextId++,lines:[x]};return x.onDispose(()=>this._removeMarkerFromLink(w,x)),this._dataByLinkId.set(w.id,w),w.id}const m=f,g=this._getEntryIdKey(m),y=this._entriesWithId.get(g);if(y)return this.addLineToLink(y.id,b.ybase+b.y),y.id;const v=b.addMarker(b.ybase+b.y),_={id:this._nextId++,key:this._getEntryIdKey(m),data:m,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(_,v)),this._entriesWithId.set(_.key,_),this._dataByLinkId.set(_.id,_),_.id}addLineToLink(f,b){const m=this._dataByLinkId.get(f);if(m&&m.lines.every(g=>g.line!==b)){const g=this._bufferService.buffer.addMarker(b);m.lines.push(g),g.onDispose(()=>this._removeMarkerFromLink(m,g))}}getLinkData(f){return this._dataByLinkId.get(f)?.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,b){const m=f.lines.indexOf(b);m!==-1&&(f.lines.splice(m,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};a.OscLinkService=h=c([u(0,d.IBufferService)],h)},8343:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;const l="di$target",c="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(u){return u[c]||[]},a.createDecorator=function(u){if(a.serviceRegistry.has(u))return a.serviceRegistry.get(u);const d=function(h,f,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(m,g,y){g[l]===g?g[c].push({id:m,index:y}):(g[c]=[{id:m,index:y}],g[l]=g)})(d,h,b)};return d.toString=()=>u,a.serviceRegistry.set(u,d),d}},2585:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;const c=l(8343);var u;a.IBufferService=(0,c.createDecorator)("BufferService"),a.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),a.ICoreService=(0,c.createDecorator)("CoreService"),a.ICharsetService=(0,c.createDecorator)("CharsetService"),a.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"}(u||(a.LogLevelEnum=u={})),a.ILogService=(0,c.createDecorator)("LogService"),a.IOptionsService=(0,c.createDecorator)("OptionsService"),a.IOscLinkService=(0,c.createDecorator)("OscLinkService"),a.IUnicodeService=(0,c.createDecorator)("UnicodeService"),a.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;const c=l(8460),u=l(225);class d{static extractShouldJoin(f){return(1&f)!=0}static extractWidth(f){return f>>1&3}static extractCharKind(f){return f>>3}static createPropertyValue(f,b,m=!1){return(16777215&f)<<3|(3&b)<<1|(m?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const f=new u.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let b=0,m=0;const g=f.length;for(let y=0;y<g;++y){let v=f.charCodeAt(y);if(55296<=v&&v<=56319){if(++y>=g)return b+this.wcwidth(v);const w=f.charCodeAt(y);56320<=w&&w<=57343?v=1024*(v-55296)+w-56320+65536:b+=this.wcwidth(w)}const _=this.charProperties(v,m);let x=d.extractWidth(_);d.extractShouldJoin(_)&&(x-=d.extractWidth(m)),b+=x,m=_}return b}charProperties(f,b){return this._activeProvider.charProperties(f,b)}}a.UnicodeService=d}},n={};function s(o){var a=n[o];if(a!==void 0)return a.exports;var l=n[o]={exports:{}};return r[o].call(l.exports,l,l.exports,s),l.exports}var i={};return(()=>{var o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const a=s(9042),l=s(3236),c=s(844),u=s(5741),d=s(8285),h=s(7975),f=s(7090),b=["cols","rows"];class m extends c.Disposable{constructor(y){super(),this._core=this.register(new l.Terminal(y)),this._addonManager=this.register(new u.AddonManager),this._publicOptions={...this._core.options};const v=x=>this._core.options[x],_=(x,w)=>{this._checkReadonlyOptions(x),this._core.options[x]=w};for(const x in this._core.options){const w={get:v.bind(this,x),set:_.bind(this,x)};Object.defineProperty(this._publicOptions,x,w)}}_checkReadonlyOptions(y){if(b.includes(y))throw new Error(`Option "${y}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new h.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const y=this._core.coreService.decPrivateModes;let v="none";switch(this._core.coreMouseService.activeProtocol){case"X10":v="x10";break;case"VT200":v="vt200";break;case"DRAG":v="drag";break;case"ANY":v="any"}return{applicationCursorKeysMode:y.applicationCursorKeys,applicationKeypadMode:y.applicationKeypad,bracketedPasteMode:y.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:v,originMode:y.origin,reverseWraparoundMode:y.reverseWraparound,sendFocusMode:y.sendFocus,wraparoundMode:y.wraparound}}get options(){return this._publicOptions}set options(y){for(const v in y)this._publicOptions[v]=y[v]}blur(){this._core.blur()}focus(){this._core.focus()}input(y,v=!0){this._core.input(y,v)}resize(y,v){this._verifyIntegers(y,v),this._core.resize(y,v)}open(y){this._core.open(y)}attachCustomKeyEventHandler(y){this._core.attachCustomKeyEventHandler(y)}attachCustomWheelEventHandler(y){this._core.attachCustomWheelEventHandler(y)}registerLinkProvider(y){return this._core.registerLinkProvider(y)}registerCharacterJoiner(y){return this._checkProposedApi(),this._core.registerCharacterJoiner(y)}deregisterCharacterJoiner(y){this._checkProposedApi(),this._core.deregisterCharacterJoiner(y)}registerMarker(y=0){return this._verifyIntegers(y),this._core.registerMarker(y)}registerDecoration(y){return this._checkProposedApi(),this._verifyPositiveIntegers(y.x??0,y.width??0,y.height??0),this._core.registerDecoration(y)}hasSelection(){return this._core.hasSelection()}select(y,v,_){this._verifyIntegers(y,v,_),this._core.select(y,v,_)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(y,v){this._verifyIntegers(y,v),this._core.selectLines(y,v)}dispose(){super.dispose()}scrollLines(y){this._verifyIntegers(y),this._core.scrollLines(y)}scrollPages(y){this._verifyIntegers(y),this._core.scrollPages(y)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(y){this._verifyIntegers(y),this._core.scrollToLine(y)}clear(){this._core.clear()}write(y,v){this._core.write(y,v)}writeln(y,v){this._core.write(y),this._core.write(`\r
`,v)}paste(y){this._core.paste(y)}refresh(y,v){this._verifyIntegers(y,v),this._core.refresh(y,v)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(y){this._addonManager.loadAddon(this,y)}static get strings(){return a}_verifyIntegers(...y){for(const v of y)if(v===1/0||isNaN(v)||v%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...y){for(const v of y)if(v&&(v===1/0||isNaN(v)||v%1!=0||v<0))throw new Error("This API only accepts positive integers")}}o.Terminal=m})(),i})())})(r9);var twe=r9.exports;const rwe=getComputedStyle(document.documentElement),Cr=t=>rwe.getPropertyValue(t)||void 0;function xw(t){return{cursor:Cr("--bolt-elements-terminal-cursorColor"),cursorAccent:Cr("--bolt-elements-terminal-cursorColorAccent"),foreground:Cr("--bolt-elements-terminal-textColor"),background:Cr("--bolt-elements-terminal-backgroundColor"),selectionBackground:Cr("--bolt-elements-terminal-selection-backgroundColor"),selectionForeground:Cr("--bolt-elements-terminal-selection-textColor"),selectionInactiveBackground:Cr("--bolt-elements-terminal-selection-backgroundColorInactive"),black:Cr("--bolt-elements-terminal-color-black"),red:Cr("--bolt-elements-terminal-color-red"),green:Cr("--bolt-elements-terminal-color-green"),yellow:Cr("--bolt-elements-terminal-color-yellow"),blue:Cr("--bolt-elements-terminal-color-blue"),magenta:Cr("--bolt-elements-terminal-color-magenta"),cyan:Cr("--bolt-elements-terminal-color-cyan"),white:Cr("--bolt-elements-terminal-color-white"),brightBlack:Cr("--bolt-elements-terminal-color-brightBlack"),brightRed:Cr("--bolt-elements-terminal-color-brightRed"),brightGreen:Cr("--bolt-elements-terminal-color-brightGreen"),brightYellow:Cr("--bolt-elements-terminal-color-brightYellow"),brightBlue:Cr("--bolt-elements-terminal-color-brightBlue"),brightMagenta:Cr("--bolt-elements-terminal-color-brightMagenta"),brightCyan:Cr("--bolt-elements-terminal-color-brightCyan"),brightWhite:Cr("--bolt-elements-terminal-color-brightWhite"),...t}}const vh=Qt("Terminal"),KD=k.memo(k.forwardRef(({className:t,theme:e,readonly:r,id:n,onTerminalReady:s,onTerminalResize:i},o)=>{const a=k.useRef(null),l=k.useRef(),c=k.useRef(),u=k.useRef();return k.useEffect(()=>{const d=a.current,h=new Qxe.FitAddon,f=new ewe.WebLinksAddon;c.current=h;const b=new twe.Terminal({cursorBlink:!0,convertEol:!0,disableStdin:r,theme:xw(r?{cursor:"#00000000"}:{}),fontSize:12,fontFamily:"Menlo, courier-new, courier, monospace",allowProposedApi:!0,scrollback:1e3,rightClickSelectsWord:!0});l.current=b;try{b.loadAddon(h),b.loadAddon(f),b.open(d)}catch(g){vh.error(`Failed to initialize terminal [${n}]:`,g),setTimeout(()=>{try{b.open(d),h.fit()}catch(y){vh.error(`Terminal recovery failed [${n}]:`,y)}},100)}const m=new ResizeObserver(g=>{if(g.length>0)try{h.fit(),i?.(b.cols,b.rows)}catch(y){vh.error(`Resize error [${n}]:`,y)}});return u.current=m,m.observe(d),vh.debug(`Attach [${n}]`),s?.(b),()=>{try{m.disconnect(),b.dispose()}catch(g){vh.error(`Cleanup error [${n}]:`,g)}}},[]),k.useEffect(()=>{const d=l.current;d.options.theme=xw(r?{cursor:"#00000000"}:{}),d.options.disableStdin=r},[e,r]),k.useImperativeHandle(o,()=>({reloadStyles:()=>{const d=l.current;d&&(d.options.theme=xw(r?{cursor:"#00000000"}:{}))},getTerminal:()=>l.current}),[r]),p.jsx("div",{className:t,ref:a})})),nwe=Qt("TerminalManager"),OE=k.memo(({terminal:t,isActive:e})=>(k.useEffect(()=>{if(!t)return;const r=[],n=t.onKey(s=>{if((s.domEvent.ctrlKey||s.domEvent.metaKey)&&s.domEvent.key==="v"){if(!e)return;navigator.clipboard&&navigator.clipboard.readText&&navigator.clipboard.readText().then(i=>{i&&t&&t.paste(i)}).catch(i=>{nwe.warn("Failed to read clipboard:",i)})}});return r.push(n),()=>{r.forEach(s=>s.dispose())}},[t,e]),k.useEffect(()=>{e&&t&&setTimeout(()=>{t.focus()},100)},[e,t]),null));OE.displayName="TerminalManager";const swe=Qt("Terminal"),YD=3,LE=25,iwe=k.memo(()=>{const{t}=Ms(),e=He(Pe.showTerminal),r=He(If),n=k.useRef(new Map),s=k.useRef(null),i=k.useRef(!1),[o,a]=k.useState(0),[l,c]=k.useState(0),u=()=>{l<YD&&(c(l+1),a(l))},d=k.useCallback(h=>{if(h===0)return;const f=n.current.get(h);if(f?.getTerminal){const b=f.getTerminal();b&&Pe.detachTerminal(b)}n.current.delete(h),c(l-1),o===h?a(Math.max(0,h-1)):o>h&&a(o-1)},[o,l]);return k.useEffect(()=>()=>{n.current.forEach((h,f)=>{if(f>0&&h?.getTerminal){const b=h.getTerminal();b&&Pe.detachTerminal(b)}})},[]),k.useEffect(()=>{const{current:h}=s;if(!h)return;const f=h.isCollapsed();!e&&!f?h.collapse():e&&f&&h.resize(LE),i.current=!1},[e]),k.useEffect(()=>{const h=hB.on("toggleTerminal",()=>{i.current=!0}),f=If.subscribe(()=>{n.current.forEach(b=>{b?.reloadStyles()})});return()=>{h(),f()}},[]),p.jsx(hf,{ref:s,defaultSize:e?LE:0,minSize:10,collapsible:!0,onExpand:()=>{i.current||Pe.toggleTerminal(!0)},onCollapse:()=>{i.current||Pe.toggleTerminal(!1)},children:p.jsx("div",{className:"h-full",children:p.jsxs("div",{className:"h-full flex flex-col bg-bolt-elements-bg-depth-1",children:[p.jsxs("div",{className:"flex items-center border-y border-bolt-elements-borderColor gap-1.5 min-h-[34px] p-2 bg-bolt-elements-bg-depth-1",children:[Array.from({length:l+1},(h,f)=>{const b=o===f;return p.jsx(k.Fragment,{children:f==0?p.jsxs("button",{className:ye("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-cyan-400 hover:text-bolt-elements-textPrimary":b,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!b}),onClick:()=>a(f),children:[p.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),t("workbench.terminal","Terminal")]},f):p.jsx(k.Fragment,{children:p.jsxs("button",{className:ye("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-cyan-400":b,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!b}),onClick:()=>a(f),children:[p.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),t("workbench.terminal_with_index","Terminal {{index}}",{index:l>1?f:""}),p.jsx("button",{className:"bg-transparent text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary hover:bg-transparent rounded",title:t("common.close","Close"),onClick:m=>{m.stopPropagation(),d(f)},children:p.jsx("div",{className:"i-ph:x text-xs"})})]},f)})},f)}),l<YD&&p.jsx(Kt,{icon:"i-ph:plus",size:"md",onClick:u,title:t("workbench.add_terminal","Add Terminal")}),p.jsx(Kt,{icon:"i-ph:arrow-clockwise",title:t("workbench.reset_terminal","Reset Terminal"),size:"md",onClick:()=>{const h=n.current.get(o);if(h?.getTerminal()){const f=h.getTerminal();f.clear(),f.focus(),o===0?Pe.attachBoltTerminal(f):Pe.attachTerminal(f)}}}),p.jsx(Kt,{className:"ml-auto",icon:"i-ph:caret-down",title:t("common.close","Close"),size:"md",onClick:()=>Pe.toggleTerminal(!1)})]}),Array.from({length:l+1},(h,f)=>{const b=o===f;return swe.debug(`Starting bolt terminal [${f}]`),f==0?p.jsxs(k.Fragment,{children:[p.jsx(KD,{id:`terminal_${f}`,className:ye("h-full overflow-hidden modern-scrollbar-invert",{hidden:!b}),ref:m=>{m&&n.current.set(f,m)},onTerminalReady:m=>Pe.attachBoltTerminal(m),onTerminalResize:(m,g)=>Pe.onTerminalResize(m,g),theme:r},`terminal-${f}`),p.jsx(OE,{terminal:n.current.get(f)?.getTerminal()||null,isActive:b})]},`terminal-container-${f}`):p.jsxs(k.Fragment,{children:[p.jsx(KD,{id:`terminal_${f}`,className:ye("modern-scrollbar h-full overflow-hidden",{hidden:!b}),ref:m=>{m&&n.current.set(f,m)},onTerminalReady:m=>Pe.attachTerminal(m),onTerminalResize:(m,g)=>Pe.onTerminalResize(m,g),theme:r},`terminal-${f}`),p.jsx(OE,{terminal:n.current.get(f)?.getTerminal()||null,isActive:b})]},`terminal-container-${f}`)})]})})})});async function owe(t,e,r,n){if(!t||typeof t.internal?.textSearch!="function"){console.error("WebContainer instance not available or internal searchText method is missing/not a function.");return}const s={...r,folders:[us]},i=(o,a)=>{const l=[];a.forEach(c=>{const u=c.preview.text.split(`
`);c.ranges.forEach(d=>{let h="(Preview line not found)",f=-1;if(c.preview.matches.length>0){const b=c.preview.matches[0].startLineNumber;f=d.startLineNumber-b}f>=0&&f<u.length?h=u[f]:h=u[0]??"(Preview unavailable)",l.push({path:o,lineNumber:d.startLineNumber,previewText:h,matchCharStart:d.startColumn,matchCharEnd:d.endColumn})})}),l.length>0&&n(l)};try{await t.internal.textSearch(e,s,i)}catch(o){console.error("Error during internal text search:",o)}}function awe(t){return t.reduce((e,r)=>(e[r.path]||(e[r.path]=[]),e[r.path].push(r),e),{})}function lwe(){const[t,e]=k.useState(""),[r,n]=k.useState([]),[s,i]=k.useState(!1),[o,a]=k.useState({}),[l,c]=k.useState(!1),u=k.useMemo(()=>awe(r),[r]);k.useEffect(()=>{if(r.length>0){const b={};Object.keys(u).forEach(m=>{b[m]=!0}),a(b)}},[u,r]);const d=k.useCallback(async b=>{if(!b.trim()){n([]),i(!1),a({}),c(!1);return}i(!0),n([]),a({}),c(!0);const m=300,g=Date.now();try{const y=await ls;await owe(y,b,{homeDir:us,includes:["**/*.*"],excludes:["**/node_modules/**","**/package-lock.json","**/.git/**","**/dist/**","**/*.lock"],gitignore:!0,requireGit:!1,globalIgnoreFiles:!0,ignoreSymlinks:!1,resultLimit:500,isRegex:!1,caseSensitive:!1,isWordMatch:!1},x=>{n(w=>[...w,...x])})}catch(y){console.error("Failed to initiate search:",y)}finally{const y=Date.now()-g;y<m?setTimeout(()=>i(!1),m-y):i(!1)}},[]),h=k.useCallback(Yp(d,300),[d]);k.useEffect(()=>{h(t)},[t,h]);const f=(b,m)=>{Pe.setSelectedFile(b);const g=typeof m=="number"?Math.max(0,m-1):void 0;Pe.setCurrentDocumentScrollPosition({line:g,column:0})};return p.jsxs("div",{className:"flex flex-col h-full bg-bolt-elements-background-depth-2",children:[p.jsx("div",{className:"flex items-center py-3 px-3",children:p.jsx("div",{className:"relative flex-1",children:p.jsx("input",{type:"text",value:t,onChange:b=>e(b.target.value),placeholder:"Search",className:"w-full px-2 py-1 rounded-md bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary focus:outline-none transition-all"})})}),p.jsxs("div",{className:"flex-1 overflow-auto py-2",children:[s&&p.jsxs("div",{className:"flex items-center justify-center h-32 text-bolt-elements-textTertiary",children:[p.jsx("div",{className:"i-ph:circle-notch animate-spin mr-2"})," Searching..."]}),!s&&l&&r.length===0&&t.trim()!==""&&p.jsx("div",{className:"flex items-center justify-center h-32 text-gray-500",children:"No results found."}),!s&&Object.keys(u).map(b=>p.jsxs("div",{className:"mb-2",children:[p.jsxs("button",{className:"flex gap-2 items-center w-full text-left py-1 px-2 text-bolt-elements-textSecondary bg-transparent hover:bg-bolt-elements-background-depth-3 group",onClick:()=>a(m=>({...m,[b]:!m[b]})),children:[p.jsx("span",{className:" i-ph:caret-down-thin w-3 h-3 text-bolt-elements-textSecondary transition-transform",style:{transform:o[b]?"rotate(180deg)":void 0}}),p.jsx("span",{className:"font-normal text-sm",children:b.split("/").pop()}),p.jsx("span",{className:"h-5.5 w-5.5 flex items-center justify-center text-xs ml-auto bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent rounded-full",children:u[b].length})]}),o[b]&&p.jsx("div",{className:"",children:u[b].map((m,g)=>{const v=m.matchCharStart<=7,_=v?0:m.matchCharStart-7,x=m.previewText.slice(_),w=v?m.matchCharStart:7,S=v?m.matchCharEnd:7+(m.matchCharEnd-m.matchCharStart);return p.jsx("div",{className:"hover:bg-bolt-elements-background-depth-3 cursor-pointer transition-colors pl-6 py-1",onClick:()=>f(m.path,m.lineNumber),children:p.jsxs("pre",{className:"font-mono text-xs text-bolt-elements-textTertiary truncate",children:[!v&&p.jsx("span",{children:"..."}),x.slice(0,w),p.jsx("span",{className:"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent rounded px-1",children:x.slice(w,S)}),x.slice(S)]})},g)})})]},b))]})]})}function cwe(){const[t,e]=k.useState([]),[r,n]=k.useState(new Set),[s,i]=k.useState("all"),[o,a]=k.useState("");k.useEffect(()=>{const m=()=>{const y=[],v=Pe.files.get();Object.entries(v).forEach(([_,x])=>{x&&(x.type==="file"&&x.isLocked?y.push({path:_,type:"file"}):x.type==="folder"&&x.isLocked&&y.push({path:_,type:"folder"}))}),e(y)};m();const g=setInterval(m,5e3);return()=>clearInterval(g)},[]);const l=t.filter(m=>!(s==="files"&&m.type!=="file"||s==="folders"&&m.type!=="folder"||o&&!m.path.toLowerCase().includes(o.toLowerCase()))).sort((m,g)=>m.path.localeCompare(g.path)),c=m=>{const g=new Set(r);g.has(m)?g.delete(m):g.add(m),n(g)},u=m=>{if(m===!0){const g=new Set(l.map(y=>y.path));n(g)}else n(new Set)},d=()=>{if(r.size===0){Ie.error("No items selected to unlock.");return}let m=0;r.forEach(g=>{const y=t.find(v=>v.path===g);y&&(y.type==="file"?Pe.unlockFile(g):Pe.unlockFolder(g),m++)}),m>0&&(Ie.success(`Unlocked ${m} selected item(s).`),n(new Set))},h=l.length>0&&r.size===l.length,f=r.size>0&&r.size<l.length,b=h?!0:f?"indeterminate":!1;return p.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[p.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-b border-bolt-elements-borderColor",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-bolt-elements-textTertiary i-ph:magnifying-glass text-xs pointer-events-none"}),p.jsx("input",{type:"text",placeholder:"Search...",className:"w-full text-xs pl-6 pr-2 py-0.5 h-6 bg-bolt-elements-background-depth-2 text-bolt-elements-textPrimary rounded border border-bolt-elements-borderColor focus:outline-none",value:o,onChange:m=>a(m.target.value),style:{minWidth:0}})]}),p.jsxs("select",{className:"text-xs px-1 py-0.5 h-6 bg-bolt-elements-background-depth-2 text-bolt-elements-textPrimary rounded border border-bolt-elements-borderColor focus:outline-none",value:s,onChange:m=>i(m.target.value),children:[p.jsx("option",{value:"all",children:"All"}),p.jsx("option",{value:"files",children:"Files"}),p.jsx("option",{value:"folders",children:"Folders"})]})]}),p.jsxs("div",{className:"flex items-center justify-between px-2 py-1 text-xs text-bolt-elements-textSecondary",children:[p.jsxs("div",{children:[p.jsx(Uf,{checked:b,onCheckedChange:u,className:"w-3 h-3 rounded border-bolt-elements-borderColor mr-2","aria-label":"Select all items",disabled:l.length===0}),p.jsx("span",{children:"All"})]}),r.size>0&&p.jsx("button",{className:"ml-auto px-2 py-0.5 rounded bg-bolt-elements-button-secondary-background hover:bg-bolt-elements-button-secondary-backgroundHover text-bolt-elements-button-secondary-text text-xs flex items-center gap-1",onClick:d,title:"Unlock all selected items",children:"Unlock all"}),p.jsx("div",{})]}),p.jsx("div",{className:"flex-1 overflow-auto modern-scrollbar px-1 py-1",children:l.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-bolt-elements-textTertiary text-xs gap-2",children:[p.jsx("span",{className:"i-ph:lock-open-duotone text-lg opacity-50"}),p.jsx("span",{children:"No locked items found"})]}):p.jsx("ul",{className:"space-y-1",children:l.map(m=>p.jsxs("li",{className:ye("text-bolt-elements-textTertiary flex items-center gap-2 px-2 py-1 rounded hover:bg-bolt-elements-background-depth-2 transition-colors group",r.has(m.path)?"bg-bolt-elements-background-depth-2":""),children:[p.jsx(Uf,{checked:r.has(m.path),onCheckedChange:()=>c(m.path),className:"w-3 h-3 rounded border-bolt-elements-borderColor","aria-labelledby":`item-label-${m.path}`}),p.jsx("span",{className:ye("shrink-0 text-bolt-elements-textTertiary text-xs",m.type==="file"?"i-ph:file-text-duotone":"i-ph:folder-duotone")}),p.jsx("span",{id:`item-label-${m.path}`,className:"truncate flex-1 text-xs",title:m.path,children:m.path.replace("/home/project/","")}),p.jsx("span",{className:ye("inline-flex items-center px-1 rounded-sm text-xs","bg-red-500/10 text-red-500")}),p.jsx("button",{className:"flex items-center px-1 py-0.5 text-xs rounded bg-transparent hover:bg-bolt-elements-background-depth-3",onClick:()=>{m.type==="file"?Pe.unlockFile(m.path):Pe.unlockFolder(m.path),Ie.success(`${m.path.replace("/home/project/","")} unlocked`)},title:"Unlock",children:p.jsx("span",{className:"i-ph:lock-open text-xs"})})]},m.path))})}),p.jsx("div",{className:"px-2 py-1 border-t border-bolt-elements-borderColor bg-bolt-elements-background-depth-2 text-xs text-bolt-elements-textTertiary flex justify-between items-center",children:p.jsxs("div",{children:[l.length," item(s)  ",r.size," selected"]})})]})}const uwe=100-LE,dwe={tabSize:2},hwe=k.memo(({files:t,unsavedFiles:e,editorDocument:r,selectedFile:n,isStreaming:s,fileHistory:i,onFileSelect:o,onEditorChange:a,onEditorScroll:l,onFileSave:c,onFileReset:u})=>{Id.trace("EditorPanel");const d=He(If),h=He(Pe.showTerminal),f=k.useMemo(()=>{if(r)return r.filePath.split("/")},[r]),b=k.useMemo(()=>!r||!e?!1:e instanceof Set&&e.has(r.filePath),[r,e]);return p.jsxs(PE,{direction:"vertical",children:[p.jsx(hf,{defaultSize:h?uwe:100,minSize:20,children:p.jsxs(PE,{direction:"horizontal",children:[p.jsx(hf,{defaultSize:20,minSize:15,collapsible:!0,className:"border-r border-bolt-elements-borderColor",style:{background:"var(--bolt-elements-bg-depth-1)"},children:p.jsx("div",{className:"h-full",children:p.jsxs(m_e,{defaultValue:"files",className:"flex flex-col h-full",children:[p.jsx(WD,{className:"w-full text-sm font-medium text-bolt-elements-textSecondary px-1",children:p.jsx("div",{className:"h-full flex-shrink-0 flex items-center justify-between w-full",children:p.jsxs(g_e,{className:"h-full flex-shrink-0 flex items-center gap-1",children:[p.jsx(vw,{value:"files",title:"Files",className:ye("h-full bg-transparent hover:bg-bolt-elements-background-depth-3 p-1.5 rounded-lg text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary data-[state=active]:text-bolt-elements-textPrimary"),children:p.jsx("div",{className:"i-ph:files text-lg"})}),p.jsx(vw,{value:"search",title:"Search",className:ye("h-full bg-transparent hover:bg-bolt-elements-background-depth-3 p-1.5 rounded-lg text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary data-[state=active]:text-bolt-elements-textPrimary"),children:p.jsx("div",{className:"i-ph:magnifying-glass text-lg"})}),p.jsx(vw,{value:"locks",title:"Locks",className:ye("h-full bg-transparent hover:bg-bolt-elements-background-depth-3 p-1.5 rounded-lg text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary data-[state=active]:text-bolt-elements-textPrimary"),children:p.jsx("div",{className:"i-ph:lock text-lg"})})]})})}),p.jsx(_w,{value:"files",className:"flex-grow overflow-auto focus-visible:outline-none",style:{background:"var(--bolt-elements-bg-depth-1)"},children:p.jsx(JH,{className:"h-full",files:t,hideRoot:!0,unsavedFiles:e,fileHistory:i,rootFolder:us,selectedFile:n,onFileSelect:o})}),p.jsx(_w,{value:"search",className:"flex-grow overflow-auto focus-visible:outline-none",style:{background:"var(--bolt-elements-bg-depth-1)"},children:p.jsx(lwe,{})}),p.jsx(_w,{value:"locks",className:"flex-grow overflow-auto focus-visible:outline-none",style:{background:"var(--bolt-elements-bg-depth-1)"},children:p.jsx(cwe,{})})]})})}),p.jsx(IE,{}),p.jsxs(hf,{className:"flex flex-col",defaultSize:80,minSize:20,style:{background:"#0d1117"},children:[p.jsx(WD,{className:"overflow-x-auto",children:f?.length&&p.jsxs("div",{className:"flex items-center flex-1 text-sm",children:[p.jsx(Zxe,{pathSegments:f,files:t,onFileSelect:o}),b&&p.jsxs("div",{className:"flex gap-1 ml-auto -mr-1.5",children:[p.jsxs(VD,{onClick:c,children:[p.jsx("div",{className:"i-ph:floppy-disk-duotone"}),"Save"]}),p.jsxs(VD,{onClick:u,children:[p.jsx("div",{className:"i-ph:clock-counter-clockwise-duotone"}),"Reset"]})]})]})}),p.jsx("div",{className:"h-full flex-1 overflow-hidden modern-scrollbar",children:p.jsx(hU,{theme:d,editable:!s&&r!==void 0,settings:dwe,doc:r,autoFocusOnDocumentChange:!xK(),onScroll:l,onChange:a,onSave:c})})]})]})}),p.jsx(IE,{}),p.jsx(iwe,{})]})});function s9(t,e,r){return(...n)=>{console.groupCollapsed(`[State] ${t}/${e}`),console.log("Payload:",n),console.groupEnd();try{r(...n)}catch(s){throw console.error(`[State] Error in ${t}/${e}:`,s),s}}}const Gs=js({started:!1,aborted:!1,showChat:!0,pendingMessage:null}),Kg=s9("chatStore","setPendingChatMessage",t=>{Gs.setKey("pendingMessage",t)}),fwe=s9("chatStore","clearPendingChatMessage",()=>{Gs.setKey("pendingMessage",null)}),pwe=k.memo(({activePreviewIndex:t,setActivePreviewIndex:e,isDropdownOpen:r,setIsDropdownOpen:n,setHasSelectedPreview:s,previews:i})=>{const o=k.useRef(null),a=i.map((l,c)=>({...l,index:c})).sort((l,c)=>l.port-c.port);return k.useEffect(()=>{const l=c=>{o.current&&!o.current.contains(c.target)&&n(!1)};return r?window.addEventListener("mousedown",l):window.removeEventListener("mousedown",l),()=>{window.removeEventListener("mousedown",l)}},[r]),p.jsxs("div",{className:"relative z-port-dropdown",ref:o,children:[p.jsxs("button",{className:"flex items-center group-focus-within:text-bolt-elements-preview-addressBar-text bg-white group-focus-within:bg-bolt-elements-preview-addressBar-background dark:bg-bolt-elements-preview-addressBar-backgroundHover rounded-full px-2 py-1 gap-1.5",onClick:()=>n(!r),children:[p.jsx("span",{className:"i-ph:plug text-base"}),i.length>0&&t>=0&&t<i.length?p.jsx("span",{className:"text-xs font-medium",children:i[t].port}):null]}),r&&p.jsxs("div",{className:"absolute left-0 mt-2 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor rounded shadow-sm min-w-[140px] dropdown-animation",children:[p.jsx("div",{className:"px-4 py-2 border-b border-bolt-elements-borderColor text-sm font-semibold text-bolt-elements-textPrimary",children:"Ports"}),a.map(l=>p.jsx("div",{className:"flex items-center px-4 py-2 cursor-pointer hover:bg-bolt-elements-item-backgroundActive",onClick:()=>{e(l.index),n(!1),s(!0)},children:p.jsx("span",{className:t===l.index?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault group-hover:text-bolt-elements-item-contentActive",children:l.port})},l.port))]})]})});var hA={},_y={exports:{}};_y.exports;(function(t,e){var r=200,n="__lodash_hash_undefined__",s=1,i=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",h="[object Error]",f="[object Function]",b="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Promise]",x="[object Proxy]",w="[object RegExp]",S="[object Set]",T="[object String]",E="[object Symbol]",C="[object Undefined]",A="[object WeakMap]",I="[object ArrayBuffer]",P="[object DataView]",D="[object Float32Array]",R="[object Float64Array]",F="[object Int8Array]",G="[object Int16Array]",z="[object Int32Array]",K="[object Uint8Array]",L="[object Uint8ClampedArray]",O="[object Uint16Array]",$="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,ee=/^(?:0|[1-9]\d*)$/,X={};X[D]=X[R]=X[F]=X[G]=X[z]=X[K]=X[L]=X[O]=X[$]=!0,X[a]=X[l]=X[I]=X[u]=X[P]=X[d]=X[h]=X[f]=X[m]=X[g]=X[v]=X[w]=X[S]=X[T]=X[A]=!1;var ge=typeof kr=="object"&&kr&&kr.Object===Object&&kr,J=typeof self=="object"&&self&&self.Object===Object&&self,j=ge||J||Function("return this")(),Y=e&&!e.nodeType&&e,Q=Y&&!0&&t&&!t.nodeType&&t,ie=Q&&Q.exports===Y,re=ie&&ge.process,pe=function(){try{return re&&re.binding&&re.binding("util")}catch{}}(),M=pe&&pe.isTypedArray;function oe(ne,ve){for(var Oe=-1,et=ne==null?0:ne.length,hr=0,wt=[];++Oe<et;){var Rr=ne[Oe];ve(Rr,Oe,ne)&&(wt[hr++]=Rr)}return wt}function le(ne,ve){for(var Oe=-1,et=ve.length,hr=ne.length;++Oe<et;)ne[hr+Oe]=ve[Oe];return ne}function q(ne,ve){for(var Oe=-1,et=ne==null?0:ne.length;++Oe<et;)if(ve(ne[Oe],Oe,ne))return!0;return!1}function V(ne,ve){for(var Oe=-1,et=Array(ne);++Oe<ne;)et[Oe]=ve(Oe);return et}function ae(ne){return function(ve){return ne(ve)}}function xe(ne,ve){return ne.has(ve)}function Te(ne,ve){return ne?.[ve]}function fe(ne){var ve=-1,Oe=Array(ne.size);return ne.forEach(function(et,hr){Oe[++ve]=[hr,et]}),Oe}function ke(ne,ve){return function(Oe){return ne(ve(Oe))}}function Me(ne){var ve=-1,Oe=Array(ne.size);return ne.forEach(function(et){Oe[++ve]=et}),Oe}var Re=Array.prototype,de=Function.prototype,be=Object.prototype,Se=j["__core-js_shared__"],ze=de.toString,Ye=be.hasOwnProperty,ut=function(){var ne=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),at=be.toString,pt=RegExp("^"+ze.call(Ye).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),er=ie?j.Buffer:void 0,qt=j.Symbol,Tt=j.Uint8Array,gr=be.propertyIsEnumerable,ir=Re.splice,Dr=qt?qt.toStringTag:void 0,jn=Object.getOwnPropertySymbols,Fn=er?er.isBuffer:void 0,Ee=ke(Object.keys,Object),Ce=Kc(j,"DataView"),Ve=Kc(j,"Map"),ct=Kc(j,"Promise"),Ke=Kc(j,"Set"),mt=Kc(j,"WeakMap"),je=Kc(Object,"create"),yt=Al(Ce),dt=Al(Ve),Ut=Al(ct),dr=Al(Ke),qr=Al(mt),br=qt?qt.prototype:void 0,Qr=br?br.valueOf:void 0;function ts(ne){var ve=-1,Oe=ne==null?0:ne.length;for(this.clear();++ve<Oe;){var et=ne[ve];this.set(et[0],et[1])}}function Po(){this.__data__=je?je(null):{},this.size=0}function ci(ne){var ve=this.has(ne)&&delete this.__data__[ne];return this.size-=ve?1:0,ve}function ga(ne){var ve=this.__data__;if(je){var Oe=ve[ne];return Oe===n?void 0:Oe}return Ye.call(ve,ne)?ve[ne]:void 0}function Sn(ne){var ve=this.__data__;return je?ve[ne]!==void 0:Ye.call(ve,ne)}function ba(ne,ve){var Oe=this.__data__;return this.size+=this.has(ne)?0:1,Oe[ne]=je&&ve===void 0?n:ve,this}ts.prototype.clear=Po,ts.prototype.delete=ci,ts.prototype.get=ga,ts.prototype.has=Sn,ts.prototype.set=ba;function rs(ne){var ve=-1,Oe=ne==null?0:ne.length;for(this.clear();++ve<Oe;){var et=ne[ve];this.set(et[0],et[1])}}function Gc(){this.__data__=[],this.size=0}function qc(ne){var ve=this.__data__,Oe=Vm(ve,ne);if(Oe<0)return!1;var et=ve.length-1;return Oe==et?ve.pop():ir.call(ve,Oe,1),--this.size,!0}function P_(ne){var ve=this.__data__,Oe=Vm(ve,ne);return Oe<0?void 0:ve[Oe][1]}function lt(ne){return Vm(this.__data__,ne)>-1}function he(ne,ve){var Oe=this.__data__,et=Vm(Oe,ne);return et<0?(++this.size,Oe.push([ne,ve])):Oe[et][1]=ve,this}rs.prototype.clear=Gc,rs.prototype.delete=qc,rs.prototype.get=P_,rs.prototype.has=lt,rs.prototype.set=he;function Fe(ne){var ve=-1,Oe=ne==null?0:ne.length;for(this.clear();++ve<Oe;){var et=ne[ve];this.set(et[0],et[1])}}function nt(){this.size=0,this.__data__={hash:new ts,map:new(Ve||rs),string:new ts}}function or(ne){var ve=Gm(this,ne).delete(ne);return this.size-=ve?1:0,ve}function en(ne){return Gm(this,ne).get(ne)}function Ar(ne){return Gm(this,ne).has(ne)}function En(ne,ve){var Oe=Gm(this,ne),et=Oe.size;return Oe.set(ne,ve),this.size+=Oe.size==et?0:1,this}Fe.prototype.clear=nt,Fe.prototype.delete=or,Fe.prototype.get=en,Fe.prototype.has=Ar,Fe.prototype.set=En;function ns(ne){var ve=-1,Oe=ne==null?0:ne.length;for(this.__data__=new Fe;++ve<Oe;)this.add(ne[ve])}function ya(ne){return this.__data__.set(ne,n),this}function oh(ne){return this.__data__.has(ne)}ns.prototype.add=ns.prototype.push=ya,ns.prototype.has=oh;function ar(ne){var ve=this.__data__=new rs(ne);this.size=ve.size}function zm(){this.__data__=new rs,this.size=0}function Wm(ne){var ve=this.__data__,Oe=ve.delete(ne);return this.size=ve.size,Oe}function zq(ne){return this.__data__.get(ne)}function Wq(ne){return this.__data__.has(ne)}function Vq(ne,ve){var Oe=this.__data__;if(Oe instanceof rs){var et=Oe.__data__;if(!Ve||et.length<r-1)return et.push([ne,ve]),this.size=++Oe.size,this;Oe=this.__data__=new Fe(et)}return Oe.set(ne,ve),this.size=Oe.size,this}ar.prototype.clear=zm,ar.prototype.delete=Wm,ar.prototype.get=zq,ar.prototype.has=Wq,ar.prototype.set=Vq;function Gq(ne,ve){var Oe=qm(ne),et=!Oe&&aK(ne),hr=!Oe&&!et&&I_(ne),wt=!Oe&&!et&&!hr&&P2(ne),Rr=Oe||et||hr||wt,tn=Rr?V(ne.length,String):[],pn=tn.length;for(var Er in ne)Ye.call(ne,Er)&&!(Rr&&(Er=="length"||hr&&(Er=="offset"||Er=="parent")||wt&&(Er=="buffer"||Er=="byteLength"||Er=="byteOffset")||rK(Er,pn)))&&tn.push(Er);return tn}function Vm(ne,ve){for(var Oe=ne.length;Oe--;)if(T2(ne[Oe][0],ve))return Oe;return-1}function qq(ne,ve,Oe){var et=ve(ne);return qm(ne)?et:le(et,Oe(ne))}function ah(ne){return ne==null?ne===void 0?C:y:Dr&&Dr in Object(ne)?eK(ne):oK(ne)}function w2(ne){return lh(ne)&&ah(ne)==a}function S2(ne,ve,Oe,et,hr){return ne===ve?!0:ne==null||ve==null||!lh(ne)&&!lh(ve)?ne!==ne&&ve!==ve:Kq(ne,ve,Oe,et,S2,hr)}function Kq(ne,ve,Oe,et,hr,wt){var Rr=qm(ne),tn=qm(ve),pn=Rr?l:va(ne),Er=tn?l:va(ve);pn=pn==a?v:pn,Er=Er==a?v:Er;var xs=pn==v,ui=Er==v,Cn=pn==Er;if(Cn&&I_(ne)){if(!I_(ve))return!1;Rr=!0,xs=!1}if(Cn&&!xs)return wt||(wt=new ar),Rr||P2(ne)?E2(ne,ve,Oe,et,hr,wt):Zq(ne,ve,pn,Oe,et,hr,wt);if(!(Oe&s)){var Fs=xs&&Ye.call(ne,"__wrapped__"),Bs=ui&&Ye.call(ve,"__wrapped__");if(Fs||Bs){var _a=Fs?ne.value():ne,Io=Bs?ve.value():ve;return wt||(wt=new ar),hr(_a,Io,Oe,et,wt)}}return Cn?(wt||(wt=new ar),Qq(ne,ve,Oe,et,hr,wt)):!1}function Yq(ne){if(!R2(ne)||sK(ne))return!1;var ve=k2(ne)?pt:U;return ve.test(Al(ne))}function Xq(ne){return lh(ne)&&A2(ne.length)&&!!X[ah(ne)]}function Jq(ne){if(!iK(ne))return Ee(ne);var ve=[];for(var Oe in Object(ne))Ye.call(ne,Oe)&&Oe!="constructor"&&ve.push(Oe);return ve}function E2(ne,ve,Oe,et,hr,wt){var Rr=Oe&s,tn=ne.length,pn=ve.length;if(tn!=pn&&!(Rr&&pn>tn))return!1;var Er=wt.get(ne);if(Er&&wt.get(ve))return Er==ve;var xs=-1,ui=!0,Cn=Oe&i?new ns:void 0;for(wt.set(ne,ve),wt.set(ve,ne);++xs<tn;){var Fs=ne[xs],Bs=ve[xs];if(et)var _a=Rr?et(Bs,Fs,xs,ve,ne,wt):et(Fs,Bs,xs,ne,ve,wt);if(_a!==void 0){if(_a)continue;ui=!1;break}if(Cn){if(!q(ve,function(Io,Rl){if(!xe(Cn,Rl)&&(Fs===Io||hr(Fs,Io,Oe,et,wt)))return Cn.push(Rl)})){ui=!1;break}}else if(!(Fs===Bs||hr(Fs,Bs,Oe,et,wt))){ui=!1;break}}return wt.delete(ne),wt.delete(ve),ui}function Zq(ne,ve,Oe,et,hr,wt,Rr){switch(Oe){case P:if(ne.byteLength!=ve.byteLength||ne.byteOffset!=ve.byteOffset)return!1;ne=ne.buffer,ve=ve.buffer;case I:return!(ne.byteLength!=ve.byteLength||!wt(new Tt(ne),new Tt(ve)));case u:case d:case g:return T2(+ne,+ve);case h:return ne.name==ve.name&&ne.message==ve.message;case w:case T:return ne==ve+"";case m:var tn=fe;case S:var pn=et&s;if(tn||(tn=Me),ne.size!=ve.size&&!pn)return!1;var Er=Rr.get(ne);if(Er)return Er==ve;et|=i,Rr.set(ne,ve);var xs=E2(tn(ne),tn(ve),et,hr,wt,Rr);return Rr.delete(ne),xs;case E:if(Qr)return Qr.call(ne)==Qr.call(ve)}return!1}function Qq(ne,ve,Oe,et,hr,wt){var Rr=Oe&s,tn=C2(ne),pn=tn.length,Er=C2(ve),xs=Er.length;if(pn!=xs&&!Rr)return!1;for(var ui=pn;ui--;){var Cn=tn[ui];if(!(Rr?Cn in ve:Ye.call(ve,Cn)))return!1}var Fs=wt.get(ne);if(Fs&&wt.get(ve))return Fs==ve;var Bs=!0;wt.set(ne,ve),wt.set(ve,ne);for(var _a=Rr;++ui<pn;){Cn=tn[ui];var Io=ne[Cn],Rl=ve[Cn];if(et)var I2=Rr?et(Rl,Io,Cn,ve,ne,wt):et(Io,Rl,Cn,ne,ve,wt);if(!(I2===void 0?Io===Rl||hr(Io,Rl,Oe,et,wt):I2)){Bs=!1;break}_a||(_a=Cn=="constructor")}if(Bs&&!_a){var Km=ne.constructor,Ym=ve.constructor;Km!=Ym&&"constructor"in ne&&"constructor"in ve&&!(typeof Km=="function"&&Km instanceof Km&&typeof Ym=="function"&&Ym instanceof Ym)&&(Bs=!1)}return wt.delete(ne),wt.delete(ve),Bs}function C2(ne){return qq(ne,uK,tK)}function Gm(ne,ve){var Oe=ne.__data__;return nK(ve)?Oe[typeof ve=="string"?"string":"hash"]:Oe.map}function Kc(ne,ve){var Oe=Te(ne,ve);return Yq(Oe)?Oe:void 0}function eK(ne){var ve=Ye.call(ne,Dr),Oe=ne[Dr];try{ne[Dr]=void 0;var et=!0}catch{}var hr=at.call(ne);return et&&(ve?ne[Dr]=Oe:delete ne[Dr]),hr}var tK=jn?function(ne){return ne==null?[]:(ne=Object(ne),oe(jn(ne),function(ve){return gr.call(ne,ve)}))}:dK,va=ah;(Ce&&va(new Ce(new ArrayBuffer(1)))!=P||Ve&&va(new Ve)!=m||ct&&va(ct.resolve())!=_||Ke&&va(new Ke)!=S||mt&&va(new mt)!=A)&&(va=function(ne){var ve=ah(ne),Oe=ve==v?ne.constructor:void 0,et=Oe?Al(Oe):"";if(et)switch(et){case yt:return P;case dt:return m;case Ut:return _;case dr:return S;case qr:return A}return ve});function rK(ne,ve){return ve=ve??o,!!ve&&(typeof ne=="number"||ee.test(ne))&&ne>-1&&ne%1==0&&ne<ve}function nK(ne){var ve=typeof ne;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?ne!=="__proto__":ne===null}function sK(ne){return!!ut&&ut in ne}function iK(ne){var ve=ne&&ne.constructor,Oe=typeof ve=="function"&&ve.prototype||be;return ne===Oe}function oK(ne){return at.call(ne)}function Al(ne){if(ne!=null){try{return ze.call(ne)}catch{}try{return ne+""}catch{}}return""}function T2(ne,ve){return ne===ve||ne!==ne&&ve!==ve}var aK=w2(function(){return arguments}())?w2:function(ne){return lh(ne)&&Ye.call(ne,"callee")&&!gr.call(ne,"callee")},qm=Array.isArray;function lK(ne){return ne!=null&&A2(ne.length)&&!k2(ne)}var I_=Fn||hK;function cK(ne,ve){return S2(ne,ve)}function k2(ne){if(!R2(ne))return!1;var ve=ah(ne);return ve==f||ve==b||ve==c||ve==x}function A2(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=o}function R2(ne){var ve=typeof ne;return ne!=null&&(ve=="object"||ve=="function")}function lh(ne){return ne!=null&&typeof ne=="object"}var P2=M?ae(M):Xq;function uK(ne){return lK(ne)?Gq(ne):Jq(ne)}function dK(){return[]}function hK(){return!1}t.exports=cK})(_y,_y.exports);var mwe=_y.exports,i9={exports:{}};(function(t,e){var r=function(){var n=function(w,S){var T=236,E=17,C=w,A=i[S],I=null,P=0,D=null,R=[],F={},G=function(j,Y){P=C*4+17,I=function(Q){for(var ie=new Array(Q),re=0;re<Q;re+=1){ie[re]=new Array(Q);for(var pe=0;pe<Q;pe+=1)ie[re][pe]=null}return ie}(P),z(0,0),z(P-7,0),z(0,P-7),O(),L(),H(j,Y),C>=7&&$(j),D==null&&(D=X(C,A,R)),U(D,Y)},z=function(j,Y){for(var Q=-1;Q<=7;Q+=1)if(!(j+Q<=-1||P<=j+Q))for(var ie=-1;ie<=7;ie+=1)Y+ie<=-1||P<=Y+ie||(0<=Q&&Q<=6&&(ie==0||ie==6)||0<=ie&&ie<=6&&(Q==0||Q==6)||2<=Q&&Q<=4&&2<=ie&&ie<=4?I[j+Q][Y+ie]=!0:I[j+Q][Y+ie]=!1)},K=function(){for(var j=0,Y=0,Q=0;Q<8;Q+=1){G(!0,Q);var ie=a.getLostPoint(F);(Q==0||j>ie)&&(j=ie,Y=Q)}return Y},L=function(){for(var j=8;j<P-8;j+=1)I[j][6]==null&&(I[j][6]=j%2==0);for(var Y=8;Y<P-8;Y+=1)I[6][Y]==null&&(I[6][Y]=Y%2==0)},O=function(){for(var j=a.getPatternPosition(C),Y=0;Y<j.length;Y+=1)for(var Q=0;Q<j.length;Q+=1){var ie=j[Y],re=j[Q];if(I[ie][re]==null)for(var pe=-2;pe<=2;pe+=1)for(var M=-2;M<=2;M+=1)pe==-2||pe==2||M==-2||M==2||pe==0&&M==0?I[ie+pe][re+M]=!0:I[ie+pe][re+M]=!1}},$=function(j){for(var Y=a.getBCHTypeNumber(C),Q=0;Q<18;Q+=1){var ie=!j&&(Y>>Q&1)==1;I[Math.floor(Q/3)][Q%3+P-8-3]=ie}for(var Q=0;Q<18;Q+=1){var ie=!j&&(Y>>Q&1)==1;I[Q%3+P-8-3][Math.floor(Q/3)]=ie}},H=function(j,Y){for(var Q=A<<3|Y,ie=a.getBCHTypeInfo(Q),re=0;re<15;re+=1){var pe=!j&&(ie>>re&1)==1;re<6?I[re][8]=pe:re<8?I[re+1][8]=pe:I[P-15+re][8]=pe}for(var re=0;re<15;re+=1){var pe=!j&&(ie>>re&1)==1;re<8?I[8][P-re-1]=pe:re<9?I[8][15-re-1+1]=pe:I[8][15-re-1]=pe}I[P-8][8]=!j},U=function(j,Y){for(var Q=-1,ie=P-1,re=7,pe=0,M=a.getMaskFunction(Y),oe=P-1;oe>0;oe-=2)for(oe==6&&(oe-=1);;){for(var le=0;le<2;le+=1)if(I[ie][oe-le]==null){var q=!1;pe<j.length&&(q=(j[pe]>>>re&1)==1);var V=M(ie,oe-le);V&&(q=!q),I[ie][oe-le]=q,re-=1,re==-1&&(pe+=1,re=7)}if(ie+=Q,ie<0||P<=ie){ie-=Q,Q=-Q;break}}},ee=function(j,Y){for(var Q=0,ie=0,re=0,pe=new Array(Y.length),M=new Array(Y.length),oe=0;oe<Y.length;oe+=1){var le=Y[oe].dataCount,q=Y[oe].totalCount-le;ie=Math.max(ie,le),re=Math.max(re,q),pe[oe]=new Array(le);for(var V=0;V<pe[oe].length;V+=1)pe[oe][V]=255&j.getBuffer()[V+Q];Q+=le;var ae=a.getErrorCorrectPolynomial(q),xe=c(pe[oe],ae.getLength()-1),Te=xe.mod(ae);M[oe]=new Array(ae.getLength()-1);for(var V=0;V<M[oe].length;V+=1){var fe=V+Te.getLength()-M[oe].length;M[oe][V]=fe>=0?Te.getAt(fe):0}}for(var ke=0,V=0;V<Y.length;V+=1)ke+=Y[V].totalCount;for(var Me=new Array(ke),Re=0,V=0;V<ie;V+=1)for(var oe=0;oe<Y.length;oe+=1)V<pe[oe].length&&(Me[Re]=pe[oe][V],Re+=1);for(var V=0;V<re;V+=1)for(var oe=0;oe<Y.length;oe+=1)V<M[oe].length&&(Me[Re]=M[oe][V],Re+=1);return Me},X=function(j,Y,Q){for(var ie=u.getRSBlocks(j,Y),re=d(),pe=0;pe<Q.length;pe+=1){var M=Q[pe];re.put(M.getMode(),4),re.put(M.getLength(),a.getLengthInBits(M.getMode(),j)),M.write(re)}for(var oe=0,pe=0;pe<ie.length;pe+=1)oe+=ie[pe].dataCount;if(re.getLengthInBits()>oe*8)throw"code length overflow. ("+re.getLengthInBits()+">"+oe*8+")";for(re.getLengthInBits()+4<=oe*8&&re.put(0,4);re.getLengthInBits()%8!=0;)re.putBit(!1);for(;!(re.getLengthInBits()>=oe*8||(re.put(T,8),re.getLengthInBits()>=oe*8));)re.put(E,8);return ee(re,ie)};F.addData=function(j,Y){Y=Y||"Byte";var Q=null;switch(Y){case"Numeric":Q=h(j);break;case"Alphanumeric":Q=f(j);break;case"Byte":Q=b(j);break;case"Kanji":Q=m(j);break;default:throw"mode:"+Y}R.push(Q),D=null},F.isDark=function(j,Y){if(j<0||P<=j||Y<0||P<=Y)throw j+","+Y;return I[j][Y]},F.getModuleCount=function(){return P},F.make=function(){if(C<1){for(var j=1;j<40;j++){for(var Y=u.getRSBlocks(j,A),Q=d(),ie=0;ie<R.length;ie++){var re=R[ie];Q.put(re.getMode(),4),Q.put(re.getLength(),a.getLengthInBits(re.getMode(),j)),re.write(Q)}for(var pe=0,ie=0;ie<Y.length;ie++)pe+=Y[ie].dataCount;if(Q.getLengthInBits()<=pe*8)break}C=j}G(!1,K())},F.createTableTag=function(j,Y){j=j||2,Y=typeof Y>"u"?j*4:Y;var Q="";Q+='<table style="',Q+=" border-width: 0px; border-style: none;",Q+=" border-collapse: collapse;",Q+=" padding: 0px; margin: "+Y+"px;",Q+='">',Q+="<tbody>";for(var ie=0;ie<F.getModuleCount();ie+=1){Q+="<tr>";for(var re=0;re<F.getModuleCount();re+=1)Q+='<td style="',Q+=" border-width: 0px; border-style: none;",Q+=" border-collapse: collapse;",Q+=" padding: 0px; margin: 0px;",Q+=" width: "+j+"px;",Q+=" height: "+j+"px;",Q+=" background-color: ",Q+=F.isDark(ie,re)?"#000000":"#ffffff",Q+=";",Q+='"/>';Q+="</tr>"}return Q+="</tbody>",Q+="</table>",Q},F.createSvgTag=function(j,Y,Q,ie){var re={};typeof arguments[0]=="object"&&(re=arguments[0],j=re.cellSize,Y=re.margin,Q=re.alt,ie=re.title),j=j||2,Y=typeof Y>"u"?j*4:Y,Q=typeof Q=="string"?{text:Q}:Q||{},Q.text=Q.text||null,Q.id=Q.text?Q.id||"qrcode-description":null,ie=typeof ie=="string"?{text:ie}:ie||{},ie.text=ie.text||null,ie.id=ie.text?ie.id||"qrcode-title":null;var pe=F.getModuleCount()*j+Y*2,M,oe,le,q,V="",ae;for(ae="l"+j+",0 0,"+j+" -"+j+",0 0,-"+j+"z ",V+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',V+=re.scalable?"":' width="'+pe+'px" height="'+pe+'px"',V+=' viewBox="0 0 '+pe+" "+pe+'" ',V+=' preserveAspectRatio="xMinYMin meet"',V+=ie.text||Q.text?' role="img" aria-labelledby="'+ge([ie.id,Q.id].join(" ").trim())+'"':"",V+=">",V+=ie.text?'<title id="'+ge(ie.id)+'">'+ge(ie.text)+"</title>":"",V+=Q.text?'<description id="'+ge(Q.id)+'">'+ge(Q.text)+"</description>":"",V+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',V+='<path d="',le=0;le<F.getModuleCount();le+=1)for(q=le*j+Y,M=0;M<F.getModuleCount();M+=1)F.isDark(le,M)&&(oe=M*j+Y,V+="M"+oe+","+q+ae);return V+='" stroke="transparent" fill="black"/>',V+="</svg>",V},F.createDataURL=function(j,Y){j=j||2,Y=typeof Y>"u"?j*4:Y;var Q=F.getModuleCount()*j+Y*2,ie=Y,re=Q-Y;return x(Q,Q,function(pe,M){if(ie<=pe&&pe<re&&ie<=M&&M<re){var oe=Math.floor((pe-ie)/j),le=Math.floor((M-ie)/j);return F.isDark(le,oe)?0:1}else return 1})},F.createImgTag=function(j,Y,Q){j=j||2,Y=typeof Y>"u"?j*4:Y;var ie=F.getModuleCount()*j+Y*2,re="";return re+="<img",re+=' src="',re+=F.createDataURL(j,Y),re+='"',re+=' width="',re+=ie,re+='"',re+=' height="',re+=ie,re+='"',Q&&(re+=' alt="',re+=ge(Q),re+='"'),re+="/>",re};var ge=function(j){for(var Y="",Q=0;Q<j.length;Q+=1){var ie=j.charAt(Q);switch(ie){case"<":Y+="&lt;";break;case">":Y+="&gt;";break;case"&":Y+="&amp;";break;case'"':Y+="&quot;";break;default:Y+=ie;break}}return Y},J=function(j){var Y=1;j=typeof j>"u"?Y*2:j;var Q=F.getModuleCount()*Y+j*2,ie=j,re=Q-j,pe,M,oe,le,q,V={"":""," ":""," ":"","  ":" "},ae={"":""," ":""," ":" ","  ":" "},xe="";for(pe=0;pe<Q;pe+=2){for(oe=Math.floor((pe-ie)/Y),le=Math.floor((pe+1-ie)/Y),M=0;M<Q;M+=1)q="",ie<=M&&M<re&&ie<=pe&&pe<re&&F.isDark(oe,Math.floor((M-ie)/Y))&&(q=" "),ie<=M&&M<re&&ie<=pe+1&&pe+1<re&&F.isDark(le,Math.floor((M-ie)/Y))?q+=" ":q+="",xe+=j<1&&pe+1>=re?ae[q]:V[q];xe+=`
`}return Q%2&&j>0?xe.substring(0,xe.length-Q-1)+Array(Q+1).join(""):xe.substring(0,xe.length-1)};return F.createASCII=function(j,Y){if(j=j||1,j<2)return J(Y);j-=1,Y=typeof Y>"u"?j*2:Y;var Q=F.getModuleCount()*j+Y*2,ie=Y,re=Q-Y,pe,M,oe,le,q=Array(j+1).join(""),V=Array(j+1).join("  "),ae="",xe="";for(pe=0;pe<Q;pe+=1){for(oe=Math.floor((pe-ie)/j),xe="",M=0;M<Q;M+=1)le=1,ie<=M&&M<re&&ie<=pe&&pe<re&&F.isDark(oe,Math.floor((M-ie)/j))&&(le=0),xe+=le?q:V;for(oe=0;oe<j;oe+=1)ae+=xe+`
`}return ae.substring(0,ae.length-1)},F.renderTo2dContext=function(j,Y){Y=Y||2;for(var Q=F.getModuleCount(),ie=0;ie<Q;ie++)for(var re=0;re<Q;re++)j.fillStyle=F.isDark(ie,re)?"black":"white",j.fillRect(ie*Y,re*Y,Y,Y)},F};n.stringToBytesFuncs={default:function(w){for(var S=[],T=0;T<w.length;T+=1){var E=w.charCodeAt(T);S.push(E&255)}return S}},n.stringToBytes=n.stringToBytesFuncs.default,n.createStringToBytes=function(w,S){var T=function(){for(var C=v(w),A=function(){var L=C.read();if(L==-1)throw"eof";return L},I=0,P={};;){var D=C.read();if(D==-1)break;var R=A(),F=A(),G=A(),z=String.fromCharCode(D<<8|R),K=F<<8|G;P[z]=K,I+=1}if(I!=S)throw I+" != "+S;return P}(),E=63;return function(C){for(var A=[],I=0;I<C.length;I+=1){var P=C.charCodeAt(I);if(P<128)A.push(P);else{var D=T[C.charAt(I)];typeof D=="number"?(D&255)==D?A.push(D):(A.push(D>>>8),A.push(D&255)):A.push(E)}}return A}};var s={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a=function(){var w=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],S=1335,T=7973,E=21522,C={},A=function(I){for(var P=0;I!=0;)P+=1,I>>>=1;return P};return C.getBCHTypeInfo=function(I){for(var P=I<<10;A(P)-A(S)>=0;)P^=S<<A(P)-A(S);return(I<<10|P)^E},C.getBCHTypeNumber=function(I){for(var P=I<<12;A(P)-A(T)>=0;)P^=T<<A(P)-A(T);return I<<12|P},C.getPatternPosition=function(I){return w[I-1]},C.getMaskFunction=function(I){switch(I){case o.PATTERN000:return function(P,D){return(P+D)%2==0};case o.PATTERN001:return function(P,D){return P%2==0};case o.PATTERN010:return function(P,D){return D%3==0};case o.PATTERN011:return function(P,D){return(P+D)%3==0};case o.PATTERN100:return function(P,D){return(Math.floor(P/2)+Math.floor(D/3))%2==0};case o.PATTERN101:return function(P,D){return P*D%2+P*D%3==0};case o.PATTERN110:return function(P,D){return(P*D%2+P*D%3)%2==0};case o.PATTERN111:return function(P,D){return(P*D%3+(P+D)%2)%2==0};default:throw"bad maskPattern:"+I}},C.getErrorCorrectPolynomial=function(I){for(var P=c([1],0),D=0;D<I;D+=1)P=P.multiply(c([1,l.gexp(D)],0));return P},C.getLengthInBits=function(I,P){if(1<=P&&P<10)switch(I){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:return 8;case s.MODE_KANJI:return 8;default:throw"mode:"+I}else if(P<27)switch(I){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw"mode:"+I}else if(P<41)switch(I){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw"mode:"+I}else throw"type:"+P},C.getLostPoint=function(I){for(var P=I.getModuleCount(),D=0,R=0;R<P;R+=1)for(var F=0;F<P;F+=1){for(var G=0,z=I.isDark(R,F),K=-1;K<=1;K+=1)if(!(R+K<0||P<=R+K))for(var L=-1;L<=1;L+=1)F+L<0||P<=F+L||K==0&&L==0||z==I.isDark(R+K,F+L)&&(G+=1);G>5&&(D+=3+G-5)}for(var R=0;R<P-1;R+=1)for(var F=0;F<P-1;F+=1){var O=0;I.isDark(R,F)&&(O+=1),I.isDark(R+1,F)&&(O+=1),I.isDark(R,F+1)&&(O+=1),I.isDark(R+1,F+1)&&(O+=1),(O==0||O==4)&&(D+=3)}for(var R=0;R<P;R+=1)for(var F=0;F<P-6;F+=1)I.isDark(R,F)&&!I.isDark(R,F+1)&&I.isDark(R,F+2)&&I.isDark(R,F+3)&&I.isDark(R,F+4)&&!I.isDark(R,F+5)&&I.isDark(R,F+6)&&(D+=40);for(var F=0;F<P;F+=1)for(var R=0;R<P-6;R+=1)I.isDark(R,F)&&!I.isDark(R+1,F)&&I.isDark(R+2,F)&&I.isDark(R+3,F)&&I.isDark(R+4,F)&&!I.isDark(R+5,F)&&I.isDark(R+6,F)&&(D+=40);for(var $=0,F=0;F<P;F+=1)for(var R=0;R<P;R+=1)I.isDark(R,F)&&($+=1);var H=Math.abs(100*$/P/P-50)/5;return D+=H*10,D},C}(),l=function(){for(var w=new Array(256),S=new Array(256),T=0;T<8;T+=1)w[T]=1<<T;for(var T=8;T<256;T+=1)w[T]=w[T-4]^w[T-5]^w[T-6]^w[T-8];for(var T=0;T<255;T+=1)S[w[T]]=T;var E={};return E.glog=function(C){if(C<1)throw"glog("+C+")";return S[C]},E.gexp=function(C){for(;C<0;)C+=255;for(;C>=256;)C-=255;return w[C]},E}();function c(w,S){if(typeof w.length>"u")throw w.length+"/"+S;var T=function(){for(var C=0;C<w.length&&w[C]==0;)C+=1;for(var A=new Array(w.length-C+S),I=0;I<w.length-C;I+=1)A[I]=w[I+C];return A}(),E={};return E.getAt=function(C){return T[C]},E.getLength=function(){return T.length},E.multiply=function(C){for(var A=new Array(E.getLength()+C.getLength()-1),I=0;I<E.getLength();I+=1)for(var P=0;P<C.getLength();P+=1)A[I+P]^=l.gexp(l.glog(E.getAt(I))+l.glog(C.getAt(P)));return c(A,0)},E.mod=function(C){if(E.getLength()-C.getLength()<0)return E;for(var A=l.glog(E.getAt(0))-l.glog(C.getAt(0)),I=new Array(E.getLength()),P=0;P<E.getLength();P+=1)I[P]=E.getAt(P);for(var P=0;P<C.getLength();P+=1)I[P]^=l.gexp(l.glog(C.getAt(P))+A);return c(I,0).mod(C)},E}var u=function(){var w=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],S=function(C,A){var I={};return I.totalCount=C,I.dataCount=A,I},T={},E=function(C,A){switch(A){case i.L:return w[(C-1)*4+0];case i.M:return w[(C-1)*4+1];case i.Q:return w[(C-1)*4+2];case i.H:return w[(C-1)*4+3];default:return}};return T.getRSBlocks=function(C,A){var I=E(C,A);if(typeof I>"u")throw"bad rs block @ typeNumber:"+C+"/errorCorrectionLevel:"+A;for(var P=I.length/3,D=[],R=0;R<P;R+=1)for(var F=I[R*3+0],G=I[R*3+1],z=I[R*3+2],K=0;K<F;K+=1)D.push(S(G,z));return D},T}(),d=function(){var w=[],S=0,T={};return T.getBuffer=function(){return w},T.getAt=function(E){var C=Math.floor(E/8);return(w[C]>>>7-E%8&1)==1},T.put=function(E,C){for(var A=0;A<C;A+=1)T.putBit((E>>>C-A-1&1)==1)},T.getLengthInBits=function(){return S},T.putBit=function(E){var C=Math.floor(S/8);w.length<=C&&w.push(0),E&&(w[C]|=128>>>S%8),S+=1},T},h=function(w){var S=s.MODE_NUMBER,T=w,E={};E.getMode=function(){return S},E.getLength=function(I){return T.length},E.write=function(I){for(var P=T,D=0;D+2<P.length;)I.put(C(P.substring(D,D+3)),10),D+=3;D<P.length&&(P.length-D==1?I.put(C(P.substring(D,D+1)),4):P.length-D==2&&I.put(C(P.substring(D,D+2)),7))};var C=function(I){for(var P=0,D=0;D<I.length;D+=1)P=P*10+A(I.charAt(D));return P},A=function(I){if("0"<=I&&I<="9")return I.charCodeAt(0)-48;throw"illegal char :"+I};return E},f=function(w){var S=s.MODE_ALPHA_NUM,T=w,E={};E.getMode=function(){return S},E.getLength=function(A){return T.length},E.write=function(A){for(var I=T,P=0;P+1<I.length;)A.put(C(I.charAt(P))*45+C(I.charAt(P+1)),11),P+=2;P<I.length&&A.put(C(I.charAt(P)),6)};var C=function(A){if("0"<=A&&A<="9")return A.charCodeAt(0)-48;if("A"<=A&&A<="Z")return A.charCodeAt(0)-65+10;switch(A){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+A}};return E},b=function(w){var S=s.MODE_8BIT_BYTE,T=n.stringToBytes(w),E={};return E.getMode=function(){return S},E.getLength=function(C){return T.length},E.write=function(C){for(var A=0;A<T.length;A+=1)C.put(T[A],8)},E},m=function(w){var S=s.MODE_KANJI,T=n.stringToBytesFuncs.SJIS;if(!T)throw"sjis not supported.";(function(A,I){var P=T(A);if(P.length!=2||(P[0]<<8|P[1])!=I)throw"sjis not supported."})("",38726);var E=T(w),C={};return C.getMode=function(){return S},C.getLength=function(A){return~~(E.length/2)},C.write=function(A){for(var I=E,P=0;P+1<I.length;){var D=(255&I[P])<<8|255&I[P+1];if(33088<=D&&D<=40956)D-=33088;else if(57408<=D&&D<=60351)D-=49472;else throw"illegal char at "+(P+1)+"/"+D;D=(D>>>8&255)*192+(D&255),A.put(D,13),P+=2}if(P<I.length)throw"illegal char at "+(P+1)},C},g=function(){var w=[],S={};return S.writeByte=function(T){w.push(T&255)},S.writeShort=function(T){S.writeByte(T),S.writeByte(T>>>8)},S.writeBytes=function(T,E,C){E=E||0,C=C||T.length;for(var A=0;A<C;A+=1)S.writeByte(T[A+E])},S.writeString=function(T){for(var E=0;E<T.length;E+=1)S.writeByte(T.charCodeAt(E))},S.toByteArray=function(){return w},S.toString=function(){var T="";T+="[";for(var E=0;E<w.length;E+=1)E>0&&(T+=","),T+=w[E];return T+="]",T},S},y=function(){var w=0,S=0,T=0,E="",C={},A=function(P){E+=String.fromCharCode(I(P&63))},I=function(P){if(!(P<0)){if(P<26)return 65+P;if(P<52)return 97+(P-26);if(P<62)return 48+(P-52);if(P==62)return 43;if(P==63)return 47}throw"n:"+P};return C.writeByte=function(P){for(w=w<<8|P&255,S+=8,T+=1;S>=6;)A(w>>>S-6),S-=6},C.flush=function(){if(S>0&&(A(w<<6-S),w=0,S=0),T%3!=0)for(var P=3-T%3,D=0;D<P;D+=1)E+="="},C.toString=function(){return E},C},v=function(w){var S=w,T=0,E=0,C=0,A={};A.read=function(){for(;C<8;){if(T>=S.length){if(C==0)return-1;throw"unexpected end of file./"+C}var P=S.charAt(T);if(T+=1,P=="=")return C=0,-1;if(P.match(/^\s$/))continue;E=E<<6|I(P.charCodeAt(0)),C+=6}var D=E>>>C-8&255;return C-=8,D};var I=function(P){if(65<=P&&P<=90)return P-65;if(97<=P&&P<=122)return P-97+26;if(48<=P&&P<=57)return P-48+52;if(P==43)return 62;if(P==47)return 63;throw"c:"+P};return A},_=function(w,S){var T=w,E=S,C=new Array(w*S),A={};A.setPixel=function(R,F,G){C[F*T+R]=G},A.write=function(R){R.writeString("GIF87a"),R.writeShort(T),R.writeShort(E),R.writeByte(128),R.writeByte(0),R.writeByte(0),R.writeByte(0),R.writeByte(0),R.writeByte(0),R.writeByte(255),R.writeByte(255),R.writeByte(255),R.writeString(","),R.writeShort(0),R.writeShort(0),R.writeShort(T),R.writeShort(E),R.writeByte(0);var F=2,G=P(F);R.writeByte(F);for(var z=0;G.length-z>255;)R.writeByte(255),R.writeBytes(G,z,255),z+=255;R.writeByte(G.length-z),R.writeBytes(G,z,G.length-z),R.writeByte(0),R.writeString(";")};var I=function(R){var F=R,G=0,z=0,K={};return K.write=function(L,O){if(L>>>O)throw"length over";for(;G+O>=8;)F.writeByte(255&(L<<G|z)),O-=8-G,L>>>=8-G,z=0,G=0;z=L<<G|z,G=G+O},K.flush=function(){G>0&&F.writeByte(z)},K},P=function(R){for(var F=1<<R,G=(1<<R)+1,z=R+1,K=D(),L=0;L<F;L+=1)K.add(String.fromCharCode(L));K.add(String.fromCharCode(F)),K.add(String.fromCharCode(G));var O=g(),$=I(O);$.write(F,z);var H=0,U=String.fromCharCode(C[H]);for(H+=1;H<C.length;){var ee=String.fromCharCode(C[H]);H+=1,K.contains(U+ee)?U=U+ee:($.write(K.indexOf(U),z),K.size()<4095&&(K.size()==1<<z&&(z+=1),K.add(U+ee)),U=ee)}return $.write(K.indexOf(U),z),$.write(G,z),$.flush(),O.toByteArray()},D=function(){var R={},F=0,G={};return G.add=function(z){if(G.contains(z))throw"dup key:"+z;R[z]=F,F+=1},G.size=function(){return F},G.indexOf=function(z){return R[z]},G.contains=function(z){return typeof R[z]<"u"},G};return A},x=function(w,S,T){for(var E=_(w,S),C=0;C<S;C+=1)for(var A=0;A<w;A+=1)E.setPixel(A,C,T(A,C));var I=g();E.write(I);for(var P=y(),D=I.toByteArray(),R=0;R<D.length;R+=1)P.writeByte(D[R]);return P.flush(),"data:image/gif;base64,"+P};return n}();(function(){r.stringToBytesFuncs["UTF-8"]=function(n){function s(i){for(var o=[],a=0;a<i.length;a++){var l=i.charCodeAt(a);l<128?o.push(l):l<2048?o.push(192|l>>6,128|l&63):l<55296||l>=57344?o.push(224|l>>12,128|l>>6&63,128|l&63):(a++,l=65536+((l&1023)<<10|i.charCodeAt(a)&1023),o.push(240|l>>18,128|l>>12&63,128|l>>6&63,128|l&63))}return o}return s(n)}})(),function(n){t.exports=n()}(function(){return r})})(i9);var gwe=i9.exports,bwe=kr&&kr.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ME=kr&&kr.__assign||function(){return ME=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},ME.apply(this,arguments)};Object.defineProperty(hA,"__esModule",{value:!0});var o9=hA.QRCode=void 0,ywe=mwe,vwe=gwe,ww=k,_we=function(t){bwe(e,t);function e(r){var n=t.call(this,r)||this;return n.canvasRef=ww.createRef(),n}return e.prototype.download=function(r,n){if(this.canvasRef.current){var s=void 0;switch(r){case"jpg":s="image/jpeg";break;case"webp":s="image/webp";break;case"png":default:s="image/png";break}var i=this.canvasRef.current.toDataURL(s,1),o=document.createElement("a");o.download=n??"react-qrcode-logo",o.href=i,o.click()}},e.prototype.utf16to8=function(r){var n="",s,i,o=r.length;for(s=0;s<o;s++)i=r.charCodeAt(s),i>=1&&i<=127?n+=r.charAt(s):i>2047?(n+=String.fromCharCode(224|i>>12&15),n+=String.fromCharCode(128|i>>6&63),n+=String.fromCharCode(128|i>>0&63)):(n+=String.fromCharCode(192|i>>6&31),n+=String.fromCharCode(128|i>>0&63));return n},e.prototype.drawRoundedSquare=function(r,n,s,i,o,a,l,c){c.lineWidth=r,c.fillStyle=o,c.strokeStyle=o,s+=r/2,n+=r/2,i-=r,Array.isArray(a)||(a=[a,a,a,a]),a=a.map(function(b){return b=Math.min(b,i/2),b<0?0:b});var u=a[0]||0,d=a[1]||0,h=a[2]||0,f=a[3]||0;c.beginPath(),c.moveTo(n+u,s),c.lineTo(n+i-d,s),d&&c.quadraticCurveTo(n+i,s,n+i,s+d),c.lineTo(n+i,s+i-h),h&&c.quadraticCurveTo(n+i,s+i,n+i-h,s+i),c.lineTo(n+f,s+i),f&&c.quadraticCurveTo(n,s+i,n,s+i-f),c.lineTo(n,s+u),u&&c.quadraticCurveTo(n,s,n+u,s),c.closePath(),c.stroke(),l&&c.fill()},e.prototype.drawPositioningPattern=function(r,n,s,i,o,a,l){l===void 0&&(l=[0,0,0,0]);var c=Math.ceil(n),u,d;typeof l!="number"&&!Array.isArray(l)?(u=l.outer||0,d=l.inner||0):(u=l,d=u);var h,f;typeof a!="string"?(h=a.outer,f=a.inner):(h=a,f=a);var b=i*n+s,m=o*n+s,g=n*7;this.drawRoundedSquare(c,m,b,g,h,u,!1,r),g=n*3,b+=n*2,m+=n*2,this.drawRoundedSquare(c,m,b,g,f,d,!0,r)},e.prototype.isInPositioninZone=function(r,n,s){return s.some(function(i){return n>=i.row&&n<=i.row+7&&r>=i.col&&r<=i.col+7})},e.prototype.transformPixelLengthIntoNumberOfCells=function(r,n){return r/n},e.prototype.isCoordinateInImage=function(r,n,s,i,o,a,l,c){if(c){var u=2,d=this.transformPixelLengthIntoNumberOfCells(o,l),h=this.transformPixelLengthIntoNumberOfCells(a,l),f=this.transformPixelLengthIntoNumberOfCells(s,l)-1,b=this.transformPixelLengthIntoNumberOfCells(i,l)-1;return n>=d-u&&n<=d+f+u&&r>=h-u&&r<=h+b+u}else return!1},e.prototype.shouldComponentUpdate=function(r){return!ywe(this.props,r)},e.prototype.componentDidMount=function(){this.update()},e.prototype.componentDidUpdate=function(){this.update()},e.prototype.update=function(){var r,n=this.props,s=n.value,i=n.ecLevel,o=n.enableCORS,a=n.bgColor,l=n.fgColor,c=n.logoImage,u=n.logoOpacity,d=n.logoOnLoad,h=n.removeQrCodeBehindLogo,f=n.qrStyle,b=n.eyeRadius,m=n.eyeColor,g=n.logoPaddingStyle,y=+this.props.size,v=+this.props.quietZone,_=this.props.logoWidth?+this.props.logoWidth:0,x=this.props.logoHeight?+this.props.logoHeight:0,w=this.props.logoPadding?+this.props.logoPadding:0,S=vwe(0,i);S.addData(this.utf16to8(s)),S.make();var T=(r=this.canvasRef)===null||r===void 0?void 0:r.current,E=T.getContext("2d"),C=y+2*v,A=S.getModuleCount(),I=y/A,P=window.devicePixelRatio||1;T.height=T.width=C*P,E.scale(P,P),E.fillStyle=a,E.fillRect(0,0,C,C);var D=v,R=[{row:0,col:0},{row:0,col:A-7},{row:A-7,col:0}];if(E.strokeStyle=l,f==="dots"){E.fillStyle=l;for(var F=I/2,G=0;G<A;G++)for(var z=0;z<A;z++)S.isDark(G,z)&&!this.isInPositioninZone(G,z,R)&&(E.beginPath(),E.arc(Math.round(z*I)+F+D,Math.round(G*I)+F+D,F/100*75,0,2*Math.PI,!1),E.closePath(),E.fill())}else if(f==="fluid"){for(var F=Math.ceil(I/2),G=0;G<A;G++)for(var z=0;z<A;z++)if(S.isDark(G,z)&&!this.isInPositioninZone(G,z,R)){var K=[!1,!1,!1,!1];G>0&&!S.isDark(G-1,z)&&z>0&&!S.isDark(G,z-1)&&(K[0]=!0),G>0&&!S.isDark(G-1,z)&&z<A-1&&!S.isDark(G,z+1)&&(K[1]=!0),G<A-1&&!S.isDark(G+1,z)&&z<A-1&&!S.isDark(G,z+1)&&(K[2]=!0),G<A-1&&!S.isDark(G+1,z)&&z>0&&!S.isDark(G,z-1)&&(K[3]=!0);var L=Math.ceil((z+1)*I)-Math.floor(z*I),O=Math.ceil((G+1)*I)-Math.floor(G*I);E.fillStyle=l,E.beginPath(),E.arc(Math.round(z*I)+F+D,Math.round(G*I)+F+D,F,0,2*Math.PI,!1),E.closePath(),E.fill(),K[0]||E.fillRect(Math.round(z*I)+D,Math.round(G*I)+D,L/2,O/2),K[1]||E.fillRect(Math.round(z*I)+D+Math.floor(L/2),Math.round(G*I)+D,L/2,O/2),K[2]||E.fillRect(Math.round(z*I)+D+Math.floor(L/2),Math.round(G*I)+D+Math.floor(O/2),L/2,O/2),K[3]||E.fillRect(Math.round(z*I)+D,Math.round(G*I)+D+Math.floor(O/2),L/2,O/2)}}else for(var G=0;G<A;G++)for(var z=0;z<A;z++)if(S.isDark(G,z)&&!this.isInPositioninZone(G,z,R)){E.fillStyle=l;var L=Math.ceil((z+1)*I)-Math.floor(z*I),O=Math.ceil((G+1)*I)-Math.floor(G*I);E.fillRect(Math.round(z*I)+D,Math.round(G*I)+D,L,O)}for(var $=0;$<3;$++){var H=R[$],G=H.row,z=H.col,U=b,ee=void 0;Array.isArray(U)&&(U=U[$]),typeof U=="number"&&(U=[U,U,U,U]),m?Array.isArray(m)?ee=m[$]:ee=m:ee=l,this.drawPositioningPattern(E,I,D,G,z,ee,U)}if(c){var X=new Image;o&&(X.crossOrigin="Anonymous"),X.onload=function(ge){E.save();var J=_||y*.2,j=x||J,Y=(y-J)/2,Q=(y-j)/2;if(h||w){E.beginPath(),E.strokeStyle=a,E.fillStyle=a;var ie=J+2*w,re=j+2*w,pe=Y+D-w,M=Q+D-w;if(g==="circle"){var oe=pe+ie/2,le=M+re/2;E.ellipse(oe,le,ie/2,re/2,0,0,2*Math.PI),E.stroke(),E.fill()}else E.fillRect(pe,M,ie,re)}E.globalAlpha=u,E.drawImage(X,Y+D,Q+D,J,j),E.restore(),d&&d(ge)},X.src=c}},e.prototype.render=function(){var r,n=+this.props.size+2*+this.props.quietZone;return ww.createElement("canvas",{id:(r=this.props.id)!==null&&r!==void 0?r:"react-qrcode-logo",height:n,width:n,style:ME({height:n+"px",width:n+"px"},this.props.style),ref:this.canvasRef})},e.defaultProps={value:"https://reactjs.org/",ecLevel:"M",enableCORS:!1,size:150,quietZone:10,bgColor:"#FFFFFF",fgColor:"#000000",logoOpacity:1,qrStyle:"squares",eyeRadius:[0,0,0],logoPaddingStyle:"square"},e}(ww.Component);o9=hA.QRCode=_we;const a9=({open:t,onClose:e})=>{const r=He(Kf);return p.jsx(Ii,{open:t,onOpenChange:n=>!n&&e(),children:p.jsx(vl,{className:"text-center !flex-col !mx-auto !text-center !max-w-md",showCloseButton:!0,onClose:e,children:p.jsxs("div",{className:"border !border-bolt-elements-borderColor flex flex-col gap-5 justify-center items-center p-6 bg-bolt-elements-background-depth-2 rounded-md",children:[p.jsx("div",{className:"i-bolt:expo-brand h-10 w-full invert dark:invert-none"}),p.jsx(Ci,{className:"text-bolt-elements-textTertiary text-lg font-semibold leading-6",children:"Preview on your own mobile device"}),p.jsx(mc,{className:"bg-bolt-elements-background-depth-3 max-w-sm rounded-md p-1 border border-bolt-elements-borderColor",children:"Scan this QR code with the Expo Go app on your mobile device to open your project."}),p.jsx("div",{className:"my-6 flex flex-col items-center",children:r?p.jsx(o9,{logoImage:"/favicon.svg",removeQrCodeBehindLogo:!0,logoPadding:3,logoHeight:50,logoWidth:50,logoPaddingStyle:"square",style:{borderRadius:16,padding:2,backgroundColor:"#1e3a8a"},value:r,size:200}):p.jsx("div",{className:"text-gray-500 text-center",children:"No Expo URL detected."})})]})})})},xwe=({boxModel:t,onValueChange:e})=>{const[r,n]=k.useState(null),[s,i]=k.useState(""),o=k.useCallback((u,d)=>{n(u),i(String(d))},[]),a=k.useCallback(u=>{if(e&&s!==""){const[d,h]=u.split("-"),f=`${d}-${h}`;e(f,`${s}px`)}n(null),i("")},[s,e]),l=k.useCallback((u,d)=>{u.key==="Enter"?a(d):u.key==="Escape"&&(n(null),i(""))},[a]);if(!t)return p.jsx("div",{className:"text-bolt-elements-textSecondary text-xs text-center py-4",children:"No box model data available"});const c=(u,d,h)=>{if(r===u)return p.jsx("input",{type:"number",value:s,onChange:b=>i(b.target.value),onBlur:()=>a(u),onKeyDown:b=>l(b,u),className:"w-10 h-4 text-center text-[10px] bg-bolt-elements-background-depth-4 border border-bolt-elements-borderColor rounded focus:outline-none focus:border-accent-400",autoFocus:!0});const f=Math.round(d);return p.jsxs("button",{onClick:()=>o(u,d),className:`text-[10px] font-mono hover:bg-bolt-elements-background-depth-4 px-1 rounded cursor-pointer transition-colors ${h}`,title:`Click to edit ${u}`,children:[f,"px"]})};return p.jsxs("div",{className:"space-y-3",children:[p.jsx("div",{className:"relative",children:p.jsxs("div",{className:"bg-orange-500/20 border border-orange-500/40 rounded p-1",children:[p.jsx("div",{className:"text-[9px] text-orange-400 font-medium absolute top-1 left-1",children:"margin"}),p.jsx("div",{className:"flex justify-center py-1",children:c("margin-top",t.margin.top,"text-orange-300")}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"flex justify-center px-2 min-w-[30px]",children:c("margin-left",t.margin.left,"text-orange-300")}),p.jsxs("div",{className:"flex-1 bg-yellow-500/20 border border-yellow-500/40 rounded p-1",children:[p.jsx("div",{className:"text-[9px] text-yellow-400 font-medium absolute left-8 top-8",children:"border"}),p.jsx("div",{className:"flex justify-center py-0.5",children:c("border-top",t.border.top,"text-yellow-300")}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"flex justify-center px-1 min-w-[20px]",children:c("border-left",t.border.left,"text-yellow-300")}),p.jsxs("div",{className:"flex-1 bg-green-500/20 border border-green-500/40 rounded p-1",children:[p.jsx("div",{className:"text-[9px] text-green-400 font-medium",children:"padding"}),p.jsx("div",{className:"flex justify-center py-0.5",children:c("padding-top",t.padding.top,"text-green-300")}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"flex justify-center px-1 min-w-[20px]",children:c("padding-left",t.padding.left,"text-green-300")}),p.jsx("div",{className:"flex-1 bg-blue-500/30 border border-blue-500/50 rounded py-3 px-2 text-center",children:p.jsxs("div",{className:"text-[10px] text-blue-300 font-mono",children:[Math.round(t.width),"  ",Math.round(t.height)]})}),p.jsx("div",{className:"flex justify-center px-1 min-w-[20px]",children:c("padding-right",t.padding.right,"text-green-300")})]}),p.jsx("div",{className:"flex justify-center py-0.5",children:c("padding-bottom",t.padding.bottom,"text-green-300")})]}),p.jsx("div",{className:"flex justify-center px-1 min-w-[20px]",children:c("border-right",t.border.right,"text-yellow-300")})]}),p.jsx("div",{className:"flex justify-center py-0.5",children:c("border-bottom",t.border.bottom,"text-yellow-300")})]}),p.jsx("div",{className:"flex justify-center px-2 min-w-[30px]",children:c("margin-right",t.margin.right,"text-orange-300")})]}),p.jsx("div",{className:"flex justify-center py-1",children:c("margin-bottom",t.margin.bottom,"text-orange-300")})]})}),p.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] justify-center pt-1",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-3 h-3 bg-orange-500/30 border border-orange-500/50 rounded"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Margin"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-3 h-3 bg-yellow-500/30 border border-yellow-500/50 rounded"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Border"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-3 h-3 bg-green-500/30 border border-green-500/50 rounded"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Padding"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-3 h-3 bg-blue-500/30 border border-blue-500/50 rounded"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Content"})]})]}),p.jsx("div",{className:"border-t border-bolt-elements-borderColor pt-2",children:p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[p.jsxs("div",{className:"bg-bolt-elements-background-depth-3 rounded p-2 border border-bolt-elements-borderColor",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary block text-[10px]",children:"Box Sizing"}),p.jsx("span",{className:"text-bolt-elements-textPrimary font-mono text-[11px]",children:t.boxSizing})]}),p.jsxs("div",{className:"bg-bolt-elements-background-depth-3 rounded p-2 border border-bolt-elements-borderColor",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary block text-[10px]",children:"Border Style"}),p.jsx("span",{className:"text-bolt-elements-textPrimary font-mono text-[11px]",children:t.borderStyle||"none"})]})]})}),p.jsx("p",{className:"text-bolt-elements-textTertiary text-[10px] text-center italic",children:"Click any value to edit  Changes will be applied with AI"})]})},wwe=[{id:"center",icon:"i-ph:align-center-horizontal",label:"Center",description:"Center this element",generatePrompt:t=>`Please center the element \`${Ea(t)}\` both horizontally and vertically within its parent container. Use flexbox or grid for modern centering.`},{id:"responsive",icon:"i-ph:devices",label:"Responsive",description:"Make responsive",generatePrompt:t=>`Please make the element \`${Ea(t)}\` fully responsive. Add appropriate media queries or use relative units (%, rem, vw/vh) so it adapts well to mobile, tablet, and desktop screens.`},{id:"add-animation",icon:"i-ph:sparkle",label:"Animate",description:"Add animation",generatePrompt:t=>`Please add a subtle, professional CSS animation to the element \`${Ea(t)}\`. Consider a fade-in, slide-in, or gentle hover effect that enhances the user experience without being distracting.`},{id:"improve-spacing",icon:"i-ph:arrows-out",label:"Spacing",description:"Improve spacing",generatePrompt:t=>{const e=Ea(t),r=t.boxModel,n=r?`Current margin: ${r.margin.top}px ${r.margin.right}px ${r.margin.bottom}px ${r.margin.left}px, padding: ${r.padding.top}px ${r.padding.right}px ${r.padding.bottom}px ${r.padding.left}px`:"";return`Please improve the spacing (margin and padding) of the element \`${e}\` to create better visual hierarchy and breathing room. ${n}. Adjust these values for better aesthetics while maintaining consistency with the overall design.`}},{id:"accessibility",icon:"i-ph:eye",label:"A11y",description:"Improve accessibility",generatePrompt:t=>{const e=Ea(t),r=t.tagName.toLowerCase();return`Please improve the accessibility of the element \`${e}\` (${r}). Consider adding:
- Appropriate ARIA labels and roles if needed
- Sufficient color contrast
- Focus states for interactive elements
- Screen reader friendly content
- Keyboard navigation support if applicable`}},{id:"add-shadow",icon:"i-ph:drop-half-bottom",label:"Shadow",description:"Add shadow effect",generatePrompt:t=>`Please add a subtle, modern box-shadow to the element \`${Ea(t)}\` to create depth and elevation. Use a soft shadow that works well with both light and dark themes.`},{id:"rounded-corners",icon:"i-ph:square",label:"Round",description:"Add rounded corners",generatePrompt:t=>`Please add appropriate border-radius to the element \`${Ea(t)}\` to give it nicely rounded corners. Choose a radius that fits the overall design aesthetic.`},{id:"duplicate",icon:"i-ph:copy",label:"Duplicate",description:"Duplicate element",generatePrompt:t=>`Please duplicate the element \`${Ea(t)}\` and place the copy right after the original. Keep all the same styling and content.`}];function Ea(t){const e=[t.tagName.toLowerCase()];if(t.id&&e.push(`#${t.id}`),t.className){const r=t.className.split(" ")[0];r&&e.push(`.${r}`)}return e.join("")}const Swe=({selectedElement:t,onAIAction:e})=>{const r=k.useCallback(n=>{if(!t)return;const s=n.generatePrompt(t);e(s)},[t,e]);return t?p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-xs text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:magic-wand w-3.5 h-3.5 text-accent-400"}),p.jsx("span",{children:"Quick AI Actions"})]}),p.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:wwe.map(n=>p.jsxs("button",{onClick:()=>r(n),className:"flex flex-col items-center gap-1 p-2 rounded-lg bg-[#2D3748] border border-bolt-elements-borderColor hover:border-accent-500/50 hover:bg-bolt-elements-background-depth-4 transition-all group",title:n.description,children:[p.jsx("div",{className:`${n.icon} w-4 h-4 text-bolt-elements-textSecondary group-hover:text-accent-400 transition-colors`}),p.jsx("span",{className:"text-[10px] text-bolt-elements-textSecondary group-hover:text-bolt-elements-textPrimary",children:n.label})]},n.id))}),p.jsx("p",{className:"text-[10px] text-bolt-elements-textTertiary text-center italic",children:"Click an action to send the request to AI"})]}):null},Hh=k.memo(({element:t,isActive:e=!1,indent:r=0,onClick:n,icon:s})=>p.jsxs("button",{onClick:n,className:`w-full text-left px-2 py-1.5 text-xs font-mono rounded transition-all flex items-center gap-1.5 ${e?"bg-accent-500/20 text-accent-400 border border-accent-500/30":"hover:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary"}`,style:{paddingLeft:`${r*12+8}px`},title:t.selector,children:[s&&p.jsx("span",{className:`${s} w-3 h-3 opacity-60`}),p.jsx("span",{className:"text-blue-400",children:t.tagName}),t.id&&p.jsxs("span",{className:"text-green-400",children:["#",t.id]}),t.classes.length>0&&!t.id&&p.jsxs("span",{className:"text-yellow-400 truncate",children:[".",t.classes[0]]}),t.hasChildren&&p.jsx("span",{className:"text-bolt-elements-textTertiary ml-auto",children:""})]}));Hh.displayName="TreeNode";const l9=k.memo(({hierarchy:t,onSelectElement:e})=>{const r=k.useCallback(n=>{e?.(n)},[e]);return!t||!t.current?p.jsxs("div",{className:"text-center py-8 text-bolt-elements-textTertiary text-xs",children:[p.jsx("div",{className:"i-ph:tree-structure w-8 h-8 mx-auto mb-2 opacity-40"}),p.jsx("p",{children:"Select an element to view its tree"})]}):p.jsxs("div",{className:"space-y-3",children:[t.parents.length>0&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-bolt-elements-textTertiary uppercase tracking-wide mb-1",children:[p.jsx("span",{className:"i-ph:arrow-up w-3 h-3"}),"Parents"]}),p.jsx("div",{className:"border-l-2 border-bolt-elements-borderColor ml-1.5 pl-1",children:t.parents.map((n,s)=>p.jsx(Hh,{element:n,indent:s,onClick:()=>r(n.selector),icon:"i-ph:folder-simple"},`parent-${s}`))})]}),p.jsxs("div",{className:"space-y-0.5",children:[p.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-accent-400 uppercase tracking-wide mb-1",children:[p.jsx("span",{className:"i-ph:cursor-click w-3 h-3"}),"Selected"]}),p.jsx(Hh,{element:t.current,isActive:!0,indent:t.parents.length,icon:"i-ph:crosshair"})]}),t.children.length>0&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-bolt-elements-textTertiary uppercase tracking-wide mb-1",children:[p.jsx("span",{className:"i-ph:arrow-down w-3 h-3"}),"Children"]}),t.totalChildren>t.children.length&&p.jsxs("span",{className:"text-[10px] text-bolt-elements-textTertiary",children:["+",t.totalChildren-t.children.length," more"]})]}),p.jsx("div",{className:"border-l-2 border-accent-500/30 ml-1.5 pl-1",children:t.children.map((n,s)=>p.jsx(Hh,{element:n,indent:0,onClick:()=>r(n.selector),icon:"i-ph:file"},`child-${s}`))})]}),t.siblings.length>0&&p.jsxs("div",{className:"space-y-0.5",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-bolt-elements-textTertiary uppercase tracking-wide mb-1",children:[p.jsx("span",{className:"i-ph:arrows-horizontal w-3 h-3"}),"Siblings"]}),t.totalSiblings>t.siblings.length&&p.jsxs("span",{className:"text-[10px] text-bolt-elements-textTertiary",children:["+",t.totalSiblings-t.siblings.length," more"]})]}),p.jsx("div",{className:"border-l-2 border-bolt-elements-borderColor ml-1.5 pl-1 opacity-75",children:t.siblings.slice(0,5).map((n,s)=>p.jsx(Hh,{element:n,indent:0,onClick:()=>r(n.selector),icon:"i-ph:file-dashed"},`sibling-${s}`))})]}),p.jsx("div",{className:"pt-2 border-t border-bolt-elements-borderColor",children:p.jsx("p",{className:"text-[10px] text-bolt-elements-textTertiary text-center",children:"Click any element to navigate and inspect it"})})]})});l9.displayName="ElementTreeNavigator";const zh=t=>{if(t.startsWith("#"))return t.length===4?`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`:t;const e=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(e){const r=parseInt(e[1]).toString(16).padStart(2,"0"),n=parseInt(e[2]).toString(16).padStart(2,"0"),s=parseInt(e[3]).toString(16).padStart(2,"0");return`#${r}${n}${s}`}return t},Ewe=t=>{const e=zh(t).replace("#",""),r=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16);return(.299*r+.587*n+.114*s)/255>.5},c9=k.memo(({colors:t,onColorSelect:e})=>{const[r,n]=k.useState(null),s=k.useCallback(async a=>{const l=zh(a);try{await navigator.clipboard.writeText(l),n(l),setTimeout(()=>n(null),1500)}catch{console.error("Failed to copy color")}},[]),i=k.useCallback(a=>{e?.(zh(a))},[e]);if(!t||t.length===0)return p.jsxs("div",{className:"text-center py-4 text-bolt-elements-textTertiary text-xs",children:[p.jsx("div",{className:"i-ph:palette w-6 h-6 mx-auto mb-2 opacity-40"}),p.jsx("p",{children:"No colors detected"})]});const o=[...new Set(t.map(a=>zh(a)))].slice(0,16);return p.jsxs("div",{className:"space-y-3",children:[p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-bolt-elements-textTertiary uppercase tracking-wide",children:[p.jsx("span",{className:"i-ph:palette w-3 h-3"}),"Page Colors (",o.length,")"]})}),p.jsx("div",{className:"grid grid-cols-4 gap-2",children:o.map((a,l)=>{const c=zh(a),u=Ewe(a),d=r===c;return p.jsxs("div",{className:"flex flex-col items-center gap-1",children:[p.jsxs("button",{onClick:()=>s(a),onDoubleClick:()=>i(a),className:"w-10 h-10 rounded-lg border-2 transition-all hover:scale-110 hover:shadow-lg relative group",style:{backgroundColor:a,borderColor:u?"rgba(0,0,0,0.2)":"rgba(255,255,255,0.2)"},title:`${c}
Click to copy, double-click to use`,children:[d&&p.jsx("span",{className:`absolute inset-0 flex items-center justify-center text-xs font-bold ${u?"text-gray-800":"text-white"}`,children:""}),p.jsx("span",{className:`absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity ${u?"text-gray-800":"text-white"}`,children:p.jsx("span",{className:"i-ph:copy w-4 h-4"})})]}),p.jsx("span",{className:"text-[9px] text-bolt-elements-textTertiary font-mono truncate max-w-[44px]",children:c.slice(1).toUpperCase()})]},`${a}-${l}`)})}),p.jsx("div",{className:"pt-2 border-t border-bolt-elements-borderColor",children:p.jsx("p",{className:"text-[10px] text-bolt-elements-textTertiary text-center",children:"Click to copy  Double-click to apply"})})]})});c9.displayName="PageColorPalette";const Cwe=[{category:"Single Element",targets:[{value:"current",label:"Current Element Only"}]},{category:"Headings",targets:[{value:"all-headings",label:"All Headings (H1-H6)"},{value:"h1",label:"All H1"},{value:"h2",label:"All H2"},{value:"h3",label:"All H3"},{value:"h4",label:"All H4"}]},{category:"Text",targets:[{value:"all-text",label:"All Text Elements"},{value:"p",label:"All Paragraphs"},{value:"a",label:"All Links"},{value:"span",label:"All Spans"},{value:"label",label:"All Labels"}]},{category:"Containers",targets:[{value:"all-boxes",label:"All Containers"},{value:"div",label:"All Divs"},{value:"section",label:"All Sections"},{value:"article",label:"All Articles"},{value:"aside",label:"All Asides"}]},{category:"Lists",targets:[{value:"all-lists",label:"All Lists"},{value:"li",label:"All List Items"}]}],Twe={current:"","all-headings":"h1, h2, h3, h4, h5, h6",h1:"h1",h2:"h2",h3:"h3",h4:"h4","all-text":"p, span, a, label, li, td, th",p:"p",a:"a",span:"span",label:"label","all-boxes":"div, section, article, aside, main, header, footer, nav",div:"div",section:"section",article:"article",aside:"aside","all-lists":"ul, ol",li:"li"},kwe=({currentTagName:t,selectedTarget:e,onSelectTarget:r,affectedCount:n})=>{const[s,i]=k.useState(!1),o=k.useCallback((c,u)=>{r(c==="current"?null:c==="same-tag"?{value:"same-tag",label:`All <${t}>`,selector:t.toLowerCase()}:{value:c,label:u,selector:Twe[c]||c}),i(!1)},[t,r]),a=e?e.label:"Current Element Only",l=e!==null;return p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>i(!s),className:`w-full flex items-center justify-between gap-2 px-2 py-1.5 text-xs font-medium rounded border transition-colors ${l?"bg-purple-500/20 border-purple-500/50 text-purple-300 hover:bg-purple-500/30":"bg-bolt-elements-background-depth-3 border-bolt-elements-borderColor text-bolt-elements-textSecondary hover:bg-bolt-elements-background-depth-4"}`,children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("span",{className:l?"i-ph:stack-bold":"i-ph:cursor-click"}),p.jsx("span",{className:"truncate",children:a})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[l&&n!==void 0&&p.jsxs("span",{className:"text-[10px] bg-purple-500/30 px-1.5 py-0.5 rounded-full",children:[n," elements"]}),p.jsx("span",{className:`transition-transform ${s?"rotate-180":""}`,children:p.jsx("span",{className:"i-ph:caret-down w-3 h-3"})})]})]}),s&&p.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:[Cwe.map(c=>p.jsxs("div",{children:[p.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-bolt-elements-textTertiary uppercase bg-bolt-elements-background-depth-3 sticky top-0",children:c.category}),c.targets.map(u=>p.jsx("button",{onClick:()=>o(u.value,u.label),className:`w-full text-left px-3 py-1.5 text-xs hover:bg-bolt-elements-background-depth-3 transition-colors ${e?.value===u.value||u.value==="current"&&!e?"bg-accent-500/20 text-accent-400":"text-bolt-elements-textPrimary"}`,children:u.label},u.value))]},c.category)),t&&!["html","body","head"].includes(t.toLowerCase())&&p.jsxs("div",{children:[p.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-bolt-elements-textTertiary uppercase bg-bolt-elements-background-depth-3 sticky top-0",children:"Same Type"}),p.jsxs("button",{onClick:()=>o("same-tag",`All <${t}>`),className:`w-full text-left px-3 py-1.5 text-xs hover:bg-bolt-elements-background-depth-3 transition-colors ${e?.value==="same-tag"?"bg-accent-500/20 text-accent-400":"text-bolt-elements-textPrimary"}`,children:["All <",t.toLowerCase(),"> elements"]})]})]}),l&&p.jsxs("div",{className:"mt-1 text-[10px] text-purple-400 flex items-center gap-1",children:[p.jsx("span",{className:"i-ph:warning-circle w-3 h-3"}),"Changes will apply to all matching elements"]})]})},Awe=({selectedElement:t,isVisible:e,onClose:r,onStyleChange:n,onTextChange:s,onApplyWithAI:i,onDeleteElement:o,onAIAction:a,onSelectFromTree:l,onRevert:c,onBulkStyleChange:u,onBulkRevert:d,bulkAffectedCount:h,accumulatedBulkChanges:f,onApplyBulkCSS:b,onClearBulkChanges:m})=>{const[g,y]=k.useState("styles"),[v,_]=k.useState({}),[x,w]=k.useState(""),[S,T]=k.useState(null),[E,C]=k.useState(null),A=k.useCallback((O,$)=>{console.log("[InspectorPanel] Style change:",O,$,"bulk:",E?.selector),_(H=>({...H,[O]:$})),E&&u?u(E.selector,O,$):n?.(O,$)},[n,u,E]),I=k.useCallback(O=>{console.log("[InspectorPanel] Text change:",O),w(O),s?.(O)},[s]),P=Object.keys(v).length>0||x.length>0,D=k.useCallback(()=>{if(Object.keys(v).length===0)return"";const O=t?.selector||t?.tagName.toLowerCase()||"element",$=Object.entries(v).map(([H,U])=>`  ${H}: ${U};`).join(`
`);return`${O} {
${$}
}`},[v,t]),R=k.useCallback(async()=>{const O=D();if(!O){T("No changes to copy"),setTimeout(()=>T(null),2e3);return}try{await navigator.clipboard.writeText(O),T("Copied!"),setTimeout(()=>T(null),2e3)}catch{T("Failed to copy"),setTimeout(()=>T(null),2e3)}},[D]),F=k.useCallback(async()=>{if(!t)return;const O=t.selector||t.tagName.toLowerCase(),$=z(t.styles);if(Object.keys($).length===0){T("No styles to copy"),setTimeout(()=>T(null),2e3);return}const H=Object.entries($).map(([ee,X])=>`  ${ee}: ${X};`).join(`
`),U=`${O} {
${H}
}`;try{await navigator.clipboard.writeText(U),T("All styles copied!"),setTimeout(()=>T(null),2e3)}catch{T("Failed to copy"),setTimeout(()=>T(null),2e3)}},[t]),G=k.useCallback(()=>{!t||!P||i?.({element:t,styles:v,text:x||void 0})},[t,v,x,P,i]);if(!e||!t)return null;const z=O=>["color","background-color","background","font-size","font-weight","font-family","text-align","padding","margin","border","border-radius","width","height","display","position","flex-direction","justify-content","align-items","gap"].reduce((H,U)=>{const ee=O[U];return ee&&(H[U]=ee),H},{}),K=O=>O.includes("color")||O==="background"||O.includes("border"),L=O=>{const $=O.match(/#([0-9a-fA-F]{3,8})/);if($)return $[0];const H=O.match(/rgba?\([^)]+\)/);return H?H[0]:null};return p.jsxs("div",{className:"fixed right-4 top-20 w-80 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor rounded-lg shadow-lg z-[9999] max-h-[calc(100vh-6rem)] overflow-hidden",children:[p.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-bolt-elements-borderColor bg-bolt-elements-background-depth-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:cursor-click text-accent-400"}),p.jsx("h3",{className:"font-medium text-bolt-elements-textPrimary text-sm",children:"Element Inspector"})]}),p.jsx("button",{onClick:r,className:"text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors p-1 rounded hover:bg-bolt-elements-background-depth-4",children:p.jsx("div",{className:"i-ph:x w-4 h-4"})})]}),p.jsx("div",{className:"p-3 border-b border-bolt-elements-borderColor bg-bolt-elements-background-depth-2",children:p.jsx("div",{className:"text-sm",children:p.jsxs("div",{className:"font-mono text-xs bg-bolt-elements-background-depth-3 px-2 py-1.5 rounded border border-bolt-elements-borderColor",children:[p.jsx("span",{className:"text-blue-400",children:t.tagName.toLowerCase()}),t.id&&p.jsxs("span",{className:"text-green-400",children:["#",t.id]}),t.className&&p.jsxs("span",{className:"text-yellow-400",children:[".",t.className.split(" ")[0]]})]})})}),p.jsx("div",{className:"p-3 border-b border-bolt-elements-borderColor bg-bolt-elements-background-depth-2",children:p.jsx(kwe,{currentTagName:t.tagName,selectedTarget:E,onSelectTarget:C,affectedCount:h})}),p.jsx("div",{className:"flex border-b border-bolt-elements-borderColor",style:{background:"var(--bolt-elements-bg-depth-3)"},children:["styles","text","box","ai","tree","colors"].map(O=>p.jsx("button",{onClick:()=>y(O),className:"flex-1 px-1.5 py-2 text-[10px] font-medium capitalize transition-colors",style:{background:g===O?"var(--bolt-elements-bg-depth-2)":"transparent",color:g===O?"var(--color-accent-500, #3b82f6)":"var(--bolt-elements-textSecondary)",borderBottom:g===O?"2px solid var(--color-accent-500, #3b82f6)":"2px solid transparent"},children:O==="ai"?"AI":O==="tree"?"":O==="colors"?"":O},O))}),p.jsxs("div",{className:"p-3 overflow-y-auto max-h-80 bg-bolt-elements-background-depth-2",children:[g==="styles"&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs("button",{onClick:F,className:"w-full flex items-center justify-center gap-1.5 px-2 py-1.5 text-xs font-medium rounded border border-bolt-elements-borderColor bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary hover:bg-bolt-elements-background-depth-4 hover:text-bolt-elements-textPrimary transition-colors mb-3",children:[p.jsx("span",{className:"i-ph:clipboard w-3.5 h-3.5"}),S||"Copy All Styles"]}),Object.entries(z(t.styles)).map(([O,$])=>{const H=v[O]??$,U=K(O)?L(H):null;return p.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[p.jsxs("span",{className:"text-bolt-elements-textSecondary min-w-[100px] truncate",title:O,children:[O,":"]}),p.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[U&&p.jsx("div",{className:"relative w-6 h-6 rounded overflow-hidden border border-bolt-elements-borderColor",children:p.jsx("input",{type:"color",value:U.startsWith("#")?U:"#000000",onChange:ee=>A(O,ee.target.value),className:"absolute inset-0 w-[200%] h-[200%] -top-1 -left-1 cursor-pointer border-0 p-0 m-0",style:{background:"transparent"},title:"Pick color"})}),p.jsx("input",{type:"text",value:H,onChange:ee=>A(O,ee.target.value),className:"flex-1 bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor rounded px-2 py-1 text-bolt-elements-textPrimary font-mono text-xs focus:outline-none focus:border-accent-400"})]})]},O)}),Object.keys(z(t.styles)).length===0&&p.jsx("p",{className:"text-bolt-elements-textSecondary text-xs italic",children:"No editable styles found"})]}),g==="text"&&p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-bolt-elements-textSecondary block mb-1",children:"Text Content"}),p.jsx("textarea",{value:x||t.textContent,onChange:O=>I(O.target.value),className:"w-full bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor rounded px-2 py-2 text-bolt-elements-textPrimary text-sm focus:outline-none focus:border-accent-400 resize-none",rows:4,placeholder:"Enter text content..."})]}),p.jsx("p",{className:"text-bolt-elements-textTertiary text-xs",children:"Changes apply instantly to the preview. Note: Only works for simple text elements."})]}),g==="box"&&p.jsx(xwe,{boxModel:t.boxModel||null,onValueChange:A}),g==="ai"&&p.jsx(Swe,{selectedElement:t,onAIAction:O=>{a?.(O)}}),g==="tree"&&p.jsx(l9,{hierarchy:t.hierarchy||null,onSelectElement:l}),g==="colors"&&p.jsx(c9,{colors:t.colors||[],onColorSelect:O=>{A("background-color",O)}})]}),p.jsxs("div",{className:"p-3 border-t border-bolt-elements-borderColor bg-bolt-elements-background-depth-3 space-y-2",children:[f&&f.length>0&&p.jsxs("div",{className:"space-y-2 p-2 rounded-lg border border-green-500/30 bg-green-500/5",children:[p.jsxs("div",{className:"flex items-center justify-between text-xs",children:[p.jsxs("span",{className:"text-green-400 font-medium",children:[f.length," bulk ",f.length===1?"change":"changes"," ","pending"]}),p.jsx("button",{onClick:m,className:"text-bolt-elements-textTertiary hover:text-red-400 transition-colors",title:"Clear all bulk changes",children:p.jsx("div",{className:"i-ph:x-circle w-4 h-4"})})]}),p.jsxs("button",{onClick:b,className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors",children:[p.jsx("div",{className:"i-ph:code w-3.5 h-3.5"}),"Apply All Bulk CSS"]})]}),P?p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:R,className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-background-depth-2 text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-4 transition-colors",children:[p.jsx("div",{className:"i-ph:clipboard w-3.5 h-3.5"}),S||"Copy CSS"]}),p.jsxs("button",{onClick:G,className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium rounded-lg bg-accent-500 text-white hover:bg-accent-600 transition-colors",children:[p.jsx("div",{className:"i-ph:magic-wand w-3.5 h-3.5"}),"Apply with AI"]})]}),p.jsxs("button",{onClick:()=>{E&&d?d(E.selector):c?.(),_({}),w("")},className:`w-full flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium rounded-lg border transition-colors ${E?"border-purple-500/30 bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 hover:border-purple-500/50":"border-amber-500/30 bg-amber-500/10 text-amber-400 hover:bg-amber-500/20 hover:border-amber-500/50"}`,children:[p.jsx("div",{className:"i-ph:arrow-counter-clockwise w-3.5 h-3.5"}),E?`Revert All ${E.label}`:"Revert Changes"]})]}):p.jsx("p",{className:"text-bolt-elements-textTertiary text-xs text-center",children:"Edit values above to see live changes"}),p.jsxs("button",{onClick:()=>o?.(t),className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium rounded-lg border border-red-500/30 bg-red-500/10 text-red-400 hover:bg-red-500/20 hover:border-red-500/50 transition-colors",children:[p.jsx("div",{className:"i-ph:trash w-3.5 h-3.5"}),"Delete Element"]})]})]})},Rwe=t=>[{name:t("preview.device.iphone_se","iPhone SE"),width:375,height:667,icon:"i-ph:device-mobile",hasFrame:!0,frameType:"mobile"},{name:t("preview.device.iphone_12_13","iPhone 12/13"),width:390,height:844,icon:"i-ph:device-mobile",hasFrame:!0,frameType:"mobile"},{name:t("preview.device.iphone_12_13_pro_max","iPhone 12/13 Pro Max"),width:428,height:926,icon:"i-ph:device-mobile",hasFrame:!0,frameType:"mobile"},{name:t("preview.device.ipad_mini","iPad Mini"),width:768,height:1024,icon:"i-ph:device-tablet",hasFrame:!0,frameType:"tablet"},{name:t("preview.device.ipad_air","iPad Air"),width:820,height:1180,icon:"i-ph:device-tablet",hasFrame:!0,frameType:"tablet"},{name:t("preview.device.ipad_pro_11",'iPad Pro 11"'),width:834,height:1194,icon:"i-ph:device-tablet",hasFrame:!0,frameType:"tablet"},{name:t("preview.device.ipad_pro_12_9",'iPad Pro 12.9"'),width:1024,height:1366,icon:"i-ph:device-tablet",hasFrame:!0,frameType:"tablet"},{name:t("preview.device.small_laptop","Small Laptop"),width:1280,height:800,icon:"i-ph:laptop",hasFrame:!0,frameType:"laptop"},{name:t("preview.device.laptop","Laptop"),width:1366,height:768,icon:"i-ph:laptop",hasFrame:!0,frameType:"laptop"},{name:t("preview.device.large_laptop","Large Laptop"),width:1440,height:900,icon:"i-ph:laptop",hasFrame:!0,frameType:"laptop"},{name:t("preview.device.desktop","Desktop"),width:1920,height:1080,icon:"i-ph:monitor",hasFrame:!0,frameType:"desktop"},{name:t("preview.device.4k_display","4K Display"),width:3840,height:2160,icon:"i-ph:monitor",hasFrame:!0,frameType:"desktop"}],ff=new Map;let xy=null;function Pwe(t={},e=5e3){return new Promise(r=>{const n=`screenshot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,s=setTimeout(()=>{ff.delete(n),r(XD(t.width||320,t.height||200))},e);ff.set(n,(i,o)=>{clearTimeout(s),r(i)}),xy?.contentWindow?xy.contentWindow.postMessage({type:"CAPTURE_SCREENSHOT_REQUEST",requestId:n,options:{width:t.width||320,height:t.height||200}},"*"):(clearTimeout(s),ff.delete(n),r(XD(t.width||320,t.height||200)))})}function XD(t,e){const r=document.createElement("canvas");r.width=t,r.height=e;const n=r.getContext("2d");if(!n)return"";const s=n.createLinearGradient(0,0,0,e);s.addColorStop(0,"#1a1f2e"),s.addColorStop(1,"#0f1219"),n.fillStyle=s,n.fillRect(0,0,t,e),n.fillStyle="#252a38",n.fillRect(0,0,t,28),n.fillStyle="#ff5f57",n.beginPath(),n.arc(12,14,5,0,Math.PI*2),n.fill(),n.fillStyle="#febc2e",n.beginPath(),n.arc(28,14,5,0,Math.PI*2),n.fill(),n.fillStyle="#28c840",n.beginPath(),n.arc(44,14,5,0,Math.PI*2),n.fill();const i=38;return n.fillStyle="#2d3548",n.fillRect(0,i,t,32),n.fillStyle="#3b82f6",n.beginPath(),n.roundRect(10,i+8,60,16,3),n.fill(),n.fillStyle="rgba(255,255,255,0.15)",n.fillRect(20,i+50,t*.6,20),n.fillStyle="rgba(255,255,255,0.08)",n.fillRect(20,i+78,t*.45,12),n.strokeStyle="rgba(255,255,255,0.08)",n.lineWidth=1,n.strokeRect(.5,.5,t-1,e-1),r.toDataURL("image/png",.8)}const u9=k.memo(({setSelectedElement:t})=>{const{t:e}=Ms(),r=k.useRef(null),n=k.useRef(null),s=k.useRef(null),[i,o]=k.useState(0),[a,l]=k.useState(!1),[c,u]=k.useState(!1),d=k.useRef(!1),h=He(Pe.previews),f=h[i],b=He(gt).isPreviewMode,m=(()=>{if(!f?.baseUrl)return"";const Ee=f.baseUrl.match(/^https?:\/\/([^.]+)\.local-credentialless\.webcontainer-api\.io/);return Ee?`http://localhost:5173/webcontainer/preview/${Ee[1]}`:f.baseUrl})(),[g,y]=k.useState("/"),[v,_]=k.useState(),[x,w]=k.useState(!1),[S,T]=k.useState(!1),[E,C]=k.useState(37.5),[A,I]=k.useState(0),[P,D]=k.useState(null),[R,F]=k.useState(!1),[G,z]=k.useState([]),K=k.useRef({isResizing:!1,side:null,startX:0,startWidthPercent:37.5,windowWidth:window.innerWidth,pointerId:null}),L=1,O=k.useMemo(()=>Rwe(e),[e]),[$,H]=k.useState(!1),[U,ee]=k.useState(O[0]),[X,ge]=k.useState(!1),[J,j]=k.useState(!0),[Y,Q]=k.useState(!1),ie=He(Kf),[re,pe]=k.useState(!1);k.useEffect(()=>{if(!f){_(void 0),y("/");return}const{baseUrl:Ee}=f;_(Ee),y("/")},[f]);const M=k.useCallback((Ee,Ce,Ve,ct)=>Ce.port<ct[Ee].port?Ve:Ee,[]);k.useEffect(()=>{if(h.length>1&&!d.current){const Ee=h.reduce(M,0);o(Ee)}},[h,M]);const oe=()=>{r.current&&(r.current.src=r.current.src)},le=k.useCallback(()=>{if(r.current&&v){const Ee=new URL(v);Ee.searchParams.set("_t",Date.now().toString()),r.current.src="",requestAnimationFrame(()=>{r.current&&(r.current.src=Ee.toString())})}},[v]);k.useEffect(()=>{if(typeof window>"u"||typeof window.BroadcastChannel!="function")return;const Ee=new BroadcastChannel("preview-updates");return Ee.onmessage=Ce=>{const{type:Ve}=Ce.data;Ve==="hard-refresh"?le():(Ve==="file-change"||Ve==="refresh-preview")&&oe()},()=>{Ee.close()}},[le,oe]);const q=async()=>{!c&&n.current?await n.current.requestFullscreen():document.fullscreenElement&&await document.exitFullscreen()};k.useEffect(()=>{const Ee=()=>{u(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",Ee),()=>{document.removeEventListener("fullscreenchange",Ee)}},[]),k.useEffect(()=>(xy=r.current,()=>{xy=null}));const V=()=>{T(Ee=>!Ee)},ae=(Ee,Ce)=>{if(!S)return;Ee.currentTarget.setPointerCapture(Ee.pointerId),document.body.style.userSelect="none",document.body.style.cursor="ew-resize",K.current={isResizing:!0,side:Ce,startX:Ee.clientX,startWidthPercent:E,windowWidth:window.innerWidth,pointerId:Ee.pointerId}},xe=({side:Ee})=>Ee?p.jsx("div",{className:`resize-handle-${Ee}`,onPointerDown:Ce=>ae(Ce,Ee),style:{position:"absolute",top:0,...Ee==="left"?{left:0,marginLeft:"-7px"}:{right:0,marginRight:"-7px"},width:"15px",height:"100%",cursor:"ew-resize",background:"var(--bolt-elements-background-depth-4, rgba(0,0,0,.3))",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",userSelect:"none",touchAction:"none",zIndex:10},onMouseOver:Ce=>Ce.currentTarget.style.background="var(--bolt-elements-background-depth-4, rgba(0,0,0,.3))",onMouseOut:Ce=>Ce.currentTarget.style.background="var(--bolt-elements-background-depth-3, rgba(0,0,0,.15))",title:"Drag to resize width",children:p.jsx(Te,{})}):null;k.useEffect(()=>{if(!S)return;const Ee=ct=>{const Ke=K.current;if(!Ke.isResizing||ct.pointerId!==Ke.pointerId)return;const je=(ct.clientX-Ke.startX)/Ke.windowWidth*100*L;let yt=Ke.startWidthPercent;if(Ke.side==="right"?yt=Ke.startWidthPercent+je:Ke.side==="left"&&(yt=Ke.startWidthPercent-je),yt=Math.max(10,Math.min(yt,90)),C(yt),n.current){const dt=n.current.clientWidth,Ut=Math.round(dt*yt/100);I(Ut);const dr=n.current.querySelector('div[style*="width"]');dr&&(dr.style.width=`${yt}%`)}},Ce=ct=>{const Ke=K.current;if(!Ke.isResizing||ct.pointerId!==Ke.pointerId)return;document.querySelectorAll(".resize-handle-left, .resize-handle-right").forEach(je=>{je.hasPointerCapture?.(ct.pointerId)&&je.releasePointerCapture(ct.pointerId)}),K.current={...K.current,isResizing:!1,side:null,pointerId:null},document.body.style.userSelect="",document.body.style.cursor=""};document.addEventListener("pointermove",Ee,{passive:!1}),document.addEventListener("pointerup",Ce),document.addEventListener("pointercancel",Ce);function Ve(){document.removeEventListener("pointermove",Ee),document.removeEventListener("pointerup",Ce),document.removeEventListener("pointercancel",Ce),K.current.pointerId!==null&&(document.querySelectorAll(".resize-handle-left, .resize-handle-right").forEach(Ke=>{Ke.hasPointerCapture?.(K.current.pointerId)&&Ke.releasePointerCapture(K.current.pointerId)}),K.current={...K.current,isResizing:!1,side:null,pointerId:null},document.body.style.userSelect="",document.body.style.cursor="")}return Ve},[S,L]),k.useEffect(()=>{const Ee=()=>{if(K.current.windowWidth=window.innerWidth,n.current&&S){const Ce=n.current.clientWidth;I(Math.round(Ce*E/100))}};if(window.addEventListener("resize",Ee),n.current&&S){const Ce=n.current.clientWidth;I(Math.round(Ce*E/100))}return()=>{window.removeEventListener("resize",Ee)}},[S,E]),k.useEffect(()=>{if(n.current&&S){const Ee=n.current.clientWidth;I(Math.round(Ee*E/100))}},[S]);const Te=()=>p.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",pointerEvents:"none"},children:p.jsx("div",{style:{color:"var(--bolt-elements-textSecondary, rgba(0,0,0,0.5))",fontSize:"10px",lineHeight:"5px",userSelect:"none",marginLeft:"1px"},children:" "})}),fe=Ee=>{if(f?.baseUrl){const Ce=f.baseUrl.match(/^https?:\/\/([^.]+)\.local-credentialless\.webcontainer-api\.io/);if(Ce){const ct=`/webcontainer/preview/${Ce[1]}`;let Ke=Ee.width,mt=Ee.height;if(X&&(Ee.frameType==="mobile"||Ee.frameType==="tablet")&&(Ke=Ee.height,mt=Ee.width),J&&Ee.hasFrame){const je=Ee.frameType==="mobile"?X?120:40:60,yt=Ee.frameType==="mobile"?80:X?60:100,dt=window.open("","_blank",`width=${Ke+je},height=${mt+yt+40},menubar=no,toolbar=no,location=no,status=no`);if(!dt){console.error("Failed to open new window");return}const Ut=de(),dr=Ee.frameType==="mobile"?"36px":"20px",qr=Ee.frameType==="mobile"?X?"40px 60px":"40px 20px":X?"30px 50px":"50px 30px",br=X?"50%":"20px",Qr=X?"30px":"50%",ts=X?"translateY(-50%)":"translateX(-50%)",Po=X?"8px":Ee.frameType==="mobile"?"60px":"80px",ci=X?Ee.frameType==="mobile"?"60px":"80px":"8px",ga=X?"50%":"15px",Sn=X?"30px":"50%",ba=X?"translateY(50%)":"translateX(50%)",rs=X?"4px":"40px",Gc=X?"40px":"4px",qc=`
            <!DOCTYPE html>
            <html>
            <head>
              <meta charset="utf-8">
              <title>${Ee.name} Preview</title>
              <style>
                body {
                  margin: 0;
                  padding: 0;
                  display: flex;
                  justify-content: center;
                  align-items: center;
                  height: 100vh;
                  background: #f0f0f0;
                  overflow: hidden;
                  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
                }

                .device-container {
                  position: relative;
                }

                .device-name {
                  position: absolute;
                  top: -30px;
                  left: 0;
                  right: 0;
                  text-align: center;
                  font-size: 14px;
                  color: #333;
                }

                .device-frame {
                  position: relative;
                  border-radius: ${dr};
                  background: ${Ut};
                  padding: ${qr};
                  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                  overflow: hidden;
                }

                /* Notch */
                .device-frame:before {
                  content: '';
                  position: absolute;
                  top: ${br};
                  left: ${Qr};
                  transform: ${ts};
                  width: ${Po};
                  height: ${ci};
                  background: #333;
                  border-radius: 4px;
                  z-index: 2;
                }

                /* Home button */
                .device-frame:after {
                  content: '';
                  position: absolute;
                  bottom: ${ga};
                  right: ${Sn};
                  transform: ${ba};
                  width: ${rs};
                  height: ${Gc};
                  background: #333;
                  border-radius: 50%;
                  z-index: 2;
                }

                iframe {
                  border: none;
                  width: ${Ke}px;
                  height: ${mt}px;
                  background: white;
                  display: block;
                }
              </style>
            </head>
            <body>
              <div class="device-container">
                <div class="device-name">${Ee.name} ${X?"(Landscape)":"(Portrait)"}</div>
                <div class="device-frame">
                  <iframe src="${ct}" sandbox="allow-scripts allow-forms allow-popups allow-modals allow-storage-access-by-user-activation allow-same-origin" allow="cross-origin-isolated"></iframe>
                </div>
              </div>
            </body>
            </html>
          `;dt.document.open(),dt.document.write(qc),dt.document.close()}else{const je=window.open(ct,"_blank",`width=${Ke},height=${mt},menubar=no,toolbar=no,location=no,status=no`);je&&je.focus()}}else console.warn("[Preview] Invalid WebContainer URL:",f.baseUrl)}},ke=()=>{m&&window.open(m,"_blank")},Me=k.useCallback(()=>{if(!U)return"40px 20px";const Ee=U.frameType==="mobile";return X?Ee?"40px 60px":"30px 50px":Ee?"40px 20px":"50px 30px"},[X,U]),Re=k.useCallback(()=>1,[X,U,E]);k.useEffect(()=>()=>{},[S,Y,Re,X,U]);const de=k.useCallback(()=>document.documentElement.classList.contains("dark")||document.documentElement.getAttribute("data-theme")==="dark"||window.matchMedia("(prefers-color-scheme: dark)").matches?"#555":"#111",[]);k.useEffect(()=>{const Ee=window.matchMedia("(prefers-color-scheme: dark)"),Ce=()=>{Y&&Q(!0)};return Ee.addEventListener("change",Ce),()=>{Ee.removeEventListener("change",Ce)}},[Y]),k.useEffect(()=>{const Ee=Ce=>{if(Ce.data.type==="INSPECTOR_READY")r.current?.contentWindow&&r.current.contentWindow.postMessage({type:"INSPECTOR_ACTIVATE",active:x},"*");else if(Ce.data.type==="INSPECTOR_CLICK"){const Ve=Ce.data.elementInfo;navigator.clipboard.writeText(Ve.displayText).then(()=>{t?.(Ve),D(Ve),F(!0)})}else if(Ce.data.type==="INSPECTOR_BULK_APPLIED")er(Ce.data.count);else if(Ce.data.type==="INSPECTOR_BULK_REVERTED")er(void 0);else if(Ce.data.type==="PREVIEW_CONSOLE_ERROR")Ib().handlePreviewMessage({type:"PREVIEW_UNCAUGHT_EXCEPTION",message:Ce.data.message,stack:Ce.data.stack,pathname:new URL(Ce.data.url||window.location.href).pathname,search:new URL(Ce.data.url||window.location.href).search,hash:new URL(Ce.data.url||window.location.href).hash,port:U?.width||0});else if(Ce.data.type==="PREVIEW_VITE_ERROR")Ib().handlePreviewMessage({type:"PREVIEW_UNCAUGHT_EXCEPTION",message:Ce.data.fullMessage||Ce.data.message,stack:Ce.data.stack||"",pathname:new URL(Ce.data.url||window.location.href).pathname,search:new URL(Ce.data.url||window.location.href).search,hash:new URL(Ce.data.url||window.location.href).hash,port:U?.width||0});else if(Ce.data.type==="PREVIEW_SCREENSHOT_RESPONSE"){const Ve=Ce.data.requestId,ct=ff.get(Ve);ct&&(ct(Ce.data.dataUrl,Ce.data.isPlaceholder),ff.delete(Ve))}};return window.addEventListener("message",Ee),()=>window.removeEventListener("message",Ee)},[x]);const be=()=>{const Ee=!x;w(Ee),Ee||(F(!1),D(null)),r.current?.contentWindow&&r.current.contentWindow.postMessage({type:"INSPECTOR_ACTIVATE",active:Ee},"*")},Se=k.useCallback((Ee,Ce)=>{r.current?.contentWindow&&r.current.contentWindow.postMessage({type:"INSPECTOR_EDIT_STYLE",property:Ee,value:Ce},"*")},[]),ze=k.useCallback(Ee=>{r.current?.contentWindow&&r.current.contentWindow.postMessage({type:"INSPECTOR_EDIT_TEXT",text:Ee},"*")},[]),Ye=k.useCallback(()=>{F(!1),D(null)},[]),ut=k.useCallback(Ee=>{r.current?.contentWindow&&r.current.contentWindow.postMessage({type:"INSPECTOR_SELECT_BY_SELECTOR",selector:Ee},"*")},[]),at=k.useCallback(()=>{r.current?.contentWindow&&r.current.contentWindow.postMessage({type:"INSPECTOR_REVERT"},"*")},[]),[pt,er]=k.useState(void 0),qt=k.useCallback((Ee,Ce,Ve)=>{z(ct=>{const Ke=ct.findIndex(mt=>mt.selector===Ee&&mt.property===Ce);if(Ke>=0){const mt=[...ct];return mt[Ke]={selector:Ee,property:Ce,value:Ve},mt}else return[...ct,{selector:Ee,property:Ce,value:Ve}]}),r.current?.contentWindow&&r.current.contentWindow.postMessage({type:"INSPECTOR_BULK_STYLE",selector:Ee,property:Ce,value:Ve},"*")},[]),Tt=k.useCallback(Ee=>{z(Ce=>Ce.filter(Ve=>Ve.selector!==Ee)),r.current?.contentWindow&&r.current.contentWindow.postMessage({type:"INSPECTOR_BULK_REVERT",selector:Ee},"*")},[]),gr=k.useCallback(Ee=>{const{element:Ce,styles:Ve,text:ct}=Ee,Ke=[Ce.tagName.toLowerCase()];if(Ce.id&&Ke.push(`#${Ce.id}`),Ce.className){const dt=Ce.className.split(" ")[0];dt&&Ke.push(`.${dt}`)}const mt=Ke.join(""),je=[];Object.keys(Ve).length>0&&(je.push("**Style changes:**"),Object.entries(Ve).forEach(([dt,Ut])=>{je.push(`- ${dt}: ${Ut}`)})),ct&&je.push(`**Text content:** "${ct}"`);const yt=`Please apply these changes to the element \`${mt}\`:

${je.join(`
`)}

Find this element in the source code and update its styles/text accordingly.`;Kg(yt),F(!1),D(null)},[]),ir=k.useCallback(Ee=>{const Ce=[Ee.tagName.toLowerCase()];if(Ee.id&&Ce.push(`#${Ee.id}`),Ee.className){const je=Ee.className.split(" ")[0];je&&Ce.push(`.${je}`)}const Ve=Ce.join(""),ct=Ee.textContent?.slice(0,50)||"",Ke=ct?` with text "${ct}${Ee.textContent&&Ee.textContent.length>50?"...":""}"`:"",mt=`Please delete/remove the element \`${Ve}\`${Ke} from the source code.

Remove this element completely from the JSX/HTML.`;Kg(mt),F(!1),D(null)},[]),Dr=k.useCallback(Ee=>{Kg(Ee),F(!1),D(null)},[]),jn=k.useCallback(()=>{if(G.length===0)return;const Ee={};G.forEach(({selector:Ke,property:mt,value:je})=>{Ee[Ke]||(Ee[Ke]={}),Ee[Ke][mt]=je});const ct=`Please add the following CSS rules to the project's main stylesheet (or create a new style block if needed):

\`\`\`css
${`/* Bulk Style Changes - Applied via Inspector */
${Object.entries(Ee).map(([Ke,mt])=>{const je=Object.entries(mt).map(([yt,dt])=>`  ${yt}: ${dt} !important;`).join(`
`);return`${Ke} {
${je}
}`}).join(`

`)}`}
\`\`\`

Add these rules to style the elements as specified. The !important flags ensure these styles take precedence.`;Kg(ct),z([]),F(!1),D(null)},[G]),Fn=k.useCallback(()=>{z([]),r.current?.contentWindow&&[...new Set(G.map(Ce=>Ce.selector))].forEach(Ce=>{r.current?.contentWindow?.postMessage({type:"INSPECTOR_BULK_REVERT",selector:Ce},"*")})},[G]);return p.jsxs("div",{ref:n,className:"w-full h-full flex flex-col relative",children:[p.jsx(Awe,{selectedElement:P,isVisible:R,onClose:Ye,onStyleChange:Se,onTextChange:ze,onApplyWithAI:gr,onDeleteElement:ir,onAIAction:Dr,onSelectFromTree:ut,onRevert:at,onBulkStyleChange:qt,onBulkRevert:Tt,bulkAffectedCount:pt,accumulatedBulkChanges:G,onApplyBulkCSS:jn,onClearBulkChanges:Fn}),a&&p.jsx("div",{className:"z-iframe-overlay w-full h-full absolute",onClick:()=>l(!1)}),p.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-2 flex items-center gap-2",children:[p.jsx("div",{className:"flex items-center gap-2",children:p.jsx(Kt,{icon:"i-ph:arrow-clockwise",onClick:oe})}),p.jsxs("div",{className:"flex-grow flex items-center gap-1 bg-bolt-elements-preview-addressBar-background border border-bolt-elements-borderColor text-bolt-elements-preview-addressBar-text rounded-full px-3 py-1 text-sm hover:bg-bolt-elements-preview-addressBar-backgroundHover hover:focus-within:bg-bolt-elements-preview-addressBar-backgroundActive focus-within:bg-bolt-elements-preview-addressBar-backgroundActive focus-within-border-bolt-elements-borderColorActive focus-within:text-bolt-elements-preview-addressBar-textActive",children:[h.length>1&&p.jsx(pwe,{activePreviewIndex:i,setActivePreviewIndex:o,isDropdownOpen:a,setHasSelectedPreview:Ee=>d.current=Ee,setIsDropdownOpen:l,previews:h}),p.jsx("input",{title:"Full URL",ref:s,className:"w-full bg-transparent outline-none text-xs font-mono truncate",type:"text",value:m||"",onChange:Ee=>{if(!f)return;const Ce=Ee.target.value;if(Ce.startsWith("http"))try{const Ve=new URL(Ce);y(Ve.pathname+Ve.search+Ve.hash||"/")}catch{}else Ce.startsWith("/")?y(Ce):y("/"+Ce)},onKeyDown:Ee=>{if(Ee.key==="Enter"&&f){let Ce=g.trim();Ce.startsWith("/")||(Ce="/"+Ce);const Ve=f.baseUrl+Ce;_(Ve),y(Ce),s.current&&s.current.blur()}},onClick:Ee=>{Ee.target.select()},disabled:!f}),f&&p.jsx("button",{onClick:ke,className:"flex-shrink-0 p-1 bg-transparent text-bolt-elements-preview-addressBar-text hover:text-bolt-elements-preview-addressBar-textActive rounded transition-colors",title:"Open in new tab",children:p.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Kt,{icon:"i-ph:devices",onClick:V,title:S?"Switch to Responsive Mode":"Switch to Device Mode"}),ie&&p.jsx(Kt,{icon:"i-ph:qr-code",onClick:()=>pe(!0),title:"Show QR"}),p.jsx(a9,{open:re,onClose:()=>pe(!1)}),S&&p.jsxs(p.Fragment,{children:[p.jsx(Kt,{icon:"i-ph:device-rotate",onClick:()=>ge(!X),title:X?"Switch to Portrait":"Switch to Landscape"}),p.jsx(Kt,{icon:Y?"i-ph:device-mobile":"i-ph:device-mobile-slash",onClick:()=>Q(!Y),title:Y?"Hide Device Frame":"Show Device Frame"})]}),p.jsx(Kt,{icon:"i-ph:cursor-click",onClick:be,className:x?"bg-bolt-elements-background-depth-3 !text-bolt-elements-item-contentAccent":"",title:x?"Disable Element Inspector":"Enable Element Inspector"}),p.jsx(Kt,{icon:c?"i-ph:arrows-in":"i-ph:arrows-out",onClick:q,title:c?"Exit Full Screen":"Full Screen"}),p.jsxs("div",{className:"flex items-center relative",children:[p.jsx(Kt,{icon:"i-ph:list",onClick:()=>H(!$),title:"New Window Options"}),$&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>H(!1)}),p.jsxs("div",{className:"absolute right-0 top-full mt-2 z-50 min-w-[240px] max-h-[400px] overflow-y-auto bg-white dark:bg-black rounded-xl shadow-2xl border border-[#E5E7EB] dark:border-[rgba(255,255,255,0.1)] overflow-hidden",children:[p.jsxs("div",{className:"p-3 border-b border-[#E5E7EB] dark:border-[rgba(255,255,255,0.1)]",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:frame-corners h-4 w-4"}),p.jsx("span",{className:"text-sm font-medium",children:e("preview.window_options","Window Options")})]}),p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsxs("button",{className:"flex w-full justify-between items-center text-start bg-transparent text-xs text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary",onClick:()=>{ke()},children:[p.jsx("span",{children:e("preview.open_new_tab","Open in new tab")}),p.jsx("div",{className:"i-ph:arrow-square-out h-5 w-4"})]}),p.jsxs("button",{className:"flex w-full justify-between items-center text-start bg-transparent text-xs text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary",onClick:()=>{if(!f?.baseUrl){console.warn("[Preview] No active preview available");return}const Ee=f.baseUrl.match(/^https?:\/\/([^.]+)\.local-credentialless\.webcontainer-api\.io/);if(!Ee){console.warn("[Preview] Invalid WebContainer URL:",f.baseUrl);return}const Ce=Ee[1],Ve=`/webcontainer/preview/${Ce}`;window.open(Ve,`preview-${Ce}`,"width=1280,height=720,menubar=no,toolbar=no,location=no,status=no,resizable=yes")},children:[p.jsx("span",{children:e("preview.open_new_window","Open in new window")}),p.jsx("div",{className:"i-ph:browser h-5 w-4"})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-bolt-elements-textTertiary",children:e("preview.show_frame","Show Device Frame")}),p.jsx("button",{className:ye("w-10 h-5 rounded-full transition-colors duration-200 relative",J?"bg-[#6D28D9]":"bg-gray-300 dark:bg-gray-700"),title:J?e("preview.hide_frame","Hide Device Frame"):e("preview.show_frame","Show Device Frame"),onClick:Ee=>{Ee.stopPropagation(),j(!J)},children:p.jsx("span",{className:ye("absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-transform duration-200",{"transform translate-x-5":J})})})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-bolt-elements-textTertiary",children:e("preview.landscape_mode","Landscape Mode")}),p.jsx("button",{className:ye("w-10 h-5 rounded-full transition-colors duration-200 relative",X?"bg-[#6D28D9]":"bg-gray-300 dark:bg-gray-700"),title:X?e("preview.portrait_mode","Portrait Mode"):e("preview.landscape_mode","Landscape Mode"),onClick:Ee=>{Ee.stopPropagation(),ge(!X)},children:p.jsx("span",{className:ye("absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-transform duration-200",{"transform translate-x-5":X})})})]})]})]}),O.map(Ee=>p.jsxs("button",{className:"w-full px-4 py-3.5 text-left text-[#111827] dark:text-gray-300 text-sm whitespace-nowrap flex items-center gap-3 group hover:bg-[#F5EEFF] dark:hover:bg-gray-900 bg-white dark:bg-black",onClick:()=>{ee(Ee),H(!1),fe(Ee)},children:[p.jsx("div",{className:`${Ee.icon} w-5 h-5 text-[#6B7280] dark:text-gray-400 group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200`}),p.jsxs("div",{className:"flex-grow flex flex-col",children:[p.jsx("span",{className:"font-medium group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200",children:Ee.name}),p.jsxs("span",{className:"text-xs text-[#6B7280] dark:text-gray-400 group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200",children:[X&&(Ee.frameType==="mobile"||Ee.frameType==="tablet")?`${Ee.height}  ${Ee.width}`:`${Ee.width}  ${Ee.height}`,Ee.hasFrame&&J?" (with frame)":""]})]}),U.name===Ee.name&&p.jsx("div",{className:"text-[#6D28D9] dark:text-[#6D28D9]",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("polyline",{points:"20 6 9 17 4 12"})})})]},Ee.name))]})]})]})]})]}),p.jsx("div",{className:"flex-1 border-t border-bolt-elements-borderColor flex justify-center items-center overflow-auto",children:p.jsxs("div",{style:{width:S?Y?"100%":`${E}%`:"100%",height:"100%",overflow:"auto",background:"var(--bolt-elements-background-depth-1)",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},children:[f?p.jsx(p.Fragment,{children:S&&Y?p.jsx("div",{className:"device-wrapper",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",padding:"0",overflow:"auto",transition:"all 0.3s ease",position:"relative"},children:p.jsxs("div",{className:"device-frame-container",style:{position:"relative",borderRadius:U.frameType==="mobile"?"36px":"20px",background:de(),padding:Me(),boxShadow:"0 10px 30px rgba(0,0,0,0.2)",overflow:"hidden",transform:"scale(1)",transformOrigin:"center center",transition:"all 0.3s ease",margin:"40px",width:X?`${U.height+(U.frameType==="mobile"?120:60)}px`:`${U.width+(U.frameType==="mobile"?40:60)}px`,height:X?`${U.width+(U.frameType==="mobile"?80:60)}px`:`${U.height+(U.frameType==="mobile"?80:100)}px`},children:[p.jsx("div",{style:{position:"absolute",top:X?"50%":"20px",left:X?"30px":"50%",transform:X?"translateY(-50%)":"translateX(-50%)",width:X?"8px":U.frameType==="mobile"?"60px":"80px",height:X?U.frameType==="mobile"?"60px":"80px":"8px",background:"#333",borderRadius:"4px",zIndex:2}}),p.jsx("div",{style:{position:"absolute",bottom:X?"50%":"15px",right:X?"30px":"50%",transform:X?"translateY(50%)":"translateX(50%)",width:X?"4px":"40px",height:X?"40px":"4px",background:"#333",borderRadius:"50%",zIndex:2}}),p.jsx("iframe",{ref:r,title:"preview",style:{border:"none",width:X?`${U.height}px`:`${U.width}px`,height:X?`${U.width}px`:`${U.height}px`,background:"white",display:"block"},src:v,sandbox:"allow-scripts allow-forms allow-popups allow-modals allow-storage-access-by-user-activation allow-same-origin",allow:"cross-origin-isolated"})]})}):p.jsx("iframe",{ref:r,title:"preview",className:"border-none w-full h-full bg-bolt-elements-background-depth-1",src:v,sandbox:"allow-scripts allow-forms allow-popups allow-modals allow-storage-access-by-user-activation allow-same-origin",allow:"geolocation; ch-ua-full-version-list; cross-origin-isolated; screen-wake-lock; publickey-credentials-get; shared-storage-select-url; ch-ua-arch; bluetooth; compute-pressure; ch-prefers-reduced-transparency; deferred-fetch; usb; ch-save-data; publickey-credentials-create; shared-storage; deferred-fetch-minimal; run-ad-auction; ch-ua-form-factors; ch-downlink; otp-credentials; payment; ch-ua; ch-ua-model; ch-ect; autoplay; camera; private-state-token-issuance; accelerometer; ch-ua-platform-version; idle-detection; private-aggregation; interest-cohort; ch-viewport-height; local-fonts; ch-ua-platform; midi; ch-ua-full-version; xr-spatial-tracking; clipboard-read; gamepad; display-capture; keyboard-map; join-ad-interest-group; ch-width; ch-prefers-reduced-motion; browsing-topics; encrypted-media; gyroscope; serial; ch-rtt; ch-ua-mobile; window-management; unload; ch-dpr; ch-prefers-color-scheme; ch-ua-wow64; attribution-reporting; fullscreen; identity-credentials-get; private-state-token-redemption; hid; ch-ua-bitness; storage-access; sync-xhr; ch-device-memory; ch-viewport-width; picture-in-picture; magnetometer; clipboard-write; microphone"})}):p.jsx("div",{className:"flex w-full h-full justify-center items-center bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary",children:"No preview available"}),S&&!Y&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:{position:"absolute",top:"-25px",left:"50%",transform:"translateX(-50%)",background:"var(--bolt-elements-background-depth-3, rgba(0,0,0,0.7))",color:"var(--bolt-elements-textPrimary, white)",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",pointerEvents:"none",opacity:K.current.isResizing?1:0,transition:"opacity 0.3s"},children:[A,"px"]}),p.jsx(xe,{side:"left"}),p.jsx(xe,{side:"right"})]}),b&&p.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",background:"rgba(5, 150, 105, 0.9)",color:"#fff",padding:"6px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:600,display:"flex",alignItems:"center",gap:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:1e3,pointerEvents:"none"},children:[p.jsx("span",{className:"i-ph:eye"}),"PREVIEW MODE"]})]})})]})}),Iwe=Object.freeze(Object.defineProperty({__proto__:null,Preview:u9,requestPreviewScreenshot:Pwe},Symbol.toStringTag,{value:"Module"})),Nwe=k.memo(({version:t,onRestore:e,onRevert:r})=>{const[n,s]=k.useState(!1);return p.jsxs(rt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),className:"flex gap-4 p-4 rounded-xl transition-colors",style:{background:n?"rgba(255,255,255,0.03)":"transparent"},children:[p.jsx("div",{className:"w-32 h-20 rounded-lg flex-shrink-0 overflow-hidden",style:{background:"linear-gradient(135deg, #1a2332 0%, #0d1117 100%)",border:"1px solid rgba(255,255,255,0.1)"},children:t.thumbnail?p.jsx("img",{src:t.thumbnail,alt:"Version preview",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/20",children:p.jsx("div",{className:"i-ph:image text-2xl"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-mono",style:{background:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.7)"},children:t.id}),t.isLatest&&p.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium",style:{background:"#3b82f6",color:"white"},children:"Latest"}),p.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[!t.isLatest&&p.jsxs("button",{onClick:()=>e(t.id),className:"flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs transition-colors",style:{background:"rgba(59, 130, 246, 0.15)",color:"#60a5fa"},children:[p.jsx("div",{className:"i-ph:arrow-counter-clockwise text-sm"}),"Restore"]}),p.jsxs("button",{onClick:()=>r(t.id),className:"flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs transition-colors",style:{background:"rgba(255, 255, 255, 0.05)",color:"rgba(255, 255, 255, 0.7)"},children:[p.jsx("div",{className:"i-ph:arrow-u-up-left text-sm"}),"Revert"]})]})]}),p.jsx("h3",{className:"text-sm font-medium text-white/90 truncate mb-0.5",children:t.title}),p.jsx("p",{className:"text-xs text-white/50 line-clamp-2 mb-1",children:t.description}),p.jsxs("div",{className:"flex items-center gap-1 text-xs text-white/40",children:[p.jsx("div",{className:"i-ph:clock text-xs"}),p.jsxs("span",{children:["Saved ",Yo.formatRelativeTime(t.timestamp)]})]})]})]})}),Dwe=k.memo(()=>{He(Yo.versions);const[t,e]=k.useState(""),r=Yo.getAllVersions(),n=r.filter(o=>o.title.toLowerCase().includes(t.toLowerCase())||o.description.toLowerCase().includes(t.toLowerCase())||o.id.toLowerCase().includes(t.toLowerCase())),s=o=>{const a=Yo.restoreVersion(o);if(a){for(const[l,c]of Object.entries(a.files))c.type==="file"&&Pe.files.setKey(l,{type:"file",content:c.content,isBinary:!1});Ie.success(`Restored to ${a.title}`)}},i=o=>{const a=Yo.getVersion(o);if(a&&a.messageId){const l=new URLSearchParams(window.location.search);l.set("rewindTo",a.messageId),window.location.search=l.toString()}else Ie.error("Cannot revert: No message ID associated with this version")};return p.jsxs("div",{className:"h-full flex flex-col",style:{background:"#0d1117"},children:[p.jsxs("div",{className:"p-4 border-b border-white/10",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("h2",{className:"text-lg font-semibold text-white",children:"Versions"}),p.jsxs("span",{className:"text-sm text-white/50",children:[n.length," of ",r.length]})]}),p.jsx("p",{className:"text-sm text-white/50 mb-4",children:"View and restore previous versions of your project."}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"i-ph:magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-white/40"}),p.jsx("input",{type:"text",value:t,onChange:o=>e(o.target.value),placeholder:"Search versions by description or ID...",className:"w-full pl-9 pr-4 py-2 rounded-lg text-sm text-white placeholder-white/40 outline-none",style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"}})]})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:n.length>0?p.jsx(Nr,{children:n.map((o,a)=>p.jsx(Nwe,{version:{...o,isLatest:a===0},onRestore:s,onRevert:i},o.id))}):p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[p.jsx("div",{className:"i-ph:clock-clockwise text-4xl text-white/20 mb-4"}),p.jsx("h3",{className:"text-sm font-medium text-white/60 mb-1",children:"No versions yet"}),p.jsx("p",{className:"text-xs text-white/40 max-w-xs",children:"Versions are automatically created when the AI makes changes to your project."})]})})]})});var i_="Collapsible",[Owe]=ai(i_),[Lwe,fA]=Owe(i_),d9=k.forwardRef((t,e)=>{const{__scopeCollapsible:r,open:n,defaultOpen:s,disabled:i,onOpenChange:o,...a}=t,[l,c]=yl({prop:n,defaultProp:s??!1,onChange:o,caller:i_});return p.jsx(Lwe,{scope:r,disabled:i,contentId:yo(),open:l,onOpenToggle:k.useCallback(()=>c(u=>!u),[c]),children:p.jsx(Ft.div,{"data-state":mA(l),"data-disabled":i?"":void 0,...a,ref:e})})});d9.displayName=i_;var h9="CollapsibleTrigger",f9=k.forwardRef((t,e)=>{const{__scopeCollapsible:r,...n}=t,s=fA(h9,r);return p.jsx(Ft.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":mA(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:e,onClick:it(t.onClick,s.onOpenToggle)})});f9.displayName=h9;var pA="CollapsibleContent",p9=k.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=fA(pA,t.__scopeCollapsible);return p.jsx(Jn,{present:r||s.open,children:({present:i})=>p.jsx(Mwe,{...n,ref:e,present:i})})});p9.displayName=pA;var Mwe=k.forwardRef((t,e)=>{const{__scopeCollapsible:r,present:n,children:s,...i}=t,o=fA(pA,r),[a,l]=k.useState(n),c=k.useRef(null),u=Sr(e,c),d=k.useRef(0),h=d.current,f=k.useRef(0),b=f.current,m=o.open||a,g=k.useRef(m),y=k.useRef(void 0);return k.useEffect(()=>{const v=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(v)},[]),ra(()=>{const v=c.current;if(v){y.current=y.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const _=v.getBoundingClientRect();d.current=_.height,f.current=_.width,g.current||(v.style.transitionDuration=y.current.transitionDuration,v.style.animationName=y.current.animationName),l(n)}},[o.open,n]),p.jsx(Ft.div,{"data-state":mA(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!m,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...t.style},children:m&&s})});function mA(t){return t?"open":"closed"}var m9=d9,g9=f9,b9=p9;const jwe=m9,Fwe=g9,Bwe=b9,gA=k.forwardRef(({className:t,value:e,...r},n)=>p.jsx("div",{ref:n,className:ye("relative h-2 w-full overflow-hidden rounded-full bg-bolt-elements-background",t),...r,children:p.jsx("div",{className:"h-full w-full flex-1 bg-bolt-elements-textPrimary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));gA.displayName="Progress";const y9=k.memo(({status:t})=>{switch(t){case"completed":return p.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500/20 flex items-center justify-center",children:p.jsx("div",{className:"i-ph:check-bold text-green-500 text-sm"})});case"in-progress":return p.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-500/20 flex items-center justify-center",children:p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-blue-500 text-sm"})});default:return p.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-bolt-elements-borderColor bg-transparent"})}});y9.displayName="StatusIcon";const v9=k.memo(({task:t,index:e})=>{const r={"not-started":"text-bolt-elements-textSecondary","in-progress":"text-blue-500",completed:"text-green-500"};return p.jsxs(rt.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:e*.05},className:ye("flex items-start gap-3 p-3 rounded-lg transition-colors",t.status==="in-progress"?"bg-blue-500/10 border border-blue-500/30":"bg-bolt-elements-background-depth-2 border border-transparent"),children:[p.jsx(y9,{status:t.status}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:ye("font-medium text-sm",t.status==="completed"?"line-through opacity-60":"",r[t.status]),children:t.title}),t.description&&p.jsx("div",{className:"text-xs text-bolt-elements-textSecondary mt-1 line-clamp-2",children:t.description}),t.fileActions&&t.fileActions.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:t.fileActions.map(n=>p.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary font-mono",children:n},n))})]})]})});v9.displayName="TaskItem";const _9=k.memo(({approvedByUser:t})=>{const e=k.useCallback(()=>{OF()},[]),r=k.useCallback(()=>{LF()},[]);return t?p.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-500",children:[p.jsx("div",{className:"i-ph:check-circle-fill"}),p.jsx("span",{children:"Plan Approved"})]}):p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(Rt,{variant:"default",size:"sm",onClick:e,className:"bg-green-600 hover:bg-green-700 text-white",children:[p.jsx("div",{className:"i-ph:check-bold mr-1"}),"Approve Plan"]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:r,children:[p.jsx("div",{className:"i-ph:x-bold mr-1"}),"Cancel"]})]})});_9.displayName="PlanActions";const x9=k.memo(({className:t})=>{const e=He(ri),r=He(DF),[n,s]=Yr.useState(!0);if(!e.isActive||e.tasks.length===0)return null;const i=e.tasks.filter(a=>a.status==="completed").length,o=e.tasks.length;return p.jsx("div",{className:ye("border-b border-bolt-elements-borderColor",t),children:p.jsxs(jwe,{open:n,onOpenChange:s,children:[p.jsx(Fwe,{asChild:!0,children:p.jsxs("button",{className:ye("w-full flex items-center justify-between p-4","bg-bolt-elements-background-depth-1 hover:bg-bolt-elements-background-depth-2","transition-colors cursor-pointer"),children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:list-checks-fill text-xl text-bolt-elements-textPrimary"}),p.jsxs("div",{className:"text-left",children:[p.jsx("h3",{className:"font-semibold text-bolt-elements-textPrimary",children:e.planTitle||"Implementation Plan"}),p.jsxs("p",{className:"text-xs text-bolt-elements-textSecondary",children:[i," of ",o," tasks completed"]})]})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-24 hidden sm:block",children:p.jsx(gA,{value:r})}),p.jsxs("span",{className:"text-sm font-medium text-bolt-elements-textSecondary",children:[r,"%"]})]}),p.jsx("div",{className:ye("i-ph:caret-down text-bolt-elements-textSecondary transition-transform",n?"rotate-180":"")})]})]})}),p.jsx(Bwe,{children:p.jsx(Nr,{children:p.jsxs(rt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"p-4 pt-0 space-y-3",children:[p.jsx("div",{className:"space-y-2",children:e.tasks.map((a,l)=>p.jsx(v9,{task:a,index:l},a.id))}),p.jsx("div",{className:"pt-3 border-t border-bolt-elements-borderColor",children:p.jsx(_9,{approvedByUser:e.approvedByUser})})]})})})]})})});x9.displayName="Plan";const $we={collapsed:{height:0,opacity:0,transition:{duration:.2,ease:"easeInOut"}},expanded:{height:"auto",opacity:1,transition:{duration:.2,ease:"easeInOut"}}},Uwe={hidden:{opacity:0,x:-10},visible:{opacity:1,x:0,transition:{duration:.15}},exit:{opacity:0,x:10,transition:{duration:.1}}};function Hwe(t){switch(t){case"create":return"i-ph:plus-circle";case"modify":return"i-ph:pencil-simple";case"delete":return"i-ph:trash";default:return"i-ph:file"}}function zwe(t){switch(t){case"create":return"text-green-400";case"modify":return"text-yellow-400";case"delete":return"text-red-400";default:return"text-bolt-elements-textSecondary"}}function Wwe(t){const e=t.split(".").pop()?.toLowerCase()??"";return{ts:"i-vscode-icons:file-type-typescript",tsx:"i-vscode-icons:file-type-reactts",js:"i-vscode-icons:file-type-js",jsx:"i-vscode-icons:file-type-reactjs",json:"i-vscode-icons:file-type-json",md:"i-vscode-icons:file-type-markdown",css:"i-vscode-icons:file-type-css",scss:"i-vscode-icons:file-type-scss",html:"i-vscode-icons:file-type-html",py:"i-vscode-icons:file-type-python"}[e]??"i-ph:file"}function Vwe(t){const e=t.split("/"),r=e.pop()??t;return{dir:e.join("/"),name:r}}const w9=k.memo(({change:t,onAccept:e,onReject:r,onPreview:n})=>{const{dir:s,name:i}=Vwe(t.filePath);return p.jsxs(rt.div,{variants:Uwe,initial:"hidden",animate:"visible",exit:"exit",className:"flex items-center gap-2 px-3 py-2 hover:bg-bolt-elements-background-depth-2 rounded-md group cursor-pointer",onClick:()=>n(t.filePath),children:[p.jsx("div",{className:ye("w-4 h-4 flex-shrink-0",Wwe(t.filePath))}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary truncate",children:i}),p.jsx("span",{className:ye("w-4 h-4",Hwe(t.type),zwe(t.type))})]}),s&&p.jsx("span",{className:"text-xs text-bolt-elements-textTertiary truncate block",children:s})]}),p.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx(Kt,{icon:"i-ph:eye",size:"sm",onClick:o=>{o.stopPropagation(),n(t.filePath)},title:"Preview diff",className:"text-bolt-elements-textTertiary hover:text-bolt-elements-textSecondary"}),p.jsx(Kt,{icon:"i-ph:check",size:"sm",onClick:o=>{o.stopPropagation(),e(t.filePath)},title:"Accept change",className:"text-green-400 hover:text-green-300"}),p.jsx(Kt,{icon:"i-ph:x",size:"sm",onClick:o=>{o.stopPropagation(),r(t.filePath)},title:"Reject change",className:"text-red-400 hover:text-red-300"})]})]})});w9.displayName="ChangeItem";const Y0=k.memo(({title:t,icon:e,iconColor:r,changes:n,onAccept:s,onReject:i,onPreview:o})=>n.length===0?null:p.jsxs("div",{className:"mb-2",children:[p.jsxs("div",{className:"flex items-center gap-2 px-3 py-1",children:[p.jsx("span",{className:ye("w-4 h-4",e,r)}),p.jsx("span",{className:"text-xs font-medium text-bolt-elements-textSecondary uppercase tracking-wide",children:t}),p.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary",children:["(",n.length,")"]})]}),p.jsx(Nr,{mode:"sync",children:n.map(a=>p.jsx(w9,{change:a,onAccept:s,onReject:i,onPreview:o},a.id))})]}));Y0.displayName="ChangeGroup";const S9=k.memo(()=>{const t=zM(),e=He(hS),r=He($4),n=He(Hne),s=He(Une),i=He(gt),o=i.settings,a=i.isPreviewMode,l=He(U4),c=He(H4),u=He(Wne),[d,h]=k.useState(!0),[f,b]=k.useState(!1),m=k.useCallback(async()=>{const E=l;if(E.length===0)return;Ie.info(`Executing ${E.length} queued command(s)...`);const C=Pe.boltTerminal;await C.ready();for(const A of E)try{A.type==="start"?C.executeCommand(`staged-${A.id}`,A.command).catch(I=>{console.error(`Start command failed: ${A.command}`,I)}):await C.executeCommand(`staged-${A.id}`,A.command)}catch(I){console.error(`Failed to execute command: ${A.command}`,I),Ie.error(`Command failed: ${A.command.substring(0,30)}...`)}WP(),Ie.success(`Executed ${E.length} command(s)`)},[l]),g=k.useCallback(async()=>{try{const E=await ls,C=await Qne(E);C.failed.length>0?Ie.error(`Failed to apply ${C.failed.length} file(s)`):C.applied.length>0&&Ie.success(`Applied ${C.applied.length} file(s)`)}catch(E){console.error("Error applying changes:",E),Ie.error("Failed to apply changes to WebContainer")}},[]),y=k.useCallback(async()=>{try{const E=Y4(),C=await ls,A=await ese(C);for(const I of A.reverted){const P=E.find(R=>R.filePath===I),D=I.startsWith(us)?I:`${us}/${I}`;P&&P.type==="modify"&&P.originalContent!==null?Pe.files.setKey(D,{type:"file",content:P.originalContent,isBinary:!1}):P&&P.type==="delete"&&P.originalContent!==null?Pe.files.setKey(D,{type:"file",content:P.originalContent,isBinary:!1}):P&&P.type==="create"&&Pe.files.setKey(D,void 0)}A.failed.length>0?Ie.error(`Failed to revert ${A.failed.length} file(s)`):A.reverted.length>0&&Ie.success(`Reverted ${A.reverted.length} file(s)`)}catch(E){console.error("Error reverting changes:",E),Ie.error("Failed to revert changes")}},[]),v=k.useCallback(async E=>{b(!0);try{V4(E),await g();try{await wI(150)}catch(C){console.error("[StagedChangesPanel] Failed to take snapshot after single accept:",C)}}finally{b(!1)}},[g]),_=k.useCallback(async E=>{b(!0);try{const C=DT(E);G4(E);const A=await ls,I=await tse(E,A);if(!I.success)Ie.error(`Failed to revert: ${I.error}`);else{const P=E.startsWith(us)?E:`${us}/${E}`;C&&C.type==="modify"&&C.originalContent!==null?Pe.files.setKey(P,{type:"file",content:C.originalContent,isBinary:!1}):C&&C.type==="delete"&&C.originalContent!==null?Pe.files.setKey(P,{type:"file",content:C.originalContent,isBinary:!1}):C&&C.type==="create"&&Pe.files.setKey(P,void 0),Ie.success("Change reverted")}}catch(C){console.error("Error reverting change:",C),Ie.error("Failed to revert change")}finally{b(!1)}},[]),x=k.useCallback(E=>{X4(E)},[]),w=k.useCallback(async()=>{b(!0);try{const E=await ls;if(a){const C=await VP(E);C.failed.length>0?Ie.error(`Failed to exit preview for ${C.failed.length} file(s)`):Ie.info("Exited preview mode")}else{const C=await rse(E);C.failed.length>0?Ie.error(`Failed to preview ${C.failed.length} file(s)`):(Ie.success("Preview mode: changes applied temporarily"),C.requiresHardRefresh&&(await new Promise(I=>setTimeout(I,500)),p6().hardRefreshAllPreviews(),Ie.info("Reloading preview for config changes...")))}}catch(E){console.error("Error toggling preview mode:",E),Ie.error("Failed to toggle preview mode")}finally{b(!1)}},[a]),S=k.useCallback(async()=>{b(!0);try{q4(),a?gt.setKey("isPreviewMode",!1):await g(),await m();try{await wI(150)}catch(E){console.error("[StagedChangesPanel] Failed to take snapshot after accept:",E)}}finally{b(!1)}},[g,m,a]),T=k.useCallback(async()=>{b(!0);try{const E=Yne();if(a){const C=await ls;await VP(C)}if(K4(),a||await y(),WP(),E){Ie.info("Rewinding chat to remove rejected changes from history...");const C=new URLSearchParams(t.search);C.set("rewindTo",E),setTimeout(()=>{window.location.search=C.toString()},500)}else Ie.warning("Files reverted. Note: First response cannot be rewound from chat history.")}finally{b(!1)}},[y,a,t.search]);return!o.isEnabled||!e&&!u?null:p.jsx(m9,{open:d,onOpenChange:h,children:p.jsxs("div",{className:"border-b border-bolt-elements-borderColor bg-[#0d1117]",children:[p.jsx(g9,{asChild:!0,children:p.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 bg-bolt-elements-background-depth-2 hover:bg-bolt-elements-background-depth-3 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(rt.span,{className:"i-ph:caret-right w-4 h-4 text-bolt-elements-textSecondary",animate:{rotate:d?90:0},transition:{duration:.15}}),p.jsx("span",{className:"i-ph:git-diff w-5 h-5 text-bolt-elements-textSecondary"}),p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Pending Changes"}),p.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-yellow-500/20 text-yellow-400 rounded-full",children:r+c})]}),p.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textTertiary",children:[s.create.length>0&&p.jsxs("span",{className:"flex items-center gap-1 text-green-400",children:[p.jsx("span",{className:"i-ph:plus-circle w-3.5 h-3.5"}),s.create.length]}),s.modify.length>0&&p.jsxs("span",{className:"flex items-center gap-1 text-yellow-400",children:[p.jsx("span",{className:"i-ph:pencil-simple w-3.5 h-3.5"}),s.modify.length]}),s.delete.length>0&&p.jsxs("span",{className:"flex items-center gap-1 text-red-400",children:[p.jsx("span",{className:"i-ph:trash w-3.5 h-3.5"}),s.delete.length]}),c>0&&p.jsxs("span",{className:"flex items-center gap-1 text-blue-400",children:[p.jsx("span",{className:"i-ph:terminal w-3.5 h-3.5"}),c]})]})]})}),p.jsx(b9,{forceMount:!0,children:p.jsxs(rt.div,{variants:$we,initial:"collapsed",animate:d?"expanded":"collapsed",exit:"collapsed",className:"overflow-hidden",children:[p.jsxs("div",{className:"max-h-64 overflow-y-auto py-2 dark-scrollbar",children:[p.jsx(Y0,{title:"New Files",icon:"i-ph:plus-circle",iconColor:"text-green-400",changes:s.create,onAccept:v,onReject:_,onPreview:x}),p.jsx(Y0,{title:"Modified",icon:"i-ph:pencil-simple",iconColor:"text-yellow-400",changes:s.modify,onAccept:v,onReject:_,onPreview:x}),p.jsx(Y0,{title:"Deleted",icon:"i-ph:trash",iconColor:"text-red-400",changes:s.delete,onAccept:v,onReject:_,onPreview:x}),u&&p.jsxs("div",{className:"mb-2 mt-2 border-t border-bolt-elements-borderColor pt-2",children:[p.jsxs("div",{className:"flex items-center gap-2 px-3 py-1",children:[p.jsx("span",{className:"i-ph:terminal w-4 h-4 text-blue-400"}),p.jsx("span",{className:"text-xs font-medium text-bolt-elements-textSecondary uppercase tracking-wide",children:"Queued Commands"}),p.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary",children:["(",c,")"]})]}),l.map(E=>p.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 hover:bg-bolt-elements-background-depth-2 rounded-md",children:[p.jsx("span",{className:ye("w-4 h-4 flex-shrink-0",E.type==="shell"?"i-ph:terminal-window text-blue-400":"i-ph:play text-green-400")}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("span",{className:"text-sm font-mono text-bolt-elements-textPrimary truncate block",children:E.command.length>50?`${E.command.substring(0,50)}...`:E.command}),p.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary",children:[E.type," command"]})]})]},E.id))]})]}),a&&p.jsxs("div",{className:"mx-4 mt-2 mb-1 px-3 py-2 bg-yellow-500/20 border border-yellow-500/50 rounded-lg flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:eye text-yellow-400"}),p.jsx("span",{className:"flex-1 text-sm text-yellow-300",children:"Preview Mode - Changes are temporarily applied"}),p.jsx("button",{onClick:w,disabled:f,className:"text-xs text-yellow-400 hover:text-yellow-300 underline disabled:opacity-50",children:"Exit Preview"})]}),p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-bolt-elements-borderColor bg-bolt-elements-background-depth-2",children:[p.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary",children:[n.reviewed>0&&`${n.reviewed} reviewed  `,r," pending",c>0&&`  ${c} commands`]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(Rt,{variant:"default",size:"sm",disabled:f,onClick:w,className:ye("disabled:opacity-50",a?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-bolt-elements-button-secondary-background hover:bg-bolt-elements-button-secondary-backgroundHover text-bolt-elements-button-secondary-text"),children:[p.jsx("span",{className:"i-ph:eye mr-1.5"}),a?"Previewing":"Preview"]}),p.jsxs(Rt,{variant:"default",size:"sm",disabled:f,onClick:T,className:"bg-red-600 hover:bg-red-700 text-white disabled:opacity-50",children:[p.jsx("span",{className:"i-ph:x-circle mr-1.5"}),"Reject All"]}),p.jsxs(Rt,{variant:"default",size:"sm",disabled:f,onClick:S,className:"bg-green-600 hover:bg-green-700 text-white disabled:opacity-50",children:[f?p.jsx("span",{className:"i-ph:spinner animate-spin mr-1.5"}):p.jsx("span",{className:"i-ph:check-circle mr-1.5"}),f?"Applying...":"Accept All"]})]})]})]})})]})})});S9.displayName="StagedChangesPanel";var Gwe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),qwe="VisuallyHidden",E9=k.forwardRef((t,e)=>p.jsx(D4.span,{...t,ref:e,style:{...Gwe,...t.style}}));E9.displayName=qwe;var JD=E9;const Kwe={closed:{opacity:0,scale:.95,transition:{duration:.15,ease:Dn}},open:{opacity:1,scale:1,transition:{duration:.15,ease:Dn}}};function Ywe(t,e){const r=t??"",n=[],s=GT(r,e);let i=1,o=1;for(const a of s){const l=a.value.split(`
`);l[l.length-1]===""&&l.pop();for(const c of l)a.added?n.push({type:"added",content:c,lineNumberAfter:o++}):a.removed?n.push({type:"removed",content:c,lineNumberBefore:i++}):n.push({type:"unchanged",content:c,lineNumberBefore:i++,lineNumberAfter:o++})}return n}function Xwe(t){switch(t){case"create":return"New File";case"modify":return"Modified";case"delete":return"Deleted";default:return"Unknown"}}function Jwe(t){switch(t){case"create":return"bg-green-500/20 text-green-400 border-green-500/30";case"modify":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"delete":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}}function Zwe(t){const e=t.split(".").pop()?.toLowerCase()??"";return{ts:"i-vscode-icons:file-type-typescript",tsx:"i-vscode-icons:file-type-reactts",js:"i-vscode-icons:file-type-js",jsx:"i-vscode-icons:file-type-reactjs",json:"i-vscode-icons:file-type-json",md:"i-vscode-icons:file-type-markdown",css:"i-vscode-icons:file-type-css",scss:"i-vscode-icons:file-type-scss",html:"i-vscode-icons:file-type-html",py:"i-vscode-icons:file-type-python",go:"i-vscode-icons:file-type-go",rs:"i-vscode-icons:file-type-rust"}[e]??"i-ph:file"}const C9=k.memo(({line:t})=>{const e=k.useMemo(()=>{switch(t.type){case"added":return"bg-green-500/10";case"removed":return"bg-red-500/10";default:return""}},[t.type]),r=k.useMemo(()=>{switch(t.type){case"added":return"text-green-400";case"removed":return"text-red-400";default:return"text-bolt-elements-textSecondary"}},[t.type]),n=k.useMemo(()=>{switch(t.type){case"added":return"+";case"removed":return"-";default:return" "}},[t.type]);return p.jsxs("div",{className:ye("flex text-sm font-mono",e),children:[p.jsx("div",{className:"w-12 flex-shrink-0 text-right pr-2 select-none border-r border-[#333]",style:{backgroundColor:"var(--bolt-elements-background-depth-4)",color:"#6b7280"},children:t.lineNumberBefore??""}),p.jsx("div",{className:"w-12 flex-shrink-0 text-right pr-2 select-none border-r border-[#333]",style:{backgroundColor:"var(--bolt-elements-background-depth-4)",color:"#6b7280"},children:t.lineNumberAfter??""}),p.jsx("div",{className:ye("w-6 flex-shrink-0 text-center select-none",r),children:n}),p.jsx("div",{className:ye("flex-1 px-2 whitespace-pre",r),children:t.content||" "})]})});C9.displayName="DiffLineRow";const T9=k.memo(({change:t})=>{const e=k.useMemo(()=>Ywe(t.originalContent,t.newContent),[t.originalContent,t.newContent]),r=k.useMemo(()=>{let n=0,s=0;for(const i of e)i.type==="added"&&n++,i.type==="removed"&&s++;return{added:n,removed:s}},[e]);return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"flex items-center gap-4 px-4 py-2",style:{backgroundColor:"var(--bolt-elements-background-depth-4)",borderBottom:"1px solid #333"},children:[p.jsxs("span",{className:"text-sm text-green-400",children:["+",r.added," additions"]}),p.jsxs("span",{className:"text-sm text-red-400",children:["-",r.removed," deletions"]}),p.jsxs("span",{className:"text-sm",style:{color:"#6b7280"},children:[e.filter(n=>n.type==="unchanged").length," unchanged"]})]}),p.jsx("div",{className:"flex-1 overflow-auto diff-modal-content",style:{backgroundColor:"var(--bolt-elements-bg-depth-3)"},children:e.map((n,s)=>p.jsx(C9,{line:n},`${s}-${n.type}-${n.content.slice(0,20)}`))})]})});T9.displayName="DiffContent";const k9=k.memo(()=>{const t=He(gt),e=He(zne),r=He(ha),[n,s]=k.useState(!1),i=t.isDiffModalOpen&&e!==null,o=k.useMemo(()=>{if(!e)return{current:0,total:0};const h=r.filter(b=>b.status==="pending");return{current:h.findIndex(b=>b.filePath===e.filePath)+1,total:h.length}},[e,r]);k.useEffect(()=>{if(!i)return;const h=f=>{f.key==="Escape"?lg():f.key==="ArrowRight"||f.key==="]"?(f.preventDefault(),fu()):f.key==="ArrowLeft"||f.key==="["?(f.preventDefault(),fS()):f.key==="Enter"&&(f.ctrlKey||f.metaKey)?(f.preventDefault(),a()):f.key==="Backspace"&&(f.ctrlKey||f.metaKey)&&(f.preventDefault(),l())};return window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[i]);const a=k.useCallback(async()=>{if(!(!e||n)){s(!0);try{V4(e.filePath),o.total>1?fu():lg()}finally{s(!1)}}},[e,n,o.total]),l=k.useCallback(async()=>{if(!(!e||n)){s(!0);try{G4(e.filePath),o.total>1?fu():lg()}finally{s(!1)}}},[e,n,o.total]),c=k.useCallback(()=>{fu()},[]),u=k.useCallback(()=>{lg()},[]);if(!e)return null;const d=e.filePath.split("/").pop()??e.filePath;return p.jsx(Nr,{children:i&&p.jsx(Ii,{open:i,onOpenChange:h=>!h&&u(),children:p.jsxs(mv,{children:[p.jsx(gv,{asChild:!0,children:p.jsx(rt.div,{className:"fixed inset-0 z-[9999] bg-black/70 dark:bg-black/80 backdrop-blur-sm",initial:"closed",animate:"open",exit:"closed",variants:NT,onClick:u})}),p.jsx(bv,{asChild:!0,children:p.jsx(rt.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",initial:"closed",animate:"open",exit:"closed",variants:Kwe,children:p.jsxs("div",{className:"w-[90vw] max-w-5xl h-[85vh] rounded-lg shadow-xl flex flex-col focus:outline-none",style:{backgroundColor:"var(--bolt-elements-bg-depth-3)",borderColor:"#333",borderWidth:"1px",borderStyle:"solid"},children:[p.jsx(JD,{asChild:!0,children:p.jsxs(RT,{children:[e.type==="create"?"New File":e.type==="modify"?"Modified File":"Deleted File",": ",d]})}),p.jsx(JD,{asChild:!0,children:p.jsxs(PT,{children:["Review the diff for ",e.filePath,". Use arrow keys to navigate between changes."]})}),p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 rounded-t-lg",style:{backgroundColor:"var(--bolt-elements-background-depth-4)",borderBottom:"1px solid #333"},children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:ye("w-5 h-5",Zwe(e.filePath))}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-sm font-medium",style:{color:"#ffffff"},children:d}),p.jsx("span",{className:"text-xs",style:{color:"#6b7280"},children:e.filePath})]}),p.jsx("span",{className:ye("px-2 py-0.5 text-xs font-medium rounded border",Jwe(e.type)),children:Xwe(e.type)})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[o.total>1&&p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:"text-sm",style:{color:"#6b7280"},children:[o.current," of ",o.total]}),p.jsx(Kt,{icon:"i-ph:caret-left",onClick:()=>fS(),title:"Previous change ([)"}),p.jsx(Kt,{icon:"i-ph:caret-right",onClick:()=>fu(),title:"Next change (])"}),p.jsx("div",{className:"w-px h-6 mx-2",style:{backgroundColor:"#333"}})]}),p.jsx(Kt,{icon:"i-ph:x",onClick:u,title:"Close (Escape)",className:"text-[#6b7280]"})]})]}),p.jsx("div",{className:"flex-1 overflow-hidden",children:p.jsx(T9,{change:e})}),p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 rounded-b-lg",style:{backgroundColor:"var(--bolt-elements-background-depth-4)",borderTop:"1px solid #333"},children:[p.jsxs("div",{className:"flex items-center gap-4 text-xs",style:{color:"#6b7280"},children:[p.jsxs("span",{children:[p.jsx("kbd",{className:"px-1.5 py-0.5 rounded",style:{backgroundColor:"#2a2a2a",color:"#9ca3af"},children:""})," ","/"," ",p.jsx("kbd",{className:"px-1.5 py-0.5 rounded",style:{backgroundColor:"#2a2a2a",color:"#9ca3af"},children:""})," ","Navigate"]}),p.jsxs("span",{children:[p.jsx("kbd",{className:"px-1.5 py-0.5 rounded",style:{backgroundColor:"#2a2a2a",color:"#9ca3af"},children:"Ctrl"}),"+",p.jsx("kbd",{className:"px-1.5 py-0.5 rounded",style:{backgroundColor:"#2a2a2a",color:"#9ca3af"},children:"Enter"})," ","Accept"]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[o.total>1&&p.jsx(Rt,{variant:"ghost",onClick:c,disabled:n,style:{backgroundColor:"#333",color:"#9ca3af"},children:"Skip"}),p.jsxs(Rt,{variant:"destructive",onClick:l,disabled:n,children:[p.jsx("span",{className:"i-ph:x-circle mr-1.5"}),"Reject"]}),p.jsxs(Rt,{variant:"default",onClick:a,disabled:n,className:"bg-green-600 hover:bg-green-700 text-white",children:[p.jsx("span",{className:"i-ph:check-circle mr-1.5"}),"Accept"]})]})]})]})})})]})})})});k9.displayName="DiffPreviewModal";const Qwe=({exportChat:t})=>p.jsx("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden",children:p.jsxs(t_,{children:[p.jsxs(r_,{className:"rounded-md items-center justify-center [&:is(:disabled,.disabled)]:cursor-not-allowed [&:is(:disabled,.disabled)]:opacity-60 px-3 py-1.5 text-xs bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary border border-bolt-elements-borderColor hover:bg-bolt-elements-background-depth-4 [&:not(:disabled,.disabled)]:hover:text-accent-400 outline-accent-500 flex gap-1.7",children:["Export",p.jsx("span",{className:ye("i-ph:caret-down transition-transform")})]}),p.jsx(n_,{children:p.jsxs(s_,{className:ye("z-[9999]","bg-bolt-elements-background-depth-2","rounded-lg shadow-lg","border border-bolt-elements-borderColor","animate-in fade-in-0 zoom-in-95","py-1"),sideOffset:5,align:"end",children:[p.jsxs(Ju,{className:ye("cursor-pointer flex items-center w-auto px-4 py-2 text-sm text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive gap-2 rounded-md group relative"),onClick:()=>{Pe.downloadZip()},children:[p.jsx("div",{className:"i-ph:code size-4.5"}),p.jsx("span",{children:"Download Code"})]}),p.jsxs(Ju,{className:ye("cursor-pointer flex items-center w-full px-4 py-2 text-sm text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive gap-2 rounded-md group relative"),onClick:()=>t?.(),children:[p.jsx("div",{className:"i-ph:chat size-4.5"}),p.jsx("span",{children:"Export Chat"})]})]})})]})}),A9=bt(!1),e1e={ease:Dn},t1e=t=>({left:{value:"code",text:t("workbench.code","Code")},right:{value:"preview",text:t("workbench.preview","Preview")}}),r1e=k.memo(({chatStarted:t,isStreaming:e,metadata:r,updateChatMestaData:n,setSelectedElement:s,width:i,fullWidth:o})=>{const{t:a}=Ms();Id.trace("Workbench");const[l]=k.useState({}),c=He(Fr(Pe.previews,R=>R.length>0)),u=He(Pe.showWorkbench),d=He(Pe.selectedFile),h=He(Pe.currentDocument),f=He(Pe.unsavedFiles),b=He(Pe.files),m=He(Pe.currentView),{showChat:g}=He(Gs),y=u||!g,v=Dde(1024),_=He(A9),{exportChat:x}=ek(),[w,S]=k.useState(!1),T=R=>{Pe.currentView.set(R)};k.useEffect(()=>{c&&T("preview")},[c]),k.useEffect(()=>{Pe.setDocuments(b)},[b]);const E=k.useCallback(R=>{Pe.setCurrentDocumentContent(R.content)},[]),C=k.useCallback(R=>{Pe.setCurrentDocumentScrollPosition(R)},[]),A=k.useCallback(R=>{Pe.setSelectedFile(R)},[]),I=k.useCallback(()=>{Pe.saveCurrentDocument().then(()=>{p6().refreshAllPreviews()}).catch(()=>{Ie.error("Failed to update file content")})},[]),P=k.useCallback(()=>{Pe.resetCurrentDocument()},[]),D=k.useCallback(async()=>{S(!0);try{const R=await window.showDirectoryPicker();await Pe.syncFiles(R),Ie.success("Files synced successfully")}catch(R){console.error("Error syncing files:",R),Ie.error("Failed to sync files")}finally{S(!1)}},[]);return t&&u&&p.jsx("div",{className:ye("h-full z-workbench",{"flex-grow":!!o,"flex-shrink-0":!o}),style:o?{}:{"--workbench-width-override":i?`${i}px`:void 0},children:p.jsxs("div",{className:ye("h-full flex flex-col bg-bolt-elements-background-depth-2 overflow-hidden",{"border-l border-bolt-elements-borderColor":!o}),children:[p.jsxs("div",{className:"flex items-center px-3 py-2.5 border-b border-bolt-elements-borderColor gap-2 bg-bolt-elements-background-depth-2/80",children:[p.jsx("button",{className:`${g?"i-ph:sidebar-simple-fill":"i-ph:sidebar-simple"} text-lg text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors mr-1`,disabled:!y||v,onClick:()=>{y&&Gs.setKey("showChat",!g)},title:g?a("chat.hide_chat","Hide Chat"):a("chat.show_chat","Show Chat")}),p.jsx(kve,{selected:m,options:t1e(a),setSelected:T}),p.jsx("div",{className:"ml-auto"}),m==="code"&&p.jsxs("div",{className:"flex overflow-y-auto",children:[p.jsx(Qwe,{exportChat:x}),p.jsx("div",{className:"flex border border-bolt-elements-borderColor rounded-lg overflow-hidden ml-1",children:p.jsxs(t_,{children:[p.jsxs(r_,{disabled:w||_,className:"rounded-lg items-center justify-center [&:is(:disabled,.disabled)]:cursor-not-allowed [&:is(:disabled,.disabled)]:opacity-60 px-3 py-1.5 text-xs bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary border border-bolt-elements-borderColor hover:bg-bolt-elements-background-depth-4 [&:not(:disabled,.disabled)]:hover:text-accent-400 outline-accent-500 flex gap-1.5 transition-colors",children:[w?a("workbench.syncing","Syncing..."):a("workbench.sync","Sync"),p.jsx("span",{className:ye("i-ph:caret-down transition-transform")})]}),p.jsx(n_,{children:p.jsx(s_,{className:ye("min-w-[240px] z-[9999]","bg-bolt-elements-background-depth-2","rounded-lg shadow-lg","border border-gray-200/50 dark:border-gray-800/50","animate-in fade-in-0 zoom-in-95","py-1"),sideOffset:5,align:"end",children:p.jsx(Ju,{className:ye("cursor-pointer flex items-center w-full px-4 py-2 text-sm text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive gap-2 rounded-md group relative"),onClick:D,disabled:w,children:p.jsxs("div",{className:"flex items-center gap-2",children:[w?p.jsx("div",{className:"i-ph:spinner"}):p.jsx("div",{className:"i-ph:cloud-arrow-down"}),p.jsx("span",{children:w?a("workbench.syncing","Syncing..."):a("workbench.sync_files","Sync Files")})]})})})})]})}),p.jsx("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden ml-1",children:p.jsxs("button",{onClick:()=>{Pe.toggleTerminal(!Pe.showTerminal.get())},className:"rounded-md items-center justify-center [&:is(:disabled,.disabled)]:cursor-not-allowed [&:is(:disabled,.disabled)]:opacity-60 px-3 py-1.5 text-xs bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary border border-bolt-elements-borderColor hover:bg-bolt-elements-background-depth-4 [&:not(:disabled,.disabled)]:hover:text-accent-400 outline-accent-500 flex gap-1.7",children:[p.jsx("div",{className:"i-ph:terminal"}),a("workbench.toggle_terminal","Toggle Terminal")]})})]}),p.jsx(Kt,{icon:"i-ph:x-circle",className:"-mr-1",size:"xl",onClick:()=>{Pe.showWorkbench.set(!1)}})]}),p.jsx(x9,{}),p.jsx(S9,{}),p.jsx(k9,{}),p.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[p.jsx(Sw,{initial:{x:"0%"},animate:{x:m==="code"?"0%":"-100%"},children:p.jsx(hwe,{editorDocument:h,isStreaming:e,selectedFile:d,files:b,unsavedFiles:f,fileHistory:l,onFileSelect:A,onEditorScroll:C,onEditorChange:E,onFileSave:I,onFileReset:P})}),p.jsx(Sw,{initial:{x:"100%"},animate:{x:m==="preview"?"0%":"100%"},children:p.jsx(u9,{setSelectedElement:s})}),p.jsx(Sw,{initial:{x:"100%"},animate:{x:m==="versions"?"0%":"100%"},children:p.jsx(Dwe,{})})]})]})})}),Sw=k.memo(({children:t,...e})=>p.jsx(rt.div,{className:"absolute inset-0",transition:e1e,...e,children:t}));class n1e extends Error{name="Assertion";code="ERR_ASSERTION";constructor(e,r,n,s,i){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.actual=r,this.expected=n,this.generated=i,this.operator=s}}function ue(t,e){R9(!!t,!1,!0,"ok","Expected value to be truthy",e)}function jE(t){R9(!1,!1,!0,"ok","Unreachable",t)}function R9(t,e,r,n,s,i){if(!t)throw i instanceof Error?i:new n1e(i||s,e,r,n,!i)}function ZD(t){const e=[],r=String(t||"");let n=r.indexOf(","),s=0,i=!1;for(;!i;){n===-1&&(n=r.length,i=!0);const o=r.slice(s,n).trim();(o||!i)&&e.push(o),s=n+1,n=r.indexOf(",",s)}return e}function bA(t,e){const r=e||{};return(t[t.length-1]===""?[...t,""]:t).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const s1e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,i1e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,o1e={};function QD(t,e){return(o1e.jsx?i1e:s1e).test(t)}const a1e=/[ \t\n\f\r]/g;function o_(t){return typeof t=="object"?t.type==="text"?eO(t.value):!1:eO(t)}function eO(t){return t.replace(a1e,"")===""}class om{constructor(e,r,n){this.normal=r,this.property=e,n&&(this.space=n)}}om.prototype.normal={};om.prototype.property={};om.prototype.space=void 0;function P9(t,e){const r={},n={};for(const s of t)Object.assign(r,s.property),Object.assign(n,s.normal);return new om(r,n,e)}function mp(t){return t.toLowerCase()}class vs{constructor(e,r){this.attribute=r,this.property=e}}vs.prototype.attribute="";vs.prototype.booleanish=!1;vs.prototype.boolean=!1;vs.prototype.commaOrSpaceSeparated=!1;vs.prototype.commaSeparated=!1;vs.prototype.defined=!1;vs.prototype.mustUseProperty=!1;vs.prototype.number=!1;vs.prototype.overloadedBoolean=!1;vs.prototype.property="";vs.prototype.spaceSeparated=!1;vs.prototype.space=void 0;let l1e=0;const St=Bc(),Br=Bc(),FE=Bc(),Ue=Bc(),lr=Bc(),Zu=Bc(),Ss=Bc();function Bc(){return 2**++l1e}const BE=Object.freeze(Object.defineProperty({__proto__:null,boolean:St,booleanish:Br,commaOrSpaceSeparated:Ss,commaSeparated:Zu,number:Ue,overloadedBoolean:FE,spaceSeparated:lr},Symbol.toStringTag,{value:"Module"})),Ew=Object.keys(BE);class yA extends vs{constructor(e,r,n,s){let i=-1;if(super(e,r),tO(this,"space",s),typeof n=="number")for(;++i<Ew.length;){const o=Ew[i];tO(this,Ew[i],(n&BE[o])===BE[o])}}}yA.prototype.defined=!0;function tO(t,e,r){r&&(t[e]=r)}function Hd(t){const e={},r={};for(const[n,s]of Object.entries(t.properties)){const i=new yA(n,t.transform(t.attributes||{},n),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),e[n]=i,r[mp(n)]=n,r[mp(i.attribute)]=n}return new om(e,r,t.space)}const I9=Hd({properties:{ariaActiveDescendant:null,ariaAtomic:Br,ariaAutoComplete:null,ariaBusy:Br,ariaChecked:Br,ariaColCount:Ue,ariaColIndex:Ue,ariaColSpan:Ue,ariaControls:lr,ariaCurrent:null,ariaDescribedBy:lr,ariaDetails:null,ariaDisabled:Br,ariaDropEffect:lr,ariaErrorMessage:null,ariaExpanded:Br,ariaFlowTo:lr,ariaGrabbed:Br,ariaHasPopup:null,ariaHidden:Br,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:lr,ariaLevel:Ue,ariaLive:null,ariaModal:Br,ariaMultiLine:Br,ariaMultiSelectable:Br,ariaOrientation:null,ariaOwns:lr,ariaPlaceholder:null,ariaPosInSet:Ue,ariaPressed:Br,ariaReadOnly:Br,ariaRelevant:null,ariaRequired:Br,ariaRoleDescription:lr,ariaRowCount:Ue,ariaRowIndex:Ue,ariaRowSpan:Ue,ariaSelected:Br,ariaSetSize:Ue,ariaSort:null,ariaValueMax:Ue,ariaValueMin:Ue,ariaValueNow:Ue,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function N9(t,e){return e in t?t[e]:e}function D9(t,e){return N9(t,e.toLowerCase())}const c1e=Hd({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Zu,acceptCharset:lr,accessKey:lr,action:null,allow:null,allowFullScreen:St,allowPaymentRequest:St,allowUserMedia:St,alt:null,as:null,async:St,autoCapitalize:null,autoComplete:lr,autoFocus:St,autoPlay:St,blocking:lr,capture:null,charSet:null,checked:St,cite:null,className:lr,cols:Ue,colSpan:null,content:null,contentEditable:Br,controls:St,controlsList:lr,coords:Ue|Zu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:St,defer:St,dir:null,dirName:null,disabled:St,download:FE,draggable:Br,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:St,formTarget:null,headers:lr,height:Ue,hidden:FE,high:Ue,href:null,hrefLang:null,htmlFor:lr,httpEquiv:lr,id:null,imageSizes:null,imageSrcSet:null,inert:St,inputMode:null,integrity:null,is:null,isMap:St,itemId:null,itemProp:lr,itemRef:lr,itemScope:St,itemType:lr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:St,low:Ue,manifest:null,max:null,maxLength:Ue,media:null,method:null,min:null,minLength:Ue,multiple:St,muted:St,name:null,nonce:null,noModule:St,noValidate:St,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:St,optimum:Ue,pattern:null,ping:lr,placeholder:null,playsInline:St,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:St,referrerPolicy:null,rel:lr,required:St,reversed:St,rows:Ue,rowSpan:Ue,sandbox:lr,scope:null,scoped:St,seamless:St,selected:St,shadowRootClonable:St,shadowRootDelegatesFocus:St,shadowRootMode:null,shape:null,size:Ue,sizes:null,slot:null,span:Ue,spellCheck:Br,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ue,step:null,style:null,tabIndex:Ue,target:null,title:null,translate:null,type:null,typeMustMatch:St,useMap:null,value:Br,width:Ue,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:lr,axis:null,background:null,bgColor:null,border:Ue,borderColor:null,bottomMargin:Ue,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:St,declare:St,event:null,face:null,frame:null,frameBorder:null,hSpace:Ue,leftMargin:Ue,link:null,longDesc:null,lowSrc:null,marginHeight:Ue,marginWidth:Ue,noResize:St,noHref:St,noShade:St,noWrap:St,object:null,profile:null,prompt:null,rev:null,rightMargin:Ue,rules:null,scheme:null,scrolling:Br,standby:null,summary:null,text:null,topMargin:Ue,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ue,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:St,disableRemotePlayback:St,prefix:null,property:null,results:Ue,security:null,unselectable:null},space:"html",transform:D9}),u1e=Hd({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ss,accentHeight:Ue,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ue,amplitude:Ue,arabicForm:null,ascent:Ue,attributeName:null,attributeType:null,azimuth:Ue,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ue,by:null,calcMode:null,capHeight:Ue,className:lr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ue,diffuseConstant:Ue,direction:null,display:null,dur:null,divisor:Ue,dominantBaseline:null,download:St,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ue,enableBackground:null,end:null,event:null,exponent:Ue,externalResourcesRequired:null,fill:null,fillOpacity:Ue,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Zu,g2:Zu,glyphName:Zu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ue,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ue,horizOriginX:Ue,horizOriginY:Ue,id:null,ideographic:Ue,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ue,k:Ue,k1:Ue,k2:Ue,k3:Ue,k4:Ue,kernelMatrix:Ss,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ue,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ue,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ue,overlineThickness:Ue,paintOrder:null,panose1:null,path:null,pathLength:Ue,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:lr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ue,pointsAtY:Ue,pointsAtZ:Ue,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ss,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ss,rev:Ss,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ss,requiredFeatures:Ss,requiredFonts:Ss,requiredFormats:Ss,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ue,specularExponent:Ue,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ue,strikethroughThickness:Ue,string:null,stroke:null,strokeDashArray:Ss,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ue,strokeOpacity:Ue,strokeWidth:null,style:null,surfaceScale:Ue,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ss,tabIndex:Ue,tableValues:null,target:null,targetX:Ue,targetY:Ue,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ss,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ue,underlineThickness:Ue,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ue,values:null,vAlphabetic:Ue,vMathematical:Ue,vectorEffect:null,vHanging:Ue,vIdeographic:Ue,version:null,vertAdvY:Ue,vertOriginX:Ue,vertOriginY:Ue,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ue,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:N9}),O9=Hd({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),L9=Hd({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:D9}),M9=Hd({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),d1e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},h1e=/[A-Z]/g,rO=/-[a-z]/g,f1e=/^data[-\w.:]+$/i;function am(t,e){const r=mp(e);let n=e,s=vs;if(r in t.normal)return t.property[t.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&f1e.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(rO,m1e);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!rO.test(i)){let o=i.replace(h1e,p1e);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}s=yA}return new s(n,e)}function p1e(t){return"-"+t.toLowerCase()}function m1e(t){return t.charAt(1).toUpperCase()}const zd=P9([I9,c1e,O9,L9,M9],"html"),To=P9([I9,u1e,O9,L9,M9],"svg");function nO(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function vA(t){return t.join(" ").trim()}var _A={},sO=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,g1e=/\n/g,b1e=/^\s*/,y1e=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,v1e=/^:\s*/,_1e=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,x1e=/^[;\s]*/,w1e=/^\s+|\s+$/g,S1e=`
`,iO="/",oO="*",ql="",E1e="comment",C1e="declaration";function T1e(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var r=1,n=1;function s(b){var m=b.match(g1e);m&&(r+=m.length);var g=b.lastIndexOf(S1e);n=~g?b.length-g:n+b.length}function i(){var b={line:r,column:n};return function(m){return m.position=new o(b),c(),m}}function o(b){this.start=b,this.end={line:r,column:n},this.source=e.source}o.prototype.content=t;function a(b){var m=new Error(e.source+":"+r+":"+n+": "+b);if(m.reason=b,m.filename=e.source,m.line=r,m.column=n,m.source=t,!e.silent)throw m}function l(b){var m=b.exec(t);if(m){var g=m[0];return s(g),t=t.slice(g.length),m}}function c(){l(b1e)}function u(b){var m;for(b=b||[];m=d();)m!==!1&&b.push(m);return b}function d(){var b=i();if(!(iO!=t.charAt(0)||oO!=t.charAt(1))){for(var m=2;ql!=t.charAt(m)&&(oO!=t.charAt(m)||iO!=t.charAt(m+1));)++m;if(m+=2,ql===t.charAt(m-1))return a("End of comment missing");var g=t.slice(2,m-2);return n+=2,s(g),t=t.slice(m),n+=2,b({type:E1e,comment:g})}}function h(){var b=i(),m=l(y1e);if(m){if(d(),!l(v1e))return a("property missing ':'");var g=l(_1e),y=b({type:C1e,property:aO(m[0].replace(sO,ql)),value:g?aO(g[0].replace(sO,ql)):ql});return l(x1e),y}}function f(){var b=[];u(b);for(var m;m=h();)m!==!1&&(b.push(m),u(b));return b}return c(),f()}function aO(t){return t?t.replace(w1e,ql):ql}var k1e=T1e,A1e=kr&&kr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_A,"__esModule",{value:!0});_A.default=P1e;const R1e=A1e(k1e);function P1e(t,e){let r=null;if(!t||typeof t!="string")return r;const n=(0,R1e.default)(t),s=typeof e=="function";return n.forEach(i=>{if(i.type!=="declaration")return;const{property:o,value:a}=i;s?e(o,a,i):a&&(r=r||{},r[o]=a)}),r}var a_={};Object.defineProperty(a_,"__esModule",{value:!0});a_.camelCase=void 0;var I1e=/^--[a-zA-Z0-9_-]+$/,N1e=/-([a-z])/g,D1e=/^[^-]+$/,O1e=/^-(webkit|moz|ms|o|khtml)-/,L1e=/^-(ms)-/,M1e=function(t){return!t||D1e.test(t)||I1e.test(t)},j1e=function(t,e){return e.toUpperCase()},lO=function(t,e){return"".concat(e,"-")},F1e=function(t,e){return e===void 0&&(e={}),M1e(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(L1e,lO):t=t.replace(O1e,lO),t.replace(N1e,j1e))};a_.camelCase=F1e;var B1e=kr&&kr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},$1e=B1e(_A),U1e=a_;function $E(t,e){var r={};return!t||typeof t!="string"||(0,$1e.default)(t,function(n,s){n&&s&&(r[(0,U1e.camelCase)(n,e)]=s)}),r}$E.default=$E;var H1e=$E;const z1e=gl(H1e),l_=j9("end"),ko=j9("start");function j9(t){return e;function e(r){const n=r&&r.position&&r.position[t]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function F9(t){const e=ko(t),r=l_(t);if(e&&r)return{start:e,end:r}}function pf(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?cO(t.position):"start"in t||"end"in t?cO(t):"line"in t||"column"in t?UE(t):""}function UE(t){return uO(t&&t.line)+":"+uO(t&&t.column)}function cO(t){return UE(t&&t.start)+"-"+UE(t&&t.end)}function uO(t){return t&&typeof t=="number"?t:1}class Ln extends Error{constructor(e,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let s="",i={},o=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof e=="string"?s=e:!i.cause&&e&&(o=!0,s=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof n=="string"){const l=n.indexOf(":");l===-1?i.ruleId=n:(i.source=n.slice(0,l),i.ruleId=n.slice(l+1))}if(!i.place&&i.ancestors&&i.ancestors){const l=i.ancestors[i.ancestors.length-1];l&&(i.place=l.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=a?a.line:void 0,this.name=pf(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ln.prototype.file="";Ln.prototype.name="";Ln.prototype.reason="";Ln.prototype.message="";Ln.prototype.stack="";Ln.prototype.column=void 0;Ln.prototype.line=void 0;Ln.prototype.ancestors=void 0;Ln.prototype.cause=void 0;Ln.prototype.fatal=void 0;Ln.prototype.place=void 0;Ln.prototype.ruleId=void 0;Ln.prototype.source=void 0;const xA={}.hasOwnProperty,W1e=new Map,V1e=/[A-Z]/g,G1e=new Set(["table","tbody","thead","tfoot","tr"]),q1e=new Set(["td","th"]),B9="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function K1e(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=e.filePath||void 0;let n;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=rSe(r,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=tSe(r,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:n,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?To:zd,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},i=$9(s,t,void 0);return i&&typeof i!="string"?i:s.create(t,s.Fragment,{children:i||void 0},void 0)}function $9(t,e,r){if(e.type==="element")return Y1e(t,e,r);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return X1e(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Z1e(t,e,r);if(e.type==="mdxjsEsm")return J1e(t,e);if(e.type==="root")return Q1e(t,e,r);if(e.type==="text")return eSe(t,e)}function Y1e(t,e,r){const n=t.schema;let s=n;e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(s=To,t.schema=s),t.ancestors.push(e);const i=H9(t,e.tagName,!1),o=nSe(t,e);let a=SA(t,e);return G1e.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!o_(l):!0})),U9(t,o,i,e),wA(o,a),t.ancestors.pop(),t.schema=n,t.create(e,i,o,r)}function X1e(t,e){if(e.data&&e.data.estree&&t.evaluater){const n=e.data.estree.body[0];return ue(n.type==="ExpressionStatement"),t.evaluater.evaluateExpression(n.expression)}gp(t,e.position)}function J1e(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);gp(t,e.position)}function Z1e(t,e,r){const n=t.schema;let s=n;e.name==="svg"&&n.space==="html"&&(s=To,t.schema=s),t.ancestors.push(e);const i=e.name===null?t.Fragment:H9(t,e.name,!0),o=sSe(t,e),a=SA(t,e);return U9(t,o,i,e),wA(o,a),t.ancestors.pop(),t.schema=n,t.create(e,i,o,r)}function Q1e(t,e,r){const n={};return wA(n,SA(t,e)),t.create(e,t.Fragment,n,r)}function eSe(t,e){return e.value}function U9(t,e,r,n){typeof r!="string"&&r!==t.Fragment&&t.passNode&&(e.node=n)}function wA(t,e){if(e.length>0){const r=e.length>1?e:e[0];r&&(t.children=r)}}function tSe(t,e,r){return n;function n(s,i,o,a){const c=Array.isArray(o.children)?r:e;return a?c(i,o,a):c(i,o)}}function rSe(t,e){return r;function r(n,s,i,o){const a=Array.isArray(i.children),l=ko(n);return e(s,i,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function nSe(t,e){const r={};let n,s;for(s in e.properties)if(s!=="children"&&xA.call(e.properties,s)){const i=iSe(t,s,e.properties[s]);if(i){const[o,a]=i;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&q1e.has(e.tagName)?n=a:r[o]=a}}if(n){const i=r.style||(r.style={});i[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function sSe(t,e){const r={};for(const n of e.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&t.evaluater){const i=n.data.estree.body[0];ue(i.type==="ExpressionStatement");const o=i.expression;ue(o.type==="ObjectExpression");const a=o.properties[0];ue(a.type==="SpreadElement"),Object.assign(r,t.evaluater.evaluateExpression(a.argument))}else gp(t,e.position);else{const s=n.name;let i;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&t.evaluater){const a=n.value.data.estree.body[0];ue(a.type==="ExpressionStatement"),i=t.evaluater.evaluateExpression(a.expression)}else gp(t,e.position);else i=n.value===null?!0:n.value;r[s]=i}return r}function SA(t,e){const r=[];let n=-1;const s=t.passKeys?new Map:W1e;for(;++n<e.children.length;){const i=e.children[n];let o;if(t.passKeys){const l=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(l){const c=s.get(l)||0;o=l+"-"+c,s.set(l,c+1)}}const a=$9(t,i,o);a!==void 0&&r.push(a)}return r}function iSe(t,e,r){const n=am(t.schema,e);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?bA(r):vA(r)),n.property==="style"){let s=typeof r=="object"?r:oSe(t,String(r));return t.stylePropertyNameCase==="css"&&(s=aSe(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&n.space?d1e[n.property]||n.property:n.attribute,r]}}function oSe(t,e){try{return z1e(e,{reactCompat:!0})}catch(r){if(t.ignoreInvalidStyle)return{};const n=r,s=new Ln("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=B9+"#cannot-parse-style-attribute",s}}function H9(t,e,r){let n;if(!r)n={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let i=-1,o;for(;++i<s.length;){const a=QD(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(i&&a.type==="Literal"),optional:!1}:a}ue(o,"always a result"),n=o}else n=QD(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(n.type==="Literal"){const s=n.value;return xA.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(n);gp(t)}function gp(t,e){const r=new Ln("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=B9+"#cannot-handle-mdx-estrees-without-createevaluater",r}function aSe(t){const e={};let r;for(r in t)xA.call(t,r)&&(e[lSe(r)]=t[r]);return e}function lSe(t){let e=t.replace(V1e,cSe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function cSe(t){return"-"+t.toLowerCase()}const Cw={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},uSe={};function EA(t,e){const r=uSe,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,s=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return z9(t,n,s)}function z9(t,e,r){if(dSe(t)){if("value"in t)return t.type==="html"&&!r?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return dO(t.children,e,r)}return Array.isArray(t)?dO(t,e,r):""}function dO(t,e,r){const n=[];let s=-1;for(;++s<t.length;)n[s]=z9(t[s],e,r);return n.join("")}function dSe(t){return!!(t&&typeof t=="object")}const hO=document.createElement("i");function CA(t){const e="&"+t+";";hO.innerHTML=e;const r=hO.textContent;return r.charCodeAt(r.length-1)===59&&t!=="semi"||r===e?!1:r}const B={carriageReturn:-5,lineFeed:-4,carriageReturnLineFeed:-3,horizontalTab:-2,virtualSpace:-1,eof:null,nul:0,ht:9,lf:10,vt:11,cr:13,space:32,exclamationMark:33,quotationMark:34,numberSign:35,percentSign:37,ampersand:38,apostrophe:39,leftParenthesis:40,rightParenthesis:41,asterisk:42,plusSign:43,comma:44,dash:45,dot:46,slash:47,digit0:48,digit1:49,digit2:50,digit3:51,digit4:52,digit5:53,digit6:54,digit7:55,digit8:56,digit9:57,colon:58,semicolon:59,lessThan:60,equalsTo:61,greaterThan:62,questionMark:63,atSign:64,uppercaseA:65,uppercaseH:72,uppercaseW:87,uppercaseX:88,leftSquareBracket:91,backslash:92,rightSquareBracket:93,caret:94,underscore:95,graveAccent:96,lowercaseA:97,lowercaseH:104,lowercaseW:119,lowercaseX:120,leftCurlyBrace:123,verticalBar:124,tilde:126,del:127,byteOrderMarker:65279,replacementCharacter:65533},We={attentionSideAfter:2,atxHeadingOpeningFenceSizeMax:6,autolinkDomainSizeMax:63,autolinkSchemeSizeMax:32,cdataOpeningString:"CDATA[",characterGroupPunctuation:2,characterGroupWhitespace:1,characterReferenceDecimalSizeMax:7,characterReferenceHexadecimalSizeMax:6,characterReferenceNamedSizeMax:31,codeFencedSequenceSizeMin:3,contentTypeContent:"content",contentTypeFlow:"flow",contentTypeString:"string",contentTypeText:"text",hardBreakPrefixSizeMin:2,htmlBasic:6,htmlCdata:5,htmlComment:2,htmlComplete:7,htmlDeclaration:4,htmlInstruction:3,htmlRawSizeMax:8,htmlRaw:1,linkResourceDestinationBalanceMax:32,linkReferenceSizeMax:999,listItemValueSizeMax:10,numericBaseDecimal:10,numericBaseHexadecimal:16,tabSize:4,thematicBreakMarkerCountMin:3,v8MaxSafeChunkSize:1e4},W={data:"data",whitespace:"whitespace",lineEnding:"lineEnding",lineEndingBlank:"lineEndingBlank",linePrefix:"linePrefix",lineSuffix:"lineSuffix",atxHeading:"atxHeading",atxHeadingSequence:"atxHeadingSequence",atxHeadingText:"atxHeadingText",autolink:"autolink",autolinkEmail:"autolinkEmail",autolinkMarker:"autolinkMarker",autolinkProtocol:"autolinkProtocol",characterEscape:"characterEscape",characterEscapeValue:"characterEscapeValue",characterReference:"characterReference",characterReferenceMarker:"characterReferenceMarker",characterReferenceMarkerNumeric:"characterReferenceMarkerNumeric",characterReferenceMarkerHexadecimal:"characterReferenceMarkerHexadecimal",characterReferenceValue:"characterReferenceValue",codeFenced:"codeFenced",codeFencedFence:"codeFencedFence",codeFencedFenceSequence:"codeFencedFenceSequence",codeFencedFenceInfo:"codeFencedFenceInfo",codeFencedFenceMeta:"codeFencedFenceMeta",codeFlowValue:"codeFlowValue",codeIndented:"codeIndented",codeText:"codeText",codeTextData:"codeTextData",codeTextPadding:"codeTextPadding",codeTextSequence:"codeTextSequence",content:"content",definition:"definition",definitionDestination:"definitionDestination",definitionDestinationLiteral:"definitionDestinationLiteral",definitionDestinationLiteralMarker:"definitionDestinationLiteralMarker",definitionDestinationRaw:"definitionDestinationRaw",definitionDestinationString:"definitionDestinationString",definitionLabel:"definitionLabel",definitionLabelMarker:"definitionLabelMarker",definitionLabelString:"definitionLabelString",definitionMarker:"definitionMarker",definitionTitle:"definitionTitle",definitionTitleMarker:"definitionTitleMarker",definitionTitleString:"definitionTitleString",emphasis:"emphasis",emphasisSequence:"emphasisSequence",emphasisText:"emphasisText",escapeMarker:"escapeMarker",hardBreakEscape:"hardBreakEscape",hardBreakTrailing:"hardBreakTrailing",htmlFlow:"htmlFlow",htmlFlowData:"htmlFlowData",htmlText:"htmlText",htmlTextData:"htmlTextData",image:"image",label:"label",labelText:"labelText",labelLink:"labelLink",labelImage:"labelImage",labelMarker:"labelMarker",labelImageMarker:"labelImageMarker",labelEnd:"labelEnd",link:"link",paragraph:"paragraph",reference:"reference",referenceMarker:"referenceMarker",referenceString:"referenceString",resource:"resource",resourceDestination:"resourceDestination",resourceDestinationLiteral:"resourceDestinationLiteral",resourceDestinationLiteralMarker:"resourceDestinationLiteralMarker",resourceDestinationRaw:"resourceDestinationRaw",resourceDestinationString:"resourceDestinationString",resourceMarker:"resourceMarker",resourceTitle:"resourceTitle",resourceTitleMarker:"resourceTitleMarker",resourceTitleString:"resourceTitleString",setextHeading:"setextHeading",setextHeadingText:"setextHeadingText",setextHeadingLine:"setextHeadingLine",setextHeadingLineSequence:"setextHeadingLineSequence",strong:"strong",strongSequence:"strongSequence",strongText:"strongText",thematicBreak:"thematicBreak",thematicBreakSequence:"thematicBreakSequence",blockQuote:"blockQuote",blockQuotePrefix:"blockQuotePrefix",blockQuoteMarker:"blockQuoteMarker",blockQuotePrefixWhitespace:"blockQuotePrefixWhitespace",listOrdered:"listOrdered",listUnordered:"listUnordered",listItemIndent:"listItemIndent",listItemMarker:"listItemMarker",listItemPrefix:"listItemPrefix",listItemPrefixWhitespace:"listItemPrefixWhitespace",listItemValue:"listItemValue",chunkContent:"chunkContent",chunkFlow:"chunkFlow",chunkText:"chunkText",chunkString:"chunkString"},Qi={ht:"	",lf:`
`,cr:"\r",space:" ",replacementCharacter:""};function Os(t,e,r,n){const s=t.length;let i=0,o;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,r=r>0?r:0,n.length<We.v8MaxSafeChunkSize)o=Array.from(n),o.unshift(e,r),t.splice(...o);else for(r&&t.splice(e,r);i<n.length;)o=n.slice(i,i+We.v8MaxSafeChunkSize),o.unshift(e,0),t.splice(...o),i+=We.v8MaxSafeChunkSize,e+=We.v8MaxSafeChunkSize}function qs(t,e){return t.length>0?(Os(t,t.length,0,e),t):e}const fO={}.hasOwnProperty;function W9(t){const e={};let r=-1;for(;++r<t.length;)hSe(e,t[r]);return e}function hSe(t,e){let r;for(r in e){const s=(fO.call(t,r)?t[r]:void 0)||(t[r]={}),i=e[r];let o;if(i)for(o in i){fO.call(s,o)||(s[o]=[]);const a=i[o];fSe(s[o],Array.isArray(a)?a:a?[a]:[])}}}function fSe(t,e){let r=-1;const n=[];for(;++r<e.length;)(e[r].add==="after"?t:n).push(e[r]);Os(t,0,0,n)}function V9(t,e){const r=Number.parseInt(t,e);return r<B.ht||r===B.vt||r>B.cr&&r<B.space||r>B.tilde&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?Qi.replacementCharacter:String.fromCodePoint(r)}function Si(t){return t.replace(/[\t\n\r ]+/g,Qi.space).replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Gn=El(/[A-Za-z]/),Nn=El(/[\dA-Za-z]/),pSe=El(/[#-'*+\--9=?A-Z^-~]/);function wy(t){return t!==null&&(t<B.space||t===B.del)}const HE=El(/\d/),mSe=El(/[\dA-Fa-f]/),gSe=El(/[!-/:-@[-`{-~]/);function Ze(t){return t!==null&&t<B.horizontalTab}function sr(t){return t!==null&&(t<B.nul||t===B.space)}function Pt(t){return t===B.horizontalTab||t===B.virtualSpace||t===B.space}const c_=El(/\p{P}|\p{S}/u),Ec=El(/\s/);function El(t){return e;function e(r){return r!==null&&r>-1&&t.test(String.fromCharCode(r))}}function Wd(t){const e=[];let r=-1,n=0,s=0;for(;++r<t.length;){const i=t.charCodeAt(r);let o="";if(i===B.percentSign&&Nn(t.charCodeAt(r+1))&&Nn(t.charCodeAt(r+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const a=t.charCodeAt(r+1);i<56320&&a>56319&&a<57344?(o=String.fromCharCode(i,a),s=1):o=Qi.replacementCharacter}else o=String.fromCharCode(i);o&&(e.push(t.slice(n,r),encodeURIComponent(o)),n=r+s+1,o=""),s&&(r+=s,s=0)}return e.join("")+t.slice(n)}function $t(t,e,r,n){const s=n?n-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(l){return Pt(l)?(t.enter(r),a(l)):e(l)}function a(l){return Pt(l)&&i++<s?(t.consume(l),a):(t.exit(r),e(l))}}const bSe={tokenize:ySe};function ySe(t){const e=t.attempt(this.parser.constructs.contentInitial,n,s);let r;return e;function n(a){if(ue(a===B.eof||Ze(a),"expected eol or eof"),a===B.eof){t.consume(a);return}return t.enter(W.lineEnding),t.consume(a),t.exit(W.lineEnding),$t(t,e,W.linePrefix)}function s(a){return ue(a!==B.eof&&!Ze(a),"expected anything other than a line ending or EOF"),t.enter(W.paragraph),i(a)}function i(a){const l=t.enter(W.chunkText,{contentType:We.contentTypeText,previous:r});return r&&(r.next=l),r=l,o(a)}function o(a){if(a===B.eof){t.exit(W.chunkText),t.exit(W.paragraph),t.consume(a);return}return Ze(a)?(t.consume(a),t.exit(W.chunkText),i):(t.consume(a),o)}}const vSe={tokenize:_Se},pO={tokenize:xSe};function _Se(t){const e=this,r=[];let n=0,s,i,o;return a;function a(_){if(n<r.length){const x=r[n];return e.containerState=x[1],ue(x[0].continuation,"expected `continuation` to be defined on container construct"),t.attempt(x[0].continuation,l,c)(_)}return c(_)}function l(_){if(ue(e.containerState,"expected `containerState` to be defined after continuation"),n++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&v();const x=e.events.length;let w=x,S;for(;w--;)if(e.events[w][0]==="exit"&&e.events[w][1].type===W.chunkFlow){S=e.events[w][1].end;break}ue(S,"could not find previous flow chunk"),y(n);let T=x;for(;T<e.events.length;)e.events[T][1].end={...S},T++;return Os(e.events,w+1,0,e.events.slice(x)),e.events.length=T,c(_)}return a(_)}function c(_){if(n===r.length){if(!s)return h(_);if(s.currentConstruct&&s.currentConstruct.concrete)return b(_);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(pO,u,d)(_)}function u(_){return s&&v(),y(n),h(_)}function d(_){return e.parser.lazy[e.now().line]=n!==r.length,o=e.now().offset,b(_)}function h(_){return e.containerState={},t.attempt(pO,f,b)(_)}function f(_){return ue(e.currentConstruct,"expected `currentConstruct` to be defined on tokenizer"),ue(e.containerState,"expected `containerState` to be defined on tokenizer"),n++,r.push([e.currentConstruct,e.containerState]),h(_)}function b(_){if(_===B.eof){s&&v(),y(0),t.consume(_);return}return s=s||e.parser.flow(e.now()),t.enter(W.chunkFlow,{_tokenizer:s,contentType:We.contentTypeFlow,previous:i}),m(_)}function m(_){if(_===B.eof){g(t.exit(W.chunkFlow),!0),y(0),t.consume(_);return}return Ze(_)?(t.consume(_),g(t.exit(W.chunkFlow)),n=0,e.interrupt=void 0,a):(t.consume(_),m)}function g(_,x){ue(s,"expected `childFlow` to be defined when continuing");const w=e.sliceStream(_);if(x&&w.push(null),_.previous=i,i&&(i.next=_),i=_,s.defineSkip(_.start),s.write(w),e.parser.lazy[_.start.line]){let S=s.events.length;for(;S--;)if(s.events[S][1].start.offset<o&&(!s.events[S][1].end||s.events[S][1].end.offset>o))return;const T=e.events.length;let E=T,C,A;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type===W.chunkFlow){if(C){A=e.events[E][1].end;break}C=!0}for(ue(A,"could not find previous flow chunk"),y(n),S=T;S<e.events.length;)e.events[S][1].end={...A},S++;Os(e.events,E+1,0,e.events.slice(T)),e.events.length=S}}function y(_){let x=r.length;for(;x-- >_;){const w=r[x];e.containerState=w[1],ue(w[0].exit,"expected `exit` to be defined on container construct"),w[0].exit.call(e,t)}r.length=_}function v(){ue(e.containerState,"expected `containerState` to be defined when closing flow"),ue(s,"expected `childFlow` to be defined when closing it"),s.write([B.eof]),i=void 0,s=void 0,e.containerState._closeFlow=void 0}}function xSe(t,e,r){return ue(this.parser.constructs.disable.null,"expected `disable.null` to be populated"),$t(t,t.attempt(this.parser.constructs.document,e,r),W.linePrefix,this.parser.constructs.disable.null.includes("codeIndented")?void 0:We.tabSize)}function vd(t){if(t===B.eof||sr(t)||Ec(t))return We.characterGroupWhitespace;if(c_(t))return We.characterGroupPunctuation}function u_(t,e,r){const n=[];let s=-1;for(;++s<t.length;){const i=t[s].resolveAll;i&&!n.includes(i)&&(e=i(e,r),n.push(i))}return e}const zE={name:"attention",resolveAll:wSe,tokenize:SSe};function wSe(t,e){let r=-1,n,s,i,o,a,l,c,u;for(;++r<t.length;)if(t[r][0]==="enter"&&t[r][1].type==="attentionSequence"&&t[r][1]._close){for(n=r;n--;)if(t[n][0]==="exit"&&t[n][1].type==="attentionSequence"&&t[n][1]._open&&e.sliceSerialize(t[n][1]).charCodeAt(0)===e.sliceSerialize(t[r][1]).charCodeAt(0)){if((t[n][1]._close||t[r][1]._open)&&(t[r][1].end.offset-t[r][1].start.offset)%3&&!((t[n][1].end.offset-t[n][1].start.offset+t[r][1].end.offset-t[r][1].start.offset)%3))continue;l=t[n][1].end.offset-t[n][1].start.offset>1&&t[r][1].end.offset-t[r][1].start.offset>1?2:1;const d={...t[n][1].end},h={...t[r][1].start};mO(d,-l),mO(h,l),o={type:l>1?W.strongSequence:W.emphasisSequence,start:d,end:{...t[n][1].end}},a={type:l>1?W.strongSequence:W.emphasisSequence,start:{...t[r][1].start},end:h},i={type:l>1?W.strongText:W.emphasisText,start:{...t[n][1].end},end:{...t[r][1].start}},s={type:l>1?W.strong:W.emphasis,start:{...o.start},end:{...a.end}},t[n][1].end={...o.start},t[r][1].start={...a.end},c=[],t[n][1].end.offset-t[n][1].start.offset&&(c=qs(c,[["enter",t[n][1],e],["exit",t[n][1],e]])),c=qs(c,[["enter",s,e],["enter",o,e],["exit",o,e],["enter",i,e]]),ue(e.parser.constructs.insideSpan.null,"expected `insideSpan` to be populated"),c=qs(c,u_(e.parser.constructs.insideSpan.null,t.slice(n+1,r),e)),c=qs(c,[["exit",i,e],["enter",a,e],["exit",a,e],["exit",s,e]]),t[r][1].end.offset-t[r][1].start.offset?(u=2,c=qs(c,[["enter",t[r][1],e],["exit",t[r][1],e]])):u=0,Os(t,n-1,r-n+3,c),r=n+c.length-u-2;break}}for(r=-1;++r<t.length;)t[r][1].type==="attentionSequence"&&(t[r][1].type="data");return t}function SSe(t,e){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,s=vd(n);let i;return o;function o(l){return ue(l===B.asterisk||l===B.underscore,"expected asterisk or underscore"),i=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===i)return t.consume(l),a;const c=t.exit("attentionSequence"),u=vd(l);ue(r,"expected `attentionMarkers` to be populated");const d=!u||u===We.characterGroupPunctuation&&s||r.includes(l),h=!s||s===We.characterGroupPunctuation&&u||r.includes(n);return c._open=!!(i===B.asterisk?d:d&&(s||!h)),c._close=!!(i===B.asterisk?h:h&&(u||!d)),e(l)}}function mO(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const ESe={name:"autolink",tokenize:CSe};function CSe(t,e,r){let n=0;return s;function s(f){return ue(f===B.lessThan,"expected `<`"),t.enter(W.autolink),t.enter(W.autolinkMarker),t.consume(f),t.exit(W.autolinkMarker),t.enter(W.autolinkProtocol),i}function i(f){return Gn(f)?(t.consume(f),o):f===B.atSign?r(f):c(f)}function o(f){return f===B.plusSign||f===B.dash||f===B.dot||Nn(f)?(n=1,a(f)):c(f)}function a(f){return f===B.colon?(t.consume(f),n=0,l):(f===B.plusSign||f===B.dash||f===B.dot||Nn(f))&&n++<We.autolinkSchemeSizeMax?(t.consume(f),a):(n=0,c(f))}function l(f){return f===B.greaterThan?(t.exit(W.autolinkProtocol),t.enter(W.autolinkMarker),t.consume(f),t.exit(W.autolinkMarker),t.exit(W.autolink),e):f===B.eof||f===B.space||f===B.lessThan||wy(f)?r(f):(t.consume(f),l)}function c(f){return f===B.atSign?(t.consume(f),u):pSe(f)?(t.consume(f),c):r(f)}function u(f){return Nn(f)?d(f):r(f)}function d(f){return f===B.dot?(t.consume(f),n=0,u):f===B.greaterThan?(t.exit(W.autolinkProtocol).type=W.autolinkEmail,t.enter(W.autolinkMarker),t.consume(f),t.exit(W.autolinkMarker),t.exit(W.autolink),e):h(f)}function h(f){if((f===B.dash||Nn(f))&&n++<We.autolinkDomainSizeMax){const b=f===B.dash?h:d;return t.consume(f),b}return r(f)}}const lm={partial:!0,tokenize:TSe};function TSe(t,e,r){return n;function n(i){return Pt(i)?$t(t,s,W.linePrefix)(i):s(i)}function s(i){return i===B.eof||Ze(i)?e(i):r(i)}}const G9={continuation:{tokenize:ASe},exit:RSe,name:"blockQuote",tokenize:kSe};function kSe(t,e,r){const n=this;return s;function s(o){if(o===B.greaterThan){const a=n.containerState;return ue(a,"expected `containerState` to be defined in container"),a.open||(t.enter(W.blockQuote,{_container:!0}),a.open=!0),t.enter(W.blockQuotePrefix),t.enter(W.blockQuoteMarker),t.consume(o),t.exit(W.blockQuoteMarker),i}return r(o)}function i(o){return Pt(o)?(t.enter(W.blockQuotePrefixWhitespace),t.consume(o),t.exit(W.blockQuotePrefixWhitespace),t.exit(W.blockQuotePrefix),e):(t.exit(W.blockQuotePrefix),e(o))}}function ASe(t,e,r){const n=this;return s;function s(o){return Pt(o)?(ue(n.parser.constructs.disable.null,"expected `disable.null` to be populated"),$t(t,i,W.linePrefix,n.parser.constructs.disable.null.includes("codeIndented")?void 0:We.tabSize)(o)):i(o)}function i(o){return t.attempt(G9,e,r)(o)}}function RSe(t){t.exit(W.blockQuote)}const q9={name:"characterEscape",tokenize:PSe};function PSe(t,e,r){return n;function n(i){return ue(i===B.backslash,"expected `\\`"),t.enter(W.characterEscape),t.enter(W.escapeMarker),t.consume(i),t.exit(W.escapeMarker),s}function s(i){return gSe(i)?(t.enter(W.characterEscapeValue),t.consume(i),t.exit(W.characterEscapeValue),t.exit(W.characterEscape),e):r(i)}}const K9={name:"characterReference",tokenize:ISe};function ISe(t,e,r){const n=this;let s=0,i,o;return a;function a(d){return ue(d===B.ampersand,"expected `&`"),t.enter(W.characterReference),t.enter(W.characterReferenceMarker),t.consume(d),t.exit(W.characterReferenceMarker),l}function l(d){return d===B.numberSign?(t.enter(W.characterReferenceMarkerNumeric),t.consume(d),t.exit(W.characterReferenceMarkerNumeric),c):(t.enter(W.characterReferenceValue),i=We.characterReferenceNamedSizeMax,o=Nn,u(d))}function c(d){return d===B.uppercaseX||d===B.lowercaseX?(t.enter(W.characterReferenceMarkerHexadecimal),t.consume(d),t.exit(W.characterReferenceMarkerHexadecimal),t.enter(W.characterReferenceValue),i=We.characterReferenceHexadecimalSizeMax,o=mSe,u):(t.enter(W.characterReferenceValue),i=We.characterReferenceDecimalSizeMax,o=HE,u(d))}function u(d){if(d===B.semicolon&&s){const h=t.exit(W.characterReferenceValue);return o===Nn&&!CA(n.sliceSerialize(h))?r(d):(t.enter(W.characterReferenceMarker),t.consume(d),t.exit(W.characterReferenceMarker),t.exit(W.characterReference),e)}return o(d)&&s++<i?(t.consume(d),u):r(d)}}const gO={partial:!0,tokenize:DSe},bO={concrete:!0,name:"codeFenced",tokenize:NSe};function NSe(t,e,r){const n=this,s={partial:!0,tokenize:w};let i=0,o=0,a;return l;function l(S){return c(S)}function c(S){ue(S===B.graveAccent||S===B.tilde,"expected `` ` `` or `~`");const T=n.events[n.events.length-1];return i=T&&T[1].type===W.linePrefix?T[2].sliceSerialize(T[1],!0).length:0,a=S,t.enter(W.codeFenced),t.enter(W.codeFencedFence),t.enter(W.codeFencedFenceSequence),u(S)}function u(S){return S===a?(o++,t.consume(S),u):o<We.codeFencedSequenceSizeMin?r(S):(t.exit(W.codeFencedFenceSequence),Pt(S)?$t(t,d,W.whitespace)(S):d(S))}function d(S){return S===B.eof||Ze(S)?(t.exit(W.codeFencedFence),n.interrupt?e(S):t.check(gO,m,x)(S)):(t.enter(W.codeFencedFenceInfo),t.enter(W.chunkString,{contentType:We.contentTypeString}),h(S))}function h(S){return S===B.eof||Ze(S)?(t.exit(W.chunkString),t.exit(W.codeFencedFenceInfo),d(S)):Pt(S)?(t.exit(W.chunkString),t.exit(W.codeFencedFenceInfo),$t(t,f,W.whitespace)(S)):S===B.graveAccent&&S===a?r(S):(t.consume(S),h)}function f(S){return S===B.eof||Ze(S)?d(S):(t.enter(W.codeFencedFenceMeta),t.enter(W.chunkString,{contentType:We.contentTypeString}),b(S))}function b(S){return S===B.eof||Ze(S)?(t.exit(W.chunkString),t.exit(W.codeFencedFenceMeta),d(S)):S===B.graveAccent&&S===a?r(S):(t.consume(S),b)}function m(S){return ue(Ze(S),"expected eol"),t.attempt(s,x,g)(S)}function g(S){return ue(Ze(S),"expected eol"),t.enter(W.lineEnding),t.consume(S),t.exit(W.lineEnding),y}function y(S){return i>0&&Pt(S)?$t(t,v,W.linePrefix,i+1)(S):v(S)}function v(S){return S===B.eof||Ze(S)?t.check(gO,m,x)(S):(t.enter(W.codeFlowValue),_(S))}function _(S){return S===B.eof||Ze(S)?(t.exit(W.codeFlowValue),v(S)):(t.consume(S),_)}function x(S){return t.exit(W.codeFenced),e(S)}function w(S,T,E){let C=0;return A;function A(F){return ue(Ze(F),"expected eol"),S.enter(W.lineEnding),S.consume(F),S.exit(W.lineEnding),I}function I(F){return ue(n.parser.constructs.disable.null,"expected `disable.null` to be populated"),S.enter(W.codeFencedFence),Pt(F)?$t(S,P,W.linePrefix,n.parser.constructs.disable.null.includes("codeIndented")?void 0:We.tabSize)(F):P(F)}function P(F){return F===a?(S.enter(W.codeFencedFenceSequence),D(F)):E(F)}function D(F){return F===a?(C++,S.consume(F),D):C>=o?(S.exit(W.codeFencedFenceSequence),Pt(F)?$t(S,R,W.whitespace)(F):R(F)):E(F)}function R(F){return F===B.eof||Ze(F)?(S.exit(W.codeFencedFence),T(F)):E(F)}}}function DSe(t,e,r){const n=this;return s;function s(o){return o===B.eof?r(o):(ue(Ze(o),"expected eol"),t.enter(W.lineEnding),t.consume(o),t.exit(W.lineEnding),i)}function i(o){return n.parser.lazy[n.now().line]?r(o):e(o)}}const Tw={name:"codeIndented",tokenize:LSe},OSe={partial:!0,tokenize:MSe};function LSe(t,e,r){const n=this;return s;function s(c){return ue(Pt(c)),t.enter(W.codeIndented),$t(t,i,W.linePrefix,We.tabSize+1)(c)}function i(c){const u=n.events[n.events.length-1];return u&&u[1].type===W.linePrefix&&u[2].sliceSerialize(u[1],!0).length>=We.tabSize?o(c):r(c)}function o(c){return c===B.eof?l(c):Ze(c)?t.attempt(OSe,o,l)(c):(t.enter(W.codeFlowValue),a(c))}function a(c){return c===B.eof||Ze(c)?(t.exit(W.codeFlowValue),o(c)):(t.consume(c),a)}function l(c){return t.exit(W.codeIndented),e(c)}}function MSe(t,e,r){const n=this;return s;function s(o){return n.parser.lazy[n.now().line]?r(o):Ze(o)?(t.enter(W.lineEnding),t.consume(o),t.exit(W.lineEnding),s):$t(t,i,W.linePrefix,We.tabSize+1)(o)}function i(o){const a=n.events[n.events.length-1];return a&&a[1].type===W.linePrefix&&a[2].sliceSerialize(a[1],!0).length>=We.tabSize?e(o):Ze(o)?s(o):r(o)}}const jSe={name:"codeText",previous:Y9,resolve:FSe,tokenize:BSe};function FSe(t){let e=t.length-4,r=3,n,s;if((t[r][1].type===W.lineEnding||t[r][1].type==="space")&&(t[e][1].type===W.lineEnding||t[e][1].type==="space")){for(n=r;++n<e;)if(t[n][1].type===W.codeTextData){t[r][1].type=W.codeTextPadding,t[e][1].type=W.codeTextPadding,r+=2,e-=2;break}}for(n=r-1,e++;++n<=e;)s===void 0?n!==e&&t[n][1].type!==W.lineEnding&&(s=n):(n===e||t[n][1].type===W.lineEnding)&&(t[s][1].type=W.codeTextData,n!==s+2&&(t[s][1].end=t[n-1][1].end,t.splice(s+2,n-s-2),e-=n-s-2,n=s+2),s=void 0);return t}function Y9(t){return t!==B.graveAccent||this.events[this.events.length-1][1].type===W.characterEscape}function BSe(t,e,r){const n=this;let s=0,i,o;return a;function a(h){return ue(h===B.graveAccent,"expected `` ` ``"),ue(Y9.call(n,n.previous),"expected correct previous"),t.enter(W.codeText),t.enter(W.codeTextSequence),l(h)}function l(h){return h===B.graveAccent?(t.consume(h),s++,l):(t.exit(W.codeTextSequence),c(h))}function c(h){return h===B.eof?r(h):h===B.space?(t.enter("space"),t.consume(h),t.exit("space"),c):h===B.graveAccent?(o=t.enter(W.codeTextSequence),i=0,d(h)):Ze(h)?(t.enter(W.lineEnding),t.consume(h),t.exit(W.lineEnding),c):(t.enter(W.codeTextData),u(h))}function u(h){return h===B.eof||h===B.space||h===B.graveAccent||Ze(h)?(t.exit(W.codeTextData),c(h)):(t.consume(h),u)}function d(h){return h===B.graveAccent?(t.consume(h),i++,d):i===s?(t.exit(W.codeTextSequence),t.exit(W.codeText),e(h)):(o.type=W.codeTextData,u(h))}}class $Se{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,r,n){const s=r||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return n&&_h(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),_h(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),_h(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const r=this.left.splice(e,Number.POSITIVE_INFINITY);_h(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);_h(this.left,r.reverse())}}}function _h(t,e){let r=0;if(e.length<We.v8MaxSafeChunkSize)t.push(...e);else for(;r<e.length;)t.push(...e.slice(r,r+We.v8MaxSafeChunkSize)),r+=We.v8MaxSafeChunkSize}function X9(t){const e={};let r=-1,n,s,i,o,a,l,c;const u=new $Se(t);for(;++r<u.length;){for(;r in e;)r=e[r];if(n=u.get(r),r&&n[1].type===W.chunkFlow&&u.get(r-1)[1].type===W.listItemPrefix&&(ue(n[1]._tokenizer,"expected `_tokenizer` on subtokens"),l=n[1]._tokenizer.events,i=0,i<l.length&&l[i][1].type===W.lineEndingBlank&&(i+=2),i<l.length&&l[i][1].type===W.content))for(;++i<l.length&&l[i][1].type!==W.content;)l[i][1].type===W.chunkText&&(l[i][1]._isInFirstContentOfListItem=!0,i++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,USe(u,r)),r=e[r],c=!0);else if(n[1]._container){for(i=r,s=void 0;i--;)if(o=u.get(i),o[1].type===W.lineEnding||o[1].type===W.lineEndingBlank)o[0]==="enter"&&(s&&(u.get(s)[1].type=W.lineEndingBlank),o[1].type=W.lineEnding,s=i);else if(!(o[1].type===W.linePrefix||o[1].type===W.listItemIndent))break;s&&(n[1].end={...u.get(s)[1].start},a=u.slice(s,r),a.unshift(n),u.splice(s,r-s+1,a))}}return Os(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function USe(t,e){const r=t.get(e)[1],n=t.get(e)[2];let s=e-1;const i=[];ue(r.contentType,"expected `contentType` on subtokens");let o=r._tokenizer;o||(o=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,d,h=-1,f=r,b=0,m=0;const g=[m];for(;f;){for(;t.get(++s)[1]!==f;);ue(!d||f.previous===d,"expected previous to match"),ue(!d||d.next===f,"expected next to match"),i.push(s),f._tokenizer||(u=n.sliceStream(f),f.next||u.push(B.eof),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=r;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(ue(f,"expected a current token"),m=h+1,g.push(m),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0,ue(!f.next,"expected no next token")):g.pop(),h=g.length;h--;){const y=a.slice(g[h],g[h+1]),v=i.pop();ue(v!==void 0,"expected a start position when splicing"),l.push([v,v+y.length-1]),t.splice(v,2,y)}for(l.reverse(),h=-1;++h<l.length;)c[b+l[h][0]]=b+l[h][1],b+=l[h][1]-l[h][0]-1;return c}const HSe={resolve:WSe,tokenize:VSe},zSe={partial:!0,tokenize:GSe};function WSe(t){return X9(t),t}function VSe(t,e){let r;return n;function n(a){return ue(a!==B.eof&&!Ze(a),"expected no eof or eol"),t.enter(W.content),r=t.enter(W.chunkContent,{contentType:We.contentTypeContent}),s(a)}function s(a){return a===B.eof?i(a):Ze(a)?t.check(zSe,o,i)(a):(t.consume(a),s)}function i(a){return t.exit(W.chunkContent),t.exit(W.content),e(a)}function o(a){return ue(Ze(a),"expected eol"),t.consume(a),t.exit(W.chunkContent),ue(r,"expected previous token"),r.next=t.enter(W.chunkContent,{contentType:We.contentTypeContent,previous:r}),r=r.next,s}}function GSe(t,e,r){const n=this;return s;function s(o){return ue(Ze(o),"expected a line ending"),t.exit(W.chunkContent),t.enter(W.lineEnding),t.consume(o),t.exit(W.lineEnding),$t(t,i,W.linePrefix)}function i(o){if(o===B.eof||Ze(o))return r(o);ue(n.parser.constructs.disable.null,"expected `disable.null` to be populated");const a=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type===W.linePrefix&&a[2].sliceSerialize(a[1],!0).length>=We.tabSize?e(o):t.interrupt(n.parser.constructs.flow,r,e)(o)}}function J9(t,e,r,n,s,i,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(y){return y===B.lessThan?(t.enter(n),t.enter(s),t.enter(i),t.consume(y),t.exit(i),h):y===B.eof||y===B.space||y===B.rightParenthesis||wy(y)?r(y):(t.enter(n),t.enter(o),t.enter(a),t.enter(W.chunkString,{contentType:We.contentTypeString}),m(y))}function h(y){return y===B.greaterThan?(t.enter(i),t.consume(y),t.exit(i),t.exit(s),t.exit(n),e):(t.enter(a),t.enter(W.chunkString,{contentType:We.contentTypeString}),f(y))}function f(y){return y===B.greaterThan?(t.exit(W.chunkString),t.exit(a),h(y)):y===B.eof||y===B.lessThan||Ze(y)?r(y):(t.consume(y),y===B.backslash?b:f)}function b(y){return y===B.lessThan||y===B.greaterThan||y===B.backslash?(t.consume(y),f):f(y)}function m(y){return!u&&(y===B.eof||y===B.rightParenthesis||sr(y))?(t.exit(W.chunkString),t.exit(a),t.exit(o),t.exit(n),e(y)):u<c&&y===B.leftParenthesis?(t.consume(y),u++,m):y===B.rightParenthesis?(t.consume(y),u--,m):y===B.eof||y===B.space||y===B.leftParenthesis||wy(y)?r(y):(t.consume(y),y===B.backslash?g:m)}function g(y){return y===B.leftParenthesis||y===B.rightParenthesis||y===B.backslash?(t.consume(y),m):m(y)}}function Z9(t,e,r,n,s,i){const o=this;let a=0,l;return c;function c(f){return ue(f===B.leftSquareBracket,"expected `[`"),t.enter(n),t.enter(s),t.consume(f),t.exit(s),t.enter(i),u}function u(f){return a>We.linkReferenceSizeMax||f===B.eof||f===B.leftSquareBracket||f===B.rightSquareBracket&&!l||f===B.caret&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?r(f):f===B.rightSquareBracket?(t.exit(i),t.enter(s),t.consume(f),t.exit(s),t.exit(n),e):Ze(f)?(t.enter(W.lineEnding),t.consume(f),t.exit(W.lineEnding),u):(t.enter(W.chunkString,{contentType:We.contentTypeString}),d(f))}function d(f){return f===B.eof||f===B.leftSquareBracket||f===B.rightSquareBracket||Ze(f)||a++>We.linkReferenceSizeMax?(t.exit(W.chunkString),u(f)):(t.consume(f),l||(l=!Pt(f)),f===B.backslash?h:d)}function h(f){return f===B.leftSquareBracket||f===B.backslash||f===B.rightSquareBracket?(t.consume(f),a++,d):d(f)}}function Q9(t,e,r,n,s,i){let o;return a;function a(h){return h===B.quotationMark||h===B.apostrophe||h===B.leftParenthesis?(t.enter(n),t.enter(s),t.consume(h),t.exit(s),o=h===B.leftParenthesis?B.rightParenthesis:h,l):r(h)}function l(h){return h===o?(t.enter(s),t.consume(h),t.exit(s),t.exit(n),e):(t.enter(i),c(h))}function c(h){return h===o?(t.exit(i),l(o)):h===B.eof?r(h):Ze(h)?(t.enter(W.lineEnding),t.consume(h),t.exit(W.lineEnding),$t(t,c,W.linePrefix)):(t.enter(W.chunkString,{contentType:We.contentTypeString}),u(h))}function u(h){return h===o||h===B.eof||Ze(h)?(t.exit(W.chunkString),c(h)):(t.consume(h),h===B.backslash?d:u)}function d(h){return h===o||h===B.backslash?(t.consume(h),u):u(h)}}function mf(t,e){let r;return n;function n(s){return Ze(s)?(t.enter(W.lineEnding),t.consume(s),t.exit(W.lineEnding),r=!0,n):Pt(s)?$t(t,n,r?W.linePrefix:W.lineSuffix)(s):e(s)}}const qSe={name:"definition",tokenize:YSe},KSe={partial:!0,tokenize:XSe};function YSe(t,e,r){const n=this;let s;return i;function i(f){return t.enter(W.definition),o(f)}function o(f){return ue(f===B.leftSquareBracket,"expected `[`"),Z9.call(n,t,a,r,W.definitionLabel,W.definitionLabelMarker,W.definitionLabelString)(f)}function a(f){return s=Si(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),f===B.colon?(t.enter(W.definitionMarker),t.consume(f),t.exit(W.definitionMarker),l):r(f)}function l(f){return sr(f)?mf(t,c)(f):c(f)}function c(f){return J9(t,u,r,W.definitionDestination,W.definitionDestinationLiteral,W.definitionDestinationLiteralMarker,W.definitionDestinationRaw,W.definitionDestinationString)(f)}function u(f){return t.attempt(KSe,d,d)(f)}function d(f){return Pt(f)?$t(t,h,W.whitespace)(f):h(f)}function h(f){return f===B.eof||Ze(f)?(t.exit(W.definition),n.parser.defined.push(s),e(f)):r(f)}}function XSe(t,e,r){return n;function n(a){return sr(a)?mf(t,s)(a):r(a)}function s(a){return Q9(t,i,r,W.definitionTitle,W.definitionTitleMarker,W.definitionTitleString)(a)}function i(a){return Pt(a)?$t(t,o,W.whitespace)(a):o(a)}function o(a){return a===B.eof||Ze(a)?e(a):r(a)}}const JSe={name:"hardBreakEscape",tokenize:ZSe};function ZSe(t,e,r){return n;function n(i){return ue(i===B.backslash,"expected `\\`"),t.enter(W.hardBreakEscape),t.consume(i),s}function s(i){return Ze(i)?(t.exit(W.hardBreakEscape),e(i)):r(i)}}const QSe={name:"headingAtx",resolve:eEe,tokenize:tEe};function eEe(t,e){let r=t.length-2,n=3,s,i;return t[n][1].type===W.whitespace&&(n+=2),r-2>n&&t[r][1].type===W.whitespace&&(r-=2),t[r][1].type===W.atxHeadingSequence&&(n===r-1||r-4>n&&t[r-2][1].type===W.whitespace)&&(r-=n+1===r?2:4),r>n&&(s={type:W.atxHeadingText,start:t[n][1].start,end:t[r][1].end},i={type:W.chunkText,start:t[n][1].start,end:t[r][1].end,contentType:We.contentTypeText},Os(t,n,r-n+1,[["enter",s,e],["enter",i,e],["exit",i,e],["exit",s,e]])),t}function tEe(t,e,r){let n=0;return s;function s(u){return t.enter(W.atxHeading),i(u)}function i(u){return ue(u===B.numberSign,"expected `#`"),t.enter(W.atxHeadingSequence),o(u)}function o(u){return u===B.numberSign&&n++<We.atxHeadingOpeningFenceSizeMax?(t.consume(u),o):u===B.eof||sr(u)?(t.exit(W.atxHeadingSequence),a(u)):r(u)}function a(u){return u===B.numberSign?(t.enter(W.atxHeadingSequence),l(u)):u===B.eof||Ze(u)?(t.exit(W.atxHeading),e(u)):Pt(u)?$t(t,a,W.whitespace)(u):(t.enter(W.atxHeadingText),c(u))}function l(u){return u===B.numberSign?(t.consume(u),l):(t.exit(W.atxHeadingSequence),a(u))}function c(u){return u===B.eof||u===B.numberSign||sr(u)?(t.exit(W.atxHeadingText),a(u)):(t.consume(u),c)}}const rEe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],yO=["pre","script","style","textarea"],nEe={concrete:!0,name:"htmlFlow",resolveTo:oEe,tokenize:aEe},sEe={partial:!0,tokenize:cEe},iEe={partial:!0,tokenize:lEe};function oEe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type===W.htmlFlow););return e>1&&t[e-2][1].type===W.linePrefix&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function aEe(t,e,r){const n=this;let s,i,o,a,l;return c;function c(U){return u(U)}function u(U){return ue(U===B.lessThan,"expected `<`"),t.enter(W.htmlFlow),t.enter(W.htmlFlowData),t.consume(U),d}function d(U){return U===B.exclamationMark?(t.consume(U),h):U===B.slash?(t.consume(U),i=!0,m):U===B.questionMark?(t.consume(U),s=We.htmlInstruction,n.interrupt?e:O):Gn(U)?(ue(U!==null),t.consume(U),o=String.fromCharCode(U),g):r(U)}function h(U){return U===B.dash?(t.consume(U),s=We.htmlComment,f):U===B.leftSquareBracket?(t.consume(U),s=We.htmlCdata,a=0,b):Gn(U)?(t.consume(U),s=We.htmlDeclaration,n.interrupt?e:O):r(U)}function f(U){return U===B.dash?(t.consume(U),n.interrupt?e:O):r(U)}function b(U){const ee=We.cdataOpeningString;return U===ee.charCodeAt(a++)?(t.consume(U),a===ee.length?n.interrupt?e:P:b):r(U)}function m(U){return Gn(U)?(ue(U!==null),t.consume(U),o=String.fromCharCode(U),g):r(U)}function g(U){if(U===B.eof||U===B.slash||U===B.greaterThan||sr(U)){const ee=U===B.slash,X=o.toLowerCase();return!ee&&!i&&yO.includes(X)?(s=We.htmlRaw,n.interrupt?e(U):P(U)):rEe.includes(o.toLowerCase())?(s=We.htmlBasic,ee?(t.consume(U),y):n.interrupt?e(U):P(U)):(s=We.htmlComplete,n.interrupt&&!n.parser.lazy[n.now().line]?r(U):i?v(U):_(U))}return U===B.dash||Nn(U)?(t.consume(U),o+=String.fromCharCode(U),g):r(U)}function y(U){return U===B.greaterThan?(t.consume(U),n.interrupt?e:P):r(U)}function v(U){return Pt(U)?(t.consume(U),v):A(U)}function _(U){return U===B.slash?(t.consume(U),A):U===B.colon||U===B.underscore||Gn(U)?(t.consume(U),x):Pt(U)?(t.consume(U),_):A(U)}function x(U){return U===B.dash||U===B.dot||U===B.colon||U===B.underscore||Nn(U)?(t.consume(U),x):w(U)}function w(U){return U===B.equalsTo?(t.consume(U),S):Pt(U)?(t.consume(U),w):_(U)}function S(U){return U===B.eof||U===B.lessThan||U===B.equalsTo||U===B.greaterThan||U===B.graveAccent?r(U):U===B.quotationMark||U===B.apostrophe?(t.consume(U),l=U,T):Pt(U)?(t.consume(U),S):E(U)}function T(U){return U===l?(t.consume(U),l=null,C):U===B.eof||Ze(U)?r(U):(t.consume(U),T)}function E(U){return U===B.eof||U===B.quotationMark||U===B.apostrophe||U===B.slash||U===B.lessThan||U===B.equalsTo||U===B.greaterThan||U===B.graveAccent||sr(U)?w(U):(t.consume(U),E)}function C(U){return U===B.slash||U===B.greaterThan||Pt(U)?_(U):r(U)}function A(U){return U===B.greaterThan?(t.consume(U),I):r(U)}function I(U){return U===B.eof||Ze(U)?P(U):Pt(U)?(t.consume(U),I):r(U)}function P(U){return U===B.dash&&s===We.htmlComment?(t.consume(U),G):U===B.lessThan&&s===We.htmlRaw?(t.consume(U),z):U===B.greaterThan&&s===We.htmlDeclaration?(t.consume(U),$):U===B.questionMark&&s===We.htmlInstruction?(t.consume(U),O):U===B.rightSquareBracket&&s===We.htmlCdata?(t.consume(U),L):Ze(U)&&(s===We.htmlBasic||s===We.htmlComplete)?(t.exit(W.htmlFlowData),t.check(sEe,H,D)(U)):U===B.eof||Ze(U)?(t.exit(W.htmlFlowData),D(U)):(t.consume(U),P)}function D(U){return t.check(iEe,R,H)(U)}function R(U){return ue(Ze(U)),t.enter(W.lineEnding),t.consume(U),t.exit(W.lineEnding),F}function F(U){return U===B.eof||Ze(U)?D(U):(t.enter(W.htmlFlowData),P(U))}function G(U){return U===B.dash?(t.consume(U),O):P(U)}function z(U){return U===B.slash?(t.consume(U),o="",K):P(U)}function K(U){if(U===B.greaterThan){const ee=o.toLowerCase();return yO.includes(ee)?(t.consume(U),$):P(U)}return Gn(U)&&o.length<We.htmlRawSizeMax?(ue(U!==null),t.consume(U),o+=String.fromCharCode(U),K):P(U)}function L(U){return U===B.rightSquareBracket?(t.consume(U),O):P(U)}function O(U){return U===B.greaterThan?(t.consume(U),$):U===B.dash&&s===We.htmlComment?(t.consume(U),O):P(U)}function $(U){return U===B.eof||Ze(U)?(t.exit(W.htmlFlowData),H(U)):(t.consume(U),$)}function H(U){return t.exit(W.htmlFlow),e(U)}}function lEe(t,e,r){const n=this;return s;function s(o){return Ze(o)?(t.enter(W.lineEnding),t.consume(o),t.exit(W.lineEnding),i):r(o)}function i(o){return n.parser.lazy[n.now().line]?r(o):e(o)}}function cEe(t,e,r){return n;function n(s){return ue(Ze(s),"expected a line ending"),t.enter(W.lineEnding),t.consume(s),t.exit(W.lineEnding),t.attempt(lm,e,r)}}const uEe={name:"htmlText",tokenize:dEe};function dEe(t,e,r){const n=this;let s,i,o;return a;function a(O){return ue(O===B.lessThan,"expected `<`"),t.enter(W.htmlText),t.enter(W.htmlTextData),t.consume(O),l}function l(O){return O===B.exclamationMark?(t.consume(O),c):O===B.slash?(t.consume(O),w):O===B.questionMark?(t.consume(O),_):Gn(O)?(t.consume(O),E):r(O)}function c(O){return O===B.dash?(t.consume(O),u):O===B.leftSquareBracket?(t.consume(O),i=0,b):Gn(O)?(t.consume(O),v):r(O)}function u(O){return O===B.dash?(t.consume(O),f):r(O)}function d(O){return O===B.eof?r(O):O===B.dash?(t.consume(O),h):Ze(O)?(o=d,z(O)):(t.consume(O),d)}function h(O){return O===B.dash?(t.consume(O),f):d(O)}function f(O){return O===B.greaterThan?G(O):O===B.dash?h(O):d(O)}function b(O){const $=We.cdataOpeningString;return O===$.charCodeAt(i++)?(t.consume(O),i===$.length?m:b):r(O)}function m(O){return O===B.eof?r(O):O===B.rightSquareBracket?(t.consume(O),g):Ze(O)?(o=m,z(O)):(t.consume(O),m)}function g(O){return O===B.rightSquareBracket?(t.consume(O),y):m(O)}function y(O){return O===B.greaterThan?G(O):O===B.rightSquareBracket?(t.consume(O),y):m(O)}function v(O){return O===B.eof||O===B.greaterThan?G(O):Ze(O)?(o=v,z(O)):(t.consume(O),v)}function _(O){return O===B.eof?r(O):O===B.questionMark?(t.consume(O),x):Ze(O)?(o=_,z(O)):(t.consume(O),_)}function x(O){return O===B.greaterThan?G(O):_(O)}function w(O){return Gn(O)?(t.consume(O),S):r(O)}function S(O){return O===B.dash||Nn(O)?(t.consume(O),S):T(O)}function T(O){return Ze(O)?(o=T,z(O)):Pt(O)?(t.consume(O),T):G(O)}function E(O){return O===B.dash||Nn(O)?(t.consume(O),E):O===B.slash||O===B.greaterThan||sr(O)?C(O):r(O)}function C(O){return O===B.slash?(t.consume(O),G):O===B.colon||O===B.underscore||Gn(O)?(t.consume(O),A):Ze(O)?(o=C,z(O)):Pt(O)?(t.consume(O),C):G(O)}function A(O){return O===B.dash||O===B.dot||O===B.colon||O===B.underscore||Nn(O)?(t.consume(O),A):I(O)}function I(O){return O===B.equalsTo?(t.consume(O),P):Ze(O)?(o=I,z(O)):Pt(O)?(t.consume(O),I):C(O)}function P(O){return O===B.eof||O===B.lessThan||O===B.equalsTo||O===B.greaterThan||O===B.graveAccent?r(O):O===B.quotationMark||O===B.apostrophe?(t.consume(O),s=O,D):Ze(O)?(o=P,z(O)):Pt(O)?(t.consume(O),P):(t.consume(O),R)}function D(O){return O===s?(t.consume(O),s=void 0,F):O===B.eof?r(O):Ze(O)?(o=D,z(O)):(t.consume(O),D)}function R(O){return O===B.eof||O===B.quotationMark||O===B.apostrophe||O===B.lessThan||O===B.equalsTo||O===B.graveAccent?r(O):O===B.slash||O===B.greaterThan||sr(O)?C(O):(t.consume(O),R)}function F(O){return O===B.slash||O===B.greaterThan||sr(O)?C(O):r(O)}function G(O){return O===B.greaterThan?(t.consume(O),t.exit(W.htmlTextData),t.exit(W.htmlText),e):r(O)}function z(O){return ue(o,"expected return state"),ue(Ze(O),"expected eol"),t.exit(W.htmlTextData),t.enter(W.lineEnding),t.consume(O),t.exit(W.lineEnding),K}function K(O){return ue(n.parser.constructs.disable.null,"expected `disable.null` to be populated"),Pt(O)?$t(t,L,W.linePrefix,n.parser.constructs.disable.null.includes("codeIndented")?void 0:We.tabSize)(O):L(O)}function L(O){return t.enter(W.htmlTextData),o(O)}}const TA={name:"labelEnd",resolveAll:mEe,resolveTo:gEe,tokenize:bEe},hEe={tokenize:yEe},fEe={tokenize:vEe},pEe={tokenize:_Ee};function mEe(t){let e=-1;const r=[];for(;++e<t.length;){const n=t[e][1];if(r.push(t[e]),n.type===W.labelImage||n.type===W.labelLink||n.type===W.labelEnd){const s=n.type===W.labelImage?4:2;n.type=W.data,e+=s}}return t.length!==r.length&&Os(t,0,t.length,r),t}function gEe(t,e){let r=t.length,n=0,s,i,o,a;for(;r--;)if(s=t[r][1],i){if(s.type===W.link||s.type===W.labelLink&&s._inactive)break;t[r][0]==="enter"&&s.type===W.labelLink&&(s._inactive=!0)}else if(o){if(t[r][0]==="enter"&&(s.type===W.labelImage||s.type===W.labelLink)&&!s._balanced&&(i=r,s.type!==W.labelLink)){n=2;break}}else s.type===W.labelEnd&&(o=r);ue(i!==void 0,"`open` is supposed to be found"),ue(o!==void 0,"`close` is supposed to be found");const l={type:t[i][1].type===W.labelLink?W.link:W.image,start:{...t[i][1].start},end:{...t[t.length-1][1].end}},c={type:W.label,start:{...t[i][1].start},end:{...t[o][1].end}},u={type:W.labelText,start:{...t[i+n+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=qs(a,t.slice(i+1,i+n+3)),a=qs(a,[["enter",u,e]]),ue(e.parser.constructs.insideSpan.null,"expected `insideSpan.null` to be populated"),a=qs(a,u_(e.parser.constructs.insideSpan.null,t.slice(i+n+4,o-3),e)),a=qs(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=qs(a,t.slice(o+1)),a=qs(a,[["exit",l,e]]),Os(t,i,t.length,a),t}function bEe(t,e,r){const n=this;let s=n.events.length,i,o;for(;s--;)if((n.events[s][1].type===W.labelImage||n.events[s][1].type===W.labelLink)&&!n.events[s][1]._balanced){i=n.events[s][1];break}return a;function a(h){return ue(h===B.rightSquareBracket,"expected `]`"),i?i._inactive?d(h):(o=n.parser.defined.includes(Si(n.sliceSerialize({start:i.end,end:n.now()}))),t.enter(W.labelEnd),t.enter(W.labelMarker),t.consume(h),t.exit(W.labelMarker),t.exit(W.labelEnd),l):r(h)}function l(h){return h===B.leftParenthesis?t.attempt(hEe,u,o?u:d)(h):h===B.leftSquareBracket?t.attempt(fEe,u,o?c:d)(h):o?u(h):d(h)}function c(h){return t.attempt(pEe,u,d)(h)}function u(h){return e(h)}function d(h){return i._balanced=!0,r(h)}}function yEe(t,e,r){return n;function n(d){return ue(d===B.leftParenthesis,"expected left paren"),t.enter(W.resource),t.enter(W.resourceMarker),t.consume(d),t.exit(W.resourceMarker),s}function s(d){return sr(d)?mf(t,i)(d):i(d)}function i(d){return d===B.rightParenthesis?u(d):J9(t,o,a,W.resourceDestination,W.resourceDestinationLiteral,W.resourceDestinationLiteralMarker,W.resourceDestinationRaw,W.resourceDestinationString,We.linkResourceDestinationBalanceMax)(d)}function o(d){return sr(d)?mf(t,l)(d):u(d)}function a(d){return r(d)}function l(d){return d===B.quotationMark||d===B.apostrophe||d===B.leftParenthesis?Q9(t,c,r,W.resourceTitle,W.resourceTitleMarker,W.resourceTitleString)(d):u(d)}function c(d){return sr(d)?mf(t,u)(d):u(d)}function u(d){return d===B.rightParenthesis?(t.enter(W.resourceMarker),t.consume(d),t.exit(W.resourceMarker),t.exit(W.resource),e):r(d)}}function vEe(t,e,r){const n=this;return s;function s(a){return ue(a===B.leftSquareBracket,"expected left bracket"),Z9.call(n,t,i,o,W.reference,W.referenceMarker,W.referenceString)(a)}function i(a){return n.parser.defined.includes(Si(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?e(a):r(a)}function o(a){return r(a)}}function _Ee(t,e,r){return n;function n(i){return ue(i===B.leftSquareBracket,"expected left bracket"),t.enter(W.reference),t.enter(W.referenceMarker),t.consume(i),t.exit(W.referenceMarker),s}function s(i){return i===B.rightSquareBracket?(t.enter(W.referenceMarker),t.consume(i),t.exit(W.referenceMarker),t.exit(W.reference),e):r(i)}}const xEe={name:"labelStartImage",resolveAll:TA.resolveAll,tokenize:wEe};function wEe(t,e,r){const n=this;return s;function s(a){return ue(a===B.exclamationMark,"expected `!`"),t.enter(W.labelImage),t.enter(W.labelImageMarker),t.consume(a),t.exit(W.labelImageMarker),i}function i(a){return a===B.leftSquareBracket?(t.enter(W.labelMarker),t.consume(a),t.exit(W.labelMarker),t.exit(W.labelImage),o):r(a)}function o(a){return a===B.caret&&"_hiddenFootnoteSupport"in n.parser.constructs?r(a):e(a)}}const SEe={name:"labelStartLink",resolveAll:TA.resolveAll,tokenize:EEe};function EEe(t,e,r){const n=this;return s;function s(o){return ue(o===B.leftSquareBracket,"expected `[`"),t.enter(W.labelLink),t.enter(W.labelMarker),t.consume(o),t.exit(W.labelMarker),t.exit(W.labelLink),i}function i(o){return o===B.caret&&"_hiddenFootnoteSupport"in n.parser.constructs?r(o):e(o)}}const kw={name:"lineEnding",tokenize:CEe};function CEe(t,e){return r;function r(n){return ue(Ze(n),"expected eol"),t.enter(W.lineEnding),t.consume(n),t.exit(W.lineEnding),$t(t,e,W.linePrefix)}}const X0={name:"thematicBreak",tokenize:TEe};function TEe(t,e,r){let n=0,s;return i;function i(c){return t.enter(W.thematicBreak),o(c)}function o(c){return ue(c===B.asterisk||c===B.dash||c===B.underscore,"expected `*`, `-`, or `_`"),s=c,a(c)}function a(c){return c===s?(t.enter(W.thematicBreakSequence),l(c)):n>=We.thematicBreakMarkerCountMin&&(c===B.eof||Ze(c))?(t.exit(W.thematicBreak),e(c)):r(c)}function l(c){return c===s?(t.consume(c),n++,l):(t.exit(W.thematicBreakSequence),Pt(c)?$t(t,a,W.whitespace)(c):a(c))}}const is={continuation:{tokenize:PEe},exit:NEe,name:"list",tokenize:REe},kEe={partial:!0,tokenize:DEe},AEe={partial:!0,tokenize:IEe};function REe(t,e,r){const n=this,s=n.events[n.events.length-1];let i=s&&s[1].type===W.linePrefix?s[2].sliceSerialize(s[1],!0).length:0,o=0;return a;function a(f){ue(n.containerState,"expected state");const b=n.containerState.type||(f===B.asterisk||f===B.plusSign||f===B.dash?W.listUnordered:W.listOrdered);if(b===W.listUnordered?!n.containerState.marker||f===n.containerState.marker:HE(f)){if(n.containerState.type||(n.containerState.type=b,t.enter(b,{_container:!0})),b===W.listUnordered)return t.enter(W.listItemPrefix),f===B.asterisk||f===B.dash?t.check(X0,r,c)(f):c(f);if(!n.interrupt||f===B.digit1)return t.enter(W.listItemPrefix),t.enter(W.listItemValue),l(f)}return r(f)}function l(f){return ue(n.containerState,"expected state"),HE(f)&&++o<We.listItemValueSizeMax?(t.consume(f),l):(!n.interrupt||o<2)&&(n.containerState.marker?f===n.containerState.marker:f===B.rightParenthesis||f===B.dot)?(t.exit(W.listItemValue),c(f)):r(f)}function c(f){return ue(n.containerState,"expected state"),ue(f!==B.eof,"eof (`null`) is not a marker"),t.enter(W.listItemMarker),t.consume(f),t.exit(W.listItemMarker),n.containerState.marker=n.containerState.marker||f,t.check(lm,n.interrupt?r:u,t.attempt(kEe,h,d))}function u(f){return ue(n.containerState,"expected state"),n.containerState.initialBlankLine=!0,i++,h(f)}function d(f){return Pt(f)?(t.enter(W.listItemPrefixWhitespace),t.consume(f),t.exit(W.listItemPrefixWhitespace),h):r(f)}function h(f){return ue(n.containerState,"expected state"),n.containerState.size=i+n.sliceSerialize(t.exit(W.listItemPrefix),!0).length,e(f)}}function PEe(t,e,r){const n=this;return ue(n.containerState,"expected state"),n.containerState._closeFlow=void 0,t.check(lm,s,i);function s(a){return ue(n.containerState,"expected state"),ue(typeof n.containerState.size=="number","expected size"),n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,$t(t,e,W.listItemIndent,n.containerState.size+1)(a)}function i(a){return ue(n.containerState,"expected state"),n.containerState.furtherBlankLines||!Pt(a)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,o(a)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,t.attempt(AEe,e,o)(a))}function o(a){return ue(n.containerState,"expected state"),n.containerState._closeFlow=!0,n.interrupt=void 0,ue(n.parser.constructs.disable.null,"expected `disable.null` to be populated"),$t(t,t.attempt(is,e,r),W.linePrefix,n.parser.constructs.disable.null.includes("codeIndented")?void 0:We.tabSize)(a)}}function IEe(t,e,r){const n=this;return ue(n.containerState,"expected state"),ue(typeof n.containerState.size=="number","expected size"),$t(t,s,W.listItemIndent,n.containerState.size+1);function s(i){ue(n.containerState,"expected state");const o=n.events[n.events.length-1];return o&&o[1].type===W.listItemIndent&&o[2].sliceSerialize(o[1],!0).length===n.containerState.size?e(i):r(i)}}function NEe(t){ue(this.containerState,"expected state"),ue(typeof this.containerState.type=="string","expected type"),t.exit(this.containerState.type)}function DEe(t,e,r){const n=this;return ue(n.parser.constructs.disable.null,"expected `disable.null` to be populated"),$t(t,s,W.listItemPrefixWhitespace,n.parser.constructs.disable.null.includes("codeIndented")?void 0:We.tabSize+1);function s(i){const o=n.events[n.events.length-1];return!Pt(i)&&o&&o[1].type===W.listItemPrefixWhitespace?e(i):r(i)}}const vO={name:"setextUnderline",resolveTo:OEe,tokenize:LEe};function OEe(t,e){let r=t.length,n,s,i;for(;r--;)if(t[r][0]==="enter"){if(t[r][1].type===W.content){n=r;break}t[r][1].type===W.paragraph&&(s=r)}else t[r][1].type===W.content&&t.splice(r,1),!i&&t[r][1].type===W.definition&&(i=r);ue(s!==void 0,"expected a `text` index to be found"),ue(n!==void 0,"expected a `text` index to be found"),ue(t[n][2]===e,"enter context should be same"),ue(t[t.length-1][2]===e,"enter context should be same");const o={type:W.setextHeading,start:{...t[n][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type=W.setextHeadingText,i?(t.splice(s,0,["enter",o,e]),t.splice(i+1,0,["exit",t[n][1],e]),t[n][1].end={...t[i][1].end}):t[n][1]=o,t.push(["exit",o,e]),t}function LEe(t,e,r){const n=this;let s;return i;function i(c){let u=n.events.length,d;for(ue(c===B.dash||c===B.equalsTo,"expected `=` or `-`");u--;)if(n.events[u][1].type!==W.lineEnding&&n.events[u][1].type!==W.linePrefix&&n.events[u][1].type!==W.content){d=n.events[u][1].type===W.paragraph;break}return!n.parser.lazy[n.now().line]&&(n.interrupt||d)?(t.enter(W.setextHeadingLine),s=c,o(c)):r(c)}function o(c){return t.enter(W.setextHeadingLineSequence),a(c)}function a(c){return c===s?(t.consume(c),a):(t.exit(W.setextHeadingLineSequence),Pt(c)?$t(t,l,W.lineSuffix)(c):l(c))}function l(c){return c===B.eof||Ze(c)?(t.exit(W.setextHeadingLine),e(c)):r(c)}}const MEe={tokenize:jEe};function jEe(t){const e=this,r=t.attempt(lm,n,t.attempt(this.parser.constructs.flowInitial,s,$t(t,t.attempt(this.parser.constructs.flow,s,t.attempt(HSe,s)),W.linePrefix)));return r;function n(i){if(ue(i===B.eof||Ze(i),"expected eol or eof"),i===B.eof){t.consume(i);return}return t.enter(W.lineEndingBlank),t.consume(i),t.exit(W.lineEndingBlank),e.currentConstruct=void 0,r}function s(i){if(ue(i===B.eof||Ze(i),"expected eol or eof"),i===B.eof){t.consume(i);return}return t.enter(W.lineEnding),t.consume(i),t.exit(W.lineEnding),e.currentConstruct=void 0,r}}const FEe={resolveAll:tz()},BEe=ez("string"),$Ee=ez("text");function ez(t){return{resolveAll:tz(t==="text"?UEe:void 0),tokenize:e};function e(r){const n=this,s=this.parser.constructs[t],i=r.attempt(s,o,a);return o;function o(u){return c(u)?i(u):a(u)}function a(u){if(u===B.eof){r.consume(u);return}return r.enter(W.data),r.consume(u),l}function l(u){return c(u)?(r.exit(W.data),i(u)):(r.consume(u),l)}function c(u){if(u===B.eof)return!0;const d=s[u];let h=-1;if(d)for(ue(Array.isArray(d),"expected `disable.null` to be populated");++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(n,n.previous))return!0}return!1}}}function tz(t){return e;function e(r,n){let s=-1,i;for(;++s<=r.length;)i===void 0?r[s]&&r[s][1].type===W.data&&(i=s,s++):(!r[s]||r[s][1].type!==W.data)&&(s!==i+2&&(r[i][1].end=r[s-1][1].end,r.splice(i+2,s-i-2),s=i+2),i=void 0);return t?t(r,n):r}}function UEe(t,e){let r=0;for(;++r<=t.length;)if((r===t.length||t[r][1].type===W.lineEnding)&&t[r-1][1].type===W.data){const n=t[r-1][1],s=e.sliceStream(n);let i=s.length,o=-1,a=0,l;for(;i--;){const c=s[i];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===B.space;)a++,o--;if(o)break;o=-1}else if(c===B.horizontalTab)l=!0,a++;else if(c!==B.virtualSpace){i++;break}}if(e._contentTypeTextTrailing&&r===t.length&&(a=0),a){const c={type:r===t.length||l||a<We.hardBreakPrefixSizeMin?W.lineSuffix:W.hardBreakTrailing,start:{_bufferIndex:i?o:n.start._bufferIndex+o,_index:n.start._index+i,line:n.end.line,column:n.end.column-a,offset:n.end.offset-a},end:{...n.end}};n.end={...c.start},n.start.offset===n.end.offset?Object.assign(n,c):(t.splice(r,0,["enter",c,e],["exit",c,e]),r+=2)}r++}return t}const HEe={[B.asterisk]:is,[B.plusSign]:is,[B.dash]:is,[B.digit0]:is,[B.digit1]:is,[B.digit2]:is,[B.digit3]:is,[B.digit4]:is,[B.digit5]:is,[B.digit6]:is,[B.digit7]:is,[B.digit8]:is,[B.digit9]:is,[B.greaterThan]:G9},zEe={[B.leftSquareBracket]:qSe},WEe={[B.horizontalTab]:Tw,[B.virtualSpace]:Tw,[B.space]:Tw},VEe={[B.numberSign]:QSe,[B.asterisk]:X0,[B.dash]:[vO,X0],[B.lessThan]:nEe,[B.equalsTo]:vO,[B.underscore]:X0,[B.graveAccent]:bO,[B.tilde]:bO},GEe={[B.ampersand]:K9,[B.backslash]:q9},qEe={[B.carriageReturn]:kw,[B.lineFeed]:kw,[B.carriageReturnLineFeed]:kw,[B.exclamationMark]:xEe,[B.ampersand]:K9,[B.asterisk]:zE,[B.lessThan]:[ESe,uEe],[B.leftSquareBracket]:SEe,[B.backslash]:[JSe,q9],[B.rightSquareBracket]:TA,[B.underscore]:zE,[B.graveAccent]:jSe},KEe={null:[zE,FEe]},YEe={null:[B.asterisk,B.underscore]},XEe={null:[]},JEe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:YEe,contentInitial:zEe,disable:XEe,document:HEe,flow:VEe,flowInitial:WEe,insideSpan:KEe,string:GEe,text:qEe},Symbol.toStringTag,{value:"Module"}));var WE={exports:{}},Aw,_O;function ZEe(){if(_O)return Aw;_O=1;var t=1e3,e=t*60,r=e*60,n=r*24,s=n*7,i=n*365.25;Aw=function(u,d){d=d||{};var h=typeof u;if(h==="string"&&u.length>0)return o(u);if(h==="number"&&isFinite(u))return d.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var h=parseFloat(d[1]),f=(d[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return h*i;case"weeks":case"week":case"w":return h*s;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(u){var d=Math.abs(u);return d>=n?Math.round(u/n)+"d":d>=r?Math.round(u/r)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var d=Math.abs(u);return d>=n?c(u,d,n,"day"):d>=r?c(u,d,r,"hour"):d>=e?c(u,d,e,"minute"):d>=t?c(u,d,t,"second"):u+" ms"}function c(u,d,h,f){var b=d>=h*1.5;return Math.round(u/h)+" "+f+(b?"s":"")}return Aw}function QEe(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=s,r.enabled=a,r.humanize=ZEe(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let h=0;h<u.length;h++)d=(d<<5)-d+u.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,h=null,f,b;function m(...g){if(!m.enabled)return;const y=m,v=Number(new Date),_=v-(d||v);y.diff=_,y.prev=d,y.curr=v,d=v,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let x=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(S,T)=>{if(S==="%%")return"%";x++;const E=r.formatters[T];if(typeof E=="function"){const C=g[x];S=E.call(y,C),g.splice(x,1),x--}return S}),r.formatArgs.call(y,g),(y.log||r.log).apply(y,g)}return m.namespace=u,m.useColors=r.useColors(),m.color=r.selectColor(u),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(f!==r.namespaces&&(f=r.namespaces,b=r.enabled(u)),b),set:g=>{h=g}}),typeof r.init=="function"&&r.init(m),m}function n(u,d){const h=r(this.namespace+(typeof d>"u"?":":d)+u);return h.log=this.log,h}function s(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];const d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const h of d)h[0]==="-"?r.skips.push(h.slice(1)):r.names.push(h)}function i(u,d){let h=0,f=0,b=-1,m=0;for(;h<u.length;)if(f<d.length&&(d[f]===u[h]||d[f]==="*"))d[f]==="*"?(b=f,m=h,f++):(h++,f++);else if(b!==-1)f=b+1,m++,h=m;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){const u=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),u}function a(u){for(const d of r.skips)if(i(u,d))return!1;for(const d of r.names)if(i(u,d))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var eCe=QEe;(function(t,e){var r={};e.formatArgs=s,e.save=i,e.load=o,e.useColors=n,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let d=0,h=0;c[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(d++,f==="%c"&&(h=d))}),c.splice(h,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function o(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof xr<"u"&&"env"in xr&&(c=r.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=eCe(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(WE,WE.exports);var tCe=WE.exports;const rCe=gl(tCe),Ol=rCe("micromark");function nCe(t,e,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const s={},i=[];let o=[],a=[],l=!0;const c={attempt:C(T),check:C(E),consume:x,enter:w,exit:S,interrupt:C(E,{interrupt:!0})},u={code:B.eof,containerState:{},defineSkip:y,events:[],now:g,parser:t,previous:B.eof,sliceSerialize:b,sliceStream:m,write:f};let d=e.tokenize.call(u,c),h;return e.resolveAll&&i.push(e),u;function f(D){return o=qs(o,D),v(),o[o.length-1]!==B.eof?[]:(A(e,0),u.events=u_(i,u.events,u),u.events)}function b(D,R){return iCe(m(D),R)}function m(D){return sCe(o,D)}function g(){const{_bufferIndex:D,_index:R,line:F,column:G,offset:z}=n;return{_bufferIndex:D,_index:R,line:F,column:G,offset:z}}function y(D){s[D.line]=D.column,P(),Ol("position: define skip: `%j`",n)}function v(){let D;for(;n._index<o.length;){const R=o[n._index];if(typeof R=="string")for(D=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===D&&n._bufferIndex<R.length;)_(R.charCodeAt(n._bufferIndex));else _(R)}}function _(D){ue(l===!0,"expected character to be consumed"),l=void 0,Ol("main: passing `%s` to %s",D,d&&d.name),h=D,ue(typeof d=="function","expected state"),d=d(D)}function x(D){ue(D===h,"expected given code to equal expected code"),Ol("consume: `%s`",D),ue(l===void 0,"expected code to not have been consumed: this might be because `return x(code)` instead of `return x` was used"),ue(D===null?u.events.length===0||u.events[u.events.length-1][0]==="exit":u.events[u.events.length-1][0]==="enter","expected last token to be open"),Ze(D)?(n.line++,n.column=1,n.offset+=D===B.carriageReturnLineFeed?2:1,P(),Ol("position: after eol: `%j`",n)):D!==B.virtualSpace&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++)),u.previous=D,l=!0}function w(D,R){const F=R||{};return F.type=D,F.start=g(),ue(typeof D=="string","expected string type"),ue(D.length>0,"expected non-empty string"),Ol("enter: `%s`",D),u.events.push(["enter",F,u]),a.push(F),F}function S(D){ue(typeof D=="string","expected string type"),ue(D.length>0,"expected non-empty string");const R=a.pop();return ue(R,"cannot close w/o open tokens"),R.end=g(),ue(D===R.type,"expected exit token to match current token"),ue(!(R.start._index===R.end._index&&R.start._bufferIndex===R.end._bufferIndex),"expected non-empty token (`"+D+"`)"),Ol("exit: `%s`",R.type),u.events.push(["exit",R,u]),R}function T(D,R){A(D,R.from)}function E(D,R){R.restore()}function C(D,R){return F;function F(G,z,K){let L,O,$,H;return Array.isArray(G)?ee(G):"tokenize"in G?ee([G]):U(G);function U(j){return Y;function Y(Q){const ie=Q!==null&&j[Q],re=Q!==null&&j.null,pe=[...Array.isArray(ie)?ie:ie?[ie]:[],...Array.isArray(re)?re:re?[re]:[]];return ee(pe)(Q)}}function ee(j){return L=j,O=0,j.length===0?(ue(K,"expected `bogusState` to be given"),K):X(j[O])}function X(j){return Y;function Y(Q){return H=I(),$=j,j.partial||(u.currentConstruct=j),ue(u.parser.constructs.disable.null,"expected `disable.null` to be populated"),j.name&&u.parser.constructs.disable.null.includes(j.name)?J(Q):j.tokenize.call(R?Object.assign(Object.create(u),R):u,c,ge,J)(Q)}}function ge(j){return ue(j===h,"expected code"),l=!0,D($,H),z}function J(j){return ue(j===h,"expected code"),l=!0,H.restore(),++O<L.length?X(L[O]):K}}}function A(D,R){D.resolveAll&&!i.includes(D)&&i.push(D),D.resolve&&Os(u.events,R,u.events.length-R,D.resolve(u.events.slice(R),u)),D.resolveTo&&(u.events=D.resolveTo(u.events,u)),ue(D.partial||u.events.length===0||u.events[u.events.length-1][0]==="exit","expected last token to end")}function I(){const D=g(),R=u.previous,F=u.currentConstruct,G=u.events.length,z=Array.from(a);return{from:G,restore:K};function K(){n=D,u.previous=R,u.currentConstruct=F,u.events.length=G,a=z,P(),Ol("position: restore: `%j`",n)}}function P(){n.line in s&&n.column<2&&(n.column=s[n.line],n.offset+=s[n.line]-1)}}function sCe(t,e){const r=e.start._index,n=e.start._bufferIndex,s=e.end._index,i=e.end._bufferIndex;let o;if(r===s)ue(i>-1,"expected non-negative end buffer index"),ue(n>-1,"expected non-negative start buffer index"),o=[t[r].slice(n,i)];else{if(o=t.slice(r,s),n>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(n):(ue(n===0,"expected `startBufferIndex` to be `0`"),o.shift())}i>0&&o.push(t[s].slice(0,i))}return o}function iCe(t,e){let r=-1;const n=[];let s;for(;++r<t.length;){const i=t[r];let o;if(typeof i=="string")o=i;else switch(i){case B.carriageReturn:{o=Qi.cr;break}case B.lineFeed:{o=Qi.lf;break}case B.carriageReturnLineFeed:{o=Qi.cr+Qi.lf;break}case B.horizontalTab:{o=e?Qi.space:Qi.ht;break}case B.virtualSpace:{if(!e&&s)continue;o=Qi.space;break}default:ue(typeof i=="number","expected number"),o=String.fromCharCode(i)}s=i===B.horizontalTab,n.push(o)}return n.join("")}function oCe(t){const n={constructs:W9([JEe,...(t||{}).extensions||[]]),content:s(bSe),defined:[],document:s(vSe),flow:s(MEe),lazy:{},string:s(BEe),text:s($Ee)};return n;function s(i){return o;function o(a){return nCe(n,i,a)}}}function aCe(t){for(;!X9(t););return t}const xO=/[\0\t\n\r]/g;function lCe(){let t=1,e="",r=!0,n;return s;function s(i,o,a){const l=[];let c,u,d,h,f;for(i=e+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),d=0,e="",r&&(i.charCodeAt(0)===B.byteOrderMarker&&d++,r=void 0);d<i.length;){if(xO.lastIndex=d,c=xO.exec(i),h=c&&c.index!==void 0?c.index:i.length,f=i.charCodeAt(h),!c){e=i.slice(d);break}if(f===B.lf&&d===h&&n)l.push(B.carriageReturnLineFeed),n=void 0;else switch(n&&(l.push(B.carriageReturn),n=void 0),d<h&&(l.push(i.slice(d,h)),t+=h-d),f){case B.nul:{l.push(B.replacementCharacter),t++;break}case B.ht:{for(u=Math.ceil(t/We.tabSize)*We.tabSize,l.push(B.horizontalTab);t++<u;)l.push(B.virtualSpace);break}case B.lf:{l.push(B.lineFeed),t=1;break}default:n=!0,t=1}d=h+1}return a&&(n&&l.push(B.carriageReturn),e&&l.push(e),l.push(B.eof)),l}}const cCe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function uCe(t){return t.replace(cCe,dCe)}function dCe(t,e,r){if(e)return e;if(r.charCodeAt(0)===B.numberSign){const s=r.charCodeAt(1),i=s===B.lowercaseX||s===B.uppercaseX;return V9(r.slice(i?2:1),i?We.numericBaseHexadecimal:We.numericBaseDecimal)}return CA(r)||t}const rz={}.hasOwnProperty;function hCe(t,e,r){return typeof e!="string"&&(r=e,e=void 0),fCe(r)(aCe(oCe(r).document().write(lCe()(t,e,!0))))}function fCe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(ae),autolinkProtocol:C,autolinkEmail:C,atxHeading:i(oe),blockQuote:i(Q),characterEscape:C,characterReference:C,codeFenced:i(ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(ie,o),codeText:i(re,o),codeTextData:C,data:C,codeFlowValue:C,definition:i(pe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(M),hardBreakEscape:i(le),hardBreakTrailing:i(le),htmlFlow:i(q,o),htmlFlowData:C,htmlText:i(q,o),htmlTextData:C,image:i(V),label:o,link:i(ae),listItem:i(Te),listItemValue:h,listOrdered:i(xe,d),listUnordered:i(xe),paragraph:i(fe),reference:U,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(oe),strong:i(ke),thematicBreak:i(Re)},exit:{atxHeading:l(),atxHeadingSequence:w,autolink:l(),autolinkEmail:Y,autolinkProtocol:j,blockQuote:l(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:ge,characterReference:J,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:f,codeFencedFenceMeta:b,codeFlowValue:A,codeIndented:l(y),codeText:l(F),codeTextData:A,data:A,definition:l(),definitionDestinationString:x,definitionLabelString:v,definitionTitleString:_,emphasis:l(),hardBreakEscape:l(P),hardBreakTrailing:l(P),htmlFlow:l(D),htmlFlowData:A,htmlText:l(R),htmlTextData:A,image:l(z),label:L,labelText:K,lineEnding:I,link:l(G),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ee,resourceDestinationString:O,resourceTitleString:$,resource:H,setextHeading:l(E),setextHeadingLineSequence:T,setextHeadingText:S,strong:l(),thematicBreak:l()}};nz(e,(t||{}).mdastExtensions||[]);const r={};return n;function n(de){let be={type:"root",children:[]};const Se={stack:[be],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:r},ze=[];let Ye=-1;for(;++Ye<de.length;)if(de[Ye][1].type===W.listOrdered||de[Ye][1].type===W.listUnordered)if(de[Ye][0]==="enter")ze.push(Ye);else{const ut=ze.pop();ue(typeof ut=="number","expected list ot be open"),Ye=s(de,ut,Ye)}for(Ye=-1;++Ye<de.length;){const ut=e[de[Ye][0]];rz.call(ut,de[Ye][1].type)&&ut[de[Ye][1].type].call(Object.assign({sliceSerialize:de[Ye][2].sliceSerialize},Se),de[Ye][1])}if(Se.tokenStack.length>0){const ut=Se.tokenStack[Se.tokenStack.length-1];(ut[1]||wO).call(Se,void 0,ut[0])}for(be.position={start:Ca(de.length>0?de[0][1].start:{line:1,column:1,offset:0}),end:Ca(de.length>0?de[de.length-2][1].end:{line:1,column:1,offset:0})},Ye=-1;++Ye<e.transforms.length;)be=e.transforms[Ye](be)||be;return be}function s(de,be,Se){let ze=be-1,Ye=-1,ut=!1,at,pt,er,qt;for(;++ze<=Se;){const Tt=de[ze];switch(Tt[1].type){case W.listUnordered:case W.listOrdered:case W.blockQuote:{Tt[0]==="enter"?Ye++:Ye--,qt=void 0;break}case W.lineEndingBlank:{Tt[0]==="enter"&&(at&&!qt&&!Ye&&!er&&(er=ze),qt=void 0);break}case W.linePrefix:case W.listItemValue:case W.listItemMarker:case W.listItemPrefix:case W.listItemPrefixWhitespace:break;default:qt=void 0}if(!Ye&&Tt[0]==="enter"&&Tt[1].type===W.listItemPrefix||Ye===-1&&Tt[0]==="exit"&&(Tt[1].type===W.listUnordered||Tt[1].type===W.listOrdered)){if(at){let gr=ze;for(pt=void 0;gr--;){const ir=de[gr];if(ir[1].type===W.lineEnding||ir[1].type===W.lineEndingBlank){if(ir[0]==="exit")continue;pt&&(de[pt][1].type=W.lineEndingBlank,ut=!0),ir[1].type=W.lineEnding,pt=gr}else if(!(ir[1].type===W.linePrefix||ir[1].type===W.blockQuotePrefix||ir[1].type===W.blockQuotePrefixWhitespace||ir[1].type===W.blockQuoteMarker||ir[1].type===W.listItemIndent))break}er&&(!pt||er<pt)&&(at._spread=!0),at.end=Object.assign({},pt?de[pt][1].start:Tt[1].end),de.splice(pt||ze,0,["exit",at,Tt[2]]),ze++,Se++}if(Tt[1].type===W.listItemPrefix){const gr={type:"listItem",_spread:!1,start:Object.assign({},Tt[1].start),end:void 0};at=gr,de.splice(ze,0,["enter",gr,Tt[2]]),ze++,Se++,er=void 0,qt=!0}}}return de[be][1]._spread=ut,Se}function i(de,be){return Se;function Se(ze){a.call(this,de(ze),ze),be&&be.call(this,ze)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(de,be,Se){const ze=this.stack[this.stack.length-1];ue(ze,"expected `parent`"),ue("children"in ze,"expected `parent`"),ze.children.push(de),this.stack.push(de),this.tokenStack.push([be,Se||void 0]),de.position={start:Ca(be.start),end:void 0}}function l(de){return be;function be(Se){de&&de.call(this,Se),c.call(this,Se)}}function c(de,be){const Se=this.stack.pop();ue(Se,"expected `node`");const ze=this.tokenStack.pop();if(ze)ze[0].type!==de.type&&(be?be.call(this,de,ze[0]):(ze[1]||wO).call(this,de,ze[0]));else throw new Error("Cannot close `"+de.type+"` ("+pf({start:de.start,end:de.end})+"): its not open");ue(Se.type!=="fragment","unexpected fragment `exit`ed"),ue(Se.position,"expected `position` to be defined"),Se.position.end=Ca(de.end)}function u(){return EA(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(de){if(this.data.expectingFirstListItemValue){const be=this.stack[this.stack.length-2];ue(be,"expected nodes on stack"),ue(be.type==="list","expected list on stack"),be.start=Number.parseInt(this.sliceSerialize(de),We.numericBaseDecimal),this.data.expectingFirstListItemValue=void 0}}function f(){const de=this.resume(),be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="code","expected code on stack"),be.lang=de}function b(){const de=this.resume(),be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="code","expected code on stack"),be.meta=de}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const de=this.resume(),be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="code","expected code on stack"),be.value=de.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const de=this.resume(),be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="code","expected code on stack"),be.value=de.replace(/(\r?\n|\r)$/g,"")}function v(de){const be=this.resume(),Se=this.stack[this.stack.length-1];ue(Se,"expected node on stack"),ue(Se.type==="definition","expected definition on stack"),Se.label=be,Se.identifier=Si(this.sliceSerialize(de)).toLowerCase()}function _(){const de=this.resume(),be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="definition","expected definition on stack"),be.title=de}function x(){const de=this.resume(),be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="definition","expected definition on stack"),be.url=de}function w(de){const be=this.stack[this.stack.length-1];if(ue(be,"expected node on stack"),ue(be.type==="heading","expected heading on stack"),!be.depth){const Se=this.sliceSerialize(de).length;ue(Se===1||Se===2||Se===3||Se===4||Se===5||Se===6,"expected `depth` between `1` and `6`"),be.depth=Se}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function T(de){const be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="heading","expected heading on stack"),be.depth=this.sliceSerialize(de).codePointAt(0)===B.equalsTo?1:2}function E(){this.data.setextHeadingSlurpLineEnding=void 0}function C(de){const be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue("children"in be,"expected parent on stack");const Se=be.children;let ze=Se[Se.length-1];(!ze||ze.type!=="text")&&(ze=Me(),ze.position={start:Ca(de.start),end:void 0},Se.push(ze)),this.stack.push(ze)}function A(de){const be=this.stack.pop();ue(be,"expected a `node` to be on the stack"),ue("value"in be,"expected a `literal` to be on the stack"),ue(be.position,"expected `node` to have an open position"),be.value+=this.sliceSerialize(de),be.position.end=Ca(de.end)}function I(de){const be=this.stack[this.stack.length-1];if(ue(be,"expected `node`"),this.data.atHardBreak){ue("children"in be,"expected `parent`");const Se=be.children[be.children.length-1];ue(Se.position,"expected tail to have a starting position"),Se.position.end=Ca(de.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(be.type)&&(C.call(this,de),A.call(this,de))}function P(){this.data.atHardBreak=!0}function D(){const de=this.resume(),be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="html","expected html on stack"),be.value=de}function R(){const de=this.resume(),be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="html","expected html on stack"),be.value=de}function F(){const de=this.resume(),be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="inlineCode","expected inline code on stack"),be.value=de}function G(){const de=this.stack[this.stack.length-1];if(ue(de,"expected node on stack"),ue(de.type==="link","expected link on stack"),this.data.inReference){const be=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=be,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function z(){const de=this.stack[this.stack.length-1];if(ue(de,"expected node on stack"),ue(de.type==="image","expected image on stack"),this.data.inReference){const be=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=be,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function K(de){const be=this.sliceSerialize(de),Se=this.stack[this.stack.length-2];ue(Se,"expected ancestor on stack"),ue(Se.type==="image"||Se.type==="link","expected image or link on stack"),Se.label=uCe(be),Se.identifier=Si(be).toLowerCase()}function L(){const de=this.stack[this.stack.length-1];ue(de,"expected node on stack"),ue(de.type==="fragment","expected fragment on stack");const be=this.resume(),Se=this.stack[this.stack.length-1];if(ue(Se,"expected node on stack"),ue(Se.type==="image"||Se.type==="link","expected image or link on stack"),this.data.inReference=!0,Se.type==="link"){const ze=de.children;Se.children=ze}else Se.alt=be}function O(){const de=this.resume(),be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="image"||be.type==="link","expected image or link on stack"),be.url=de}function $(){const de=this.resume(),be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="image"||be.type==="link","expected image or link on stack"),be.title=de}function H(){this.data.inReference=void 0}function U(){this.data.referenceType="collapsed"}function ee(de){const be=this.resume(),Se=this.stack[this.stack.length-1];ue(Se,"expected node on stack"),ue(Se.type==="image"||Se.type==="link","expected image reference or link reference on stack"),Se.label=be,Se.identifier=Si(this.sliceSerialize(de)).toLowerCase(),this.data.referenceType="full"}function X(de){ue(de.type==="characterReferenceMarkerNumeric"||de.type==="characterReferenceMarkerHexadecimal"),this.data.characterReferenceType=de.type}function ge(de){const be=this.sliceSerialize(de),Se=this.data.characterReferenceType;let ze;if(Se)ze=V9(be,Se===W.characterReferenceMarkerNumeric?We.numericBaseDecimal:We.numericBaseHexadecimal),this.data.characterReferenceType=void 0;else{const ut=CA(be);ue(ut!==!1,"expected reference to decode"),ze=ut}const Ye=this.stack[this.stack.length-1];ue(Ye,"expected `node`"),ue("value"in Ye,"expected `node.value`"),Ye.value+=ze}function J(de){const be=this.stack.pop();ue(be,"expected `node`"),ue(be.position,"expected `node.position`"),be.position.end=Ca(de.end)}function j(de){A.call(this,de);const be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="link","expected link on stack"),be.url=this.sliceSerialize(de)}function Y(de){A.call(this,de);const be=this.stack[this.stack.length-1];ue(be,"expected node on stack"),ue(be.type==="link","expected link on stack"),be.url="mailto:"+this.sliceSerialize(de)}function Q(){return{type:"blockquote",children:[]}}function ie(){return{type:"code",lang:null,meta:null,value:""}}function re(){return{type:"inlineCode",value:""}}function pe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function M(){return{type:"emphasis",children:[]}}function oe(){return{type:"heading",depth:0,children:[]}}function le(){return{type:"break"}}function q(){return{type:"html",value:""}}function V(){return{type:"image",title:null,url:"",alt:null}}function ae(){return{type:"link",title:null,url:"",children:[]}}function xe(de){return{type:"list",ordered:de.type==="listOrdered",start:null,spread:de._spread,children:[]}}function Te(de){return{type:"listItem",spread:de._spread,checked:null,children:[]}}function fe(){return{type:"paragraph",children:[]}}function ke(){return{type:"strong",children:[]}}function Me(){return{type:"text",value:""}}function Re(){return{type:"thematicBreak"}}}function Ca(t){return{line:t.line,column:t.column,offset:t.offset}}function nz(t,e){let r=-1;for(;++r<e.length;){const n=e[r];Array.isArray(n)?nz(t,n):pCe(t,n)}}function pCe(t,e){let r;for(r in e)if(rz.call(e,r))switch(r){case"canContainEols":{const n=e[r];n&&t[r].push(...n);break}case"transforms":{const n=e[r];n&&t[r].push(...n);break}case"enter":case"exit":{const n=e[r];n&&Object.assign(t[r],n);break}}}function wO(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+pf({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+pf({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+pf({start:e.start,end:e.end})+") is still open")}function mCe(t){const e=this;e.parser=r;function r(n){return hCe(n,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function gCe(t,e){const r={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,r),t.applyData(e,r)}function bCe(t,e){const r={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,r),[t.applyData(e,r),{type:"text",value:`
`}]}function yCe(t,e){const r=e.value?e.value+`
`:"",n={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(n.className=["language-"+s[0]]);let i={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function vCe(t,e){const r={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function _Ce(t,e){const r={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function xCe(t,e){const r=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=String(e.identifier).toUpperCase(),s=Wd(n.toLowerCase()),i=t.footnoteOrder.indexOf(n);let o,a=t.footnoteCounts.get(n);a===void 0?(a=0,t.footnoteOrder.push(n),o=t.footnoteOrder.length):o=i+1,a+=1,t.footnoteCounts.set(n,a);const l={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+s,id:r+"fnref-"+s+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function wCe(t,e){const r={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function SCe(t,e){if(t.options.allowDangerousHtml){const r={type:"raw",value:e.value};return t.patch(e,r),t.applyData(e,r)}}function sz(t,e){const r=e.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+n}];const s=t.all(e),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=n:s.push({type:"text",value:n}),s}function ECe(t,e){const r=String(e.identifier).toUpperCase(),n=t.definitionById.get(r);if(!n)return sz(t,e);const s={src:Wd(n.url||""),alt:e.alt};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,i),t.applyData(e,i)}function CCe(t,e){const r={src:Wd(e.url)};e.alt!==null&&e.alt!==void 0&&(r.alt=e.alt),e.title!==null&&e.title!==void 0&&(r.title=e.title);const n={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,n),t.applyData(e,n)}function TCe(t,e){const r={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return t.patch(e,n),t.applyData(e,n)}function kCe(t,e){const r=String(e.identifier).toUpperCase(),n=t.definitionById.get(r);if(!n)return sz(t,e);const s={href:Wd(n.url||"")};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function ACe(t,e){const r={href:Wd(e.url)};e.title!==null&&e.title!==void 0&&(r.title=e.title);const n={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function RCe(t,e,r){const n=t.all(e),s=r?PCe(r):iz(e),i={},o=[];if(typeof e.checked=="boolean"){const u=n[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},n.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let a=-1;for(;++a<n.length;){const u=n[a];(s||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!s?o.push(...u.children):o.push(u)}const l=n[n.length-1];l&&(s||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:i,children:o};return t.patch(e,c),t.applyData(e,c)}function PCe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const r=t.children;let n=-1;for(;!e&&++n<r.length;)e=iz(r[n])}return e}function iz(t){const e=t.spread;return e??t.children.length>1}function ICe(t,e){const r={},n=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(r.start=e.start);++s<n.length;){const o=n[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:r,children:t.wrap(n,!0)};return t.patch(e,i),t.applyData(e,i)}function NCe(t,e){const r={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function DCe(t,e){const r={type:"root",children:t.wrap(t.all(e))};return t.patch(e,r),t.applyData(e,r)}function OCe(t,e){const r={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function LCe(t,e){const r=t.all(e),n=r.shift(),s=[];if(n){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([n],!0)};t.patch(e.children[0],o),s.push(o)}if(r.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(r,!0)},a=ko(e.children[1]),l=l_(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),s.push(o)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,i),t.applyData(e,i)}function MCe(t,e,r){const n=r?r.children:void 0,i=(n?n.indexOf(e):1)===0?"th":"td",o=r&&r.type==="table"?r.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const d=e.children[l],h={},f=o?o[l]:void 0;f&&(h.align=f);let b={type:"element",tagName:i,properties:h,children:[]};d&&(b.children=t.all(d),t.patch(d,b),b=t.applyData(d,b)),c.push(b)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function jCe(t,e){const r={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}const SO=9,EO=32;function FCe(t){const e=String(t),r=/\r?\n|\r/g;let n=r.exec(e),s=0;const i=[];for(;n;)i.push(CO(e.slice(s,n.index),s>0,!0),n[0]),s=n.index+n[0].length,n=r.exec(e);return i.push(CO(e.slice(s),s>0,!1)),i.join("")}function CO(t,e,r){let n=0,s=t.length;if(e){let i=t.codePointAt(n);for(;i===SO||i===EO;)n++,i=t.codePointAt(n)}if(r){let i=t.codePointAt(s-1);for(;i===SO||i===EO;)s--,i=t.codePointAt(s-1)}return s>n?t.slice(n,s):""}function BCe(t,e){const r={type:"text",value:FCe(String(e.value))};return t.patch(e,r),t.applyData(e,r)}function $Ce(t,e){const r={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,r),t.applyData(e,r)}const UCe={blockquote:gCe,break:bCe,code:yCe,delete:vCe,emphasis:_Ce,footnoteReference:xCe,heading:wCe,html:SCe,imageReference:ECe,image:CCe,inlineCode:TCe,linkReference:kCe,link:ACe,listItem:RCe,list:ICe,paragraph:NCe,root:DCe,strong:OCe,table:LCe,tableCell:jCe,tableRow:MCe,text:BCe,thematicBreak:$Ce,toml:Yg,yaml:Yg,definition:Yg,footnoteDefinition:Yg};function Yg(){}const oz=-1,d_=0,gf=1,Sy=2,kA=3,AA=4,RA=5,PA=6,az=7,lz=8,TO=typeof self=="object"?self:globalThis,HCe=(t,e)=>{const r=(s,i)=>(t.set(i,s),s),n=s=>{if(t.has(s))return t.get(s);const[i,o]=e[s];switch(i){case d_:case oz:return r(o,s);case gf:{const a=r([],s);for(const l of o)a.push(n(l));return a}case Sy:{const a=r({},s);for(const[l,c]of o)a[n(l)]=n(c);return a}case kA:return r(new Date(o),s);case AA:{const{source:a,flags:l}=o;return r(new RegExp(a,l),s)}case RA:{const a=r(new Map,s);for(const[l,c]of o)a.set(n(l),n(c));return a}case PA:{const a=r(new Set,s);for(const l of o)a.add(n(l));return a}case az:{const{name:a,message:l}=o;return r(new TO[a](l),s)}case lz:return r(BigInt(o),s);case"BigInt":return r(Object(BigInt(o)),s);case"ArrayBuffer":return r(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return r(new DataView(a),o)}}return r(new TO[i](o),s)};return n},kO=t=>HCe(new Map,t)(0),au="",{toString:zCe}={},{keys:WCe}=Object,xh=t=>{const e=typeof t;if(e!=="object"||!t)return[d_,e];const r=zCe.call(t).slice(8,-1);switch(r){case"Array":return[gf,au];case"Object":return[Sy,au];case"Date":return[kA,au];case"RegExp":return[AA,au];case"Map":return[RA,au];case"Set":return[PA,au];case"DataView":return[gf,r]}return r.includes("Array")?[gf,r]:r.includes("Error")?[az,r]:[Sy,r]},Xg=([t,e])=>t===d_&&(e==="function"||e==="symbol"),VCe=(t,e,r,n)=>{const s=(o,a)=>{const l=n.push(o)-1;return r.set(a,l),l},i=o=>{if(r.has(o))return r.get(o);let[a,l]=xh(o);switch(a){case d_:{let u=o;switch(l){case"bigint":a=lz,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return s([oz],o)}return s([a,u],o)}case gf:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),s([l,[...h]],o)}const u=[],d=s([a,u],o);for(const h of o)u.push(i(h));return d}case Sy:{if(l)switch(l){case"BigInt":return s([l,o.toString()],o);case"Boolean":case"Number":case"String":return s([l,o.valueOf()],o)}if(e&&"toJSON"in o)return i(o.toJSON());const u=[],d=s([a,u],o);for(const h of WCe(o))(t||!Xg(xh(o[h])))&&u.push([i(h),i(o[h])]);return d}case kA:return s([a,o.toISOString()],o);case AA:{const{source:u,flags:d}=o;return s([a,{source:u,flags:d}],o)}case RA:{const u=[],d=s([a,u],o);for(const[h,f]of o)(t||!(Xg(xh(h))||Xg(xh(f))))&&u.push([i(h),i(f)]);return d}case PA:{const u=[],d=s([a,u],o);for(const h of o)(t||!Xg(xh(h)))&&u.push(i(h));return d}}const{message:c}=o;return s([a,{name:l,message:c}],o)};return i},AO=(t,{json:e,lossy:r}={})=>{const n=[];return VCe(!(e||r),!!e,new Map,n)(t),n},Cc=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?kO(AO(t,e)):structuredClone(t):(t,e)=>kO(AO(t,e));function GCe(t,e){const r=[{type:"text",value:""}];return e>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),r}function qCe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function KCe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=t.options.footnoteBackContent||GCe,n=t.options.footnoteBackLabel||qCe,s=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),d=String(c.identifier).toUpperCase(),h=Wd(d.toLowerCase());let f=0;const b=[],m=t.footnoteCounts.get(d);for(;m!==void 0&&++f<=m;){b.length>0&&b.push({type:"text",value:" "});let v=typeof r=="string"?r:r(l,f);typeof v=="string"&&(v={type:"text",value:v}),b.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(l,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=u[u.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...b)}else u.push(...b);const y={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(u,!0)};t.patch(c,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Cc(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const h_=function(t){if(t==null)return ZCe;if(typeof t=="function")return f_(t);if(typeof t=="object")return Array.isArray(t)?YCe(t):XCe(t);if(typeof t=="string")return JCe(t);throw new Error("Expected function, string, or object as test")};function YCe(t){const e=[];let r=-1;for(;++r<t.length;)e[r]=h_(t[r]);return f_(n);function n(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function XCe(t){const e=t;return f_(r);function r(n){const s=n;let i;for(i in t)if(s[i]!==e[i])return!1;return!0}}function JCe(t){return f_(e);function e(r){return r&&r.type===t}}function f_(t){return e;function e(r,n,s){return!!(QCe(r)&&t.call(this,r,typeof n=="number"?n:void 0,s||void 0))}}function ZCe(){return!0}function QCe(t){return t!==null&&typeof t=="object"&&"type"in t}const cz=[],eTe=!0,VE=!1,uz="skip";function dz(t,e,r,n){let s;typeof e=="function"&&typeof r!="function"?(n=r,r=e):s=e;const i=h_(s),o=n?-1:1;a(t,void 0,[])();function a(l,c,u){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=cz,b,m,g;if((!e||i(l,c,u[u.length-1]||void 0))&&(f=tTe(r(l,u)),f[0]===VE))return f;if("children"in l&&l.children){const y=l;if(y.children&&f[0]!==uz)for(m=(n?y.children.length:-1)+o,g=u.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(b=a(v,m,g)(),b[0]===VE)return b;m=typeof b[1]=="number"?b[1]:m+o}}return f}}}function tTe(t){return Array.isArray(t)?t:typeof t=="number"?[eTe,t]:t==null?cz:[t]}function Vd(t,e,r,n){let s,i,o;typeof e=="function"&&typeof r!="function"?(i=void 0,o=e,s=r):(i=e,o=r,s=n),dz(t,i,a,s);function a(l,c){const u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return o(l,d,u)}}const GE={}.hasOwnProperty,rTe={};function nTe(t,e){const r=e||rTe,n=new Map,s=new Map,i=new Map,o={...UCe,...r.handlers},a={all:c,applyData:iTe,definitionById:n,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:l,options:r,patch:sTe,wrap:aTe};return Vd(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?n:s,h=String(u.identifier).toUpperCase();d.has(h)||d.set(h,u)}}),a;function l(u,d){const h=u.type,f=a.handlers[h];if(GE.call(a.handlers,h)&&f)return f(a,u,d);if(a.options.passThrough&&a.options.passThrough.includes(h)){if("children"in u){const{children:m,...g}=u,y=Cc(g);return y.children=a.all(u),y}return Cc(u)}return(a.options.unknownHandler||oTe)(a,u,d)}function c(u){const d=[];if("children"in u){const h=u.children;let f=-1;for(;++f<h.length;){const b=a.one(h[f],u);if(b){if(f&&h[f-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=RO(b.value)),!Array.isArray(b)&&b.type==="element")){const m=b.children[0];m&&m.type==="text"&&(m.value=RO(m.value))}Array.isArray(b)?d.push(...b):d.push(b)}}}return d}}function sTe(t,e){t.position&&(e.position=F9(t))}function iTe(t,e){let r=e;if(t&&t.data){const n=t.data.hName,s=t.data.hChildren,i=t.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const o="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:o}}r.type==="element"&&i&&Object.assign(r.properties,Cc(i)),"children"in r&&r.children&&s!==null&&s!==void 0&&(r.children=s)}return r}function oTe(t,e){const r=e.data||{},n="value"in e&&!(GE.call(r,"hProperties")||GE.call(r,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function aTe(t,e){const r=[];let n=-1;for(e&&r.push({type:"text",value:`
`});++n<t.length;)n&&r.push({type:"text",value:`
`}),r.push(t[n]);return e&&t.length>0&&r.push({type:"text",value:`
`}),r}function RO(t){let e=0,r=t.charCodeAt(e);for(;r===9||r===32;)e++,r=t.charCodeAt(e);return t.slice(e)}function PO(t,e){const r=nTe(t,e),n=r.one(t,void 0),s=KCe(r),i=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return s&&(ue("children"in i),i.children.push({type:"text",value:`
`},s)),i}function lTe(t,e){return t&&"run"in t?async function(r,n){const s=PO(r,{file:n,...e});await t.run(s,n)}:function(r,n){return PO(r,{file:n,...t||e})}}function IO(t){if(t)throw t}var J0=Object.prototype.hasOwnProperty,hz=Object.prototype.toString,NO=Object.defineProperty,DO=Object.getOwnPropertyDescriptor,OO=function(e){return typeof Array.isArray=="function"?Array.isArray(e):hz.call(e)==="[object Array]"},LO=function(e){if(!e||hz.call(e)!=="[object Object]")return!1;var r=J0.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&J0.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var s;for(s in e);return typeof s>"u"||J0.call(e,s)},MO=function(e,r){NO&&r.name==="__proto__"?NO(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},jO=function(e,r){if(r==="__proto__")if(J0.call(e,r)){if(DO)return DO(e,r).value}else return;return e[r]},cTe=function t(){var e,r,n,s,i,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(r in e)n=jO(a,r),s=jO(e,r),a!==s&&(u&&s&&(LO(s)||(i=OO(s)))?(i?(i=!1,o=n&&OO(n)?n:[]):o=n&&LO(n)?n:{},MO(a,{name:r,newValue:t(u,o,s)})):typeof s<"u"&&MO(a,{name:r,newValue:s}));return a};const Rw=gl(cTe);function qE(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function uTe(){const t=[],e={run:r,use:n};return e;function r(...s){let i=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...s);function a(l,...c){const u=t[++i];let d=-1;if(l){o(l);return}for(;++d<s.length;)(c[d]===null||c[d]===void 0)&&(c[d]=s[d]);s=c,u?dTe(u,a)(...c):o(null,...c)}}function n(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function dTe(t,e){let r;return n;function n(...o){const a=t.length>o.length;let l;a&&o.push(s);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&r)throw u;return s(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(i,s):l instanceof Error?s(l):i(l))}function s(o,...a){r||(r=!0,e(o,...a))}function i(o){s(null,o)}}const Zi={basename:hTe,dirname:fTe,extname:pTe,join:mTe,sep:"/"};function hTe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');cm(t);let r=0,n=-1,s=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(i){r=s+1;break}}else n<0&&(i=!0,n=s+1);return n<0?"":t.slice(r,n)}if(e===t)return"";let o=-1,a=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(i){r=s+1;break}}else o<0&&(i=!0,o=s+1),a>-1&&(t.codePointAt(s)===e.codePointAt(a--)?a<0&&(n=s):(a=-1,n=o));return r===n?n=o:n<0&&(n=t.length),t.slice(r,n)}function fTe(t){if(cm(t),t.length===0)return".";let e=-1,r=t.length,n;for(;--r;)if(t.codePointAt(r)===47){if(n){e=r;break}}else n||(n=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function pTe(t){cm(t);let e=t.length,r=-1,n=0,s=-1,i=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){n=e+1;break}continue}r<0&&(o=!0,r=e+1),a===46?s<0?s=e:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||r<0||i===0||i===1&&s===r-1&&s===n+1?"":t.slice(s,r)}function mTe(...t){let e=-1,r;for(;++e<t.length;)cm(t[e]),t[e]&&(r=r===void 0?t[e]:r+"/"+t[e]);return r===void 0?".":gTe(r)}function gTe(t){cm(t);const e=t.codePointAt(0)===47;let r=bTe(t,!e);return r.length===0&&!e&&(r="."),r.length>0&&t.codePointAt(t.length-1)===47&&(r+="/"),e?"/"+r:r}function bTe(t,e){let r="",n=0,s=-1,i=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(l=r.lastIndexOf("/"),l!==r.length-1){l<0?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),s=o,i=0;continue}}else if(r.length>0){r="",n=0,s=o,i=0;continue}}e&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+t.slice(s+1,o):r=t.slice(s+1,o),n=o-s-1;s=o,i=0}else a===46&&i>-1?i++:i=-1}return r}function cm(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const yTe={cwd:vTe};function vTe(){return"/"}function KE(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function _Te(t){if(typeof t=="string")t=new URL(t);else if(!KE(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return xTe(t)}function xTe(t){if(t.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const e=t.pathname;let r=-1;for(;++r<e.length;)if(e.codePointAt(r)===37&&e.codePointAt(r+1)===50){const n=e.codePointAt(r+2);if(n===70||n===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Pw=["history","path","basename","stem","extname","dirname"];class fz{constructor(e){let r;e?KE(e)?r={path:e}:typeof e=="string"||wTe(e)?r={value:e}:r=e:r={},this.cwd="cwd"in r?"":yTe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<Pw.length;){const i=Pw[n];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let s;for(s in r)Pw.includes(s)||(this[s]=r[s])}get basename(){return typeof this.path=="string"?Zi.basename(this.path):void 0}set basename(e){Nw(e,"basename"),Iw(e,"basename"),this.path=Zi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Zi.dirname(this.path):void 0}set dirname(e){FO(this.basename,"dirname"),this.path=Zi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Zi.extname(this.path):void 0}set extname(e){if(Iw(e,"extname"),FO(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Zi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){KE(e)&&(e=_Te(e)),Nw(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Zi.basename(this.path,this.extname):void 0}set stem(e){Nw(e,"stem"),Iw(e,"stem"),this.path=Zi.join(this.dirname||"",e+(this.extname||""))}fail(e,r,n){const s=this.message(e,r,n);throw s.fatal=!0,s}info(e,r,n){const s=this.message(e,r,n);return s.fatal=void 0,s}message(e,r,n){const s=new Ln(e,r,n);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Iw(t,e){if(t&&t.includes(Zi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Zi.sep+"`")}function Nw(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function FO(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function wTe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const STe=function(t){const n=this.constructor.prototype,s=n[t],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,n),i},ETe={}.hasOwnProperty;class IA extends STe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=uTe()}copy(){const e=new IA;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];e.use(...n)}return e.data(Rw(!0,{},this.namespace)),e}data(e,r){return typeof e=="string"?arguments.length===2?(Lw("data",this.frozen),this.namespace[e]=r,this):ETe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Lw("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const s=r.call(e,...n);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const r=Jg(e),n=this.parser||this.Parser;return Dw("parse",n),n(String(r),r)}process(e,r){const n=this;return this.freeze(),Dw("process",this.parser||this.Parser),Ow("process",this.compiler||this.Compiler),r?s(void 0,r):new Promise(s);function s(i,o){const a=Jg(e),l=n.parse(a);n.run(l,a,function(u,d,h){if(u||!d||!h)return c(u);const f=d,b=n.stringify(f,h);kTe(b)?h.value=b:h.result=b,c(u,h)});function c(u,d){u||!d?o(u):i?i(d):(ue(r,"`done` is defined if `resolve` is not"),r(void 0,d))}}}processSync(e){let r=!1,n;return this.freeze(),Dw("processSync",this.parser||this.Parser),Ow("processSync",this.compiler||this.Compiler),this.process(e,s),$O("processSync","process",r),ue(n,"we either bailed on an error or have a tree"),n;function s(i,o){r=!0,IO(i),n=o}}run(e,r,n){BO(e),this.freeze();const s=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?i(void 0,n):new Promise(i);function i(o,a){ue(typeof r!="function","`file` cant be a `done` anymore, we checked");const l=Jg(r);s.run(e,l,c);function c(u,d,h){const f=d||e;u?a(u):o?o(f):(ue(n,"`done` is defined if `resolve` is not"),n(void 0,f,h))}}}runSync(e,r){let n=!1,s;return this.run(e,r,i),$O("runSync","run",n),ue(s,"we either bailed on an error or have a tree"),s;function i(o,a){IO(o),s=a,n=!0}}stringify(e,r){this.freeze();const n=Jg(r),s=this.compiler||this.Compiler;return Ow("stringify",s),BO(e),s(e,n)}use(e,...r){const n=this.attachers,s=this.namespace;if(Lw("use",this.frozen),e!=null)if(typeof e=="function")l(e,r);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function i(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...d]=c;l(u,d)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(s.settings=Rw(!0,s.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const d=c[u];i(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,h=-1;for(;++d<n.length;)if(n[d][0]===c){h=d;break}if(h===-1)n.push([c,...u]);else if(u.length>0){let[f,...b]=u;const m=n[h][1];qE(m)&&qE(f)&&(f=Rw(!0,m,f)),n[h]=[c,f,...b]}}}}const CTe=new IA().freeze();function Dw(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Ow(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Lw(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function BO(t){if(!qE(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function $O(t,e,r){if(!r)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Jg(t){return TTe(t)?t:new fz(t)}function TTe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function kTe(t){return typeof t=="string"||ATe(t)}function ATe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const RTe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",UO=[],HO={allowDangerousHtml:!0},PTe=/^(https?|ircs?|mailto|xmpp)$/i,ITe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function NTe(t){const e=DTe(t),r=OTe(t);return LTe(e.runSync(e.parse(r),r),t)}function DTe(t){const e=t.rehypePlugins||UO,r=t.remarkPlugins||UO,n=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...HO}:HO;return CTe().use(mCe).use(r).use(lTe,n).use(e)}function OTe(t){const e=t.children||"",r=new fz;return typeof e=="string"?r.value=e:jE("Unexpected value `"+e+"` for `children` prop, expected `string`"),r}function LTe(t,e){const r=e.allowedElements,n=e.allowElement,s=e.components,i=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||MTe;for(const u of ITe)Object.hasOwn(e,u.from)&&jE("Unexpected `"+u.from+"` prop, "+(u.to?"use `"+u.to+"` instead":"remove it")+" (see <"+RTe+"#"+u.id+"> for more info)");return r&&i&&jE("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),Vd(t,c),K1e(t,{Fragment:p.Fragment,components:s,ignoreInvalidStyle:!0,jsx:p.jsx,jsxs:p.jsxs,passKeys:!0,passNode:!0});function c(u,d,h){if(u.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let f;for(f in Cw)if(Object.hasOwn(Cw,f)&&Object.hasOwn(u.properties,f)){const b=u.properties[f],m=Cw[f];(m===null||m.includes(u.tagName))&&(u.properties[f]=l(String(b||""),f,u))}}if(u.type==="element"){let f=r?!r.includes(u.tagName):i?i.includes(u.tagName):!1;if(!f&&n&&typeof d=="number"&&(f=!n(u,d,h)),f&&h&&typeof d=="number")return a&&u.children?h.children.splice(d,1,...u.children):h.children.splice(d,1),d}}}function MTe(t){const e=t.indexOf(":"),r=t.indexOf("?"),n=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||r!==-1&&e>r||n!==-1&&e>n||PTe.test(t.slice(0,e))?t:""}const zO=/[#.]/g;function jTe(t,e){const r=t||"",n={};let s=0,i,o;for(;s<r.length;){zO.lastIndex=s;const a=zO.exec(r),l=r.slice(s,a?a.index:r.length);l&&(i?i==="#"?n.id=l:Array.isArray(n.className)?n.className.push(l):n.className=[l]:o=l,s+=l.length),a&&(i=a[0],s++)}return{type:"element",tagName:o||e||"div",properties:n,children:[]}}function pz(t,e,r){const n=r?UTe(r):void 0;function s(i,o,...a){let l;if(i==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else{l=jTe(i,e);const c=l.tagName.toLowerCase(),u=n?n.get(c):void 0;if(l.tagName=u||c,FTe(o))a.unshift(o);else for(const[d,h]of Object.entries(o))BTe(t,l.properties,d,h)}for(const c of a)YE(l.children,c);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return s}function FTe(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,r=Object.keys(t);for(const n of r){const s=e[n];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const i=s;for(const o of i)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function BTe(t,e,r,n){const s=am(t,r);let i;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;i=n}else typeof n=="boolean"?i=n:typeof n=="string"?s.spaceSeparated?i=nO(n):s.commaSeparated?i=ZD(n):s.commaOrSpaceSeparated?i=nO(ZD(n).join(" ")):i=WO(s,s.property,n):Array.isArray(n)?i=[...n]:i=s.property==="style"?$Te(n):String(n);if(Array.isArray(i)){const o=[];for(const a of i)o.push(WO(s,s.property,a));i=o}s.property==="className"&&Array.isArray(e.className)&&(i=e.className.concat(i)),e[s.property]=i}}function YE(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const r of e)YE(t,r);else if(typeof e=="object"&&"type"in e)e.type==="root"?YE(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function WO(t,e,r){if(typeof r=="string"){if(t.number&&r&&!Number.isNaN(Number(r)))return Number(r);if((t.boolean||t.overloadedBoolean)&&(r===""||mp(r)===mp(e)))return!0}return r}function $Te(t){const e=[];for(const[r,n]of Object.entries(t))e.push([r,n].join(": "));return e.join("; ")}function UTe(t){const e=new Map;for(const r of t)e.set(r.toLowerCase(),r);return e}const HTe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],zTe=pz(zd,"div"),WTe=pz(To,"g",HTe);function VTe(t){const e=String(t),r=[];return{toOffset:s,toPoint:n};function n(i){if(typeof i=="number"&&i>-1&&i<=e.length){let o=0;for(;;){let a=r[o];if(a===void 0){const l=VO(e,r[o-1]);a=l===-1?e.length+1:l+1,r[o]=a}if(a>i)return{line:o+1,column:i-(o>0?r[o-1]:0)+1,offset:i};o++}}}function s(i){if(i&&typeof i.line=="number"&&typeof i.column=="number"&&!Number.isNaN(i.line)&&!Number.isNaN(i.column)){for(;r.length<i.line;){const a=r[r.length-1],l=VO(e,a),c=l===-1?e.length+1:l+1;if(a===c)break;r.push(c)}const o=(i.line>1?r[i.line-2]:0)+i.column-1;if(o<r[i.line-1])return o}}}function VO(t,e){const r=t.indexOf("\r",e),n=t.indexOf(`
`,e);return n===-1?r:r===-1||r+1===n?n:r<n?r:n}const ec={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},mz={}.hasOwnProperty,GTe=Object.prototype;function qTe(t,e){const r=e||{};return NA({file:r.file||void 0,location:!1,schema:r.space==="svg"?To:zd,verbose:r.verbose||!1},t)}function NA(t,e){let r;switch(e.nodeName){case"#comment":{const n=e;return r={type:"comment",value:n.data},Z0(t,n,r),r}case"#document":case"#document-fragment":{const n=e,s="mode"in n?n.mode==="quirks"||n.mode==="limited-quirks":!1;if(r={type:"root",children:gz(t,e.childNodes),data:{quirksMode:s}},t.file&&t.location){const i=String(t.file),o=VTe(i),a=o.toPoint(0),l=o.toPoint(i.length);ue(a,"expected `start`"),ue(l,"expected `end`"),r.position={start:a,end:l}}return r}case"#documentType":{const n=e;return r={type:"doctype"},Z0(t,n,r),r}case"#text":{const n=e;return r={type:"text",value:n.value},Z0(t,n,r),r}default:return r=KTe(t,e),r}}function gz(t,e){let r=-1;const n=[];for(;++r<e.length;){const s=NA(t,e[r]);n.push(s)}return n}function KTe(t,e){const r=t.schema;t.schema=e.namespaceURI===ec.svg?To:zd;let n=-1;const s={};for(;++n<e.attrs.length;){const a=e.attrs[n],l=(a.prefix?a.prefix+":":"")+a.name;mz.call(GTe,l)||(s[l]=a.value)}const o=(t.schema.space==="svg"?WTe:zTe)(e.tagName,s,gz(t,e.childNodes));if(Z0(t,e,o),o.tagName==="template"){const a=e,l=a.sourceCodeLocation,c=l&&l.startTag&&Du(l.startTag),u=l&&l.endTag&&Du(l.endTag),d=NA(t,a.content);c&&u&&t.file&&(d.position={start:c.end,end:u.start}),o.content=d}return t.schema=r,o}function Z0(t,e,r){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const n=YTe(t,r,e.sourceCodeLocation);n&&(t.location=!0,r.position=n)}}function YTe(t,e,r){const n=Du(r);if(e.type==="element"){const s=e.children[e.children.length-1];if(n&&!r.endTag&&s&&s.position&&s.position.end&&(n.end=Object.assign({},s.position.end)),t.verbose){const i={};let o;if(r.attrs)for(o in r.attrs)mz.call(r.attrs,o)&&(i[am(t.schema,o).property]=Du(r.attrs[o]));ue(r.startTag,"a start tag should exist");const a=Du(r.startTag),l=r.endTag?Du(r.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=i,e.data={position:c}}}return n}function Du(t){const e=GO({line:t.startLine,column:t.startCol,offset:t.startOffset}),r=GO({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||r?{start:e,end:r}:void 0}function GO(t){return t.line&&t.column?t:void 0}const qO={}.hasOwnProperty;function DA(t,e){const r=e||{};function n(s,...i){let o=n.invalid;const a=n.handlers;if(s&&qO.call(s,t)){const l=String(s[t]);o=qO.call(a,l)?a[l]:n.unknown}if(o)return o.call(this,s,...i)}return n.handlers=r.handlers||{},n.invalid=r.invalid,n.unknown=r.unknown,n}const XTe={},JTe={}.hasOwnProperty,bz=DA("type",{handlers:{root:QTe,element:ske,text:rke,comment:nke,doctype:tke}});function ZTe(t,e){const n=(e||XTe).space;return bz(t,n==="svg"?To:zd)}function QTe(t,e){const r={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return r.childNodes=OA(t.children,r,e),Gd(t,r),r}function eke(t,e){const r={nodeName:"#document-fragment",childNodes:[]};return r.childNodes=OA(t.children,r,e),Gd(t,r),r}function tke(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Gd(t,e),e}function rke(t){const e={nodeName:"#text",value:t.value,parentNode:null};return Gd(t,e),e}function nke(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return Gd(t,e),e}function ske(t,e){const r=e;let n=r;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(n=To);const s=[];let i;if(t.properties){for(i in t.properties)if(i!=="children"&&JTe.call(t.properties,i)){const l=ike(n,i,t.properties[i]);l&&s.push(l)}}const o=n.space;ue(o);const a={nodeName:t.tagName,tagName:t.tagName,attrs:s,namespaceURI:ec[o],childNodes:[],parentNode:null};return a.childNodes=OA(t.children,a,n),Gd(t,a),t.tagName==="template"&&t.content&&(a.content=eke(t.content,n)),a}function ike(t,e,r){const n=am(t,e);if(r===!1||r===null||r===void 0||typeof r=="number"&&Number.isNaN(r)||!r&&n.boolean)return;Array.isArray(r)&&(r=n.commaSeparated?bA(r):vA(r));const s={name:n.attribute,value:r===!0?"":String(r)};if(n.space&&n.space!=="html"&&n.space!=="svg"){const i=s.name.indexOf(":");i<0?s.prefix="":(s.name=s.name.slice(i+1),s.prefix=n.attribute.slice(0,i)),s.namespace=ec[n.space]}return s}function OA(t,e,r){let n=-1;const s=[];if(t)for(;++n<t.length;){const i=bz(t[n],r);i.parentNode=e,s.push(i)}return s}function Gd(t,e){const r=t.position;r&&r.start&&r.end&&(ue(typeof r.start.offset=="number"),ue(typeof r.end.offset=="number"),e.sourceCodeLocation={startLine:r.start.line,startCol:r.start.column,startOffset:r.start.offset,endLine:r.end.line,endCol:r.end.column,endOffset:r.end.offset})}const yz=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],oke=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),vr="";var te;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(te||(te={}));const ss={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function vz(t){return t>=55296&&t<=57343}function ake(t){return t>=56320&&t<=57343}function lke(t,e){return(t-55296)*1024+9216+e}function _z(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function xz(t){return t>=64976&&t<=65007||oke.has(t)}var Ae;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ae||(Ae={}));const cke=65536;class uke{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=cke,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,r){const{line:n,col:s,offset:i}=this,o=s+r,a=i+r;return{code:e,startLine:n,endLine:n,startCol:o,endCol:o,startOffset:a,endOffset:a}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const r=this.html.charCodeAt(this.pos+1);if(ake(r))return this.pos++,this._addGap(),lke(e,r)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,te.EOF;return this._err(Ae.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,r){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=r}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,r){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(r)return this.html.startsWith(e,this.pos);for(let n=0;n<e.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==e.charCodeAt(n))return!1;return!0}peek(e){const r=this.pos+e;if(r>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,te.EOF;const n=this.html.charCodeAt(r);return n===te.CARRIAGE_RETURN?te.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,te.EOF;let e=this.html.charCodeAt(this.pos);return e===te.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,te.LINE_FEED):e===te.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,vz(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===te.LINE_FEED||e===te.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){_z(e)?this._err(Ae.controlCharacterInInputStream):xz(e)&&this._err(Ae.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var At;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(At||(At={}));function wz(t,e){for(let r=t.attrs.length-1;r>=0;r--)if(t.attrs[r].name===e)return t.attrs[r].value;return null}const dke=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),hke=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function fke(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=hke.get(t))!==null&&e!==void 0?e:t}var ln;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(ln||(ln={}));const pke=32;var Va;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Va||(Va={}));function XE(t){return t>=ln.ZERO&&t<=ln.NINE}function mke(t){return t>=ln.UPPER_A&&t<=ln.UPPER_F||t>=ln.LOWER_A&&t<=ln.LOWER_F}function gke(t){return t>=ln.UPPER_A&&t<=ln.UPPER_Z||t>=ln.LOWER_A&&t<=ln.LOWER_Z||XE(t)}function bke(t){return t===ln.EQUALS||gke(t)}var rn;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(rn||(rn={}));var qo;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(qo||(qo={}));class yke{constructor(e,r,n){this.decodeTree=e,this.emitCodePoint=r,this.errors=n,this.state=rn.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=qo.Strict}startEntity(e){this.decodeMode=e,this.state=rn.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,r){switch(this.state){case rn.EntityStart:return e.charCodeAt(r)===ln.NUM?(this.state=rn.NumericStart,this.consumed+=1,this.stateNumericStart(e,r+1)):(this.state=rn.NamedEntity,this.stateNamedEntity(e,r));case rn.NumericStart:return this.stateNumericStart(e,r);case rn.NumericDecimal:return this.stateNumericDecimal(e,r);case rn.NumericHex:return this.stateNumericHex(e,r);case rn.NamedEntity:return this.stateNamedEntity(e,r)}}stateNumericStart(e,r){return r>=e.length?-1:(e.charCodeAt(r)|pke)===ln.LOWER_X?(this.state=rn.NumericHex,this.consumed+=1,this.stateNumericHex(e,r+1)):(this.state=rn.NumericDecimal,this.stateNumericDecimal(e,r))}addToNumericResult(e,r,n,s){if(r!==n){const i=n-r;this.result=this.result*Math.pow(s,i)+Number.parseInt(e.substr(r,i),s),this.consumed+=i}}stateNumericHex(e,r){const n=r;for(;r<e.length;){const s=e.charCodeAt(r);if(XE(s)||mke(s))r+=1;else return this.addToNumericResult(e,n,r,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,n,r,16),-1}stateNumericDecimal(e,r){const n=r;for(;r<e.length;){const s=e.charCodeAt(r);if(XE(s))r+=1;else return this.addToNumericResult(e,n,r,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,n,r,10),-1}emitNumericEntity(e,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===ln.SEMI)this.consumed+=1;else if(this.decodeMode===qo.Strict)return 0;return this.emitCodePoint(fke(this.result),this.consumed),this.errors&&(e!==ln.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,r){const{decodeTree:n}=this;let s=n[this.treeIndex],i=(s&Va.VALUE_LENGTH)>>14;for(;r<e.length;r++,this.excess++){const o=e.charCodeAt(r);if(this.treeIndex=vke(n,s,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===qo.Attribute&&(i===0||bke(o))?0:this.emitNotTerminatedNamedEntity();if(s=n[this.treeIndex],i=(s&Va.VALUE_LENGTH)>>14,i!==0){if(o===ln.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==qo.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:r,decodeTree:n}=this,s=(n[r]&Va.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,r,n){const{decodeTree:s}=this;return this.emitCodePoint(r===1?s[e]&~Va.VALUE_LENGTH:s[e+1],n),r===3&&this.emitCodePoint(s[e+2],n),n}end(){var e;switch(this.state){case rn.NamedEntity:return this.result!==0&&(this.decodeMode!==qo.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case rn.NumericDecimal:return this.emitNumericEntity(0,2);case rn.NumericHex:return this.emitNumericEntity(0,3);case rn.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case rn.EntityStart:return 0}}}function vke(t,e,r,n){const s=(e&Va.BRANCH_LENGTH)>>7,i=e&Va.JUMP_TABLE;if(s===0)return i!==0&&n===i?r:-1;if(i){const l=n-i;return l<0||l>=s?-1:t[r+l]-1}let o=r,a=o+s-1;for(;o<=a;){const l=o+a>>>1,c=t[l];if(c<n)o=l+1;else if(c>n)a=l-1;else return t[l+s]}return-1}var Le;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Le||(Le={}));var hc;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(hc||(hc={}));var Ks;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Ks||(Ks={}));var _e;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(_e||(_e={}));var N;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(N||(N={}));const _ke=new Map([[_e.A,N.A],[_e.ADDRESS,N.ADDRESS],[_e.ANNOTATION_XML,N.ANNOTATION_XML],[_e.APPLET,N.APPLET],[_e.AREA,N.AREA],[_e.ARTICLE,N.ARTICLE],[_e.ASIDE,N.ASIDE],[_e.B,N.B],[_e.BASE,N.BASE],[_e.BASEFONT,N.BASEFONT],[_e.BGSOUND,N.BGSOUND],[_e.BIG,N.BIG],[_e.BLOCKQUOTE,N.BLOCKQUOTE],[_e.BODY,N.BODY],[_e.BR,N.BR],[_e.BUTTON,N.BUTTON],[_e.CAPTION,N.CAPTION],[_e.CENTER,N.CENTER],[_e.CODE,N.CODE],[_e.COL,N.COL],[_e.COLGROUP,N.COLGROUP],[_e.DD,N.DD],[_e.DESC,N.DESC],[_e.DETAILS,N.DETAILS],[_e.DIALOG,N.DIALOG],[_e.DIR,N.DIR],[_e.DIV,N.DIV],[_e.DL,N.DL],[_e.DT,N.DT],[_e.EM,N.EM],[_e.EMBED,N.EMBED],[_e.FIELDSET,N.FIELDSET],[_e.FIGCAPTION,N.FIGCAPTION],[_e.FIGURE,N.FIGURE],[_e.FONT,N.FONT],[_e.FOOTER,N.FOOTER],[_e.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[_e.FORM,N.FORM],[_e.FRAME,N.FRAME],[_e.FRAMESET,N.FRAMESET],[_e.H1,N.H1],[_e.H2,N.H2],[_e.H3,N.H3],[_e.H4,N.H4],[_e.H5,N.H5],[_e.H6,N.H6],[_e.HEAD,N.HEAD],[_e.HEADER,N.HEADER],[_e.HGROUP,N.HGROUP],[_e.HR,N.HR],[_e.HTML,N.HTML],[_e.I,N.I],[_e.IMG,N.IMG],[_e.IMAGE,N.IMAGE],[_e.INPUT,N.INPUT],[_e.IFRAME,N.IFRAME],[_e.KEYGEN,N.KEYGEN],[_e.LABEL,N.LABEL],[_e.LI,N.LI],[_e.LINK,N.LINK],[_e.LISTING,N.LISTING],[_e.MAIN,N.MAIN],[_e.MALIGNMARK,N.MALIGNMARK],[_e.MARQUEE,N.MARQUEE],[_e.MATH,N.MATH],[_e.MENU,N.MENU],[_e.META,N.META],[_e.MGLYPH,N.MGLYPH],[_e.MI,N.MI],[_e.MO,N.MO],[_e.MN,N.MN],[_e.MS,N.MS],[_e.MTEXT,N.MTEXT],[_e.NAV,N.NAV],[_e.NOBR,N.NOBR],[_e.NOFRAMES,N.NOFRAMES],[_e.NOEMBED,N.NOEMBED],[_e.NOSCRIPT,N.NOSCRIPT],[_e.OBJECT,N.OBJECT],[_e.OL,N.OL],[_e.OPTGROUP,N.OPTGROUP],[_e.OPTION,N.OPTION],[_e.P,N.P],[_e.PARAM,N.PARAM],[_e.PLAINTEXT,N.PLAINTEXT],[_e.PRE,N.PRE],[_e.RB,N.RB],[_e.RP,N.RP],[_e.RT,N.RT],[_e.RTC,N.RTC],[_e.RUBY,N.RUBY],[_e.S,N.S],[_e.SCRIPT,N.SCRIPT],[_e.SEARCH,N.SEARCH],[_e.SECTION,N.SECTION],[_e.SELECT,N.SELECT],[_e.SOURCE,N.SOURCE],[_e.SMALL,N.SMALL],[_e.SPAN,N.SPAN],[_e.STRIKE,N.STRIKE],[_e.STRONG,N.STRONG],[_e.STYLE,N.STYLE],[_e.SUB,N.SUB],[_e.SUMMARY,N.SUMMARY],[_e.SUP,N.SUP],[_e.TABLE,N.TABLE],[_e.TBODY,N.TBODY],[_e.TEMPLATE,N.TEMPLATE],[_e.TEXTAREA,N.TEXTAREA],[_e.TFOOT,N.TFOOT],[_e.TD,N.TD],[_e.TH,N.TH],[_e.THEAD,N.THEAD],[_e.TITLE,N.TITLE],[_e.TR,N.TR],[_e.TRACK,N.TRACK],[_e.TT,N.TT],[_e.U,N.U],[_e.UL,N.UL],[_e.SVG,N.SVG],[_e.VAR,N.VAR],[_e.WBR,N.WBR],[_e.XMP,N.XMP]]);function qd(t){var e;return(e=_ke.get(t))!==null&&e!==void 0?e:N.UNKNOWN}const Be=N,xke={[Le.HTML]:new Set([Be.ADDRESS,Be.APPLET,Be.AREA,Be.ARTICLE,Be.ASIDE,Be.BASE,Be.BASEFONT,Be.BGSOUND,Be.BLOCKQUOTE,Be.BODY,Be.BR,Be.BUTTON,Be.CAPTION,Be.CENTER,Be.COL,Be.COLGROUP,Be.DD,Be.DETAILS,Be.DIR,Be.DIV,Be.DL,Be.DT,Be.EMBED,Be.FIELDSET,Be.FIGCAPTION,Be.FIGURE,Be.FOOTER,Be.FORM,Be.FRAME,Be.FRAMESET,Be.H1,Be.H2,Be.H3,Be.H4,Be.H5,Be.H6,Be.HEAD,Be.HEADER,Be.HGROUP,Be.HR,Be.HTML,Be.IFRAME,Be.IMG,Be.INPUT,Be.LI,Be.LINK,Be.LISTING,Be.MAIN,Be.MARQUEE,Be.MENU,Be.META,Be.NAV,Be.NOEMBED,Be.NOFRAMES,Be.NOSCRIPT,Be.OBJECT,Be.OL,Be.P,Be.PARAM,Be.PLAINTEXT,Be.PRE,Be.SCRIPT,Be.SECTION,Be.SELECT,Be.SOURCE,Be.STYLE,Be.SUMMARY,Be.TABLE,Be.TBODY,Be.TD,Be.TEMPLATE,Be.TEXTAREA,Be.TFOOT,Be.TH,Be.THEAD,Be.TITLE,Be.TR,Be.TRACK,Be.UL,Be.WBR,Be.XMP]),[Le.MATHML]:new Set([Be.MI,Be.MO,Be.MN,Be.MS,Be.MTEXT,Be.ANNOTATION_XML]),[Le.SVG]:new Set([Be.TITLE,Be.FOREIGN_OBJECT,Be.DESC]),[Le.XLINK]:new Set,[Le.XML]:new Set,[Le.XMLNS]:new Set},JE=new Set([Be.H1,Be.H2,Be.H3,Be.H4,Be.H5,Be.H6]);_e.STYLE,_e.SCRIPT,_e.XMP,_e.IFRAME,_e.NOEMBED,_e.NOFRAMES,_e.PLAINTEXT;var se;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(se||(se={}));const jr={DATA:se.DATA,RCDATA:se.RCDATA,RAWTEXT:se.RAWTEXT,SCRIPT_DATA:se.SCRIPT_DATA,PLAINTEXT:se.PLAINTEXT,CDATA_SECTION:se.CDATA_SECTION};function wke(t){return t>=te.DIGIT_0&&t<=te.DIGIT_9}function Wh(t){return t>=te.LATIN_CAPITAL_A&&t<=te.LATIN_CAPITAL_Z}function Ske(t){return t>=te.LATIN_SMALL_A&&t<=te.LATIN_SMALL_Z}function Ia(t){return Ske(t)||Wh(t)}function KO(t){return Ia(t)||wke(t)}function Zg(t){return t+32}function Sz(t){return t===te.SPACE||t===te.LINE_FEED||t===te.TABULATION||t===te.FORM_FEED}function YO(t){return Sz(t)||t===te.SOLIDUS||t===te.GREATER_THAN_SIGN}function Eke(t){return t===te.NULL?Ae.nullCharacterReference:t>1114111?Ae.characterReferenceOutsideUnicodeRange:vz(t)?Ae.surrogateCharacterReference:xz(t)?Ae.noncharacterCharacterReference:_z(t)||t===te.CARRIAGE_RETURN?Ae.controlCharacterReference:null}class Cke{constructor(e,r){this.options=e,this.handler=r,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=se.DATA,this.returnState=se.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new uke(r),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new yke(dke,(n,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(n)},r.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Ae.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:n=>{this._err(Ae.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+n)},validateNumericCharacterReference:n=>{const s=Eke(n);s&&this._err(s,1)}}:void 0)}_err(e,r=0){var n,s;(s=(n=this.handler).onParseError)===null||s===void 0||s.call(n,this.preprocessor.getError(e,r))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,r,n){this.active=!0,this.preprocessor.write(e,r),this._runParsingLoop(),this.paused||n?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let r=0;r<e;r++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,r){return this.preprocessor.startsWith(e,r)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:At.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:At.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:At.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:At.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,r){this.currentCharacterToken={type:e,chars:r,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,r;const n=this.currentToken;if(wz(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const s=(e=(r=n.location).attrs)!==null&&e!==void 0?e:r.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ae.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=qd(e.tagName),e.type===At.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(Ae.endTagWithAttributes),e.selfClosing&&this._err(Ae.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case At.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case At.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case At.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:At.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,r){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=r;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,r)}_emitCodePoint(e){const r=Sz(e)?At.WHITESPACE_CHARACTER:e===te.NULL?At.NULL_CHARACTER:At.CHARACTER;this._appendCharToCurrentCharacterToken(r,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(At.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=se.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?qo.Attribute:qo.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===se.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===se.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===se.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case se.DATA:{this._stateData(e);break}case se.RCDATA:{this._stateRcdata(e);break}case se.RAWTEXT:{this._stateRawtext(e);break}case se.SCRIPT_DATA:{this._stateScriptData(e);break}case se.PLAINTEXT:{this._statePlaintext(e);break}case se.TAG_OPEN:{this._stateTagOpen(e);break}case se.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case se.TAG_NAME:{this._stateTagName(e);break}case se.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case se.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case se.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case se.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case se.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case se.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case se.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case se.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case se.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case se.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case se.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case se.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case se.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case se.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case se.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case se.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case se.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case se.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case se.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case se.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case se.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case se.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case se.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case se.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case se.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case se.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case se.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case se.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case se.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case se.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case se.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case se.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case se.BOGUS_COMMENT:{this._stateBogusComment(e);break}case se.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case se.COMMENT_START:{this._stateCommentStart(e);break}case se.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case se.COMMENT:{this._stateComment(e);break}case se.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case se.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case se.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case se.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case se.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case se.COMMENT_END:{this._stateCommentEnd(e);break}case se.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case se.DOCTYPE:{this._stateDoctype(e);break}case se.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case se.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case se.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case se.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case se.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case se.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case se.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case se.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case se.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case se.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case se.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case se.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case se.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case se.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case se.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case se.CDATA_SECTION:{this._stateCdataSection(e);break}case se.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case se.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case se.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case se.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case te.LESS_THAN_SIGN:{this.state=se.TAG_OPEN;break}case te.AMPERSAND:{this._startCharacterReference();break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitCodePoint(e);break}case te.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case te.AMPERSAND:{this._startCharacterReference();break}case te.LESS_THAN_SIGN:{this.state=se.RCDATA_LESS_THAN_SIGN;break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(vr);break}case te.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case te.LESS_THAN_SIGN:{this.state=se.RAWTEXT_LESS_THAN_SIGN;break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(vr);break}case te.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case te.LESS_THAN_SIGN:{this.state=se.SCRIPT_DATA_LESS_THAN_SIGN;break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(vr);break}case te.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case te.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(vr);break}case te.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Ia(e))this._createStartTagToken(),this.state=se.TAG_NAME,this._stateTagName(e);else switch(e){case te.EXCLAMATION_MARK:{this.state=se.MARKUP_DECLARATION_OPEN;break}case te.SOLIDUS:{this.state=se.END_TAG_OPEN;break}case te.QUESTION_MARK:{this._err(Ae.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=se.BOGUS_COMMENT,this._stateBogusComment(e);break}case te.EOF:{this._err(Ae.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ae.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=se.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Ia(e))this._createEndTagToken(),this.state=se.TAG_NAME,this._stateTagName(e);else switch(e){case te.GREATER_THAN_SIGN:{this._err(Ae.missingEndTagName),this.state=se.DATA;break}case te.EOF:{this._err(Ae.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ae.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=se.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const r=this.currentToken;switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:{this.state=se.BEFORE_ATTRIBUTE_NAME;break}case te.SOLIDUS:{this.state=se.SELF_CLOSING_START_TAG;break}case te.GREATER_THAN_SIGN:{this.state=se.DATA,this.emitCurrentTagToken();break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),r.tagName+=vr;break}case te.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:r.tagName+=String.fromCodePoint(Wh(e)?Zg(e):e)}}_stateRcdataLessThanSign(e){e===te.SOLIDUS?this.state=se.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=se.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Ia(e)?(this.state=se.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=se.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const r=this.currentToken;switch(r.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=se.BEFORE_ATTRIBUTE_NAME,!1;case te.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=se.SELF_CLOSING_START_TAG,!1;case te.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=se.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=se.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===te.SOLIDUS?this.state=se.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=se.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Ia(e)?(this.state=se.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=se.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=se.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case te.SOLIDUS:{this.state=se.SCRIPT_DATA_END_TAG_OPEN;break}case te.EXCLAMATION_MARK:{this.state=se.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=se.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Ia(e)?(this.state=se.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=se.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=se.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===te.HYPHEN_MINUS?(this.state=se.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=se.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===te.HYPHEN_MINUS?(this.state=se.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=se.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case te.HYPHEN_MINUS:{this.state=se.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case te.LESS_THAN_SIGN:{this.state=se.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(vr);break}case te.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case te.HYPHEN_MINUS:{this.state=se.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case te.LESS_THAN_SIGN:{this.state=se.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=se.SCRIPT_DATA_ESCAPED,this._emitChars(vr);break}case te.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=se.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case te.HYPHEN_MINUS:{this._emitChars("-");break}case te.LESS_THAN_SIGN:{this.state=se.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case te.GREATER_THAN_SIGN:{this.state=se.SCRIPT_DATA,this._emitChars(">");break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=se.SCRIPT_DATA_ESCAPED,this._emitChars(vr);break}case te.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=se.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===te.SOLIDUS?this.state=se.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ia(e)?(this._emitChars("<"),this.state=se.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=se.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Ia(e)?(this.state=se.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=se.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=se.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(ss.SCRIPT,!1)&&YO(this.preprocessor.peek(ss.SCRIPT.length))){this._emitCodePoint(e);for(let r=0;r<ss.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=se.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case te.HYPHEN_MINUS:{this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case te.LESS_THAN_SIGN:{this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(vr);break}case te.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case te.HYPHEN_MINUS:{this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case te.LESS_THAN_SIGN:{this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vr);break}case te.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case te.HYPHEN_MINUS:{this._emitChars("-");break}case te.LESS_THAN_SIGN:{this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case te.GREATER_THAN_SIGN:{this.state=se.SCRIPT_DATA,this._emitChars(">");break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vr);break}case te.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===te.SOLIDUS?(this.state=se.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(ss.SCRIPT,!1)&&YO(this.preprocessor.peek(ss.SCRIPT.length))){this._emitCodePoint(e);for(let r=0;r<ss.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=se.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=se.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:break;case te.SOLIDUS:case te.GREATER_THAN_SIGN:case te.EOF:{this.state=se.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case te.EQUALS_SIGN:{this._err(Ae.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=se.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=se.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:case te.SOLIDUS:case te.GREATER_THAN_SIGN:case te.EOF:{this._leaveAttrName(),this.state=se.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case te.EQUALS_SIGN:{this._leaveAttrName(),this.state=se.BEFORE_ATTRIBUTE_VALUE;break}case te.QUOTATION_MARK:case te.APOSTROPHE:case te.LESS_THAN_SIGN:{this._err(Ae.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.name+=vr;break}default:this.currentAttr.name+=String.fromCodePoint(Wh(e)?Zg(e):e)}}_stateAfterAttributeName(e){switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:break;case te.SOLIDUS:{this.state=se.SELF_CLOSING_START_TAG;break}case te.EQUALS_SIGN:{this.state=se.BEFORE_ATTRIBUTE_VALUE;break}case te.GREATER_THAN_SIGN:{this.state=se.DATA,this.emitCurrentTagToken();break}case te.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=se.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:break;case te.QUOTATION_MARK:{this.state=se.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case te.APOSTROPHE:{this.state=se.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case te.GREATER_THAN_SIGN:{this._err(Ae.missingAttributeValue),this.state=se.DATA,this.emitCurrentTagToken();break}default:this.state=se.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case te.QUOTATION_MARK:{this.state=se.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case te.AMPERSAND:{this._startCharacterReference();break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=vr;break}case te.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case te.APOSTROPHE:{this.state=se.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case te.AMPERSAND:{this._startCharacterReference();break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=vr;break}case te.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:{this._leaveAttrValue(),this.state=se.BEFORE_ATTRIBUTE_NAME;break}case te.AMPERSAND:{this._startCharacterReference();break}case te.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=se.DATA,this.emitCurrentTagToken();break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=vr;break}case te.QUOTATION_MARK:case te.APOSTROPHE:case te.LESS_THAN_SIGN:case te.EQUALS_SIGN:case te.GRAVE_ACCENT:{this._err(Ae.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case te.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:{this._leaveAttrValue(),this.state=se.BEFORE_ATTRIBUTE_NAME;break}case te.SOLIDUS:{this._leaveAttrValue(),this.state=se.SELF_CLOSING_START_TAG;break}case te.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=se.DATA,this.emitCurrentTagToken();break}case te.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._err(Ae.missingWhitespaceBetweenAttributes),this.state=se.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case te.GREATER_THAN_SIGN:{const r=this.currentToken;r.selfClosing=!0,this.state=se.DATA,this.emitCurrentTagToken();break}case te.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._err(Ae.unexpectedSolidusInTag),this.state=se.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const r=this.currentToken;switch(e){case te.GREATER_THAN_SIGN:{this.state=se.DATA,this.emitCurrentComment(r);break}case te.EOF:{this.emitCurrentComment(r),this._emitEOFToken();break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),r.data+=vr;break}default:r.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(ss.DASH_DASH,!0)?(this._createCommentToken(ss.DASH_DASH.length+1),this.state=se.COMMENT_START):this._consumeSequenceIfMatch(ss.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(ss.DOCTYPE.length+1),this.state=se.DOCTYPE):this._consumeSequenceIfMatch(ss.CDATA_START,!0)?this.inForeignNode?this.state=se.CDATA_SECTION:(this._err(Ae.cdataInHtmlContent),this._createCommentToken(ss.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=se.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ae.incorrectlyOpenedComment),this._createCommentToken(2),this.state=se.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case te.HYPHEN_MINUS:{this.state=se.COMMENT_START_DASH;break}case te.GREATER_THAN_SIGN:{this._err(Ae.abruptClosingOfEmptyComment),this.state=se.DATA;const r=this.currentToken;this.emitCurrentComment(r);break}default:this.state=se.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const r=this.currentToken;switch(e){case te.HYPHEN_MINUS:{this.state=se.COMMENT_END;break}case te.GREATER_THAN_SIGN:{this._err(Ae.abruptClosingOfEmptyComment),this.state=se.DATA,this.emitCurrentComment(r);break}case te.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=se.COMMENT,this._stateComment(e)}}_stateComment(e){const r=this.currentToken;switch(e){case te.HYPHEN_MINUS:{this.state=se.COMMENT_END_DASH;break}case te.LESS_THAN_SIGN:{r.data+="<",this.state=se.COMMENT_LESS_THAN_SIGN;break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),r.data+=vr;break}case te.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const r=this.currentToken;switch(e){case te.EXCLAMATION_MARK:{r.data+="!",this.state=se.COMMENT_LESS_THAN_SIGN_BANG;break}case te.LESS_THAN_SIGN:{r.data+="<";break}default:this.state=se.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===te.HYPHEN_MINUS?this.state=se.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=se.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===te.HYPHEN_MINUS?this.state=se.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=se.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==te.GREATER_THAN_SIGN&&e!==te.EOF&&this._err(Ae.nestedComment),this.state=se.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const r=this.currentToken;switch(e){case te.HYPHEN_MINUS:{this.state=se.COMMENT_END;break}case te.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=se.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const r=this.currentToken;switch(e){case te.GREATER_THAN_SIGN:{this.state=se.DATA,this.emitCurrentComment(r);break}case te.EXCLAMATION_MARK:{this.state=se.COMMENT_END_BANG;break}case te.HYPHEN_MINUS:{r.data+="-";break}case te.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--",this.state=se.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const r=this.currentToken;switch(e){case te.HYPHEN_MINUS:{r.data+="--!",this.state=se.COMMENT_END_DASH;break}case te.GREATER_THAN_SIGN:{this._err(Ae.incorrectlyClosedComment),this.state=se.DATA,this.emitCurrentComment(r);break}case te.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--!",this.state=se.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:{this.state=se.BEFORE_DOCTYPE_NAME;break}case te.GREATER_THAN_SIGN:{this.state=se.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case te.EOF:{this._err(Ae.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ae.missingWhitespaceBeforeDoctypeName),this.state=se.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(Wh(e))this._createDoctypeToken(String.fromCharCode(Zg(e))),this.state=se.DOCTYPE_NAME;else switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:break;case te.NULL:{this._err(Ae.unexpectedNullCharacter),this._createDoctypeToken(vr),this.state=se.DOCTYPE_NAME;break}case te.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeName),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=se.DATA;break}case te.EOF:{this._err(Ae.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=se.DOCTYPE_NAME}}_stateDoctypeName(e){const r=this.currentToken;switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:{this.state=se.AFTER_DOCTYPE_NAME;break}case te.GREATER_THAN_SIGN:{this.state=se.DATA,this.emitCurrentDoctype(r);break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),r.name+=vr;break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.name+=String.fromCodePoint(Wh(e)?Zg(e):e)}}_stateAfterDoctypeName(e){const r=this.currentToken;switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:break;case te.GREATER_THAN_SIGN:{this.state=se.DATA,this.emitCurrentDoctype(r);break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(ss.PUBLIC,!1)?this.state=se.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(ss.SYSTEM,!1)?this.state=se.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ae.invalidCharacterSequenceAfterDoctypeName),r.forceQuirks=!0,this.state=se.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const r=this.currentToken;switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:{this.state=se.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case te.QUOTATION_MARK:{this._err(Ae.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=se.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case te.APOSTROPHE:{this._err(Ae.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=se.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case te.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=se.DATA,this.emitCurrentDoctype(r);break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=se.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const r=this.currentToken;switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:break;case te.QUOTATION_MARK:{r.publicId="",this.state=se.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case te.APOSTROPHE:{r.publicId="",this.state=se.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case te.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=se.DATA,this.emitCurrentDoctype(r);break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=se.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const r=this.currentToken;switch(e){case te.QUOTATION_MARK:{this.state=se.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),r.publicId+=vr;break}case te.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=se.DATA;break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const r=this.currentToken;switch(e){case te.APOSTROPHE:{this.state=se.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),r.publicId+=vr;break}case te.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=se.DATA;break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const r=this.currentToken;switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:{this.state=se.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case te.GREATER_THAN_SIGN:{this.state=se.DATA,this.emitCurrentDoctype(r);break}case te.QUOTATION_MARK:{this._err(Ae.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=se.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case te.APOSTROPHE:{this._err(Ae.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=se.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=se.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const r=this.currentToken;switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:break;case te.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=se.DATA;break}case te.QUOTATION_MARK:{r.systemId="",this.state=se.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case te.APOSTROPHE:{r.systemId="",this.state=se.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=se.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const r=this.currentToken;switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:{this.state=se.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case te.QUOTATION_MARK:{this._err(Ae.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=se.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case te.APOSTROPHE:{this._err(Ae.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=se.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case te.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=se.DATA,this.emitCurrentDoctype(r);break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=se.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const r=this.currentToken;switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:break;case te.QUOTATION_MARK:{r.systemId="",this.state=se.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case te.APOSTROPHE:{r.systemId="",this.state=se.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case te.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=se.DATA,this.emitCurrentDoctype(r);break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=se.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const r=this.currentToken;switch(e){case te.QUOTATION_MARK:{this.state=se.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),r.systemId+=vr;break}case te.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=se.DATA;break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const r=this.currentToken;switch(e){case te.APOSTROPHE:{this.state=se.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case te.NULL:{this._err(Ae.unexpectedNullCharacter),r.systemId+=vr;break}case te.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=se.DATA;break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const r=this.currentToken;switch(e){case te.SPACE:case te.LINE_FEED:case te.TABULATION:case te.FORM_FEED:break;case te.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=se.DATA;break}case te.EOF:{this._err(Ae.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ae.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=se.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const r=this.currentToken;switch(e){case te.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=se.DATA;break}case te.NULL:{this._err(Ae.unexpectedNullCharacter);break}case te.EOF:{this.emitCurrentDoctype(r),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case te.RIGHT_SQUARE_BRACKET:{this.state=se.CDATA_SECTION_BRACKET;break}case te.EOF:{this._err(Ae.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===te.RIGHT_SQUARE_BRACKET?this.state=se.CDATA_SECTION_END:(this._emitChars("]"),this.state=se.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case te.GREATER_THAN_SIGN:{this.state=se.DATA;break}case te.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=se.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(te.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&KO(this.preprocessor.peek(1))?se.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){KO(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===te.SEMICOLON&&this._err(Ae.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const Ez=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),XO=new Set([...Ez,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),Ey=new Set([N.APPLET,N.CAPTION,N.HTML,N.MARQUEE,N.OBJECT,N.TABLE,N.TD,N.TEMPLATE,N.TH]),Tke=new Set([...Ey,N.OL,N.UL]),kke=new Set([...Ey,N.BUTTON]),JO=new Set([N.ANNOTATION_XML,N.MI,N.MN,N.MO,N.MS,N.MTEXT]),ZO=new Set([N.DESC,N.FOREIGN_OBJECT,N.TITLE]),Ake=new Set([N.TR,N.TEMPLATE,N.HTML]),Rke=new Set([N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML]),Pke=new Set([N.TABLE,N.TEMPLATE,N.HTML]),Ike=new Set([N.TD,N.TH]);class Nke{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,r,n){this.treeAdapter=r,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Le.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,r){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=r,this.currentTagId=r,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,r,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,r){const n=this._indexOf(e);this.items[n]=r,n===this.stackTop&&(this.current=r)}insertAfter(e,r,n){const s=this._indexOf(e)+1;this.items.splice(s,0,r),this.tagIDs.splice(s,0,n),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let r=this.stackTop+1;do r=this.tagIDs.lastIndexOf(e,r-1);while(r>0&&this.treeAdapter.getNamespaceURI(this.items[r])!==Le.HTML);this.shortenToLength(Math.max(r,0))}shortenToLength(e){for(;this.stackTop>=e;){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,this.stackTop<e)}}popUntilElementPopped(e){const r=this._indexOf(e);this.shortenToLength(Math.max(r,0))}popUntilPopped(e,r){const n=this._indexOfTagNames(e,r);this.shortenToLength(Math.max(n,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(JE,Le.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Ike,Le.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,r){for(let n=this.stackTop;n>=0;n--)if(e.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===r)return n;return-1}clearBackTo(e,r){const n=this._indexOfTagNames(e,r);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(Pke,Le.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Rke,Le.HTML)}clearBackToTableRowContext(){this.clearBackTo(Ake,Le.HTML)}remove(e){const r=this._indexOf(e);r>=0&&(r===this.stackTop?this.pop():(this.items.splice(r,1),this.tagIDs.splice(r,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const r=this._indexOf(e)-1;return r>=0?this.items[r]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInDynamicScope(e,r){for(let n=this.stackTop;n>=0;n--){const s=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case Le.HTML:{if(s===e)return!0;if(r.has(s))return!1;break}case Le.SVG:{if(ZO.has(s))return!1;break}case Le.MATHML:{if(JO.has(s))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,Ey)}hasInListItemScope(e){return this.hasInDynamicScope(e,Tke)}hasInButtonScope(e){return this.hasInDynamicScope(e,kke)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const r=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case Le.HTML:{if(JE.has(r))return!0;if(Ey.has(r))return!1;break}case Le.SVG:{if(ZO.has(r))return!1;break}case Le.MATHML:{if(JO.has(r))return!1;break}}}return!0}hasInTableScope(e){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Le.HTML)switch(this.tagIDs[r]){case e:return!0;case N.TABLE:case N.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===Le.HTML)switch(this.tagIDs[e]){case N.TBODY:case N.THEAD:case N.TFOOT:return!0;case N.TABLE:case N.HTML:return!1}return!0}hasInSelectScope(e){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Le.HTML)switch(this.tagIDs[r]){case e:return!0;case N.OPTION:case N.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&Ez.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&XO.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&XO.has(this.currentTagId);)this.pop()}}const Mw=3;var eo;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(eo||(eo={}));const QO={type:eo.Marker};class Dke{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,r){const n=[],s=r.length,i=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===eo.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===i&&this.treeAdapter.getNamespaceURI(c)===o){const u=this.treeAdapter.getAttrList(c);u.length===s&&n.push({idx:a,attrs:u})}}return n}_ensureNoahArkCondition(e){if(this.entries.length<Mw)return;const r=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,r);if(n.length<Mw)return;const s=new Map(r.map(o=>[o.name,o.value]));let i=0;for(let o=0;o<n.length;o++){const a=n[o];a.attrs.every(l=>s.get(l.name)===l.value)&&(i+=1,i>=Mw&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(QO)}pushElement(e,r){this._ensureNoahArkCondition(e),this.entries.unshift({type:eo.Element,element:e,token:r})}insertElementAfterBookmark(e,r){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:eo.Element,element:e,token:r})}removeEntry(e){const r=this.entries.indexOf(e);r!==-1&&this.entries.splice(r,1)}clearToLastMarker(){const e=this.entries.indexOf(QO);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const r=this.entries.find(n=>n.type===eo.Marker||this.treeAdapter.getTagName(n.element)===e);return r&&r.type===eo.Element?r:null}getElementEntry(e){return this.entries.find(r=>r.type===eo.Element&&r.element===e)}}const Na={createDocument(){return{nodeName:"#document",mode:Ks.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,r){return{nodeName:t,tagName:t,attrs:r,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,r){const n=t.childNodes.indexOf(r);t.childNodes.splice(n,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,r,n){const s=t.childNodes.find(i=>i.nodeName==="#documentType");if(s)s.name=e,s.publicId=r,s.systemId=n;else{const i={nodeName:"#documentType",name:e,publicId:r,systemId:n,parentNode:null};Na.appendChild(t,i)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const r=t.childNodes[t.childNodes.length-1];if(Na.isTextNode(r)){r.value+=e;return}}Na.appendChild(t,Na.createTextNode(e))},insertTextBefore(t,e,r){const n=t.childNodes[t.childNodes.indexOf(r)-1];n&&Na.isTextNode(n)?n.value+=e:Na.insertBefore(t,Na.createTextNode(e),r)},adoptAttributes(t,e){const r=new Set(t.attrs.map(n=>n.name));for(let n=0;n<e.length;n++)r.has(e[n].name)||t.attrs.push(e[n])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},Cz="html",Oke="about:legacy-compat",Lke="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Tz=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Mke=[...Tz,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],jke=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),kz=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Fke=[...kz,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function eL(t,e){return e.some(r=>t.startsWith(r))}function Bke(t){return t.name===Cz&&t.publicId===null&&(t.systemId===null||t.systemId===Oke)}function $ke(t){if(t.name!==Cz)return Ks.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===Lke)return Ks.QUIRKS;let{publicId:r}=t;if(r!==null){if(r=r.toLowerCase(),jke.has(r))return Ks.QUIRKS;let n=e===null?Mke:Tz;if(eL(r,n))return Ks.QUIRKS;if(n=e===null?kz:Fke,eL(r,n))return Ks.LIMITED_QUIRKS}return Ks.NO_QUIRKS}const tL={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Uke="definitionurl",Hke="definitionURL",zke=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),Wke=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Le.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Le.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Le.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Le.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Le.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Le.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Le.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Le.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Le.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Le.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Le.XMLNS}]]),Vke=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),Gke=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function qke(t){const e=t.tagID;return e===N.FONT&&t.attrs.some(({name:n})=>n===hc.COLOR||n===hc.SIZE||n===hc.FACE)||Gke.has(e)}function Az(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===Uke){t.attrs[e].name=Hke;break}}function Rz(t){for(let e=0;e<t.attrs.length;e++){const r=zke.get(t.attrs[e].name);r!=null&&(t.attrs[e].name=r)}}function LA(t){for(let e=0;e<t.attrs.length;e++){const r=Wke.get(t.attrs[e].name);r&&(t.attrs[e].prefix=r.prefix,t.attrs[e].name=r.name,t.attrs[e].namespace=r.namespace)}}function Kke(t){const e=Vke.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=qd(t.tagName))}function Yke(t,e){return e===Le.MATHML&&(t===N.MI||t===N.MO||t===N.MN||t===N.MS||t===N.MTEXT)}function Xke(t,e,r){if(e===Le.MATHML&&t===N.ANNOTATION_XML){for(let n=0;n<r.length;n++)if(r[n].name===hc.ENCODING){const s=r[n].value.toLowerCase();return s===tL.TEXT_HTML||s===tL.APPLICATION_XML}}return e===Le.SVG&&(t===N.FOREIGN_OBJECT||t===N.DESC||t===N.TITLE)}function Jke(t,e,r,n){return(!n||n===Le.HTML)&&Xke(t,e,r)||(!n||n===Le.MATHML)&&Yke(t,e)}const Zke="hidden",Qke=8,eAe=3;var ce;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ce||(ce={}));const tAe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Pz=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),rL={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Na,onParseError:null};class nL{constructor(e,r,n=null,s=null){this.fragmentContext=n,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=ce.INITIAL,this.originalInsertionMode=ce.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...rL,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=r??this.treeAdapter.createDocument(),this.tokenizer=new Cke(this.options,this),this.activeFormattingElements=new Dke(this.treeAdapter),this.fragmentContextID=n?qd(this.treeAdapter.getTagName(n)):N.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new Nke(this.document,this.treeAdapter,this)}static parse(e,r){const n=new this(r);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,r){const n={...rL,...r};e??(e=n.treeAdapter.createElement(_e.TEMPLATE,Le.HTML,[]));const s=n.treeAdapter.createElement("documentmock",Le.HTML,[]),i=new this(n,s,e);return i.fragmentContextID===N.TEMPLATE&&i.tmplInsertionModeStack.unshift(ce.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),r=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,r),r}_err(e,r,n){var s;if(!this.onParseError)return;const i=(s=e.location)!==null&&s!==void 0?s:tAe,o={code:r,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(o)}onItemPush(e,r,n){var s,i;(i=(s=this.treeAdapter).onItemPush)===null||i===void 0||i.call(s,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,r)}onItemPop(e,r){var n,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(n=this.treeAdapter).onItemPop)===null||s===void 0||s.call(n,e,this.openElements.current),r){let i,o;this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,o=this.fragmentContextID):{current:i,currentTagId:o}=this.openElements,this._setContextModes(i,o)}}_setContextModes(e,r){const n=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===Le.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&e!==void 0&&r!==void 0&&!this._isIntegrationPoint(r,e)}_switchToTextParsing(e,r){this._insertElement(e,Le.HTML),this.tokenizer.state=r,this.originalInsertionMode=this.insertionMode,this.insertionMode=ce.TEXT}switchToPlaintextParsing(){this.insertionMode=ce.TEXT,this.originalInsertionMode=ce.IN_BODY,this.tokenizer.state=jr.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===_e.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Le.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=jr.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=jr.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=jr.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=jr.PLAINTEXT;break}}}_setDocumentType(e){const r=e.name||"",n=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,r,n,s),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,r){if(this.options.sourceCodeLocationInfo){const n=r&&{...r,startTag:r};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n??this.document,e)}}_appendElement(e,r){const n=this.treeAdapter.createElement(e.tagName,r,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,r){const n=this.treeAdapter.createElement(e.tagName,r,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,r){const n=this.treeAdapter.createElement(e,Le.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,r)}_insertTemplate(e){const r=this.treeAdapter.createElement(e.tagName,Le.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(r,n),this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(_e.HTML,Le.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,N.HTML)}_appendCommentNode(e,r){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(r,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let r,n;if(this._shouldFosterParentOnInsertion()?({parent:r,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(r,e.chars,n):this.treeAdapter.insertText(r,e.chars)):(r=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(r,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(r),i=n?s.lastIndexOf(n):s.length,o=s[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:c,endOffset:u}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:c,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,r){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(r,n)}_setEndLocation(e,r){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&r.location){const n=r.location,s=this.treeAdapter.getTagName(e),i=r.type===At.END_TAG&&s===r.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let r,n;return this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,n=this.fragmentContextID):{current:r,currentTagId:n}=this.openElements,e.tagID===N.SVG&&this.treeAdapter.getTagName(r)===_e.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(r)===Le.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===N.MGLYPH||e.tagID===N.MALIGNMARK)&&n!==void 0&&!this._isIntegrationPoint(n,r,Le.HTML)}_processToken(e){switch(e.type){case At.CHARACTER:{this.onCharacter(e);break}case At.NULL_CHARACTER:{this.onNullCharacter(e);break}case At.COMMENT:{this.onComment(e);break}case At.DOCTYPE:{this.onDoctype(e);break}case At.START_TAG:{this._processStartTag(e);break}case At.END_TAG:{this.onEndTag(e);break}case At.EOF:{this.onEof(e);break}case At.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,r,n){const s=this.treeAdapter.getNamespaceURI(r),i=this.treeAdapter.getAttrList(r);return Jke(e,s,i,n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const r=this.activeFormattingElements.entries.findIndex(s=>s.type===eo.Marker||this.openElements.contains(s.element)),n=r===-1?e-1:r-1;for(let s=n;s>=0;s--){const i=this.activeFormattingElements.entries[s];this._insertElement(i.token,this.treeAdapter.getNamespaceURI(i.element)),i.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ce.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case N.TR:{this.insertionMode=ce.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=ce.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=ce.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=ce.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=ce.IN_TABLE;return}case N.BODY:{this.insertionMode=ce.IN_BODY;return}case N.FRAMESET:{this.insertionMode=ce.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(e);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?ce.AFTER_HEAD:ce.BEFORE_HEAD;return}case N.TD:case N.TH:{if(e>0){this.insertionMode=ce.IN_CELL;return}break}case N.HEAD:{if(e>0){this.insertionMode=ce.IN_HEAD;return}break}}this.insertionMode=ce.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let r=e-1;r>0;r--){const n=this.openElements.tagIDs[r];if(n===N.TEMPLATE)break;if(n===N.TABLE){this.insertionMode=ce.IN_SELECT_IN_TABLE;return}}this.insertionMode=ce.IN_SELECT}_isElementCausesFosterParenting(e){return Pz.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const r=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(r)===Le.HTML)return{parent:this.treeAdapter.getTemplateContent(r),beforeElement:null};break}case N.TABLE:{const n=this.treeAdapter.getParentNode(r);return n?{parent:n,beforeElement:r}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const r=this._findFosterParentingLocation();r.beforeElement?this.treeAdapter.insertBefore(r.parent,e,r.beforeElement):this.treeAdapter.appendChild(r.parent,e)}_isSpecialElement(e,r){const n=this.treeAdapter.getNamespaceURI(e);return xke[n].has(r)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){I2e(this,e);return}switch(this.insertionMode){case ce.INITIAL:{wh(this,e);break}case ce.BEFORE_HTML:{bf(this,e);break}case ce.BEFORE_HEAD:{yf(this,e);break}case ce.IN_HEAD:{vf(this,e);break}case ce.IN_HEAD_NO_SCRIPT:{_f(this,e);break}case ce.AFTER_HEAD:{xf(this,e);break}case ce.IN_BODY:case ce.IN_CAPTION:case ce.IN_CELL:case ce.IN_TEMPLATE:{Nz(this,e);break}case ce.TEXT:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{jw(this,e);break}case ce.IN_TABLE_TEXT:{Fz(this,e);break}case ce.IN_COLUMN_GROUP:{Cy(this,e);break}case ce.AFTER_BODY:{Ty(this,e);break}case ce.AFTER_AFTER_BODY:{Q0(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){P2e(this,e);return}switch(this.insertionMode){case ce.INITIAL:{wh(this,e);break}case ce.BEFORE_HTML:{bf(this,e);break}case ce.BEFORE_HEAD:{yf(this,e);break}case ce.IN_HEAD:{vf(this,e);break}case ce.IN_HEAD_NO_SCRIPT:{_f(this,e);break}case ce.AFTER_HEAD:{xf(this,e);break}case ce.TEXT:{this._insertCharacters(e);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{jw(this,e);break}case ce.IN_COLUMN_GROUP:{Cy(this,e);break}case ce.AFTER_BODY:{Ty(this,e);break}case ce.AFTER_AFTER_BODY:{Q0(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){ZE(this,e);return}switch(this.insertionMode){case ce.INITIAL:case ce.BEFORE_HTML:case ce.BEFORE_HEAD:case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:case ce.IN_BODY:case ce.IN_TABLE:case ce.IN_CAPTION:case ce.IN_COLUMN_GROUP:case ce.IN_TABLE_BODY:case ce.IN_ROW:case ce.IN_CELL:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:case ce.IN_TEMPLATE:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:{ZE(this,e);break}case ce.IN_TABLE_TEXT:{Sh(this,e);break}case ce.AFTER_BODY:{lAe(this,e);break}case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{cAe(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case ce.INITIAL:{uAe(this,e);break}case ce.BEFORE_HEAD:case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:{this._err(e,Ae.misplacedDoctype);break}case ce.IN_TABLE_TEXT:{Sh(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,Ae.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?N2e(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case ce.INITIAL:{wh(this,e);break}case ce.BEFORE_HTML:{dAe(this,e);break}case ce.BEFORE_HEAD:{fAe(this,e);break}case ce.IN_HEAD:{Oi(this,e);break}case ce.IN_HEAD_NO_SCRIPT:{gAe(this,e);break}case ce.AFTER_HEAD:{yAe(this,e);break}case ce.IN_BODY:{Mn(this,e);break}case ce.IN_TABLE:{_d(this,e);break}case ce.IN_TABLE_TEXT:{Sh(this,e);break}case ce.IN_CAPTION:{p2e(this,e);break}case ce.IN_COLUMN_GROUP:{FA(this,e);break}case ce.IN_TABLE_BODY:{g_(this,e);break}case ce.IN_ROW:{b_(this,e);break}case ce.IN_CELL:{b2e(this,e);break}case ce.IN_SELECT:{Uz(this,e);break}case ce.IN_SELECT_IN_TABLE:{v2e(this,e);break}case ce.IN_TEMPLATE:{x2e(this,e);break}case ce.AFTER_BODY:{S2e(this,e);break}case ce.IN_FRAMESET:{E2e(this,e);break}case ce.AFTER_FRAMESET:{T2e(this,e);break}case ce.AFTER_AFTER_BODY:{A2e(this,e);break}case ce.AFTER_AFTER_FRAMESET:{R2e(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?D2e(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case ce.INITIAL:{wh(this,e);break}case ce.BEFORE_HTML:{hAe(this,e);break}case ce.BEFORE_HEAD:{pAe(this,e);break}case ce.IN_HEAD:{mAe(this,e);break}case ce.IN_HEAD_NO_SCRIPT:{bAe(this,e);break}case ce.AFTER_HEAD:{vAe(this,e);break}case ce.IN_BODY:{m_(this,e);break}case ce.TEXT:{s2e(this,e);break}case ce.IN_TABLE:{bp(this,e);break}case ce.IN_TABLE_TEXT:{Sh(this,e);break}case ce.IN_CAPTION:{m2e(this,e);break}case ce.IN_COLUMN_GROUP:{g2e(this,e);break}case ce.IN_TABLE_BODY:{QE(this,e);break}case ce.IN_ROW:{$z(this,e);break}case ce.IN_CELL:{y2e(this,e);break}case ce.IN_SELECT:{Hz(this,e);break}case ce.IN_SELECT_IN_TABLE:{_2e(this,e);break}case ce.IN_TEMPLATE:{w2e(this,e);break}case ce.AFTER_BODY:{Wz(this,e);break}case ce.IN_FRAMESET:{C2e(this,e);break}case ce.AFTER_FRAMESET:{k2e(this,e);break}case ce.AFTER_AFTER_BODY:{Q0(this,e);break}}}onEof(e){switch(this.insertionMode){case ce.INITIAL:{wh(this,e);break}case ce.BEFORE_HTML:{bf(this,e);break}case ce.BEFORE_HEAD:{yf(this,e);break}case ce.IN_HEAD:{vf(this,e);break}case ce.IN_HEAD_NO_SCRIPT:{_f(this,e);break}case ce.AFTER_HEAD:{xf(this,e);break}case ce.IN_BODY:case ce.IN_TABLE:case ce.IN_CAPTION:case ce.IN_COLUMN_GROUP:case ce.IN_TABLE_BODY:case ce.IN_ROW:case ce.IN_CELL:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:{Mz(this,e);break}case ce.TEXT:{i2e(this,e);break}case ce.IN_TABLE_TEXT:{Sh(this,e);break}case ce.IN_TEMPLATE:{zz(this,e);break}case ce.AFTER_BODY:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{jA(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===te.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:case ce.TEXT:case ce.IN_COLUMN_GROUP:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:{this._insertCharacters(e);break}case ce.IN_BODY:case ce.IN_CAPTION:case ce.IN_CELL:case ce.IN_TEMPLATE:case ce.AFTER_BODY:case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{Iz(this,e);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{jw(this,e);break}case ce.IN_TABLE_TEXT:{jz(this,e);break}}}}function rAe(t,e){let r=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return r?t.openElements.contains(r.element)?t.openElements.hasInScope(e.tagID)||(r=null):(t.activeFormattingElements.removeEntry(r),r=null):Lz(t,e),r}function nAe(t,e){let r=null,n=t.openElements.stackTop;for(;n>=0;n--){const s=t.openElements.items[n];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[n])&&(r=s)}return r||(t.openElements.shortenToLength(Math.max(n,0)),t.activeFormattingElements.removeEntry(e)),r}function sAe(t,e,r){let n=e,s=t.openElements.getCommonAncestor(e);for(let i=0,o=s;o!==r;i++,o=s){s=t.openElements.getCommonAncestor(o);const a=t.activeFormattingElements.getElementEntry(o),l=a&&i>=eAe;!a||l?(l&&t.activeFormattingElements.removeEntry(a),t.openElements.remove(o)):(o=iAe(t,a),n===e&&(t.activeFormattingElements.bookmark=a),t.treeAdapter.detachNode(n),t.treeAdapter.appendChild(o,n),n=o)}return n}function iAe(t,e){const r=t.treeAdapter.getNamespaceURI(e.element),n=t.treeAdapter.createElement(e.token.tagName,r,e.token.attrs);return t.openElements.replace(e.element,n),e.element=n,n}function oAe(t,e,r){const n=t.treeAdapter.getTagName(e),s=qd(n);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(r);else{const i=t.treeAdapter.getNamespaceURI(e);s===N.TEMPLATE&&i===Le.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,r)}}function aAe(t,e,r){const n=t.treeAdapter.getNamespaceURI(r.element),{token:s}=r,i=t.treeAdapter.createElement(s.tagName,n,s.attrs);t._adoptNodes(e,i),t.treeAdapter.appendChild(e,i),t.activeFormattingElements.insertElementAfterBookmark(i,s),t.activeFormattingElements.removeEntry(r),t.openElements.remove(r.element),t.openElements.insertAfter(e,i,s.tagID)}function MA(t,e){for(let r=0;r<Qke;r++){const n=rAe(t,e);if(!n)break;const s=nAe(t,n);if(!s)break;t.activeFormattingElements.bookmark=n;const i=sAe(t,s,n.element),o=t.openElements.getCommonAncestor(n.element);t.treeAdapter.detachNode(i),o&&oAe(t,o,i),aAe(t,s,n)}}function ZE(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function lAe(t,e){t._appendCommentNode(e,t.openElements.items[0])}function cAe(t,e){t._appendCommentNode(e,t.document)}function jA(t,e){if(t.stopped=!0,e.location){const r=t.fragmentContext?0:2;for(let n=t.openElements.stackTop;n>=r;n--)t._setEndLocation(t.openElements.items[n],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const n=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(n);if(s&&!s.endTag&&(t._setEndLocation(n,e),t.openElements.stackTop>=1)){const i=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(i);o&&!o.endTag&&t._setEndLocation(i,e)}}}}function uAe(t,e){t._setDocumentType(e);const r=e.forceQuirks?Ks.QUIRKS:$ke(e);Bke(e)||t._err(e,Ae.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,r),t.insertionMode=ce.BEFORE_HTML}function wh(t,e){t._err(e,Ae.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Ks.QUIRKS),t.insertionMode=ce.BEFORE_HTML,t._processToken(e)}function dAe(t,e){e.tagID===N.HTML?(t._insertElement(e,Le.HTML),t.insertionMode=ce.BEFORE_HEAD):bf(t,e)}function hAe(t,e){const r=e.tagID;(r===N.HTML||r===N.HEAD||r===N.BODY||r===N.BR)&&bf(t,e)}function bf(t,e){t._insertFakeRootElement(),t.insertionMode=ce.BEFORE_HEAD,t._processToken(e)}function fAe(t,e){switch(e.tagID){case N.HTML:{Mn(t,e);break}case N.HEAD:{t._insertElement(e,Le.HTML),t.headElement=t.openElements.current,t.insertionMode=ce.IN_HEAD;break}default:yf(t,e)}}function pAe(t,e){const r=e.tagID;r===N.HEAD||r===N.BODY||r===N.HTML||r===N.BR?yf(t,e):t._err(e,Ae.endTagWithoutMatchingOpenElement)}function yf(t,e){t._insertFakeElement(_e.HEAD,N.HEAD),t.headElement=t.openElements.current,t.insertionMode=ce.IN_HEAD,t._processToken(e)}function Oi(t,e){switch(e.tagID){case N.HTML:{Mn(t,e);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{t._appendElement(e,Le.HTML),e.ackSelfClosing=!0;break}case N.TITLE:{t._switchToTextParsing(e,jr.RCDATA);break}case N.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,jr.RAWTEXT):(t._insertElement(e,Le.HTML),t.insertionMode=ce.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{t._switchToTextParsing(e,jr.RAWTEXT);break}case N.SCRIPT:{t._switchToTextParsing(e,jr.SCRIPT_DATA);break}case N.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=ce.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(ce.IN_TEMPLATE);break}case N.HEAD:{t._err(e,Ae.misplacedStartTagForHeadElement);break}default:vf(t,e)}}function mAe(t,e){switch(e.tagID){case N.HEAD:{t.openElements.pop(),t.insertionMode=ce.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{vf(t,e);break}case N.TEMPLATE:{$c(t,e);break}default:t._err(e,Ae.endTagWithoutMatchingOpenElement)}}function $c(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==N.TEMPLATE&&t._err(e,Ae.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(N.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,Ae.endTagWithoutMatchingOpenElement)}function vf(t,e){t.openElements.pop(),t.insertionMode=ce.AFTER_HEAD,t._processToken(e)}function gAe(t,e){switch(e.tagID){case N.HTML:{Mn(t,e);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{Oi(t,e);break}case N.NOSCRIPT:{t._err(e,Ae.nestedNoscriptInHead);break}default:_f(t,e)}}function bAe(t,e){switch(e.tagID){case N.NOSCRIPT:{t.openElements.pop(),t.insertionMode=ce.IN_HEAD;break}case N.BR:{_f(t,e);break}default:t._err(e,Ae.endTagWithoutMatchingOpenElement)}}function _f(t,e){const r=e.type===At.EOF?Ae.openElementsLeftAfterEof:Ae.disallowedContentInNoscriptInHead;t._err(e,r),t.openElements.pop(),t.insertionMode=ce.IN_HEAD,t._processToken(e)}function yAe(t,e){switch(e.tagID){case N.HTML:{Mn(t,e);break}case N.BODY:{t._insertElement(e,Le.HTML),t.framesetOk=!1,t.insertionMode=ce.IN_BODY;break}case N.FRAMESET:{t._insertElement(e,Le.HTML),t.insertionMode=ce.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{t._err(e,Ae.abandonedHeadElementChild),t.openElements.push(t.headElement,N.HEAD),Oi(t,e),t.openElements.remove(t.headElement);break}case N.HEAD:{t._err(e,Ae.misplacedStartTagForHeadElement);break}default:xf(t,e)}}function vAe(t,e){switch(e.tagID){case N.BODY:case N.HTML:case N.BR:{xf(t,e);break}case N.TEMPLATE:{$c(t,e);break}default:t._err(e,Ae.endTagWithoutMatchingOpenElement)}}function xf(t,e){t._insertFakeElement(_e.BODY,N.BODY),t.insertionMode=ce.IN_BODY,p_(t,e)}function p_(t,e){switch(e.type){case At.CHARACTER:{Nz(t,e);break}case At.WHITESPACE_CHARACTER:{Iz(t,e);break}case At.COMMENT:{ZE(t,e);break}case At.START_TAG:{Mn(t,e);break}case At.END_TAG:{m_(t,e);break}case At.EOF:{Mz(t,e);break}}}function Iz(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function Nz(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function _Ae(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function xAe(t,e){const r=t.openElements.tryPeekProperlyNestedBodyElement();r&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(r,e.attrs))}function wAe(t,e){const r=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&r&&(t.treeAdapter.detachNode(r),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Le.HTML),t.insertionMode=ce.IN_FRAMESET)}function SAe(t,e){t.openElements.hasInButtonScope(N.P)&&t._closePElement(),t._insertElement(e,Le.HTML)}function EAe(t,e){t.openElements.hasInButtonScope(N.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&JE.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,Le.HTML)}function CAe(t,e){t.openElements.hasInButtonScope(N.P)&&t._closePElement(),t._insertElement(e,Le.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function TAe(t,e){const r=t.openElements.tmplCount>0;(!t.formElement||r)&&(t.openElements.hasInButtonScope(N.P)&&t._closePElement(),t._insertElement(e,Le.HTML),r||(t.formElement=t.openElements.current))}function kAe(t,e){t.framesetOk=!1;const r=e.tagID;for(let n=t.openElements.stackTop;n>=0;n--){const s=t.openElements.tagIDs[n];if(r===N.LI&&s===N.LI||(r===N.DD||r===N.DT)&&(s===N.DD||s===N.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==N.ADDRESS&&s!==N.DIV&&s!==N.P&&t._isSpecialElement(t.openElements.items[n],s))break}t.openElements.hasInButtonScope(N.P)&&t._closePElement(),t._insertElement(e,Le.HTML)}function AAe(t,e){t.openElements.hasInButtonScope(N.P)&&t._closePElement(),t._insertElement(e,Le.HTML),t.tokenizer.state=jr.PLAINTEXT}function RAe(t,e){t.openElements.hasInScope(N.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(N.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Le.HTML),t.framesetOk=!1}function PAe(t,e){const r=t.activeFormattingElements.getElementEntryInScopeWithTagName(_e.A);r&&(MA(t,e),t.openElements.remove(r.element),t.activeFormattingElements.removeEntry(r)),t._reconstructActiveFormattingElements(),t._insertElement(e,Le.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function IAe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Le.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function NAe(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(N.NOBR)&&(MA(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Le.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function DAe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Le.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function OAe(t,e){t.treeAdapter.getDocumentMode(t.document)!==Ks.QUIRKS&&t.openElements.hasInButtonScope(N.P)&&t._closePElement(),t._insertElement(e,Le.HTML),t.framesetOk=!1,t.insertionMode=ce.IN_TABLE}function Dz(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Le.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function Oz(t){const e=wz(t,hc.TYPE);return e!=null&&e.toLowerCase()===Zke}function LAe(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Le.HTML),Oz(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function MAe(t,e){t._appendElement(e,Le.HTML),e.ackSelfClosing=!0}function jAe(t,e){t.openElements.hasInButtonScope(N.P)&&t._closePElement(),t._appendElement(e,Le.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function FAe(t,e){e.tagName=_e.IMG,e.tagID=N.IMG,Dz(t,e)}function BAe(t,e){t._insertElement(e,Le.HTML),t.skipNextNewLine=!0,t.tokenizer.state=jr.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=ce.TEXT}function $Ae(t,e){t.openElements.hasInButtonScope(N.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,jr.RAWTEXT)}function UAe(t,e){t.framesetOk=!1,t._switchToTextParsing(e,jr.RAWTEXT)}function sL(t,e){t._switchToTextParsing(e,jr.RAWTEXT)}function HAe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Le.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===ce.IN_TABLE||t.insertionMode===ce.IN_CAPTION||t.insertionMode===ce.IN_TABLE_BODY||t.insertionMode===ce.IN_ROW||t.insertionMode===ce.IN_CELL?ce.IN_SELECT_IN_TABLE:ce.IN_SELECT}function zAe(t,e){t.openElements.currentTagId===N.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Le.HTML)}function WAe(t,e){t.openElements.hasInScope(N.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Le.HTML)}function VAe(t,e){t.openElements.hasInScope(N.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(N.RTC),t._insertElement(e,Le.HTML)}function GAe(t,e){t._reconstructActiveFormattingElements(),Az(e),LA(e),e.selfClosing?t._appendElement(e,Le.MATHML):t._insertElement(e,Le.MATHML),e.ackSelfClosing=!0}function qAe(t,e){t._reconstructActiveFormattingElements(),Rz(e),LA(e),e.selfClosing?t._appendElement(e,Le.SVG):t._insertElement(e,Le.SVG),e.ackSelfClosing=!0}function iL(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Le.HTML)}function Mn(t,e){switch(e.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{IAe(t,e);break}case N.A:{PAe(t,e);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{EAe(t,e);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SEARCH:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{SAe(t,e);break}case N.LI:case N.DD:case N.DT:{kAe(t,e);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{Dz(t,e);break}case N.HR:{jAe(t,e);break}case N.RB:case N.RTC:{WAe(t,e);break}case N.RT:case N.RP:{VAe(t,e);break}case N.PRE:case N.LISTING:{CAe(t,e);break}case N.XMP:{$Ae(t,e);break}case N.SVG:{qAe(t,e);break}case N.HTML:{_Ae(t,e);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{Oi(t,e);break}case N.BODY:{xAe(t,e);break}case N.FORM:{TAe(t,e);break}case N.NOBR:{NAe(t,e);break}case N.MATH:{GAe(t,e);break}case N.TABLE:{OAe(t,e);break}case N.INPUT:{LAe(t,e);break}case N.PARAM:case N.TRACK:case N.SOURCE:{MAe(t,e);break}case N.IMAGE:{FAe(t,e);break}case N.BUTTON:{RAe(t,e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{DAe(t,e);break}case N.IFRAME:{UAe(t,e);break}case N.SELECT:{HAe(t,e);break}case N.OPTION:case N.OPTGROUP:{zAe(t,e);break}case N.NOEMBED:case N.NOFRAMES:{sL(t,e);break}case N.FRAMESET:{wAe(t,e);break}case N.TEXTAREA:{BAe(t,e);break}case N.NOSCRIPT:{t.options.scriptingEnabled?sL(t,e):iL(t,e);break}case N.PLAINTEXT:{AAe(t,e);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:iL(t,e)}}function KAe(t,e){if(t.openElements.hasInScope(N.BODY)&&(t.insertionMode=ce.AFTER_BODY,t.options.sourceCodeLocationInfo)){const r=t.openElements.tryPeekProperlyNestedBodyElement();r&&t._setEndLocation(r,e)}}function YAe(t,e){t.openElements.hasInScope(N.BODY)&&(t.insertionMode=ce.AFTER_BODY,Wz(t,e))}function XAe(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r))}function JAe(t){const e=t.openElements.tmplCount>0,{formElement:r}=t;e||(t.formElement=null),(r||e)&&t.openElements.hasInScope(N.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(N.FORM):r&&t.openElements.remove(r))}function ZAe(t){t.openElements.hasInButtonScope(N.P)||t._insertFakeElement(_e.P,N.P),t._closePElement()}function QAe(t){t.openElements.hasInListItemScope(N.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(N.LI),t.openElements.popUntilTagNamePopped(N.LI))}function e2e(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.popUntilTagNamePopped(r))}function t2e(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function r2e(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r),t.activeFormattingElements.clearToLastMarker())}function n2e(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(_e.BR,N.BR),t.openElements.pop(),t.framesetOk=!1}function Lz(t,e){const r=e.tagName,n=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const i=t.openElements.items[s],o=t.openElements.tagIDs[s];if(n===o&&(n!==N.UNKNOWN||t.treeAdapter.getTagName(i)===r)){t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(i,o))break}}function m_(t,e){switch(e.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{MA(t,e);break}case N.P:{ZAe(t);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SEARCH:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{XAe(t,e);break}case N.LI:{QAe(t);break}case N.DD:case N.DT:{e2e(t,e);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{t2e(t);break}case N.BR:{n2e(t);break}case N.BODY:{KAe(t,e);break}case N.HTML:{YAe(t,e);break}case N.FORM:{JAe(t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{r2e(t,e);break}case N.TEMPLATE:{$c(t,e);break}default:Lz(t,e)}}function Mz(t,e){t.tmplInsertionModeStack.length>0?zz(t,e):jA(t,e)}function s2e(t,e){var r;e.tagID===N.SCRIPT&&((r=t.scriptHandler)===null||r===void 0||r.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function i2e(t,e){t._err(e,Ae.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function jw(t,e){if(t.openElements.currentTagId!==void 0&&Pz.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=ce.IN_TABLE_TEXT,e.type){case At.CHARACTER:{Fz(t,e);break}case At.WHITESPACE_CHARACTER:{jz(t,e);break}}else um(t,e)}function o2e(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Le.HTML),t.insertionMode=ce.IN_CAPTION}function a2e(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Le.HTML),t.insertionMode=ce.IN_COLUMN_GROUP}function l2e(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(_e.COLGROUP,N.COLGROUP),t.insertionMode=ce.IN_COLUMN_GROUP,FA(t,e)}function c2e(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Le.HTML),t.insertionMode=ce.IN_TABLE_BODY}function u2e(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(_e.TBODY,N.TBODY),t.insertionMode=ce.IN_TABLE_BODY,g_(t,e)}function d2e(t,e){t.openElements.hasInTableScope(N.TABLE)&&(t.openElements.popUntilTagNamePopped(N.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function h2e(t,e){Oz(e)?t._appendElement(e,Le.HTML):um(t,e),e.ackSelfClosing=!0}function f2e(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Le.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function _d(t,e){switch(e.tagID){case N.TD:case N.TH:case N.TR:{u2e(t,e);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{Oi(t,e);break}case N.COL:{l2e(t,e);break}case N.FORM:{f2e(t,e);break}case N.TABLE:{d2e(t,e);break}case N.TBODY:case N.TFOOT:case N.THEAD:{c2e(t,e);break}case N.INPUT:{h2e(t,e);break}case N.CAPTION:{o2e(t,e);break}case N.COLGROUP:{a2e(t,e);break}default:um(t,e)}}function bp(t,e){switch(e.tagID){case N.TABLE:{t.openElements.hasInTableScope(N.TABLE)&&(t.openElements.popUntilTagNamePopped(N.TABLE),t._resetInsertionMode());break}case N.TEMPLATE:{$c(t,e);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:um(t,e)}}function um(t,e){const r=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,p_(t,e),t.fosterParentingEnabled=r}function jz(t,e){t.pendingCharacterTokens.push(e)}function Fz(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function Sh(t,e){let r=0;if(t.hasNonWhitespacePendingCharacterToken)for(;r<t.pendingCharacterTokens.length;r++)um(t,t.pendingCharacterTokens[r]);else for(;r<t.pendingCharacterTokens.length;r++)t._insertCharacters(t.pendingCharacterTokens[r]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const Bz=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function p2e(t,e){const r=e.tagID;Bz.has(r)?t.openElements.hasInTableScope(N.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(N.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ce.IN_TABLE,_d(t,e)):Mn(t,e)}function m2e(t,e){const r=e.tagID;switch(r){case N.CAPTION:case N.TABLE:{t.openElements.hasInTableScope(N.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(N.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ce.IN_TABLE,r===N.TABLE&&bp(t,e));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:m_(t,e)}}function FA(t,e){switch(e.tagID){case N.HTML:{Mn(t,e);break}case N.COL:{t._appendElement(e,Le.HTML),e.ackSelfClosing=!0;break}case N.TEMPLATE:{Oi(t,e);break}default:Cy(t,e)}}function g2e(t,e){switch(e.tagID){case N.COLGROUP:{t.openElements.currentTagId===N.COLGROUP&&(t.openElements.pop(),t.insertionMode=ce.IN_TABLE);break}case N.TEMPLATE:{$c(t,e);break}case N.COL:break;default:Cy(t,e)}}function Cy(t,e){t.openElements.currentTagId===N.COLGROUP&&(t.openElements.pop(),t.insertionMode=ce.IN_TABLE,t._processToken(e))}function g_(t,e){switch(e.tagID){case N.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Le.HTML),t.insertionMode=ce.IN_ROW;break}case N.TH:case N.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(_e.TR,N.TR),t.insertionMode=ce.IN_ROW,b_(t,e);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ce.IN_TABLE,_d(t,e));break}default:_d(t,e)}}function QE(t,e){const r=e.tagID;switch(e.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{t.openElements.hasInTableScope(r)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ce.IN_TABLE);break}case N.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ce.IN_TABLE,bp(t,e));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:bp(t,e)}}function b_(t,e){switch(e.tagID){case N.TH:case N.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,Le.HTML),t.insertionMode=ce.IN_CELL,t.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{t.openElements.hasInTableScope(N.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ce.IN_TABLE_BODY,g_(t,e));break}default:_d(t,e)}}function $z(t,e){switch(e.tagID){case N.TR:{t.openElements.hasInTableScope(N.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ce.IN_TABLE_BODY);break}case N.TABLE:{t.openElements.hasInTableScope(N.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ce.IN_TABLE_BODY,QE(t,e));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(N.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ce.IN_TABLE_BODY,QE(t,e));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:bp(t,e)}}function b2e(t,e){const r=e.tagID;Bz.has(r)?(t.openElements.hasInTableScope(N.TD)||t.openElements.hasInTableScope(N.TH))&&(t._closeTableCell(),b_(t,e)):Mn(t,e)}function y2e(t,e){const r=e.tagID;switch(r){case N.TD:case N.TH:{t.openElements.hasInTableScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ce.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{t.openElements.hasInTableScope(r)&&(t._closeTableCell(),$z(t,e));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:m_(t,e)}}function Uz(t,e){switch(e.tagID){case N.HTML:{Mn(t,e);break}case N.OPTION:{t.openElements.currentTagId===N.OPTION&&t.openElements.pop(),t._insertElement(e,Le.HTML);break}case N.OPTGROUP:{t.openElements.currentTagId===N.OPTION&&t.openElements.pop(),t.openElements.currentTagId===N.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Le.HTML);break}case N.HR:{t.openElements.currentTagId===N.OPTION&&t.openElements.pop(),t.openElements.currentTagId===N.OPTGROUP&&t.openElements.pop(),t._appendElement(e,Le.HTML),e.ackSelfClosing=!0;break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{t.openElements.hasInSelectScope(N.SELECT)&&(t.openElements.popUntilTagNamePopped(N.SELECT),t._resetInsertionMode(),e.tagID!==N.SELECT&&t._processStartTag(e));break}case N.SCRIPT:case N.TEMPLATE:{Oi(t,e);break}}}function Hz(t,e){switch(e.tagID){case N.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===N.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===N.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===N.OPTGROUP&&t.openElements.pop();break}case N.OPTION:{t.openElements.currentTagId===N.OPTION&&t.openElements.pop();break}case N.SELECT:{t.openElements.hasInSelectScope(N.SELECT)&&(t.openElements.popUntilTagNamePopped(N.SELECT),t._resetInsertionMode());break}case N.TEMPLATE:{$c(t,e);break}}}function v2e(t,e){const r=e.tagID;r===N.CAPTION||r===N.TABLE||r===N.TBODY||r===N.TFOOT||r===N.THEAD||r===N.TR||r===N.TD||r===N.TH?(t.openElements.popUntilTagNamePopped(N.SELECT),t._resetInsertionMode(),t._processStartTag(e)):Uz(t,e)}function _2e(t,e){const r=e.tagID;r===N.CAPTION||r===N.TABLE||r===N.TBODY||r===N.TFOOT||r===N.THEAD||r===N.TR||r===N.TD||r===N.TH?t.openElements.hasInTableScope(r)&&(t.openElements.popUntilTagNamePopped(N.SELECT),t._resetInsertionMode(),t.onEndTag(e)):Hz(t,e)}function x2e(t,e){switch(e.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{Oi(t,e);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{t.tmplInsertionModeStack[0]=ce.IN_TABLE,t.insertionMode=ce.IN_TABLE,_d(t,e);break}case N.COL:{t.tmplInsertionModeStack[0]=ce.IN_COLUMN_GROUP,t.insertionMode=ce.IN_COLUMN_GROUP,FA(t,e);break}case N.TR:{t.tmplInsertionModeStack[0]=ce.IN_TABLE_BODY,t.insertionMode=ce.IN_TABLE_BODY,g_(t,e);break}case N.TD:case N.TH:{t.tmplInsertionModeStack[0]=ce.IN_ROW,t.insertionMode=ce.IN_ROW,b_(t,e);break}default:t.tmplInsertionModeStack[0]=ce.IN_BODY,t.insertionMode=ce.IN_BODY,Mn(t,e)}}function w2e(t,e){e.tagID===N.TEMPLATE&&$c(t,e)}function zz(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(N.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):jA(t,e)}function S2e(t,e){e.tagID===N.HTML?Mn(t,e):Ty(t,e)}function Wz(t,e){var r;if(e.tagID===N.HTML){if(t.fragmentContext||(t.insertionMode=ce.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===N.HTML){t._setEndLocation(t.openElements.items[0],e);const n=t.openElements.items[1];n&&!(!((r=t.treeAdapter.getNodeSourceCodeLocation(n))===null||r===void 0)&&r.endTag)&&t._setEndLocation(n,e)}}else Ty(t,e)}function Ty(t,e){t.insertionMode=ce.IN_BODY,p_(t,e)}function E2e(t,e){switch(e.tagID){case N.HTML:{Mn(t,e);break}case N.FRAMESET:{t._insertElement(e,Le.HTML);break}case N.FRAME:{t._appendElement(e,Le.HTML),e.ackSelfClosing=!0;break}case N.NOFRAMES:{Oi(t,e);break}}}function C2e(t,e){e.tagID===N.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==N.FRAMESET&&(t.insertionMode=ce.AFTER_FRAMESET))}function T2e(t,e){switch(e.tagID){case N.HTML:{Mn(t,e);break}case N.NOFRAMES:{Oi(t,e);break}}}function k2e(t,e){e.tagID===N.HTML&&(t.insertionMode=ce.AFTER_AFTER_FRAMESET)}function A2e(t,e){e.tagID===N.HTML?Mn(t,e):Q0(t,e)}function Q0(t,e){t.insertionMode=ce.IN_BODY,p_(t,e)}function R2e(t,e){switch(e.tagID){case N.HTML:{Mn(t,e);break}case N.NOFRAMES:{Oi(t,e);break}}}function P2e(t,e){e.chars=vr,t._insertCharacters(e)}function I2e(t,e){t._insertCharacters(e),t.framesetOk=!1}function Vz(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Le.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function N2e(t,e){if(qke(e))Vz(t),t._startTagOutsideForeignContent(e);else{const r=t._getAdjustedCurrentElement(),n=t.treeAdapter.getNamespaceURI(r);n===Le.MATHML?Az(e):n===Le.SVG&&(Kke(e),Rz(e)),LA(e),e.selfClosing?t._appendElement(e,n):t._insertElement(e,n),e.ackSelfClosing=!0}}function D2e(t,e){if(e.tagID===N.P||e.tagID===N.BR){Vz(t),t._endTagOutsideForeignContent(e);return}for(let r=t.openElements.stackTop;r>0;r--){const n=t.openElements.items[r];if(t.treeAdapter.getNamespaceURI(n)===Le.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(n);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(r);break}}}_e.AREA,_e.BASE,_e.BASEFONT,_e.BGSOUND,_e.BR,_e.COL,_e.EMBED,_e.FRAME,_e.HR,_e.IMG,_e.INPUT,_e.KEYGEN,_e.LINK,_e.META,_e.PARAM,_e.SOURCE,_e.TRACK,_e.WBR;const O2e=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,L2e=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),oL={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Gz(t,e){const r=V2e(t),n=DA("type",{handlers:{root:M2e,element:j2e,text:F2e,comment:Kz,doctype:B2e,raw:U2e},unknown:H2e}),s={parser:r?new nL(oL):nL.getFragmentParser(void 0,oL),handle(a){n(a,s)},stitches:!1,options:e||{}};n(t,s),Kd(s,ko());const i=r?s.parser.document:s.parser.getFragment(),o=qTe(i,{file:s.options.file});return s.stitches&&Vd(o,"comment",function(a,l,c){const u=a;if(u.value.stitch&&c&&l!==void 0){const d=c.children;return d[l]=u.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===t.type?o.children[0]:o}function qz(t,e){let r=-1;if(t)for(;++r<t.length;)e.handle(t[r])}function M2e(t,e){qz(t.children,e)}function j2e(t,e){z2e(t,e),qz(t.children,e),W2e(t,e)}function F2e(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const r={type:At.CHARACTER,chars:t.value,location:dm(t)};Kd(e,ko(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function B2e(t,e){const r={type:At.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:dm(t)};Kd(e,ko(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function $2e(t,e){e.stitches=!0;const r=G2e(t);if("children"in t&&"children"in r){const n=Gz({type:"root",children:t.children},e.options);r.children=n.children}Kz({type:"comment",value:{stitch:r}},e)}function Kz(t,e){const r=t.value,n={type:At.COMMENT,data:r,location:dm(t)};Kd(e,ko(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function U2e(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,Yz(e,ko(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(O2e,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const r=e.parser.tokenizer._consume();e.parser.tokenizer._callState(r)}}function H2e(t,e){const r=t;if(e.options.passThrough&&e.options.passThrough.includes(r.type))$2e(r,e);else{let n="";throw L2e.has(r.type)&&(n=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+r.type+"` node"+n)}}function Kd(t,e){Yz(t,e);const r=t.parser.tokenizer.currentCharacterToken;r&&r.location&&(r.location.endLine=t.parser.tokenizer.preprocessor.line,r.location.endCol=t.parser.tokenizer.preprocessor.col+1,r.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=jr.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function Yz(t,e){if(e&&e.offset!==void 0){const r={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=r}}function z2e(t,e){const r=t.tagName.toLowerCase();if(e.parser.tokenizer.state===jr.PLAINTEXT)return;Kd(e,ko(t));const n=e.parser.openElements.current;let s="namespaceURI"in n?n.namespaceURI:ec.html;s===ec.html&&r==="svg"&&(s=ec.svg);const i=ZTe({...t,children:[]},{space:s===ec.svg?"svg":"html"}),o={type:At.START_TAG,tagName:r,tagID:qd(r),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in i?i.attrs:[],location:dm(t)};e.parser.currentToken=o,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=r}function W2e(t,e){const r=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&yz.includes(r)||e.parser.tokenizer.state===jr.PLAINTEXT)return;Kd(e,l_(t));const n={type:At.END_TAG,tagName:r,tagID:qd(r),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:dm(t)};e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken),r===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===jr.RCDATA||e.parser.tokenizer.state===jr.RAWTEXT||e.parser.tokenizer.state===jr.SCRIPT_DATA)&&(e.parser.tokenizer.state=jr.DATA)}function V2e(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function dm(t){const e=ko(t)||{line:void 0,column:void 0,offset:void 0},r=l_(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:r.line,endCol:r.column,endOffset:r.offset}}function G2e(t){return"children"in t?Cc({...t,children:[]}):Cc(t)}function q2e(t){return function(e,r){return Gz(e,{...t,file:r})}}function ky(t,e){const r=String(t);if(typeof e!="string")throw new TypeError("Expected character");let n=0,s=r.indexOf(e);for(;s!==-1;)n++,s=r.indexOf(e,s+e.length);return n}function K2e(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Y2e(t,e,r){const s=h_((r||{}).ignore||[]),i=X2e(e);let o=-1;for(;++o<i.length;)dz(t,"text",a);function a(c,u){let d=-1,h;for(;++d<u.length;){const f=u[d],b=h?h.children:void 0;if(s(f,b?b.indexOf(f):void 0,h))return;h=f}if(h)return l(c,u)}function l(c,u){const d=u[u.length-1],h=i[o][0],f=i[o][1];let b=0;const g=d.children.indexOf(c);let y=!1,v=[];h.lastIndex=0;let _=h.exec(c.value);for(;_;){const x=_.index,w={index:_.index,input:_.input,stack:[...u,c]};let S=f(..._,w);if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S===!1?h.lastIndex=x+1:(b!==x&&v.push({type:"text",value:c.value.slice(b,x)}),Array.isArray(S)?v.push(...S):S&&v.push(S),b=x+_[0].length,y=!0),!h.global)break;_=h.exec(c.value)}return y?(b<c.value.length&&v.push({type:"text",value:c.value.slice(b)}),d.children.splice(g,1,...v)):v=[c],g+v.length}}function X2e(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!t[0]||Array.isArray(t[0])?t:[t];let n=-1;for(;++n<r.length;){const s=r[n];e.push([J2e(s[0]),Z2e(s[1])])}return e}function J2e(t){return typeof t=="string"?new RegExp(K2e(t),"g"):t}function Z2e(t){return typeof t=="function"?t:function(){return t}}const Fw="phrasing",Bw=["autolink","link","image","label"];function Q2e(){return{transforms:[oRe],enter:{literalAutolink:tRe,literalAutolinkEmail:$w,literalAutolinkHttp:$w,literalAutolinkWww:$w},exit:{literalAutolink:iRe,literalAutolinkEmail:sRe,literalAutolinkHttp:rRe,literalAutolinkWww:nRe}}}function eRe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Fw,notInConstruct:Bw},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Fw,notInConstruct:Bw},{character:":",before:"[ps]",after:"\\/",inConstruct:Fw,notInConstruct:Bw}]}}function tRe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function $w(t){this.config.enter.autolinkProtocol.call(this,t)}function rRe(t){this.config.exit.autolinkProtocol.call(this,t)}function nRe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];ue(e.type==="link"),e.url="http://"+this.sliceSerialize(t)}function sRe(t){this.config.exit.autolinkEmail.call(this,t)}function iRe(t){this.exit(t)}function oRe(t){Y2e(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,aRe],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,lRe]],{ignore:["link","linkReference"]})}function aRe(t,e,r,n,s){let i="";if(!Xz(s)||(/^w/i.test(e)&&(r=e+r,e="",i="http://"),!cRe(r)))return!1;const o=uRe(r+n);if(!o[0])return!1;const a={type:"link",title:null,url:i+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function lRe(t,e,r,n){return!Xz(n,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+r,children:[{type:"text",value:e+"@"+r}]}}function cRe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function uRe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let r=e[0],n=r.indexOf(")");const s=ky(t,"(");let i=ky(t,")");for(;n!==-1&&s>i;)t+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),i++;return[t,r]}function Xz(t,e){const r=t.input.charCodeAt(t.index-1);return(t.index===0||Ec(r)||c_(r))&&(!e||r!==47)}Jz.peek=vRe;function dRe(){this.buffer()}function hRe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function fRe(){this.buffer()}function pRe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function mRe(t){const e=this.resume(),r=this.stack[this.stack.length-1];ue(r.type==="footnoteReference"),r.identifier=Si(this.sliceSerialize(t)).toLowerCase(),r.label=e}function gRe(t){this.exit(t)}function bRe(t){const e=this.resume(),r=this.stack[this.stack.length-1];ue(r.type==="footnoteDefinition"),r.identifier=Si(this.sliceSerialize(t)).toLowerCase(),r.label=e}function yRe(t){this.exit(t)}function vRe(){return"["}function Jz(t,e,r,n){const s=r.createTracker(n);let i=s.move("[^");const o=r.enter("footnoteReference"),a=r.enter("reference");return i+=s.move(r.safe(r.associationId(t),{after:"]",before:i})),a(),o(),i+=s.move("]"),i}function _Re(){return{enter:{gfmFootnoteCallString:dRe,gfmFootnoteCall:hRe,gfmFootnoteDefinitionLabelString:fRe,gfmFootnoteDefinition:pRe},exit:{gfmFootnoteCallString:mRe,gfmFootnoteCall:gRe,gfmFootnoteDefinitionLabelString:bRe,gfmFootnoteDefinition:yRe}}}function xRe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:r,footnoteReference:Jz},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(n,s,i,o){const a=i.createTracker(o);let l=a.move("[^");const c=i.enter("footnoteDefinition"),u=i.enter("label");return l+=a.move(i.safe(i.associationId(n),{before:l,after:"]"})),u(),l+=a.move("]:"),n.children&&n.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+i.indentLines(i.containerFlow(n,a.current()),e?Zz:wRe))),c(),l}}function wRe(t,e,r){return e===0?t:Zz(t,e,r)}function Zz(t,e,r){return(r?"":"    ")+t}const SRe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Qz.peek=ARe;function ERe(){return{canContainEols:["delete"],enter:{strikethrough:TRe},exit:{strikethrough:kRe}}}function CRe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:SRe}],handlers:{delete:Qz}}}function TRe(t){this.enter({type:"delete",children:[]},t)}function kRe(t){this.exit(t)}function Qz(t,e,r,n){const s=r.createTracker(n),i=r.enter("strikethrough");let o=s.move("~~");return o+=r.containerPhrasing(t,{...s.current(),before:o,after:"~"}),o+=s.move("~~"),i(),o}function ARe(){return"~"}function RRe(t){return t.length}function PRe(t,e){const r=e||{},n=(r.align||[]).concat(),s=r.stringLength||RRe,i=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const m=[],g=[];let y=-1;for(t[u].length>c&&(c=t[u].length);++y<t[u].length;){const v=IRe(t[u][y]);if(r.alignDelimiters!==!1){const _=s(v);g[y]=_,(l[y]===void 0||_>l[y])&&(l[y]=_)}m.push(v)}o[u]=m,a[u]=g}let d=-1;if(typeof n=="object"&&"length"in n)for(;++d<c;)i[d]=aL(n[d]);else{const m=aL(n);for(;++d<c;)i[d]=m}d=-1;const h=[],f=[];for(;++d<c;){const m=i[d];let g="",y="";m===99?(g=":",y=":"):m===108?g=":":m===114&&(y=":");let v=r.alignDelimiters===!1?1:Math.max(1,l[d]-g.length-y.length);const _=g+"-".repeat(v)+y;r.alignDelimiters!==!1&&(v=g.length+v+y.length,v>l[d]&&(l[d]=v),f[d]=v),h[d]=_}o.splice(1,0,h),a.splice(1,0,f),u=-1;const b=[];for(;++u<o.length;){const m=o[u],g=a[u];d=-1;const y=[];for(;++d<c;){const v=m[d]||"";let _="",x="";if(r.alignDelimiters!==!1){const w=l[d]-(g[d]||0),S=i[d];S===114?_=" ".repeat(w):S===99?w%2?(_=" ".repeat(w/2+.5),x=" ".repeat(w/2-.5)):(_=" ".repeat(w/2),x=_):x=" ".repeat(w)}r.delimiterStart!==!1&&!d&&y.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&v==="")&&(r.delimiterStart!==!1||d)&&y.push(" "),r.alignDelimiters!==!1&&y.push(_),y.push(v),r.alignDelimiters!==!1&&y.push(x),r.padding!==!1&&y.push(" "),(r.delimiterEnd!==!1||d!==c-1)&&y.push("|")}b.push(r.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return b.join(`
`)}function IRe(t){return t==null?"":String(t)}function aL(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function NRe(t,e,r,n){const s=r.enter("blockquote"),i=r.createTracker(n);i.move("> "),i.shift(2);const o=r.indentLines(r.containerFlow(t,i.current()),DRe);return s(),o}function DRe(t,e,r){return">"+(r?"":" ")+t}function ORe(t,e){return lL(t,e.inConstruct,!0)&&!lL(t,e.notInConstruct,!1)}function lL(t,e,r){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return r;let n=-1;for(;++n<e.length;)if(t.includes(e[n]))return!0;return!1}function cL(t,e,r,n){let s=-1;for(;++s<r.unsafe.length;)if(r.unsafe[s].character===`
`&&ORe(r.stack,r.unsafe[s]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function LRe(t,e){const r=String(t);let n=r.indexOf(e),s=n,i=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===s?++i>o&&(o=i):i=1,s=n+e.length,n=r.indexOf(e,s);return o}function MRe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function jRe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function FRe(t,e,r,n){const s=jRe(r),i=t.value||"",o=s==="`"?"GraveAccent":"Tilde";if(MRe(t,r)){const d=r.enter("codeIndented"),h=r.indentLines(i,BRe);return d(),h}const a=r.createTracker(n),l=s.repeat(Math.max(LRe(i,s)+1,3)),c=r.enter("codeFenced");let u=a.move(l);if(t.lang){const d=r.enter(`codeFencedLang${o}`);u+=a.move(r.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),d()}if(t.lang&&t.meta){const d=r.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(r.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),d()}return u+=a.move(`
`),i&&(u+=a.move(i+`
`)),u+=a.move(l),c(),u}function BRe(t,e,r){return(r?"":"    ")+t}function BA(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function $Re(t,e,r,n){const s=BA(r),i=s==='"'?"Quote":"Apostrophe",o=r.enter("definition");let a=r.enter("label");const l=r.createTracker(n);let c=l.move("[");return c+=l.move(r.safe(r.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=r.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(r.safe(t.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),o(),c}function URe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function yp(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Ay(t,e,r){const n=vd(t),s=vd(e);return n===void 0?s===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}e7.peek=HRe;function e7(t,e,r,n){const s=URe(r),i=r.enter("emphasis"),o=r.createTracker(n),a=o.move(s);let l=o.move(r.containerPhrasing(t,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),u=Ay(n.before.charCodeAt(n.before.length-1),c,s);u.inside&&(l=yp(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=Ay(n.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+yp(d));const f=o.move(s);return i(),r.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function HRe(t,e,r){return r.options.emphasis||"*"}function zRe(t,e){let r=!1;return Vd(t,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return r=!0,VE}),!!((!t.depth||t.depth<3)&&EA(t)&&(e.options.setext||r))}function WRe(t,e,r,n){const s=Math.max(Math.min(6,t.depth||1),1),i=r.createTracker(n);if(zRe(t,r)){const u=r.enter("headingSetext"),d=r.enter("phrasing"),h=r.containerPhrasing(t,{...i.current(),before:`
`,after:`
`});return d(),u(),h+`
`+(s===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(s),a=r.enter("headingAtx"),l=r.enter("phrasing");i.move(o+" ");let c=r.containerPhrasing(t,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(c)&&(c=yp(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,r.options.closeAtx&&(c+=" "+o),l(),a(),c}t7.peek=VRe;function t7(t){return t.value||""}function VRe(){return"<"}r7.peek=GRe;function r7(t,e,r,n){const s=BA(r),i=s==='"'?"Quote":"Apostrophe",o=r.enter("image");let a=r.enter("label");const l=r.createTracker(n);let c=l.move("![");return c+=l.move(r.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=r.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(r.safe(t.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),c+=l.move(")"),o(),c}function GRe(){return"!"}n7.peek=qRe;function n7(t,e,r,n){const s=t.referenceType,i=r.enter("imageReference");let o=r.enter("label");const a=r.createTracker(n);let l=a.move("![");const c=r.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=r.stack;r.stack=[],o=r.enter("reference");const d=r.safe(r.associationId(t),{before:l,after:"]",...a.current()});return o(),r.stack=u,i(),s==="full"||!c||c!==d?l+=a.move(d+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function qRe(){return"!"}s7.peek=KRe;function s7(t,e,r){let n=t.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(n);)s+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++i<r.unsafe.length;){const o=r.unsafe[i],a=r.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(n);){let c=l.index;n.charCodeAt(c)===10&&n.charCodeAt(c-1)===13&&c--,n=n.slice(0,c)+" "+n.slice(l.index+1)}}return s+n+s}function KRe(){return"`"}function i7(t,e){const r=EA(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(r===t.url||"mailto:"+r===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}o7.peek=YRe;function o7(t,e,r,n){const s=BA(r),i=s==='"'?"Quote":"Apostrophe",o=r.createTracker(n);let a,l;if(i7(t,r)){const u=r.stack;r.stack=[],a=r.enter("autolink");let d=o.move("<");return d+=o.move(r.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),r.stack=u,d}a=r.enter("link"),l=r.enter("label");let c=o.move("[");return c+=o.move(r.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=r.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(r.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=r.enter("destinationRaw"),c+=o.move(r.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=r.enter(`title${i}`),c+=o.move(" "+s),c+=o.move(r.safe(t.title,{before:c,after:s,...o.current()})),c+=o.move(s),l()),c+=o.move(")"),a(),c}function YRe(t,e,r){return i7(t,r)?"<":"["}a7.peek=XRe;function a7(t,e,r,n){const s=t.referenceType,i=r.enter("linkReference");let o=r.enter("label");const a=r.createTracker(n);let l=a.move("[");const c=r.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=r.stack;r.stack=[],o=r.enter("reference");const d=r.safe(r.associationId(t),{before:l,after:"]",...a.current()});return o(),r.stack=u,i(),s==="full"||!c||c!==d?l+=a.move(d+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function XRe(){return"["}function $A(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function JRe(t){const e=$A(t),r=t.options.bulletOther;if(!r)return e==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+r+"`) to be different");return r}function ZRe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function l7(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function QRe(t,e,r,n){const s=r.enter("list"),i=r.bulletCurrent;let o=t.ordered?ZRe(r):$A(r);const a=t.ordered?o==="."?")":".":JRe(r);let l=e&&r.bulletLastUsed?o===r.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(l=!0),l7(r)===o&&u){let d=-1;for(;++d<t.children.length;){const h=t.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),r.bulletCurrent=o;const c=r.containerFlow(t,n);return r.bulletLastUsed=o,r.bulletCurrent=i,s(),c}function ePe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function tPe(t,e,r,n){const s=ePe(r);let i=r.bulletCurrent||$A(r);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(r.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let o=i.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=r.createTracker(n);a.move(i+" ".repeat(o-i.length)),a.shift(o);const l=r.enter("listItem"),c=r.indentLines(r.containerFlow(t,a.current()),u);return l(),c;function u(d,h,f){return h?(f?"":" ".repeat(o))+d:(f?i:i+" ".repeat(o-i.length))+d}}function rPe(t,e,r,n){const s=r.enter("paragraph"),i=r.enter("phrasing"),o=r.containerPhrasing(t,n);return i(),s(),o}const nPe=h_(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function sPe(t,e,r,n){return(t.children.some(function(o){return nPe(o)})?r.containerPhrasing:r.containerFlow).call(r,t,n)}function iPe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}c7.peek=oPe;function c7(t,e,r,n){const s=iPe(r),i=r.enter("strong"),o=r.createTracker(n),a=o.move(s+s);let l=o.move(r.containerPhrasing(t,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),u=Ay(n.before.charCodeAt(n.before.length-1),c,s);u.inside&&(l=yp(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=Ay(n.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+yp(d));const f=o.move(s+s);return i(),r.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function oPe(t,e,r){return r.options.strong||"*"}function aPe(t,e,r,n){return r.safe(t.value,n)}function lPe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function cPe(t,e,r){const n=(l7(r)+(r.options.ruleSpaces?" ":"")).repeat(lPe(r));return r.options.ruleSpaces?n.slice(0,-1):n}const u7={blockquote:NRe,break:cL,code:FRe,definition:$Re,emphasis:e7,hardBreak:cL,heading:WRe,html:t7,image:r7,imageReference:n7,inlineCode:s7,link:o7,linkReference:a7,list:QRe,listItem:tPe,paragraph:rPe,root:sPe,strong:c7,text:aPe,thematicBreak:cPe};function uPe(){return{enter:{table:dPe,tableData:uL,tableHeader:uL,tableRow:fPe},exit:{codeText:pPe,table:hPe,tableData:Uw,tableHeader:Uw,tableRow:Uw}}}function dPe(t){const e=t._align;ue(e,"expected `_align` on table"),this.enter({type:"table",align:e.map(function(r){return r==="none"?null:r}),children:[]},t),this.data.inTable=!0}function hPe(t){this.exit(t),this.data.inTable=void 0}function fPe(t){this.enter({type:"tableRow",children:[]},t)}function Uw(t){this.exit(t)}function uL(t){this.enter({type:"tableCell",children:[]},t)}function pPe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,mPe));const r=this.stack[this.stack.length-1];ue(r.type==="inlineCode"),r.value=e,this.exit(t)}function mPe(t,e){return e==="|"?e:t}function gPe(t){const e=t||{},r=e.tableCellPadding,n=e.tablePipeAlign,s=e.stringLength,i=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:l,tableRow:a}};function o(f,b,m,g){return c(u(f,m,g),f.align)}function a(f,b,m,g){const y=d(f,m,g),v=c([y]);return v.slice(0,v.indexOf(`
`))}function l(f,b,m,g){const y=m.enter("tableCell"),v=m.enter("phrasing"),_=m.containerPhrasing(f,{...g,before:i,after:i});return v(),y(),_}function c(f,b){return PRe(f,{align:b,alignDelimiters:n,padding:r,stringLength:s})}function u(f,b,m){const g=f.children;let y=-1;const v=[],_=b.enter("table");for(;++y<g.length;)v[y]=d(g[y],b,m);return _(),v}function d(f,b,m){const g=f.children;let y=-1;const v=[],_=b.enter("tableRow");for(;++y<g.length;)v[y]=l(g[y],f,b,m);return _(),v}function h(f,b,m){let g=u7.inlineCode(f,b,m);return m.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function bPe(){return{exit:{taskListCheckValueChecked:dL,taskListCheckValueUnchecked:dL,paragraph:vPe}}}function yPe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:_Pe}}}function dL(t){const e=this.stack[this.stack.length-2];ue(e.type==="listItem"),e.checked=t.type==="taskListCheckValueChecked"}function vPe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const r=this.stack[this.stack.length-1];ue(r.type==="paragraph");const n=r.children[0];if(n&&n.type==="text"){const s=e.children;let i=-1,o;for(;++i<s.length;){const a=s[i];if(a.type==="paragraph"){o=a;break}}o===r&&(n.value=n.value.slice(1),n.value.length===0?r.children.shift():r.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,r.position.start=Object.assign({},n.position.start)))}}this.exit(t)}function _Pe(t,e,r,n){const s=t.children[0],i=typeof t.checked=="boolean"&&s&&s.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=r.createTracker(n);i&&a.move(o);let l=u7.listItem(t,e,r,{...n,...a.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function xPe(){return[Q2e(),_Re(),ERe(),uPe(),bPe()]}function wPe(t){return{extensions:[eRe(),xRe(t),CRe(),gPe(t),yPe()]}}const SPe={tokenize:RPe,partial:!0},d7={tokenize:PPe,partial:!0},h7={tokenize:IPe,partial:!0},f7={tokenize:NPe,partial:!0},EPe={tokenize:DPe,partial:!0},p7={name:"wwwAutolink",tokenize:kPe,previous:g7},m7={name:"protocolAutolink",tokenize:APe,previous:b7},pa={name:"emailAutolink",tokenize:TPe,previous:y7},Ao={};function CPe(){return{text:Ao}}let Ll=B.digit0;for(;Ll<B.leftCurlyBrace;)Ao[Ll]=pa,Ll++,Ll===B.colon?Ll=B.uppercaseA:Ll===B.leftSquareBracket&&(Ll=B.lowercaseA);Ao[B.plusSign]=pa;Ao[B.dash]=pa;Ao[B.dot]=pa;Ao[B.underscore]=pa;Ao[B.uppercaseH]=[pa,m7];Ao[B.lowercaseH]=[pa,m7];Ao[B.uppercaseW]=[pa,p7];Ao[B.lowercaseW]=[pa,p7];function TPe(t,e,r){const n=this;let s,i;return o;function o(d){return!eC(d)||!y7.call(n,n.previous)||UA(n.events)?r(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return eC(d)?(t.consume(d),a):d===B.atSign?(t.consume(d),l):r(d)}function l(d){return d===B.dot?t.check(EPe,u,c)(d):d===B.dash||d===B.underscore||Nn(d)?(i=!0,t.consume(d),l):u(d)}function c(d){return t.consume(d),s=!0,l}function u(d){return i&&s&&Gn(n.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):r(d)}}function kPe(t,e,r){const n=this;return s;function s(o){return o!==B.uppercaseW&&o!==B.lowercaseW||!g7.call(n,n.previous)||UA(n.events)?r(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(SPe,t.attempt(d7,t.attempt(h7,i),r),r)(o))}function i(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function APe(t,e,r){const n=this;let s="",i=!1;return o;function o(d){return(d===B.uppercaseH||d===B.lowercaseH)&&b7.call(n,n.previous)&&!UA(n.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(d),t.consume(d),a):r(d)}function a(d){if(Gn(d)&&s.length<5)return s+=String.fromCodePoint(d),t.consume(d),a;if(d===B.colon){const h=s.toLowerCase();if(h==="http"||h==="https")return t.consume(d),l}return r(d)}function l(d){return d===B.slash?(t.consume(d),i?c:(i=!0,l)):r(d)}function c(d){return d===B.eof||wy(d)||sr(d)||Ec(d)||c_(d)?r(d):t.attempt(d7,t.attempt(h7,u),r)(d)}function u(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function RPe(t,e,r){let n=0;return s;function s(o){return(o===B.uppercaseW||o===B.lowercaseW)&&n<3?(n++,t.consume(o),s):o===B.dot&&n===3?(t.consume(o),i):r(o)}function i(o){return o===B.eof?r(o):e(o)}}function PPe(t,e,r){let n,s,i;return o;function o(c){return c===B.dot||c===B.underscore?t.check(f7,l,a)(c):c===B.eof||sr(c)||Ec(c)||c!==B.dash&&c_(c)?l(c):(i=!0,t.consume(c),o)}function a(c){return c===B.underscore?n=!0:(s=n,n=void 0),t.consume(c),o}function l(c){return s||n||!i?r(c):e(c)}}function IPe(t,e){let r=0,n=0;return s;function s(o){return o===B.leftParenthesis?(r++,t.consume(o),s):o===B.rightParenthesis&&n<r?i(o):o===B.exclamationMark||o===B.quotationMark||o===B.ampersand||o===B.apostrophe||o===B.rightParenthesis||o===B.asterisk||o===B.comma||o===B.dot||o===B.colon||o===B.semicolon||o===B.lessThan||o===B.questionMark||o===B.rightSquareBracket||o===B.underscore||o===B.tilde?t.check(f7,e,i)(o):o===B.eof||sr(o)||Ec(o)?e(o):(t.consume(o),s)}function i(o){return o===B.rightParenthesis&&n++,t.consume(o),s}}function NPe(t,e,r){return n;function n(a){return a===B.exclamationMark||a===B.quotationMark||a===B.apostrophe||a===B.rightParenthesis||a===B.asterisk||a===B.comma||a===B.dot||a===B.colon||a===B.semicolon||a===B.questionMark||a===B.underscore||a===B.tilde?(t.consume(a),n):a===B.ampersand?(t.consume(a),i):a===B.rightSquareBracket?(t.consume(a),s):a===B.lessThan||a===B.eof||sr(a)||Ec(a)?e(a):r(a)}function s(a){return a===B.eof||a===B.leftParenthesis||a===B.leftSquareBracket||sr(a)||Ec(a)?e(a):n(a)}function i(a){return Gn(a)?o(a):r(a)}function o(a){return a===B.semicolon?(t.consume(a),n):Gn(a)?(t.consume(a),o):r(a)}}function DPe(t,e,r){return n;function n(i){return t.consume(i),s}function s(i){return Nn(i)?r(i):e(i)}}function g7(t){return t===B.eof||t===B.leftParenthesis||t===B.asterisk||t===B.underscore||t===B.leftSquareBracket||t===B.rightSquareBracket||t===B.tilde||sr(t)}function b7(t){return!Gn(t)}function y7(t){return!(t===B.slash||eC(t))}function eC(t){return t===B.plusSign||t===B.dash||t===B.dot||t===B.underscore||Nn(t)}function UA(t){let e=t.length,r=!1;for(;e--;){const n=t[e][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return t.length>0&&!r&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const OPe={tokenize:HPe,partial:!0};function LPe(){return{document:{[B.leftSquareBracket]:{name:"gfmFootnoteDefinition",tokenize:BPe,continuation:{tokenize:$Pe},exit:UPe}},text:{[B.leftSquareBracket]:{name:"gfmFootnoteCall",tokenize:FPe},[B.rightSquareBracket]:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:MPe,resolveTo:jPe}}}}function MPe(t,e,r){const n=this;let s=n.events.length;const i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let o;for(;s--;){const l=n.events[s][1];if(l.type===W.labelImage){o=l;break}if(l.type==="gfmFootnoteCall"||l.type===W.labelLink||l.type===W.label||l.type===W.image||l.type===W.link)break}return a;function a(l){if(ue(l===B.rightSquareBracket,"expected `]`"),!o||!o._balanced)return r(l);const c=Si(n.sliceSerialize({start:o.end,end:n.now()}));return c.codePointAt(0)!==B.caret||!i.includes(c.slice(1))?r(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function jPe(t,e){let r=t.length,n;for(;r--;)if(t[r][1].type===W.labelImage&&t[r][0]==="enter"){n=t[r][1];break}ue(n,"expected `labelStart` to resolve"),t[r+1][1].type=W.data,t[r+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},t[r+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[r+3][1].end),end:Object.assign({},t[r+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},a={type:W.chunkString,contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},l=[t[r+1],t[r+2],["enter",s,e],t[r+3],t[r+4],["enter",i,e],["exit",i,e],["enter",o,e],["enter",a,e],["exit",a,e],["exit",o,e],t[t.length-2],t[t.length-1],["exit",s,e]];return t.splice(r,t.length-r+1,...l),t}function FPe(t,e,r){const n=this,s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i=0,o;return a;function a(d){return ue(d===B.leftSquareBracket,"expected `[`"),t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==B.caret?r(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(d){if(i>We.linkReferenceSizeMax||d===B.rightSquareBracket&&!o||d===B.eof||d===B.leftSquareBracket||sr(d))return r(d);if(d===B.rightSquareBracket){t.exit("chunkString");const h=t.exit("gfmFootnoteCallString");return s.includes(Si(n.sliceSerialize(h)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):r(d)}return sr(d)||(o=!0),i++,t.consume(d),d===B.backslash?u:c}function u(d){return d===B.leftSquareBracket||d===B.backslash||d===B.rightSquareBracket?(t.consume(d),i++,c):c(d)}}function BPe(t,e,r){const n=this,s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i,o=0,a;return l;function l(b){return ue(b===B.leftSquareBracket,"expected `[`"),t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(b){return b===B.caret?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):r(b)}function u(b){if(o>We.linkReferenceSizeMax||b===B.rightSquareBracket&&!a||b===B.eof||b===B.leftSquareBracket||sr(b))return r(b);if(b===B.rightSquareBracket){t.exit("chunkString");const m=t.exit("gfmFootnoteDefinitionLabelString");return i=Si(n.sliceSerialize(m)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),h}return sr(b)||(a=!0),o++,t.consume(b),b===B.backslash?d:u}function d(b){return b===B.leftSquareBracket||b===B.backslash||b===B.rightSquareBracket?(t.consume(b),o++,u):u(b)}function h(b){return b===B.colon?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),s.includes(i)||s.push(i),$t(t,f,"gfmFootnoteDefinitionWhitespace")):r(b)}function f(b){return e(b)}}function $Pe(t,e,r){return t.check(lm,e,t.attempt(OPe,e,r))}function UPe(t){t.exit("gfmFootnoteDefinition")}function HPe(t,e,r){const n=this;return $t(t,s,"gfmFootnoteDefinitionIndent",We.tabSize+1);function s(i){const o=n.events[n.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===We.tabSize?e(i):r(i)}}function zPe(t){let r=(t||{}).singleTilde;const n={name:"strikethrough",tokenize:i,resolveAll:s};return r==null&&(r=!0),{text:{[B.tilde]:n},insideSpan:{null:[n]},attentionMarkers:{null:[B.tilde]}};function s(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},d={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},h=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",d,a]],f=a.parser.constructs.insideSpan.null;f&&Os(h,h.length,0,u_(f,o.slice(c+1,l),a)),Os(h,h.length,0,[["exit",d,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),Os(o,c-1,l-c+3,h),l=c+h.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type=W.data);return o}function i(o,a,l){const c=this.previous,u=this.events;let d=0;return h;function h(b){return ue(b===B.tilde,"expected `~`"),c===B.tilde&&u[u.length-1][1].type!==W.characterEscape?l(b):(o.enter("strikethroughSequenceTemporary"),f(b))}function f(b){const m=vd(c);if(b===B.tilde)return d>1?l(b):(o.consume(b),d++,f);if(d<2&&!r)return l(b);const g=o.exit("strikethroughSequenceTemporary"),y=vd(b);return g._open=!y||y===We.attentionSideAfter&&!!m,g._close=!m||m===We.attentionSideAfter&&!!y,a(b)}}}class WPe{constructor(){this.map=[]}add(e,r,n){VPe(this,e,r,n)}consume(e){if(this.map.sort(function(i,o){return i[0]-o[0]}),this.map.length===0)return;let r=this.map.length;const n=[];for(;r>0;)r-=1,n.push(e.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),e.length=this.map[r][0];n.push(e.slice()),e.length=0;let s=n.pop();for(;s;){for(const i of s)e.push(i);s=n.pop()}this.map.length=0}}function VPe(t,e,r,n){let s=0;if(!(r===0&&n.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=r,t.map[s][2].push(...n);return}s+=1}t.map.push([e,r,n])}}function GPe(t,e){ue(t[e][1].type==="table","expected table");let r=!1;const n=[];for(;e<t.length;){const s=t[e];if(r){if(s[0]==="enter")s[1].type==="tableContent"&&n.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const i=n.length-1;n[i]=n[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(r=!0);e+=1}return n}function qPe(){return{flow:{null:{name:"table",tokenize:KPe,resolveAll:YPe}}}}function KPe(t,e,r){const n=this;let s=0,i=0,o;return a;function a(A){let I=n.events.length-1;for(;I>-1;){const R=n.events[I][1].type;if(R===W.lineEnding||R===W.linePrefix)I--;else break}const P=I>-1?n.events[I][1].type:null,D=P==="tableHead"||P==="tableRow"?S:l;return D===S&&n.parser.lazy[n.now().line]?r(A):D(A)}function l(A){return t.enter("tableHead"),t.enter("tableRow"),c(A)}function c(A){return A===B.verticalBar||(o=!0,i+=1),u(A)}function u(A){return A===B.eof?r(A):Ze(A)?i>1?(i=0,n.interrupt=!0,t.exit("tableRow"),t.enter(W.lineEnding),t.consume(A),t.exit(W.lineEnding),f):r(A):Pt(A)?$t(t,u,W.whitespace)(A):(i+=1,o&&(o=!1,s+=1),A===B.verticalBar?(t.enter("tableCellDivider"),t.consume(A),t.exit("tableCellDivider"),o=!0,u):(t.enter(W.data),d(A)))}function d(A){return A===B.eof||A===B.verticalBar||sr(A)?(t.exit(W.data),u(A)):(t.consume(A),A===B.backslash?h:d)}function h(A){return A===B.backslash||A===B.verticalBar?(t.consume(A),d):d(A)}function f(A){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(A):(t.enter("tableDelimiterRow"),o=!1,Pt(A)?(ue(n.parser.constructs.disable.null,"expected `disabled.null`"),$t(t,b,W.linePrefix,n.parser.constructs.disable.null.includes("codeIndented")?void 0:We.tabSize)(A)):b(A))}function b(A){return A===B.dash||A===B.colon?g(A):A===B.verticalBar?(o=!0,t.enter("tableCellDivider"),t.consume(A),t.exit("tableCellDivider"),m):w(A)}function m(A){return Pt(A)?$t(t,g,W.whitespace)(A):g(A)}function g(A){return A===B.colon?(i+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(A),t.exit("tableDelimiterMarker"),y):A===B.dash?(i+=1,y(A)):A===B.eof||Ze(A)?x(A):w(A)}function y(A){return A===B.dash?(t.enter("tableDelimiterFiller"),v(A)):w(A)}function v(A){return A===B.dash?(t.consume(A),v):A===B.colon?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(A),t.exit("tableDelimiterMarker"),_):(t.exit("tableDelimiterFiller"),_(A))}function _(A){return Pt(A)?$t(t,x,W.whitespace)(A):x(A)}function x(A){return A===B.verticalBar?b(A):A===B.eof||Ze(A)?!o||s!==i?w(A):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(A)):w(A)}function w(A){return r(A)}function S(A){return t.enter("tableRow"),T(A)}function T(A){return A===B.verticalBar?(t.enter("tableCellDivider"),t.consume(A),t.exit("tableCellDivider"),T):A===B.eof||Ze(A)?(t.exit("tableRow"),e(A)):Pt(A)?$t(t,T,W.whitespace)(A):(t.enter(W.data),E(A))}function E(A){return A===B.eof||A===B.verticalBar||sr(A)?(t.exit(W.data),T(A)):(t.consume(A),A===B.backslash?C:E)}function C(A){return A===B.backslash||A===B.verticalBar?(t.consume(A),E):E(A)}}function YPe(t,e){let r=-1,n=!0,s=0,i=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,d;const h=new WPe;for(;++r<t.length;){const f=t[r],b=f[1];f[0]==="enter"?b.type==="tableHead"?(a=!1,l!==0&&(ue(c,"there should be a table opening"),hL(h,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},h.add(r,0,[["enter",c,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(n=!0,d=void 0,i=[0,0,0,0],o=[0,r+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},h.add(r,0,[["enter",u,e]])),s=b.type==="tableDelimiterRow"?2:u?3:1):s&&(b.type===W.data||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(n=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],d=Qg(h,e,i,s,void 0,d),i=[0,0,0,0]),o[2]=r)):b.type==="tableCellDivider"&&(n?n=!1:(i[1]!==0&&(o[0]=o[1],d=Qg(h,e,i,s,void 0,d)),i=o,o=[i[1],r,0,0])):b.type==="tableHead"?(a=!0,l=r):b.type==="tableRow"||b.type==="tableDelimiterRow"?(l=r,i[1]!==0?(o[0]=o[1],d=Qg(h,e,i,s,r,d)):o[1]!==0&&(d=Qg(h,e,o,s,r,d)),s=0):s&&(b.type===W.data||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(o[3]=r)}for(l!==0&&(ue(c,"expected table opening"),hL(h,e,l,c,u)),h.consume(e.events),r=-1;++r<e.events.length;){const f=e.events[r];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=GPe(e.events,r))}return t}function Qg(t,e,r,n,s,i){const o=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",a="tableContent";r[0]!==0&&(ue(i,"expected previous cell enter"),i.end=Object.assign({},bu(e.events,r[0])),t.add(r[0],0,[["exit",i,e]]));const l=bu(e.events,r[1]);if(i={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(r[1],0,[["enter",i,e]]),r[2]!==0){const c=bu(e.events,r[2]),u=bu(e.events,r[3]),d={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(r[2],0,[["enter",d,e]]),ue(r[3]!==0),n!==2){const h=e.events[r[2]],f=e.events[r[3]];if(h[1].end=Object.assign({},f[1].end),h[1].type=W.chunkText,h[1].contentType=We.contentTypeText,r[3]>r[2]+1){const b=r[2]+1,m=r[3]-r[2]-1;t.add(b,m,[])}}t.add(r[3]+1,0,[["exit",d,e]])}return s!==void 0&&(i.end=Object.assign({},bu(e.events,s)),t.add(s,0,[["exit",i,e]]),i=void 0),i}function hL(t,e,r,n,s){const i=[],o=bu(e.events,r);s&&(s.end=Object.assign({},o),i.push(["exit",s,e])),n.end=Object.assign({},o),i.push(["exit",n,e]),t.add(r+1,0,i)}function bu(t,e){const r=t[e],n=r[0]==="enter"?"start":"end";return r[1][n]}const XPe={name:"tasklistCheck",tokenize:ZPe};function JPe(){return{text:{[B.leftSquareBracket]:XPe}}}function ZPe(t,e,r){const n=this;return s;function s(l){return ue(l===B.leftSquareBracket,"expected `[`"),n.previous!==B.eof||!n._gfmTasklistFirstContentOfListItem?r(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),i)}function i(l){return sr(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===B.uppercaseX||l===B.lowercaseX?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):r(l)}function o(l){return l===B.rightSquareBracket?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):r(l)}function a(l){return Ze(l)?e(l):Pt(l)?t.check({tokenize:QPe},e,r)(l):r(l)}}function QPe(t,e,r){return $t(t,n,W.whitespace);function n(s){return s===B.eof?r(s):e(s)}}function eIe(t){return W9([CPe(),LPe(),zPe(t),qPe(),JPe()])}const tIe={};function rIe(t){const e=this,r=t||tIe,n=e.data(),s=n.micromarkExtensions||(n.micromarkExtensions=[]),i=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),o=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);s.push(eIe(r)),i.push(xPe()),o.push(wPe(r))}const Ml=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],Ou={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...Ml,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...Ml],h2:[["className","sr-only"]],img:[...Ml,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...Ml,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...Ml],table:[...Ml],ul:[...Ml,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},Fa={}.hasOwnProperty;function nIe(t,e){let r={type:"root",children:[]};const n={schema:e?{...Ou,...e}:Ou,stack:[]},s=v7(n,t);return s&&(Array.isArray(s)?s.length===1?r=s[0]:r.children=s:r=s),r}function v7(t,e){if(e&&typeof e=="object"){const r=e;switch(typeof r.type=="string"?r.type:""){case"comment":return sIe(t,r);case"doctype":return iIe(t,r);case"element":return oIe(t,r);case"root":return aIe(t,r);case"text":return lIe(t,r)}}}function sIe(t,e){if(t.schema.allowComments){const r=typeof e.value=="string"?e.value:"",n=r.indexOf("-->"),i={type:"comment",value:n<0?r:r.slice(0,n)};return hm(i,e),i}}function iIe(t,e){if(t.schema.allowDoctypes){const r={type:"doctype"};return hm(r,e),r}}function oIe(t,e){const r=typeof e.tagName=="string"?e.tagName:"";t.stack.push(r);const n=_7(t,e.children),s=cIe(t,e.properties);t.stack.pop();let i=!1;if(r&&r!=="*"&&(!t.schema.tagNames||t.schema.tagNames.includes(r))&&(i=!0,t.schema.ancestors&&Fa.call(t.schema.ancestors,r))){const a=t.schema.ancestors[r];let l=-1;for(i=!1;++l<a.length;)t.stack.includes(a[l])&&(i=!0)}if(!i)return t.schema.strip&&!t.schema.strip.includes(r)?n:void 0;const o={type:"element",tagName:r,properties:s,children:n};return hm(o,e),o}function aIe(t,e){const n={type:"root",children:_7(t,e.children)};return hm(n,e),n}function lIe(t,e){const n={type:"text",value:typeof e.value=="string"?e.value:""};return hm(n,e),n}function _7(t,e){const r=[];if(Array.isArray(e)){const n=e;let s=-1;for(;++s<n.length;){const i=v7(t,n[s]);i&&(Array.isArray(i)?r.push(...i):r.push(i))}}return r}function cIe(t,e){const r=t.stack[t.stack.length-1],n=t.schema.attributes,s=t.schema.required,i=n&&Fa.call(n,r)?n[r]:void 0,o=n&&Fa.call(n,"*")?n["*"]:void 0,a=e&&typeof e=="object"?e:{},l={};let c;for(c in a)if(Fa.call(a,c)){const u=a[c];let d=fL(t,pL(i,c),c,u);d==null&&(d=fL(t,pL(o,c),c,u)),d!=null&&(l[c]=d)}if(s&&Fa.call(s,r)){const u=s[r];for(c in u)Fa.call(u,c)&&!Fa.call(l,c)&&(l[c]=u[c])}return l}function fL(t,e,r,n){return e?Array.isArray(n)?uIe(t,e,r,n):x7(t,e,r,n):void 0}function uIe(t,e,r,n){let s=-1;const i=[];for(;++s<n.length;){const o=x7(t,e,r,n[s]);(typeof o=="number"||typeof o=="string")&&i.push(o)}return i}function x7(t,e,r,n){if(!(typeof n!="boolean"&&typeof n!="number"&&typeof n!="string")&&dIe(t,r,n)){if(typeof e=="object"&&e.length>1){let s=!1,i=0;for(;++i<e.length;){const o=e[i];if(o&&typeof o=="object"&&"flags"in o){if(o.test(String(n))){s=!0;break}}else if(o===n){s=!0;break}}if(!s)return}return t.schema.clobber&&t.schema.clobberPrefix&&t.schema.clobber.includes(r)?t.schema.clobberPrefix+n:n}}function dIe(t,e,r){const n=t.schema.protocols&&Fa.call(t.schema.protocols,e)?t.schema.protocols[e]:void 0;if(!n||n.length===0)return!0;const s=String(r),i=s.indexOf(":"),o=s.indexOf("?"),a=s.indexOf("#"),l=s.indexOf("/");if(i<0||l>-1&&i>l||o>-1&&i>o||a>-1&&i>a)return!0;let c=-1;for(;++c<n.length;){const u=n[c];if(i===u.length&&s.slice(0,u.length)===u)return!0}return!1}function hm(t,e){const r=F9(e);e.data&&(t.data=Cc(e.data)),r&&(t.position=r)}function pL(t,e){let r,n=-1;if(t)for(;++n<t.length;){const s=t[n],i=typeof s=="string"?s:s[0];if(i===e)return s;i==="data*"&&(r=s)}if(e.length>4&&e.slice(0,4).toLowerCase()==="data")return r}function hIe(t){return function(e){return nIe(e,t)}}const w7=["a","b","button","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","ins","kbd","li","ol","p","pre","q","rp","rt","ruby","s","samp","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","ul","var","think","header"];function fIe(){return t=>{Vd(t,e=>{if(e.type==="html"&&e.value&&e.value.startsWith("<think>")){const r=e.value.slice(7);e.value=`<div class="__boltThought__">${r}`;return}if(e.type==="html"&&e.value&&e.value.startsWith("</think>")){const r=e.value.slice(8);e.value=`</div>${r}`}})}}const pIe={...Ou,tagNames:w7,attributes:{...Ou.attributes,div:[...Ou.attributes?.div??[],"data*",["className","__boltArtifact__","__boltThought__","__boltQuickAction","__boltSelectedElement__"]],button:[...Ou.attributes?.button??[],"data*","type","disabled","name","value",["className","__boltArtifact__","__boltThought__","__boltQuickAction"]]},strip:[]};function mIe(t){const e=[rIe];return t&&e.unshift(bIe),e.unshift(fIe),e}function gIe(t){const e=[];return t&&e.push(q2e,[hIe,pIe]),e}const bIe=()=>(t,e)=>{const r=e.toString();Vd(t,(n,s,i)=>{if(s==null||["paragraph","text","inlineCode","code","strong","emphasis"].includes(n.type)||!n.position)return!0;let o=r.slice(n.position.start.offset,n.position.end.offset);return n.type==="heading"&&(o=`
${o}`),i.children[s]={type:"text",value:o},[uz,s]})},S7=[{id:"abap",name:"ABAP",import:()=>Z(()=>import("./abap-DsBKuouk.js"),[])},{id:"actionscript-3",name:"ActionScript",import:()=>Z(()=>import("./actionscript-3-D_z4Izcz.js"),[])},{id:"ada",name:"Ada",import:()=>Z(()=>import("./ada-727ZlQH0.js"),[])},{id:"angular-html",name:"Angular HTML",import:()=>Z(()=>import("./angular-html-LfdN0zeE.js").then(t=>t.f),__vite__mapDeps([40,41,42,43]))},{id:"angular-ts",name:"Angular TypeScript",import:()=>Z(()=>import("./angular-ts-CKsD7JZE.js"),__vite__mapDeps([44,40,41,42,43,45]))},{id:"apache",name:"Apache Conf",import:()=>Z(()=>import("./apache-Dn00JSTd.js"),[])},{id:"apex",name:"Apex",import:()=>Z(()=>import("./apex-COJ4H7py.js"),[])},{id:"apl",name:"APL",import:()=>Z(()=>import("./apl-BBq3IX1j.js"),__vite__mapDeps([46,41,42,43,47,48,49]))},{id:"applescript",name:"AppleScript",import:()=>Z(()=>import("./applescript-Bu5BbsvL.js"),[])},{id:"ara",name:"Ara",import:()=>Z(()=>import("./ara-7O62HKoU.js"),[])},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>Z(()=>import("./asciidoc-BPT9niGB.js"),[])},{id:"asm",name:"Assembly",import:()=>Z(()=>import("./asm-Dhn9LcZ4.js"),[])},{id:"astro",name:"Astro",import:()=>Z(()=>import("./astro-CqkE3fuf.js"),__vite__mapDeps([50,49,42,51,43,52]))},{id:"awk",name:"AWK",import:()=>Z(()=>import("./awk-eg146-Ew.js"),[])},{id:"ballerina",name:"Ballerina",import:()=>Z(()=>import("./ballerina-Du268qiB.js"),[])},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>Z(()=>import("./bat-fje9CFhw.js"),[])},{id:"beancount",name:"Beancount",import:()=>Z(()=>import("./beancount-BwXTMy5W.js"),[])},{id:"berry",name:"Berry",aliases:["be"],import:()=>Z(()=>import("./berry-3xVqZejG.js"),[])},{id:"bibtex",name:"BibTeX",import:()=>Z(()=>import("./bibtex-xW4inM5L.js"),[])},{id:"bicep",name:"Bicep",import:()=>Z(()=>import("./bicep-DHo0CJ0O.js"),[])},{id:"blade",name:"Blade",import:()=>Z(()=>import("./blade-a8OxSdnT.js"),__vite__mapDeps([53,41,42,43,47,48,54,49]))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>Z(()=>import("./bsl-Dgyn0ogV.js"),__vite__mapDeps([55,56]))},{id:"c",name:"C",import:()=>Z(()=>import("./c-C3t2pwGQ.js"),[])},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>Z(()=>import("./cadence-DNquZEk8.js"),[])},{id:"cairo",name:"Cairo",import:()=>Z(()=>import("./cairo--RitsXJZ.js"),__vite__mapDeps([57,58]))},{id:"clarity",name:"Clarity",import:()=>Z(()=>import("./clarity-BHOwM8T6.js"),[])},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>Z(()=>import("./clojure-DxSadP1t.js"),[])},{id:"cmake",name:"CMake",import:()=>Z(()=>import("./cmake-DbXoA79R.js"),[])},{id:"cobol",name:"COBOL",import:()=>Z(()=>import("./cobol-PTqiYgYu.js"),__vite__mapDeps([59,41,42,43,48]))},{id:"codeowners",name:"CODEOWNERS",import:()=>Z(()=>import("./codeowners-Bp6g37R7.js"),[])},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>Z(()=>import("./codeql-sacFqUAJ.js"),[])},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>Z(()=>import("./coffee-dyiR41kL.js"),__vite__mapDeps([60,42]))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>Z(()=>import("./common-lisp-C7gG9l05.js"),[])},{id:"coq",name:"Coq",import:()=>Z(()=>import("./coq-Dsg_Bt_b.js"),[])},{id:"cpp",name:"C++",aliases:["c++"],import:()=>Z(()=>import("./cpp-BksuvNSY.js"),__vite__mapDeps([61,62,63,64,54]))},{id:"crystal",name:"Crystal",import:()=>Z(()=>import("./crystal-DtDmRg-F.js"),__vite__mapDeps([65,41,42,43,54,64,66]))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>Z(()=>import("./csharp-D9R-vmeu.js"),[])},{id:"css",name:"CSS",import:()=>Z(()=>import("./css-BPhBrDlE.js"),[])},{id:"csv",name:"CSV",import:()=>Z(()=>import("./csv-B0qRVHPH.js"),[])},{id:"cue",name:"CUE",import:()=>Z(()=>import("./cue-DtFQj3wx.js"),[])},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>Z(()=>import("./cypher-m2LEI-9-.js"),[])},{id:"d",name:"D",import:()=>Z(()=>import("./d-BoXegm-a.js"),[])},{id:"dart",name:"Dart",import:()=>Z(()=>import("./dart-B9wLZaAG.js"),[])},{id:"dax",name:"DAX",import:()=>Z(()=>import("./dax-ClGRhx96.js"),[])},{id:"desktop",name:"Desktop",import:()=>Z(()=>import("./desktop-DEIpsLCJ.js"),[])},{id:"diff",name:"Diff",import:()=>Z(()=>import("./diff-BgYniUM_.js"),[])},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>Z(()=>import("./docker-COcR7UxN.js"),[])},{id:"dotenv",name:"dotEnv",import:()=>Z(()=>import("./dotenv-BkjVzoyG.js"),__vite__mapDeps([67,4,3,1]))},{id:"dream-maker",name:"Dream Maker",import:()=>Z(()=>import("./dream-maker-C-nORZOA.js"),[])},{id:"edge",name:"Edge",import:()=>Z(()=>import("./edge-D5gP-w-T.js"),__vite__mapDeps([68,51,41,42,43,69]))},{id:"elixir",name:"Elixir",import:()=>Z(()=>import("./elixir-CLiX3zqd.js"),__vite__mapDeps([70,41,42,43]))},{id:"elm",name:"Elm",import:()=>Z(()=>import("./elm-CmHSxxaM.js"),__vite__mapDeps([71,63,64]))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>Z(()=>import("./emacs-lisp-BX77sIaO.js"),[])},{id:"erb",name:"ERB",import:()=>Z(()=>import("./erb-BYTLMnw6.js"),__vite__mapDeps([72,41,42,43,73,74,47,48,54,75,51,76,77,61,62,63,64,66,78,79]))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>Z(()=>import("./erlang-B-DoSBHF.js"),[])},{id:"fennel",name:"Fennel",import:()=>Z(()=>import("./fennel-bCA53EVm.js"),[])},{id:"fish",name:"Fish",import:()=>Z(()=>import("./fish-w-ucz2PV.js"),[])},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>Z(()=>import("./fluent-Dayu4EKP.js"),[])},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>Z(()=>import("./fortran-fixed-form-TqA4NnZg.js"),__vite__mapDeps([80,81]))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>Z(()=>import("./fortran-free-form-DKXYxT9g.js"),[])},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>Z(()=>import("./fsharp-XplgxFYe.js"),__vite__mapDeps([82,83]))},{id:"gdresource",name:"GDResource",import:()=>Z(()=>import("./gdresource-BHYsBjWJ.js"),__vite__mapDeps([84,85,86]))},{id:"gdscript",name:"GDScript",import:()=>Z(()=>import("./gdscript-DfxzS6Rs.js"),[])},{id:"gdshader",name:"GDShader",import:()=>Z(()=>import("./gdshader-SKMF96pI.js"),[])},{id:"genie",name:"Genie",import:()=>Z(()=>import("./genie-ajMbGru0.js"),[])},{id:"gherkin",name:"Gherkin",import:()=>Z(()=>import("./gherkin--30QC5Em.js"),[])},{id:"git-commit",name:"Git Commit Message",import:()=>Z(()=>import("./git-commit-i4q6IMui.js"),__vite__mapDeps([87,88]))},{id:"git-rebase",name:"Git Rebase Message",import:()=>Z(()=>import("./git-rebase-B-v9cOL2.js"),__vite__mapDeps([89,66]))},{id:"gleam",name:"Gleam",import:()=>Z(()=>import("./gleam-B430Bg39.js"),[])},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>Z(()=>import("./glimmer-js-D-cwc0-E.js"),__vite__mapDeps([90,42,51,43,41]))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>Z(()=>import("./glimmer-ts-pgjy16dm.js"),__vite__mapDeps([91,51,43,42,41]))},{id:"glsl",name:"GLSL",import:()=>Z(()=>import("./glsl-DBO2IWDn.js"),__vite__mapDeps([63,64]))},{id:"gnuplot",name:"Gnuplot",import:()=>Z(()=>import("./gnuplot-CM8KxXT1.js"),[])},{id:"go",name:"Go",import:()=>Z(()=>import("./go-B1SYOhNW.js"),[])},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>Z(()=>import("./graphql-cDcHW_If.js"),__vite__mapDeps([75,42,51,76,77]))},{id:"groovy",name:"Groovy",import:()=>Z(()=>import("./groovy-DkBy-JyN.js"),[])},{id:"hack",name:"Hack",import:()=>Z(()=>import("./hack-D1yCygmZ.js"),__vite__mapDeps([92,41,42,43,54]))},{id:"haml",name:"Ruby Haml",import:()=>Z(()=>import("./haml-B2EZWmdv.js"),__vite__mapDeps([74,42,43]))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>Z(()=>import("./handlebars-BQGss363.js"),__vite__mapDeps([93,41,42,43,79]))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>Z(()=>import("./haskell-BILxekzW.js"),[])},{id:"haxe",name:"Haxe",import:()=>Z(()=>import("./haxe-C5wWYbrZ.js"),[])},{id:"hcl",name:"HashiCorp HCL",import:()=>Z(()=>import("./hcl-HzYwdGDm.js"),[])},{id:"hjson",name:"Hjson",import:()=>Z(()=>import("./hjson-T-Tgc4AT.js"),[])},{id:"hlsl",name:"HLSL",import:()=>Z(()=>import("./hlsl-ifBTmRxC.js"),[])},{id:"html",name:"HTML",import:()=>Z(()=>import("./html-C2L_23MC.js"),__vite__mapDeps([41,42,43]))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>Z(()=>import("./html-derivative-CSfWNPLT.js"),__vite__mapDeps([69,41,42,43]))},{id:"http",name:"HTTP",import:()=>Z(()=>import("./http-FRrOvY1W.js"),__vite__mapDeps([94,66,49,47,48,75,42,51,76,77]))},{id:"hxml",name:"HXML",import:()=>Z(()=>import("./hxml-TIA70rKU.js"),__vite__mapDeps([95,96]))},{id:"hy",name:"Hy",import:()=>Z(()=>import("./hy-BMj5Y0dO.js"),[])},{id:"imba",name:"Imba",import:()=>Z(()=>import("./imba-bv_oIlVt.js"),__vite__mapDeps([97,51]))},{id:"ini",name:"INI",aliases:["properties"],import:()=>Z(()=>import("./ini-BjABl1g7.js"),[])},{id:"java",name:"Java",import:()=>Z(()=>import("./java-xI-RfyKK.js"),[])},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>Z(()=>import("./javascript-ySlJ1b_l.js"),[])},{id:"jinja",name:"Jinja",import:()=>Z(()=>import("./jinja-DGy0s7-h.js"),__vite__mapDeps([98,41,42,43]))},{id:"jison",name:"Jison",import:()=>Z(()=>import("./jison-BqZprYcd.js"),__vite__mapDeps([99,42]))},{id:"json",name:"JSON",import:()=>Z(()=>import("./json-BQoSv7ci.js"),[])},{id:"json5",name:"JSON5",import:()=>Z(()=>import("./json5-w8dY5SsB.js"),[])},{id:"jsonc",name:"JSON with Comments",import:()=>Z(()=>import("./jsonc-TU54ms6u.js"),[])},{id:"jsonl",name:"JSON Lines",import:()=>Z(()=>import("./jsonl-DREVFZK8.js"),[])},{id:"jsonnet",name:"Jsonnet",import:()=>Z(()=>import("./jsonnet-BfivnA6A.js"),[])},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>Z(()=>import("./jssm-P4WzXJd0.js"),[])},{id:"jsx",name:"JSX",import:()=>Z(()=>import("./jsx-BAng5TT0.js"),[])},{id:"julia",name:"Julia",aliases:["jl"],import:()=>Z(()=>import("./julia-BBuGR-5E.js"),__vite__mapDeps([100,61,62,63,64,54,58,42,101]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>Z(()=>import("./kotlin-B5lbUyaz.js"),[])},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>Z(()=>import("./kusto-mebxcVVE.js"),[])},{id:"latex",name:"LaTeX",import:()=>Z(()=>import("./latex-C-cWTeAZ.js"),__vite__mapDeps([102,103,101]))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>Z(()=>import("./lean-XBlWyCtg.js"),[])},{id:"less",name:"Less",import:()=>Z(()=>import("./less-BfCpw3nA.js"),[])},{id:"liquid",name:"Liquid",import:()=>Z(()=>import("./liquid-D3W5UaiH.js"),__vite__mapDeps([104,41,42,43,49]))},{id:"log",name:"Log file",import:()=>Z(()=>import("./log-Cc5clBb7.js"),[])},{id:"logo",name:"Logo",import:()=>Z(()=>import("./logo-IuBKFhSY.js"),[])},{id:"lua",name:"Lua",import:()=>Z(()=>import("./lua-CvWAzNxB.js"),__vite__mapDeps([78,64]))},{id:"luau",name:"Luau",import:()=>Z(()=>import("./luau-Du5NY7AG.js"),[])},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>Z(()=>import("./make-Bvotw-X0.js"),[])},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>Z(()=>import("./markdown-UIAJJxZW.js"),[])},{id:"marko",name:"Marko",import:()=>Z(()=>import("./marko-z0MBrx5-.js"),__vite__mapDeps([105,43,106,45,42]))},{id:"matlab",name:"MATLAB",import:()=>Z(()=>import("./matlab-D9-PGadD.js"),[])},{id:"mdc",name:"MDC",import:()=>Z(()=>import("./mdc-DB_EDNY_.js"),__vite__mapDeps([107,83,79,69,41,42,43]))},{id:"mdx",name:"MDX",import:()=>Z(()=>import("./mdx-sdHcTMYB.js"),[])},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>Z(()=>import("./mermaid-Ci6OQyBP.js"),[])},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>Z(()=>import("./mipsasm-BC5c_5Pe.js"),[])},{id:"mojo",name:"Mojo",import:()=>Z(()=>import("./mojo-Tz6hzZYG.js"),[])},{id:"move",name:"Move",import:()=>Z(()=>import("./move-DB_GagMm.js"),[])},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>Z(()=>import("./narrat-DLbgOhZU.js"),[])},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>Z(()=>import("./nextflow-B0XVJmRM.js"),[])},{id:"nginx",name:"Nginx",import:()=>Z(()=>import("./nginx-D_VnBJ67.js"),__vite__mapDeps([108,78,64]))},{id:"nim",name:"Nim",import:()=>Z(()=>import("./nim-ZlGxZxc3.js"),__vite__mapDeps([109,64,41,42,43,47,48,63,83]))},{id:"nix",name:"Nix",import:()=>Z(()=>import("./nix-shcSOmrb.js"),[])},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>Z(()=>import("./nushell-D4Tzg5kh.js"),[])},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>Z(()=>import("./objective-c-Deuh7S70.js"),[])},{id:"objective-cpp",name:"Objective-C++",import:()=>Z(()=>import("./objective-cpp-BUEGK8hf.js"),[])},{id:"ocaml",name:"OCaml",import:()=>Z(()=>import("./ocaml-BNioltXt.js"),[])},{id:"pascal",name:"Pascal",import:()=>Z(()=>import("./pascal-JqZropPD.js"),[])},{id:"perl",name:"Perl",import:()=>Z(()=>import("./perl-CHQXSrWU.js"),__vite__mapDeps([110,41,42,43,47,48,54]))},{id:"php",name:"PHP",import:()=>Z(()=>import("./php-B5ebYQev.js"),__vite__mapDeps([111,41,42,43,47,48,54,49]))},{id:"plsql",name:"PL/SQL",import:()=>Z(()=>import("./plsql-LKU2TuZ1.js"),[])},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>Z(()=>import("./po-BFLt1xDp.js"),[])},{id:"polar",name:"Polar",import:()=>Z(()=>import("./polar-DKykz6zU.js"),[])},{id:"postcss",name:"PostCSS",import:()=>Z(()=>import("./postcss-B3ZDOciz.js"),[])},{id:"powerquery",name:"PowerQuery",import:()=>Z(()=>import("./powerquery-CSHBycmS.js"),[])},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>Z(()=>import("./powershell-BIEUsx6d.js"),[])},{id:"prisma",name:"Prisma",import:()=>Z(()=>import("./prisma-B48N-Iqd.js"),[])},{id:"prolog",name:"Prolog",import:()=>Z(()=>import("./prolog-BY-TUvya.js"),[])},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>Z(()=>import("./proto-zocC4JxJ.js"),[])},{id:"pug",name:"Pug",aliases:["jade"],import:()=>Z(()=>import("./pug-CM9l7STV.js"),__vite__mapDeps([112,42,43,41]))},{id:"puppet",name:"Puppet",import:()=>Z(()=>import("./puppet-Cza_XSSt.js"),[])},{id:"purescript",name:"PureScript",import:()=>Z(()=>import("./purescript-Bg-kzb6g.js"),[])},{id:"python",name:"Python",aliases:["py"],import:()=>Z(()=>import("./python-DhUJRlN_.js"),[])},{id:"qml",name:"QML",import:()=>Z(()=>import("./qml-D8XfuvdV.js"),__vite__mapDeps([113,42]))},{id:"qmldir",name:"QML Directory",import:()=>Z(()=>import("./qmldir-C8lEn-DE.js"),[])},{id:"qss",name:"Qt Style Sheets",import:()=>Z(()=>import("./qss-DhMKtDLN.js"),[])},{id:"r",name:"R",import:()=>Z(()=>import("./r-CwjWoCRV.js"),[])},{id:"racket",name:"Racket",import:()=>Z(()=>import("./racket-CzouJOBO.js"),[])},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>Z(()=>import("./raku-B1bQXN8T.js"),[])},{id:"razor",name:"ASP.NET Razor",import:()=>Z(()=>import("./razor-CNLDkMZG.js"),__vite__mapDeps([114,41,42,43,115]))},{id:"reg",name:"Windows Registry Script",import:()=>Z(()=>import("./reg-5LuOXUq_.js"),[])},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>Z(()=>import("./regexp-DWJ3fJO_.js"),[])},{id:"rel",name:"Rel",import:()=>Z(()=>import("./rel-DJlmqQ1C.js"),[])},{id:"riscv",name:"RISC-V",import:()=>Z(()=>import("./riscv-QhoSD0DR.js"),[])},{id:"rst",name:"reStructuredText",import:()=>Z(()=>import("./rst-4NLicBqY.js"),__vite__mapDeps([116,69,41,42,43,61,62,63,64,54,58,66,79,117,73,74,47,48,75,51,76,77,78]))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>Z(()=>import("./ruby-DeZ3UC14.js"),__vite__mapDeps([73,41,42,43,74,47,48,54,75,51,76,77,61,62,63,64,66,78,79]))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>Z(()=>import("./rust-Be6lgOlo.js"),[])},{id:"sas",name:"SAS",import:()=>Z(()=>import("./sas-BmTFh92c.js"),__vite__mapDeps([118,54]))},{id:"sass",name:"Sass",import:()=>Z(()=>import("./sass-BJ4Li9vH.js"),[])},{id:"scala",name:"Scala",import:()=>Z(()=>import("./scala-DQVVAn-B.js"),[])},{id:"scheme",name:"Scheme",import:()=>Z(()=>import("./scheme-BJGe-b2p.js"),[])},{id:"scss",name:"SCSS",import:()=>Z(()=>import("./scss-C31hgJw-.js"),__vite__mapDeps([45,43]))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>Z(()=>import("./sdbl-BLhTXw86.js"),[])},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>Z(()=>import("./shaderlab-B7qAK45m.js"),__vite__mapDeps([119,120]))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>Z(()=>import("./shellscript-atvbtKCR.js"),[])},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>Z(()=>import("./shellsession-C_rIy8kc.js"),__vite__mapDeps([121,66]))},{id:"smalltalk",name:"Smalltalk",import:()=>Z(()=>import("./smalltalk-DkLiglaE.js"),[])},{id:"solidity",name:"Solidity",import:()=>Z(()=>import("./solidity-C1w2a3ep.js"),[])},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>Z(()=>import("./soy-C-lX7w71.js"),__vite__mapDeps([122,41,42,43]))},{id:"sparql",name:"SPARQL",import:()=>Z(()=>import("./sparql-bYkjHRlG.js"),__vite__mapDeps([123,124]))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>Z(()=>import("./splunk-Cf8iN4DR.js"),[])},{id:"sql",name:"SQL",import:()=>Z(()=>import("./sql-COK4E0Yg.js"),[])},{id:"ssh-config",name:"SSH Config",import:()=>Z(()=>import("./ssh-config-BknIz3MU.js"),[])},{id:"stata",name:"Stata",import:()=>Z(()=>import("./stata-DorPZHa4.js"),__vite__mapDeps([125,54]))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>Z(()=>import("./stylus-BeQkCIfX.js"),[])},{id:"svelte",name:"Svelte",import:()=>Z(()=>import("./svelte-MSaWC3Je.js"),__vite__mapDeps([126,42,51,43,52]))},{id:"swift",name:"Swift",import:()=>Z(()=>import("./swift-BSxZ-RaX.js"),[])},{id:"system-verilog",name:"SystemVerilog",import:()=>Z(()=>import("./system-verilog-C7L56vO4.js"),[])},{id:"systemd",name:"Systemd Units",import:()=>Z(()=>import("./systemd-CUnW07Te.js"),[])},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>Z(()=>import("./talonscript-C1XDQQGZ.js"),[])},{id:"tasl",name:"Tasl",import:()=>Z(()=>import("./tasl-CQjiPCtT.js"),[])},{id:"tcl",name:"Tcl",import:()=>Z(()=>import("./tcl-DQ1-QYvQ.js"),[])},{id:"templ",name:"Templ",import:()=>Z(()=>import("./templ-dwX3ZSMB.js"),__vite__mapDeps([127,128,42,43]))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>Z(()=>import("./terraform-BbSNqyBO.js"),[])},{id:"tex",name:"TeX",import:()=>Z(()=>import("./tex-rYs2v40G.js"),__vite__mapDeps([103,101]))},{id:"toml",name:"TOML",import:()=>Z(()=>import("./toml-CB2ApiWb.js"),[])},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>Z(()=>import("./ts-tags-CipyTH0X.js"),__vite__mapDeps([129,51,43,42,63,64,41,54,47,48]))},{id:"tsv",name:"TSV",import:()=>Z(()=>import("./tsv-B_m7g4N7.js"),[])},{id:"tsx",name:"TSX",import:()=>Z(()=>import("./tsx-B6W0miNI.js"),[])},{id:"turtle",name:"Turtle",import:()=>Z(()=>import("./turtle-BMR_PYu6.js"),[])},{id:"twig",name:"Twig",import:()=>Z(()=>import("./twig-NC5TFiHP.js"),__vite__mapDeps([130,43,42,45,111,41,47,48,54,49,58,73,74,75,51,76,77,61,62,63,64,66,78,79]))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>Z(()=>import("./typescript-Dj6nwHGl.js"),[])},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>Z(()=>import("./typespec-BpWG_bgh.js"),[])},{id:"typst",name:"Typst",aliases:["typ"],import:()=>Z(()=>import("./typst-BVUVsWT6.js"),[])},{id:"v",name:"V",import:()=>Z(()=>import("./v-CAQ2eGtk.js"),[])},{id:"vala",name:"Vala",import:()=>Z(()=>import("./vala-BFOHcciG.js"),[])},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>Z(()=>import("./vb-CdO5JTpU.js"),[])},{id:"verilog",name:"Verilog",import:()=>Z(()=>import("./verilog-CJaU5se_.js"),[])},{id:"vhdl",name:"VHDL",import:()=>Z(()=>import("./vhdl-DYoNaHQp.js"),[])},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>Z(()=>import("./viml-m4uW47V2.js"),[])},{id:"vue",name:"Vue",import:()=>Z(()=>import("./vue-BuYVFjOK.js"),__vite__mapDeps([131,41,42,43,51,49,69]))},{id:"vue-html",name:"Vue HTML",import:()=>Z(()=>import("./vue-html-xdeiXROB.js"),__vite__mapDeps([132,131,41,42,43,51,49,69]))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>Z(()=>import("./vyper-nyqBNV6O.js"),[])},{id:"wasm",name:"WebAssembly",import:()=>Z(()=>import("./wasm-C6j12Q_x.js"),[])},{id:"wenyan",name:"Wenyan",aliases:[""],import:()=>Z(()=>import("./wenyan-7A4Fjokl.js"),[])},{id:"wgsl",name:"WGSL",import:()=>Z(()=>import("./wgsl-CB0Krxn9.js"),[])},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>Z(()=>import("./wikitext-DCE3LsBG.js"),[])},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>Z(()=>import("./wolfram-C3FkfJm5.js"),[])},{id:"xml",name:"XML",import:()=>Z(()=>import("./xml-e3z08dGr.js"),__vite__mapDeps([47,48]))},{id:"xsl",name:"XSL",import:()=>Z(()=>import("./xsl-Dd0NUgwM.js"),__vite__mapDeps([133,47,48]))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>Z(()=>import("./yaml-CVw76BM1.js"),[])},{id:"zenscript",name:"ZenScript",import:()=>Z(()=>import("./zenscript-HnGAYVZD.js"),[])},{id:"zig",name:"Zig",import:()=>Z(()=>import("./zig-BVz_zdnA.js"),[])}],yIe=Object.fromEntries(S7.map(t=>[t.id,t.import])),vIe=Object.fromEntries(S7.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),E7={...yIe,...vIe},_Ie=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>Z(()=>import("./andromeeda-C3khCPGq.js"),[])},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>Z(()=>import("./aurora-x-D-2ljcwZ.js"),[])},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>Z(()=>import("./ayu-dark-Cv9koXgw.js"),[])},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:()=>Z(()=>import("./catppuccin-frappe-CD_QflpE.js"),[])},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>Z(()=>import("./catppuccin-latte-DRW-0cLl.js"),[])},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>Z(()=>import("./catppuccin-macchiato-C-_shW-Y.js"),[])},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>Z(()=>import("./catppuccin-mocha-LGGdnPYs.js"),[])},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>Z(()=>import("./dark-plus-C3mMm8J8.js"),[])},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>Z(()=>import("./dracula-BzJJZx-M.js"),[])},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>Z(()=>import("./dracula-soft-BXkSAIEj.js"),[])},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>Z(()=>import("./everforest-dark-BgDCqdQA.js"),[])},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>Z(()=>import("./everforest-light-C8M2exoo.js"),[])},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>Z(()=>import("./github-dark-DHJKELXO.js"),[])},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>Z(()=>import("./github-dark-default-Cuk6v7N8.js"),[])},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>Z(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[])},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>Z(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[])},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>Z(()=>import("./github-light-DAi9KRSo.js"),[])},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>Z(()=>import("./github-light-default-D7oLnXFd.js"),[])},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>Z(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[])},{id:"houston",displayName:"Houston",type:"dark",import:()=>Z(()=>import("./houston-DnULxvSX.js"),[])},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>Z(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[])},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>Z(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[])},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>Z(()=>import("./kanagawa-wave-DWedfzmr.js"),[])},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>Z(()=>import("./laserwave-DUszq2jm.js"),[])},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>Z(()=>import("./light-plus-B7mTdjB0.js"),[])},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>Z(()=>import("./material-theme-D5KoaKCx.js"),[])},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>Z(()=>import("./material-theme-darker-BfHTSMKl.js"),[])},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>Z(()=>import("./material-theme-lighter-B0m2ddpp.js"),[])},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>Z(()=>import("./material-theme-ocean-CyktbL80.js"),[])},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>Z(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[])},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>Z(()=>import("./min-dark-CafNBF8u.js"),[])},{id:"min-light",displayName:"Min Light",type:"light",import:()=>Z(()=>import("./min-light-CTRr51gU.js"),[])},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>Z(()=>import("./monokai-D4h5O-jR.js"),[])},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>Z(()=>import("./night-owl-C39BiMTA.js"),[])},{id:"nord",displayName:"Nord",type:"dark",import:()=>Z(()=>import("./nord-Ddv68eIx.js"),[])},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>Z(()=>import("./one-dark-pro-GBQ2dnAY.js"),[])},{id:"one-light",displayName:"One Light",type:"light",import:()=>Z(()=>import("./one-light-PoHY5YXO.js"),[])},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>Z(()=>import("./plastic-3e1v2bzS.js"),[])},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>Z(()=>import("./poimandres-CS3Unz2-.js"),[])},{id:"red",displayName:"Red",type:"dark",import:()=>Z(()=>import("./red-bN70gL4F.js"),[])},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:()=>Z(()=>import("./rose-pine-CmCqftbK.js"),[])},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:()=>Z(()=>import("./rose-pine-dawn-Ds-gbosJ.js"),[])},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:()=>Z(()=>import("./rose-pine-moon-CjDtw9vr.js"),[])},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>Z(()=>import("./slack-dark-BthQWCQV.js"),[])},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>Z(()=>import("./slack-ochin-DqwNpetd.js"),[])},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>Z(()=>import("./snazzy-light-Bw305WKR.js"),[])},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>Z(()=>import("./solarized-dark-DXbdFlpD.js"),[])},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>Z(()=>import("./solarized-light-L9t79GZl.js"),[])},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>Z(()=>import("./synthwave-84-CbfX1IO0.js"),[])},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>Z(()=>import("./tokyo-night-DBQeEorK.js"),[])},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>Z(()=>import("./vesper-BEBZ7ncR.js"),[])},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>Z(()=>import("./vitesse-black-Bkuqu6BP.js"),[])},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>Z(()=>import("./vitesse-dark-D0r3Knsf.js"),[])},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>Z(()=>import("./vitesse-light-CVO1_9PV.js"),[])}],xIe=Object.fromEntries(_Ie.map(t=>[t.id,t.import]));let Qo=class extends Error{constructor(e){super(e),this.name="ShikiError"}},HA=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function wIe(){return 2147483648}function SIe(){return typeof performance<"u"?performance.now():Date.now()}const EIe=(t,e)=>t+(e-t%e)%e;async function CIe(t){let e,r;const n={};function s(f){r=f,n.HEAPU8=new Uint8Array(f),n.HEAPU32=new Uint32Array(f)}function i(f,b,m){n.HEAPU8.copyWithin(f,b,b+m)}function o(f){try{return e.grow(f-r.byteLength+65535>>>16),s(e.buffer),1}catch{}}function a(f){const b=n.HEAPU8.length;f=f>>>0;const m=wIe();if(f>m)return!1;for(let g=1;g<=4;g*=2){let y=b*(1+.2/g);y=Math.min(y,f+100663296);const v=Math.min(m,EIe(Math.max(f,y),65536));if(o(v))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(f,b,m=1024){const g=b+m;let y=b;for(;f[y]&&!(y>=g);)++y;if(y-b>16&&f.buffer&&l)return l.decode(f.subarray(b,y));let v="";for(;b<y;){let _=f[b++];if(!(_&128)){v+=String.fromCharCode(_);continue}const x=f[b++]&63;if((_&224)===192){v+=String.fromCharCode((_&31)<<6|x);continue}const w=f[b++]&63;if((_&240)===224?_=(_&15)<<12|x<<6|w:_=(_&7)<<18|x<<12|w<<6|f[b++]&63,_<65536)v+=String.fromCharCode(_);else{const S=_-65536;v+=String.fromCharCode(55296|S>>10,56320|S&1023)}}return v}function u(f,b){return f?c(n.HEAPU8,f,b):""}const d={emscripten_get_now:SIe,emscripten_memcpy_big:i,emscripten_resize_heap:a,fd_write:()=>0};async function h(){const b=await t({env:d,wasi_snapshot_preview1:d});e=b.memory,s(e.buffer),Object.assign(n,b),n.UTF8ToString=u}return await h(),n}var TIe=Object.defineProperty,kIe=(t,e,r)=>e in t?TIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kr=(t,e,r)=>(kIe(t,typeof e!="symbol"?e+"":e,r),r);let sn=null;function AIe(t){throw new HA(t.UTF8ToString(t.getLastOnigError()))}class y_{constructor(e){Kr(this,"utf16Length"),Kr(this,"utf8Length"),Kr(this,"utf16Value"),Kr(this,"utf8Value"),Kr(this,"utf16OffsetToUtf8"),Kr(this,"utf8OffsetToUtf16");const r=e.length,n=y_._utf8ByteLength(e),s=n!==r,i=s?new Uint32Array(r+1):null;s&&(i[r]=n);const o=s?new Uint32Array(n+1):null;s&&(o[n]=r);const a=new Uint8Array(n);let l=0;for(let c=0;c<r;c++){const u=e.charCodeAt(c);let d=u,h=!1;if(u>=55296&&u<=56319&&c+1<r){const f=e.charCodeAt(c+1);f>=56320&&f<=57343&&(d=(u-55296<<10)+65536|f-56320,h=!0)}s&&(i[c]=l,h&&(i[c+1]=l),d<=127?o[l+0]=c:d<=2047?(o[l+0]=c,o[l+1]=c):d<=65535?(o[l+0]=c,o[l+1]=c,o[l+2]=c):(o[l+0]=c,o[l+1]=c,o[l+2]=c,o[l+3]=c)),d<=127?a[l++]=d:d<=2047?(a[l++]=192|(d&1984)>>>6,a[l++]=128|(d&63)>>>0):d<=65535?(a[l++]=224|(d&61440)>>>12,a[l++]=128|(d&4032)>>>6,a[l++]=128|(d&63)>>>0):(a[l++]=240|(d&1835008)>>>18,a[l++]=128|(d&258048)>>>12,a[l++]=128|(d&4032)>>>6,a[l++]=128|(d&63)>>>0),h&&c++}this.utf16Length=r,this.utf8Length=n,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=i,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let r=0;for(let n=0,s=e.length;n<s;n++){const i=e.charCodeAt(n);let o=i,a=!1;if(i>=55296&&i<=56319&&n+1<s){const l=e.charCodeAt(n+1);l>=56320&&l<=57343&&(o=(i-55296<<10)+65536|l-56320,a=!0)}o<=127?r+=1:o<=2047?r+=2:o<=65535?r+=3:r+=4,a&&n++}return r}createString(e){const r=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,r),r}}const Ki=class{constructor(t){if(Kr(this,"id",++Ki.LAST_ID),Kr(this,"_onigBinding"),Kr(this,"content"),Kr(this,"utf16Length"),Kr(this,"utf8Length"),Kr(this,"utf16OffsetToUtf8"),Kr(this,"utf8OffsetToUtf16"),Kr(this,"ptr"),!sn)throw new HA("Must invoke loadWasm first.");this._onigBinding=sn,this.content=t;const e=new y_(t);this.utf16Length=e.utf16Length,this.utf8Length=e.utf8Length,this.utf16OffsetToUtf8=e.utf16OffsetToUtf8,this.utf8OffsetToUtf16=e.utf8OffsetToUtf16,this.utf8Length<1e4&&!Ki._sharedPtrInUse?(Ki._sharedPtr||(Ki._sharedPtr=sn.omalloc(1e4)),Ki._sharedPtrInUse=!0,sn.HEAPU8.set(e.utf8Value,Ki._sharedPtr),this.ptr=Ki._sharedPtr):this.ptr=e.createString(sn)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===Ki._sharedPtr?Ki._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let fm=Ki;Kr(fm,"LAST_ID",0);Kr(fm,"_sharedPtr",0);Kr(fm,"_sharedPtrInUse",!1);class RIe{constructor(e){if(Kr(this,"_onigBinding"),Kr(this,"_ptr"),!sn)throw new HA("Must invoke loadWasm first.");const r=[],n=[];for(let a=0,l=e.length;a<l;a++){const c=new y_(e[a]);r[a]=c.createString(sn),n[a]=c.utf8Length}const s=sn.omalloc(4*e.length);sn.HEAPU32.set(r,s/4);const i=sn.omalloc(4*e.length);sn.HEAPU32.set(n,i/4);const o=sn.createOnigScanner(s,i,e.length);for(let a=0,l=e.length;a<l;a++)sn.ofree(r[a]);sn.ofree(i),sn.ofree(s),o===0&&AIe(sn),this._onigBinding=sn,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,r,n){let s=0;if(typeof n=="number"&&(s=n),typeof e=="string"){e=new fm(e);const i=this._findNextMatchSync(e,r,!1,s);return e.dispose(),i}return this._findNextMatchSync(e,r,!1,s)}_findNextMatchSync(e,r,n,s){const i=this._onigBinding,o=i.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(r),s);if(o===0)return null;const a=i.HEAPU32;let l=o/4;const c=a[l++],u=a[l++],d=[];for(let h=0;h<u;h++){const f=e.convertUtf8OffsetToUtf16(a[l++]),b=e.convertUtf8OffsetToUtf16(a[l++]);d[h]={start:f,end:b,length:b-f}}return{index:c,captureIndices:d}}}function PIe(t){return typeof t.instantiator=="function"}function IIe(t){return typeof t.default=="function"}function NIe(t){return typeof t.data<"u"}function DIe(t){return typeof Response<"u"&&t instanceof Response}function OIe(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof qe<"u"&&qe.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let e0;function LIe(t){if(e0)return e0;async function e(){sn=await CIe(async r=>{let n=t;return n=await n,typeof n=="function"&&(n=await n(r)),typeof n=="function"&&(n=await n(r)),PIe(n)?n=await n.instantiator(r):IIe(n)?n=await n.default(r):(NIe(n)&&(n=n.data),DIe(n)?typeof WebAssembly.instantiateStreaming=="function"?n=await MIe(n)(r):n=await jIe(n)(r):OIe(n)?n=await Hw(n)(r):n instanceof WebAssembly.Module?n=await Hw(n)(r):"default"in n&&n.default instanceof WebAssembly.Module&&(n=await Hw(n.default)(r))),"instance"in n&&(n=n.instance),"exports"in n&&(n=n.exports),n})}return e0=e(),e0}function Hw(t){return e=>WebAssembly.instantiate(t,e)}function MIe(t){return e=>WebAssembly.instantiateStreaming(t,e)}function jIe(t){return async e=>{const r=await t.arrayBuffer();return WebAssembly.instantiate(r,e)}}let FIe;function BIe(){return FIe}async function C7(t){return t&&await LIe(t),{createScanner(e){return new RIe(e.map(r=>typeof r=="string"?r:r.source))},createString(e){return new fm(e)}}}function $Ie(t){return zA(t)}function zA(t){return Array.isArray(t)?UIe(t):t instanceof RegExp?t:typeof t=="object"?HIe(t):t}function UIe(t){let e=[];for(let r=0,n=t.length;r<n;r++)e[r]=zA(t[r]);return e}function HIe(t){let e={};for(let r in t)e[r]=zA(t[r]);return e}function T7(t,...e){return e.forEach(r=>{for(let n in r)t[n]=r[n]}),t}function k7(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?k7(t.substring(0,t.length-1)):t.substr(~e+1)}var zw=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,t0=class{static hasCaptures(t){return t===null?!1:(zw.lastIndex=0,zw.test(t))}static replaceCaptures(t,e,r){return t.replace(zw,(n,s,i,o)=>{let a=r[parseInt(s||i,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(o){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return n})}};function A7(t,e){return t<e?-1:t>e?1:0}function R7(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let r=t.length,n=e.length;if(r===n){for(let s=0;s<r;s++){let i=A7(t[s],e[s]);if(i!==0)return i}return 0}return r-n}function mL(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function P7(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var I7=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},Ry=class{constructor(t,e,r){this._colorMap=t,this._defaults=e,this._root=r}static createFromRawTheme(t,e){return this.createFromParsedTheme(VIe(t),e)}static createFromParsedTheme(t,e){return qIe(t,e)}_cachedMatchRoot=new I7(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,n=this._cachedMatchRoot.get(e).find(s=>zIe(t.parent,s.parentScopes));return n?new N7(n.fontStyle,n.foreground,n.background):null}},Ww=class eb{constructor(e,r){this.parent=e,this.scopeName=r}static push(e,r){for(const n of r)e=new eb(e,n);return e}static from(...e){let r=null;for(let n=0;n<e.length;n++)r=new eb(r,e[n]);return r}push(e){return new eb(this,e)}getSegments(){let e=this;const r=[];for(;e;)r.push(e.scopeName),e=e.parent;return r.reverse(),r}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const r=[];let n=this;for(;n&&n!==e;)r.push(n.scopeName),n=n.parent;return n===e?r.reverse():void 0}};function zIe(t,e){if(e.length===0)return!0;for(let r=0;r<e.length;r++){let n=e[r],s=!1;if(n===">"){if(r===e.length-1)return!1;n=e[++r],s=!0}for(;t&&!WIe(t.scopeName,n);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function WIe(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var N7=class{constructor(t,e,r){this.fontStyle=t,this.foregroundId=e,this.backgroundId=r}};function VIe(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,r=[],n=0;for(let s=0,i=e.length;s<i;s++){let o=e[s];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let d=o.scope;d=d.replace(/^[,]+/,""),d=d.replace(/[,]+$/,""),a=d.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let d=o.settings.fontStyle.split(" ");for(let h=0,f=d.length;h<f;h++)switch(d[h]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof o.settings.foreground=="string"&&mL(o.settings.foreground)&&(c=o.settings.foreground);let u=null;typeof o.settings.background=="string"&&mL(o.settings.background)&&(u=o.settings.background);for(let d=0,h=a.length;d<h;d++){let b=a[d].trim().split(" "),m=b[b.length-1],g=null;b.length>1&&(g=b.slice(0,b.length-1),g.reverse()),r[n++]=new GIe(m,g,s,l,c,u)}}return r}var GIe=class{constructor(t,e,r,n,s,i){this.scope=t,this.parentScopes=e,this.index=r,this.fontStyle=n,this.foreground=s,this.background=i}},Xo=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(Xo||{});function qIe(t,e){t.sort((l,c)=>{let u=A7(l.scope,c.scope);return u!==0||(u=R7(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let r=0,n="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(r=l.fontStyle),l.foreground!==null&&(n=l.foreground),l.background!==null&&(s=l.background)}let i=new KIe(e),o=new N7(r,i.getId(n),i.getId(s)),a=new XIe(new tC(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let u=t[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,i.getId(u.foreground),i.getId(u.background))}return new Ry(i,o,a)}var KIe=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,r=t.length;e<r;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},YIe=Object.freeze([]),tC=class D7{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,r,n,s,i){this.scopeDepth=e,this.parentScopes=r||YIe,this.fontStyle=n,this.foreground=s,this.background=i}clone(){return new D7(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let r=[];for(let n=0,s=e.length;n<s;n++)r[n]=e[n].clone();return r}acceptOverwrite(e,r,n,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,r!==-1&&(this.fontStyle=r),n!==0&&(this.foreground=n),s!==0&&(this.background=s)}},XIe=class rC{constructor(e,r=[],n={}){this._mainRule=e,this._children=n,this._rulesWithParentScopes=r}_rulesWithParentScopes;static _cmpBySpecificity(e,r){if(e.scopeDepth!==r.scopeDepth)return r.scopeDepth-e.scopeDepth;let n=0,s=0;for(;e.parentScopes[n]===">"&&n++,r.parentScopes[s]===">"&&s++,!(n>=e.parentScopes.length||s>=r.parentScopes.length);){const i=r.parentScopes[s].length-e.parentScopes[n].length;if(i!==0)return i;n++,s++}return r.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let n=e.indexOf("."),s,i;if(n===-1?(s=e,i=""):(s=e.substring(0,n),i=e.substring(n+1)),this._children.hasOwnProperty(s))return this._children[s].match(i)}const r=this._rulesWithParentScopes.concat(this._mainRule);return r.sort(rC._cmpBySpecificity),r}insert(e,r,n,s,i,o){if(r===""){this._doInsertHere(e,n,s,i,o);return}let a=r.indexOf("."),l,c;a===-1?(l=r,c=""):(l=r.substring(0,a),c=r.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new rC(this._mainRule.clone(),tC.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(e+1,c,n,s,i,o)}_doInsertHere(e,r,n,s,i){if(r===null){this._mainRule.acceptOverwrite(e,n,s,i);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if(R7(l.parentScopes,r)===0){l.acceptOverwrite(e,n,s,i);return}}n===-1&&(n=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),i===0&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new tC(e,r,n,s,i))}},xd=class Hs{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const r=Hs.getLanguageId(e),n=Hs.getTokenType(e),s=Hs.getFontStyle(e),i=Hs.getForeground(e),o=Hs.getBackground(e);console.log({languageId:r,tokenType:n,fontStyle:s,foreground:i,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,r,n,s,i,o,a){let l=Hs.getLanguageId(e),c=Hs.getTokenType(e),u=Hs.containsBalancedBrackets(e)?1:0,d=Hs.getFontStyle(e),h=Hs.getForeground(e),f=Hs.getBackground(e);return r!==0&&(l=r),n!==8&&(c=n),s!==null&&(u=s?1:0),i!==-1&&(d=i),o!==0&&(h=o),a!==0&&(f=a),(l<<0|c<<8|u<<10|d<<11|h<<15|f<<24)>>>0}};function Py(t,e){const r=[],n=JIe(t);let s=n.next();for(;s!==null;){let l=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=n.next()}let c=o();if(r.push({matcher:c,priority:l}),s!==",")break;s=n.next()}return r;function i(){if(s==="-"){s=n.next();const l=i();return c=>!!l&&!l(c)}if(s==="("){s=n.next();const l=a();return s===")"&&(s=n.next()),l}if(gL(s)){const l=[];do l.push(s),s=n.next();while(gL(s));return c=>e(l,c)}return null}function o(){const l=[];let c=i();for(;c;)l.push(c),c=i();return u=>l.every(d=>d(u))}function a(){const l=[];let c=o();for(;c&&(l.push(c),s==="|"||s===",");){do s=n.next();while(s==="|"||s===",");c=o()}return u=>l.some(d=>d(u))}}function gL(t){return!!t&&!!t.match(/[\w\.:]+/)}function JIe(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,r=e.exec(t);return{next:()=>{if(!r)return null;const n=r[0];return r=e.exec(t),n}}}function O7(t){typeof t.dispose=="function"&&t.dispose()}var vp=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},ZIe=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},QIe=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},eNe=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new vp(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new QIe;for(const r of t)tNe(r,this.initialScopeName,this.repo,e);for(const r of e.references)if(r instanceof vp){if(this.seenFullScopeRequests.has(r.scopeName))continue;this.seenFullScopeRequests.add(r.scopeName),this.Q.push(r)}else{if(this.seenFullScopeRequests.has(r.scopeName)||this.seenPartialScopeRequests.has(r.toKey()))continue;this.seenPartialScopeRequests.add(r.toKey()),this.Q.push(r)}}};function tNe(t,e,r,n){const s=r.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const i=r.lookup(e);t instanceof vp?tb({baseGrammar:i,selfGrammar:s},n):nC(t.ruleName,{baseGrammar:i,selfGrammar:s,repository:s.repository},n);const o=r.injections(t.scopeName);if(o)for(const a of o)n.add(new vp(a))}function nC(t,e,r){if(e.repository&&e.repository[t]){const n=e.repository[t];Iy([n],e,r)}}function tb(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Iy(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Iy(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Iy(t,e,r){for(const n of t){if(r.visitedRule.has(n))continue;r.visitedRule.add(n);const s=n.repository?T7({},e.repository,n.repository):e.repository;Array.isArray(n.patterns)&&Iy(n.patterns,{...e,repository:s},r);const i=n.include;if(!i)continue;const o=L7(i);switch(o.kind){case 0:tb({...e,selfGrammar:e.baseGrammar},r);break;case 1:tb(e,r);break;case 2:nC(o.ruleName,{...e,repository:s},r);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:s};o.kind===4?nC(o.ruleName,l,r):tb(l,r)}else o.kind===4?r.add(new ZIe(o.scopeName,o.ruleName)):r.add(new vp(o.scopeName));break}}}var rNe=class{kind=0},nNe=class{kind=1},sNe=class{constructor(t){this.ruleName=t}kind=2},iNe=class{constructor(t){this.scopeName=t}kind=3},oNe=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function L7(t){if(t==="$base")return new rNe;if(t==="$self")return new nNe;const e=t.indexOf("#");if(e===-1)return new iNe(t);if(e===0)return new sNe(t.substring(1));{const r=t.substring(0,e),n=t.substring(e+1);return new oNe(r,n)}}var aNe=/\\(\d+)/,bL=/\\(\d+)/g,lNe=-1,M7=-2;var pm=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,r,n){this.$location=t,this.id=e,this._name=r||null,this._nameIsCapturing=t0.hasCaptures(this._name),this._contentName=n||null,this._contentNameIsCapturing=t0.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${k7(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:t0.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:t0.replaceCaptures(this._contentName,t,e)}},cNe=class extends pm{retokenizeCapturedWithRuleId;constructor(t,e,r,n,s){super(t,e,r,n),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,r,n){throw new Error("Not supported!")}},uNe=class extends pm{_match;captures;_cachedCompiledPatterns;constructor(t,e,r,n,s){super(t,e,r,null),this._match=new _p(n,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,r,n){return this._getCachedCompiledPatterns(t).compileAG(t,r,n)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new xp,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},yL=class extends pm{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,r,n,s){super(t,e,r,n),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const r of this.patterns)t.getRule(r).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,r,n){return this._getCachedCompiledPatterns(t).compileAG(t,r,n)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new xp,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},sC=class extends pm{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,r,n,s,i,o,a,l,c){super(t,e,r,n),this._begin=new _p(s,this.id),this.beginCaptures=i,this._end=new _p(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,r,n){return this._getCachedCompiledPatterns(t,e).compileAG(t,r,n)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new xp;for(const r of this.patterns)t.getRule(r).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Ny=class extends pm{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,r,n,s,i,o,a,l){super(t,e,r,n),this._begin=new _p(s,this.id),this.beginCaptures=i,this.whileCaptures=a,this._while=new _p(o,M7),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,r,n){return this._getCachedCompiledPatterns(t).compileAG(t,r,n)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new xp;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,r,n){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,r,n)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new xp,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},j7=class Tn{static createCaptureRule(e,r,n,s,i){return e.registerRule(o=>new cNe(r,o,n,s,i))}static getCompiledRuleId(e,r,n){return e.id||r.registerRule(s=>{if(e.id=s,e.match)return new uNe(e.$vscodeTextmateLocation,e.id,e.name,e.match,Tn._compileCaptures(e.captures,r,n));if(typeof e.begin>"u"){e.repository&&(n=T7({},n,e.repository));let i=e.patterns;return typeof i>"u"&&e.include&&(i=[{include:e.include}]),new yL(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,Tn._compilePatterns(i,r,n))}return e.while?new Ny(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Tn._compileCaptures(e.beginCaptures||e.captures,r,n),e.while,Tn._compileCaptures(e.whileCaptures||e.captures,r,n),Tn._compilePatterns(e.patterns,r,n)):new sC(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Tn._compileCaptures(e.beginCaptures||e.captures,r,n),e.end,Tn._compileCaptures(e.endCaptures||e.captures,r,n),e.applyEndPatternLast,Tn._compilePatterns(e.patterns,r,n))}),e.id}static _compileCaptures(e,r,n){let s=[];if(e){let i=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>i&&(i=a)}for(let o=0;o<=i;o++)s[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=Tn.getCompiledRuleId(e[o],r,n)),s[a]=Tn.createCaptureRule(r,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return s}static _compilePatterns(e,r,n){let s=[];if(e)for(let i=0,o=e.length;i<o;i++){const a=e[i];let l=-1;if(a.include){const c=L7(a.include);switch(c.kind){case 0:case 1:l=Tn.getCompiledRuleId(n[a.include],r,n);break;case 2:let u=n[c.ruleName];u&&(l=Tn.getCompiledRuleId(u,r,n));break;case 3:case 4:const d=c.scopeName,h=c.kind===4?c.ruleName:null,f=r.getExternalGrammar(d,n);if(f)if(h){let b=f.repository[h];b&&(l=Tn.getCompiledRuleId(b,r,f.repository))}else l=Tn.getCompiledRuleId(f.repository.$self,r,f.repository);break}}else l=Tn.getCompiledRuleId(a,r,n);if(l!==-1){const c=r.getRule(l);let u=!1;if((c instanceof yL||c instanceof sC||c instanceof Ny)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;s.push(l)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},_p=class F7{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,r){if(e&&typeof e=="string"){const n=e.length;let s=0,i=[],o=!1;for(let a=0;a<n;a++)if(e.charAt(a)==="\\"&&a+1<n){const c=e.charAt(a+1);c==="z"?(i.push(e.substring(s,a)),i.push("$(?!\\n)(?<!\\n)"),s=a+2):(c==="A"||c==="G")&&(o=!0),a++}this.hasAnchor=o,s===0?this.source=e:(i.push(e.substring(s,n)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=r,typeof this.source=="string"?this.hasBackReferences=aNe.test(this.source):this.hasBackReferences=!1}clone(){return new F7(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,r){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let n=r.map(s=>e.substring(s.start,s.end));return bL.lastIndex=0,this.source.replace(bL,(s,i)=>P7(n[parseInt(i,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],r=[],n=[],s=[],i,o,a,l;for(i=0,o=this.source.length;i<o;i++)a=this.source.charAt(i),e[i]=a,r[i]=a,n[i]=a,s[i]=a,a==="\\"&&i+1<o&&(l=this.source.charAt(i+1),l==="A"?(e[i+1]="",r[i+1]="",n[i+1]="A",s[i+1]="A"):l==="G"?(e[i+1]="",r[i+1]="G",n[i+1]="",s[i+1]="G"):(e[i+1]=l,r[i+1]=l,n[i+1]=l,s[i+1]=l),i++);return{A0_G0:e.join(""),A0_G1:r.join(""),A1_G0:n.join(""),A1_G1:s.join("")}}resolveAnchors(e,r){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?r?this._anchorCache.A1_G1:this._anchorCache.A1_G0:r?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},xp=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(r=>r.source);this._cached=new vL(t,e,this._items.map(r=>r.ruleId))}return this._cached}compileAG(t,e,r){return this._hasAnchors?e?r?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,r)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,r)),this._anchorCache.A1_G0):r?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,r)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,r)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,r){let n=this._items.map(s=>s.resolveAnchors(e,r));return new vL(t,n,this._items.map(s=>s.ruleId))}},vL=class{constructor(t,e,r){this.regExps=e,this.rules=r,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,r=this.rules.length;e<r;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,r){const n=this.scanner.findNextMatchSync(t,e,r);return n?{ruleId:this.rules[n.index],captureIndices:n.captureIndices}:null}},Vw=class{constructor(t,e){this.languageId=t,this.tokenType=e}},dNe=class iC{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,r){this._defaultAttributes=new Vw(e,8),this._embeddedLanguagesMatcher=new hNe(Object.entries(r||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?iC._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new Vw(0,0);_getBasicScopeAttributes=new I7(e=>{const r=this._scopeToLanguage(e),n=this._toStandardTokenType(e);return new Vw(r,n)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const r=e.match(iC.STANDARD_TOKEN_TYPE_REGEXP);if(!r)return 8;switch(r[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},hNe=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([r,n])=>P7(r));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},_L=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function B7(t,e,r,n,s,i,o,a){const l=e.content.length;let c=!1,u=-1;if(o){const f=fNe(t,e,r,n,s,i);s=f.stack,n=f.linePos,r=f.isFirstLine,u=f.anchorPosition}const d=Date.now();for(;!c;){if(a!==0&&Date.now()-d>a)return new _L(s,!0);h()}return new _L(s,!1);function h(){const f=pNe(t,e,r,n,s,u);if(!f){i.produce(s,l),c=!0;return}const b=f.captureIndices,m=f.matchedRuleId,g=b&&b.length>0?b[0].end>n:!1;if(m===lNe){const y=s.getRule(t);i.produce(s,b[0].start),s=s.withContentNameScopesList(s.nameScopesList),Vh(t,e,r,s,i,y.endCaptures,b),i.produce(s,b[0].end);const v=s;if(s=s.parent,u=v.getAnchorPos(),!g&&v.getEnterPos()===n){s=v,i.produce(s,l),c=!0;return}}else{const y=t.getRule(m);i.produce(s,b[0].start);const v=s,_=y.getName(e.content,b),x=s.contentNameScopesList.pushAttributed(_,t);if(s=s.push(m,n,u,b[0].end===l,null,x,x),y instanceof sC){const w=y;Vh(t,e,r,s,i,w.beginCaptures,b),i.produce(s,b[0].end),u=b[0].end;const S=w.getContentName(e.content,b),T=x.pushAttributed(S,t);if(s=s.withContentNameScopesList(T),w.endHasBackReferences&&(s=s.withEndRule(w.getEndWithResolvedBackReferences(e.content,b))),!g&&v.hasSameRuleAs(s)){s=s.pop(),i.produce(s,l),c=!0;return}}else if(y instanceof Ny){const w=y;Vh(t,e,r,s,i,w.beginCaptures,b),i.produce(s,b[0].end),u=b[0].end;const S=w.getContentName(e.content,b),T=x.pushAttributed(S,t);if(s=s.withContentNameScopesList(T),w.whileHasBackReferences&&(s=s.withEndRule(w.getWhileWithResolvedBackReferences(e.content,b))),!g&&v.hasSameRuleAs(s)){s=s.pop(),i.produce(s,l),c=!0;return}}else if(Vh(t,e,r,s,i,y.captures,b),i.produce(s,b[0].end),s=s.pop(),!g){s=s.safePop(),i.produce(s,l),c=!0;return}}b[0].end>n&&(n=b[0].end,r=!1)}}function fNe(t,e,r,n,s,i){let o=s.beginRuleCapturedEOL?0:-1;const a=[];for(let l=s;l;l=l.pop()){const c=l.getRule(t);c instanceof Ny&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=bNe(l.rule,t,l.stack.endRule,r,n===o),d=c.findNextMatchSync(e,n,u);if(d){if(d.ruleId!==M7){s=l.stack.pop();break}d.captureIndices&&d.captureIndices.length&&(i.produce(l.stack,d.captureIndices[0].start),Vh(t,e,r,l.stack,i,l.rule.whileCaptures,d.captureIndices),i.produce(l.stack,d.captureIndices[0].end),o=d.captureIndices[0].end,d.captureIndices[0].end>n&&(n=d.captureIndices[0].end,r=!1))}else{s=l.stack.pop();break}}return{stack:s,linePos:n,anchorPosition:o,isFirstLine:r}}function pNe(t,e,r,n,s,i){const o=mNe(t,e,r,n,s,i),a=t.getInjections();if(a.length===0)return o;const l=gNe(a,t,e,r,n,s,i);if(!l)return o;if(!o)return l;const c=o.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:o}function mNe(t,e,r,n,s,i){const o=s.getRule(t),{ruleScanner:a,findOptions:l}=$7(o,t,s.endRule,r,n===i),c=a.findNextMatchSync(e,n,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function gNe(t,e,r,n,s,i,o){let a=Number.MAX_VALUE,l=null,c,u=0;const d=i.contentNameScopesList.getScopeNames();for(let h=0,f=t.length;h<f;h++){const b=t[h];if(!b.matcher(d))continue;const m=e.getRule(b.ruleId),{ruleScanner:g,findOptions:y}=$7(m,e,null,n,s===o),v=g.findNextMatchSync(r,s,y);if(!v)continue;const _=v.captureIndices[0].start;if(!(_>=a)&&(a=_,l=v.captureIndices,c=v.ruleId,u=b.priority,a===s))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function $7(t,e,r,n,s){return{ruleScanner:t.compileAG(e,r,n,s),findOptions:0}}function bNe(t,e,r,n,s){return{ruleScanner:t.compileWhileAG(e,r,n,s),findOptions:0}}function Vh(t,e,r,n,s,i,o){if(i.length===0)return;const a=e.content,l=Math.min(i.length,o.length),c=[],u=o[0].end;for(let d=0;d<l;d++){const h=i[d];if(h===null)continue;const f=o[d];if(f.length===0)continue;if(f.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=f.start;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?s.produceFromScopes(c[c.length-1].scopes,f.start):s.produce(n,f.start),h.retokenizeCapturedWithRuleId){const m=h.getName(a,o),g=n.contentNameScopesList.pushAttributed(m,t),y=h.getContentName(a,o),v=g.pushAttributed(y,t),_=n.push(h.retokenizeCapturedWithRuleId,f.start,-1,!1,null,g,v),x=t.createOnigString(a.substring(0,f.end));B7(t,x,r&&f.start===0,f.start,_,s,!1,0),O7(x);continue}const b=h.getName(a,o);if(b!==null){const g=(c.length>0?c[c.length-1].scopes:n.contentNameScopesList).pushAttributed(b,t);c.push(new yNe(g,f.end))}}for(;c.length>0;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var yNe=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function vNe(t,e,r,n,s,i,o,a){return new xNe(t,e,r,n,s,i,o,a)}function xL(t,e,r,n,s){const i=Py(e,Dy),o=j7.getCompiledRuleId(r,n,s.repository);for(const a of i)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:s,priority:a.priority})}function Dy(t,e){if(e.length<t.length)return!1;let r=0;return t.every(n=>{for(let s=r;s<e.length;s++)if(_Ne(e[s],n))return r=s+1,!0;return!1})}function _Ne(t,e){if(!t)return!1;if(t===e)return!0;const r=e.length;return t.length>r&&t.substr(0,r)===e&&t[r]==="."}var xNe=class{constructor(t,e,r,n,s,i,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=i,this._onigLib=a,this._basicScopeAttributesProvider=new dNe(r,n),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=wL(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const l of Object.keys(s)){const c=Py(l,Dy);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:s[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],r=this._rootScopeName,n=t.lookup(r);if(n){const s=n.injections;if(s)for(let o in s)xL(e,o,s[o],this,n);const i=this._grammarRepository.injections(r);i&&i.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const l=a.injectionSelector;l&&xL(e,l,a,this,a)}})}return e.sort((s,i)=>s.priority-i.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,r=t(e);return this._ruleId2desc[e]=r,r}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const r=this._grammarRepository.lookup(t);if(r)return this._includedGrammars[t]=wL(r,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,r=0){const n=this._tokenize(t,e,!1,r);return{tokens:n.lineTokens.getResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack,stoppedEarly:n.stoppedEarly}}tokenizeLine2(t,e,r=0){const n=this._tokenize(t,e,!0,r);return{tokens:n.lineTokens.getBinaryResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack,stoppedEarly:n.stoppedEarly}}_tokenize(t,e,r,n){this._rootId===-1&&(this._rootId=j7.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===oC.NULL){s=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),d=xd.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),h=this.getRule(this._rootId).getName(null,null);let f;h?f=wf.createRootAndLookUpScopeName(h,d,this):f=wf.createRoot("unknown",d),e=new oC(null,this._rootId,-1,-1,!1,null,f,f)}else s=!1,e.reset();t=t+`
`;const i=this.createOnigString(t),o=i.content.length,a=new SNe(r,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=B7(this,i,s,0,e,a,!0,n);return O7(i),{lineLength:o,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function wL(t,e){return t=$Ie(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var wf=class Yi{constructor(e,r,n){this.parent=e,this.scopePath=r,this.tokenAttributes=n}static fromExtension(e,r){let n=e,s=e?.scopePath??null;for(const i of r)s=Ww.push(s,i.scopeNames),n=new Yi(n,s,i.encodedTokenAttributes);return n}static createRoot(e,r){return new Yi(null,new Ww(null,e),r)}static createRootAndLookUpScopeName(e,r,n){const s=n.getMetadataForScope(e),i=new Ww(null,e),o=n.themeProvider.themeMatch(i),a=Yi.mergeAttributes(r,s,o);return new Yi(null,i,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Yi.equals(this,e)}static equals(e,r){do{if(e===r||!e&&!r)return!0;if(!e||!r||e.scopeName!==r.scopeName||e.tokenAttributes!==r.tokenAttributes)return!1;e=e.parent,r=r.parent}while(!0)}static mergeAttributes(e,r,n){let s=-1,i=0,o=0;return n!==null&&(s=n.fontStyle,i=n.foregroundId,o=n.backgroundId),xd.set(e,r.languageId,r.tokenType,null,s,i,o)}pushAttributed(e,r){if(e===null)return this;if(e.indexOf(" ")===-1)return Yi._pushAttributed(this,e,r);const n=e.split(/ /g);let s=this;for(const i of n)s=Yi._pushAttributed(s,i,r);return s}static _pushAttributed(e,r,n){const s=n.getMetadataForScope(r),i=e.scopePath.push(r),o=n.themeProvider.themeMatch(i),a=Yi.mergeAttributes(e.tokenAttributes,s,o);return new Yi(e,i,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const r=[];let n=this;for(;n&&n!==e;)r.push({encodedTokenAttributes:n.tokenAttributes,scopeNames:n.scopePath.getExtensionIfDefined(n.parent?.scopePath??null)}),n=n.parent;return n===e?r.reverse():void 0}},oC=class Hl{constructor(e,r,n,s,i,o,a,l){this.parent=e,this.ruleId=r,this.beginRuleCapturedEOL=i,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=n,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new Hl(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:Hl._equals(this,e)}static _equals(e,r){return e===r?!0:this._structuralEquals(e,r)?wf.equals(e.contentNameScopesList,r.contentNameScopesList):!1}static _structuralEquals(e,r){do{if(e===r||!e&&!r)return!0;if(!e||!r||e.depth!==r.depth||e.ruleId!==r.ruleId||e.endRule!==r.endRule)return!1;e=e.parent,r=r.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Hl._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,r,n,s,i,o,a){return new Hl(this,e,r,n,s,i,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,r){return this.parent&&(r=this.parent._writeString(e,r)),e[r++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,r}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Hl(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let r=this;for(;r&&r._enterPos===e._enterPos;){if(r.ruleId===e.ruleId)return!0;r=r.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,r){const n=wf.fromExtension(e?.nameScopesList??null,r.nameScopesList);return new Hl(e,r.ruleId,r.enterPos??-1,r.anchorPos??-1,r.beginRuleCapturedEOL,r.endRule,n,wf.fromExtension(n,r.contentNameScopesList))}},wNe=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(r=>r==="*"?(this.allowAny=!0,[]):Py(r,Dy).map(n=>n.matcher)),this.unbalancedBracketScopes=e.flatMap(r=>Py(r,Dy).map(n=>n.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},SNe=class{constructor(t,e,r,n){this.balancedBracketSelectors=n,this._emitBinaryTokens=t,this._tokenTypeOverrides=r,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let n=t?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(i)&&(n=xd.set(n,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(i))}if(s&&(n=xd.set(n,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===n){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(n),this._lastTokenEndIndex=e;return}const r=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:r}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const r=new Uint32Array(this._binaryTokens.length);for(let n=0,s=this._binaryTokens.length;n<s;n++)r[n]=this._binaryTokens[n];return r}},ENe=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,r,n,s){if(!this._grammars.has(t)){let i=this._rawGrammars.get(t);if(!i)return null;this._grammars.set(t,vNe(t,i,e,r,n,s,this,this._onigLib))}return this._grammars.get(t)}},CNe=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new ENe(Ry.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,r){this._syncRegistry.setTheme(Ry.createFromRawTheme(e,r))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,r,n){return this.loadGrammarWithConfiguration(e,r,{embeddedLanguages:n})}loadGrammarWithConfiguration(e,r,n){return this._loadGrammar(e,r,n.embeddedLanguages,n.tokenTypes,new wNe(n.balancedBracketSelectors||[],n.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,r,n,s,i){const o=new eNe(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,r,n,s,i)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const r=this._options.loadGrammar(e);if(r){const n=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(r,n)}}addGrammar(e,r=[],n=0,s=null){return this._syncRegistry.addGrammar(e,r),this._grammarForScopeName(e.scopeName,n,s)}_grammarForScopeName(e,r=0,n=null,s=null,i=null){return this._syncRegistry.grammarForScopeName(e,r,n,s,i)}},aC=oC.NULL;const TNe=/["&'<>`]/g,kNe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ANe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,RNe=/[|\\{}()[\]^$+*?.]/g,SL=new WeakMap;function PNe(t,e){if(t=t.replace(e.subset?INe(e.subset):TNe,n),e.subset||e.escapeOnly)return t;return t.replace(kNe,r).replace(ANe,n);function r(s,i,o){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,o.charCodeAt(i+2),e)}function n(s,i,o){return e.format(s.charCodeAt(0),o.charCodeAt(i+1),e)}}function INe(t){let e=SL.get(t);return e||(e=NNe(t),SL.set(t,e)),e}function NNe(t){const e=[];let r=-1;for(;++r<t.length;)e.push(t[r].replace(RNe,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const DNe=/[\dA-Fa-f]/;function ONe(t,e,r){const n="&#x"+t.toString(16).toUpperCase();return r&&e&&!DNe.test(String.fromCharCode(e))?n:n+";"}const LNe=/\d/;function MNe(t,e,r){const n="&#"+String(t);return r&&e&&!LNe.test(String.fromCharCode(e))?n:n+";"}const jNe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Gw={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},FNe=["cent","copy","divide","gt","lt","not","para","times"],U7={}.hasOwnProperty,lC={};let r0;for(r0 in Gw)U7.call(Gw,r0)&&(lC[Gw[r0]]=r0);const BNe=/[^\dA-Za-z]/;function $Ne(t,e,r,n){const s=String.fromCharCode(t);if(U7.call(lC,s)){const i=lC[s],o="&"+i;return r&&jNe.includes(i)&&!FNe.includes(i)&&(!n||e&&e!==61&&BNe.test(String.fromCharCode(e)))?o:o+";"}return""}function UNe(t,e,r){let n=ONe(t,e,r.omitOptionalSemicolons),s;if((r.useNamedReferences||r.useShortestReferences)&&(s=$Ne(t,e,r.omitOptionalSemicolons,r.attribute)),(r.useShortestReferences||!s)&&r.useShortestReferences){const i=MNe(t,e,r.omitOptionalSemicolons);i.length<n.length&&(n=i)}return s&&(!r.useShortestReferences||s.length<n.length)?s:n}function Qu(t,e){return PNe(t,Object.assign({format:UNe},e))}const HNe=/^>|^->|<!--|-->|--!>|<!-$/g,zNe=[">"],WNe=["<",">"];function VNe(t,e,r,n){return n.settings.bogusComments?"<?"+Qu(t.value,Object.assign({},n.settings.characterReferences,{subset:zNe}))+">":"<!--"+t.value.replace(HNe,s)+"-->";function s(i){return Qu(i,Object.assign({},n.settings.characterReferences,{subset:WNe}))}}function GNe(t,e,r,n){return"<!"+(n.settings.upperDoctype?"DOCTYPE":"doctype")+(n.settings.tightDoctype?"":" ")+"html>"}const Zr=z7(1),H7=z7(-1),qNe=[];function z7(t){return e;function e(r,n,s){const i=r?r.children:qNe;let o=(n||0)+t,a=i[o];if(!s)for(;a&&o_(a);)o+=t,a=i[o];return a}}const KNe={}.hasOwnProperty;function W7(t){return e;function e(r,n,s){return KNe.call(t,r.tagName)&&t[r.tagName](r,n,s)}}const WA=W7({body:XNe,caption:qw,colgroup:qw,dd:eDe,dt:QNe,head:qw,html:YNe,li:ZNe,optgroup:tDe,option:rDe,p:JNe,rp:EL,rt:EL,tbody:sDe,td:CL,tfoot:iDe,th:CL,thead:nDe,tr:oDe});function qw(t,e,r){const n=Zr(r,e,!0);return!n||n.type!=="comment"&&!(n.type==="text"&&o_(n.value.charAt(0)))}function YNe(t,e,r){const n=Zr(r,e);return!n||n.type!=="comment"}function XNe(t,e,r){const n=Zr(r,e);return!n||n.type!=="comment"}function JNe(t,e,r){const n=Zr(r,e);return n?n.type==="element"&&(n.tagName==="address"||n.tagName==="article"||n.tagName==="aside"||n.tagName==="blockquote"||n.tagName==="details"||n.tagName==="div"||n.tagName==="dl"||n.tagName==="fieldset"||n.tagName==="figcaption"||n.tagName==="figure"||n.tagName==="footer"||n.tagName==="form"||n.tagName==="h1"||n.tagName==="h2"||n.tagName==="h3"||n.tagName==="h4"||n.tagName==="h5"||n.tagName==="h6"||n.tagName==="header"||n.tagName==="hgroup"||n.tagName==="hr"||n.tagName==="main"||n.tagName==="menu"||n.tagName==="nav"||n.tagName==="ol"||n.tagName==="p"||n.tagName==="pre"||n.tagName==="section"||n.tagName==="table"||n.tagName==="ul"):!r||!(r.type==="element"&&(r.tagName==="a"||r.tagName==="audio"||r.tagName==="del"||r.tagName==="ins"||r.tagName==="map"||r.tagName==="noscript"||r.tagName==="video"))}function ZNe(t,e,r){const n=Zr(r,e);return!n||n.type==="element"&&n.tagName==="li"}function QNe(t,e,r){const n=Zr(r,e);return!!(n&&n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd"))}function eDe(t,e,r){const n=Zr(r,e);return!n||n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd")}function EL(t,e,r){const n=Zr(r,e);return!n||n.type==="element"&&(n.tagName==="rp"||n.tagName==="rt")}function tDe(t,e,r){const n=Zr(r,e);return!n||n.type==="element"&&n.tagName==="optgroup"}function rDe(t,e,r){const n=Zr(r,e);return!n||n.type==="element"&&(n.tagName==="option"||n.tagName==="optgroup")}function nDe(t,e,r){const n=Zr(r,e);return!!(n&&n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot"))}function sDe(t,e,r){const n=Zr(r,e);return!n||n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot")}function iDe(t,e,r){return!Zr(r,e)}function oDe(t,e,r){const n=Zr(r,e);return!n||n.type==="element"&&n.tagName==="tr"}function CL(t,e,r){const n=Zr(r,e);return!n||n.type==="element"&&(n.tagName==="td"||n.tagName==="th")}const aDe=W7({body:uDe,colgroup:dDe,head:cDe,html:lDe,tbody:hDe});function lDe(t){const e=Zr(t,-1);return!e||e.type!=="comment"}function cDe(t){const e=new Set;for(const n of t.children)if(n.type==="element"&&(n.tagName==="base"||n.tagName==="title")){if(e.has(n.tagName))return!1;e.add(n.tagName)}const r=t.children[0];return!r||r.type==="element"}function uDe(t){const e=Zr(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&o_(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function dDe(t,e,r){const n=H7(r,e),s=Zr(t,-1,!0);return r&&n&&n.type==="element"&&n.tagName==="colgroup"&&WA(n,r.children.indexOf(n),r)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function hDe(t,e,r){const n=H7(r,e),s=Zr(t,-1);return r&&n&&n.type==="element"&&(n.tagName==="thead"||n.tagName==="tbody")&&WA(n,r.children.indexOf(n),r)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const n0={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function fDe(t,e,r,n){const s=n.schema,i=s.space==="svg"?!1:n.settings.omitOptionalTags;let o=s.space==="svg"?n.settings.closeEmptyElements:n.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;s.space==="html"&&t.tagName==="svg"&&(n.schema=To);const c=pDe(n,t.properties),u=n.all(s.space==="html"&&t.tagName==="template"?t.content:t);return n.schema=s,u&&(o=!1),(c||!i||!aDe(t,e,r))&&(a.push("<",t.tagName,c?" "+c:""),o&&(s.space==="svg"||n.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!n.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!o&&(!i||!WA(t,e,r))&&a.push("</"+t.tagName+">"),a.join("")}function pDe(t,e){const r=[];let n=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const i=mDe(t,s,e[s]);i&&r.push(i)}}for(;++n<r.length;){const i=t.settings.tightAttributes?r[n].charAt(r[n].length-1):void 0;n!==r.length-1&&i!=='"'&&i!=="'"&&(r[n]+=" ")}return r.join("")}function mDe(t,e,r){const n=am(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,i=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(n.overloadedBoolean&&(r===n.attribute||r==="")?r=!0:(n.boolean||n.overloadedBoolean)&&(typeof r!="string"||r===n.attribute||r==="")&&(r=!!r),r==null||r===!1||typeof r=="number"&&Number.isNaN(r))return"";const l=Qu(n.attribute,Object.assign({},t.settings.characterReferences,{subset:n0.name[s][i]}));return r===!0||(r=Array.isArray(r)?(n.commaSeparated?bA:vA)(r,{padLeft:!t.settings.tightCommaSeparatedLists}):String(r),t.settings.collapseEmptyAttributes&&!r)?l:(t.settings.preferUnquoted&&(a=Qu(r,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:n0.unquoted[s][i]}))),a!==r&&(t.settings.quoteSmart&&ky(r,o)>ky(r,t.alternative)&&(o=t.alternative),a=o+Qu(r,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?n0.single:n0.double)[s][i],attribute:!0}))+o),l+(a&&"="+a))}const gDe=["<","&"];function V7(t,e,r,n){return r&&r.type==="element"&&(r.tagName==="script"||r.tagName==="style")?t.value:Qu(t.value,Object.assign({},n.settings.characterReferences,{subset:gDe}))}function bDe(t,e,r,n){return n.settings.allowDangerousHtml?t.value:V7(t,e,r,n)}function yDe(t,e,r,n){return n.all(t)}const vDe=DA("type",{invalid:_De,unknown:xDe,handlers:{comment:VNe,doctype:GNe,element:fDe,raw:bDe,root:yDe,text:V7}});function _De(t){throw new Error("Expected node, not `"+t+"`")}function xDe(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const wDe={},SDe={},EDe=[];function CDe(t,e){const r=wDe,n=r.quote||'"',s=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Invalid quote `"+n+"`, expected `'` or `\"`");return{one:TDe,all:kDe,settings:{omitOptionalTags:r.omitOptionalTags||!1,allowParseErrors:r.allowParseErrors||!1,allowDangerousCharacters:r.allowDangerousCharacters||!1,quoteSmart:r.quoteSmart||!1,preferUnquoted:r.preferUnquoted||!1,tightAttributes:r.tightAttributes||!1,upperDoctype:r.upperDoctype||!1,tightDoctype:r.tightDoctype||!1,bogusComments:r.bogusComments||!1,tightCommaSeparatedLists:r.tightCommaSeparatedLists||!1,tightSelfClosing:r.tightSelfClosing||!1,collapseEmptyAttributes:r.collapseEmptyAttributes||!1,allowDangerousHtml:r.allowDangerousHtml||!1,voids:r.voids||yz,characterReferences:r.characterReferences||SDe,closeSelfClosing:r.closeSelfClosing||!1,closeEmptyElements:r.closeEmptyElements||!1},schema:r.space==="svg"?To:zd,quote:n,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function TDe(t,e,r){return vDe(t,e,r,this)}function kDe(t){const e=[],r=t&&t.children||EDe;let n=-1;for(;++n<r.length;)e[n]=this.one(r[n],n,t);return e.join("")}function ADe(t){return Array.isArray(t)?t:[t]}function v_(t,e=!1){const r=t.split(/(\r?\n)/g);let n=0;const s=[];for(let i=0;i<r.length;i+=2){const o=e?r[i]+(r[i+1]||""):r[i];s.push([o,n]),n+=r[i].length,n+=r[i+1]?.length||0}return s}function VA(t){return!t||["plaintext","txt","text","plain"].includes(t)}function GA(t){return t==="ansi"||VA(t)}function qA(t){return t==="none"}function G7(t){return qA(t)}function q7(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const r=Array.isArray(e)?e:e.split(/\s+/g);for(const n of r)n&&!t.properties.class.includes(n)&&t.properties.class.push(n);return t}function RDe(t,e){let r=0;const n=[];for(const s of e)s>r&&n.push({...t,content:t.content.slice(r,s),offset:t.offset+r}),r=s;return r<t.content.length&&n.push({...t,content:t.content.slice(r),offset:t.offset+r}),n}function PDe(t,e){const r=Array.from(e instanceof Set?e:new Set(e)).sort((n,s)=>n-s);return r.length?t.map(n=>n.flatMap(s=>{const i=r.filter(o=>s.offset<o&&o<s.offset+s.content.length).map(o=>o-s.offset).sort((o,a)=>o-a);return i.length?RDe(s,i):s})):t}async function K7(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function Oy(t,e){const r=typeof t=="string"?{}:{...t.colorReplacements},n=typeof t=="string"?t:t.name;for(const[s,i]of Object.entries(e?.colorReplacements||{}))typeof i=="string"?r[s]=i:s===n&&Object.assign(r,i);return r}function tc(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function Y7(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&Xo.Italic&&(e["font-style"]="italic"),t.fontStyle&Xo.Bold&&(e["font-weight"]="bold"),t.fontStyle&Xo.Underline&&(e["text-decoration"]="underline")),e}function IDe(t){return typeof t=="string"?t:Object.entries(t).map(([e,r])=>`${e}:${r}`).join(";")}function NDe(t){const e=v_(t,!0).map(([s])=>s);function r(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let i=s,o=0;for(const a of e){if(i<a.length)break;i-=a.length,o++}return{line:o,character:i}}function n(s,i){let o=0;for(let a=0;a<s;a++)o+=e[a].length;return o+=i,o}return{lines:e,indexToPos:r,posToIndex:n}}class Wn extends Error{constructor(e){super(e),this.name="ShikiError"}}const X7=new WeakMap;function __(t,e){X7.set(t,e)}function wp(t){return X7.get(t)}class Yd{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,r){return new Yd(Object.fromEntries(ADe(r).map(n=>[n,aC])),e)}constructor(...e){if(e.length===2){const[r,n]=e;this.lang=n,this._stacks=r}else{const[r,n,s]=e;this.lang=n,this._stacks={[s]:r}}}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return TL(this._stacks[this.theme])}getScopes(e=this.theme){return TL(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function TL(t){const e=[],r=new Set;function n(s){if(r.has(s))return;r.add(s);const i=s?.nameScopesList?.scopeName;i&&e.push(i),s.parent&&n(s.parent)}return n(t),e}function DDe(t,e){if(!(t instanceof Yd))throw new Wn("Invalid grammar state");return t.getInternalStack(e)}function ODe(){const t=new WeakMap;function e(r){if(!t.has(r.meta)){let n=function(o){if(typeof o=="number"){if(o<0||o>r.source.length)throw new Wn(`Invalid decoration offset: ${o}. Code length: ${r.source.length}`);return{...s.indexToPos(o),offset:o}}else{const a=s.lines[o.line];if(a===void 0)throw new Wn(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${s.lines.length}`);if(o.character<0||o.character>a.length)throw new Wn(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,offset:s.posToIndex(o.line,o.character)}}};const s=NDe(r.source),i=(r.options.decorations||[]).map(o=>({...o,start:n(o.start),end:n(o.end)}));LDe(i),t.set(r.meta,{decorations:i,converter:s,source:r.source})}return t.get(r.meta)}return{name:"shiki:decorations",tokens(r){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return PDe(r,s)},code(r){if(!this.options.decorations?.length)return;const n=e(this),s=Array.from(r.children).filter(u=>u.type==="element"&&u.tagName==="span");if(s.length!==n.converter.lines.length)throw new Wn(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${n.converter.lines.length}). Failed to apply decorations.`);function i(u,d,h,f){const b=s[u];let m="",g=-1,y=-1;if(d===0&&(g=0),h===0&&(y=0),h===Number.POSITIVE_INFINITY&&(y=b.children.length),g===-1||y===-1)for(let _=0;_<b.children.length;_++)m+=J7(b.children[_]),g===-1&&m.length===d&&(g=_+1),y===-1&&m.length===h&&(y=_+1);if(g===-1)throw new Wn(`Failed to find start index for decoration ${JSON.stringify(f.start)}`);if(y===-1)throw new Wn(`Failed to find end index for decoration ${JSON.stringify(f.end)}`);const v=b.children.slice(g,y);if(!f.alwaysWrap&&v.length===b.children.length)a(b,f,"line");else if(!f.alwaysWrap&&v.length===1&&v[0].type==="element")a(v[0],f,"token");else{const _={type:"element",tagName:"span",properties:{},children:v};a(_,f,"wrapper"),b.children.splice(g,v.length,_)}}function o(u,d){s[u]=a(s[u],d,"line")}function a(u,d,h){const f=d.properties||{},b=d.transform||(m=>m);return u.tagName=d.tagName||"span",u.properties={...u.properties,...f,class:u.properties.class},d.properties?.class&&q7(u,d.properties.class),u=b(u,h)||u,u}const l=[],c=n.decorations.sort((u,d)=>d.start.offset-u.start.offset);for(const u of c){const{start:d,end:h}=u;if(d.line===h.line)i(d.line,d.character,h.character,u);else if(d.line<h.line){i(d.line,d.character,Number.POSITIVE_INFINITY,u);for(let f=d.line+1;f<h.line;f++)l.unshift(()=>o(f,u));i(h.line,0,h.character,u)}}l.forEach(u=>u())}}}function LDe(t){for(let e=0;e<t.length;e++){const r=t[e];if(r.start.offset>r.end.offset)throw new Wn(`Invalid decoration range: ${JSON.stringify(r.start)} - ${JSON.stringify(r.end)}`);for(let n=e+1;n<t.length;n++){const s=t[n],i=r.start.offset<s.start.offset&&s.start.offset<r.end.offset,o=r.start.offset<s.end.offset&&s.end.offset<r.end.offset,a=s.start.offset<r.start.offset&&r.start.offset<s.end.offset,l=s.start.offset<r.end.offset&&r.end.offset<s.end.offset;if(i||o||a||l){if(o&&o||a&&l)continue;throw new Wn(`Decorations ${JSON.stringify(r.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function J7(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(J7).join(""):""}const MDe=[ODe()];function Ly(t){return[...t.transformers||[],...MDe]}var rc=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Kw={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function jDe(t,e){const r=t.indexOf("\x1B[",e);if(r!==-1){const n=t.indexOf("m",r);return{sequence:t.substring(r+2,n).split(";"),startPosition:r,position:n+1}}return{position:t.length}}function kL(t,e){let r=1;const n=t[e+r++];let s;if(n==="2"){const i=[t[e+r++],t[e+r++],t[e+r]].map(o=>Number.parseInt(o));i.length===3&&!i.some(o=>Number.isNaN(o))&&(s={type:"rgb",rgb:i})}else if(n==="5"){const i=Number.parseInt(t[e+r]);Number.isNaN(i)||(s={type:"table",index:Number(i)})}return[r,s]}function FDe(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r],s=Number.parseInt(n);if(!Number.isNaN(s))if(s===0)e.push({type:"resetAll"});else if(s<=9)Kw[s]&&e.push({type:"setDecoration",value:Kw[s]});else if(s<=29){const i=Kw[s-20];i&&e.push({type:"resetDecoration",value:i})}else if(s<=37)e.push({type:"setForegroundColor",value:{type:"named",name:rc[s-30]}});else if(s===38){const[i,o]=kL(t,r);o&&e.push({type:"setForegroundColor",value:o}),r+=i}else if(s===39)e.push({type:"resetForegroundColor"});else if(s<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:rc[s-40]}});else if(s===48){const[i,o]=kL(t,r);o&&e.push({type:"setBackgroundColor",value:o}),r+=i}else s===49?e.push({type:"resetBackgroundColor"}):s>=90&&s<=97?e.push({type:"setForegroundColor",value:{type:"named",name:rc[s-90+8]}}):s>=100&&s<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:rc[s-100+8]}})}return e}function BDe(){let t=null,e=null,r=new Set;return{parse(n){const s=[];let i=0;do{const o=jDe(n,i),a=o.sequence?n.substring(i,o.startPosition):n.substring(i);if(a.length>0&&s.push({value:a,foreground:t,background:e,decorations:new Set(r)}),o.sequence){const l=FDe(o.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,r.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&r.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&r.add(c.value)}i=o.position}while(i<n.length);return s}}}var $De={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function UDe(t=$De){function e(a){return t[a]}function r(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let n;function s(){if(n)return n;n=[];for(let c=0;c<rc.length;c++)n.push(e(rc[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let d=0;d<6;d++)n.push(r([a[c],a[u],a[d]]));let l=8;for(let c=0;c<24;c++,l+=10)n.push(r([l,l,l]));return n}function i(a){return s()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return r(a.rgb);case"table":return i(a.index)}}return{value:o}}function HDe(t,e,r){const n=Oy(t,r),s=v_(e),i=UDe(Object.fromEntries(rc.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),o=BDe();return s.map(a=>o.parse(a[0]).map(l=>{let c,u;l.decorations.has("reverse")?(c=l.background?i.value(l.background):t.bg,u=l.foreground?i.value(l.foreground):t.fg):(c=l.foreground?i.value(l.foreground):t.fg,u=l.background?i.value(l.background):void 0),c=tc(c,n),u=tc(u,n),l.decorations.has("dim")&&(c=zDe(c));let d=Xo.None;return l.decorations.has("bold")&&(d|=Xo.Bold),l.decorations.has("italic")&&(d|=Xo.Italic),l.decorations.has("underline")&&(d|=Xo.Underline),{content:l.value,offset:a[1],color:c,bgColor:u,fontStyle:d}}))}function zDe(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const n=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${n}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(n=>`${n}${n}`).join("")}80`;const r=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return r?`var(${r[1]}-dim)`:t}function KA(t,e,r={}){const{lang:n="text",theme:s=t.getLoadedThemes()[0]}=r;if(VA(n)||qA(s))return v_(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:i,colorMap:o}=t.setTheme(s);if(n==="ansi")return HDe(i,e,r);const a=t.getLanguage(n);if(r.grammarState){if(r.grammarState.lang!==a.name)throw new Qo(`Grammar state language "${r.grammarState.lang}" does not match highlight language "${a.name}"`);if(!r.grammarState.themes.includes(i.name))throw new Qo(`Grammar state themes "${r.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return VDe(e,a,i,o,r)}function WDe(...t){if(t.length===2)return wp(t[1]);const[e,r,n={}]=t,{lang:s="text",theme:i=e.getLoadedThemes()[0]}=n;if(VA(s)||qA(i))throw new Qo("Plain language does not have grammar state");if(s==="ansi")throw new Qo("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(i),l=e.getLanguage(s);return new Yd(My(r,l,o,a,n).stateStack,l.name,o.name)}function VDe(t,e,r,n,s){const i=My(t,e,r,n,s),o=new Yd(My(t,e,r,n,s).stateStack,e.name,r.name);return __(i.tokens,o),i.tokens}function My(t,e,r,n,s){const i=Oy(r,s),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=s,l=v_(t);let c=s.grammarState?DDe(s.grammarState,r.name)??aC:s.grammarContextCode!=null?My(s.grammarContextCode,e,r,n,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:aC,u=[];const d=[];for(let h=0,f=l.length;h<f;h++){const[b,m]=l[h];if(b===""){u=[],d.push([]);continue}if(o>0&&b.length>=o){u=[],d.push([{content:b,offset:m,color:"",fontStyle:0}]);continue}let g,y,v;s.includeExplanation&&(g=e.tokenizeLine(b,c),y=g.tokens,v=0);const _=e.tokenizeLine2(b,c,a),x=_.tokens.length/2;for(let w=0;w<x;w++){const S=_.tokens[2*w],T=w+1<x?_.tokens[2*w+2]:b.length;if(S===T)continue;const E=_.tokens[2*w+1],C=tc(n[xd.getForeground(E)],i),A=xd.getFontStyle(E),I={content:b.substring(S,T),offset:m+S,color:C,fontStyle:A};if(s.includeExplanation){const P=[];if(s.includeExplanation!=="scopeName")for(const R of r.settings){let F;switch(typeof R.scope){case"string":F=R.scope.split(/,/).map(G=>G.trim());break;case"object":F=R.scope;break;default:continue}P.push({settings:R,selectors:F.map(G=>G.split(/ /))})}I.explanation=[];let D=0;for(;S+D<T;){const R=y[v],F=b.substring(R.startIndex,R.endIndex);D+=F.length,I.explanation.push({content:F,scopes:s.includeExplanation==="scopeName"?GDe(R.scopes):qDe(P,R.scopes)}),v+=1}}u.push(I)}d.push(u),u=[],c=_.ruleStack}return{tokens:d,stateStack:c}}function GDe(t){return t.map(e=>({scopeName:e}))}function qDe(t,e){const r=[];for(let n=0,s=e.length;n<s;n++){const i=e[n];r[n]={scopeName:i,themeMatches:YDe(t,i,e.slice(0,n))}}return r}function AL(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function KDe(t,e,r){if(!AL(t[t.length-1],e))return!1;let n=t.length-2,s=r.length-1;for(;n>=0&&s>=0;)AL(t[n],r[s])&&(n-=1),s-=1;return n===-1}function YDe(t,e,r){const n=[];for(const{selectors:s,settings:i}of t)for(const o of s)if(KDe(o,e,r)){n.push(i);break}return n}function Z7(t,e,r){const n=Object.entries(r.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),s=n.map(l=>{const c=KA(t,e,{...r,theme:l.theme}),u=wp(c),d=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:d}}),i=XDe(...s.map(l=>l.tokens)),o=i[0].map((l,c)=>l.map((u,d)=>{const h={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in r&&r.includeExplanation&&(h.explanation=u.explanation),i.forEach((f,b)=>{const{content:m,explanation:g,offset:y,...v}=f[c][d];h.variants[n[b].color]=v}),h})),a=s[0].state?new Yd(Object.fromEntries(s.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),s[0].state.lang):void 0;return a&&__(o,a),o}function XDe(...t){const e=t.map(()=>[]),r=t.length;for(let n=0;n<t[0].length;n++){const s=t.map(l=>l[n]),i=e.map(()=>[]);e.forEach((l,c)=>l.push(i[c]));const o=s.map(()=>0),a=s.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<r;c++){const u=a[c];u.content.length===l?(i[c].push(u),o[c]+=1,a[c]=s[c][o[c]]):(i[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return e}function jy(t,e,r){let n,s,i,o,a,l;if("themes"in r){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-"}=r,d=Object.entries(r.themes).filter(g=>g[1]).map(g=>({color:g[0],theme:g[1]})).sort((g,y)=>g.color===c?-1:y.color===c?1:0);if(d.length===0)throw new Qo("`themes` option must not be empty");const h=Z7(t,e,r);if(l=wp(h),c&&!d.find(g=>g.color===c))throw new Qo(`\`themes\` option must contain the defaultColor key \`${c}\``);const f=d.map(g=>t.getTheme(g.theme)),b=d.map(g=>g.color);i=h.map(g=>g.map(y=>JDe(y,b,u,c))),l&&__(i,l);const m=d.map(g=>Oy(g.theme,r));s=d.map((g,y)=>(y===0&&c?"":`${u+g.color}:`)+(tc(f[y].fg,m[y])||"inherit")).join(";"),n=d.map((g,y)=>(y===0&&c?"":`${u+g.color}-bg:`)+(tc(f[y].bg,m[y])||"inherit")).join(";"),o=`shiki-themes ${f.map(g=>g.name).join(" ")}`,a=c?void 0:[s,n].join(";")}else if("theme"in r){const c=Oy(r.theme,r);i=KA(t,e,r);const u=t.getTheme(r.theme);n=tc(u.bg,c),s=tc(u.fg,c),o=u.name,l=wp(i)}else throw new Qo("Invalid options, either `theme` or `themes` must be provided");return{tokens:i,fg:s,bg:n,themeName:o,rootStyle:a,grammarState:l}}function JDe(t,e,r,n){const s={content:t.content,explanation:t.explanation,offset:t.offset},i=e.map(l=>Y7(t.variants[l])),o=new Set(i.flatMap(l=>Object.keys(l))),a={};return i.forEach((l,c)=>{for(const u of o){const d=l[u]||"inherit";if(c===0&&n)a[u]=d;else{const h=u==="color"?"":u==="background-color"?"-bg":`-${u}`,f=r+e[c]+(u==="color"?"":h);a[f]=d}}}),s.htmlStyle=a,s}function Fy(t,e,r,n={meta:{},options:r,codeToHast:(s,i)=>Fy(t,s,i),codeToTokens:(s,i)=>jy(t,s,i)}){let s=e;for(const f of Ly(r))s=f.preprocess?.call(n,s,r)||s;let{tokens:i,fg:o,bg:a,themeName:l,rootStyle:c,grammarState:u}=jy(t,s,r);const{mergeWhitespaces:d=!0}=r;d===!0?i=QDe(i):d==="never"&&(i=eOe(i));const h={...n,get source(){return s}};for(const f of Ly(r))i=f.tokens?.call(h,i)||i;return ZDe(i,{...r,fg:o,bg:a,themeName:l,rootStyle:c},h,u)}function ZDe(t,e,r,n=wp(t)){const s=Ly(e),i=[],o={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e;let c={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([b])=>!b.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:i};const d=[],h={...r,structure:a,addClassToHast:q7,get source(){return r.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return c},get code(){return u},get lines(){return d}};if(t.forEach((b,m)=>{m&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&i.push({type:"text",value:`
`}));let g={type:"element",tagName:"span",properties:{class:"line"},children:[]},y=0;for(const v of b){let _={type:"element",tagName:"span",properties:{...v.htmlAttrs},children:[{type:"text",value:v.content}]};v.htmlStyle;const x=IDe(v.htmlStyle||Y7(v));x&&(_.properties.style=x);for(const w of s)_=w?.span?.call(h,_,m+1,y,g,v)||_;a==="inline"?o.children.push(_):a==="classic"&&g.children.push(_),y+=v.content.length}if(a==="classic"){for(const v of s)g=v?.line?.call(h,g,m+1)||g;d.push(g),i.push(g)}}),a==="classic"){for(const b of s)u=b?.code?.call(h,u)||u;c.children.push(u);for(const b of s)c=b?.pre?.call(h,c)||c;o.children.push(c)}let f=o;for(const b of s)f=b?.root?.call(h,f)||f;return n&&__(f,n),f}function QDe(t){return t.map(e=>{const r=[];let n="",s=0;return e.forEach((i,o)=>{const l=!(i.fontStyle&&i.fontStyle&Xo.Underline);l&&i.content.match(/^\s+$/)&&e[o+1]?(s||(s=i.offset),n+=i.content):n?(l?r.push({...i,offset:s,content:n+i.content}):r.push({content:n,offset:s},i),s=0,n=""):r.push(i)}),r})}function eOe(t){return t.map(e=>e.flatMap(r=>{if(r.content.match(/^\s+$/))return r;const n=r.content.match(/^(\s*)(.*?)(\s*)$/);if(!n)return r;const[,s,i,o]=n;if(!s&&!o)return r;const a=[{...r,offset:r.offset+s.length,content:i}];return s&&a.unshift({content:s,offset:r.offset}),o&&a.push({content:o,offset:r.offset+s.length+i.length}),a}))}function tOe(t,e,r){const n={meta:{},options:r,codeToHast:(i,o)=>Fy(t,i,o),codeToTokens:(i,o)=>jy(t,i,o)};let s=CDe(Fy(t,e,r,n));for(const i of Ly(r))s=i.postprocess?.call(n,s,r)||s;return s}const RL={light:"#333333",dark:"#bbbbbb"},PL={light:"#fffffe",dark:"#1e1e1e"},IL="__shiki_resolved";function YA(t){if(t?.[IL])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:r,fg:n}=e;if(!r||!n){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(n=a.settings.foreground),a?.settings?.background&&(r=a.settings.background),!n&&e?.colors?.["editor.foreground"]&&(n=e.colors["editor.foreground"]),!r&&e?.colors?.["editor.background"]&&(r=e.colors["editor.background"]),n||(n=e.type==="light"?RL.light:RL.dark),r||(r=e.type==="light"?PL.light:PL.dark),e.fg=n,e.bg=r}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const i=new Map;function o(a){if(i.has(a))return i.get(a);s+=1;const l=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?o(a):(i.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const u={...a,settings:{...a.settings}};if(l){const d=o(a.settings.foreground);e.colorReplacements[d]=a.settings.foreground,u.settings.foreground=d}if(c){const d=o(a.settings.background);e.colorReplacements[d]=a.settings.background,u.settings.background=d}return u});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=o(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,IL,{enumerable:!1,writable:!1,value:!0}),e}async function Q7(t){return Array.from(new Set((await Promise.all(t.filter(e=>!GA(e)).map(async e=>await K7(e).then(r=>Array.isArray(r)?r:[r])))).flat()))}async function eW(t){return(await Promise.all(t.map(async r=>G7(r)?null:YA(await K7(r))))).filter(r=>!!r)}class rOe extends CNe{constructor(e,r,n,s={}){super(e),this._resolver=e,this._themes=r,this._langs=n,this._alias=s,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const r=YA(e);return r.name&&(this._resolvedThemes.set(r.name,r),this._loadedThemesCache=null),r}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let r=this._textmateThemeCache.get(e);r||(r=Ry.createFromRawTheme(e),this._textmateThemeCache.set(e,r)),this._syncRegistry.setTheme(r)}getGrammar(e){if(this._alias[e]){const r=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],r.has(e))throw new Wn(`Circular alias \`${Array.from(r).join(" -> ")} -> ${e}\``);r.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const r=new Set([...this._langMap.values()].filter(i=>i.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const n={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,n);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(i=>{this._alias[i]=e.name}),this._loadedLanguagesCache=null,r.size)for(const i of r)this._resolvedGrammars.delete(i.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(i.scopeName),this._syncRegistry?._grammars?.delete(i.scopeName),this.loadLanguage(this._langMap.get(i.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const r=Array.from(this._langGraph.entries()),n=r.filter(([s,i])=>!i);if(n.length){const s=r.filter(([i,o])=>o&&o.embeddedLangs?.some(a=>n.map(([l])=>l).includes(a))).filter(i=>!n.includes(i));throw new Wn(`Missing languages ${n.map(([i])=>`\`${i}\``).join(", ")}, required by ${s.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[s,i]of r)this._resolver.addLanguage(i);for(const[s,i]of r)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const r of e.embeddedLangs)this._langGraph.set(r,this._langMap.get(r))}}class nOe{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,r){this._onigLib={createOnigScanner:n=>e.createScanner(n),createOnigString:n=>e.createString(n)},r.forEach(n=>this.addLanguage(n))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(r=>{this._langs.set(r,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(r=>{this._injections.get(r)||this._injections.set(r,[]),this._injections.get(r).push(e.scopeName)})}getInjections(e){const r=e.split(".");let n=[];for(let s=1;s<=r.length;s++){const i=r.slice(0,s).join(".");n=[...n,...this._injections.get(i)||[]]}return n}}let Eh=0;function sOe(t){Eh+=1,t.warnings!==!1&&Eh>=10&&Eh%10===0&&console.warn(`[Shiki] ${Eh} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Wn("`engine` option is required for synchronous mode");const r=(t.langs||[]).flat(1),n=(t.themes||[]).flat(1).map(YA),s=new nOe(t.engine,r),i=new rOe(s,n,r,t.langAlias);let o;function a(v){g();const _=i.getGrammar(typeof v=="string"?v:v.name);if(!_)throw new Wn(`Language \`${v}\` not found, you may need to load it first`);return _}function l(v){if(v==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};g();const _=i.getTheme(v);if(!_)throw new Wn(`Theme \`${v}\` not found, you may need to load it first`);return _}function c(v){g();const _=l(v);o!==v&&(i.setTheme(_),o=v);const x=i.getColorMap();return{theme:_,colorMap:x}}function u(){return g(),i.getLoadedThemes()}function d(){return g(),i.getLoadedLanguages()}function h(...v){g(),i.loadLanguages(v.flat(1))}async function f(...v){return h(await Q7(v))}function b(...v){g();for(const _ of v.flat(1))i.loadTheme(_)}async function m(...v){return g(),b(await eW(v))}function g(){if(e)throw new Wn("Shiki instance has been disposed")}function y(){e||(e=!0,i.dispose(),Eh-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:u,getLoadedLanguages:d,loadLanguage:f,loadLanguageSync:h,loadTheme:m,loadThemeSync:b,dispose:y,[Symbol.dispose]:y}}async function iOe(t={}){t.loadWasm;const[e,r,n]=await Promise.all([eW(t.themes||[]),Q7(t.langs||[]),t.engine||C7(t.loadWasm||BIe())]);return sOe({...t,themes:e,langs:r,engine:n})}async function oOe(t={}){const e=await iOe(t);return{getLastGrammarState:(...r)=>WDe(e,...r),codeToTokensBase:(r,n)=>KA(e,r,n),codeToTokensWithThemes:(r,n)=>Z7(e,r,n),codeToTokens:(r,n)=>jy(e,r,n),codeToHast:(r,n)=>Fy(e,r,n),codeToHtml:(r,n)=>tOe(e,r,n),...e,getInternalContext:()=>e}}function aOe(t,e,r){let n,s,i;{const a=t;n=a.langs,s=a.themes,i=a.engine}async function o(a){function l(f){if(typeof f=="string"){if(GA(f))return[];const b=n[f];if(!b)throw new Qo(`Language \`${f}\` is not included in this bundle. You may want to load it from external source.`);return b}return f}function c(f){if(G7(f))return"none";if(typeof f=="string"){const b=s[f];if(!b)throw new Qo(`Theme \`${f}\` is not included in this bundle. You may want to load it from external source.`);return b}return f}const u=(a.themes??[]).map(f=>c(f)),d=(a.langs??[]).map(f=>l(f)),h=await oOe({engine:a.engine??i(),...a,themes:u,langs:d});return{...h,loadLanguage(...f){return h.loadLanguage(...f.map(l))},loadTheme(...f){return h.loadTheme(...f.map(c))}}}return o}function lOe(t){let e;async function r(n={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...n.themes||[]),s.loadLanguage(...n.langs||[])]),s}else return e=t({...n,themes:n.themes||[],langs:n.langs||[]}),e}return r}function cOe(t){const e=lOe(t);return{getSingletonHighlighter(r){return e(r)},async codeToHtml(r,n){return(await e({langs:[n.lang],themes:"theme"in n?[n.theme]:Object.values(n.themes)})).codeToHtml(r,n)},async codeToHast(r,n){return(await e({langs:[n.lang],themes:"theme"in n?[n.theme]:Object.values(n.themes)})).codeToHast(r,n)},async codeToTokens(r,n){return(await e({langs:[n.lang],themes:"theme"in n?[n.theme]:Object.values(n.themes)})).codeToTokens(r,n)},async codeToTokensBase(r,n){return(await e({langs:[n.lang],themes:[n.theme]})).codeToTokensBase(r,n)},async codeToTokensWithThemes(r,n){return(await e({langs:[n.lang],themes:Object.values(n.themes).filter(Boolean)})).codeToTokensWithThemes(r,n)},async getLastGrammarState(r,n){return(await e({langs:[n.lang],themes:[n.theme]})).getLastGrammarState(r,n)}}}const XA=aOe({langs:E7,themes:xIe,engine:()=>C7(Z(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:uOe}=cOe(XA);function dOe(t,e){if(t===null)return{linesAdded:e.split(`
`).length,linesRemoved:0};const r=t.split(`
`),n=e.split(`
`),s=new Set(r),i=new Set(n);let o=0,a=0;for(const l of n)s.has(l)||o++;for(const l of r)i.has(l)||a++;return{linesAdded:o,linesRemoved:a}}function hOe(t){const e=t.split(".").pop()?.toLowerCase()||"",r=t.split("/").pop()?.toLowerCase()||"";if(r==="package.json"||r==="package-lock.json"||r==="pnpm-lock.yaml")return"i-ph:package";if(r==="tsconfig.json"||r==="jsconfig.json"||r===".gitignore"||r===".env"||r.startsWith("."))return"i-ph:gear";if(r==="dockerfile"||r==="docker-compose.yml"||r==="docker-compose.yaml")return"i-ph:cube";switch(e){case"tsx":case"jsx":return"i-ph:atom";case"ts":case"mts":case"cts":return"i-ph:file-ts";case"js":case"mjs":case"cjs":return"i-ph:file-js";case"css":return"i-ph:file-css";case"scss":case"sass":case"less":return"i-ph:paint-brush";case"html":case"htm":return"i-ph:file-html";case"xml":case"svg":return"i-ph:code";case"json":return"i-ph:brackets-curly";case"yaml":case"yml":return"i-ph:list-dashes";case"toml":return"i-ph:sliders";case"md":case"mdx":return"i-ph:markdown-logo";case"txt":return"i-ph:file-text";case"png":case"jpg":case"jpeg":case"gif":case"webp":case"ico":return"i-ph:image";case"woff":case"woff2":case"ttf":case"otf":case"eot":return"i-ph:text-aa";case"py":return"i-ph:file-py";case"rs":return"i-ph:gear-six";case"go":return"i-ph:code";case"rb":return"i-ph:diamond";case"php":return"i-ph:code";case"java":return"i-ph:coffee";case"c":case"cpp":case"h":case"hpp":return"i-ph:code";case"sh":case"bash":case"zsh":return"i-ph:terminal";case"bat":case"cmd":case"ps1":return"i-ph:terminal-window";case"lock":return"i-ph:lock-simple";default:return"i-ph:file"}}function fOe(t){switch(t.split(".").pop()?.toLowerCase()||""){case"tsx":case"jsx":return"text-cyan-400";case"ts":case"mts":case"cts":return"text-blue-400";case"js":case"mjs":case"cjs":return"text-yellow-400";case"css":case"scss":case"sass":case"less":return"text-pink-400";case"html":case"htm":return"text-orange-400";case"json":case"yaml":case"yml":return"text-green-400";case"md":case"mdx":return"text-white/70";case"py":return"text-yellow-300";default:return"text-white/50"}}function pOe(t){switch(t.split(".").pop()?.toLowerCase()||""){case"tsx":return"tsx";case"jsx":return"jsx";case"ts":case"mts":case"cts":return"typescript";case"js":case"mjs":case"cjs":return"javascript";case"css":return"css";case"scss":case"sass":return"scss";case"html":case"htm":return"html";case"json":return"json";case"yaml":case"yml":return"yaml";case"md":case"mdx":return"markdown";case"py":return"python";case"sh":case"bash":case"zsh":return"shell";default:return"plaintext"}}function mOe(t,e=40){const r=t.replace(/^\/home\/project\//,"");if(r.length<=e)return r;const n=r.split("/"),s=n.pop()||"";if(s.length>=e-3)return"..."+s.slice(-(e-3));const i=e-s.length-4;let o=n.join("/");return o.length>i&&(o="..."+o.slice(-i)),o+"/"+s}const tW={langs:["shell","typescript","javascript","tsx","jsx","css","html","json","markdown","python"],themes:["light-plus","dark-plus"]},gOe=await XA(tW),bOe=k.memo(({artifactId:t})=>{const e=k.useRef(!1),[r,n]=k.useState(!1),[s,i]=k.useState(!1),a=He(Pe.artifacts)[t],l=He(Fr(a.runner.actions,d=>Object.values(d).filter(h=>h.type!=="supabase"&&!(h.type==="shell"&&h.content?.includes("supabase"))))),c=()=>{e.current=!0,n(!r)};k.useEffect(()=>{if(l.length&&!r&&!e.current&&n(!0),l.length!==0&&a.type==="bundled"){const d=!l.find(h=>h.status!=="complete"&&!(h.type==="start"&&h.status==="running"));s!==d&&i(d)}},[l,a.type,s]);const u=a?.type==="bundled"?s?a.id==="restored-project-setup"?"Project Restored":"Project Created":a.id==="restored-project-setup"?"Restoring Project...":"Creating Project...":a?.title;return p.jsx(p.Fragment,{children:p.jsxs("div",{className:"artifact border border-white/10 flex flex-col overflow-hidden rounded-xl w-full transition-all duration-150 bg-gradient-to-b from-[#1a2332] to-[#131a24]",children:[p.jsxs("button",{className:"flex items-center justify-between w-full px-4 py-3 hover:bg-white/5 transition-colors bg-white/2",onClick:c,children:[p.jsxs("div",{className:"flex items-center gap-2.5",children:[p.jsx("div",{className:"i-ph:wrench-duotone text-blue-400 text-lg"}),p.jsxs("span",{className:"text-sm text-white/90",children:["Used tools ",l.length>0&&p.jsxs("span",{className:"text-white/50",children:[l.length," times"]})]})]}),p.jsx("div",{className:ye("transition-transform duration-200 text-white/40",r?"rotate-180":""),children:p.jsx("div",{className:"i-ph:caret-down"})})]}),p.jsx(Nr,{children:r&&l.length>0&&p.jsxs(rt.div,{className:"actions",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:Dn},children:[p.jsxs("div",{className:"px-3 py-2 border-t border-bolt-elements-borderColor bg-bolt-elements-background-depth-2",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("div",{className:"i-ph:list-checks text-bolt-elements-textTertiary text-xs"}),p.jsx("span",{className:"text-xs text-bolt-elements-textSecondary",children:"To-dos"})]}),p.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary",children:[l.filter(d=>d.status==="complete").length," of ",l.length," Done"]})]}),p.jsx("div",{className:"h-0.5 bg-bolt-elements-borderColor rounded-full overflow-hidden",children:p.jsx(rt.div,{className:"h-full bg-green-500",initial:{width:0},animate:{width:`${l.filter(d=>d.status==="complete").length/l.length*100}%`},transition:{duration:.3,ease:"easeOut"}})})]}),p.jsx("div",{className:"px-3 py-2 bg-bolt-elements-background-depth-1",children:p.jsx(_Oe,{actions:l})}),p.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2 border-t border-bolt-elements-borderColor hover:bg-bolt-elements-background-depth-3 transition-colors group bg-bolt-elements-background-depth-2",onClick:()=>{const d=Pe.showWorkbench.get();Pe.showWorkbench.set(!d)},children:[p.jsx("div",{className:"i-ph:code-duotone text-bolt-elements-button-primary-background text-base"}),p.jsxs("div",{className:"flex-1 text-left",children:[p.jsx("div",{className:"text-xs text-bolt-elements-textPrimary",children:u}),p.jsx("div",{className:"text-xs text-bolt-elements-textTertiary",children:"Click to open Workbench"})]}),p.jsx("div",{className:"i-ph:pencil-simple text-bolt-elements-textTertiary group-hover:text-bolt-elements-textSecondary transition-colors text-xs"})]})]})}),a.type==="bundled"&&p.jsxs("div",{className:"flex items-center gap-2.5 px-4 py-3 border-t border-white/8",children:[p.jsx("div",{className:ye("text-lg",xOe(s?"complete":"running")),children:s?p.jsx("div",{className:"i-ph:check-circle-fill"}):p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg"})}),p.jsx("div",{className:"text-white/90 text-sm",children:s?a.id==="restored-project-setup"?"Restore files from snapshot":"Initial files created":"Creating initial files"})]})]})})});function rW({className:t,code:e,language:r="shell",maxLines:n}){const s=k.useMemo(()=>{if(n&&e){const o=e.split(`
`);if(o.length>n)return o.slice(0,n).join(`
`)+`
... (${o.length-n} more lines)`}return e},[e,n]),i=tW.langs.includes(r)?r:"shell";return p.jsx("div",{className:ye("text-xs overflow-x-auto",t),dangerouslySetInnerHTML:{__html:gOe.codeToHtml(s||"",{lang:i,theme:"dark-plus"})}})}function yOe({classsName:t,code:e}){return p.jsx(rW,{className:t,code:e,language:"shell"})}const vOe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function nW(t){Pe.currentView.get()!=="code"&&Pe.currentView.set("code"),Pe.setSelectedFile(`${us}/${t}`)}const _Oe=k.memo(({actions:t})=>{const[e,r]=k.useState(null);return p.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:p.jsx("div",{className:"space-y-1",children:t.map((n,s)=>{const{status:i,type:o,content:a}=n,l=i==="complete",c=i==="running",u=i==="failed"||i==="aborted",d=e===s;let h="",f="",b="",m="",g=null,y=null,v="plaintext",_=!1;if(o==="file"){const w=n.filePath||"";f=mOe(w),b=hOe(w),m=fOe(w),v=pOe(w);const S=DT(w);S?(g=dOe(S.originalContent,S.newContent),y=S.newContent,_=S.type==="modify",h=S.type==="create"?"Create":"Edit"):(n.content&&(g={linesAdded:n.content.split(`
`).length,linesRemoved:0},y=n.content),h="Create")}else o==="shell"?h="Run command":o==="start"&&(h="Start Application");const x=o==="file"&&y||(o==="shell"||o==="start")&&a;return p.jsxs(rt.div,{variants:vOe,initial:"hidden",animate:"visible",transition:{duration:.2,ease:Dn},children:[p.jsxs("button",{onClick:()=>{x?r(d?null:s):o==="file"&&nW(n.filePath)},className:ye("w-full flex items-center gap-2 px-2.5 py-1.5 rounded-md transition-all duration-150","bg-bolt-elements-background-depth-2 hover:bg-bolt-elements-background-depth-3",d&&"ring-1 ring-bolt-elements-borderColor"),children:[p.jsx("div",{className:ye("w-4 h-4 rounded-full flex items-center justify-center flex-shrink-0",l?"bg-green-500 text-white":c?"bg-blue-500":u?"bg-red-500 text-white":"border border-bolt-elements-borderColor"),children:l?p.jsx("div",{className:"i-ph:check-bold text-[10px]"}):c?p.jsx("div",{className:"i-svg-spinners:ring-resize text-white text-[10px]"}):u?p.jsx("div",{className:"i-ph:x-bold text-[10px]"}):null}),o==="file"&&b&&p.jsx("div",{className:ye(b,m,"text-sm flex-shrink-0")}),p.jsx("span",{className:"text-xs text-bolt-elements-textSecondary flex-shrink-0",children:h}),o==="file"&&f&&p.jsx("span",{className:"text-xs font-medium text-bolt-elements-textPrimary truncate",children:f}),o==="file"&&_&&p.jsx("div",{className:"i-ph:pencil-simple text-amber-400/80 text-xs flex-shrink-0"}),o==="file"&&g&&(g.linesAdded>0||g.linesRemoved>0)&&p.jsxs("span",{className:"flex items-center gap-1 text-xs ml-auto",children:[g.linesAdded>0&&p.jsxs("span",{className:"text-green-400",children:["+",g.linesAdded]}),g.linesRemoved>0&&p.jsxs("span",{className:"text-red-400",children:["-",g.linesRemoved]})]}),x&&p.jsx("div",{className:ye("transition-transform duration-200 text-bolt-elements-textTertiary",!g&&"ml-auto",d?"rotate-180":""),children:p.jsx("div",{className:"i-ph:caret-down text-[14px]"})})]}),p.jsx(Nr,{children:d&&p.jsx(rt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:p.jsx("div",{className:"mt-1.5 p-2 rounded-md bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor max-h-[200px] overflow-auto",children:o==="file"&&y?p.jsx(rW,{code:y,language:v,maxLines:25,className:"opacity-90"}):p.jsx(yOe,{classsName:"opacity-80",code:a||""})})})})]},s)})})})});function xOe(t){switch(t){case"pending":return"text-bolt-elements-textTertiary";case"running":return"text-bolt-elements-loader-progress";case"complete":return"text-bolt-elements-icon-success";case"aborted":return"text-bolt-elements-textSecondary";case"failed":return"text-bolt-elements-icon-error";default:return}}const wOe="_CopyButtonContainer_m1azx_1",SOe={CopyButtonContainer:wOe},NL=Qt("CodeBlock"),EOe=k.memo(({className:t,code:e,language:r="plaintext",theme:n="dark-plus",disableCopy:s=!1})=>{const[i,o]=k.useState(void 0),[a,l]=k.useState(!1),c=()=>{a||(navigator.clipboard.writeText(e),l(!0),setTimeout(()=>{l(!1)},2e3))};return k.useEffect(()=>{let u=r;r&&!GA(r)&&!(r in E7)&&(NL.warn(`Unsupported language '${r}', falling back to plaintext`),u="plaintext"),NL.trace(`Language = ${u}`),(async()=>{o(await uOe(e,{lang:u,theme:n}))})()},[e,r,n]),p.jsxs("div",{className:ye("relative group text-left",t),children:[p.jsx("div",{className:ye(SOe.CopyButtonContainer,"bg-transparant absolute top-[10px] right-[10px] rounded-md z-10 text-lg flex items-center justify-center opacity-0 group-hover:opacity-100",{"rounded-l-0 opacity-100":a}),children:!s&&p.jsx("button",{className:ye("flex items-center bg-accent-500 p-[6px] justify-center before:bg-white before:rounded-l-md before:text-gray-500 before:border-r before:border-gray-300 rounded-md transition-theme",{"before:opacity-0":!a,"before:opacity-100":a}),title:"Copy Code",onClick:()=>c(),children:p.jsx("div",{className:"i-ph:clipboard-text-duotone"})})}),p.jsx("div",{dangerouslySetInnerHTML:{__html:i??""}})]})}),COe="_MarkdownContent_ufqz8_1",TOe={MarkdownContent:COe},kOe=({title:t,children:e})=>{const[r,n]=k.useState(!1);return p.jsxs("div",{onClick:()=>n(!r),className:`
        bg-bolt-elements-background-depth-2
        shadow-md 
        rounded-lg 
        cursor-pointer 
        transition-all 
        duration-300
        ${r?"max-h-96":"max-h-13"}
        overflow-auto
        border border-bolt-elements-borderColor
      `,children:[p.jsxs("div",{className:"p-4 flex items-center gap-4 rounded-lg  text-bolt-elements-textSecondary font-medium leading-5 text-sm  border border-bolt-elements-borderColor",children:[p.jsx("div",{className:"i-ph:brain-thin text-2xl"}),p.jsxs("div",{className:"div",children:[p.jsxs("span",{children:[" ",t]})," ",!r&&p.jsx("span",{className:"text-bolt-elements-textTertiary",children:" - Click to expand"})]})]}),p.jsx("div",{className:`
        transition-opacity 
        duration-300
        p-4 
        rounded-lg 
        ${r?"opacity-100":"opacity-0"}
      `,children:e})]})},s0=Qt("MarkdownComponent"),By=k.memo(({children:t,html:e=!1,limitedMarkdown:r=!1,append:n,setChatMode:s,model:i,provider:o})=>{s0.trace("Render");const a=k.useMemo(()=>({div:({className:l,children:c,node:u,...d})=>{const h=u?.properties;if(l?.includes("__boltArtifact__")){const f=u?.properties.dataMessageId,b=u?.properties.dataArtifactId;return f||s0.error(`Invalid message id ${f}`),b||s0.error(`Invalid artifact id ${b}`),p.jsx(bOe,{_messageId:f,artifactId:b})}if(l?.includes("__boltSelectedElement__")){const f=u?.properties.dataMessageId,b=u?.properties.dataElement;let m=null;if(b)try{m=JSON.parse(b)}catch(g){console.error("Failed to parse element data:",g)}return f||s0.error(`Invalid message id ${f}`),p.jsxs("div",{className:"bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor rounded-lg p-3 my-2",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("span",{className:"text-xs font-mono bg-bolt-elements-background-depth-2 px-2 py-1 rounded text-bolt-elements-textTer",children:m?.tagName}),m?.className&&p.jsxs("span",{className:"text-xs text-bolt-elements-textSecondary",children:[".",m.className]})]}),p.jsx("code",{className:"block text-sm !text-bolt-elements-textSecondary !bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor p-2 rounded",children:m?.displayText})]})}return l?.includes("__boltThought__")?p.jsx(kOe,{title:"Thought process",children:c}):l?.includes("__boltQuickAction__")||h?.dataBoltQuickAction?p.jsx("div",{className:"flex items-center gap-2 flex-wrap mt-3.5",children:c}):p.jsx("div",{className:l,...d,children:c})},pre:l=>{const{children:c,node:u,...d}=l,[h]=u?.children??[];if(h&&h.type==="element"&&h.tagName==="code"&&h.children[0].type==="text"){const{className:f,...b}=h.properties,[,m="plaintext"]=/language-(\w+)/.exec(String(f)||"")??[];return p.jsx(EOe,{code:h.children[0].value,language:m,...b})}return p.jsx("pre",{...d,children:c})},button:({node:l,children:c,...u})=>{const d=l?.properties;if(d?.class?.toString().includes("__boltQuickAction__")||d?.dataBoltQuickAction==="true"){const h=d["data-type"]||d.dataType,f=d["data-message"]||d.dataMessage,b=d["data-path"]||d.dataPath,m=d["data-href"]||d.dataHref,v={file:"i-ph:file",message:"i-ph:chats",implement:"i-ph:code",link:"i-ph:link"}[typeof h=="string"?h:""]??"i-ph:question";return p.jsxs("button",{className:"rounded-md justify-center px-3 py-1.5 text-xs bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent opacity-90 hover:opacity-100 flex items-center gap-2 cursor-pointer","data-type":h,"data-message":f,"data-path":b,"data-href":m,onClick:()=>{if(h==="file")nW(b);else if(h==="message"&&n)n({id:`quick-action-message-${Date.now()}`,content:[{type:"text",text:`[Model: ${i}]

[Provider: ${o?.name}]

${f}`}],role:"user"}),console.log("Message appended:",f);else if(h==="implement"&&n&&s)s("build"),n({id:`quick-action-implement-${Date.now()}`,content:[{type:"text",text:`[Model: ${i}]

[Provider: ${o?.name}]

${f}`}],role:"user"});else if(h==="link"&&typeof m=="string")try{const _=new URL(m,window.location.origin);window.open(_.toString(),"_blank","noopener,noreferrer")}catch(_){console.error("Invalid URL:",m,_)}},children:[p.jsx("div",{className:`text-lg ${v}`}),c]})}return p.jsx("button",{...u,children:c})}}),[]);return p.jsx(NTe,{allowedElements:w7,className:TOe.MarkdownContent,components:a,remarkPlugins:mIe(r),rehypePlugins:gIe(e),children:AOe(t)})}),AOe=t=>{if(!t||!t.includes("__boltArtifact__"))return t;const e=t.split(`
`),r=e.findIndex(n=>n.includes("__boltArtifact__"));return r===-1?t:(r>0&&e[r-1]?.trim().match(/^```\w*$/)&&(e[r-1]=""),r<e.length-1&&e[r+1]?.trim().match(/^```$/)&&(e[r+1]=""),e.join(`
`))};var x_="Popover",[sW]=ai(x_,[jd]),mm=jd(),[ROe,Cl]=sW(x_),iW=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,a=mm(e),l=k.useRef(null),[c,u]=k.useState(!1),[d,h]=yl({prop:n,defaultProp:s??!1,onChange:i,caller:x_});return p.jsx(ck,{...a,children:p.jsx(ROe,{scope:e,contentId:yo(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:k.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:c,onCustomAnchorAdd:k.useCallback(()=>u(!0),[]),onCustomAnchorRemove:k.useCallback(()=>u(!1),[]),modal:o,children:r})})};iW.displayName=x_;var oW="PopoverAnchor",aW=k.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Cl(oW,r),i=mm(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return k.useEffect(()=>(o(),()=>a()),[o,a]),p.jsx(kv,{...i,...n,ref:e})});aW.displayName=oW;var lW="PopoverTrigger",cW=k.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Cl(lW,r),i=mm(r),o=Sr(e,s.triggerRef),a=p.jsx(Ft.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":mW(s.open),...n,ref:o,onClick:it(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:p.jsx(kv,{asChild:!0,...i,children:a})});cW.displayName=lW;var JA="PopoverPortal",[POe,IOe]=sW(JA,{forceMount:void 0}),uW=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,i=Cl(JA,e);return p.jsx(POe,{scope:e,forceMount:r,children:p.jsx(Jn,{present:r||i.open,children:p.jsx(zp,{asChild:!0,container:s,children:n})})})};uW.displayName=JA;var wd="PopoverContent",dW=k.forwardRef((t,e)=>{const r=IOe(wd,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,i=Cl(wd,t.__scopePopover);return p.jsx(Jn,{present:n||i.open,children:i.modal?p.jsx(DOe,{...s,ref:e}):p.jsx(OOe,{...s,ref:e})})});dW.displayName=wd;var NOe=ld("PopoverContent.RemoveScroll"),DOe=k.forwardRef((t,e)=>{const r=Cl(wd,t.__scopePopover),n=k.useRef(null),s=Sr(e,n),i=k.useRef(!1);return k.useEffect(()=>{const o=n.current;if(o)return CT(o)},[]),p.jsx(fv,{as:NOe,allowPinchZoom:!0,children:p.jsx(hW,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(t.onCloseAutoFocus,o=>{o.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:it(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:it(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),OOe=k.forwardRef((t,e)=>{const r=Cl(wd,t.__scopePopover),n=k.useRef(!1),s=k.useRef(!1);return p.jsx(hW,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),hW=k.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=Cl(wd,r),f=mm(r);return ET(),p.jsx(dv,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(Hp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:p.jsx(uk,{"data-state":mW(h.open),role:"dialog",id:h.contentId,...f,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),fW="PopoverClose",LOe=k.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Cl(fW,r);return p.jsx(Ft.button,{type:"button",...n,ref:e,onClick:it(t.onClick,()=>s.onOpenChange(!1))})});LOe.displayName=fW;var MOe="PopoverArrow",pW=k.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=mm(r);return p.jsx(dk,{...s,...n,ref:e})});pW.displayName=MOe;function mW(t){return t?"open":"closed"}var jOe=iW,FOe=aW,BOe=cW,$Oe=uW,UOe=dW,HOe=pW;const zOe=({children:t,trigger:e,side:r,align:n})=>p.jsxs(jOe,{children:[p.jsx(BOe,{asChild:!0,children:e}),p.jsx(FOe,{}),p.jsx($Oe,{children:p.jsxs(UOe,{sideOffset:10,side:r,align:n,className:"bg-bolt-elements-background-depth-2 text-bolt-elements-item-contentAccent p-2 rounded-md shadow-xl z-workbench",children:[t,p.jsx(HOe,{className:"bg-bolt-elements-item-background-depth-2"})]})})]});/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:gW,setPrototypeOf:DL,isFrozen:WOe,getPrototypeOf:VOe,getOwnPropertyDescriptor:GOe}=Object;let{freeze:Yn,seal:ii,create:cC}=Object,{apply:uC,construct:dC}=typeof Reflect<"u"&&Reflect;Yn||(Yn=function(e){return e});ii||(ii=function(e){return e});uC||(uC=function(e,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];return e.apply(r,s)});dC||(dC=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return new e(...n)});const i0=Xn(Array.prototype.forEach),qOe=Xn(Array.prototype.lastIndexOf),OL=Xn(Array.prototype.pop),Ch=Xn(Array.prototype.push),KOe=Xn(Array.prototype.splice),rb=Xn(String.prototype.toLowerCase),Yw=Xn(String.prototype.toString),Xw=Xn(String.prototype.match),Th=Xn(String.prototype.replace),YOe=Xn(String.prototype.indexOf),XOe=Xn(String.prototype.trim),pi=Xn(Object.prototype.hasOwnProperty),$n=Xn(RegExp.prototype.test),kh=JOe(TypeError);function Xn(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return uC(t,e,n)}}function JOe(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return dC(t,r)}}function kt(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rb;DL&&DL(t,null);let n=e.length;for(;n--;){let s=e[n];if(typeof s=="string"){const i=r(s);i!==s&&(WOe(e)||(e[n]=i),s=i)}t[s]=!0}return t}function ZOe(t){for(let e=0;e<t.length;e++)pi(t,e)||(t[e]=null);return t}function Xi(t){const e=cC(null);for(const[r,n]of gW(t))pi(t,r)&&(Array.isArray(n)?e[r]=ZOe(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=Xi(n):e[r]=n);return e}function Ah(t,e){for(;t!==null;){const n=GOe(t,e);if(n){if(n.get)return Xn(n.get);if(typeof n.value=="function")return Xn(n.value)}t=VOe(t)}function r(){return null}return r}const LL=Yn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Jw=Yn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Zw=Yn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),QOe=Yn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Qw=Yn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),eLe=Yn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ML=Yn(["#text"]),jL=Yn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),e1=Yn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),FL=Yn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),o0=Yn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),tLe=ii(/\{\{[\w\W]*|[\w\W]*\}\}/gm),rLe=ii(/<%[\w\W]*|[\w\W]*%>/gm),nLe=ii(/\$\{[\w\W]*/gm),sLe=ii(/^data-[\-\w.\u00B7-\uFFFF]+$/),iLe=ii(/^aria-[\-\w]+$/),bW=ii(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oLe=ii(/^(?:\w+script|data):/i),aLe=ii(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),yW=ii(/^html$/i),lLe=ii(/^[a-z][.\w]*(-[.\w]+)+$/i);var BL=Object.freeze({__proto__:null,ARIA_ATTR:iLe,ATTR_WHITESPACE:aLe,CUSTOM_ELEMENT:lLe,DATA_ATTR:sLe,DOCTYPE_NAME:yW,ERB_EXPR:rLe,IS_ALLOWED_URI:bW,IS_SCRIPT_OR_DATA:oLe,MUSTACHE_EXPR:tLe,TMPLIT_EXPR:nLe});const Rh={element:1,text:3,progressingInstruction:7,comment:8,document:9},cLe=function(){return typeof window>"u"?null:window},uLe=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(n=r.getAttribute(s));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},$L=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function vW(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cLe();const e=lt=>vW(lt);if(e.version="3.3.1",e.removed=[],!t||!t.document||t.document.nodeType!==Rh.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const n=r,s=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:f}=t,b=l.prototype,m=Ah(b,"cloneNode"),g=Ah(b,"remove"),y=Ah(b,"nextSibling"),v=Ah(b,"childNodes"),_=Ah(b,"parentNode");if(typeof o=="function"){const lt=r.createElement("template");lt.content&&lt.content.ownerDocument&&(r=lt.content.ownerDocument)}let x,w="";const{implementation:S,createNodeIterator:T,createDocumentFragment:E,getElementsByTagName:C}=r,{importNode:A}=n;let I=$L();e.isSupported=typeof gW=="function"&&typeof _=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:D,TMPLIT_EXPR:R,DATA_ATTR:F,ARIA_ATTR:G,IS_SCRIPT_OR_DATA:z,ATTR_WHITESPACE:K,CUSTOM_ELEMENT:L}=BL;let{IS_ALLOWED_URI:O}=BL,$=null;const H=kt({},[...LL,...Jw,...Zw,...Qw,...ML]);let U=null;const ee=kt({},[...jL,...e1,...FL,...o0]);let X=Object.seal(cC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ge=null,J=null;const j=Object.seal(cC(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Y=!0,Q=!0,ie=!1,re=!0,pe=!1,M=!0,oe=!1,le=!1,q=!1,V=!1,ae=!1,xe=!1,Te=!0,fe=!1;const ke="user-content-";let Me=!0,Re=!1,de={},be=null;const Se=kt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ze=null;const Ye=kt({},["audio","video","img","source","image","track"]);let ut=null;const at=kt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pt="http://www.w3.org/1998/Math/MathML",er="http://www.w3.org/2000/svg",qt="http://www.w3.org/1999/xhtml";let Tt=qt,gr=!1,ir=null;const Dr=kt({},[pt,er,qt],Yw);let jn=kt({},["mi","mo","mn","ms","mtext"]),Fn=kt({},["annotation-xml"]);const Ee=kt({},["title","style","font","a","script"]);let Ce=null;const Ve=["application/xhtml+xml","text/html"],ct="text/html";let Ke=null,mt=null;const je=r.createElement("form"),yt=function(he){return he instanceof RegExp||he instanceof Function},dt=function(){let he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(mt&&mt===he)){if((!he||typeof he!="object")&&(he={}),he=Xi(he),Ce=Ve.indexOf(he.PARSER_MEDIA_TYPE)===-1?ct:he.PARSER_MEDIA_TYPE,Ke=Ce==="application/xhtml+xml"?Yw:rb,$=pi(he,"ALLOWED_TAGS")?kt({},he.ALLOWED_TAGS,Ke):H,U=pi(he,"ALLOWED_ATTR")?kt({},he.ALLOWED_ATTR,Ke):ee,ir=pi(he,"ALLOWED_NAMESPACES")?kt({},he.ALLOWED_NAMESPACES,Yw):Dr,ut=pi(he,"ADD_URI_SAFE_ATTR")?kt(Xi(at),he.ADD_URI_SAFE_ATTR,Ke):at,ze=pi(he,"ADD_DATA_URI_TAGS")?kt(Xi(Ye),he.ADD_DATA_URI_TAGS,Ke):Ye,be=pi(he,"FORBID_CONTENTS")?kt({},he.FORBID_CONTENTS,Ke):Se,ge=pi(he,"FORBID_TAGS")?kt({},he.FORBID_TAGS,Ke):Xi({}),J=pi(he,"FORBID_ATTR")?kt({},he.FORBID_ATTR,Ke):Xi({}),de=pi(he,"USE_PROFILES")?he.USE_PROFILES:!1,Y=he.ALLOW_ARIA_ATTR!==!1,Q=he.ALLOW_DATA_ATTR!==!1,ie=he.ALLOW_UNKNOWN_PROTOCOLS||!1,re=he.ALLOW_SELF_CLOSE_IN_ATTR!==!1,pe=he.SAFE_FOR_TEMPLATES||!1,M=he.SAFE_FOR_XML!==!1,oe=he.WHOLE_DOCUMENT||!1,V=he.RETURN_DOM||!1,ae=he.RETURN_DOM_FRAGMENT||!1,xe=he.RETURN_TRUSTED_TYPE||!1,q=he.FORCE_BODY||!1,Te=he.SANITIZE_DOM!==!1,fe=he.SANITIZE_NAMED_PROPS||!1,Me=he.KEEP_CONTENT!==!1,Re=he.IN_PLACE||!1,O=he.ALLOWED_URI_REGEXP||bW,Tt=he.NAMESPACE||qt,jn=he.MATHML_TEXT_INTEGRATION_POINTS||jn,Fn=he.HTML_INTEGRATION_POINTS||Fn,X=he.CUSTOM_ELEMENT_HANDLING||{},he.CUSTOM_ELEMENT_HANDLING&&yt(he.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=he.CUSTOM_ELEMENT_HANDLING.tagNameCheck),he.CUSTOM_ELEMENT_HANDLING&&yt(he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),he.CUSTOM_ELEMENT_HANDLING&&typeof he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pe&&(Q=!1),ae&&(V=!0),de&&($=kt({},ML),U=[],de.html===!0&&(kt($,LL),kt(U,jL)),de.svg===!0&&(kt($,Jw),kt(U,e1),kt(U,o0)),de.svgFilters===!0&&(kt($,Zw),kt(U,e1),kt(U,o0)),de.mathMl===!0&&(kt($,Qw),kt(U,FL),kt(U,o0))),he.ADD_TAGS&&(typeof he.ADD_TAGS=="function"?j.tagCheck=he.ADD_TAGS:($===H&&($=Xi($)),kt($,he.ADD_TAGS,Ke))),he.ADD_ATTR&&(typeof he.ADD_ATTR=="function"?j.attributeCheck=he.ADD_ATTR:(U===ee&&(U=Xi(U)),kt(U,he.ADD_ATTR,Ke))),he.ADD_URI_SAFE_ATTR&&kt(ut,he.ADD_URI_SAFE_ATTR,Ke),he.FORBID_CONTENTS&&(be===Se&&(be=Xi(be)),kt(be,he.FORBID_CONTENTS,Ke)),he.ADD_FORBID_CONTENTS&&(be===Se&&(be=Xi(be)),kt(be,he.ADD_FORBID_CONTENTS,Ke)),Me&&($["#text"]=!0),oe&&kt($,["html","head","body"]),$.table&&(kt($,["tbody"]),delete ge.tbody),he.TRUSTED_TYPES_POLICY){if(typeof he.TRUSTED_TYPES_POLICY.createHTML!="function")throw kh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof he.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw kh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=he.TRUSTED_TYPES_POLICY,w=x.createHTML("")}else x===void 0&&(x=uLe(f,s)),x!==null&&typeof w=="string"&&(w=x.createHTML(""));Yn&&Yn(he),mt=he}},Ut=kt({},[...Jw,...Zw,...QOe]),dr=kt({},[...Qw,...eLe]),qr=function(he){let Fe=_(he);(!Fe||!Fe.tagName)&&(Fe={namespaceURI:Tt,tagName:"template"});const nt=rb(he.tagName),or=rb(Fe.tagName);return ir[he.namespaceURI]?he.namespaceURI===er?Fe.namespaceURI===qt?nt==="svg":Fe.namespaceURI===pt?nt==="svg"&&(or==="annotation-xml"||jn[or]):!!Ut[nt]:he.namespaceURI===pt?Fe.namespaceURI===qt?nt==="math":Fe.namespaceURI===er?nt==="math"&&Fn[or]:!!dr[nt]:he.namespaceURI===qt?Fe.namespaceURI===er&&!Fn[or]||Fe.namespaceURI===pt&&!jn[or]?!1:!dr[nt]&&(Ee[nt]||!Ut[nt]):!!(Ce==="application/xhtml+xml"&&ir[he.namespaceURI]):!1},br=function(he){Ch(e.removed,{element:he});try{_(he).removeChild(he)}catch{g(he)}},Qr=function(he,Fe){try{Ch(e.removed,{attribute:Fe.getAttributeNode(he),from:Fe})}catch{Ch(e.removed,{attribute:null,from:Fe})}if(Fe.removeAttribute(he),he==="is")if(V||ae)try{br(Fe)}catch{}else try{Fe.setAttribute(he,"")}catch{}},ts=function(he){let Fe=null,nt=null;if(q)he="<remove></remove>"+he;else{const Ar=Xw(he,/^[\r\n\t ]+/);nt=Ar&&Ar[0]}Ce==="application/xhtml+xml"&&Tt===qt&&(he='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+he+"</body></html>");const or=x?x.createHTML(he):he;if(Tt===qt)try{Fe=new h().parseFromString(or,Ce)}catch{}if(!Fe||!Fe.documentElement){Fe=S.createDocument(Tt,"template",null);try{Fe.documentElement.innerHTML=gr?w:or}catch{}}const en=Fe.body||Fe.documentElement;return he&&nt&&en.insertBefore(r.createTextNode(nt),en.childNodes[0]||null),Tt===qt?C.call(Fe,oe?"html":"body")[0]:oe?Fe.documentElement:en},Po=function(he){return T.call(he.ownerDocument||he,he,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},ci=function(he){return he instanceof d&&(typeof he.nodeName!="string"||typeof he.textContent!="string"||typeof he.removeChild!="function"||!(he.attributes instanceof u)||typeof he.removeAttribute!="function"||typeof he.setAttribute!="function"||typeof he.namespaceURI!="string"||typeof he.insertBefore!="function"||typeof he.hasChildNodes!="function")},ga=function(he){return typeof a=="function"&&he instanceof a};function Sn(lt,he,Fe){i0(lt,nt=>{nt.call(e,he,Fe,mt)})}const ba=function(he){let Fe=null;if(Sn(I.beforeSanitizeElements,he,null),ci(he))return br(he),!0;const nt=Ke(he.nodeName);if(Sn(I.uponSanitizeElement,he,{tagName:nt,allowedTags:$}),M&&he.hasChildNodes()&&!ga(he.firstElementChild)&&$n(/<[/\w!]/g,he.innerHTML)&&$n(/<[/\w!]/g,he.textContent)||he.nodeType===Rh.progressingInstruction||M&&he.nodeType===Rh.comment&&$n(/<[/\w]/g,he.data))return br(he),!0;if(!(j.tagCheck instanceof Function&&j.tagCheck(nt))&&(!$[nt]||ge[nt])){if(!ge[nt]&&Gc(nt)&&(X.tagNameCheck instanceof RegExp&&$n(X.tagNameCheck,nt)||X.tagNameCheck instanceof Function&&X.tagNameCheck(nt)))return!1;if(Me&&!be[nt]){const or=_(he)||he.parentNode,en=v(he)||he.childNodes;if(en&&or){const Ar=en.length;for(let En=Ar-1;En>=0;--En){const ns=m(en[En],!0);ns.__removalCount=(he.__removalCount||0)+1,or.insertBefore(ns,y(he))}}}return br(he),!0}return he instanceof l&&!qr(he)||(nt==="noscript"||nt==="noembed"||nt==="noframes")&&$n(/<\/no(script|embed|frames)/i,he.innerHTML)?(br(he),!0):(pe&&he.nodeType===Rh.text&&(Fe=he.textContent,i0([P,D,R],or=>{Fe=Th(Fe,or," ")}),he.textContent!==Fe&&(Ch(e.removed,{element:he.cloneNode()}),he.textContent=Fe)),Sn(I.afterSanitizeElements,he,null),!1)},rs=function(he,Fe,nt){if(Te&&(Fe==="id"||Fe==="name")&&(nt in r||nt in je))return!1;if(!(Q&&!J[Fe]&&$n(F,Fe))){if(!(Y&&$n(G,Fe))){if(!(j.attributeCheck instanceof Function&&j.attributeCheck(Fe,he))){if(!U[Fe]||J[Fe]){if(!(Gc(he)&&(X.tagNameCheck instanceof RegExp&&$n(X.tagNameCheck,he)||X.tagNameCheck instanceof Function&&X.tagNameCheck(he))&&(X.attributeNameCheck instanceof RegExp&&$n(X.attributeNameCheck,Fe)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(Fe,he))||Fe==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&$n(X.tagNameCheck,nt)||X.tagNameCheck instanceof Function&&X.tagNameCheck(nt))))return!1}else if(!ut[Fe]){if(!$n(O,Th(nt,K,""))){if(!((Fe==="src"||Fe==="xlink:href"||Fe==="href")&&he!=="script"&&YOe(nt,"data:")===0&&ze[he])){if(!(ie&&!$n(z,Th(nt,K,"")))){if(nt)return!1}}}}}}}return!0},Gc=function(he){return he!=="annotation-xml"&&Xw(he,L)},qc=function(he){Sn(I.beforeSanitizeAttributes,he,null);const{attributes:Fe}=he;if(!Fe||ci(he))return;const nt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let or=Fe.length;for(;or--;){const en=Fe[or],{name:Ar,namespaceURI:En,value:ns}=en,ya=Ke(Ar),oh=ns;let ar=Ar==="value"?oh:XOe(oh);if(nt.attrName=ya,nt.attrValue=ar,nt.keepAttr=!0,nt.forceKeepAttr=void 0,Sn(I.uponSanitizeAttribute,he,nt),ar=nt.attrValue,fe&&(ya==="id"||ya==="name")&&(Qr(Ar,he),ar=ke+ar),M&&$n(/((--!?|])>)|<\/(style|title|textarea)/i,ar)){Qr(Ar,he);continue}if(ya==="attributename"&&Xw(ar,"href")){Qr(Ar,he);continue}if(nt.forceKeepAttr)continue;if(!nt.keepAttr){Qr(Ar,he);continue}if(!re&&$n(/\/>/i,ar)){Qr(Ar,he);continue}pe&&i0([P,D,R],Wm=>{ar=Th(ar,Wm," ")});const zm=Ke(he.nodeName);if(!rs(zm,ya,ar)){Qr(Ar,he);continue}if(x&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!En)switch(f.getAttributeType(zm,ya)){case"TrustedHTML":{ar=x.createHTML(ar);break}case"TrustedScriptURL":{ar=x.createScriptURL(ar);break}}if(ar!==oh)try{En?he.setAttributeNS(En,Ar,ar):he.setAttribute(Ar,ar),ci(he)?br(he):OL(e.removed)}catch{Qr(Ar,he)}}Sn(I.afterSanitizeAttributes,he,null)},P_=function lt(he){let Fe=null;const nt=Po(he);for(Sn(I.beforeSanitizeShadowDOM,he,null);Fe=nt.nextNode();)Sn(I.uponSanitizeShadowNode,Fe,null),ba(Fe),qc(Fe),Fe.content instanceof i&&lt(Fe.content);Sn(I.afterSanitizeShadowDOM,he,null)};return e.sanitize=function(lt){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Fe=null,nt=null,or=null,en=null;if(gr=!lt,gr&&(lt="<!-->"),typeof lt!="string"&&!ga(lt))if(typeof lt.toString=="function"){if(lt=lt.toString(),typeof lt!="string")throw kh("dirty is not a string, aborting")}else throw kh("toString is not a function");if(!e.isSupported)return lt;if(le||dt(he),e.removed=[],typeof lt=="string"&&(Re=!1),Re){if(lt.nodeName){const ns=Ke(lt.nodeName);if(!$[ns]||ge[ns])throw kh("root node is forbidden and cannot be sanitized in-place")}}else if(lt instanceof a)Fe=ts("<!---->"),nt=Fe.ownerDocument.importNode(lt,!0),nt.nodeType===Rh.element&&nt.nodeName==="BODY"||nt.nodeName==="HTML"?Fe=nt:Fe.appendChild(nt);else{if(!V&&!pe&&!oe&&lt.indexOf("<")===-1)return x&&xe?x.createHTML(lt):lt;if(Fe=ts(lt),!Fe)return V?null:xe?w:""}Fe&&q&&br(Fe.firstChild);const Ar=Po(Re?lt:Fe);for(;or=Ar.nextNode();)ba(or),qc(or),or.content instanceof i&&P_(or.content);if(Re)return lt;if(V){if(ae)for(en=E.call(Fe.ownerDocument);Fe.firstChild;)en.appendChild(Fe.firstChild);else en=Fe;return(U.shadowroot||U.shadowrootmode)&&(en=A.call(n,en,!0)),en}let En=oe?Fe.outerHTML:Fe.innerHTML;return oe&&$["!doctype"]&&Fe.ownerDocument&&Fe.ownerDocument.doctype&&Fe.ownerDocument.doctype.name&&$n(yW,Fe.ownerDocument.doctype.name)&&(En="<!DOCTYPE "+Fe.ownerDocument.doctype.name+`>
`+En),pe&&i0([P,D,R],ns=>{En=Th(En,ns," ")}),x&&xe?x.createHTML(En):En},e.setConfig=function(){let lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};dt(lt),le=!0},e.clearConfig=function(){mt=null,le=!1},e.isValidAttribute=function(lt,he,Fe){mt||dt({});const nt=Ke(lt),or=Ke(he);return rs(nt,or,Fe)},e.addHook=function(lt,he){typeof he=="function"&&Ch(I[lt],he)},e.removeHook=function(lt,he){if(he!==void 0){const Fe=qOe(I[lt],he);return Fe===-1?void 0:KOe(I[lt],Fe,1)[0]}return OL(I[lt])},e.removeHooks=function(lt){I[lt]=[]},e.removeAllHooks=function(){I=$L()},e}var dLe=vW();const _W={USE_PROFILES:{html:!0},FORBID_TAGS:["style","script","iframe","object","embed","form"],FORBID_ATTR:["style","onmouseover","onclick","onerror","onload"]},hLe={ADD_TAGS:["span","pre","code"],ADD_ATTR:["style","class"]};function fLe(t,e=_W){return bK.isServer?t:dLe.sanitize(t,e)}const UL={clean:fLe,config:{DEFAULT:_W,SHIKI:hLe}},pLe={langs:["json"],themes:["light-plus","dark-plus"]},mLe=await XA(pLe);function HL({className:t,code:e,theme:r}){let n=e;try{if(typeof n=="object")n=JSON.stringify(n,null,2);else if(typeof n=="string")try{const o=JSON.parse(n);n=JSON.stringify(o,null,2)}catch{}}catch(o){du.error("Failed to parse JSON",{error:o})}const s=mLe.codeToHtml(n,{lang:"json",theme:r==="dark"?"dark-plus":"light-plus"}),i=UL.clean(s,UL.config.SHIKI);return p.jsx("div",{className:ye("text-xs rounded-md overflow-hidden mcp-tool-invocation-code p-0 m-0",t),dangerouslySetInnerHTML:{__html:i}})}const gLe=k.memo(({toolInvocations:t,toolCallAnnotations:e,addToolResult:r})=>{const n=He(If),[s,i]=k.useState(!1),o=()=>{i(d=>!d)},a=k.useMemo(()=>t.filter(d=>d.toolInvocation.state==="call"),[t]),l=k.useMemo(()=>t.filter(d=>d.toolInvocation.state==="result"),[t]),c=a.length>0,u=l.length>0;return!c&&!u?null:p.jsxs("div",{className:"tool-invocation border border-bolt-elements-borderColor flex flex-col overflow-hidden rounded-lg w-full transition-border duration-150",children:[p.jsxs("div",{className:"flex",children:[p.jsxs("button",{className:"flex items-stretch bg-bolt-elements-background-depth-2 hover:bg-bolt-elements-artifacts-backgroundHover w-full overflow-hidden",onClick:o,"aria-label":s?"Collapse details":"Expand details",children:[p.jsx("div",{className:"p-2.5",children:p.jsx("div",{className:"i-ph:wrench text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors"})}),p.jsx("div",{className:"p-2.5 w-full text-left",children:p.jsxs("div",{className:"w-full text-bolt-elements-textPrimary font-medium leading-5 text-sm",children:["MCP Tool Invocations"," ",u&&p.jsxs("span",{className:"w-full w-full text-bolt-elements-textSecondary text-xs mt-0.5",children:["(",l.length," tool",u?"s":""," used)"]})]})})]}),p.jsx(Nr,{children:u&&p.jsx(rt.button,{initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.15,ease:Dn},className:"bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover",onClick:o,children:p.jsx("div",{className:"p-2",children:p.jsx("div",{className:`${s?"i-ph:caret-up-bold":"i-ph:caret-down-bold"} text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors`})})})})]}),p.jsxs(Nr,{children:[c&&p.jsxs(rt.div,{className:"details",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:[p.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor h-[1px]"}),p.jsx("div",{className:"px-3 py-3 text-left bg-bolt-elements-background-depth-2",children:p.jsx(yLe,{toolInvocations:a,toolCallAnnotations:e,addToolResult:r,theme:n})})]}),u&&s&&p.jsxs(rt.div,{className:"details",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:[p.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor h-[1px]"}),p.jsx("div",{className:"p-5 text-left bg-bolt-elements-actions-background",children:p.jsx(bLe,{toolInvocations:l,toolCallAnnotations:e,theme:n})})]})]})]})}),xW={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},bLe=k.memo(({toolInvocations:t,toolCallAnnotations:e,theme:r})=>p.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:p.jsx("div",{className:"space-y-4",children:t.map((n,s)=>{if(n.toolInvocation.state!=="result")return null;const{toolName:o,toolCallId:a}=n.toolInvocation,l=e.find(u=>u.toolCallId===a),c=[wK,SK,EK].includes(n.toolInvocation.result);return p.jsxs(rt.div,{variants:xW,initial:"hidden",animate:"visible",transition:{duration:.2,ease:Dn},children:[p.jsxs("div",{className:"flex items-center gap-1.5 text-xs mb-1",children:[c?p.jsx("div",{className:"text-lg text-bolt-elements-icon-error",children:p.jsx("div",{className:"i-ph:x"})}):p.jsx("div",{className:"text-lg text-bolt-elements-icon-success",children:p.jsx("div",{className:"i-ph:check"})}),p.jsx("div",{className:"text-bolt-elements-textSecondary text-xs",children:"Server:"}),p.jsx("div",{className:"text-bolt-elements-textPrimary font-semibold",children:l?.serverName})]}),p.jsxs("div",{className:"ml-6 mb-2",children:[p.jsxs("div",{className:"text-bolt-elements-textSecondary text-xs mb-1",children:["Tool: ",p.jsx("span",{className:"text-bolt-elements-textPrimary font-semibold",children:o})]}),p.jsxs("div",{className:"text-bolt-elements-textSecondary text-xs mb-1",children:["Description:"," ",p.jsx("span",{className:"text-bolt-elements-textPrimary font-semibold",children:l?.toolDescription})]}),p.jsx("div",{className:"text-bolt-elements-textSecondary text-xs mb-1",children:"Parameters:"}),p.jsx("div",{className:"bg-[#FAFAFA] dark:bg-[#0b0d13] p-3 rounded-md",children:p.jsx(HL,{className:"mb-0",code:JSON.stringify(n.toolInvocation.args),theme:r})}),p.jsx("div",{className:"text-bolt-elements-textSecondary text-xs mt-3 mb-1",children:"Result:"}),p.jsx("div",{className:"bg-[#FAFAFA] dark:bg-[#0b0d13] p-3 rounded-md",children:p.jsx(HL,{className:"mb-0",code:JSON.stringify(n.toolInvocation.result),theme:r})})]})]},s)})})})),yLe=k.memo(({toolInvocations:t,toolCallAnnotations:e,addToolResult:r})=>{const[n,s]=k.useState({}),i=typeof navigator<"u"&&/Mac|iPod|iPhone|iPad/.test(navigator.platform);return k.useEffect(()=>{const o={};t.forEach(a=>{a.toolInvocation.state==="call"&&(o[a.toolInvocation.toolCallId]=!0)}),s(o)},[t]),k.useEffect(()=>{const o=a=>{const l=document.activeElement;if(l&&(l.tagName==="INPUT"||l.tagName==="TEXTAREA"||l.isContentEditable)||Object.keys(n).length===0)return;const c=Object.keys(n).find(u=>n[u]);c&&((i?a.metaKey:a.ctrlKey)&&a.key==="Backspace"&&(a.preventDefault(),r({toolCallId:c,result:Xm.REJECT})),(i?a.metaKey:a.ctrlKey)&&(a.key==="Enter"||a.key==="Return")&&(a.preventDefault(),r({toolCallId:c,result:Xm.APPROVE})))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[n,r,i]),p.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:p.jsx("div",{className:"space-y-4",children:t.map((o,a)=>{if(o.toolInvocation.state!=="call")return null;const{toolName:c,toolCallId:u}=o.toolInvocation,d=e.find(h=>h.toolCallId===u);return p.jsx(rt.div,{variants:xW,initial:"hidden",animate:"visible",transition:{duration:.2,ease:Dn},children:p.jsx("div",{className:"bg-bolt-elements-background-depth-3 rounded-lg p-2",children:p.jsxs("div",{className:"flex gap-1",children:[p.jsxs("div",{className:"flex flex-col items-center ",children:[p.jsx("span",{className:"mr-auto font-light font-normal text-md text-bolt-elements-textPrimary rounded-md",children:c}),p.jsx("span",{className:"text-xs text-bolt-elements-textSecondary font-light break-words max-w-64",children:d?.toolDescription})]}),p.jsxs("div",{className:"flex items-center justify-end gap-2 ml-auto",children:[p.jsxs("button",{className:ye("h-10 px-2.5 py-1.5 rounded-lg text-xs h-auto","bg-transparent","text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary","transition-all duration-200","flex items-center gap-2"),onClick:()=>r({toolCallId:u,result:Xm.REJECT}),children:["Cancel ",p.jsx("span",{className:"opacity-70 text-xs ml-1",children:i?"":"Ctrl+Backspace"})]}),p.jsxs("button",{className:ye("h-10 inline-flex items-center gap-2 px-3 py-1.5 text-xs font-normal rounded-lg transition-colors","bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor","text-accent-500 hover:text-bolt-elements-textPrimary","disabled:opacity-50 disabled:cursor-not-allowed"),onClick:()=>r({toolCallId:u,result:Xm.APPROVE}),children:["Run tool ",p.jsx("span",{className:"opacity-70 text-xs ml-1",children:i?"":"Ctrl+Enter"})]})]})]},u)})},a)})})})});function vLe(t){t=wW(t),Pe.currentView.get()!=="code"&&Pe.currentView.set("code"),Pe.setSelectedFile(`${us}/${t}`)}function wW(t){let e=t;return e.startsWith(us)&&(e=t.replace(us,"")),e.startsWith("/")&&(e=e.slice(1)),e}const _Le=k.memo(({content:t,annotations:e,messageId:r,onRewind:n,onFork:s,append:i,chatMode:o,setChatMode:a,model:l,provider:c,parts:u,addToolResult:d})=>{const{t:h}=Ms(),f=e?.filter(_=>_&&typeof _=="object"&&Object.keys(_).includes("type"))||[];let b;f.find(_=>_.type==="chatSummary")&&(b=f.find(_=>_.type==="chatSummary")?.summary);let m;f.find(_=>_.type==="codeContext")&&(m=f.find(_=>_.type==="codeContext")?.files);const g=f.find(_=>_.type==="usage")?.value,y=u?.filter(_=>_.type==="tool-invocation"),v=f.filter(_=>_.type==="toolCall");return p.jsxs("div",{className:"overflow-hidden w-full",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[p.jsx("div",{className:"w-6 h-6 rounded-full bg-bolt-elements-bg-depth-3 border border-bolt-elements-borderColor flex items-center justify-center",children:p.jsx("span",{className:"text-xs font-bold text-bolt-elements-textPrimary",children:h("common.devonz","Devonz").charAt(0)})}),p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textSecondary",children:h("common.devonz","Devonz")}),(m||b)&&p.jsxs(zOe,{side:"right",align:"start",trigger:p.jsx("div",{className:"i-ph:info text-bolt-elements-textTertiary hover:text-bolt-elements-textSecondary transition-colors cursor-pointer"}),children:[b&&p.jsxs("div",{className:"max-w-chat",children:[p.jsxs("div",{className:"summary max-h-96 flex flex-col",children:[p.jsx("h2",{className:"border border-bolt-elements-borderColor rounded-md p4",children:h("chat.summary","Summary")}),p.jsx("div",{className:"overflow-y-auto m4 [zoom:0.7]",children:p.jsx(By,{children:b})})]}),m&&p.jsxs("div",{className:"code-context flex flex-col p4 border border-bolt-elements-borderColor rounded-md",children:[p.jsx("h2",{children:h("chat.context","Context")}),p.jsx("div",{className:"flex gap-4 mt-4 bolt [zoom:0.6]",children:m.map(_=>{const x=wW(_);return p.jsx(k.Fragment,{children:p.jsx("code",{className:"bg-bolt-elements-artifacts-inlineCode-background text-bolt-elements-artifacts-inlineCode-text px-1.5 py-1 rounded-md text-bolt-elements-item-contentAccent hover:underline cursor-pointer",onClick:w=>{w.preventDefault(),w.stopPropagation(),vLe(x)},children:x})},x)})})]})]}),p.jsx("div",{className:"context"})]}),p.jsx("div",{className:"flex-1"}),g&&p.jsxs("div",{className:"text-xs text-bolt-elements-textTertiary",children:[g.totalTokens.toLocaleString()," ",h("chat.tokens","tokens")]}),(n||s)&&r&&p.jsxs("div",{className:"flex gap-1.5",children:[n&&p.jsx(fd,{tooltip:h("chat.revert","Revert to this message"),children:p.jsx("button",{type:"button",onClick:()=>n(r),title:h("chat.revert","Revert to this message"),"aria-label":h("chat.revert","Revert to this message"),className:"i-ph:arrow-u-up-left text-lg text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary transition-colors cursor-pointer p-0.5"},"i-ph:arrow-u-up-left")}),s&&p.jsx(fd,{tooltip:h("chat.fork","Fork chat from this message"),children:p.jsx("button",{onClick:()=>s(r),title:h("chat.fork","Fork chat from this message"),"aria-label":h("chat.fork","Fork chat from this message"),className:"i-ph:git-fork text-lg text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary transition-colors"},"i-ph:git-fork")})]})]}),p.jsx("div",{className:"text-bolt-elements-textPrimary text-sm leading-relaxed pl-8",children:p.jsx(By,{append:i,chatMode:o,setChatMode:a,model:l,provider:c,html:!0,children:t})}),y&&y.length>0&&p.jsx("div",{className:"pl-8 mt-3",children:p.jsx(gLe,{toolInvocations:y,toolCallAnnotations:v,addToolResult:d})})]})});function xLe({content:t,parts:e}){const{t:r}=Ms(),n=He(Bu),s=e?.filter(o=>o.type==="file"&&"mimeType"in o&&o.mimeType.startsWith("image/"))||[];if(Array.isArray(t)){const o=t.find(l=>l.type==="text"),a=zL(o?.text||"");return p.jsxs("div",{className:"overflow-hidden flex flex-col gap-3 items-end w-full",children:[p.jsx("div",{className:"flex flex-row items-center gap-2 self-end",children:n?.avatar||n?.username?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary text-sm",children:n?.username?n.username:r("common.you","You")}),p.jsx("img",{src:n.avatar,alt:n?.username||r("common.user","User"),className:"w-6 h-6 object-cover rounded-full ring-1 ring-bolt-elements-borderColor",loading:"eager",decoding:"sync"})]}):p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary text-sm",children:r("common.you","You")}),p.jsx("div",{className:"w-6 h-6 rounded-full bg-accent-500/20 flex items-center justify-center",children:p.jsx("div",{className:"i-ph:user text-accent-400 text-sm"})})]})}),p.jsxs("div",{className:"flex flex-col gap-3 max-w-[85%] ml-auto",children:[a&&p.jsx("div",{className:"text-bolt-elements-textPrimary text-sm leading-relaxed",children:p.jsx(By,{html:!0,children:a})}),s.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((l,c)=>p.jsx("img",{src:`data:${l.mimeType};base64,${l.data}`,alt:`${r("common.image","Image")} ${c+1}`,className:"max-w-full h-auto rounded-lg border border-bolt-elements-borderColor max-h-[256px] object-contain"},c))})]})]})}const i=zL(t);return p.jsxs("div",{className:"flex flex-col items-end gap-3 w-full",children:[p.jsx("div",{className:"flex items-center gap-2",children:n?.avatar?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-bolt-elements-textSecondary text-sm",children:n?.username||r("common.you","You")}),p.jsx("img",{src:n.avatar,alt:n?.username||r("common.user","User"),className:"w-6 h-6 object-cover rounded-full ring-1 ring-bolt-elements-borderColor",loading:"eager",decoding:"sync"})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-bolt-elements-textSecondary text-sm",children:r("common.you","You")}),p.jsx("div",{className:"w-6 h-6 rounded-full bg-accent-500/20 flex items-center justify-center",children:p.jsx("div",{className:"i-ph:user text-accent-400 text-sm"})})]})}),p.jsxs("div",{className:"max-w-[85%] ml-auto",children:[s.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.map((o,a)=>p.jsx("div",{className:"relative rounded-lg border border-bolt-elements-borderColor overflow-hidden",children:p.jsx("img",{src:`data:${o.mimeType};base64,${o.data}`,alt:`${r("common.image","Image")} ${a+1}`,className:"h-16 w-16 object-cover"})},a))}),p.jsx("div",{className:"text-bolt-elements-textPrimary text-sm leading-relaxed",children:p.jsx(By,{html:!0,children:i})})]})]})}function zL(t){const e=/<boltArtifact\s+[^>]*>[\s\S]*?<\/boltArtifact>/gm;return t.replace(CK,"").replace(TK,"").replace(e,"")}const wLe=k.forwardRef((t,e)=>{const{t:r}=Ms(),{id:n,isStreaming:s=!1,messages:i=[]}=t,o=zM(),a=jC(),l=u=>{const d=new URLSearchParams(o.search);d.set("rewindTo",u),a(`${o.pathname}?${d.toString()}`,{replace:!0})},c=async u=>{try{if(!tr||!zn.get()){Ie.error(r("chat.persistence_unavailable","Chat persistence is not available"));return}const d=await Jse(tr,zn.get(),u);a(`/chat/${d}`)}catch(d){Ie.error(r("chat.fork_failed","Failed to fork chat: {{error}}",{error:d.message}))}};return p.jsxs("div",{id:n,className:t.className,ref:e,children:[i.length>0?i.map((u,d)=>{const{role:h,content:f,id:b,annotations:m,parts:g}=u,y=h==="user",v=d===0;return m?.includes("hidden")?p.jsx(k.Fragment,{},d):p.jsx("div",{className:ye("flex gap-4 py-3 w-full rounded-lg",{"mt-4":!v}),children:p.jsx("div",{className:"grid grid-col-1 w-full",children:y?p.jsx(xLe,{content:f,parts:g}):p.jsx(_Le,{content:f,annotations:u.annotations,messageId:b,onRewind:l,onFork:c,append:t.append,chatMode:t.chatMode,setChatMode:t.setChatMode,model:t.model,provider:t.provider,parts:g,addToolResult:t.addToolResult})})},d)}):null,s&&p.jsx("div",{className:"text-center w-full  text-bolt-elements-item-contentAccent i-svg-spinners:3-dots-fade text-4xl mt-4"})]})}),WL={};function VL(){if(typeof document>"u")return{};const t=Et.get("apiKeys");let e={};if(t&&(e=WL[t],!e))try{e=WL[t]=JSON.parse(t)}catch(r){return console.error("Failed to parse apiKeys cookie",r),{}}return e}const SLe="_BaseChat_15kx3_1",ELe="_Chat_15kx3_5",CLe="_PromptEffectContainer_15kx3_18",TLe="_PromptEffectLine_15kx3_28",kLe="_PromptShine_15kx3_41",Sf={BaseChat:SLe,Chat:ELe,PromptEffectContainer:CLe,PromptEffectLine:TLe,PromptShine:kLe};var GL={};function qL(t){return Array.isArray(t)?t:[t]}const hC="",KL=" ",t1="\\",ALe=/^\s+$/,RLe=/(?:[^\\]|^)\\$/,PLe=/^\\!/,ILe=/^\\#/,NLe=/\r?\n/g,DLe=/^\.*\/|^\.+$/,r1="/";let SW="node-ignore";typeof Symbol<"u"&&(SW=Symbol.for("node-ignore"));const YL=SW,OLe=(t,e,r)=>Object.defineProperty(t,e,{value:r}),LLe=/([0-z])-([0-z])/g,EW=()=>!1,MLe=t=>t.replace(LLe,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:hC),jLe=t=>{const{length:e}=t;return t.slice(0,e-e%2)},FLe=[[/^\uFEFF/,()=>hC],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,r)=>e+(r.indexOf("\\")===0?KL:hC)],[/(\\+?)\s/g,(t,e)=>{const{length:r}=e;return e.slice(0,r-r%2)+KL}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{const n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>t1],[/\\\\/g,()=>t1],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,s)=>e===t1?`\\[${r}${jLe(n)}${s}`:s==="]"&&n.length%2===0?`[${MLe(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],XL=Object.create(null),BLe=(t,e)=>{let r=XL[t];return r||(r=FLe.reduce((n,[s,i])=>n.replace(s,i.bind(t)),t),XL[t]=r),e?new RegExp(r,"i"):new RegExp(r)},ZA=t=>typeof t=="string",$Le=t=>t&&ZA(t)&&!ALe.test(t)&&!RLe.test(t)&&t.indexOf("#")!==0,ULe=t=>t.split(NLe);let HLe=class{constructor(e,r,n,s){this.origin=e,this.pattern=r,this.negative=n,this.regex=s}};const zLe=(t,e)=>{const r=t;let n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(PLe,"!").replace(ILe,"#");const s=BLe(t,e);return new HLe(r,t,n,s)},WLe=(t,e)=>{throw new e(t)},ca=(t,e,r)=>ZA(t)?t?ca.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),CW=t=>DLe.test(t);ca.isNotRelative=CW;ca.convert=t=>t;let VLe=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){OLe(this,YL,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[YL]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if($Le(e)){const r=zLe(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,qL(ZA(e)?ULe(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,s=!1;return this._rules.forEach(i=>{const{negative:o}=i;if(s===o&&n!==s||o&&!n&&!s&&!r)return;i.regex.test(e)&&(n=!o,s=o)}),{ignored:n,unignored:s}}_test(e,r,n,s){const i=e&&ca.convert(e);return ca(i,e,this._allowRelativePaths?EW:WLe),this._t(i,r,n,s)}_t(e,r,n,s){if(e in r)return r[e];if(s||(s=e.split(r1)),s.pop(),!s.length)return r[e]=this._testOne(e,n);const i=this._t(s.join(r1)+r1,r,n,s);return r[e]=i.ignored?i:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return qL(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}};const $y=t=>new VLe(t),GLe=t=>ca(t&&ca.convert(t),t,EW);$y.isPathValid=GLe;$y.default=$y;var qLe=$y;if(typeof xr<"u"&&(GL&&GL.IGNORE_TEST_WIN32||xr.platform==="win32")){const t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");ca.convert=t;const e=/^[a-z]:\//i;ca.isNotRelative=r=>e.test(r)||CW(r)}const QA=gl(qLe),KLe=["node_modules",".git","dist","build",".next",".remix",".cache",".vscode",".idea","coverage",".DS_Store","Thumbs.db","npm-debug.log*","yarn-debug.log*","yarn-error.log*","**/*.log","**/.DS_Store"],n1=5e3,YLe=QA().add(KLe),Ef=()=>Math.random().toString(36).substring(2,15),XLe=async t=>{const r=new Uint8Array(await t.slice(0,1024).arrayBuffer());for(let n=0;n<r.length;n++){const s=r[n];if(s===0||s<32&&s!==9&&s!==10&&s!==13)return!0}return!1},JLe=t=>!YLe.ignores(t),ZLe=(t,e)=>`
<boltArtifact id="${e}" title="User Updated Files">
${Object.keys(t).map(r=>`
<boltAction type="file" filePath="${r}">
${t[r].content}
</boltAction>
`).join(`
`)}
</boltArtifact>
  `;function QLe(t){const e="export CI=true DEBIAN_FRONTEND=noninteractive FORCE_COLOR=0",r=[{pattern:/npx\s+([^@\s]+@?[^\s]*)\s+init/g,replacement:'echo "y" | npx --yes $1 init --defaults --yes'},{pattern:/npx\s+create-([^\s]+)/g,replacement:"npx --yes create-$1 --template default"},{pattern:/npx\s+([^@\s]+@?[^\s]*)\s+add/g,replacement:"npx --yes $1 add --defaults --yes"},{pattern:/npm\s+install(?!\s+--)/g,replacement:"npm install --yes --no-audit --no-fund --silent"},{pattern:/yarn\s+add(?!\s+--)/g,replacement:"yarn add --non-interactive"},{pattern:/pnpm\s+add(?!\s+--)/g,replacement:"pnpm add --yes"}];let n=t;return r.forEach(({pattern:s,replacement:i})=>{n=n.replace(s,i)}),`${e} && ${n}`}async function TW(t){const e=n=>t.some(s=>s.path.endsWith(n)),r=(n,s)=>t.some(i=>i.path.endsWith(n)&&i.content.includes(s));if(e("package.json")){const n=t.find(s=>s.path.endsWith("package.json"));if(!n)return{type:"",setupCommand:"",followupMessage:""};try{const s=JSON.parse(n.content),i=s?.scripts||{},o={...s.dependencies,...s.devDependencies},a=r("components.json","shadcn")||Object.keys(o).some(h=>h.includes("shadcn"))||e("components.json"),c=["dev","start","preview"].find(h=>i[h]);let u="npx update-browserslist-db@latest && npm install";a&&(u+=" && npx shadcn@latest init");const d=QLe(u);return c?{type:"Node.js",setupCommand:d,startCommand:`npm run ${c}`,followupMessage:`Found "${c}" script in package.json. Running "npm run ${c}" after installation.`}:{type:"Node.js",setupCommand:d,followupMessage:"Would you like me to inspect package.json to determine the available scripts for running this project?"}}catch(s){return console.error("Error parsing package.json:",s),{type:"",setupCommand:"",followupMessage:""}}}return e("index.html")?{type:"Static",startCommand:"npx --yes serve",followupMessage:""}:{type:"",setupCommand:"",followupMessage:""}}function kW(t){if(!t.setupCommand&&!t.startCommand)return null;let e="";return t.setupCommand&&(e+=`
<boltAction type="shell">${t.setupCommand}</boltAction>`),t.startCommand&&(e+=`
<boltAction type="start">${t.startCommand}</boltAction>
`),{role:"assistant",content:`
${t.followupMessage?`

${t.followupMessage}`:""}
<boltArtifact id="project-setup" title="Project Setup">
${e}
</boltArtifact>`,id:Ef(),createdAt:new Date}}function e3e(t){const e=/(<boltArtifact[^>]*>)([\s\S]*?)(<\/boltArtifact>)/g;return t.replace(e,(r,n,s,i)=>{const o=n.replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=i.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`${o}${s}${a}`})}function t3e(t){const e=/(<boltAction[^>]*>)([\s\S]*?)(<\/boltAction>)/g;return t.replace(e,(r,n,s,i)=>{const o=n.replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=i.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`${o}${s}${a}`})}function AW(t){return e3e(t3e(t))}const r3e=async(t,e,r)=>{const n=await Promise.all(t.map(async u=>new Promise((d,h)=>{const f=new FileReader;f.onload=()=>{const b=f.result,m=u.webkitRelativePath.split("/").slice(1).join("/");d({content:b,path:m})},f.onerror=h,f.readAsText(u)}))),s=await TW(n),i=kW(s),o=e.length>0?`

Skipped ${e.length} binary files:
${e.map(u=>`- ${u}`).join(`
`)}`:"",a={role:"assistant",content:`I've imported the contents of the "${r}" folder.${o}

<boltArtifact id="imported-files" title="Imported Files" type="bundled" >
${n.map(u=>`<boltAction type="file" filePath="${u.path}">
${AW(u.content)}
</boltAction>`).join(`

`)}
</boltArtifact>`,id:Ef(),createdAt:new Date},c=[{role:"user",id:Ef(),content:`Import the "${r}" folder`,createdAt:new Date},a];return i&&(c.push({role:"user",id:Ef(),content:"Setup the codebase and Start the application"}),c.push(i)),c},n3e={status:"idle",progress:0,currentFile:"",totalFiles:0},Sd=js(n3e),s1=t=>{Sd.setKey("status",t)},i1=t=>{Sd.setKey("progress",Math.min(100,Math.max(0,t)))},s3e=(t,e)=>{Sd.setKey("currentFile",t)},i3e=t=>{Sd.setKey("status","error"),Sd.setKey("error",t)},o3e=(t,e)=>{Sd.set({status:"scanning",progress:0,currentFile:"",totalFiles:e,folderName:t})},a3e=({className:t,style:e,importChat:r})=>{const[n,s]=k.useState(!1),i=Yr.useRef(null),o=async a=>{const c=Array.from(a.target.files||[]).filter(d=>{const h=d.webkitRelativePath.split("/").slice(1).join("/");return JLe(h)});if(c.length===0){const d=new Error("No valid files found");Jt.logError("File import failed - no valid files",d,{folderName:"Unknown Folder"}),Ie.error("No files found in the selected folder");return}if(c.length>n1){const d=new Error(`Too many files: ${c.length}`);Jt.logError("File import failed - too many files",d,{fileCount:c.length,maxFiles:n1}),Ie.error(`This folder contains ${c.length.toLocaleString()} files. This product is optimized for projects up to ${n1.toLocaleString()} files.`);return}const u=c[0]?.webkitRelativePath.split("/")[0]||"Unknown Folder";s(!0),o3e(u,c.length);try{const d=[],h=[];s1("storing");for(let b=0;b<c.length;b++){const m=c[b],g=m.webkitRelativePath.split("/").slice(1).join("/"),y=await XLe(m);s3e(g),i1((b+1)/c.length*80);const v=new FormData;v.append("file",m),v.append("path",g),v.append("isBinary",String(y));const _=await fetch("/api/import-file",{method:"POST",body:v});if(!_.ok){const x=await _.json();throw new Error(x.error||"Failed to process file on server")}y?h.push(g):d.push(m)}if(d.length===0)throw new Error("No text files found in the selected folder");s1("syncing"),i1(90);const f=await r3e(d,h,u);r&&await r(u,[...f]),s1("complete"),i1(100),Jt.logSystem("Folder imported successfully with RAG indexing",{folderName:u,textFileCount:d.length,binaryFileCount:h.length}),Ie.success("Folder imported and indexed successfully")}catch(d){const h=d instanceof Error?d.message:"Unknown error";i3e(h),Jt.logError("Failed to import folder",d,{folderName:u}),console.error("Failed to import folder:",d),Ie.error(`Failed to import folder: ${h}`)}finally{s(!1),a.target.value=""}};return p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:i,className:"hidden",webkitdirectory:"",directory:"",onChange:o}),p.jsxs(Rt,{onClick:()=>{i.current?.click()},title:"Import Folder",variant:"default",size:"lg",className:ye("flex gap-2 bg-bolt-elements-background-depth-1","text-bolt-elements-textPrimary","hover:bg-bolt-elements-background-depth-2","border border-bolt-elements-borderColor","h-10 px-4 py-2 justify-center","transition-all duration-200 ease-in-out",t),style:e,disabled:n,children:[p.jsx("span",{className:"i-ph:upload-simple w-4 h-4"}),n?"Importing...":"Import Folder"]})]})};var Xe={},Ps=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof xr>"u"||typeof xr.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||Ps.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||Ps.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||Ps.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=Ps.DEFAULT_MAX_PENDING};Ps.DEFAULT_TIMEOUT=0;Ps.DEFAULT_MAX_OCCUPATION_TIME=0;Ps.DEFAULT_MAX_EXECUTION_TIME=0;Ps.DEFAULT_MAX_PENDING=1e3;Ps.prototype.acquire=function(t,e,r,n){if(Array.isArray(t))return this._acquireBatch(t,e,r,n);if(typeof e!="function")throw new Error("You must pass a function to execute");var s=null,i=null,o=null;typeof r!="function"&&(n=r,r=null,o=new this.Promise(function(v,_){s=v,i=_})),n=n||{};var a=!1,l=null,c=null,u=null,d=this,h=function(v,_,x){c&&(clearTimeout(c),c=null),u&&(clearTimeout(u),u=null),v&&(d.queues[t]&&d.queues[t].length===0&&delete d.queues[t],d.domainReentrant&&delete d.domains[t]),a||(o?_?i(_):s(x):typeof r=="function"&&r(_,x),a=!0),v&&d.queues[t]&&d.queues[t].length>0&&d.queues[t].shift()()},f=function(v){if(a)return h(v);l&&(clearTimeout(l),l=null),d.domainReentrant&&v&&(d.domains[t]=xr.domain);var _=n.maxExecutionTime||d.maxExecutionTime;if(_&&(u=setTimeout(function(){d.queues[t]&&h(v,new Error("Maximum execution time is exceeded "+t))},_)),e.length===1){var x=!1;try{e(function(w,S){x||(x=!0,h(v,w,S))})}catch(w){x||(x=!0,h(v,w))}}else d._promiseTry(function(){return e()}).then(function(w){h(v,void 0,w)},function(w){h(v,w)})};d.domainReentrant&&xr.domain&&(f=xr.domain.bind(f));var b=n.maxPending||d.maxPending;if(!d.queues[t])d.queues[t]=[],f(!0);else if(d.domainReentrant&&xr.domain&&xr.domain===d.domains[t])f(!1);else if(d.queues[t].length>=b)h(!1,new Error("Too many pending tasks in queue "+t));else{var m=function(){f(!0)};n.skipQueue?d.queues[t].unshift(m):d.queues[t].push(m);var g=n.timeout||d.timeout;g&&(l=setTimeout(function(){l=null,h(!1,new Error("async-lock timed out in queue "+t))},g))}var y=n.maxOccupationTime||d.maxOccupationTime;if(y&&(c=setTimeout(function(){d.queues[t]&&h(!1,new Error("Maximum occupation time is exceeded in queue "+t))},y)),o)return o};Ps.prototype._acquireBatch=function(t,e,r,n){typeof r!="function"&&(n=r,r=null);var s=this,i=function(a,l){return function(c){s.acquire(a,l,c,n)}},o=t.reduceRight(function(a,l){return i(l,a)},e);if(typeof r=="function")o(r);else return new this.Promise(function(a,l){o.length===1?o(function(c,u){c?l(c):a(u)}):a(o())})};Ps.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0};Ps.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(e){return this.Promise.reject(e)}};var l3e=Ps,c3e=l3e,fC={exports:{}};const u3e=gK(kK);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=u3e,n=r.Buffer;function s(o,a){for(var l in o)a[l]=o[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=i);function i(o,a,l){return n(o,a,l)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,l)},i.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=n(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(fC,fC.exports);var e2=fC.exports,d3e={}.toString,h3e=Array.isArray||function(t){return d3e.call(t)=="[object Array]"},f3e=Dp(),p3e=ij,m3e=p3e("TypedArray.prototype.buffer",!0),g3e=jX,b3e=m3e||function(e){if(!g3e(e))throw new f3e("Not a Typed Array");return e.buffer},mi=e2.Buffer,y3e=h3e,v3e=b3e,_3e=ArrayBuffer.isView||function(e){try{return v3e(e),!0}catch{return!1}},x3e=typeof Uint8Array<"u",RW=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",w3e=RW&&(mi.prototype instanceof Uint8Array||mi.TYPED_ARRAY_SUPPORT),S3e=function(e,r){if(mi.isBuffer(e))return e.constructor&&!("isBuffer"in e)?mi.from(e):e;if(typeof e=="string")return mi.from(e,r);if(RW&&_3e(e)){if(e.byteLength===0)return mi.alloc(0);if(w3e){var n=mi.from(e.buffer,e.byteOffset,e.byteLength);if(n.byteLength===e.byteLength)return n}var s=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),i=mi.from(s);if(i.length===e.byteLength)return i}if(x3e&&e instanceof Uint8Array)return mi.from(e);var o=y3e(e);if(o)for(var a=0;a<e.length;a+=1){var l=e[a];if(typeof l!="number"||l<0||l>255||~~l!==l)throw new RangeError("Array items must be numbers in the range 0-255.")}if(o||mi.isBuffer(e)&&e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))return mi.from(e);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},E3e=e2.Buffer,C3e=S3e;function w_(t,e){this._block=E3e.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}w_.prototype.update=function(t,e){t=C3e(t,e||"utf8");for(var r=this._block,n=this._blockSize,s=t.length,i=this._len,o=0;o<s;){for(var a=i%n,l=Math.min(s-o,n-a),c=0;c<l;c++)r[a+c]=t[o+c];i+=l,o+=l,i%n===0&&this._update(r)}return this._len+=s,this};w_.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,s=(r-n)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return t?i.toString(t):i};w_.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var T3e=w_,k3e=FX,PW=T3e,A3e=e2.Buffer,R3e=[1518500249,1859775393,-1894007588,-899497514],P3e=new Array(80);function gm(){this.init(),this._w=P3e,PW.call(this,64,56)}k3e(gm,PW);gm.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function I3e(t){return t<<1|t>>>31}function N3e(t){return t<<5|t>>>27}function D3e(t){return t<<30|t>>>2}function O3e(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}gm.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,s=this._c|0,i=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=I3e(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var l=0;l<80;++l){var c=~~(l/20),u=N3e(r)+O3e(c,n,s,i)+o+e[l]+R3e[c]|0;o=i,i=s,s=D3e(n),n=r,r=u}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0};gm.prototype._hash=function(){var t=A3e.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var L3e=gm,IW={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */(function(t){(function(e){e(typeof DO_NOT_EXPORT_CRC>"u"?t:{})})(function(e){e.version="1.2.2";function r(){for(var E=0,C=new Array(256),A=0;A!=256;++A)E=A,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,C[A]=E;return typeof Int32Array<"u"?new Int32Array(C):C}var n=r();function s(E){var C=0,A=0,I=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(I=0;I!=256;++I)P[I]=E[I];for(I=0;I!=256;++I)for(A=E[I],C=256+I;C<4096;C+=256)A=P[C]=A>>>8^E[A&255];var D=[];for(I=1;I!=16;++I)D[I-1]=typeof Int32Array<"u"?P.subarray(I*256,I*256+256):P.slice(I*256,I*256+256);return D}var i=s(n),o=i[0],a=i[1],l=i[2],c=i[3],u=i[4],d=i[5],h=i[6],f=i[7],b=i[8],m=i[9],g=i[10],y=i[11],v=i[12],_=i[13],x=i[14];function w(E,C){for(var A=C^-1,I=0,P=E.length;I<P;)A=A>>>8^n[(A^E.charCodeAt(I++))&255];return~A}function S(E,C){for(var A=C^-1,I=E.length-15,P=0;P<I;)A=x[E[P++]^A&255]^_[E[P++]^A>>8&255]^v[E[P++]^A>>16&255]^y[E[P++]^A>>>24]^g[E[P++]]^m[E[P++]]^b[E[P++]]^f[E[P++]]^h[E[P++]]^d[E[P++]]^u[E[P++]]^c[E[P++]]^l[E[P++]]^a[E[P++]]^o[E[P++]]^n[E[P++]];for(I+=15;P<I;)A=A>>>8^n[(A^E[P++])&255];return~A}function T(E,C){for(var A=C^-1,I=0,P=E.length,D=0,R=0;I<P;)D=E.charCodeAt(I++),D<128?A=A>>>8^n[(A^D)&255]:D<2048?(A=A>>>8^n[(A^(192|D>>6&31))&255],A=A>>>8^n[(A^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,R=E.charCodeAt(I++)&1023,A=A>>>8^n[(A^(240|D>>8&7))&255],A=A>>>8^n[(A^(128|D>>2&63))&255],A=A>>>8^n[(A^(128|R>>6&15|(D&3)<<4))&255],A=A>>>8^n[(A^(128|R&63))&255]):(A=A>>>8^n[(A^(224|D>>12&15))&255],A=A>>>8^n[(A^(128|D>>6&63))&255],A=A>>>8^n[(A^(128|D&63))&255]);return~A}e.table=n,e.bstr=w,e.buf=S,e.str=T})})(IW);var ma={};(function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(i,o){return Object.prototype.hasOwnProperty.call(i,o)}t.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)r(a,l)&&(i[l]=a[l])}}return i},t.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var n={arraySet:function(i,o,a,l,c){if(o.subarray&&i.subarray){i.set(o.subarray(a,a+l),c);return}for(var u=0;u<l;u++)i[c+u]=o[a+u]},flattenChunks:function(i){var o,a,l,c,u,d;for(l=0,o=0,a=i.length;o<a;o++)l+=i[o].length;for(d=new Uint8Array(l),c=0,o=0,a=i.length;o<a;o++)u=i[o],d.set(u,c),c+=u.length;return d}},s={arraySet:function(i,o,a,l,c){for(var u=0;u<l;u++)i[c+u]=o[a+u]},flattenChunks:function(i){return[].concat.apply([],i)}};t.setTyped=function(i){i?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,n)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(e)})(ma);var bm={},Ro={},Xd={},M3e=ma,j3e=4,JL=0,ZL=1,F3e=2;function Jd(t){for(var e=t.length;--e>=0;)t[e]=0}var B3e=0,NW=1,$3e=2,U3e=3,H3e=258,t2=29,ym=256,Sp=ym+1+t2,ed=30,r2=19,DW=2*Sp+1,nc=15,o1=16,z3e=7,n2=256,OW=16,LW=17,MW=18,pC=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],nb=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W3e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],jW=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V3e=512,$o=new Array((Sp+2)*2);Jd($o);var Cf=new Array(ed*2);Jd(Cf);var Ep=new Array(V3e);Jd(Ep);var Cp=new Array(H3e-U3e+1);Jd(Cp);var s2=new Array(t2);Jd(s2);var Uy=new Array(ed);Jd(Uy);function a1(t,e,r,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}var FW,BW,$W;function l1(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function UW(t){return t<256?Ep[t]:Ep[256+(t>>>7)]}function Tp(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function hs(t,e,r){t.bi_valid>o1-r?(t.bi_buf|=e<<t.bi_valid&65535,Tp(t,t.bi_buf),t.bi_buf=e>>o1-t.bi_valid,t.bi_valid+=r-o1):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function io(t,e,r){hs(t,r[e*2],r[e*2+1])}function HW(t,e){var r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1}function G3e(t){t.bi_valid===16?(Tp(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function q3e(t,e){var r=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,u,d,h,f,b,m=0;for(h=0;h<=nc;h++)t.bl_count[h]=0;for(r[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<DW;c++)u=t.heap[c],h=r[r[u*2+1]*2+1]+1,h>l&&(h=l,m++),r[u*2+1]=h,!(u>n)&&(t.bl_count[h]++,f=0,u>=a&&(f=o[u-a]),b=r[u*2],t.opt_len+=b*(h+f),i&&(t.static_len+=b*(s[u*2+1]+f)));if(m!==0){do{for(h=l-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[l]--,m-=2}while(m>0);for(h=l;h!==0;h--)for(u=t.bl_count[h];u!==0;)d=t.heap[--c],!(d>n)&&(r[d*2+1]!==h&&(t.opt_len+=(h-r[d*2+1])*r[d*2],r[d*2+1]=h),u--)}}function zW(t,e,r){var n=new Array(nc+1),s=0,i,o;for(i=1;i<=nc;i++)n[i]=s=s+r[i-1]<<1;for(o=0;o<=e;o++){var a=t[o*2+1];a!==0&&(t[o*2]=HW(n[a]++,a))}}function K3e(){var t,e,r,n,s,i=new Array(nc+1);for(r=0,n=0;n<t2-1;n++)for(s2[n]=r,t=0;t<1<<pC[n];t++)Cp[r++]=n;for(Cp[r-1]=n,s=0,n=0;n<16;n++)for(Uy[n]=s,t=0;t<1<<nb[n];t++)Ep[s++]=n;for(s>>=7;n<ed;n++)for(Uy[n]=s<<7,t=0;t<1<<nb[n]-7;t++)Ep[256+s++]=n;for(e=0;e<=nc;e++)i[e]=0;for(t=0;t<=143;)$o[t*2+1]=8,t++,i[8]++;for(;t<=255;)$o[t*2+1]=9,t++,i[9]++;for(;t<=279;)$o[t*2+1]=7,t++,i[7]++;for(;t<=287;)$o[t*2+1]=8,t++,i[8]++;for(zW($o,Sp+1,i),t=0;t<ed;t++)Cf[t*2+1]=5,Cf[t*2]=HW(t,5);FW=new a1($o,pC,ym+1,Sp,nc),BW=new a1(Cf,nb,0,ed,nc),$W=new a1(new Array(0),W3e,0,r2,z3e)}function WW(t){var e;for(e=0;e<Sp;e++)t.dyn_ltree[e*2]=0;for(e=0;e<ed;e++)t.dyn_dtree[e*2]=0;for(e=0;e<r2;e++)t.bl_tree[e*2]=0;t.dyn_ltree[n2*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function VW(t){t.bi_valid>8?Tp(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function Y3e(t,e,r,n){VW(t),Tp(t,r),Tp(t,~r),M3e.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function QL(t,e,r,n){var s=e*2,i=r*2;return t[s]<t[i]||t[s]===t[i]&&n[e]<=n[r]}function c1(t,e,r){for(var n=t.heap[r],s=r<<1;s<=t.heap_len&&(s<t.heap_len&&QL(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!QL(e,n,t.heap[s],t.depth));)t.heap[r]=t.heap[s],r=s,s<<=1;t.heap[r]=n}function e3(t,e,r){var n,s,i=0,o,a;if(t.last_lit!==0)do n=t.pending_buf[t.d_buf+i*2]<<8|t.pending_buf[t.d_buf+i*2+1],s=t.pending_buf[t.l_buf+i],i++,n===0?io(t,s,e):(o=Cp[s],io(t,o+ym+1,e),a=pC[o],a!==0&&(s-=s2[o],hs(t,s,a)),n--,o=UW(n),io(t,o,r),a=nb[o],a!==0&&(n-=Uy[o],hs(t,n,a)));while(i<t.last_lit);io(t,n2,e)}function mC(t,e){var r=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,i=e.stat_desc.elems,o,a,l=-1,c;for(t.heap_len=0,t.heap_max=DW,o=0;o<i;o++)r[o*2]!==0?(t.heap[++t.heap_len]=l=o,t.depth[o]=0):r[o*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,r[c*2]=1,t.depth[c]=0,t.opt_len--,s&&(t.static_len-=n[c*2+1]);for(e.max_code=l,o=t.heap_len>>1;o>=1;o--)c1(t,r,o);c=i;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],c1(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,r[c*2]=r[o*2]+r[a*2],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,r[o*2+1]=r[a*2+1]=c,t.heap[1]=c++,c1(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],q3e(t,e),zW(r,l,t.bl_count)}function t3(t,e,r){var n,s=-1,i,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)i=o,o=e[(n+1)*2+1],!(++a<l&&i===o)&&(a<c?t.bl_tree[i*2]+=a:i!==0?(i!==s&&t.bl_tree[i*2]++,t.bl_tree[OW*2]++):a<=10?t.bl_tree[LW*2]++:t.bl_tree[MW*2]++,a=0,s=i,o===0?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))}function r3(t,e,r){var n,s=-1,i,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),n=0;n<=r;n++)if(i=o,o=e[(n+1)*2+1],!(++a<l&&i===o)){if(a<c)do io(t,i,t.bl_tree);while(--a!==0);else i!==0?(i!==s&&(io(t,i,t.bl_tree),a--),io(t,OW,t.bl_tree),hs(t,a-3,2)):a<=10?(io(t,LW,t.bl_tree),hs(t,a-3,3)):(io(t,MW,t.bl_tree),hs(t,a-11,7));a=0,s=i,o===0?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}}function X3e(t){var e;for(t3(t,t.dyn_ltree,t.l_desc.max_code),t3(t,t.dyn_dtree,t.d_desc.max_code),mC(t,t.bl_desc),e=r2-1;e>=3&&t.bl_tree[jW[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function J3e(t,e,r,n){var s;for(hs(t,e-257,5),hs(t,r-1,5),hs(t,n-4,4),s=0;s<n;s++)hs(t,t.bl_tree[jW[s]*2+1],3);r3(t,t.dyn_ltree,e-1),r3(t,t.dyn_dtree,r-1)}function Z3e(t){var e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return JL;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return ZL;for(r=32;r<ym;r++)if(t.dyn_ltree[r*2]!==0)return ZL;return JL}var n3=!1;function Q3e(t){n3||(K3e(),n3=!0),t.l_desc=new l1(t.dyn_ltree,FW),t.d_desc=new l1(t.dyn_dtree,BW),t.bl_desc=new l1(t.bl_tree,$W),t.bi_buf=0,t.bi_valid=0,WW(t)}function GW(t,e,r,n){hs(t,(B3e<<1)+(n?1:0),3),Y3e(t,e,r)}function eMe(t){hs(t,NW<<1,3),io(t,n2,$o),G3e(t)}function tMe(t,e,r,n){var s,i,o=0;t.level>0?(t.strm.data_type===F3e&&(t.strm.data_type=Z3e(t)),mC(t,t.l_desc),mC(t,t.d_desc),o=X3e(t),s=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=s&&(s=i)):s=i=r+5,r+4<=s&&e!==-1?GW(t,e,r,n):t.strategy===j3e||i===s?(hs(t,(NW<<1)+(n?1:0),3),e3(t,$o,Cf)):(hs(t,($3e<<1)+(n?1:0),3),J3e(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),e3(t,t.dyn_ltree,t.dyn_dtree)),WW(t),n&&VW(t)}function rMe(t,e,r){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=r&255,t.last_lit++,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(Cp[r]+ym+1)*2]++,t.dyn_dtree[UW(e)*2]++),t.last_lit===t.lit_bufsize-1}Xd._tr_init=Q3e;Xd._tr_stored_block=GW;Xd._tr_flush_block=tMe;Xd._tr_tally=rMe;Xd._tr_align=eMe;function nMe(t,e,r,n){for(var s=t&65535|0,i=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+e[n++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0}var qW=nMe;function sMe(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e}var iMe=sMe();function oMe(t,e,r,n){var s=iMe,i=n+r;t^=-1;for(var o=n;o<i;o++)t=t>>>8^s[(t^e[o])&255];return t^-1}var KW=oMe,i2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vn=ma,ei=Xd,YW=qW,Da=KW,aMe=i2,Uc=0,lMe=1,cMe=3,el=4,s3=5,oo=0,i3=1,ti=-2,uMe=-3,u1=-5,dMe=-1,hMe=1,a0=2,fMe=3,pMe=4,mMe=0,gMe=2,S_=8,bMe=9,yMe=15,vMe=8,_Me=29,xMe=256,gC=xMe+1+_Me,wMe=30,SMe=19,EMe=2*gC+1,CMe=15,jt=3,Ga=258,Ei=Ga+jt+1,TMe=32,E_=42,bC=69,sb=73,ib=91,ob=103,sc=113,Gh=666,Jr=1,vm=2,Tc=3,Zd=4,kMe=3;function qa(t,e){return t.msg=aMe[e],e}function o3(t){return(t<<1)-(t>4?9:0)}function Ua(t){for(var e=t.length;--e>=0;)t[e]=0}function Oa(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(Vn.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))}function vn(t,e){ei._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Oa(t.strm)}function Ht(t,e){t.pending_buf[t.pending++]=e}function Ph(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function AMe(t,e,r,n){var s=t.avail_in;return s>n&&(s=n),s===0?0:(t.avail_in-=s,Vn.arraySet(e,t.input,t.next_in,s,r),t.state.wrap===1?t.adler=YW(t.adler,e,s,r):t.state.wrap===2&&(t.adler=Da(t.adler,e,s,r)),t.next_in+=s,t.total_in+=s,s)}function XW(t,e){var r=t.max_chain_length,n=t.strstart,s,i,o=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-Ei?t.strstart-(t.w_size-Ei):0,c=t.window,u=t.w_mask,d=t.prev,h=t.strstart+Ga,f=c[n+o-1],b=c[n+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(s=e,!(c[s+o]!==b||c[s+o-1]!==f||c[s]!==c[n]||c[++s]!==c[n+1])){n+=2,s++;do;while(c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&n<h);if(i=Ga-(h-n),n=h-Ga,i>o){if(t.match_start=e,o=i,i>=a)break;f=c[n+o-1],b=c[n+o]}}while((e=d[e&u])>l&&--r!==0);return o<=t.lookahead?o:t.lookahead}function kc(t){var e=t.w_size,r,n,s,i,o;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Ei)){Vn.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do s=t.head[--r],t.head[r]=s>=e?s-e:0;while(--n);n=e,r=n;do s=t.prev[--r],t.prev[r]=s>=e?s-e:0;while(--n);i+=e}if(t.strm.avail_in===0)break;if(n=AMe(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=jt)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+jt-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<jt)););}while(t.lookahead<Ei&&t.strm.avail_in!==0)}function RMe(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(kc(t),t.lookahead===0&&e===Uc)return Jr;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((t.strstart===0||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,vn(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-Ei&&(vn(t,!1),t.strm.avail_out===0))return Jr}return t.insert=0,e===el?(vn(t,!0),t.strm.avail_out===0?Tc:Zd):(t.strstart>t.block_start&&(vn(t,!1),t.strm.avail_out===0),Jr)}function d1(t,e){for(var r,n;;){if(t.lookahead<Ei){if(kc(t),t.lookahead<Ei&&e===Uc)return Jr;if(t.lookahead===0)break}if(r=0,t.lookahead>=jt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+jt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-Ei&&(t.match_length=XW(t,r)),t.match_length>=jt)if(n=ei._tr_tally(t,t.strstart-t.match_start,t.match_length-jt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=jt){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+jt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=ei._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(vn(t,!1),t.strm.avail_out===0))return Jr}return t.insert=t.strstart<jt-1?t.strstart:jt-1,e===el?(vn(t,!0),t.strm.avail_out===0?Tc:Zd):t.last_lit&&(vn(t,!1),t.strm.avail_out===0)?Jr:vm}function lu(t,e){for(var r,n,s;;){if(t.lookahead<Ei){if(kc(t),t.lookahead<Ei&&e===Uc)return Jr;if(t.lookahead===0)break}if(r=0,t.lookahead>=jt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+jt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=jt-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Ei&&(t.match_length=XW(t,r),t.match_length<=5&&(t.strategy===hMe||t.match_length===jt&&t.strstart-t.match_start>4096)&&(t.match_length=jt-1)),t.prev_length>=jt&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-jt,n=ei._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-jt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+jt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=jt-1,t.strstart++,n&&(vn(t,!1),t.strm.avail_out===0))return Jr}else if(t.match_available){if(n=ei._tr_tally(t,0,t.window[t.strstart-1]),n&&vn(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Jr}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=ei._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<jt-1?t.strstart:jt-1,e===el?(vn(t,!0),t.strm.avail_out===0?Tc:Zd):t.last_lit&&(vn(t,!1),t.strm.avail_out===0)?Jr:vm}function PMe(t,e){for(var r,n,s,i,o=t.window;;){if(t.lookahead<=Ga){if(kc(t),t.lookahead<=Ga&&e===Uc)return Jr;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=jt&&t.strstart>0&&(s=t.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){i=t.strstart+Ga;do;while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<i);t.match_length=Ga-(i-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=jt?(r=ei._tr_tally(t,1,t.match_length-jt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=ei._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(vn(t,!1),t.strm.avail_out===0))return Jr}return t.insert=0,e===el?(vn(t,!0),t.strm.avail_out===0?Tc:Zd):t.last_lit&&(vn(t,!1),t.strm.avail_out===0)?Jr:vm}function IMe(t,e){for(var r;;){if(t.lookahead===0&&(kc(t),t.lookahead===0)){if(e===Uc)return Jr;break}if(t.match_length=0,r=ei._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(vn(t,!1),t.strm.avail_out===0))return Jr}return t.insert=0,e===el?(vn(t,!0),t.strm.avail_out===0?Tc:Zd):t.last_lit&&(vn(t,!1),t.strm.avail_out===0)?Jr:vm}function Hi(t,e,r,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=s}var Lu;Lu=[new Hi(0,0,0,0,RMe),new Hi(4,4,8,4,d1),new Hi(4,5,16,8,d1),new Hi(4,6,32,32,d1),new Hi(4,4,16,16,lu),new Hi(8,16,32,32,lu),new Hi(8,16,128,128,lu),new Hi(8,32,128,256,lu),new Hi(32,128,258,1024,lu),new Hi(32,258,258,4096,lu)];function NMe(t){t.window_size=2*t.w_size,Ua(t.head),t.max_lazy_match=Lu[t.level].max_lazy,t.good_match=Lu[t.level].good_length,t.nice_match=Lu[t.level].nice_length,t.max_chain_length=Lu[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=jt-1,t.match_available=0,t.ins_h=0}function DMe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Vn.Buf16(EMe*2),this.dyn_dtree=new Vn.Buf16((2*wMe+1)*2),this.bl_tree=new Vn.Buf16((2*SMe+1)*2),Ua(this.dyn_ltree),Ua(this.dyn_dtree),Ua(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Vn.Buf16(CMe+1),this.heap=new Vn.Buf16(2*gC+1),Ua(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Vn.Buf16(2*gC+1),Ua(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function JW(t){var e;return!t||!t.state?qa(t,ti):(t.total_in=t.total_out=0,t.data_type=gMe,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?E_:sc,t.adler=e.wrap===2?0:1,e.last_flush=Uc,ei._tr_init(e),oo)}function ZW(t){var e=JW(t);return e===oo&&NMe(t.state),e}function OMe(t,e){return!t||!t.state||t.state.wrap!==2?ti:(t.state.gzhead=e,oo)}function QW(t,e,r,n,s,i){if(!t)return ti;var o=1;if(e===dMe&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>bMe||r!==S_||n<8||n>15||e<0||e>9||i<0||i>pMe)return qa(t,ti);n===8&&(n=9);var a=new DMe;return t.state=a,a.strm=t,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+jt-1)/jt),a.window=new Vn.Buf8(a.w_size*2),a.head=new Vn.Buf16(a.hash_size),a.prev=new Vn.Buf16(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Vn.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=i,a.method=r,ZW(t)}function LMe(t,e){return QW(t,e,S_,yMe,vMe,mMe)}function MMe(t,e){var r,n,s,i;if(!t||!t.state||e>s3||e<0)return t?qa(t,ti):ti;if(n=t.state,!t.output||!t.input&&t.avail_in!==0||n.status===Gh&&e!==el)return qa(t,t.avail_out===0?u1:ti);if(n.strm=t,r=n.last_flush,n.last_flush=e,n.status===E_)if(n.wrap===2)t.adler=0,Ht(n,31),Ht(n,139),Ht(n,8),n.gzhead?(Ht(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Ht(n,n.gzhead.time&255),Ht(n,n.gzhead.time>>8&255),Ht(n,n.gzhead.time>>16&255),Ht(n,n.gzhead.time>>24&255),Ht(n,n.level===9?2:n.strategy>=a0||n.level<2?4:0),Ht(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Ht(n,n.gzhead.extra.length&255),Ht(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=Da(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=bC):(Ht(n,0),Ht(n,0),Ht(n,0),Ht(n,0),Ht(n,0),Ht(n,n.level===9?2:n.strategy>=a0||n.level<2?4:0),Ht(n,kMe),n.status=sc);else{var o=S_+(n.w_bits-8<<4)<<8,a=-1;n.strategy>=a0||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,o|=a<<6,n.strstart!==0&&(o|=TMe),o+=31-o%31,n.status=sc,Ph(n,o),n.strstart!==0&&(Ph(n,t.adler>>>16),Ph(n,t.adler&65535)),t.adler=1}if(n.status===bC)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(t.adler=Da(t.adler,n.pending_buf,n.pending-s,s)),Oa(t),s=n.pending,n.pending===n.pending_buf_size));)Ht(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(t.adler=Da(t.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=sb)}else n.status=sb;if(n.status===sb)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(t.adler=Da(t.adler,n.pending_buf,n.pending-s,s)),Oa(t),s=n.pending,n.pending===n.pending_buf_size)){i=1;break}n.gzindex<n.gzhead.name.length?i=n.gzhead.name.charCodeAt(n.gzindex++)&255:i=0,Ht(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>s&&(t.adler=Da(t.adler,n.pending_buf,n.pending-s,s)),i===0&&(n.gzindex=0,n.status=ib)}else n.status=ib;if(n.status===ib)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(t.adler=Da(t.adler,n.pending_buf,n.pending-s,s)),Oa(t),s=n.pending,n.pending===n.pending_buf_size)){i=1;break}n.gzindex<n.gzhead.comment.length?i=n.gzhead.comment.charCodeAt(n.gzindex++)&255:i=0,Ht(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>s&&(t.adler=Da(t.adler,n.pending_buf,n.pending-s,s)),i===0&&(n.status=ob)}else n.status=ob;if(n.status===ob&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Oa(t),n.pending+2<=n.pending_buf_size&&(Ht(n,t.adler&255),Ht(n,t.adler>>8&255),t.adler=0,n.status=sc)):n.status=sc),n.pending!==0){if(Oa(t),t.avail_out===0)return n.last_flush=-1,oo}else if(t.avail_in===0&&o3(e)<=o3(r)&&e!==el)return qa(t,u1);if(n.status===Gh&&t.avail_in!==0)return qa(t,u1);if(t.avail_in!==0||n.lookahead!==0||e!==Uc&&n.status!==Gh){var l=n.strategy===a0?IMe(n,e):n.strategy===fMe?PMe(n,e):Lu[n.level].func(n,e);if((l===Tc||l===Zd)&&(n.status=Gh),l===Jr||l===Tc)return t.avail_out===0&&(n.last_flush=-1),oo;if(l===vm&&(e===lMe?ei._tr_align(n):e!==s3&&(ei._tr_stored_block(n,0,0,!1),e===cMe&&(Ua(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Oa(t),t.avail_out===0))return n.last_flush=-1,oo}return e!==el?oo:n.wrap<=0?i3:(n.wrap===2?(Ht(n,t.adler&255),Ht(n,t.adler>>8&255),Ht(n,t.adler>>16&255),Ht(n,t.adler>>24&255),Ht(n,t.total_in&255),Ht(n,t.total_in>>8&255),Ht(n,t.total_in>>16&255),Ht(n,t.total_in>>24&255)):(Ph(n,t.adler>>>16),Ph(n,t.adler&65535)),Oa(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?oo:i3)}function jMe(t){var e;return!t||!t.state?ti:(e=t.state.status,e!==E_&&e!==bC&&e!==sb&&e!==ib&&e!==ob&&e!==sc&&e!==Gh?qa(t,ti):(t.state=null,e===sc?qa(t,uMe):oo))}function FMe(t,e){var r=e.length,n,s,i,o,a,l,c,u;if(!t||!t.state||(n=t.state,o=n.wrap,o===2||o===1&&n.status!==E_||n.lookahead))return ti;for(o===1&&(t.adler=YW(t.adler,e,r,0)),n.wrap=0,r>=n.w_size&&(o===0&&(Ua(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new Vn.Buf8(n.w_size),Vn.arraySet(u,e,r-n.w_size,n.w_size,0),e=u,r=n.w_size),a=t.avail_in,l=t.next_in,c=t.input,t.avail_in=r,t.next_in=0,t.input=e,kc(n);n.lookahead>=jt;){s=n.strstart,i=n.lookahead-(jt-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[s+jt-1])&n.hash_mask,n.prev[s&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=s,s++;while(--i);n.strstart=s,n.lookahead=jt-1,kc(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=jt-1,n.match_available=0,t.next_in=l,t.input=c,t.avail_in=a,n.wrap=o,oo}Ro.deflateInit=LMe;Ro.deflateInit2=QW;Ro.deflateReset=ZW;Ro.deflateResetKeep=JW;Ro.deflateSetHeader=OMe;Ro.deflate=MMe;Ro.deflateEnd=jMe;Ro.deflateSetDictionary=FMe;Ro.deflateInfo="pako deflate (from Nodeca project)";var Hc={},C_=ma,eV=!0,tV=!0;try{String.fromCharCode.apply(null,[0])}catch{eV=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{tV=!1}var kp=new C_.Buf8(256);for(var Ta=0;Ta<256;Ta++)kp[Ta]=Ta>=252?6:Ta>=248?5:Ta>=240?4:Ta>=224?3:Ta>=192?2:1;kp[254]=kp[254]=1;Hc.string2buf=function(t){var e,r,n,s,i,o=t.length,a=0;for(s=0;s<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new C_.Buf8(a),i=0,s=0;i<a;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e};function rV(t,e){if(e<65534&&(t.subarray&&tV||!t.subarray&&eV))return String.fromCharCode.apply(null,C_.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}Hc.buf2binstring=function(t){return rV(t,t.length)};Hc.binstring2buf=function(t){for(var e=new C_.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e};Hc.buf2string=function(t,e){var r,n,s,i,o=e||t.length,a=new Array(o*2);for(n=0,r=0;r<o;){if(s=t[r++],s<128){a[n++]=s;continue}if(i=kp[s],i>4){a[n++]=65533,r+=i-1;continue}for(s&=i===2?31:i===3?15:7;i>1&&r<o;)s=s<<6|t[r++]&63,i--;if(i>1){a[n++]=65533;continue}s<65536?a[n++]=s:(s-=65536,a[n++]=55296|s>>10&1023,a[n++]=56320|s&1023)}return rV(a,n)};Hc.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+kp[t[r]]>e?r:e};function BMe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nV=BMe,Tf=Ro,kf=ma,yC=Hc,vC=i2,$Me=nV,sV=Object.prototype.toString,UMe=0,h1=4,td=0,a3=1,l3=2,HMe=-1,zMe=0,WMe=8;function Ac(t){if(!(this instanceof Ac))return new Ac(t);this.options=kf.assign({level:HMe,method:WMe,chunkSize:16384,windowBits:15,memLevel:8,strategy:zMe,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $Me,this.strm.avail_out=0;var r=Tf.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==td)throw new Error(vC[r]);if(e.header&&Tf.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(typeof e.dictionary=="string"?n=yC.string2buf(e.dictionary):sV.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=Tf.deflateSetDictionary(this.strm,n),r!==td)throw new Error(vC[r]);this._dict_set=!0}}Ac.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,s,i;if(this.ended)return!1;i=e===~~e?e:e===!0?h1:UMe,typeof t=="string"?r.input=yC.string2buf(t):sV.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new kf.Buf8(n),r.next_out=0,r.avail_out=n),s=Tf.deflate(r,i),s!==a3&&s!==td)return this.onEnd(s),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(i===h1||i===l3))&&(this.options.to==="string"?this.onData(yC.buf2binstring(kf.shrinkBuf(r.output,r.next_out))):this.onData(kf.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&s!==a3);return i===h1?(s=Tf.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===td):(i===l3&&(this.onEnd(td),r.avail_out=0),!0)};Ac.prototype.onData=function(t){this.chunks.push(t)};Ac.prototype.onEnd=function(t){t===td&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=kf.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function o2(t,e){var r=new Ac(e);if(r.push(t,!0),r.err)throw r.msg||vC[r.err];return r.result}function VMe(t,e){return e=e||{},e.raw=!0,o2(t,e)}function GMe(t,e){return e=e||{},e.gzip=!0,o2(t,e)}bm.Deflate=Ac;bm.deflate=o2;bm.deflateRaw=VMe;bm.gzip=GMe;var _m={},Li={},l0=30,qMe=12,KMe=function(e,r){var n,s,i,o,a,l,c,u,d,h,f,b,m,g,y,v,_,x,w,S,T,E,C,A,I;n=e.state,s=e.next_in,A=e.input,i=s+(e.avail_in-5),o=e.next_out,I=e.output,a=o-(r-e.avail_out),l=o+(e.avail_out-257),c=n.dmax,u=n.wsize,d=n.whave,h=n.wnext,f=n.window,b=n.hold,m=n.bits,g=n.lencode,y=n.distcode,v=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;e:do{m<15&&(b+=A[s++]<<m,m+=8,b+=A[s++]<<m,m+=8),x=g[b&v];t:for(;;){if(w=x>>>24,b>>>=w,m-=w,w=x>>>16&255,w===0)I[o++]=x&65535;else if(w&16){S=x&65535,w&=15,w&&(m<w&&(b+=A[s++]<<m,m+=8),S+=b&(1<<w)-1,b>>>=w,m-=w),m<15&&(b+=A[s++]<<m,m+=8,b+=A[s++]<<m,m+=8),x=y[b&_];r:for(;;){if(w=x>>>24,b>>>=w,m-=w,w=x>>>16&255,w&16){if(T=x&65535,w&=15,m<w&&(b+=A[s++]<<m,m+=8,m<w&&(b+=A[s++]<<m,m+=8)),T+=b&(1<<w)-1,T>c){e.msg="invalid distance too far back",n.mode=l0;break e}if(b>>>=w,m-=w,w=o-a,T>w){if(w=T-w,w>d&&n.sane){e.msg="invalid distance too far back",n.mode=l0;break e}if(E=0,C=f,h===0){if(E+=u-w,w<S){S-=w;do I[o++]=f[E++];while(--w);E=o-T,C=I}}else if(h<w){if(E+=u+h-w,w-=h,w<S){S-=w;do I[o++]=f[E++];while(--w);if(E=0,h<S){w=h,S-=w;do I[o++]=f[E++];while(--w);E=o-T,C=I}}}else if(E+=h-w,w<S){S-=w;do I[o++]=f[E++];while(--w);E=o-T,C=I}for(;S>2;)I[o++]=C[E++],I[o++]=C[E++],I[o++]=C[E++],S-=3;S&&(I[o++]=C[E++],S>1&&(I[o++]=C[E++]))}else{E=o-T;do I[o++]=I[E++],I[o++]=I[E++],I[o++]=I[E++],S-=3;while(S>2);S&&(I[o++]=I[E++],S>1&&(I[o++]=I[E++]))}}else if(w&64){e.msg="invalid distance code",n.mode=l0;break e}else{x=y[(x&65535)+(b&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){n.mode=qMe;break e}else{e.msg="invalid literal/length code",n.mode=l0;break e}else{x=g[(x&65535)+(b&(1<<w)-1)];continue t}break}}while(s<i&&o<l);S=m>>3,s-=S,m-=S<<3,b&=(1<<m)-1,e.next_in=s,e.next_out=o,e.avail_in=s<i?5+(i-s):5-(s-i),e.avail_out=o<l?257+(l-o):257-(o-l),n.hold=b,n.bits=m},c3=ma,cu=15,u3=852,d3=592,h3=0,f1=1,f3=2,YMe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],XMe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],JMe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ZMe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],QMe=function(e,r,n,s,i,o,a,l){var c=l.bits,u=0,d=0,h=0,f=0,b=0,m=0,g=0,y=0,v=0,_=0,x,w,S,T,E,C=null,A=0,I,P=new c3.Buf16(cu+1),D=new c3.Buf16(cu+1),R=null,F=0,G,z,K;for(u=0;u<=cu;u++)P[u]=0;for(d=0;d<s;d++)P[r[n+d]]++;for(b=c,f=cu;f>=1&&P[f]===0;f--);if(b>f&&(b=f),f===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<f&&P[h]===0;h++);for(b<h&&(b=h),y=1,u=1;u<=cu;u++)if(y<<=1,y-=P[u],y<0)return-1;if(y>0&&(e===h3||f!==1))return-1;for(D[1]=0,u=1;u<cu;u++)D[u+1]=D[u]+P[u];for(d=0;d<s;d++)r[n+d]!==0&&(a[D[r[n+d]]++]=d);if(e===h3?(C=R=a,I=19):e===f1?(C=YMe,A-=257,R=XMe,F-=257,I=256):(C=JMe,R=ZMe,I=-1),_=0,d=0,u=h,E=o,m=b,g=0,S=-1,v=1<<b,T=v-1,e===f1&&v>u3||e===f3&&v>d3)return 1;for(;;){G=u-g,a[d]<I?(z=0,K=a[d]):a[d]>I?(z=R[F+a[d]],K=C[A+a[d]]):(z=96,K=0),x=1<<u-g,w=1<<m,h=w;do w-=x,i[E+(_>>g)+w]=G<<24|z<<16|K|0;while(w!==0);for(x=1<<u-1;_&x;)x>>=1;if(x!==0?(_&=x-1,_+=x):_=0,d++,--P[u]===0){if(u===f)break;u=r[n+a[d]]}if(u>b&&(_&T)!==S){for(g===0&&(g=b),E+=h,m=u-g,y=1<<m;m+g<f&&(y-=P[m+g],!(y<=0));)m++,y<<=1;if(v+=1<<m,e===f1&&v>u3||e===f3&&v>d3)return 1;S=_&T,i[S]=b<<24|m<<16|E-o|0}}return _!==0&&(i[E+_]=u-g<<24|64<<16|0),l.bits=b,0},Is=ma,_C=qW,zi=KW,eje=KMe,Af=QMe,tje=0,iV=1,oV=2,p3=4,rje=5,c0=6,Rc=0,nje=1,sje=2,oi=-2,aV=-3,lV=-4,ije=-5,m3=8,cV=1,g3=2,b3=3,y3=4,v3=5,_3=6,x3=7,w3=8,S3=9,E3=10,Hy=11,Lo=12,p1=13,C3=14,m1=15,T3=16,k3=17,A3=18,R3=19,u0=20,d0=21,P3=22,I3=23,N3=24,D3=25,O3=26,g1=27,L3=28,M3=29,yr=30,uV=31,oje=32,aje=852,lje=592,cje=15,uje=cje;function j3(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function dje(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Is.Buf16(320),this.work=new Is.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function dV(t){var e;return!t||!t.state?oi:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=cV,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Is.Buf32(aje),e.distcode=e.distdyn=new Is.Buf32(lje),e.sane=1,e.back=-1,Rc)}function hV(t){var e;return!t||!t.state?oi:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,dV(t))}function fV(t,e){var r,n;return!t||!t.state||(n=t.state,e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?oi:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,hV(t))}function pV(t,e){var r,n;return t?(n=new dje,t.state=n,n.window=null,r=fV(t,e),r!==Rc&&(t.state=null),r):oi}function hje(t){return pV(t,uje)}var F3=!0,b1,y1;function fje(t){if(F3){var e;for(b1=new Is.Buf32(512),y1=new Is.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Af(iV,t.lens,0,288,b1,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Af(oV,t.lens,0,32,y1,0,t.work,{bits:5}),F3=!1}t.lencode=b1,t.lenbits=9,t.distcode=y1,t.distbits=5}function mV(t,e,r,n){var s,i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Is.Buf8(i.wsize)),n>=i.wsize?(Is.arraySet(i.window,e,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),Is.arraySet(i.window,e,r-n,s,i.wnext),n-=s,n?(Is.arraySet(i.window,e,r-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0}function pje(t,e){var r,n,s,i,o,a,l,c,u,d,h,f,b,m,g=0,y,v,_,x,w,S,T,E,C=new Is.Buf8(4),A,I,P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return oi;r=t.state,r.mode===Lo&&(r.mode=p1),o=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,c=r.hold,u=r.bits,d=a,h=l,E=Rc;e:for(;;)switch(r.mode){case cV:if(r.wrap===0){r.mode=p1;break}for(;u<16;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}if(r.wrap&2&&c===35615){r.check=0,C[0]=c&255,C[1]=c>>>8&255,r.check=zi(r.check,C,2,0),c=0,u=0,r.mode=g3;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=yr;break}if((c&15)!==m3){t.msg="unknown compression method",r.mode=yr;break}if(c>>>=4,u-=4,T=(c&15)+8,r.wbits===0)r.wbits=T;else if(T>r.wbits){t.msg="invalid window size",r.mode=yr;break}r.dmax=1<<T,t.adler=r.check=1,r.mode=c&512?E3:Lo,c=0,u=0;break;case g3:for(;u<16;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}if(r.flags=c,(r.flags&255)!==m3){t.msg="unknown compression method",r.mode=yr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=yr;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,r.check=zi(r.check,C,2,0)),c=0,u=0,r.mode=b3;case b3:for(;u<32;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}r.head&&(r.head.time=c),r.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,r.check=zi(r.check,C,4,0)),c=0,u=0,r.mode=y3;case y3:for(;u<16;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,r.check=zi(r.check,C,2,0)),c=0,u=0,r.mode=v3;case v3:if(r.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&(C[0]=c&255,C[1]=c>>>8&255,r.check=zi(r.check,C,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=_3;case _3:if(r.flags&1024&&(f=r.length,f>a&&(f=a),f&&(r.head&&(T=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),Is.arraySet(r.head.extra,n,i,f,T)),r.flags&512&&(r.check=zi(r.check,n,f,i)),a-=f,i+=f,r.length-=f),r.length))break e;r.length=0,r.mode=x3;case x3:if(r.flags&2048){if(a===0)break e;f=0;do T=n[i+f++],r.head&&T&&r.length<65536&&(r.head.name+=String.fromCharCode(T));while(T&&f<a);if(r.flags&512&&(r.check=zi(r.check,n,f,i)),a-=f,i+=f,T)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=w3;case w3:if(r.flags&4096){if(a===0)break e;f=0;do T=n[i+f++],r.head&&T&&r.length<65536&&(r.head.comment+=String.fromCharCode(T));while(T&&f<a);if(r.flags&512&&(r.check=zi(r.check,n,f,i)),a-=f,i+=f,T)break e}else r.head&&(r.head.comment=null);r.mode=S3;case S3:if(r.flags&512){for(;u<16;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}if(c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=yr;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Lo;break;case E3:for(;u<32;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}t.adler=r.check=j3(c),c=0,u=0,r.mode=Hy;case Hy:if(r.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=u,sje;t.adler=r.check=1,r.mode=Lo;case Lo:if(e===rje||e===c0)break e;case p1:if(r.last){c>>>=u&7,u-=u&7,r.mode=g1;break}for(;u<3;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}switch(r.last=c&1,c>>>=1,u-=1,c&3){case 0:r.mode=C3;break;case 1:if(fje(r),r.mode=u0,e===c0){c>>>=2,u-=2;break e}break;case 2:r.mode=k3;break;case 3:t.msg="invalid block type",r.mode=yr}c>>>=2,u-=2;break;case C3:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=yr;break}if(r.length=c&65535,c=0,u=0,r.mode=m1,e===c0)break e;case m1:r.mode=T3;case T3:if(f=r.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;Is.arraySet(s,n,i,f,o),a-=f,i+=f,l-=f,o+=f,r.length-=f;break}r.mode=Lo;break;case k3:for(;u<14;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}if(r.nlen=(c&31)+257,c>>>=5,u-=5,r.ndist=(c&31)+1,c>>>=5,u-=5,r.ncode=(c&15)+4,c>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=yr;break}r.have=0,r.mode=A3;case A3:for(;r.have<r.ncode;){for(;u<3;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}r.lens[P[r.have++]]=c&7,c>>>=3,u-=3}for(;r.have<19;)r.lens[P[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,A={bits:r.lenbits},E=Af(tje,r.lens,0,19,r.lencode,0,r.work,A),r.lenbits=A.bits,E){t.msg="invalid code lengths set",r.mode=yr;break}r.have=0,r.mode=R3;case R3:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[c&(1<<r.lenbits)-1],y=g>>>24,v=g>>>16&255,_=g&65535,!(y<=u);){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}if(_<16)c>>>=y,u-=y,r.lens[r.have++]=_;else{if(_===16){for(I=y+2;u<I;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}if(c>>>=y,u-=y,r.have===0){t.msg="invalid bit length repeat",r.mode=yr;break}T=r.lens[r.have-1],f=3+(c&3),c>>>=2,u-=2}else if(_===17){for(I=y+3;u<I;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}c>>>=y,u-=y,T=0,f=3+(c&7),c>>>=3,u-=3}else{for(I=y+7;u<I;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}c>>>=y,u-=y,T=0,f=11+(c&127),c>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=yr;break}for(;f--;)r.lens[r.have++]=T}}if(r.mode===yr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=yr;break}if(r.lenbits=9,A={bits:r.lenbits},E=Af(iV,r.lens,0,r.nlen,r.lencode,0,r.work,A),r.lenbits=A.bits,E){t.msg="invalid literal/lengths set",r.mode=yr;break}if(r.distbits=6,r.distcode=r.distdyn,A={bits:r.distbits},E=Af(oV,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,A),r.distbits=A.bits,E){t.msg="invalid distances set",r.mode=yr;break}if(r.mode=u0,e===c0)break e;case u0:r.mode=d0;case d0:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=u,eje(t,h),o=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,c=r.hold,u=r.bits,r.mode===Lo&&(r.back=-1);break}for(r.back=0;g=r.lencode[c&(1<<r.lenbits)-1],y=g>>>24,v=g>>>16&255,_=g&65535,!(y<=u);){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}if(v&&!(v&240)){for(x=y,w=v,S=_;g=r.lencode[S+((c&(1<<x+w)-1)>>x)],y=g>>>24,v=g>>>16&255,_=g&65535,!(x+y<=u);){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}c>>>=x,u-=x,r.back+=x}if(c>>>=y,u-=y,r.back+=y,r.length=_,v===0){r.mode=O3;break}if(v&32){r.back=-1,r.mode=Lo;break}if(v&64){t.msg="invalid literal/length code",r.mode=yr;break}r.extra=v&15,r.mode=P3;case P3:if(r.extra){for(I=r.extra;u<I;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=I3;case I3:for(;g=r.distcode[c&(1<<r.distbits)-1],y=g>>>24,v=g>>>16&255,_=g&65535,!(y<=u);){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}if(!(v&240)){for(x=y,w=v,S=_;g=r.distcode[S+((c&(1<<x+w)-1)>>x)],y=g>>>24,v=g>>>16&255,_=g&65535,!(x+y<=u);){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}c>>>=x,u-=x,r.back+=x}if(c>>>=y,u-=y,r.back+=y,v&64){t.msg="invalid distance code",r.mode=yr;break}r.offset=_,r.extra=v&15,r.mode=N3;case N3:if(r.extra){for(I=r.extra;u<I;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=yr;break}r.mode=D3;case D3:if(l===0)break e;if(f=h-l,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=yr;break}f>r.wnext?(f-=r.wnext,b=r.wsize-f):b=r.wnext-f,f>r.length&&(f=r.length),m=r.window}else m=s,b=o-r.offset,f=r.length;f>l&&(f=l),l-=f,r.length-=f;do s[o++]=m[b++];while(--f);r.length===0&&(r.mode=d0);break;case O3:if(l===0)break e;s[o++]=r.length,l--,r.mode=d0;break;case g1:if(r.wrap){for(;u<32;){if(a===0)break e;a--,c|=n[i++]<<u,u+=8}if(h-=l,t.total_out+=h,r.total+=h,h&&(t.adler=r.check=r.flags?zi(r.check,s,h,o-h):_C(r.check,s,h,o-h)),h=l,(r.flags?c:j3(c))!==r.check){t.msg="incorrect data check",r.mode=yr;break}c=0,u=0}r.mode=L3;case L3:if(r.wrap&&r.flags){for(;u<32;){if(a===0)break e;a--,c+=n[i++]<<u,u+=8}if(c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=yr;break}c=0,u=0}r.mode=M3;case M3:E=nje;break e;case yr:E=aV;break e;case uV:return lV;case oje:default:return oi}return t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=u,(r.wsize||h!==t.avail_out&&r.mode<yr&&(r.mode<g1||e!==p3))&&mV(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,r.total+=h,r.wrap&&h&&(t.adler=r.check=r.flags?zi(r.check,s,h,t.next_out-h):_C(r.check,s,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Lo?128:0)+(r.mode===u0||r.mode===m1?256:0),(d===0&&h===0||e===p3)&&E===Rc&&(E=ije),E}function mje(t){if(!t||!t.state)return oi;var e=t.state;return e.window&&(e.window=null),t.state=null,Rc}function gje(t,e){var r;return!t||!t.state||(r=t.state,!(r.wrap&2))?oi:(r.head=e,e.done=!1,Rc)}function bje(t,e){var r=e.length,n,s,i;return!t||!t.state||(n=t.state,n.wrap!==0&&n.mode!==Hy)?oi:n.mode===Hy&&(s=1,s=_C(s,e,r,0),s!==n.check)?aV:(i=mV(t,e,r,r),i?(n.mode=uV,lV):(n.havedict=1,Rc))}Li.inflateReset=hV;Li.inflateReset2=fV;Li.inflateResetKeep=dV;Li.inflateInit=hje;Li.inflateInit2=pV;Li.inflate=pje;Li.inflateEnd=mje;Li.inflateGetHeader=gje;Li.inflateSetDictionary=bje;Li.inflateInfo="pako inflate (from Nodeca project)";var gV={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function yje(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var vje=yje,rd=Li,Rf=ma,ab=Hc,Or=gV,xC=i2,_je=nV,xje=vje,bV=Object.prototype.toString;function Pc(t){if(!(this instanceof Pc))return new Pc(t);this.options=Rf.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _je,this.strm.avail_out=0;var r=rd.inflateInit2(this.strm,e.windowBits);if(r!==Or.Z_OK)throw new Error(xC[r]);if(this.header=new xje,rd.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=ab.string2buf(e.dictionary):bV.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=rd.inflateSetDictionary(this.strm,e.dictionary),r!==Or.Z_OK)))throw new Error(xC[r])}Pc.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,s=this.options.dictionary,i,o,a,l,c,u=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?Or.Z_FINISH:Or.Z_NO_FLUSH,typeof t=="string"?r.input=ab.binstring2buf(t):bV.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Rf.Buf8(n),r.next_out=0,r.avail_out=n),i=rd.inflate(r,Or.Z_NO_FLUSH),i===Or.Z_NEED_DICT&&s&&(i=rd.inflateSetDictionary(this.strm,s)),i===Or.Z_BUF_ERROR&&u===!0&&(i=Or.Z_OK,u=!1),i!==Or.Z_STREAM_END&&i!==Or.Z_OK)return this.onEnd(i),this.ended=!0,!1;r.next_out&&(r.avail_out===0||i===Or.Z_STREAM_END||r.avail_in===0&&(o===Or.Z_FINISH||o===Or.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=ab.utf8border(r.output,r.next_out),l=r.next_out-a,c=ab.buf2string(r.output,a),r.next_out=l,r.avail_out=n-l,l&&Rf.arraySet(r.output,r.output,a,l,0),this.onData(c)):this.onData(Rf.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(u=!0)}while((r.avail_in>0||r.avail_out===0)&&i!==Or.Z_STREAM_END);return i===Or.Z_STREAM_END&&(o=Or.Z_FINISH),o===Or.Z_FINISH?(i=rd.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Or.Z_OK):(o===Or.Z_SYNC_FLUSH&&(this.onEnd(Or.Z_OK),r.avail_out=0),!0)};Pc.prototype.onData=function(t){this.chunks.push(t)};Pc.prototype.onEnd=function(t){t===Or.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Rf.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function a2(t,e){var r=new Pc(e);if(r.push(t,!0),r.err)throw r.msg||xC[r.err];return r.result}function wje(t,e){return e=e||{},e.raw=!0,a2(t,e)}_m.Inflate=Pc;_m.inflate=a2;_m.inflateRaw=wje;_m.ungzip=a2;var Sje=ma.assign,Eje=bm,Cje=_m,Tje=gV,yV={};Sje(yV,Eje,Cje,Tje);var kje=yV;const B3=(t,e)=>function(...r){const n=e.promiseModule;return new n((s,i)=>{e.multiArgs?r.push((...o)=>{e.errorFirst?o[0]?i(o):(o.shift(),s(o)):s(o)}):e.errorFirst?r.push((o,a)=>{o?i(o):s(a)}):r.push(s),t.apply(this,r)})};var Aje=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const n=i=>{const o=a=>typeof a=="string"?i===a:a.test(i);return e.include?e.include.some(o):!e.exclude.some(o)};let s;r==="function"?s=function(...i){return e.excludeMain?t(...i):B3(t,e).apply(this,i)}:s=Object.create(Object.getPrototypeOf(t));for(const i in t){const o=t[i];s[i]=typeof o=="function"&&n(i)?B3(o,e):o}return s},$3={};function U3(t){return Array.isArray(t)?t:[t]}const wC="",H3=" ",v1="\\",Rje=/^\s+$/,Pje=/(?:[^\\]|^)\\$/,Ije=/^\\!/,Nje=/^\\#/,Dje=/\r?\n/g,Oje=/^\.*\/|^\.+$/,_1="/";let vV="node-ignore";typeof Symbol<"u"&&(vV=Symbol.for("node-ignore"));const z3=vV,Lje=(t,e,r)=>Object.defineProperty(t,e,{value:r}),Mje=/([0-z])-([0-z])/g,_V=()=>!1,jje=t=>t.replace(Mje,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:wC),Fje=t=>{const{length:e}=t;return t.slice(0,e-e%2)},Bje=[[/^\uFEFF/,()=>wC],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,r)=>e+(r.indexOf("\\")===0?H3:wC)],[/(\\+?)\s/g,(t,e)=>{const{length:r}=e;return e.slice(0,r-r%2)+H3}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{const n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>v1],[/\\\\/g,()=>v1],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,s)=>e===v1?`\\[${r}${Fje(n)}${s}`:s==="]"&&n.length%2===0?`[${jje(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],W3=Object.create(null),$je=(t,e)=>{let r=W3[t];return r||(r=Bje.reduce((n,[s,i])=>n.replace(s,i.bind(t)),t),W3[t]=r),e?new RegExp(r,"i"):new RegExp(r)},l2=t=>typeof t=="string",Uje=t=>t&&l2(t)&&!Rje.test(t)&&!Pje.test(t)&&t.indexOf("#")!==0,Hje=t=>t.split(Dje);class zje{constructor(e,r,n,s){this.origin=e,this.pattern=r,this.negative=n,this.regex=s}}const Wje=(t,e)=>{const r=t;let n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(Ije,"!").replace(Nje,"#");const s=$je(t,e);return new zje(r,t,n,s)},Vje=(t,e)=>{throw new e(t)},ua=(t,e,r)=>l2(t)?t?ua.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),xV=t=>Oje.test(t);ua.isNotRelative=xV;ua.convert=t=>t;class Gje{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){Lje(this,z3,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[z3]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(Uje(e)){const r=Wje(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,U3(l2(e)?Hje(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,s=!1;return this._rules.forEach(i=>{const{negative:o}=i;if(s===o&&n!==s||o&&!n&&!s&&!r)return;i.regex.test(e)&&(n=!o,s=o)}),{ignored:n,unignored:s}}_test(e,r,n,s){const i=e&&ua.convert(e);return ua(i,e,this._allowRelativePaths?_V:Vje),this._t(i,r,n,s)}_t(e,r,n,s){if(e in r)return r[e];if(s||(s=e.split(_1)),s.pop(),!s.length)return r[e]=this._testOne(e,n);const i=this._t(s.join(_1)+_1,r,n,s);return r[e]=i.ignored?i:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return U3(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}}const zy=t=>new Gje(t),qje=t=>ua(t&&ua.convert(t),t,_V);zy.isPathValid=qje;zy.default=zy;var Kje=zy;if(typeof xr<"u"&&($3&&$3.IGNORE_TEST_WIN32||xr.platform==="win32")){const t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");ua.convert=t;const e=/^[a-z]:\//i;ua.isNotRelative=r=>e.test(r)||xV(r)}function Yje(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Wi(t,e,r){return e=e instanceof RegExp?e:new RegExp(Yje(e),"g"),t.replace(e,r)}var Xje={clean:function(e){if(typeof e!="string")throw new Error("Expected a string, received: "+e);return e=Wi(e,"./","/"),e=Wi(e,"..","."),e=Wi(e," ","-"),e=Wi(e,/^[~^:?*\\\-]/g,""),e=Wi(e,/[~^:?*\\]/g,"-"),e=Wi(e,/[~^:?*\\\-]$/g,""),e=Wi(e,"@{","-"),e=Wi(e,/\.$/g,""),e=Wi(e,/\/$/g,""),e=Wi(e,/\.lock$/g,""),e}},Jje=Xje,Zje=function(t,e){var r=t,n=e,s=r.length,i=n.length,o=!1,a=null,l=s+1,c=[],u=[],d=[],h="",f=-1,b=0,m=1,g,y,v=function(){s>=i&&(g=r,y=s,r=n,n=g,s=i,i=y,o=!0,l=s+1)},_=function(T,E,C){return{x:T,y:E,k:C}},x=function(T,E){return{elem:T,t:E}},w=function(T,E,C){var A,I,P;for(E>C?A=c[T-1+l]:A=c[T+1+l],P=Math.max(E,C),I=P-T;I<s&&P<i&&r[I]===n[P];)++I,++P;return c[T+l]=u.length,u[u.length]=new _(I,P,A),P},S=function(T){var E,C,A;for(E=C=0,A=T.length-1;A>=0;--A)for(;E<T[A].x||C<T[A].y;)T[A].y-T[A].x>C-E?(o?d[d.length]=new x(n[C],f):d[d.length]=new x(n[C],m),++C):T[A].y-T[A].x<C-E?(o?d[d.length]=new x(r[E],m):d[d.length]=new x(r[E],f),++E):(d[d.length]=new x(r[E],b),h+=r[E],++E,++C)};return v(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return a},getlcs:function(){return h},getses:function(){return d},compose:function(){var T,E,C,A,I,P,D,R;for(T=i-s,E=s+i+3,C={},D=0;D<E;++D)C[D]=-1,c[D]=-1;A=-1;do{for(++A,R=-A;R<=T-1;++R)C[R+l]=w(R,C[R-1+l]+1,C[R+1+l]);for(R=T+A;R>=T+1;--R)C[R+l]=w(R,C[R-1+l]+1,C[R+1+l]);C[T+l]=w(T,C[T-1+l]+1,C[T+1+l])}while(C[T+l]!==i);for(a=T+2*A,I=c[T+l],P=[];I!==-1;)P[P.length]=new _(u[I].x,u[I].y,null),I=u[I].k;S(P)}}},Qje=Zje;function e5e(t,e){var r=new Qje(t,e);r.compose();for(var n=r.getses(),s,i,o=t.length-1,a=e.length-1,l=n.length-1;l>=0;--l)n[l].t===r.SES_COMMON?(i?(i.chain={file1index:o,file2index:a,chain:null},i=i.chain):(s={file1index:o,file2index:a,chain:null},i=s),o--,a--):n[l].t===r.SES_DELETE?o--:n[l].t===r.SES_ADD&&a--;var c={file1index:-1,file2index:-1,chain:null};return i?(i.chain=c,s):c}function V3(t,e){for(var r=[],n=t.length,s=e.length,i=e5e(t,e);i!==null;i=i.chain){var o=n-i.file1index-1,a=s-i.file2index-1;n=i.file1index,s=i.file2index,(o||a)&&r.push({file1:[n+1,o],file2:[s+1,a]})}return r.reverse(),r}function t5e(t,e,r){var n,s=V3(e,t),i=V3(e,r),o=[];function a(D,R){o.push([D.file1[0],R,D.file1[1],D.file2[0],D.file2[1]])}for(n=0;n<s.length;n++)a(s[n],0);for(n=0;n<i.length;n++)a(i[n],2);o.sort(function(D,R){return D[0]-R[0]});var l=[],c=0;function u(D){D>c&&(l.push([1,c,D-c]),c=D)}for(var d=0;d<o.length;d++){for(var h=d,f=o[d],b=f[0],m=b+f[2];d<o.length-1;){var g=o[d+1],y=g[0];if(y>m)break;m=Math.max(m,y+g[2]),d++}if(u(b),h==d)f[4]>0&&l.push([f[1],f[3],f[4]]);else{var v={0:[t.length,-1,e.length,-1],2:[r.length,-1,e.length,-1]};for(n=h;n<=d;n++){f=o[n];var _=f[1],x=v[_],w=f[0],S=w+f[2],T=f[3],E=T+f[4];x[0]=Math.min(T,x[0]),x[1]=Math.max(E,x[1]),x[2]=Math.min(w,x[2]),x[3]=Math.max(S,x[3])}var C=v[0][0]+(b-v[0][2]),A=v[0][1]+(m-v[0][3]),I=v[2][0]+(b-v[2][2]),P=v[2][1]+(m-v[2][3]);l.push([-1,C,A-C,b,m-b,I,P-I])}c=m}return u(e.length),l}function r5e(t,e,r){var n=[],s=[t,e,r],i=t5e(t,e,r),o=[];function a(){o.length&&n.push({ok:o}),o=[]}function l(f){for(var b=0;b<f.length;b++)o.push(f[b])}function c(f){if(f[2]!=f[6])return!0;for(var b=f[1],m=f[5],g=0;g<f[2];g++)if(t[g+b]!=r[g+m])return!0;return!1}for(var u=0;u<i.length;u++){var d=i[u],h=d[0];h==-1?c(d)?(a(),n.push({conflict:{a:t.slice(d[1],d[1]+d[2]),aIndex:d[1],o:e.slice(d[3],d[3]+d[4]),oIndex:d[3],b:r.slice(d[5],d[5]+d[6]),bIndex:d[5]}})):l(s[0].slice(d[1],d[1]+d[2])):l(s[h].slice(d[1],d[1]+d[2]))}return a(),n}var n5e=r5e;Object.defineProperty(Xe,"__esModule",{value:!0});function Tl(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var Ap=Tl(c3e),wV=Tl(L3e),s5e=Tl(IW),c2=Tl(kje),h0=Tl(Aje),i5e=Tl(Kje),Rp=Tl(Jje),o5e=Tl(n5e);class Mt extends Error{constructor(e){super(e),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(e){const r=new Mt(e.message);return r.code=e.code,r.data=e.data,r.caller=e.caller,r.stack=e.stack,r}get isIsomorphicGitError(){return!0}}class xm extends Mt{constructor(e){super(`Modifying the index is not possible because you have unmerged files: ${e.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=xm.code,this.data={filepaths:e}}}xm.code="UnmergedPathsError";class vt extends Mt{constructor(e){super(`An internal error caused this command to fail.

If you're not a developer, report the bug to the developers of the application you're using. If this is a bug in isomorphic-git then you should create a proper bug yourselves. The bug should include a minimal reproduction and details about the version and environment.

Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${e}`),this.code=this.name=vt.code,this.data={message:e}}}vt.code="InternalError";class Qd extends Mt{constructor(e){super(`The filepath "${e}" contains unsafe character sequences`),this.code=this.name=Qd.code,this.data={filepath:e}}}Qd.code="UnsafeFilepathError";class ao{constructor(e){this.buffer=e,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(e){this._start=e}slice(e){const r=this.buffer.slice(this._start,this._start+e);return this._start+=e,r}toString(e,r){const n=this.buffer.toString(e,this._start,this._start+r);return this._start+=r,n}write(e,r,n){const s=this.buffer.write(e,this._start,r,n);return this._start+=r,s}copy(e,r,n){const s=e.copy(this.buffer,this._start,r,n);return this._start+=s,s}readUInt8(){const e=this.buffer.readUInt8(this._start);return this._start+=1,e}writeUInt8(e){const r=this.buffer.writeUInt8(e,this._start);return this._start+=1,r}readUInt16BE(){const e=this.buffer.readUInt16BE(this._start);return this._start+=2,e}writeUInt16BE(e){const r=this.buffer.writeUInt16BE(e,this._start);return this._start+=2,r}readUInt32BE(){const e=this.buffer.readUInt32BE(this._start);return this._start+=4,e}writeUInt32BE(e){const r=this.buffer.writeUInt32BE(e,this._start);return this._start+=4,r}}function T_(t,e){return-(t<e)||+(t>e)}function SV(t,e){return T_(t.path,e.path)}function EV(t){let e=t>0?t>>12:0;e!==4&&e!==8&&e!==10&&e!==14&&(e=8);let r=t&511;return r&73?r=493:r=420,e!==8&&(r=0),(e<<12)+r}const Vi=2**32;function G3(t,e,r,n){if(t!==void 0&&e!==void 0)return[t,e];r===void 0&&(r=n.valueOf());const s=Math.floor(r/1e3),i=(r-s*1e3)*1e6;return[s,i]}function Ed(t){const[e,r]=G3(t.ctimeSeconds,t.ctimeNanoseconds,t.ctimeMs,t.ctime),[n,s]=G3(t.mtimeSeconds,t.mtimeNanoseconds,t.mtimeMs,t.mtime);return{ctimeSeconds:e%Vi,ctimeNanoseconds:r%Vi,mtimeSeconds:n%Vi,mtimeNanoseconds:s%Vi,dev:t.dev%Vi,ino:t.ino%Vi,mode:EV(t.mode%Vi),uid:t.uid%Vi,gid:t.gid%Vi,size:t.size>-1?t.size%Vi:0}}function a5e(t){let e="";for(const r of new Uint8Array(t))r<16&&(e+="0"),e+=r.toString(16);return e}let x1=null;async function da(t){return x1===null&&(x1=await c5e()),x1?CV(t):l5e(t)}function l5e(t){return new wV().update(t).digest("hex")}async function CV(t){const e=await crypto.subtle.digest("SHA-1",t);return a5e(e)}async function c5e(){try{return await CV(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709"}catch{}return!1}function u5e(t){return{assumeValid:!!(t&32768),extended:!!(t&16384),stage:(t&12288)>>12,nameLength:t&4095}}function d5e(t){const e=t.flags;return e.extended=!1,e.nameLength=Math.min(qe.from(t.path).length,4095),(e.assumeValid?32768:0)+(e.extended?16384:0)+((e.stage&3)<<12)+(e.nameLength&4095)}class Kl{constructor(e,r){this._dirty=!1,this._unmergedPaths=r||new Set,this._entries=e||new Map}_addEntry(e){if(e.flags.stage===0)e.stages=[e],this._entries.set(e.path,e),this._unmergedPaths.delete(e.path);else{let r=this._entries.get(e.path);r||(this._entries.set(e.path,e),r=e),r.stages[e.flags.stage]=e,this._unmergedPaths.add(e.path)}}static async from(e){if(qe.isBuffer(e))return Kl.fromBuffer(e);if(e===null)return new Kl(null);throw new vt("invalid type passed to GitIndex.from")}static async fromBuffer(e){if(e.length===0)throw new vt("Index file is empty (.git/index)");const r=new Kl,n=new ao(e),s=n.toString("utf8",4);if(s!=="DIRC")throw new vt(`Invalid dircache magic file number: ${s}`);const i=await da(e.slice(0,-20)),o=e.slice(-20).toString("hex");if(o!==i)throw new vt(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const a=n.readUInt32BE();if(a!==2)throw new vt(`Unsupported dircache version: ${a}`);const l=n.readUInt32BE();let c=0;for(;!n.eof()&&c<l;){const u={};u.ctimeSeconds=n.readUInt32BE(),u.ctimeNanoseconds=n.readUInt32BE(),u.mtimeSeconds=n.readUInt32BE(),u.mtimeNanoseconds=n.readUInt32BE(),u.dev=n.readUInt32BE(),u.ino=n.readUInt32BE(),u.mode=n.readUInt32BE(),u.uid=n.readUInt32BE(),u.gid=n.readUInt32BE(),u.size=n.readUInt32BE(),u.oid=n.slice(20).toString("hex");const d=n.readUInt16BE();u.flags=u5e(d);const h=e.indexOf(0,n.tell()+1)-n.tell();if(h<1)throw new vt(`Got a path length of: ${h}`);if(u.path=n.toString("utf8",h),u.path.includes("..\\")||u.path.includes("../"))throw new Qd(u.path);let f=8-(n.tell()-12)%8;for(f===0&&(f=8);f--;){const b=n.readUInt8();if(b!==0)throw new vt(`Expected 1-8 null characters but got '${b}' after ${u.path}`);if(n.eof())throw new vt("Unexpected end of file")}u.stages=[],r._addEntry(u),c++}return r}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(SV)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(e=>e.stages.length>1?e.stages.filter(r=>r):e)}*[Symbol.iterator](){for(const e of this.entries)yield e}insert({filepath:e,stats:r,oid:n,stage:s=0}){r||(r={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),r=Ed(r);const i=qe.from(e),o={ctimeSeconds:r.ctimeSeconds,ctimeNanoseconds:r.ctimeNanoseconds,mtimeSeconds:r.mtimeSeconds,mtimeNanoseconds:r.mtimeNanoseconds,dev:r.dev,ino:r.ino,mode:r.mode||33188,uid:r.uid,gid:r.gid,size:r.size,path:e,oid:n,flags:{assumeValid:!1,extended:!1,stage:s,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:e}){if(this._entries.has(e))this._entries.delete(e);else for(const r of this._entries.keys())r.startsWith(e+"/")&&this._entries.delete(r);this._unmergedPaths.has(e)&&this._unmergedPaths.delete(e),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:e}){return this._entries.has(e)}render(){return this.entries.map(e=>`${e.mode.toString(8)} ${e.oid}    ${e.path}`).join(`
`)}static async _entryToBuffer(e){const r=qe.from(e.path),n=Math.ceil((62+r.length+1)/8)*8,s=qe.alloc(n),i=new ao(s),o=Ed(e);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(e.oid,20,"hex"),i.writeUInt16BE(d5e(e)),i.write(e.path,r.length,"utf8"),s}async toObject(){const e=qe.alloc(12),r=new ao(e);r.write("DIRC",4,"utf8"),r.writeUInt32BE(2),r.writeUInt32BE(this.entriesFlat.length);let n=[];for(const a of this.entries)if(n.push(Kl._entryToBuffer(a)),a.stages.length>1)for(const l of a.stages)l&&l!==a&&n.push(Kl._entryToBuffer(l));n=await Promise.all(n);const s=qe.concat(n),i=qe.concat([e,s]),o=await da(i);return qe.concat([i,qe.from(o,"hex")])}}function Wy(t,e,r=!0,n=!0){const s=Ed(t),i=Ed(e);return r&&s.mode!==i.mode||s.mtimeSeconds!==i.mtimeSeconds||s.ctimeSeconds!==i.ctimeSeconds||s.uid!==i.uid||s.gid!==i.gid||n&&s.ino!==i.ino||s.size!==i.size}let w1=null;const S1=Symbol("IndexCache");function h5e(){return{map:new Map,stats:new Map}}async function f5e(t,e,r){const[n,s]=await Promise.all([t.lstat(e),t.read(e)]),i=await Kl.from(s);r.map.set(e,i),r.stats.set(e,n)}async function p5e(t,e,r){const n=r.stats.get(e);if(n===void 0)return!0;if(n===null)return!1;const s=await t.lstat(e);return s===null?!1:Wy(n,s)}class Wr{static async acquire({fs:e,gitdir:r,cache:n,allowUnmerged:s=!0},i){n[S1]||(n[S1]=h5e());const o=`${r}/index`;w1===null&&(w1=new Ap({maxPending:1/0}));let a,l=[];return await w1.acquire(o,async()=>{const c=n[S1];await p5e(e,o,c)&&await f5e(e,o,c);const u=c.map.get(o);if(l=u.unmergedPaths,l.length&&!s)throw new xm(l);if(a=await i(u),u._dirty){const d=await u.toObject();await e.write(o,d),c.stats.set(o,await e.lstat(o)),u._dirty=!1}}),a}}function Vy(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e>-1&&(t=t.slice(e+1)),t}function Ic(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e===-1?".":e===0?"/":t.slice(0,e)}function TV(t){const e=new Map,r=function(s){if(!e.has(s)){const i={type:"tree",fullpath:s,basename:Vy(s),metadata:{},children:[]};e.set(s,i),i.parent=r(Ic(s)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return e.get(s)},n=function(s,i){if(!e.has(s)){const o={type:"blob",fullpath:s,basename:Vy(s),metadata:i,parent:r(Ic(s)),children:[]};o.parent&&o.parent.children.push(o),e.set(s,o)}return e.get(s)};r(".");for(const s of t)n(s.path,s);return e}function m5e(t){switch(t){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new vt(`Unexpected GitTree entry mode: ${t.toString(8)}`)}class g5e{constructor({fs:e,gitdir:r,cache:n}){this.treePromise=Wr.acquire({fs:e,gitdir:r,cache:n},async function(i){return TV(i.entries)});const s=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(e){const r=e._fullpath,s=(await this.treePromise).get(r);if(!s||s.type==="blob")return null;if(s.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${r}'`);const i=s.children.map(o=>o.fullpath);return i.sort(T_),i}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const n=(await this.treePromise).get(e._fullpath);if(!n)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);const s=n.type==="tree"?{}:Ed(n.metadata);e._type=n.type==="tree"?"tree":m5e(s.mode),e._mode=s.mode,n.type==="tree"?e._stat=void 0:e._stat=s}return e._stat}async content(e){}async oid(e){if(e._oid===!1){const n=(await this.treePromise).get(e._fullpath);e._oid=n.metadata.oid}return e._oid}}const k_=Symbol("GitWalkSymbol");function zc(){const t=Object.create(null);return Object.defineProperty(t,k_,{value:function({fs:e,gitdir:r,cache:n}){return new g5e({fs:e,gitdir:r,cache:n})}}),Object.freeze(t),t}class Zt extends Mt{constructor(e){super(`Could not find ${e}.`),this.code=this.name=Zt.code,this.data={what:e}}}Zt.code="NotFoundError";class es extends Mt{constructor(e,r,n,s){super(`Object ${e} ${s?`at ${s}`:""}was anticipated to be a ${n} but it is a ${r}.`),this.code=this.name=es.code,this.data={oid:e,actual:r,expected:n,filepath:s}}}es.code="ObjectTypeError";class dl extends Mt{constructor(e){super(`Expected a 40-char hex object id but saw "${e}".`),this.code=this.name=dl.code,this.data={value:e}}}dl.code="InvalidOidError";class wm extends Mt{constructor(e){super(`Could not find a fetch refspec for remote "${e}". Make sure the config file has an entry like the following:
[remote "${e}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=wm.code,this.data={remote:e}}}wm.code="NoRefspecError";class Gy{constructor(e){if(this.refs=new Map,this.parsedConfig=[],e){let r=null;this.parsedConfig=e.trim().split(`
`).map(n=>{if(/^\s*#/.test(n))return{line:n,comment:!0};const s=n.indexOf(" ");if(n.startsWith("^")){const i=n.slice(1);return this.refs.set(r+"^{}",i),{line:n,ref:r,peeled:i}}else{const i=n.slice(0,s);return r=n.slice(s+1),this.refs.set(r,i),{line:n,ref:r,oid:i}}})}return this}static from(e){return new Gy(e)}delete(e){this.parsedConfig=this.parsedConfig.filter(r=>r.ref!==e),this.refs.delete(e)}toString(){return this.parsedConfig.map(({line:e})=>e).join(`
`)+`
`}}class qy{constructor({remotePath:e,localPath:r,force:n,matchPrefix:s}){Object.assign(this,{remotePath:e,localPath:r,force:n,matchPrefix:s})}static from(e){const[r,n,s,i,o]=e.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),a=r==="+",l=s==="*";if(l!==(o==="*"))throw new vt("Invalid refspec");return new qy({remotePath:n,localPath:i,force:a,matchPrefix:l})}translate(e){if(this.matchPrefix){if(e.startsWith(this.remotePath))return this.localPath+e.replace(this.remotePath,"")}else if(e===this.remotePath)return this.localPath;return null}reverseTranslate(e){if(this.matchPrefix){if(e.startsWith(this.localPath))return this.remotePath+e.replace(this.localPath,"")}else if(e===this.localPath)return this.remotePath;return null}}class u2{constructor(e=[]){this.rules=e}static from(e){const r=[];for(const n of e)r.push(qy.from(n));return new u2(r)}add(e){const r=qy.from(e);this.rules.push(r)}translate(e){const r=[];for(const n of this.rules)for(const s of e){const i=n.translate(s);i&&r.push([s,i])}return r}translateOne(e){let r=null;for(const n of this.rules){const s=n.translate(e);s&&(r=s)}return r}localNamespaces(){return this.rules.filter(e=>e.matchPrefix).map(e=>e.localPath.replace(/\/$/,""))}}function b5e(t,e){const r=t.replace(/\^\{\}$/,""),n=e.replace(/\^\{\}$/,""),s=-(r<n)||+(r>n);return s===0?t.endsWith("^{}")?1:-1:s}/*!
 * This code for `path.join` is directly copied from @zenfs/core/path for bundle size improvements.
 * SPDX-License-Identifier: LGPL-3.0-or-later
 * Copyright (c) James Prevett and other ZenFS contributors.
 */function y5e(t,e){let r="",n=0,s=-1,i=0,o="\0";for(let a=0;a<=t.length;++a){if(a<t.length)o=t[a];else{if(o==="/")break;o="/"}if(o==="/"){if(!(s===a-1||i===1))if(i===2){if(r.length<2||n!==2||r.at(-1)!=="."||r.at(-2)!=="."){if(r.length>2){const l=r.lastIndexOf("/");l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),s=a,i=0;continue}else if(r.length!==0){r="",n=0,s=a,i=0;continue}}e&&(r+=r.length>0?"/..":"..",n=2)}else r.length>0?r+="/"+t.slice(s+1,a):r=t.slice(s+1,a),n=a-s-1;s=a,i=0}else o==="."&&i!==-1?++i:i=-1}return r}function v5e(t){if(!t.length)return".";const e=t[0]==="/",r=t.at(-1)==="/";return t=y5e(t,!e),t.length?(r&&(t+="/"),e?`/${t}`:t):e?"/":r?"./":"."}function Ne(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":v5e(e)}const _5e=t=>{if(typeof t=="number")return t;t=t.toLowerCase();let e=parseInt(t);return t.endsWith("k")&&(e*=1024),t.endsWith("m")&&(e*=1024*1024),t.endsWith("g")&&(e*=1024*1024*1024),e},Ih=t=>{if(typeof t=="boolean")return t;if(t=t.trim().toLowerCase(),t==="true"||t==="yes"||t==="on")return!0;if(t==="false"||t==="no"||t==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${t}`)},q3={core:{filemode:Ih,bare:Ih,logallrefupdates:Ih,symlinks:Ih,ignorecase:Ih,bigFileThreshold:_5e}},x5e=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,w5e=/^[A-Za-z0-9-.]+$/,S5e=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,E5e=/^[A-Za-z][A-Za-z-]*$/,C5e=/^(.*?)( *[#;].*)$/,T5e=t=>{const e=x5e.exec(t);if(e!=null){const[r,n]=e.slice(1);return[r,n]}return null},k5e=t=>{const e=S5e.exec(t);if(e!=null){const[r,n="true"]=e.slice(1),s=A5e(n),i=R5e(s);return[r,i]}return null},A5e=t=>{const e=C5e.exec(t);if(e==null)return t;const[r,n]=e.slice(1);return K3(r)&&K3(n)?`${r}${n}`:r},K3=t=>(t.match(/(?:^|[^\\])"/g)||[]).length%2!==0,R5e=t=>t.split("").reduce((e,r,n,s)=>{const i=r==='"'&&s[n-1]!=="\\",o=r==="\\"&&s[n+1]==='"';return i||o?e:e+r},""),Y3=t=>t!=null?t.toLowerCase():null,SC=(t,e,r)=>[Y3(t),e,Y3(r)].filter(n=>n!=null).join("."),X3=t=>{const e=t.split("."),r=e.shift(),n=e.pop(),s=e.length?e.join("."):void 0;return{section:r,subsection:s,name:n,path:SC(r,s,n),sectionPath:SC(r,s,null),isSection:!!r}},P5e=(t,e)=>t.reduce((r,n,s)=>e(n)?s:r,-1);class d2{constructor(e){let r=null,n=null;this.parsedConfig=e?e.split(`
`).map(s=>{let i=null,o=null;const a=s.trim(),l=T5e(a),c=l!=null;if(c)[r,n]=l;else{const d=k5e(a);d!=null&&([i,o]=d)}const u=SC(r,n,i);return{line:s,isSection:c,section:r,subsection:n,name:i,value:o,path:u}}):[]}static from(e){return new d2(e)}async get(e,r=!1){const n=X3(e).path,s=this.parsedConfig.filter(i=>i.path===n).map(({section:i,name:o,value:a})=>{const l=q3[i]&&q3[i][o];return l?l(a):a});return r?s:s.pop()}async getall(e){return this.get(e,!0)}async getSubsections(e){return this.parsedConfig.filter(r=>r.isSection&&r.section===e).map(r=>r.subsection)}async deleteSection(e,r){this.parsedConfig=this.parsedConfig.filter(n=>!(n.section===e&&n.subsection===r))}async append(e,r){return this.set(e,r,!0)}async set(e,r,n=!1){const{section:s,subsection:i,name:o,path:a,sectionPath:l,isSection:c}=X3(e),u=P5e(this.parsedConfig,d=>d.path===a);if(r==null)u!==-1&&this.parsedConfig.splice(u,1);else if(u!==-1){const d=this.parsedConfig[u],h=Object.assign({},d,{name:o,value:r,modified:!0});n?this.parsedConfig.splice(u+1,0,h):this.parsedConfig[u]=h}else{const d=this.parsedConfig.findIndex(f=>f.path===l),h={section:s,subsection:i,name:o,value:r,modified:!0,path:a};if(w5e.test(s)&&E5e.test(o))if(d>=0)this.parsedConfig.splice(d+1,0,h);else{const f={isSection:c,section:s,subsection:i,modified:!0,path:l};this.parsedConfig.push(f,h)}}}toString(){return this.parsedConfig.map(({line:e,section:r,subsection:n,name:s,value:i,modified:o=!1})=>o?s!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${s} = "${i}"`:`	${s} = ${i}`:n!=null?`[${r} "${n}"]`:`[${r}]`:e).join(`
`)}}class Gr{static async get({fs:e,gitdir:r}){const n=await e.read(`${r}/config`,{encoding:"utf8"});return d2.from(n)}static async save({fs:e,gitdir:r,config:n}){await e.write(`${r}/config`,n.toString(),{encoding:"utf8"})}}const f0=t=>[`${t}`,`refs/${t}`,`refs/tags/${t}`,`refs/heads/${t}`,`refs/remotes/${t}`,`refs/remotes/${t}/HEAD`],I5e=["config","description","index","shallow","commondir"];let E1;async function ka(t,e){return E1===void 0&&(E1=new Ap),E1.acquire(t,e)}class $e{static async updateRemoteRefs({fs:e,gitdir:r,remote:n,refs:s,symrefs:i,tags:o,refspecs:a=void 0,prune:l=!1,pruneTags:c=!1}){for(const g of s.values())if(!g.match(/[0-9a-f]{40}/))throw new dl(g);const u=await Gr.get({fs:e,gitdir:r});if(!a){if(a=await u.getall(`remote.${n}.fetch`),a.length===0)throw new wm(n);a.unshift(`+HEAD:refs/remotes/${n}/HEAD`)}const d=u2.from(a),h=new Map;if(c){const g=await $e.listRefs({fs:e,gitdir:r,filepath:"refs/tags"});await $e.deleteRefs({fs:e,gitdir:r,refs:g.map(y=>`refs/tags/${y}`)})}if(o){for(const g of s.keys())if(g.startsWith("refs/tags")&&!g.endsWith("^{}")&&!await $e.exists({fs:e,gitdir:r,ref:g})){const y=s.get(g);h.set(g,y)}}const f=d.translate([...s.keys()]);for(const[g,y]of f){const v=s.get(g);h.set(y,v)}const b=d.translate([...i.keys()]);for(const[g,y]of b){const v=i.get(g),_=d.translateOne(v);_&&h.set(y,`ref: ${_}`)}const m=[];if(l){for(const g of d.localNamespaces()){const y=(await $e.listRefs({fs:e,gitdir:r,filepath:g})).map(v=>`${g}/${v}`);for(const v of y)h.has(v)||m.push(v)}m.length>0&&await $e.deleteRefs({fs:e,gitdir:r,refs:m})}for(const[g,y]of h)await ka(g,async()=>e.write(Ne(r,g),`${y.trim()}
`,"utf8"));return{pruned:m}}static async writeRef({fs:e,gitdir:r,ref:n,value:s}){if(!s.match(/[0-9a-f]{40}/))throw new dl(s);await ka(n,async()=>e.write(Ne(r,n),`${s.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:e,gitdir:r,ref:n,value:s}){await ka(n,async()=>e.write(Ne(r,n),`ref: ${s.trim()}
`,"utf8"))}static async deleteRef({fs:e,gitdir:r,ref:n}){return $e.deleteRefs({fs:e,gitdir:r,refs:[n]})}static async deleteRefs({fs:e,gitdir:r,refs:n}){await Promise.all(n.map(a=>e.rm(Ne(r,a))));let s=await ka("packed-refs",async()=>e.read(`${r}/packed-refs`,{encoding:"utf8"}));const i=Gy.from(s),o=i.refs.size;for(const a of n)i.refs.has(a)&&i.delete(a);i.refs.size<o&&(s=i.toString(),await ka("packed-refs",async()=>e.write(`${r}/packed-refs`,s,{encoding:"utf8"})))}static async resolve({fs:e,gitdir:r,ref:n,depth:s=void 0}){if(s!==void 0&&(s--,s===-1))return n;if(n.startsWith("ref: "))return n=n.slice(5),$e.resolve({fs:e,gitdir:r,ref:n,depth:s});if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;const i=await $e.packedRefs({fs:e,gitdir:r}),o=f0(n).filter(a=>!I5e.includes(a));for(const a of o){const l=await ka(a,async()=>await e.read(`${r}/${a}`,{encoding:"utf8"})||i.get(a));if(l)return $e.resolve({fs:e,gitdir:r,ref:l.trim(),depth:s})}throw new Zt(n)}static async exists({fs:e,gitdir:r,ref:n}){try{return await $e.expand({fs:e,gitdir:r,ref:n}),!0}catch{return!1}}static async expand({fs:e,gitdir:r,ref:n}){if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;const s=await $e.packedRefs({fs:e,gitdir:r}),i=f0(n);for(const o of i)if(await ka(o,async()=>e.exists(`${r}/${o}`))||s.has(o))return o;throw new Zt(n)}static async expandAgainstMap({ref:e,map:r}){const n=f0(e);for(const s of n)if(await r.has(s))return s;throw new Zt(e)}static resolveAgainstMap({ref:e,fullref:r=e,depth:n=void 0,map:s}){if(n!==void 0&&(n--,n===-1))return{fullref:r,oid:e};if(e.startsWith("ref: "))return e=e.slice(5),$e.resolveAgainstMap({ref:e,fullref:r,depth:n,map:s});if(e.length===40&&/[0-9a-f]{40}/.test(e))return{fullref:r,oid:e};const i=f0(e);for(const o of i){const a=s.get(o);if(a)return $e.resolveAgainstMap({ref:a.trim(),fullref:o,depth:n,map:s})}throw new Zt(e)}static async packedRefs({fs:e,gitdir:r}){const n=await ka("packed-refs",async()=>e.read(`${r}/packed-refs`,{encoding:"utf8"}));return Gy.from(n).refs}static async listRefs({fs:e,gitdir:r,filepath:n}){const s=$e.packedRefs({fs:e,gitdir:r});let i=null;try{i=await e.readdirDeep(`${r}/${n}`),i=i.map(o=>o.replace(`${r}/${n}/`,""))}catch{i=[]}for(let o of(await s).keys())o.startsWith(n)&&(o=o.replace(n+"/",""),i.includes(o)||i.push(o));return i.sort(b5e),i}static async listBranches({fs:e,gitdir:r,remote:n}){return n?$e.listRefs({fs:e,gitdir:r,filepath:`refs/remotes/${n}`}):$e.listRefs({fs:e,gitdir:r,filepath:"refs/heads"})}static async listTags({fs:e,gitdir:r}){return(await $e.listRefs({fs:e,gitdir:r,filepath:"refs/tags"})).filter(s=>!s.endsWith("^{}"))}}function N5e(t,e){return T_(J3(t),J3(e))}function J3(t){return t.mode==="040000"?t.path+"/":t.path}function kV(t){switch(t){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new vt(`Unexpected GitTree entry mode: ${t}`)}function D5e(t){const e=[];let r=0;for(;r<t.length;){const n=t.indexOf(32,r);if(n===-1)throw new vt(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next space character.`);const s=t.indexOf(0,r);if(s===-1)throw new vt(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next null character.`);let i=t.slice(r,n).toString("utf8");i==="40000"&&(i="040000");const o=kV(i),a=t.slice(n+1,s).toString("utf8");if(a.includes("\\")||a.includes("/"))throw new Qd(a);const l=t.slice(s+1,s+21).toString("hex");r=s+21,e.push({mode:i,path:a,oid:l,type:o})}return e}function O5e(t){if(typeof t=="number"&&(t=t.toString(8)),t.match(/^0?4.*/))return"040000";if(t.match(/^1006.*/))return"100644";if(t.match(/^1007.*/))return"100755";if(t.match(/^120.*/))return"120000";if(t.match(/^160.*/))return"160000";throw new vt(`Could not understand file mode: ${t}`)}function L5e(t){return!t.oid&&t.sha&&(t.oid=t.sha),t.mode=O5e(t.mode),t.type||(t.type=kV(t.mode)),t}class ys{constructor(e){if(qe.isBuffer(e))this._entries=D5e(e);else if(Array.isArray(e))this._entries=e.map(L5e);else throw new vt("invalid type passed to GitTree constructor");this._entries.sort(SV)}static from(e){return new ys(e)}render(){return this._entries.map(e=>`${e.mode} ${e.type} ${e.oid}    ${e.path}`).join(`
`)}toObject(){const e=[...this._entries];return e.sort(N5e),qe.concat(e.map(r=>{const n=qe.from(r.mode.replace(/^0/,"")),s=qe.from(" "),i=qe.from(r.path,"utf8"),o=qe.from([0]),a=qe.from(r.oid,"hex");return qe.concat([n,s,i,o,a])}))}entries(){return this._entries}*[Symbol.iterator](){for(const e of this._entries)yield e}}class eh{static wrap({type:e,object:r}){const n=`${e} ${r.length}\0`,s=n.length,i=s+r.length,o=new Uint8Array(i);for(let a=0;a<s;a++)o[a]=n.charCodeAt(a);return o.set(r,s),o}static unwrap(e){const r=e.indexOf(32),n=e.indexOf(0),s=e.slice(0,r).toString("utf8"),i=e.slice(r+1,n).toString("utf8"),o=e.length-(n+1);if(parseInt(i)!==o)throw new vt(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:s,object:qe.from(e.slice(n+1))}}}async function AV({fs:t,gitdir:e,oid:r}){const n=`objects/${r.slice(0,2)}/${r.slice(2)}`,s=await t.read(`${e}/${n}`);return s?{object:s,format:"deflated",source:n}:null}function M5e(t,e){const r=new ao(t),n=Z3(r);if(n!==e.byteLength)throw new vt(`applyDelta expected source buffer to be ${n} bytes but the provided buffer was ${e.length} bytes`);const s=Z3(r);let i;const o=eM(r,e);if(o.byteLength===s)i=o;else{i=qe.alloc(s);const a=new ao(i);for(a.copy(o);!r.eof();)a.copy(eM(r,e));const l=a.tell();if(s!==l)throw new vt(`applyDelta expected target buffer to be ${s} bytes but the resulting buffer was ${l} bytes`)}return i}function Z3(t){let e=0,r=0,n=null;do n=t.readUInt8(),e|=(n&127)<<r,r+=7;while(n&128);return e}function Q3(t,e,r){let n=0,s=0;for(;r--;)e&1&&(n|=t.readUInt8()<<s),e>>=1,s+=8;return n}function eM(t,e){const r=t.readUInt8(),n=128,s=15,i=112;if(r&n){const o=Q3(t,r&s,4);let a=Q3(t,(r&i)>>4,3);return a===0&&(a=65536),e.slice(o,o+a)}else return t.slice(r)}function j5e(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function RV(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:j5e(t)}class PV{constructor(e){if(typeof qe>"u")throw new Error("Missing Buffer dependency");this.stream=RV(e),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(e){if(!this.eof())return this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e),this.buffer.slice(this.undoCursor,this.cursor)}async skip(e){this.eof()||(this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:e,value:r}=await this.stream.next();return e&&(this._ended=!0,!r)?qe.alloc(0):(r&&(r=qe.from(r)),r)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(e){this.undoCursor=this.cursor,this.cursor+=e,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(e){if(this._ended)return;const r=[this.buffer];for(;this.cursor+e>F5e(r);){const n=await this._next();if(this._ended)break;r.push(n)}this.buffer=qe.concat(r)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function F5e(t){return t.reduce((e,r)=>e+r.length,0)}async function B5e(t,e){const r=new PV(t);let n=await r.read(4);if(n=n.toString("utf8"),n!=="PACK")throw new vt(`Invalid PACK header '${n}'`);let s=await r.read(4);if(s=s.readUInt32BE(0),s!==2)throw new vt(`Invalid packfile version: ${s}`);let i=await r.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!r.eof()&&i--;){const o=r.tell(),{type:a,length:l,ofs:c,reference:u}=await $5e(r),d=new c2.Inflate;for(;!d.result;){const h=await r.chunk();if(!h)break;if(d.push(h,!1),d.err)throw new vt(`Pako error: ${d.msg}`);if(d.result){if(d.result.length!==l)throw new vt("Inflated object size is different from that stated in packfile.");await r.undo(),await r.read(h.length-d.strm.avail_in);const f=r.tell();await e({data:d.result,type:a,num:i,offset:o,end:f,reference:u,ofs:c})}}}}async function $5e(t){let e=await t.byte();const r=e>>4&7;let n=e&15;if(e&128){let o=4;do e=await t.byte(),n|=(e&127)<<o,o+=7;while(e&128)}let s,i;if(r===6){let o=0;s=0;const a=[];do e=await t.byte(),s|=(e&127)<<o,o+=7,a.push(e);while(e&128);i=qe.from(a)}return r===7&&(i=await t.read(20)),{type:r,length:n,ofs:s,reference:i}}async function IV(t){return c2.inflate(t)}function U5e(t){const e=[];let r=0,n=0;do{r=t.readUInt8();const s=r&127;e.push(s),n=r&128}while(n);return e.reduce((s,i)=>s+1<<7|i,-1)}function H5e(t,e){let r=e,n=4,s=null;do s=t.readUInt8(),r|=(s&127)<<n,n+=7;while(s&128);return r}class Cd{constructor(e){Object.assign(this,e),this.offsetCache={}}static async fromIdx({idx:e,getExternalRefDelta:r}){const n=new ao(e);if(n.slice(4).toString("hex")!=="ff744f63")return;const i=n.readUInt32BE();if(i!==2)throw new vt(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(e.byteLength>2048*1024*1024)throw new vt("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");n.seek(n.tell()+4*255);const o=n.readUInt32BE(),a=[];for(let u=0;u<o;u++){const d=n.slice(20).toString("hex");a[u]=d}n.seek(n.tell()+4*o);const l=new Map;for(let u=0;u<o;u++)l.set(a[u],n.readUInt32BE());const c=n.slice(20).toString("hex");return new Cd({hashes:a,crcs:{},offsets:l,packfileSha:c,getExternalRefDelta:r})}static async fromPack({pack:e,getExternalRefDelta:r,onProgress:n}){const s={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=e.slice(-20).toString("hex"),a=[],l={},c=new Map;let u=null,d=null;await B5e([e],async({data:g,type:y,reference:v,offset:_,num:x})=>{u===null&&(u=x);const w=Math.floor((u-x)*100/u);w!==d&&n&&await n({phase:"Receiving objects",loaded:u-x,total:u}),d=w,y=s[y],["commit","tree","blob","tag"].includes(y)?i[_]={type:y,offset:_}:y==="ofs-delta"?i[_]={type:y,offset:_}:y==="ref-delta"&&(i[_]={type:y,offset:_})});const h=Object.keys(i).map(Number);for(const[g,y]of h.entries()){const v=g+1===h.length?e.byteLength-20:h[g+1],_=i[y],x=s5e.buf(e.slice(y,v))>>>0;_.end=v,_.crc=x}const f=new Cd({pack:Promise.resolve(e),packfileSha:o,crcs:l,hashes:a,offsets:c,getExternalRefDelta:r});d=null;let b=0;const m=[0,0,0,0,0,0,0,0,0,0,0,0];for(let g in i){g=Number(g);const y=Math.floor(b*100/u);y!==d&&n&&await n({phase:"Resolving deltas",loaded:b,total:u}),b++,d=y;const v=i[g];if(!v.oid)try{f.readDepth=0,f.externalReadDepth=0;const{type:_,object:x}=await f.readSlice({start:g});m[f.readDepth]+=1;const w=await da(eh.wrap({type:_,object:x}));v.oid=w,a.push(w),c.set(w,g),l[w]=v.crc}catch{continue}}return a.sort(),f}async toBuffer(){const e=[],r=(c,u)=>{e.push(qe.from(c,u))};r("ff744f63","hex"),r("00000002","hex");const n=new ao(qe.alloc(256*4));for(let c=0;c<256;c++){let u=0;for(const d of this.hashes)parseInt(d.slice(0,2),16)<=c&&u++;n.writeUInt32BE(u)}e.push(n.buffer);for(const c of this.hashes)r(c,"hex");const s=new ao(qe.alloc(this.hashes.length*4));for(const c of this.hashes)s.writeUInt32BE(this.crcs[c]);e.push(s.buffer);const i=new ao(qe.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));e.push(i.buffer),r(this.packfileSha,"hex");const o=qe.concat(e),a=await da(o),l=qe.alloc(20);return l.write(a,"hex"),qe.concat([o,l])}async load({pack:e}){this.pack=e}async unload(){this.pack=null}async read({oid:e}){if(!this.offsets.get(e)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(e);throw new vt(`Could not read object ${e} from packfile`)}const r=this.offsets.get(e);return this.readSlice({start:r})}async readSlice({start:e}){if(this.offsetCache[e])return Object.assign({},this.offsetCache[e]);this.readDepth++;const r={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new vt("Tried to read from a GitPackIndex with no packfile loaded into memory");const n=(await this.pack).slice(e),s=new ao(n),i=s.readUInt8(),o=i&112;let a=r[o];if(a===void 0)throw new vt("Unrecognized type: 0b"+o.toString(2));const l=i&15;let c=l;i&128&&(c=H5e(s,l));let d=null,h=null;if(a==="ofs_delta"){const b=U5e(s),m=e-b;({object:d,type:a}=await this.readSlice({start:m}))}if(a==="ref_delta"){const b=s.slice(20).toString("hex");({object:d,type:a}=await this.read({oid:b}))}const f=n.slice(s.tell());if(h=qe.from(await IV(f)),h.byteLength!==c)throw new vt(`Packfile told us object would have length ${c} but it had length ${h.byteLength}`);return d&&(h=qe.from(M5e(h,d))),this.readDepth>3&&(this.offsetCache[e]={type:a,object:h}),{type:a,format:"content",object:h}}}const p0=Symbol("PackfileCache");async function z5e({fs:t,filename:e,getExternalRefDelta:r,emitter:n,emitterPrefix:s}){const i=await t.read(e);return Cd.fromIdx({idx:i,getExternalRefDelta:r})}function h2({fs:t,cache:e,filename:r,getExternalRefDelta:n,emitter:s,emitterPrefix:i}){e[p0]||(e[p0]=new Map);let o=e[p0].get(r);return o||(o=z5e({fs:t,filename:r,getExternalRefDelta:n,emitter:s,emitterPrefix:i}),e[p0].set(r,o)),o}async function W5e({fs:t,cache:e,gitdir:r,oid:n,format:s="content",getExternalRefDelta:i}){let o=await t.readdir(Ne(r,"objects/pack"));o=o.filter(a=>a.endsWith(".idx"));for(const a of o){const l=`${r}/objects/pack/${a}`,c=await h2({fs:t,cache:e,filename:l,getExternalRefDelta:i});if(c.error)throw new vt(c.error);if(c.offsets.has(n)){if(!c.pack){const d=l.replace(/idx$/,"pack");c.pack=t.read(d)}const u=await c.read({oid:n,getExternalRefDelta:i});return u.format="content",u.source=`objects/pack/${a.replace(/idx$/,"pack")}`,u}}return null}async function mr({fs:t,cache:e,gitdir:r,oid:n,format:s="content"}){const i=u=>mr({fs:t,cache:e,gitdir:r,oid:u});let o;if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:qe.from("tree 0\0")}),o||(o=await AV({fs:t,gitdir:r,oid:n})),!o){if(o=await W5e({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i}),!o)throw new Zt(n);return o}if(s==="deflated"||(o.format==="deflated"&&(o.object=qe.from(await IV(o.object)),o.format="wrapped"),s==="wrapped"))return o;const a=await da(o.object);if(a!==n)throw new vt(`SHA check failed! Expected ${n}, computed ${a}`);const{object:l,type:c}=eh.unwrap(o.object);if(o.type=c,o.object=l,o.format="content",s==="content")return o;throw new vt(`invalid requested format "${s}"`)}class Mi extends Mt{constructor(e,r,n=!0){super(`Failed to create ${e} at ${r} because it already exists.${n?` (Hint: use 'force: true' parameter to overwrite existing ${e}.)`:""}`),this.code=this.name=Mi.code,this.data={noun:e,where:r,canForce:n}}}Mi.code="AlreadyExistsError";class Sm extends Mt{constructor(e,r,n){super(`Found multiple ${e} matching "${r}" (${n.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=Sm.code,this.data={nouns:e,short:r,matches:n}}}Sm.code="AmbiguousError";class Em extends Mt{constructor(e){super(`Your local changes to the following files would be overwritten by checkout: ${e.join(", ")}`),this.code=this.name=Em.code,this.data={filepaths:e}}}Em.code="CheckoutConflictError";class Cm extends Mt{constructor(e,r){super(`Cannot cherry-pick merge commit ${e}. Merge commits have ${r} parents and require specifying which parent to use as the base.`),this.code=this.name=Cm.code,this.data={oid:e,parentCount:r}}}Cm.code="CherryPickMergeCommitError";class Tm extends Mt{constructor(e){super(`Cannot cherry-pick root commit ${e}. Root commits have no parents.`),this.code=this.name=Tm.code,this.data={oid:e}}}Tm.code="CherryPickRootCommitError";class km extends Mt{constructor(e,r){super(`Failed to checkout "${e}" because commit ${r} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=km.code,this.data={ref:e,oid:r}}}km.code="CommitNotFetchedError";class Am extends Mt{constructor(){super("Empty response from git server."),this.code=this.name=Am.code,this.data={}}}Am.code="EmptyServerResponseError";class Rm extends Mt{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=Rm.code,this.data={}}}Rm.code="FastForwardError";class Pm extends Mt{constructor(e,r){super(`One or more branches were not updated: ${e}`),this.code=this.name=Pm.code,this.data={prettyDetails:e,result:r}}}Pm.code="GitPushError";class Td extends Mt{constructor(e,r,n){super(`HTTP Error: ${e} ${r}`),this.code=this.name=Td.code,this.data={statusCode:e,statusMessage:r,response:n}}}Td.code="HttpError";class hl extends Mt{constructor(e){let r="invalid filepath";e==="leading-slash"||e==="trailing-slash"?r='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':e==="directory"&&(r='"filepath" should not be a directory.'),super(r),this.code=this.name=hl.code,this.data={reason:e}}}hl.code="InvalidFilepathError";class Ri extends Mt{constructor(e,r){super(`"${e}" would be an invalid git reference. (Hint: a valid alternative would be "${r}".)`),this.code=this.name=Ri.code,this.data={ref:e,suggestion:r}}}Ri.code="InvalidRefNameError";class Im extends Mt{constructor(e){super(`Maximum search depth of ${e} exceeded.`),this.code=this.name=Im.code,this.data={depth:e}}}Im.code="MaxDepthError";class th extends Mt{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=th.code,this.data={}}}th.code="MergeNotSupportedError";class Wc extends Mt{constructor(e,r,n,s){super(`Automatic merge failed with one or more merge conflicts in the following files: ${e.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Wc.code,this.data={filepaths:e,bothModified:r,deleteByUs:n,deleteByTheirs:s}}}Wc.code="MergeConflictError";class wn extends Mt{constructor(e){super(`No name was provided for ${e} in the argument or in the .git/config file.`),this.code=this.name=wn.code,this.data={role:e}}}wn.code="MissingNameError";class ms extends Mt{constructor(e){super(`The function requires a "${e}" parameter but none was provided.`),this.code=this.name=ms.code,this.data={parameter:e}}}ms.code="MissingParameterError";class Nm extends Mt{constructor(e){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=Nm.code,this.data={errors:e},this.errors=e}}Nm.code="MultipleGitError";class Vc extends Mt{constructor(e,r){super(`Expected "${e}" but received "${r}".`),this.code=this.name=Vc.code,this.data={expected:e,actual:r}}}Vc.code="ParseError";class kd extends Mt{constructor(e){let r="";e==="not-fast-forward"?r=" because it was not a simple fast-forward":e==="tag-exists"&&(r=" because tag already exists"),super(`Push rejected${r}. Use "force: true" to override.`),this.code=this.name=kd.code,this.data={reason:e}}}kd.code="PushRejectedError";class Ka extends Mt{constructor(e,r){super(`Remote does not support the "${e}" so the "${r}" parameter cannot be used.`),this.code=this.name=Ka.code,this.data={capability:e,parameter:r}}}Ka.code="RemoteCapabilityError";class Dm extends Mt{constructor(e,r){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${e}`),this.code=this.name=Dm.code,this.data={preview:e,response:r}}}Dm.code="SmartHttpError";class Om extends Mt{constructor(e,r,n){super(`Git remote "${e}" uses an unrecognized transport protocol: "${r}"`),this.code=this.name=Om.code,this.data={url:e,transport:r,suggestion:n}}}Om.code="UnknownTransportError";class Lm extends Mt{constructor(e){super(`Cannot parse remote URL: "${e}"`),this.code=this.name=Lm.code,this.data={url:e}}}Lm.code="UrlParseError";class rh extends Mt{constructor(){super("The operation was canceled."),this.code=this.name=rh.code,this.data={}}}rh.code="UserCanceledError";class Mm extends Mt{constructor(e){super(`Could not merge index: Entry for '${e}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=Mm.code,this.data={filepath:e}}}Mm.code="IndexResetError";class jm extends Mt{constructor(e){super(`"${e}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=jm.code,this.data={ref:e}}}jm.code="NoCommitError";var NV=Object.freeze({__proto__:null,AlreadyExistsError:Mi,AmbiguousError:Sm,CheckoutConflictError:Em,CherryPickMergeCommitError:Cm,CherryPickRootCommitError:Tm,CommitNotFetchedError:km,EmptyServerResponseError:Am,FastForwardError:Rm,GitPushError:Pm,HttpError:Td,InternalError:vt,InvalidFilepathError:hl,InvalidOidError:dl,InvalidRefNameError:Ri,MaxDepthError:Im,MergeNotSupportedError:th,MergeConflictError:Wc,MissingNameError:wn,MissingParameterError:ms,MultipleGitError:Nm,NoRefspecError:wm,NotFoundError:Zt,ObjectTypeError:es,ParseError:Vc,PushRejectedError:kd,RemoteCapabilityError:Ka,SmartHttpError:Dm,UnknownTransportError:Om,UnsafeFilepathError:Qd,UrlParseError:Lm,UserCanceledError:rh,UnmergedPathsError:xm,IndexResetError:Mm,NoCommitError:jm});function EC({name:t,email:e,timestamp:r,timezoneOffset:n}){return n=V5e(n),`${t} <${e}> ${r} ${n}`}function V5e(t){const e=G5e(q5e(t));t=Math.abs(t);const r=Math.floor(t/60);t-=r*60;let n=String(r),s=String(t);return n.length<2&&(n="0"+n),s.length<2&&(s="0"+s),(e===-1?"-":"+")+n+s}function G5e(t){return Math.sign(t)||(Object.is(t,-0)?-1:1)}function q5e(t){return t===0?t:-t}function Uo(t){return t=t.replace(/\r/g,""),t=t.replace(/^\n+/,""),t=t.replace(/\n+$/,"")+`
`,t}function Ky(t){const[,e,r,n,s]=t.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:e,email:r,timestamp:Number(n),timezoneOffset:K5e(s)}}function K5e(t){let[,e,r,n]=t.match(/(\+|-)(\d\d)(\d\d)/);return n=(e==="+"?1:-1)*(Number(r)*60+Number(n)),Y5e(n)}function Y5e(t){return t===0?t:-t}class Kn{constructor(e){if(typeof e=="string")this._tag=e;else if(qe.isBuffer(e))this._tag=e.toString("utf8");else if(typeof e=="object")this._tag=Kn.render(e);else throw new vt("invalid type passed to GitAnnotatedTag constructor")}static from(e){return new Kn(e)}static render(e){return`object ${e.object}
type ${e.type}
tag ${e.tag}
tagger ${EC(e.tagger)}

${e.message}
${e.gpgsig?e.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const e=this.withoutSignature();return e.slice(e.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const e=this.justHeaders().split(`
`),r=[];for(const s of e)s[0]===" "?r[r.length-1]+=`
`+s.slice(1):r.push(s);const n={};for(const s of r){const i=s.slice(0,s.indexOf(" ")),o=s.slice(s.indexOf(" ")+1);Array.isArray(n[i])?n[i].push(o):n[i]=o}return n.tagger&&(n.tagger=Ky(n.tagger)),n.committer&&(n.committer=Ky(n.committer)),n}withoutSignature(){const e=Uo(this._tag);return e.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?e:e.slice(0,e.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const e=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Uo(e)}payload(){return this.withoutSignature()+`
`}toObject(){return qe.from(this._tag,"utf8")}static async sign(e,r,n){const s=e.payload();let{signature:i}=await r({payload:s,secretKey:n});i=Uo(i);const o=s+i;return Kn.from(o)}}function C1(t){return t.trim().split(`
`).map(e=>" "+e).join(`
`)+`
`}function X5e(t){return t.split(`
`).map(e=>e.replace(/^ /,"")).join(`
`)}class _r{constructor(e){if(typeof e=="string")this._commit=e;else if(qe.isBuffer(e))this._commit=e.toString("utf8");else if(typeof e=="object")this._commit=_r.render(e);else throw new vt("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:e,signature:r}){const n=_r.justHeaders(e),s=_r.justMessage(e),i=Uo(n+`
gpgsig`+C1(r)+`
`+s);return new _r(i)}static from(e){return new _r(e)}toObject(){return qe.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return _r.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(e){return Uo(e.slice(e.indexOf(`

`)+2))}static justHeaders(e){return e.slice(0,e.indexOf(`

`))}parseHeaders(){const e=_r.justHeaders(this._commit).split(`
`),r=[];for(const s of e)s[0]===" "?r[r.length-1]+=`
`+s.slice(1):r.push(s);const n={parent:[]};for(const s of r){const i=s.slice(0,s.indexOf(" ")),o=s.slice(s.indexOf(" ")+1);Array.isArray(n[i])?n[i].push(o):n[i]=o}return n.author&&(n.author=Ky(n.author)),n.committer&&(n.committer=Ky(n.committer)),n}static renderHeaders(e){let r="";if(e.tree?r+=`tree ${e.tree}
`:r+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,e.parent){if(e.parent.length===void 0)throw new vt("commit 'parent' property should be an array");for(const i of e.parent)r+=`parent ${i}
`}const n=e.author;r+=`author ${EC(n)}
`;const s=e.committer||e.author;return r+=`committer ${EC(s)}
`,e.gpgsig&&(r+="gpgsig"+C1(e.gpgsig)),r}static render(e){return _r.renderHeaders(e)+`
`+Uo(e.message)}render(){return this._commit}withoutSignature(){const e=Uo(this._commit);if(e.indexOf(`
gpgsig`)===-1)return e;const r=e.slice(0,e.indexOf(`
gpgsig`)),n=e.slice(e.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Uo(r+`
`+n)}isolateSignature(){const e=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return X5e(e)}static async sign(e,r,n){const s=e.withoutSignature(),i=_r.justMessage(e._commit);let{signature:o}=await r({payload:s,secretKey:n});o=Uo(o);const l=_r.justHeaders(e._commit)+`
gpgsig`+C1(o)+`
`+i;return _r.from(l)}}async function Ad({fs:t,cache:e,gitdir:r,oid:n}){if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:ys.from([]),oid:n};const{type:s,object:i}=await mr({fs:t,cache:e,gitdir:r,oid:n});if(s==="tag")return n=Kn.from(i).parse().object,Ad({fs:t,cache:e,gitdir:r,oid:n});if(s==="commit")return n=_r.from(i).parse().tree,Ad({fs:t,cache:e,gitdir:r,oid:n});if(s!=="tree")throw new es(n,s,"tree");return{tree:ys.from(i),oid:n}}class J5e{constructor({fs:e,gitdir:r,ref:n,cache:s}){this.fs=e,this.cache=s,this.gitdir=r,this.mapPromise=(async()=>{const o=new Map;let a;try{a=await $e.resolve({fs:e,gitdir:r,ref:n})}catch(c){c instanceof Zt&&(a="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await Ad({fs:e,cache:this.cache,gitdir:r,oid:a});return l.type="tree",l.mode="40000",o.set(".",l),o})();const i=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(e){const r=e._fullpath,{fs:n,cache:s,gitdir:i}=this,o=await this.mapPromise,a=o.get(r);if(!a)throw new Error(`No obj for ${r}`);const l=a.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(a)}`);if(a.type!=="tree")return null;const{type:c,object:u}=await mr({fs:n,cache:s,gitdir:i,oid:l});if(c!==a.type)throw new es(l,c,a.type);const d=ys.from(u);for(const h of d)o.set(Ne(r,h.path),h);return d.entries().map(h=>Ne(r,h.path))}async type(e){if(e._type===!1){const r=await this.mapPromise,{type:n}=r.get(e._fullpath);e._type=n}return e._type}async mode(e){if(e._mode===!1){const r=await this.mapPromise,{mode:n}=r.get(e._fullpath);e._mode=EV(parseInt(n,8))}return e._mode}async stat(e){}async content(e){if(e._content===!1){const r=await this.mapPromise,{fs:n,cache:s,gitdir:i}=this,a=r.get(e._fullpath).oid,{type:l,object:c}=await mr({fs:n,cache:s,gitdir:i,oid:a});l!=="blob"?e._content=void 0:e._content=new Uint8Array(c)}return e._content}async oid(e){if(e._oid===!1){const n=(await this.mapPromise).get(e._fullpath);e._oid=n.oid}return e._oid}}function Ns({ref:t="HEAD"}={}){const e=Object.create(null);return Object.defineProperty(e,k_,{value:function({fs:r,gitdir:n,cache:s}){return new J5e({fs:r,gitdir:n,ref:t,cache:s})}}),Object.freeze(e),e}class Z5e{constructor({fs:e,dir:r,gitdir:n,cache:s}){this.fs=e,this.cache=s,this.dir=r,this.gitdir=n,this.config=null;const i=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(e){const r=e._fullpath,{fs:n,dir:s}=this,i=await n.readdir(Ne(s,r));return i===null?null:i.map(o=>Ne(r,o))}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const{fs:r,dir:n}=this;let s=await r.lstat(`${n}/${e._fullpath}`);if(!s)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);let i=s.isDirectory()?"tree":"blob";i==="blob"&&!s.isFile()&&!s.isSymbolicLink()&&(i="special"),e._type=i,s=Ed(s),e._mode=s.mode,s.size===-1&&e._actualSize&&(s.size=e._actualSize),e._stat=s}return e._stat}async content(e){if(e._content===!1){const{fs:r,dir:n,gitdir:s}=this;if(await e.type()==="tree")e._content=void 0;else{let i;if(await e.mode()>>12===10)i=await r.readlink(`${n}/${e._fullpath}`);else{const a=await(await this._getGitConfig(r,s)).get("core.autocrlf");i=await r.read(`${n}/${e._fullpath}`,{autocrlf:a})}e._actualSize=i.length,e._stat&&e._stat.size===-1&&(e._stat.size=e._actualSize),e._content=new Uint8Array(i)}}return e._content}async oid(e){if(e._oid===!1){const r=this,{fs:n,gitdir:s,cache:i}=this;let o;await Wr.acquire({fs:n,gitdir:s,cache:i},async function(a){const l=a.entriesMap.get(e._fullpath),c=await e.stat(),d=await(await r._getGitConfig(n,s)).get("core.filemode"),h=typeof xr<"u"?xr.platform!=="win32":!0;if(!l||Wy(c,l,d,h)){const f=await e.content();f===void 0?o=void 0:(o=await da(eh.wrap({type:"blob",object:f})),l&&o===l.oid&&(!d||c.mode===l.mode)&&Wy(c,l,d,h)&&a.insert({filepath:e._fullpath,stats:c,oid:o}))}else o=l.oid}),e._oid=o}return e._oid}async _getGitConfig(e,r){return this.config?this.config:(this.config=await Gr.get({fs:e,gitdir:r}),this.config)}}function nh(){const t=Object.create(null);return Object.defineProperty(t,k_,{value:function({fs:e,dir:r,gitdir:n,cache:s}){return new Z5e({fs:e,dir:r,gitdir:n,cache:s})}}),Object.freeze(t),t}function Q5e(t,e){const r=e-t;return Array.from({length:r},(n,s)=>t+s)}const DV=typeof Array.prototype.flat>"u"?t=>t.reduce((e,r)=>e.concat(r),[]):t=>t.flat();class e4e{constructor(){this.value=null}consider(e){e!=null&&(this.value===null?this.value=e:e<this.value&&(this.value=e))}reset(){this.value=null}}function*t4e(t){const e=new e4e;let r;const n=[],s=t.length;for(let i=0;i<s;i++)n[i]=t[i].next().value,n[i]!==void 0&&e.consider(n[i]);if(e.value!==null)for(;;){const i=[];r=e.value,e.reset();for(let o=0;o<s;o++)n[o]!==void 0&&n[o]===r?(i[o]=n[o],n[o]=t[o].next().value):i[o]=null,n[o]!==void 0&&e.consider(n[o]);if(yield i,e.value===null)return}}async function fl({fs:t,cache:e,dir:r,gitdir:n,trees:s,map:i=async(l,c)=>c,reduce:o=async(l,c)=>{const u=DV(c);return l!==void 0&&u.unshift(l),u},iterate:a=(l,c)=>Promise.all([...c].map(l))}){const l=s.map(f=>f[k_]({fs:t,dir:r,gitdir:n,cache:e})),c=new Array(l.length).fill("."),u=Q5e(0,l.length),d=async f=>{u.forEach(g=>{const y=f[g];f[g]=y&&new l[g].ConstructEntry(y)});const m=(await Promise.all(u.map(g=>{const y=f[g];return y?l[g].readdir(y):[]}))).map(g=>(g===null?[]:g)[Symbol.iterator]());return{entries:f,children:t4e(m)}},h=async f=>{const{entries:b,children:m}=await d(f),g=b.find(v=>v&&v._fullpath)._fullpath,y=await i(g,b);if(y!==null){let v=await a(h,m);return v=v.filter(_=>_!==void 0),o(y,v)}};return h(c)}async function CC(t,e){const r=await t.readdir(e);r==null?await t.rm(e):r.length?await Promise.all(r.map(n=>{const s=Ne(e,n);return t.lstat(s).then(i=>{if(i)return i.isDirectory()?CC(t,s):t.rm(s)})})).then(()=>t.rmdir(e)):await t.rmdir(e)}function r4e(t){return n4e(t)&&tM(t.then)&&tM(t.catch)}function n4e(t){return t&&typeof t=="object"}function tM(t){return typeof t=="function"}function rM(t){return r4e((r=>{try{return r.readFile().catch(n=>n)}catch(n){return n}})(t))}const nM=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function sM(t,e){if(rM(e))for(const r of nM)t[`_${r}`]=e[r].bind(e);else for(const r of nM)t[`_${r}`]=h0(e[r].bind(e));rM(e)?(e.cp&&(t._cp=e.cp.bind(e)),e.rm?t._rm=e.rm.bind(e):e.rmdir.length>1?t._rm=e.rmdir.bind(e):t._rm=CC.bind(null,t)):(e.cp&&(t._cp=h0(e.cp.bind(e))),e.rm?t._rm=h0(e.rm.bind(e)):e.rmdir.length>2?t._rm=h0(e.rmdir.bind(e)):t._rm=CC.bind(null,t))}class st{constructor(e){if(typeof e._original_unwrapped_fs<"u")return e;const r=Object.getOwnPropertyDescriptor(e,"promises");r&&r.enumerable?sM(this,e.promises):sM(this,e),this._original_unwrapped_fs=e}async exists(e,r={}){try{return await this._stat(e),!0}catch(n){if(n.code==="ENOENT"||n.code==="ENOTDIR"||(n.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',n),n}}async read(e,r={}){try{let n=await this._readFile(e,r);if(r.autocrlf==="true")try{n=new TextDecoder("utf8",{fatal:!0}).decode(n),n=n.replace(/\r\n/g,`
`),n=new TextEncoder().encode(n)}catch{}return typeof n!="string"&&(n=qe.from(n)),n}catch{return null}}async write(e,r,n={}){try{await this._writeFile(e,r,n)}catch{await this.mkdir(Ic(e)),await this._writeFile(e,r,n)}}async mkdir(e,r=!1){try{await this._mkdir(e)}catch(n){if(n===null||n.code==="EEXIST")return;if(r)throw n;if(n.code==="ENOENT"){const s=Ic(e);if(s==="."||s==="/"||s===e)throw n;await this.mkdir(s),await this.mkdir(e,!0)}}}async rm(e){try{await this._unlink(e)}catch(r){if(r.code!=="ENOENT")throw r}}async rmdir(e,r){try{r&&r.recursive?await this._rm(e,r):await this._rmdir(e)}catch(n){if(n.code!=="ENOENT")throw n}}async readdir(e){try{const r=await this._readdir(e);return r.sort(T_),r}catch(r){return r.code==="ENOTDIR"?null:[]}}async readdirDeep(e){const r=await this._readdir(e);return(await Promise.all(r.map(async s=>{const i=e+"/"+s;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((s,i)=>s.concat(i),[])}async lstat(e){try{return await this._lstat(e)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async readlink(e,r={encoding:"buffer"}){try{const n=await this._readlink(e,r);return qe.isBuffer(n)?n:qe.from(n)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async writelink(e,r){return this._symlink(r.toString("utf8"),e)}}function me(t,e){if(e===void 0)throw new ms(t)}async function ot({fsp:t,dotgit:e}){me("fsp",t),me("dotgit",e);const r=await t._stat(e).catch(()=>({isFile:()=>!1,isDirectory:()=>!1}));return r.isDirectory()?e:r.isFile()?t._readFile(e,"utf8").then(n=>n.trimRight().substr(8)).then(n=>Ne(Ic(e),n)):e}async function Yy(t,e){return!t&&!e?!1:t&&!e||!t&&e?!0:!(await t.type()==="tree"&&await e.type()==="tree"||await t.type()===await e.type()&&await t.mode()===await e.mode()&&await t.oid()===await e.oid())}async function OV({fs:t,dir:e,gitdir:r=Ne(e,".git"),commit:n="HEAD",cache:s={}}){try{me("fs",t),me("dir",e),me("gitdir",r);const i=new st(t),o=[Ns({ref:n}),nh(),zc()];let a=[];const l=await ot({fsp:i,dotgit:r});await Wr.acquire({fs:i,gitdir:l,cache:s},async function(u){a=u.unmergedPaths});const c=await fl({fs:i,cache:s,dir:e,gitdir:l,trees:o,map:async function(u,[d,h,f]){const b=!await Yy(h,f),m=a.includes(u),g=!await Yy(f,d);if(b||m)return d?{path:u,mode:await d.mode(),oid:await d.oid(),type:await d.type(),content:await d.content()}:void 0;if(g)return!1;throw new Mm(u)}});await Wr.acquire({fs:i,gitdir:l,cache:s},async function(u){for(const d of c)if(d!==!1){if(!d){await i.rmdir(`${e}/${d.path}`,{recursive:!0}),u.delete({filepath:d.path});continue}if(d.type==="blob"){const h=new TextDecoder().decode(d.content);await i.write(`${e}/${d.path}`,h,{mode:d.mode}),u.insert({filepath:d.path,oid:d.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class sh{static async isIgnored({fs:e,dir:r,gitdir:n=Ne(r,".git"),filepath:s}){if(Vy(s)===".git")return!0;if(s===".")return!1;let i="";const o=Ne(n,"info","exclude");await e.exists(o)&&(i=await e.read(o,"utf8"));const a=[{gitignore:Ne(r,".gitignore"),filepath:s}],l=s.split("/").filter(Boolean);for(let u=1;u<l.length;u++){const d=l.slice(0,u).join("/"),h=l.slice(u).join("/");a.push({gitignore:Ne(r,d,".gitignore"),filepath:h})}let c=!1;for(const u of a){let d;try{d=await e.read(u.gitignore,"utf8")}catch(b){if(b.code==="NOENT")continue}const h=i5e().add(i);h.add(d);const f=Ic(u.filepath);if(f!=="."&&h.ignores(f))return!0;c?c=!h.test(u.filepath).unignored:c=h.test(u.filepath).ignored}return c}}async function s4e({fs:t,gitdir:e,object:r,format:n,oid:s}){const i=`objects/${s.slice(0,2)}/${s.slice(2)}`,o=`${e}/${i}`;await t.exists(o)||await t.write(o,r)}let T1=null;async function LV(t){return T1===null&&(T1=o4e()),T1?i4e(t):c2.deflate(t)}async function i4e(t){const e=new CompressionStream("deflate"),r=new Blob([t]).stream().pipeThrough(e);return new Uint8Array(await new Response(r).arrayBuffer())}function o4e(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function _s({fs:t,gitdir:e,type:r,object:n,format:s="content",oid:i=void 0,dryRun:o=!1}){return s!=="deflated"&&(s!=="wrapped"&&(n=eh.wrap({type:r,object:n})),i=await da(n),n=qe.from(await LV(n))),o||await s4e({fs:t,gitdir:e,object:n,format:"deflated",oid:i}),i}function MV(t){let e;for(;~(e=t.indexOf(92));)t[e]=47;return t}async function jV({fs:t,dir:e,gitdir:r=Ne(e,".git"),filepath:n,cache:s={},force:i=!1,parallel:o=!0}){try{me("fs",t),me("dir",e),me("gitdir",r),me("filepath",n);const a=new st(t),l=await ot({fsp:a,dotgit:r});await Wr.acquire({fs:a,gitdir:l,cache:s},async c=>{const d=await(await Gr.get({fs:a,gitdir:l})).get("core.autocrlf");return TC({dir:e,gitdir:l,fs:a,filepath:n,index:c,force:i,parallel:o,autocrlf:d})})}catch(a){throw a.caller="git.add",a}}async function TC({dir:t,gitdir:e,fs:r,filepath:n,index:s,force:i,parallel:o,autocrlf:a}){n=Array.isArray(n)?n:[n];const l=n.map(async h=>{if(!i&&await sh.isIgnored({fs:r,dir:t,gitdir:e,filepath:h}))return;const f=await r.lstat(Ne(t,h));if(!f)throw new Zt(h);if(f.isDirectory()){const b=await r.readdir(Ne(t,h));if(o){const m=b.map(g=>TC({dir:t,gitdir:e,fs:r,filepath:[Ne(h,g)],index:s,force:i,parallel:o,autocrlf:a}));await Promise.all(m)}else for(const m of b)await TC({dir:t,gitdir:e,fs:r,filepath:[Ne(h,m)],index:s,force:i,parallel:o,autocrlf:a})}else{const b=f.isSymbolicLink()?await r.readlink(Ne(t,h)).then(MV):await r.read(Ne(t,h),{autocrlf:a});if(b===null)throw new Zt(h);const m=await _s({fs:r,gitdir:e,type:"blob",object:b});s.insert({filepath:h,stats:f,oid:m})}}),c=await Promise.allSettled(l),u=c.filter(h=>h.status==="rejected").map(h=>h.reason);if(u.length>1)throw new Nm(u);if(u.length===1)throw u[0];return c.filter(h=>h.status==="fulfilled"&&h.value).map(h=>h.value)}async function Pp({fs:t,gitdir:e,path:r}){return(await Gr.get({fs:t,gitdir:e})).get(r)}function FV(t,...e){for(const r of e)if(r)for(const n of Object.keys(r)){const s=r[n];s!==void 0&&(t[n]=s)}return t}async function pl({fs:t,gitdir:e,author:r,commit:n}){const s=Math.floor(Date.now()/1e3),i={name:await Pp({fs:t,gitdir:e,path:"user.name"}),email:await Pp({fs:t,gitdir:e,path:"user.email"})||"",timestamp:s,timezoneOffset:new Date(s*1e3).getTimezoneOffset()},o=FV({},i,n?n.author:void 0,r);if(o.name!==void 0)return o}async function Nc({fs:t,gitdir:e,author:r,committer:n,commit:s}){const i=Math.floor(Date.now()/1e3),o={name:await Pp({fs:t,gitdir:e,path:"user.name"}),email:await Pp({fs:t,gitdir:e,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},a=FV({},o,s?s.committer:void 0,r,n);if(a.name!==void 0)return a}async function BV({fs:t,cache:e,gitdir:r,oid:n}){const{type:s,object:i}=await mr({fs:t,cache:e,gitdir:r,oid:n});if(s==="tag")return n=Kn.from(i).parse().object,BV({fs:t,cache:e,gitdir:r,oid:n});if(s!=="commit")throw new es(n,s,"commit");return{commit:_r.from(i),oid:n}}async function xo({fs:t,cache:e,gitdir:r,oid:n}){const{commit:s,oid:i}=await BV({fs:t,cache:e,gitdir:r,oid:n});return{oid:i,commit:s.parse(),payload:s.withoutSignature()}}async function Fm({fs:t,cache:e,onSign:r,gitdir:n,message:s,author:i,committer:o,signingKey:a,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:d,parent:h,tree:f}){let b=!1,m=!1;d||(m=!(await t.read(`${n}/HEAD`,{encoding:"utf8"})).startsWith("ref:"),d=await $e.resolve({fs:t,gitdir:n,ref:"HEAD",depth:2}));let g,y;try{g=await $e.resolve({fs:t,gitdir:n,ref:d}),y=await xo({fs:t,gitdir:n,oid:g,cache:{}})}catch{b=!0}if(l&&b)throw new jm(d);const v=l?await pl({fs:t,gitdir:n,author:i,commit:y.commit}):await pl({fs:t,gitdir:n,author:i});if(!v)throw new wn("author");const _=l?await Nc({fs:t,gitdir:n,author:v,committer:o,commit:y.commit}):await Nc({fs:t,gitdir:n,author:v,committer:o});if(!_)throw new wn("committer");return Wr.acquire({fs:t,gitdir:n,cache:e,allowUnmerged:!1},async function(x){const S=TV(x.entries).get(".");if(f||(f=await $V({fs:t,gitdir:n,inode:S,dryRun:c})),h?h=await Promise.all(h.map(C=>$e.resolve({fs:t,gitdir:n,ref:C}))):l?h=y.commit.parent:h=g?[g]:[],!s)if(l)s=y.commit.message;else throw new ms("message");let T=_r.from({tree:f,parent:h,author:v,committer:_,message:s});a&&(T=await _r.sign(T,r,a));const E=await _s({fs:t,gitdir:n,type:"commit",object:T.toObject(),dryRun:c});return!u&&!c&&await $e.writeRef({fs:t,gitdir:n,ref:m?"HEAD":d,value:E}),E})}async function $V({fs:t,gitdir:e,inode:r,dryRun:n}){const s=r.children;for(const l of s)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await $V({fs:t,gitdir:e,inode:l,dryRun:n}));const i=s.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),o=ys.from(i);return await _s({fs:t,gitdir:e,type:"tree",object:o.toObject(),dryRun:n})}async function Bm({fs:t,cache:e,gitdir:r,oid:n,filepath:s}){if(s.startsWith("/"))throw new hl("leading-slash");if(s.endsWith("/"))throw new hl("trailing-slash");const i=n,o=await Ad({fs:t,cache:e,gitdir:r,oid:n}),a=o.tree;if(s==="")n=o.oid;else{const l=s.split("/");n=await UV({fs:t,cache:e,gitdir:r,tree:a,pathArray:l,oid:i,filepath:s})}return n}async function UV({fs:t,cache:e,gitdir:r,tree:n,pathArray:s,oid:i,filepath:o}){const a=s.shift();for(const l of n)if(l.path===a){if(s.length===0)return l.oid;{const{type:c,object:u}=await mr({fs:t,cache:e,gitdir:r,oid:l.oid});if(c!=="tree")throw new es(i,c,"tree",o);return n=ys.from(u),UV({fs:t,cache:e,gitdir:r,tree:n,pathArray:s,oid:i,filepath:o})}}throw new Zt(`file or directory found at "${i}:${o}"`)}async function ih({fs:t,cache:e,gitdir:r,oid:n,filepath:s=void 0}){s!==void 0&&(n=await Bm({fs:t,cache:e,gitdir:r,oid:n,filepath:s}));const{tree:i,oid:o}=await Ad({fs:t,cache:e,gitdir:r,oid:n});return{oid:o,tree:i.entries()}}async function $m({fs:t,gitdir:e,tree:r}){const n=ys.from(r).toObject();return await _s({fs:t,gitdir:e,type:"tree",object:n,format:"content"})}async function a4e({fs:t,cache:e,onSign:r,gitdir:n,ref:s,oid:i,note:o,force:a,author:l,committer:c,signingKey:u}){let d;try{d=await $e.resolve({gitdir:n,fs:t,ref:s})}catch(y){if(!(y instanceof Zt))throw y}let f=(await ih({fs:t,cache:e,gitdir:n,oid:d||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(a)f=f.filter(y=>y.path!==i);else for(const y of f)if(y.path===i)throw new Mi("note",i);typeof o=="string"&&(o=qe.from(o,"utf8"));const b=await _s({fs:t,gitdir:n,type:"blob",object:o,format:"content"});f.push({mode:"100644",path:i,oid:b,type:"blob"});const m=await $m({fs:t,gitdir:n,tree:f});return await Fm({fs:t,cache:e,onSign:r,gitdir:n,ref:s,tree:m,parent:d&&[d],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:c,signingKey:u})}async function HV({fs:t,onSign:e,dir:r,gitdir:n=Ne(r,".git"),ref:s="refs/notes/commits",oid:i,note:o,force:a,author:l,committer:c,signingKey:u,cache:d={}}){try{me("fs",t),me("gitdir",n),me("oid",i),me("note",o),u&&me("onSign",e);const h=new st(t),f=await pl({fs:h,gitdir:n,author:l});if(!f)throw new wn("author");const b=await Nc({fs:h,gitdir:n,author:f,committer:c});if(!b)throw new wn("committer");const m=await ot({fsp:h,dotgit:n});return await a4e({fs:h,cache:d,onSign:e,gitdir:m,ref:s,oid:i,note:o,force:a,author:f,committer:b,signingKey:u})}catch(h){throw h.caller="git.addNote",h}}const l4e=/(^|[/.])([/.]|$)|^@$|@{|[\x00-\x20\x7f~^:?*[\\]|\.lock(\/|$)/;function Ip(t,e){if(typeof t!="string")throw new TypeError("Reference name must be a string");return!l4e.test(t)&&!0}async function zV({fs:t,gitdir:e,remote:r,url:n,force:s}){if(!Ip(r))throw new Ri(r,Rp.clean(r));const i=await Gr.get({fs:t,gitdir:e});if(!s&&(await i.getSubsections("remote")).includes(r)&&n!==await i.get(`remote.${r}.url`))throw new Mi("remote",r);await i.set(`remote.${r}.url`,n),await i.set(`remote.${r}.fetch`,`+refs/heads/*:refs/remotes/${r}/*`),await Gr.save({fs:t,gitdir:e,config:i})}async function WV({fs:t,dir:e,gitdir:r=Ne(e,".git"),remote:n,url:s,force:i=!1}){try{me("fs",t),me("gitdir",r),me("remote",n),me("url",s);const o=new st(t),a=await ot({fsp:o,dotgit:r});return await zV({fs:o,gitdir:a,remote:n,url:s,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function c4e({fs:t,cache:e,onSign:r,gitdir:n,ref:s,tagger:i,message:o=s,gpgsig:a,object:l,signingKey:c,force:u=!1}){if(s=s.startsWith("refs/tags/")?s:`refs/tags/${s}`,!u&&await $e.exists({fs:t,gitdir:n,ref:s}))throw new Mi("tag",s);const d=await $e.resolve({fs:t,gitdir:n,ref:l||"HEAD"}),{type:h}=await mr({fs:t,cache:e,gitdir:n,oid:d});let f=Kn.from({object:d,type:h,tag:s.replace("refs/tags/",""),tagger:i,message:o,gpgsig:a});c&&(f=await Kn.sign(f,r,c));const b=await _s({fs:t,gitdir:n,type:"tag",object:f.toObject()});await $e.writeRef({fs:t,gitdir:n,ref:s,value:b})}async function VV({fs:t,onSign:e,dir:r,gitdir:n=Ne(r,".git"),ref:s,tagger:i,message:o=s,gpgsig:a,object:l,signingKey:c,force:u=!1,cache:d={}}){try{me("fs",t),me("gitdir",n),me("ref",s),c&&me("onSign",e);const h=new st(t),f=await ot({fsp:h,dotgit:n}),b=await pl({fs:h,gitdir:f,author:i});if(!b)throw new wn("tagger");return await c4e({fs:h,cache:d,onSign:e,gitdir:f,ref:s,tagger:b,message:o,gpgsig:a,object:l,signingKey:c,force:u})}catch(h){throw h.caller="git.annotatedTag",h}}async function u4e({fs:t,gitdir:e,ref:r,object:n,checkout:s=!1,force:i=!1}){if(!Ip(r))throw new Ri(r,Rp.clean(r));const o=`refs/heads/${r}`;if(!i&&await $e.exists({fs:t,gitdir:e,ref:o}))throw new Mi("branch",r,!1);let a;try{a=await $e.resolve({fs:t,gitdir:e,ref:n||"HEAD"})}catch{}a&&await $e.writeRef({fs:t,gitdir:e,ref:o,value:a}),s&&await $e.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:o})}async function GV({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n,object:s,checkout:i=!1,force:o=!1}){try{me("fs",t),me("gitdir",r),me("ref",n);const a=new st(t),l=await ot({fsp:a,dotgit:r});return await u4e({fs:a,gitdir:l,ref:n,object:s,checkout:i,force:o})}catch(a){throw a.caller="git.branch",a}}const qV=(t,e)=>t==="."||e==null||e.length===0||e==="."?!0:e.length>=t.length?e.startsWith(t):t.startsWith(e);async function f2({fs:t,cache:e,onProgress:r,onPostCheckout:n,dir:s,gitdir:i,remote:o,ref:a,filepaths:l,noCheckout:c,noUpdateHead:u,dryRun:d,force:h,track:f=!0,nonBlocking:b=!1,batchSize:m=100}){let g;if(n)try{g=await $e.resolve({fs:t,gitdir:i,ref:"HEAD"})}catch{g="0000000000000000000000000000000000000000"}let y;try{y=await $e.resolve({fs:t,gitdir:i,ref:a})}catch(v){if(a==="HEAD")throw v;const _=`${o}/${a}`;if(y=await $e.resolve({fs:t,gitdir:i,ref:_}),f){const x=await Gr.get({fs:t,gitdir:i});await x.set(`branch.${a}.remote`,o),await x.set(`branch.${a}.merge`,`refs/heads/${a}`),await Gr.save({fs:t,gitdir:i,config:x})}await $e.writeRef({fs:t,gitdir:i,ref:`refs/heads/${a}`,value:y})}if(!c){let v;try{v=await d4e({fs:t,cache:e,onProgress:r,dir:s,gitdir:i,ref:a,force:h,filepaths:l})}catch(T){throw T instanceof Zt&&T.data.what===y?new km(a,y):T}const _=v.filter(([T])=>T==="conflict").map(([T,E])=>E);if(_.length>0)throw new Em(_);const x=v.filter(([T])=>T==="error").map(([T,E])=>E);if(x.length>0)throw new vt(x.join(", "));if(d){n&&await n({previousHead:g,newHead:y,type:l!=null&&l.length>0?"file":"branch"});return}let w=0;const S=v.length;if(await Wr.acquire({fs:t,gitdir:i,cache:e},async function(T){await Promise.all(v.filter(([E])=>E==="delete"||E==="delete-index").map(async function([E,C]){const A=`${s}/${C}`;E==="delete"&&await t.rm(A),T.delete({filepath:C}),r&&await r({phase:"Updating workdir",loaded:++w,total:S})}))}),await Wr.acquire({fs:t,gitdir:i,cache:e},async function(T){for(const[E,C]of v)if(E==="rmdir"||E==="rmdir-index"){const A=`${s}/${C}`;try{E==="rmdir"&&await t.rmdir(A),T.delete({filepath:C}),r&&await r({phase:"Updating workdir",loaded:++w,total:S})}catch(I){if(I.code==="ENOTEMPTY")console.log(`Did not delete ${C} because directory is not empty`);else throw I}}}),await Promise.all(v.filter(([T])=>T==="mkdir"||T==="mkdir-index").map(async function([T,E]){const C=`${s}/${E}`;await t.mkdir(C),r&&await r({phase:"Updating workdir",loaded:++w,total:S})})),b){const T=v.filter(([C])=>C==="create"||C==="create-index"||C==="update"||C==="mkdir-index"),E=await iM("Update Working Dir",T.map(([C,A,I,P,D])=>()=>f4e({fs:t,cache:e,gitdir:i,dir:s},[C,A,I,P,D])),r,m);await Wr.acquire({fs:t,gitdir:i,cache:e,allowUnmerged:!0},async function(C){await iM("Update Index",E.map(([A,I,P])=>()=>h4e({index:C,fullpath:A,oid:I,stats:P})),r,m)})}else await Wr.acquire({fs:t,gitdir:i,cache:e,allowUnmerged:!0},async function(T){await Promise.all(v.filter(([E])=>E==="create"||E==="create-index"||E==="update"||E==="mkdir-index").map(async function([E,C,A,I,P]){const D=`${s}/${C}`;try{if(E!=="create-index"&&E!=="mkdir-index"){const{object:F}=await mr({fs:t,cache:e,gitdir:i,oid:A});if(P&&await t.rm(D),I===33188)await t.write(D,F);else if(I===33261)await t.write(D,F,{mode:511});else if(I===40960)await t.writelink(D,F);else throw new vt(`Invalid mode 0o${I.toString(8)} detected in blob ${A}`)}const R=await t.lstat(D);I===33261&&(R.mode=493),E==="mkdir-index"&&(R.mode=57344),T.insert({filepath:C,stats:R,oid:A}),r&&await r({phase:"Updating workdir",loaded:++w,total:S})}catch(R){console.log(R)}}))});n&&await n({previousHead:g,newHead:y,type:l!=null&&l.length>0?"file":"branch"})}if(!u){const v=await $e.expand({fs:t,gitdir:i,ref:a});v.startsWith("refs/heads")?await $e.writeSymbolicRef({fs:t,gitdir:i,ref:"HEAD",value:v}):await $e.writeRef({fs:t,gitdir:i,ref:"HEAD",value:y})}}async function d4e({fs:t,cache:e,onProgress:r,dir:n,gitdir:s,ref:i,force:o,filepaths:a}){let l=0;return fl({fs:t,cache:e,dir:n,gitdir:s,trees:[Ns({ref:i}),nh(),zc()],map:async function(c,[u,d,h]){if(c===".")return;if(a&&!a.some(b=>qV(c,b)))return null;switch(r&&await r({phase:"Analyzing workdir",loaded:++l}),[!!h,!!u,!!d].map(Number).join("")){case"000":return;case"001":return o&&a&&a.includes(c)?["delete",c]:void 0;case"010":switch(await u.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await u.oid(),await u.mode()];case"commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`new entry Unhandled type ${await u.type()}`]}case"011":switch(`${await u.type()}-${await d.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await u.oid()!==await d.oid()?o?["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()]:["conflict",c]:await u.mode()!==await d.mode()?o?["update",c,await u.oid(),await u.mode(),!0]:["conflict",c]:["create-index",c,await u.oid(),await u.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${u.type}`]}case"100":return["delete-index",c];case"101":switch(await h.type()){case"tree":return["rmdir-index",c];case"blob":return await h.oid()!==await d.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await h.type()}`]}case"110":case"111":switch(`${await h.type()}-${await u.type()}`){case"tree-tree":return;case"blob-blob":{if(await h.oid()===await u.oid()&&await h.mode()===await u.mode()&&!o)return;if(d){if(await d.oid()!==await h.oid()&&await d.oid()!==await u.oid())return o?["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()]:["conflict",c]}else if(o)return["update",c,await u.oid(),await u.mode(),await u.mode()!==await h.mode()];return await u.mode()!==await h.mode()?["update",c,await u.oid(),await u.mode(),!0]:await u.oid()!==await h.oid()?["update",c,await u.oid(),await u.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await u.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`update entry Unhandled type ${await h.type()}-${await u.type()}`]}}},reduce:async function(c,u){return u=DV(u),c?c&&c[0]==="rmdir"?(u.push(c),u):(u.unshift(c),u):u}})}async function h4e({index:t,fullpath:e,stats:r,oid:n}){try{t.insert({filepath:e,stats:r,oid:n})}catch(s){console.warn(`Error inserting ${e} into index:`,s)}}async function f4e({fs:t,cache:e,gitdir:r,dir:n},[s,i,o,a,l]){const c=`${n}/${i}`;if(s!=="create-index"&&s!=="mkdir-index"){const{object:d}=await mr({fs:t,cache:e,gitdir:r,oid:o});if(l&&await t.rm(c),a===33188)await t.write(c,d);else if(a===33261)await t.write(c,d,{mode:511});else if(a===40960)await t.writelink(c,d);else throw new vt(`Invalid mode 0o${a.toString(8)} detected in blob ${o}`)}const u=await t.lstat(c);return a===33261&&(u.mode=493),s==="mkdir-index"&&(u.mode=57344),[i,o,u]}async function iM(t,e,r,n){const s=[];try{for(let i=0;i<e.length;i+=n){const o=e.slice(i,i+n).map(l=>l());(await Promise.allSettled(o)).forEach(l=>{l.status==="fulfilled"&&s.push(l.value)}),r&&await r({phase:"Updating workdir",loaded:i+o.length,total:e.length})}return s}catch(i){console.error(`Error during ${t}: ${i}`)}return s}async function p2({fs:t,onProgress:e,onPostCheckout:r,dir:n,gitdir:s=Ne(n,".git"),remote:i="origin",ref:o,filepaths:a,noCheckout:l=!1,noUpdateHead:c=o===void 0,dryRun:u=!1,force:d=!1,track:h=!0,cache:f={},nonBlocking:b=!1,batchSize:m=100}){try{me("fs",t),me("dir",n),me("gitdir",s);const g=o||"HEAD",y=new st(t),v=await ot({fsp:y,dotgit:s});return await f2({fs:y,cache:f,onProgress:e,onPostCheckout:r,dir:n,gitdir:v,remote:i,ref:g,filepaths:a,noCheckout:l,noUpdateHead:c,dryRun:u,force:d,track:h,nonBlocking:b,batchSize:m})}catch(g){throw g.caller="git.checkout",g}}const k1=/^.*(\r?\n|$)/gm;function p4e({branches:t,contents:e}){const r=t[1],n=t[2],s=e[0],i=e[1],o=e[2],a=i.match(k1),l=s.match(k1),c=o.match(k1),u=o5e(a,l,c),d=7;let h="",f=!0;for(const b of u)b.ok&&(h+=b.ok.join("")),b.conflict&&(f=!1,h+=`${"<".repeat(d)} ${r}
`,h+=b.conflict.a.join(""),h+=`${"=".repeat(d)}
`,h+=b.conflict.b.join(""),h+=`${">".repeat(d)} ${n}
`);return{cleanMerge:f,mergedText:h}}async function KV({fs:t,cache:e,dir:r,gitdir:n=Ne(r,".git"),index:s,ourOid:i,baseOid:o,theirOid:a,ourName:l="ours",baseName:c="base",theirName:u="theirs",dryRun:d=!1,abortOnConflict:h=!0,mergeDriver:f}){const b=Ns({ref:i}),m=Ns({ref:o}),g=Ns({ref:a}),y=[],v=[],_=[],x=[],w=await fl({fs:t,cache:e,dir:r,gitdir:n,trees:[b,m,g],map:async function(S,[T,E,C]){const A=Vy(S),I=await Yy(T,E),P=await Yy(C,E);switch(`${I}-${P}`){case"false-false":return{mode:await E.mode(),path:A,oid:await E.oid(),type:await E.type()};case"false-true":return!C&&await T.type()==="tree"?{mode:await T.mode(),path:A,oid:await T.oid(),type:await T.type()}:C?{mode:await C.mode(),path:A,oid:await C.oid(),type:await C.type()}:void 0;case"true-false":return!T&&await C.type()==="tree"?{mode:await C.mode(),path:A,oid:await C.oid(),type:await C.type()}:T?{mode:await T.mode(),path:A,oid:await T.oid(),type:await T.type()}:void 0;case"true-true":{if(T&&C&&await T.type()==="tree"&&await C.type()==="tree")return{mode:await T.mode(),path:A,oid:await T.oid(),type:"tree"};if(T&&C&&await T.type()==="blob"&&await C.type()==="blob")return m4e({fs:t,gitdir:n,path:A,ours:T,base:E,theirs:C,ourName:l,baseName:c,theirName:u,mergeDriver:f}).then(async D=>{if(D.cleanMerge)h||s.insert({filepath:S,oid:D.mergeResult.oid,stage:0});else if(y.push(S),v.push(S),!h){let R="";E&&await E.type()==="blob"&&(R=await E.oid());const F=await T.oid(),G=await C.oid();s.delete({filepath:S}),R&&s.insert({filepath:S,oid:R,stage:1}),s.insert({filepath:S,oid:F,stage:2}),s.insert({filepath:S,oid:G,stage:3})}return D.mergeResult});if(E&&!T&&C&&await E.type()==="blob"&&await C.type()==="blob"){if(y.push(S),_.push(S),!h){const D=await E.oid(),R=await C.oid();s.delete({filepath:S}),s.insert({filepath:S,oid:D,stage:1}),s.insert({filepath:S,oid:R,stage:3})}return{mode:await C.mode(),oid:await C.oid(),type:"blob",path:A}}if(E&&T&&!C&&await E.type()==="blob"&&await T.type()==="blob"){if(y.push(S),x.push(S),!h){const D=await E.oid(),R=await T.oid();s.delete({filepath:S}),s.insert({filepath:S,oid:D,stage:1}),s.insert({filepath:S,oid:R,stage:2})}return{mode:await T.mode(),oid:await T.oid(),type:"blob",path:A}}if(E&&!T&&!C&&(await E.type()==="blob"||await E.type()==="tree"))return;throw new th}}},reduce:y.length!==0&&(!r||h)?void 0:async(S,T)=>{const E=T.filter(Boolean);if(S&&!(S&&S.type==="tree"&&E.length===0&&S.path!==".")){if(E.length>0||S.path==="."&&E.length===0){const A=new ys(E).toObject(),I=await _s({fs:t,gitdir:n,type:"tree",object:A,dryRun:d});S.oid=I}return S}}});return y.length!==0?(r&&!h&&await fl({fs:t,cache:e,dir:r,gitdir:n,trees:[Ns({ref:w.oid})],map:async function(S,[T]){const E=`${r}/${S}`;if(await T.type()==="blob"){const C=await T.mode(),A=new TextDecoder().decode(await T.content());await t.write(E,A,{mode:C})}return!0}}),new Wc(y,v,_,x)):w.oid}async function m4e({fs:t,gitdir:e,path:r,ours:n,base:s,theirs:i,ourName:o,theirName:a,baseName:l,dryRun:c,mergeDriver:u=p4e}){const d="blob";let h="100755",f="",b="";s&&await s.type()==="blob"&&(h=await s.mode(),f=await s.oid(),b=qe.from(await s.content()).toString("utf8"));const m=h===await n.mode()?await i.mode():await n.mode();if(await n.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:r,oid:await n.oid(),type:d}};if(await n.oid()===f)return{cleanMerge:!0,mergeResult:{mode:m,path:r,oid:await i.oid(),type:d}};if(await i.oid()===f)return{cleanMerge:!0,mergeResult:{mode:m,path:r,oid:await n.oid(),type:d}};const g=qe.from(await n.content()).toString("utf8"),y=qe.from(await i.content()).toString("utf8"),{mergedText:v,cleanMerge:_}=await u({branches:[l,o,a],contents:[b,g,y],path:r}),x=await _s({fs:t,gitdir:e,type:"blob",object:qe.from(v,"utf8"),dryRun:c});return{cleanMerge:_,mergeResult:{mode:m,path:r,oid:x,type:d}}}const g4e={stage:zc,workdir:nh};let A1;async function Rd(t,e){return A1===void 0&&(A1=new Ap),A1.acquire(t,e)}async function b4e(t,e,r,n,s=null){const i=Ne(r,n),o=await t.lstat(i);if(!o)throw new Zt(i);if(o.isDirectory())throw new vt(`${i}: file expected, but found directory`);const a=s?await AV({fs:t,gitdir:e,oid:s}):void 0;let l=a?s:void 0;return a||await Rd({fs:t,gitdir:e,currentFilepath:i},async()=>{const c=o.isSymbolicLink()?await t.readlink(i).then(MV):await t.read(i);if(c===null)throw new Zt(i);l=await _s({fs:t,gitdir:e,type:"blob",object:c})}),l}async function y4e({fs:t,dir:e,gitdir:r,entries:n}){async function s(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(s));i.oid=await $m({fs:t,gitdir:r,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await b4e(t,r,e,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(n.map(s))}async function oM({fs:t,dir:e,gitdir:r,treePair:n}){const s=n[1]==="stage",i=n.map(f=>typeof f=="string"?g4e[f]():f),o=[],u=await fl({fs:t,cache:{},dir:e,gitdir:r,trees:i,map:async(f,[b,m])=>{if(!(f==="."||await sh.isIgnored({fs:t,dir:e,gitdir:r,filepath:f}))&&m)return(!b||await b.oid()!==await m.oid()&&await m.oid()!==void 0)&&o.push([b,m]),{mode:await m.mode(),path:f,oid:await m.oid(),type:await m.type()}},reduce:async(f,b)=>(b=b.filter(Boolean),f?(f.children=b,f):b.length>0?b:void 0),iterate:async(f,b)=>{const m=[];for(const g of b){const[y,v]=g;s?v&&(await t.exists(`${e}/${v.toString()}`)?m.push(g):o.push([null,v])):y&&(v?m.push(g):o.push([y,null]))}return m.length?Promise.all(m.map(f)):[]}});if(o.length===0||u.length===0)return null;const h=(await y4e({fs:t,dir:e,gitdir:r,entries:u})).filter(Boolean).map(f=>({mode:f.mode,path:f.path,oid:f.oid,type:f.type}));return $m({fs:t,gitdir:r,tree:h})}async function YV({fs:t,dir:e,gitdir:r,stashCommit:n,parentCommit:s,wasStaged:i}){const o=[],a=[],l=await fl({fs:t,cache:{},dir:e,gitdir:r,trees:[Ns({ref:s}),Ns({ref:n})],map:async(c,[u,d])=>{if(c==="."||await sh.isIgnored({fs:t,dir:e,gitdir:r,filepath:c}))return;const h=d?await d.type():await u.type();if(h!=="tree"&&h!=="blob")return;if(!d&&u){const b=h==="tree"?"rmdir":"rm";return h==="tree"&&o.push(c),h==="blob"&&i&&a.push({filepath:c,oid:await u.oid()}),{method:b,filepath:c}}const f=await d.oid();if(!u||await u.oid()!==f)return h==="tree"?{method:"mkdir",filepath:c}:(i&&a.push({filepath:c,oid:f,stats:await t.lstat(Ne(e,c))}),{method:"write",filepath:c,oid:f})}});await Rd({fs:t,gitdir:r,dirRemoved:o,ops:l},async()=>{for(const c of l){const u=Ne(e,c.filepath);switch(c.method){case"rmdir":await t.rmdir(u);break;case"mkdir":await t.mkdir(u);break;case"rm":await t.rm(u);break;case"write":if(!o.some(d=>u.startsWith(d))){const{object:d}=await mr({fs:t,cache:{},gitdir:r,oid:c.oid});await t.exists(u)&&await t.rm(u),await t.write(u,d)}break}}}),await Wr.acquire({fs:t,gitdir:r,cache:{}},async c=>{a.forEach(({filepath:u,stats:d,oid:h})=>{c.insert({filepath:u,stats:d,oid:h})})})}async function aM({fs:t,cache:e,dir:r,gitdir:n,oid:s,dryRun:i=!1,noUpdateBranch:o=!1,abortOnConflict:a=!0,committer:l,mergeDriver:c}){const{commit:u,oid:d}=await xo({fs:t,cache:e,gitdir:n,oid:s});if(u.parent.length>1)throw new Cm(d,u.parent.length);if(u.parent.length===0)throw new Tm(d);const h=await $e.resolve({fs:t,gitdir:n,ref:"HEAD"}),{commit:f}=await xo({fs:t,cache:e,gitdir:n,oid:h}),b=u.parent[0],{commit:m}=await xo({fs:t,cache:e,gitdir:n,oid:b}),g=await Wr.acquire({fs:t,gitdir:n,cache:e,allowUnmerged:!1},async v=>KV({fs:t,cache:e,dir:r,gitdir:n,index:v,ourOid:f.tree,baseOid:m.tree,theirOid:u.tree,ourName:"HEAD",baseName:`parent of ${d.slice(0,7)}`,theirName:d.slice(0,7),dryRun:i,abortOnConflict:a,mergeDriver:c}));if(g instanceof Wc)throw g;const y=await Fm({fs:t,cache:e,gitdir:n,message:u.message,tree:g,parent:[h],author:u.author,committer:l,dryRun:i,noUpdateBranch:o});return r&&!i&&!o&&await YV({fs:t,dir:r,gitdir:n,stashCommit:y,parentCommit:h,wasStaged:!0}),y}async function XV({fs:t,dir:e,gitdir:r=Ne(e,".git"),oid:n,cache:s={},committer:i,dryRun:o=!1,noUpdateBranch:a=!1,abortOnConflict:l=!0,mergeDriver:c}){try{me("fs",t),me("gitdir",r),me("oid",n);const u=new st(t),d=await ot({fsp:u,dotgit:r}),{commit:h}=await xo({fs:u,cache:s,gitdir:d,oid:n});if(h.parent&&h.parent.length>1)return await aM({fs:u,cache:s,dir:e,gitdir:d,oid:n,dryRun:o,noUpdateBranch:a,abortOnConflict:l,committer:void 0,mergeDriver:c});const f=await Nc({fs:u,gitdir:d,committer:i});if(!f)throw new wn("committer");return await aM({fs:u,cache:s,dir:e,gitdir:d,oid:n,dryRun:o,noUpdateBranch:a,abortOnConflict:l,committer:f,mergeDriver:c})}catch(u){throw u.caller="git.cherryPick",u}}const v4e=/^refs\/(heads\/|tags\/|remotes\/)?(.*)/;function ic(t){const e=v4e.exec(t);return e?e[1]==="remotes/"&&t.endsWith("/HEAD")?e[2].slice(0,-5):e[2]:t}async function kl({fs:t,gitdir:e,fullname:r=!1,test:n=!1}){const s=await $e.resolve({fs:t,gitdir:e,ref:"HEAD",depth:2});if(n)try{await $e.resolve({fs:t,gitdir:e,ref:s})}catch{return}if(s.startsWith("refs/"))return r?s:ic(s)}function _4e(t){return t=t.replace(/^git@([^:]+):/,"https://$1/"),t=t.replace(/^ssh:\/\//,"https://"),t}function JV({username:t="",password:e=""}){return`Basic ${qe.from(`${t}:${e}`).toString("base64")}`}async function Um(t,e){const r=RV(t);for(;;){const{value:n,done:s}=await r.next();if(n&&await e(n),s)break}r.return&&r.return()}async function Xy(t){let e=0;const r=[];await Um(t,i=>{r.push(i),e+=i.byteLength});const n=new Uint8Array(e);let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}function lM(t){let e=t.match(/^https?:\/\/([^/]+)@/);if(e==null)return{url:t,auth:{}};e=e[1];const[r,n]=e.split(":");return t=t.replace(`${e}@`,""),{url:t,auth:{username:r,password:n}}}function kC(t,e){const r=e.toString(16);return"0".repeat(t-r.length)+r}class Mr{static flush(){return qe.from("0000","utf8")}static delim(){return qe.from("0001","utf8")}static encode(e){typeof e=="string"&&(e=qe.from(e));const r=e.length+4,n=kC(4,r);return qe.concat([qe.from(n,"utf8"),e])}static streamReader(e){const r=new PV(e);return async function(){try{let s=await r.read(4);if(s==null)return!0;if(s=parseInt(s.toString("utf8"),16),s===0||s===1)return null;const i=await r.read(s-4);return i??!0}catch(s){return e.error=s,!0}}}}async function cM(t){const e={};let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const n=r.indexOf("=");if(n>-1){const s=r.slice(0,n),i=r.slice(n+1);e[s]=i}else e[r]=!0}return{protocolVersion:2,capabilities2:e}}async function uM(t,{service:e}){const r=new Set,n=new Map,s=new Map,i=Mr.streamReader(t);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new Am;if(o.includes("version 2"))return cM(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${e}`)throw new Vc(`# service=${e}\\n`,o.toString("utf8"));let a=await i();for(;a===null;)a=await i();if(a===!0)return{capabilities:r,refs:n,symrefs:s};if(a=a.toString("utf8"),a.includes("version 2"))return cM(i);const[l,c]=R1(a,"\0","\\x00");if(c.split(" ").map(u=>r.add(u)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[u,d]=R1(l," "," ");for(n.set(d,u);;){const h=await i();if(h===!0)break;if(h!==null){const[f,b]=R1(h.toString("utf8")," "," ");n.set(b,f)}}}for(const u of r)if(u.startsWith("symref=")){const d=u.match(/symref=([^:]+):(.*)/);d.length===3&&s.set(d[1],d[2])}return{protocolVersion:1,capabilities:r,refs:n,symrefs:s}}function R1(t,e,r){const n=t.trim().split(e);if(n.length!==2)throw new Vc(`Two strings separated by '${r}'`,t.toString("utf8"));return n}const dM=(t,e)=>t.endsWith("?")?`${t}${e}`:`${t}/${e.replace(/^https?:\/\//,"")}`,hM=(t,e)=>{(e.username||e.password)&&(t.Authorization=JV(e)),e.headers&&Object.assign(t,e.headers)},P1=async t=>{try{const e=qe.from(await Xy(t.body)),r=e.toString("utf8");return{preview:r.length<256?r:r.slice(0,256)+"...",response:r,data:e}}catch{return{}}};class Jy{static async capabilities(){return["discover","connect"]}static async discover({http:e,onProgress:r,onAuth:n,onAuthSuccess:s,onAuthFailure:i,corsProxy:o,service:a,url:l,headers:c,protocolVersion:u}){let{url:d,auth:h}=lM(l);const f=o?dM(o,d):d;(h.username||h.password)&&(c.Authorization=JV(h)),u===2&&(c["Git-Protocol"]="version=2");let b,m,g=!1;do if(b=await e.request({onProgress:r,method:"GET",url:`${f}/info/refs?service=${a}`,headers:c}),m=!1,b.statusCode===401||b.statusCode===203){const y=g?i:n;if(y){if(h=await y(d,{...h,headers:{...c}}),h&&h.cancel)throw new rh;h&&(hM(c,h),g=!0,m=!0)}}else b.statusCode===200&&g&&s&&await s(d,h);while(m);if(b.statusCode!==200){const{response:y}=await P1(b);throw new Td(b.statusCode,b.statusMessage,y)}if(b.headers["content-type"]===`application/x-${a}-advertisement`){const y=await uM(b.body,{service:a});return y.auth=h,y}else{const{preview:y,response:v,data:_}=await P1(b);try{const x=await uM([_],{service:a});return x.auth=h,x}catch{throw new Dm(y,v)}}}static async connect({http:e,onProgress:r,corsProxy:n,service:s,url:i,auth:o,body:a,headers:l}){const c=lM(i);c&&(i=c.url),n&&(i=dM(n,i)),l["content-type"]=`application/x-${s}-request`,l.accept=`application/x-${s}-result`,hM(l,o);const u=await e.request({onProgress:r,method:"POST",url:`${i}/${s}`,body:a,headers:l});if(u.statusCode!==200){const{response:d}=P1(u);throw new Td(u.statusCode,u.statusMessage,d)}return u}}class A_{static getRemoteHelperFor({url:e}){const r=new Map;r.set("http",Jy),r.set("https",Jy);const n=x4e({url:e});if(!n)throw new Lm(e);if(r.has(n.transport))return r.get(n.transport);throw new Om(e,n.transport,n.transport==="ssh"?_4e(e):void 0)}}function x4e({url:t}){if(t.startsWith("git@"))return{transport:"ssh",address:t};const e=t.match(/(\w+)(:\/\/|::)(.*)/);if(e!==null){if(e[2]==="://")return{transport:e[1],address:e[0]};if(e[2]==="::")return{transport:e[1],address:e[3]}}}let jl=null;class Np{static async read({fs:e,gitdir:r}){jl===null&&(jl=new Ap);const n=Ne(r,"shallow"),s=new Set;return await jl.acquire(n,async function(){const i=await e.read(n,{encoding:"utf8"});if(i===null||i.trim()==="")return s;i.trim().split(`
`).map(o=>s.add(o))}),s}static async write({fs:e,gitdir:r,oids:n}){jl===null&&(jl=new Ap);const s=Ne(r,"shallow");if(n.size>0){const i=[...n].join(`
`)+`
`;await jl.acquire(s,async function(){await e.write(s,i,{encoding:"utf8"})})}else await jl.acquire(s,async function(){await e.rm(s)})}}async function w4e({fs:t,gitdir:e,oid:r}){const n=`objects/${r.slice(0,2)}/${r.slice(2)}`;return t.exists(`${e}/${n}`)}async function S4e({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:s}){let i=await t.readdir(Ne(r,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const a=`${r}/objects/pack/${o}`,l=await h2({fs:t,cache:e,filename:a,getExternalRefDelta:s});if(l.error)throw new vt(l.error);if(l.offsets.has(n))return!0}return!1}async function fM({fs:t,cache:e,gitdir:r,oid:n,format:s="content"}){const i=a=>mr({fs:t,cache:e,gitdir:r,oid:a});let o=await w4e({fs:t,gitdir:r,oid:n});return o||(o=await S4e({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i})),o}function E4e(t){const s="5041434b"+"00000002"+"00000000";return t.slice(0,12).toString("hex")===s}function ZV(t,e){const r=t.map(n=>n.split("=",1)[0]);return e.filter(n=>{const s=n.split("=",1)[0];return r.includes(s)})}const R_={name:"isomorphic-git",version:"1.37.1",agent:"git/isomorphic-git@1.37.1"};class lb{constructor(){this._queue=[]}write(e){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const r=this._waiting;this._waiting=null,r({value:e})}else this._queue.push(e)}end(){if(this._ended=!0,this._waiting){const e=this._waiting;this._waiting=null,e({done:!0})}}destroy(e){this.error=e,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(e=>{this._waiting=e})}}function C4e(t){const e=t.indexOf("\r"),r=t.indexOf(`
`);return e===-1&&r===-1?-1:e===-1?r+1:r===-1?e+1:r===e+1?r+1:Math.min(e,r)+1}function QV(t){const e=new lb;let r="";return(async()=>(await Um(t,n=>{for(n=n.toString("utf8"),r+=n;;){const s=C4e(r);if(s===-1)break;e.write(r.slice(0,s)),r=r.slice(s)}}),r.length>0&&e.write(r),e.end()))(),e}class eG{static demux(e){const r=Mr.streamReader(e),n=new lb,s=new lb,i=new lb,o=async function(){const a=await r();if(a===null)return o();if(a===!0){n.end(),i.end(),e.error?s.destroy(e.error):s.end();return}switch(a[0]){case 1:{s.write(a.slice(1));break}case 2:{i.write(a.slice(1));break}case 3:{const l=a.slice(1);i.write(l),n.end(),i.end(),s.destroy(new Error(l.toString("utf8")));return}default:n.write(a)}o()};return o(),{packetlines:n,packfile:s,progress:i}}}async function T4e(t){const{packetlines:e,packfile:r,progress:n}=eG.demux(t),s=[],i=[],o=[];let a=!1,l=!1;return new Promise((c,u)=>{Um(e,d=>{const h=d.toString("utf8").trim();if(h.startsWith("shallow")){const f=h.slice(-41).trim();f.length!==40&&u(new dl(f)),s.push(f)}else if(h.startsWith("unshallow")){const f=h.slice(-41).trim();f.length!==40&&u(new dl(f)),i.push(f)}else if(h.startsWith("ACK")){const[,f,b]=h.split(" ");o.push({oid:f,status:b}),b||(l=!0)}else h.startsWith("NAK")?(a=!0,l=!0):(l=!0,a=!0);l&&(t.error?u(t.error):c({shallows:s,unshallows:i,acks:o,nak:a,packfile:r,progress:n}))}).finally(()=>{l||(t.error?u(t.error):c({shallows:s,unshallows:i,acks:o,nak:a,packfile:r,progress:n}))})})}function k4e({capabilities:t=[],wants:e=[],haves:r=[],shallows:n=[],depth:s=null,since:i=null,exclude:o=[]}){const a=[];e=[...new Set(e)];let l=` ${t.join(" ")}`;for(const c of e)a.push(Mr.encode(`want ${c}${l}
`)),l="";for(const c of n)a.push(Mr.encode(`shallow ${c}
`));s!==null&&a.push(Mr.encode(`deepen ${s}
`)),i!==null&&a.push(Mr.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of o)a.push(Mr.encode(`deepen-not ${c}
`));a.push(Mr.flush());for(const c of r)a.push(Mr.encode(`have ${c}
`));return a.push(Mr.encode(`done
`)),a}async function m2({fs:t,cache:e,http:r,onProgress:n,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,gitdir:l,ref:c,remoteRef:u,remote:d,url:h,corsProxy:f,depth:b=null,since:m=null,exclude:g=[],relative:y=!1,tags:v=!1,singleBranch:_=!1,headers:x={},prune:w=!1,pruneTags:S=!1}){const T=c||await kl({fs:t,gitdir:l,test:!0}),E=await Gr.get({fs:t,gitdir:l}),C=d||T&&await E.get(`branch.${T}.remote`)||"origin",A=h||await E.get(`remote.${C}.url`);if(typeof A>"u")throw new ms("remote OR url");const I=u||T&&await E.get(`branch.${T}.merge`)||c||"HEAD";f===void 0&&(f=await E.get("http.corsProxy"));const P=A_.getRemoteHelperFor({url:A}),D=await P.discover({http:r,onAuth:i,onAuthSuccess:o,onAuthFailure:a,corsProxy:f,service:"git-upload-pack",url:A,headers:x,protocolVersion:1}),R=D.auth,F=D.refs;if(F.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(b!==null&&!D.capabilities.has("shallow"))throw new Ka("shallow","depth");if(m!==null&&!D.capabilities.has("deepen-since"))throw new Ka("deepen-since","since");if(g.length>0&&!D.capabilities.has("deepen-not"))throw new Ka("deepen-not","exclude");if(y===!0&&!D.capabilities.has("deepen-relative"))throw new Ka("deepen-relative","relative");const{oid:G,fullref:z}=$e.resolveAgainstMap({ref:I,map:F});for(const re of F.keys())re===z||re==="HEAD"||re.startsWith("refs/heads/")||v&&re.startsWith("refs/tags/")||F.delete(re);const K=ZV([...D.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${R_.agent}`]);y&&K.push("deepen-relative");const L=_?[G]:F.values(),O=_?[T]:await $e.listRefs({fs:t,gitdir:l,filepath:"refs"});let $=[];for(let re of O)try{re=await $e.expand({fs:t,gitdir:l,ref:re});const pe=await $e.resolve({fs:t,gitdir:l,ref:re});await fM({fs:t,cache:e,gitdir:l,oid:pe})&&$.push(pe)}catch{}$=[...new Set($)];const H=await Np.read({fs:t,gitdir:l}),U=D.capabilities.has("shallow")?[...H]:[],ee=k4e({capabilities:K,wants:L,haves:$,shallows:U,depth:b,since:m,exclude:g}),X=qe.from(await Xy(ee)),ge=await P.connect({http:r,onProgress:n,corsProxy:f,service:"git-upload-pack",url:A,auth:R,body:[X],headers:x}),J=await T4e(ge.body);ge.headers&&(J.headers=ge.headers);for(const re of J.shallows)if(!H.has(re))try{const{object:pe}=await mr({fs:t,cache:e,gitdir:l,oid:re}),M=new _r(pe),oe=await Promise.all(M.headers().parent.map(q=>fM({fs:t,cache:e,gitdir:l,oid:q})));oe.length===0||oe.every(q=>q)||H.add(re)}catch{H.add(re)}for(const re of J.unshallows)H.delete(re);if(await Np.write({fs:t,gitdir:l,oids:H}),_){const re=new Map([[z,G]]),pe=new Map;let M=10,oe=z;for(;M--;){const V=D.symrefs.get(oe);if(V===void 0)break;pe.set(oe,V),oe=V}const le=F.get(oe);le&&re.set(oe,le);const{pruned:q}=await $e.updateRemoteRefs({fs:t,gitdir:l,remote:C,refs:re,symrefs:pe,tags:v,prune:w});w&&(J.pruned=q)}else{const{pruned:re}=await $e.updateRemoteRefs({fs:t,gitdir:l,remote:C,refs:F,symrefs:D.symrefs,tags:v,prune:w,pruneTags:S});w&&(J.pruned=re)}if(J.HEAD=D.symrefs.get("HEAD"),J.HEAD===void 0){const{oid:re}=$e.resolveAgainstMap({ref:"HEAD",map:F});for(const[pe,M]of F.entries())if(pe!=="HEAD"&&M===re){J.HEAD=pe;break}}const j=z.startsWith("refs/tags")?"tag":"branch";if(J.FETCH_HEAD={oid:G,description:`${j} '${ic(z)}' of ${A}`},n||s){const re=QV(J.progress);Um(re,async pe=>{if(s&&await s(pe),n){const M=pe.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);M&&await n({phase:M[1].trim(),loaded:parseInt(M[2],10),total:parseInt(M[3],10)})}})}const Y=qe.from(await Xy(J.packfile));if(ge.body.error)throw ge.body.error;const Q=Y.slice(-20).toString("hex"),ie={defaultBranch:J.HEAD,fetchHead:J.FETCH_HEAD.oid,fetchHeadDescription:J.FETCH_HEAD.description};if(J.headers&&(ie.headers=J.headers),w&&(ie.pruned=J.pruned),Q!==""&&!E4e(Y)){ie.packfile=`objects/pack/pack-${Q}.pack`;const re=Ne(l,ie.packfile);await t.write(re,Y);const pe=oe=>mr({fs:t,cache:e,gitdir:l,oid:oe}),M=await Cd.fromPack({pack:Y,getExternalRefDelta:pe,onProgress:n});await t.write(re.replace(/\.pack$/,".idx"),await M.toBuffer())}return ie}async function tG({fs:t,bare:e=!1,dir:r,gitdir:n=e?r:Ne(r,".git"),defaultBranch:s="master"}){if(await t.exists(n+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>n+"/"+o);for(const o of i)await t.mkdir(o);await t.write(n+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${e}
`+(e?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await t.write(n+"/HEAD",`ref: refs/heads/${s}
`)}async function A4e({fs:t,cache:e,http:r,onProgress:n,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,onPostCheckout:l,dir:c,gitdir:u,url:d,corsProxy:h,ref:f,remote:b,depth:m,since:g,exclude:y,relative:v,singleBranch:_,noCheckout:x,noTags:w,headers:S,nonBlocking:T,batchSize:E=100}){try{if(await tG({fs:t,gitdir:u}),await zV({fs:t,gitdir:u,remote:b,url:d,force:!1}),h){const I=await Gr.get({fs:t,gitdir:u});await I.set("http.corsProxy",h),await Gr.save({fs:t,gitdir:u,config:I})}const{defaultBranch:C,fetchHead:A}=await m2({fs:t,cache:e,http:r,onProgress:n,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,gitdir:u,ref:f,remote:b,corsProxy:h,depth:m,since:g,exclude:y,relative:v,singleBranch:_,headers:S,tags:!w});if(A===null)return;f=f||C,f=f.replace("refs/heads/",""),await f2({fs:t,cache:e,onProgress:n,onPostCheckout:l,dir:c,gitdir:u,ref:f,remote:b,noCheckout:x,nonBlocking:T,batchSize:E})}catch(C){throw await t.rmdir(u,{recursive:!0,maxRetries:10}).catch(()=>{}),C}}async function rG({fs:t,http:e,onProgress:r,onMessage:n,onAuth:s,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:a,dir:l,gitdir:c=Ne(l,".git"),url:u,corsProxy:d=void 0,ref:h=void 0,remote:f="origin",depth:b=void 0,since:m=void 0,exclude:g=[],relative:y=!1,singleBranch:v=!1,noCheckout:_=!1,noTags:x=!1,headers:w={},cache:S={},nonBlocking:T=!1,batchSize:E=100}){try{me("fs",t),me("http",e),me("gitdir",c),_||me("dir",l),me("url",u);const C=new st(t),A=await ot({fsp:C,dotgit:c});return await A4e({fs:C,cache:S,http:e,onProgress:r,onMessage:n,onAuth:s,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:a,dir:l,gitdir:A,url:u,corsProxy:d,ref:h,remote:f,depth:b,since:m,exclude:g,relative:y,singleBranch:v,noCheckout:_,noTags:x,headers:w,nonBlocking:T,batchSize:E})}catch(C){throw C.caller="git.clone",C}}async function nG({fs:t,onSign:e,dir:r,gitdir:n=Ne(r,".git"),message:s,author:i,committer:o,signingKey:a,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:d,parent:h,tree:f,cache:b={}}){try{me("fs",t),l||me("message",s),a&&me("onSign",e);const m=new st(t),g=await ot({fsp:m,dotgit:n});return await Fm({fs:m,cache:b,onSign:e,gitdir:g,message:s,author:i,committer:o,signingKey:a,amend:l,dryRun:c,noUpdateBranch:u,ref:d,parent:h,tree:f})}catch(m){throw m.caller="git.commit",m}}async function sG({fs:t,dir:e,gitdir:r=Ne(e,".git"),fullname:n=!1,test:s=!1}){try{me("fs",t),me("gitdir",r);const i=new st(t),o=await ot({fsp:i,dotgit:r});return await kl({fs:i,gitdir:o,fullname:n,test:s})}catch(i){throw i.caller="git.currentBranch",i}}async function R4e({fs:t,gitdir:e,ref:r}){if(r=r.startsWith("refs/heads/")?r:`refs/heads/${r}`,!await $e.exists({fs:t,gitdir:e,ref:r}))throw new Zt(r);const s=await $e.expand({fs:t,gitdir:e,ref:r}),i=await kl({fs:t,gitdir:e,fullname:!0});if(s===i){const l=await $e.resolve({fs:t,gitdir:e,ref:s});await $e.writeRef({fs:t,gitdir:e,ref:"HEAD",value:l})}await $e.deleteRef({fs:t,gitdir:e,ref:s});const o=ic(r),a=await Gr.get({fs:t,gitdir:e});await a.deleteSection("branch",o),await Gr.save({fs:t,gitdir:e,config:a})}async function iG({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n}){try{me("fs",t),me("ref",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});return await R4e({fs:s,gitdir:i,ref:n})}catch(s){throw s.caller="git.deleteBranch",s}}async function oG({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n}){try{me("fs",t),me("ref",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});await $e.deleteRef({fs:s,gitdir:i,ref:n})}catch(s){throw s.caller="git.deleteRef",s}}async function P4e({fs:t,gitdir:e,remote:r}){const n=await Gr.get({fs:t,gitdir:e});await n.deleteSection("remote",r),await Gr.save({fs:t,gitdir:e,config:n})}async function aG({fs:t,dir:e,gitdir:r=Ne(e,".git"),remote:n}){try{me("fs",t),me("remote",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});return await P4e({fs:s,gitdir:i,remote:n})}catch(s){throw s.caller="git.deleteRemote",s}}async function I4e({fs:t,gitdir:e,ref:r}){r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`,await $e.deleteRef({fs:t,gitdir:e,ref:r})}async function lG({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n}){try{me("fs",t),me("ref",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});return await I4e({fs:s,gitdir:i,ref:n})}catch(s){throw s.caller="git.deleteTag",s}}async function N4e({fs:t,gitdir:e,oid:r}){const n=r.slice(0,2);return(await t.readdir(`${e}/objects/${n}`)).map(i=>`${n}${i}`).filter(i=>i.startsWith(r))}async function D4e({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:s}){const i=[];let o=await t.readdir(Ne(r,"objects/pack"));o=o.filter(a=>a.endsWith(".idx"));for(const a of o){const l=`${r}/objects/pack/${a}`,c=await h2({fs:t,cache:e,filename:l,getExternalRefDelta:s});if(c.error)throw new vt(c.error);for(const u of c.offsets.keys())u.startsWith(n)&&i.push(u)}return i}async function O4e({fs:t,cache:e,gitdir:r,oid:n}){const s=a=>mr({fs:t,cache:e,gitdir:r,oid:a}),i=await N4e({fs:t,gitdir:r,oid:n}),o=await D4e({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:s});for(const a of o)i.indexOf(a)===-1&&i.push(a);if(i.length===1)return i[0];throw i.length>1?new Sm("oids",n,i):new Zt(`an object matching "${n}"`)}async function cG({fs:t,dir:e,gitdir:r=Ne(e,".git"),oid:n,cache:s={}}){try{me("fs",t),me("gitdir",r),me("oid",n);const i=new st(t),o=await ot({fsp:i,dotgit:r});return await O4e({fs:i,cache:s,gitdir:o,oid:n})}catch(i){throw i.caller="git.expandOid",i}}async function uG({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n}){try{me("fs",t),me("gitdir",r),me("ref",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});return await $e.expand({fs:s,gitdir:i,ref:n})}catch(s){throw s.caller="git.expandRef",s}}async function g2({fs:t,cache:e,gitdir:r,oids:n}){const s={},i=n.length;let o=n.map((a,l)=>({index:l,oid:a}));for(;o.length;){const a=new Set;for(const{oid:c,index:u}of o)s[c]||(s[c]=new Set),s[c].add(u),s[c].size===i&&a.add(c);if(a.size>0)return[...a];const l=new Map;for(const{oid:c,index:u}of o)try{const{object:d}=await mr({fs:t,cache:e,gitdir:r,oid:c}),h=_r.from(d),{parent:f}=h.parseHeaders();for(const b of f)(!s[b]||!s[b].has(u))&&l.set(b+":"+u,{oid:b,index:u})}catch{}o=Array.from(l.values())}return[]}async function dG({fs:t,cache:e,dir:r,gitdir:n,ours:s,theirs:i,fastForward:o=!0,fastForwardOnly:a=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:d,author:h,committer:f,signingKey:b,onSign:m,mergeDriver:g,allowUnrelatedHistories:y=!1}){s===void 0&&(s=await kl({fs:t,gitdir:n,fullname:!0})),s=await $e.expand({fs:t,gitdir:n,ref:s}),i=await $e.expand({fs:t,gitdir:n,ref:i});const v=await $e.resolve({fs:t,gitdir:n,ref:s}),_=await $e.resolve({fs:t,gitdir:n,ref:i}),x=await g2({fs:t,cache:e,gitdir:n,oids:[v,_]});if(x.length!==1)if(x.length===0&&y)x.push("4b825dc642cb6eb9a060e54bf8d69288fbee4904");else throw new th;const w=x[0];if(w===_)return{oid:v,alreadyMerged:!0};if(o&&w===v)return!l&&!c&&await $e.writeRef({fs:t,gitdir:n,ref:s,value:_}),{oid:_,fastForward:!0};{if(a)throw new Rm;const S=await Wr.acquire({fs:t,gitdir:n,cache:e,allowUnmerged:!1},async E=>KV({fs:t,cache:e,dir:r,gitdir:n,index:E,ourOid:v,theirOid:_,baseOid:w,ourName:ic(s),baseName:"base",theirName:ic(i),dryRun:l,abortOnConflict:u,mergeDriver:g}));if(S instanceof Wc)throw S;return d||(d=`Merge branch '${ic(i)}' into ${ic(s)}`),{oid:await Fm({fs:t,cache:e,gitdir:n,message:d,ref:s,tree:S,parent:[v,_],author:h,committer:f,signingKey:b,onSign:m,dryRun:l,noUpdateBranch:c}),tree:S,mergeCommit:!0}}}async function hG({fs:t,cache:e,http:r,onProgress:n,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,dir:l,gitdir:c,ref:u,url:d,remote:h,remoteRef:f,prune:b,pruneTags:m,fastForward:g,fastForwardOnly:y,corsProxy:v,singleBranch:_,headers:x,author:w,committer:S,signingKey:T}){try{if(!u){const A=await kl({fs:t,gitdir:c});if(!A)throw new ms("ref");u=A}const{fetchHead:E,fetchHeadDescription:C}=await m2({fs:t,cache:e,http:r,onProgress:n,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,gitdir:c,corsProxy:v,ref:u,url:d,remote:h,remoteRef:f,singleBranch:_,headers:x,prune:b,pruneTags:m});await dG({fs:t,cache:e,gitdir:c,ours:u,theirs:E,fastForward:g,fastForwardOnly:y,message:`Merge ${C}`,author:w,committer:S,signingKey:T,dryRun:!1,noUpdateBranch:!1}),await f2({fs:t,cache:e,onProgress:n,dir:l,gitdir:c,ref:u,remote:h,noCheckout:!1})}catch(E){throw E.caller="git.pull",E}}async function fG({fs:t,http:e,onProgress:r,onMessage:n,onAuth:s,onAuthSuccess:i,onAuthFailure:o,dir:a,gitdir:l=Ne(a,".git"),ref:c,url:u,remote:d,remoteRef:h,corsProxy:f,singleBranch:b,headers:m={},cache:g={}}){try{me("fs",t),me("http",e),me("gitdir",l);const y={name:"",email:"",timestamp:Date.now(),timezoneOffset:0},v=new st(t),_=await ot({fsp:v,dotgit:l});return await hG({fs:v,cache:g,http:e,onProgress:r,onMessage:n,onAuth:s,onAuthSuccess:i,onAuthFailure:o,dir:a,gitdir:_,ref:c,url:u,remote:d,remoteRef:h,fastForwardOnly:!0,corsProxy:f,singleBranch:b,headers:m,author:y,committer:y})}catch(y){throw y.caller="git.fastForward",y}}async function pG({fs:t,http:e,onProgress:r,onMessage:n,onAuth:s,onAuthSuccess:i,onAuthFailure:o,dir:a,gitdir:l=Ne(a,".git"),ref:c,remote:u,remoteRef:d,url:h,corsProxy:f,depth:b=null,since:m=null,exclude:g=[],relative:y=!1,tags:v=!1,singleBranch:_=!1,headers:x={},prune:w=!1,pruneTags:S=!1,cache:T={}}){try{me("fs",t),me("http",e),me("gitdir",l);const E=new st(t),C=await ot({fsp:E,dotgit:l});return await m2({fs:E,cache:T,http:e,onProgress:r,onMessage:n,onAuth:s,onAuthSuccess:i,onAuthFailure:o,gitdir:C,ref:c,remote:u,remoteRef:d,url:h,corsProxy:f,depth:b,since:m,exclude:g,relative:y,tags:v,singleBranch:_,headers:x,prune:w,pruneTags:S})}catch(E){throw E.caller="git.fetch",E}}async function mG({fs:t,dir:e,gitdir:r=Ne(e,".git"),oids:n,cache:s={}}){try{me("fs",t),me("gitdir",r),me("oids",n);const i=new st(t),o=await ot({fsp:i,dotgit:r});return await g2({fs:i,cache:s,gitdir:o,oids:n})}catch(i){throw i.caller="git.findMergeBase",i}}async function gG({fs:t,filepath:e}){if(await t.exists(Ne(e,".git")))return e;{const r=Ic(e);if(r===e)throw new Zt(`git root for ${e}`);return gG({fs:t,filepath:r})}}async function bG({fs:t,filepath:e}){try{return me("fs",t),me("filepath",e),await gG({fs:new st(t),filepath:e})}catch(r){throw r.caller="git.findRoot",r}}async function yG({fs:t,dir:e,gitdir:r=Ne(e,".git"),path:n}){try{me("fs",t),me("gitdir",r),me("path",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});return await Pp({fs:s,gitdir:i,path:n})}catch(s){throw s.caller="git.getConfig",s}}async function L4e({fs:t,gitdir:e,path:r}){return(await Gr.get({fs:t,gitdir:e})).getall(r)}async function vG({fs:t,dir:e,gitdir:r=Ne(e,".git"),path:n}){try{me("fs",t),me("gitdir",r),me("path",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});return await L4e({fs:s,gitdir:i,path:n})}catch(s){throw s.caller="git.getConfigAll",s}}async function _G({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:s,url:i,headers:o={},forPush:a=!1}){try{me("http",t),me("url",i);const c=await A_.getRemoteHelperFor({url:i}).discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:s,service:a?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),u={capabilities:[...c.capabilities]};for(const[d,h]of c.refs){const f=d.split("/"),b=f.pop();let m=u;for(const g of f)m[g]=m[g]||{},m=m[g];m[b]=h}for(const[d,h]of c.symrefs){const f=d.split("/"),b=f.pop();let m=u;for(const g of f)m[g]=m[g]||{},m=m[g];m[b]=h}return u}catch(l){throw l.caller="git.getRemoteInfo",l}}function xG(t,e,r,n){const s=[];for(const[i,o]of t.refs){if(e&&!i.startsWith(e))continue;if(i.endsWith("^{}")){if(n){const l=i.replace("^{}",""),c=s[s.length-1],u=c.ref===l?c:s.find(d=>d.ref===l);if(u===void 0)throw new Error("I did not expect this to happen");u.peeled=o}continue}const a={ref:i,oid:o};r&&t.symrefs.has(i)&&(a.target=t.symrefs.get(i)),s.push(a)}return s}async function wG({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:s,url:i,headers:o={},forPush:a=!1,protocolVersion:l=2}){try{me("http",t),me("url",i);const u=await A_.getRemoteHelperFor({url:i}).discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:s,service:a?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:l});if(u.protocolVersion===2)return{protocolVersion:u.protocolVersion,capabilities:u.capabilities2};const d={};for(const h of u.capabilities){const[f,b]=h.split("=");b?d[f]=b:d[f]=!0}return{protocolVersion:1,capabilities:d,refs:xG(u,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function M4e({type:t,object:e,format:r="content",oid:n=void 0}){return r!=="deflated"&&(r!=="wrapped"&&(e=eh.wrap({type:t,object:e})),n=await da(e)),{oid:n,object:e}}async function SG({object:t}){try{me("object",t),typeof t=="string"?t=qe.from(t,"utf8"):t instanceof Uint8Array||(t=new Uint8Array(t));const e="blob",{oid:r,object:n}=await M4e({type:e,format:"content",object:t});return{oid:r,type:e,object:n,format:"wrapped"}}catch(e){throw e.caller="git.hashBlob",e}}async function j4e({fs:t,cache:e,onProgress:r,dir:n,gitdir:s,filepath:i}){try{i=Ne(n,i);const o=await t.read(i),a=c=>mr({fs:t,cache:e,gitdir:s,oid:c}),l=await Cd.fromPack({pack:o,getExternalRefDelta:a,onProgress:r});return await t.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function EG({fs:t,onProgress:e,dir:r,gitdir:n=Ne(r,".git"),filepath:s,cache:i={}}){try{me("fs",t),me("dir",r),me("gitdir",r),me("filepath",s);const o=new st(t),a=await ot({fsp:o,dotgit:n});return await j4e({fs:o,cache:i,onProgress:e,dir:r,gitdir:a,filepath:s})}catch(o){throw o.caller="git.indexPack",o}}async function CG({fs:t,bare:e=!1,dir:r,gitdir:n=e?r:Ne(r,".git"),defaultBranch:s="master"}){try{me("fs",t),me("gitdir",n),e||me("dir",r);const i=new st(t),o=await ot({fsp:i,dotgit:n});return await tG({fs:i,bare:e,dir:r,gitdir:o,defaultBranch:s})}catch(i){throw i.caller="git.init",i}}async function TG({fs:t,cache:e,gitdir:r,oid:n,ancestor:s,depth:i}){const o=await Np.read({fs:t,gitdir:r});if(!n)throw new ms("oid");if(!s)throw new ms("ancestor");if(n===s)return!1;const a=[n],l=new Set;let c=0;for(;a.length;){if(c++===i)throw new Im(i);const u=a.shift(),{type:d,object:h}=await mr({fs:t,cache:e,gitdir:r,oid:u});if(d!=="commit")throw new es(u,d,"commit");const f=_r.from(h).parse();for(const b of f.parent)if(b===s)return!0;if(!o.has(u))for(const b of f.parent)l.has(b)||(a.push(b),l.add(b))}return!1}async function kG({fs:t,dir:e,gitdir:r=Ne(e,".git"),oid:n,ancestor:s,depth:i=-1,cache:o={}}){try{me("fs",t),me("gitdir",r),me("oid",n),me("ancestor",s);const a=new st(t),l=await ot({fsp:a,dotgit:r});return await TG({fs:a,cache:o,gitdir:l,oid:n,ancestor:s,depth:i})}catch(a){throw a.caller="git.isDescendent",a}}async function AG({fs:t,dir:e,gitdir:r=Ne(e,".git"),filepath:n}){try{me("fs",t),me("dir",e),me("gitdir",r),me("filepath",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});return sh.isIgnored({fs:s,dir:e,gitdir:i,filepath:n})}catch(s){throw s.caller="git.isIgnored",s}}async function RG({fs:t,dir:e,gitdir:r=Ne(e,".git"),remote:n}){try{me("fs",t),me("gitdir",r);const s=new st(t),i=await ot({fsp:s,dotgit:r});return $e.listBranches({fs:s,gitdir:i,remote:n})}catch(s){throw s.caller="git.listBranches",s}}async function F4e({fs:t,gitdir:e,ref:r,cache:n}){if(r){const s=await $e.resolve({gitdir:e,fs:t,ref:r}),i=[];return await PG({fs:t,cache:n,gitdir:e,oid:s,filenames:i,prefix:""}),i}else return Wr.acquire({fs:t,gitdir:e,cache:n},async function(s){return s.entries.map(i=>i.path)})}async function PG({fs:t,cache:e,gitdir:r,oid:n,filenames:s,prefix:i}){const{tree:o}=await ih({fs:t,cache:e,gitdir:r,oid:n});for(const a of o)a.type==="tree"?await PG({fs:t,cache:e,gitdir:r,oid:a.oid,filenames:s,prefix:Ne(i,a.path)}):s.push(Ne(i,a.path))}async function IG({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n,cache:s={}}){try{me("fs",t),me("gitdir",r);const i=new st(t),o=await ot({fsp:i,dotgit:r});return await F4e({fs:i,cache:s,gitdir:o,ref:n})}catch(i){throw i.caller="git.listFiles",i}}async function B4e({fs:t,cache:e,gitdir:r,ref:n}){let s;try{s=await $e.resolve({gitdir:r,fs:t,ref:n})}catch(a){if(a instanceof Zt)return[]}return(await ih({fs:t,cache:e,gitdir:r,oid:s})).tree.map(a=>({target:a.path,note:a.oid}))}async function NG({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n="refs/notes/commits",cache:s={}}){try{me("fs",t),me("gitdir",r),me("ref",n);const i=new st(t),o=await ot({fsp:i,dotgit:r});return await B4e({fs:i,cache:s,gitdir:o,ref:n})}catch(i){throw i.caller="git.listNotes",i}}async function DG({fs:t,dir:e,gitdir:r=Ne(e,".git"),filepath:n}){try{me("fs",t),me("gitdir",r);const s=new st(t),i=await ot({fsp:s,dotgit:r});return $e.listRefs({fs:s,gitdir:i,filepath:n})}catch(s){throw s.caller="git.listRefs",s}}async function $4e({fs:t,gitdir:e}){const r=await Gr.get({fs:t,gitdir:e}),n=await r.getSubsections("remote");return Promise.all(n.map(async i=>{const o=await r.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function OG({fs:t,dir:e,gitdir:r=Ne(e,".git")}){try{me("fs",t),me("gitdir",r);const n=new st(t),s=await ot({fsp:n,dotgit:r});return await $4e({fs:n,gitdir:s})}catch(n){throw n.caller="git.listRemotes",n}}async function U4e(t){const e=Mr.streamReader(t),r=[];let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const[s,i,...o]=n.split(" "),a={ref:i,oid:s};for(const l of o){const[c,u]=l.split(":");c==="symref-target"?a.target=u:c==="peeled"&&(a.peeled=u)}r.push(a)}return r}async function H4e({prefix:t,symrefs:e,peelTags:r}){const n=[];return n.push(Mr.encode(`command=ls-refs
`)),n.push(Mr.encode(`agent=${R_.agent}
`)),(r||e||t)&&n.push(Mr.delim()),r&&n.push(Mr.encode("peel")),e&&n.push(Mr.encode("symrefs")),t&&n.push(Mr.encode(`ref-prefix ${t}`)),n.push(Mr.flush()),n}async function LG({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:s,url:i,headers:o={},forPush:a=!1,protocolVersion:l=2,prefix:c,symrefs:u,peelTags:d}){try{me("http",t),me("url",i);const h=await Jy.discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:s,service:a?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:l});if(h.protocolVersion===1)return xG(h,c,u,d);const f=await H4e({prefix:c,symrefs:u,peelTags:d}),b=await Jy.connect({http:t,auth:h.auth,headers:o,corsProxy:s,service:a?"git-receive-pack":"git-upload-pack",url:i,body:f});return U4e(b.body)}catch(h){throw h.caller="git.listServerRefs",h}}async function MG({fs:t,dir:e,gitdir:r=Ne(e,".git")}){try{me("fs",t),me("gitdir",r);const n=new st(t),s=await ot({fsp:n,dotgit:r});return $e.listTags({fs:n,gitdir:s})}catch(n){throw n.caller="git.listTags",n}}function z4e(t,e){return t.committer.timestamp-e.committer.timestamp}const W4e="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function pM({fs:t,cache:e,gitdir:r,oid:n,fileId:s}){if(s===W4e)return;const i=n;let o;const a=await Ad({fs:t,cache:e,gitdir:r,oid:n}),l=a.tree;return s===a.oid?o=a.path:(o=await jG({fs:t,cache:e,gitdir:r,tree:l,fileId:s,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function jG({fs:t,cache:e,gitdir:r,tree:n,fileId:s,oid:i,filepaths:o=[],parentPath:a=""}){const l=n.entries().map(function(c){let u;return c.oid===s?(u=Ne(a,c.path),o.push(u)):c.type==="tree"&&(u=mr({fs:t,cache:e,gitdir:r,oid:c.oid}).then(function({object:d}){return jG({fs:t,cache:e,gitdir:r,tree:ys.from(d),fileId:s,oid:i,filepaths:o,parentPath:Ne(a,c.path)})})),u});return await Promise.all(l),o}async function V4e({fs:t,cache:e,gitdir:r,filepath:n,ref:s,depth:i,since:o,force:a,follow:l}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),u=[],d=await Np.read({fs:t,gitdir:r}),h=await $e.resolve({fs:t,gitdir:r,ref:s}),f=[await xo({fs:t,cache:e,gitdir:r,oid:h})];let b,m,g;function y(v){g&&n&&u.push(v)}for(;f.length>0;){const v=f.pop();if(c!==void 0&&v.commit.committer.timestamp<=c)break;if(n){let _;try{_=await Bm({fs:t,cache:e,gitdir:r,oid:v.commit.tree,filepath:n}),m&&b!==_&&u.push(m),b=_,m=v,g=!0}catch(x){if(x instanceof Zt){let w=l&&b;if(w&&(w=await pM({fs:t,cache:e,gitdir:r,oid:v.commit.tree,fileId:b}),w))if(Array.isArray(w)){if(m){const S=await pM({fs:t,cache:e,gitdir:r,oid:m.commit.tree,fileId:b});if(Array.isArray(S))if(w=w.filter(T=>S.indexOf(T)===-1),w.length===1)w=w[0],n=w,m&&u.push(m);else{w=!1,m&&u.push(m);break}}}else n=w,m&&u.push(m);if(!w){if(g&&b&&(u.push(m),!a))break;if(!a&&!l)throw x}m=v,g=!1}else throw x}}else u.push(v);if(i!==void 0&&u.length===i){y(v);break}if(!d.has(v.oid))for(const _ of v.commit.parent){const x=await xo({fs:t,cache:e,gitdir:r,oid:_});f.map(w=>w.oid).includes(x.oid)||f.push(x)}f.length===0&&y(v),f.sort((_,x)=>z4e(_.commit,x.commit))}return u}async function FG({fs:t,dir:e,gitdir:r=Ne(e,".git"),filepath:n,ref:s="HEAD",depth:i,since:o,force:a,follow:l,cache:c={}}){try{me("fs",t),me("gitdir",r),me("ref",s);const u=new st(t),d=await ot({fsp:u,dotgit:r});return await V4e({fs:u,cache:c,gitdir:d,filepath:n,ref:s,depth:i,since:o,force:a,follow:l})}catch(u){throw u.caller="git.log",u}}async function BG({fs:t,onSign:e,dir:r,gitdir:n=Ne(r,".git"),ours:s,theirs:i,fastForward:o=!0,fastForwardOnly:a=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:d,author:h,committer:f,signingKey:b,cache:m={},mergeDriver:g,allowUnrelatedHistories:y=!1}){try{me("fs",t),b&&me("onSign",e);const v=new st(t),_=await ot({fsp:v,dotgit:n}),x=await pl({fs:v,gitdir:_,author:h});if(!x&&(!a||!o))throw new wn("author");const w=await Nc({fs:v,gitdir:_,author:x,committer:f});if(!w&&(!a||!o))throw new wn("committer");return await dG({fs:v,cache:m,dir:r,gitdir:_,ours:s,theirs:i,fastForward:o,fastForwardOnly:a,dryRun:l,noUpdateBranch:c,abortOnConflict:u,message:d,author:x,committer:w,signingKey:b,onSign:e,mergeDriver:g,allowUnrelatedHistories:y})}catch(v){throw v.caller="git.merge",v}}const G4e={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function $G({fs:t,cache:e,dir:r,gitdir:n=Ne(r,".git"),oids:s}){const i=new wV,o=[];function a(u,d){const h=qe.from(u,d);o.push(h),i.update(h)}async function l({stype:u,object:d}){const h=G4e[u];let f=d.length,b=f>15?128:0;const m=f&15;f=f>>>4;let g=(b|h|m).toString(16);for(a(g,"hex");b;)b=f>127?128:0,g=b|f&127,a(kC(2,g),"hex"),f=f>>>7;a(qe.from(await LV(d)))}a("PACK"),a("00000002","hex"),a(kC(8,s.length),"hex");for(const u of s){const{type:d,object:h}=await mr({fs:t,cache:e,gitdir:n,oid:u});await l({object:h,stype:d})}const c=i.digest();return o.push(c),o}async function q4e({fs:t,cache:e,gitdir:r,oids:n,write:s}){const i=await $G({fs:t,cache:e,gitdir:r,oids:n}),o=qe.from(await Xy(i)),l=`pack-${o.slice(-20).toString("hex")}.pack`;return s?(await t.write(Ne(r,`objects/pack/${l}`),o),{filename:l}):{filename:l,packfile:new Uint8Array(o)}}async function UG({fs:t,dir:e,gitdir:r=Ne(e,".git"),oids:n,write:s=!1,cache:i={}}){try{me("fs",t),me("gitdir",r),me("oids",n);const o=new st(t),a=await ot({fsp:o,dotgit:r});return await q4e({fs:o,cache:i,gitdir:a,oids:n,write:s})}catch(o){throw o.caller="git.packObjects",o}}async function HG({fs:t,http:e,onProgress:r,onMessage:n,onAuth:s,onAuthSuccess:i,onAuthFailure:o,dir:a,gitdir:l=Ne(a,".git"),ref:c,url:u,remote:d,remoteRef:h,prune:f=!1,pruneTags:b=!1,fastForward:m=!0,fastForwardOnly:g=!1,corsProxy:y,singleBranch:v,headers:_={},author:x,committer:w,signingKey:S,cache:T={}}){try{me("fs",t),me("gitdir",l);const E=new st(t),C=await ot({fsp:E,dotgit:l}),A=await pl({fs:E,gitdir:C,author:x});if(!A)throw new wn("author");const I=await Nc({fs:E,gitdir:C,author:A,committer:w});if(!I)throw new wn("committer");return await hG({fs:E,cache:T,http:e,onProgress:r,onMessage:n,onAuth:s,onAuthSuccess:i,onAuthFailure:o,dir:a,gitdir:C,ref:c,url:u,remote:d,remoteRef:h,fastForward:m,fastForwardOnly:g,corsProxy:y,singleBranch:v,headers:_,author:A,committer:I,signingKey:S,prune:f,pruneTags:b})}catch(E){throw E.caller="git.pull",E}}async function K4e({fs:t,cache:e,dir:r,gitdir:n=Ne(r,".git"),start:s,finish:i}){const o=await Np.read({fs:t,gitdir:n}),a=new Set,l=new Set;for(const d of s)a.add(await $e.resolve({fs:t,gitdir:n,ref:d}));for(const d of i)try{const h=await $e.resolve({fs:t,gitdir:n,ref:d});l.add(h)}catch{}const c=new Set;async function u(d){c.add(d);const{type:h,object:f}=await mr({fs:t,cache:e,gitdir:n,oid:d});if(h==="tag"){const m=Kn.from(f).headers().object;return u(m)}if(h!=="commit")throw new es(d,h,"commit");if(!o.has(d)){const m=_r.from(f).headers().parent;for(d of m)!l.has(d)&&!c.has(d)&&await u(d)}}for(const d of a)await u(d);return c}async function I1({fs:t,cache:e,dir:r,gitdir:n=Ne(r,".git"),oids:s}){const i=new Set;async function o(a){if(i.has(a))return;i.add(a);const{type:l,object:c}=await mr({fs:t,cache:e,gitdir:n,oid:a});if(l==="tag"){const d=Kn.from(c).headers().object;await o(d)}else if(l==="commit"){const d=_r.from(c).headers().tree;await o(d)}else if(l==="tree"){const u=ys.from(c);for(const d of u)d.type==="blob"&&i.add(d.oid),d.type==="tree"&&await o(d.oid)}}for(const a of s)await o(a);return i}async function Y4e(t){const e={};let r="";const n=Mr.streamReader(t);let s=await n();for(;s!==!0;)s!==null&&(r+=s.toString("utf8")+`
`),s=await n();const i=r.toString("utf8").split(`
`);if(s=i.shift(),!s.startsWith("unpack "))throw new Vc('unpack ok" or "unpack [error message]',s);e.ok=s==="unpack ok",e.ok||(e.error=s.slice(7)),e.refs={};for(const o of i){if(o.trim()==="")continue;const a=o.slice(0,2),l=o.slice(3);let c=l.indexOf(" ");c===-1&&(c=l.length);const u=l.slice(0,c),d=l.slice(c+1);e.refs[u]={ok:a==="ok",error:d}}return e}async function X4e({capabilities:t=[],triplets:e=[]}){const r=[];let n=`\0 ${t.join(" ")}`;for(const s of e)r.push(Mr.encode(`${s.oldoid} ${s.oid} ${s.fullRef}${n}
`)),n="";return r.push(Mr.flush()),r}async function J4e({fs:t,cache:e,http:r,onProgress:n,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,onPrePush:l,gitdir:c,ref:u,remoteRef:d,remote:h,url:f,force:b=!1,delete:m=!1,corsProxy:g,headers:y={}}){const v=u||await kl({fs:t,gitdir:c});if(typeof v>"u")throw new ms("ref");const _=await Gr.get({fs:t,gitdir:c});h=h||await _.get(`branch.${v}.pushRemote`)||await _.get("remote.pushDefault")||await _.get(`branch.${v}.remote`)||"origin";const x=f||await _.get(`remote.${h}.pushurl`)||await _.get(`remote.${h}.url`);if(typeof x>"u")throw new ms("remote OR url");const w=d||await _.get(`branch.${v}.merge`);if(typeof x>"u")throw new ms("remoteRef");g===void 0&&(g=await _.get("http.corsProxy"));const S=await $e.expand({fs:t,gitdir:c,ref:v}),T=m?"0000000000000000000000000000000000000000":await $e.resolve({fs:t,gitdir:c,ref:S}),E=A_.getRemoteHelperFor({url:x}),C=await E.discover({http:r,onAuth:i,onAuthSuccess:o,onAuthFailure:a,corsProxy:g,service:"git-receive-pack",url:x,headers:y,protocolVersion:1}),A=C.auth;let I;if(!w)I=S;else try{I=await $e.expandAgainstMap({ref:w,map:C.refs})}catch(H){if(H instanceof Zt)I=w.startsWith("refs/")?w:`refs/heads/${w}`;else throw H}const P=C.refs.get(I)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:h,url:x,localRef:{ref:m?"(delete)":S,oid:T},remoteRef:{ref:I,oid:P}}))throw new rh;const D=!C.capabilities.has("no-thin");let R=new Set;if(!m){const H=[...C.refs.values()];let U=new Set;if(P!=="0000000000000000000000000000000000000000"){const ee=await g2({fs:t,cache:e,gitdir:c,oids:[T,P]});for(const X of ee)H.push(X);D&&(U=await I1({fs:t,cache:e,gitdir:c,oids:ee}))}if(!H.includes(T)){const ee=await K4e({fs:t,cache:e,gitdir:c,start:[T],finish:H});R=await I1({fs:t,cache:e,gitdir:c,oids:ee})}if(D){try{const ee=await $e.resolve({fs:t,gitdir:c,ref:`refs/remotes/${h}/HEAD`,depth:2}),{oid:X}=await $e.resolveAgainstMap({ref:ee.replace(`refs/remotes/${h}/`,""),fullref:ee,map:C.refs}),ge=[X];for(const J of await I1({fs:t,cache:e,gitdir:c,oids:ge}))U.add(J)}catch{}for(const ee of U)R.delete(ee)}if(T===P&&(b=!0),!b){if(S.startsWith("refs/tags")&&P!=="0000000000000000000000000000000000000000")throw new kd("tag-exists");if(T!=="0000000000000000000000000000000000000000"&&P!=="0000000000000000000000000000000000000000"&&!await TG({fs:t,cache:e,gitdir:c,oid:T,ancestor:P,depth:-1}))throw new kd("not-fast-forward")}}const F=ZV([...C.capabilities],["report-status","side-band-64k",`agent=${R_.agent}`]),G=await X4e({capabilities:F,triplets:[{oldoid:P,oid:T,fullRef:I}]}),z=m?[]:await $G({fs:t,cache:e,gitdir:c,oids:[...R]}),K=await E.connect({http:r,onProgress:n,corsProxy:g,service:"git-receive-pack",url:x,auth:A,headers:y,body:[...G,...z]}),{packfile:L,progress:O}=await eG.demux(K.body);if(s){const H=QV(O);Um(H,async U=>{await s(U)})}const $=await Y4e(L);if(K.headers&&($.headers=K.headers),h&&$.ok&&$.refs[I].ok&&!S.startsWith("refs/tags")){const H=`refs/remotes/${h}/${I.replace("refs/heads","")}`;m?await $e.deleteRef({fs:t,gitdir:c,ref:H}):await $e.writeRef({fs:t,gitdir:c,ref:H,value:T})}if($.ok&&Object.values($.refs).every(H=>H.ok))return $;{const H=Object.entries($.refs).filter(([U,ee])=>!ee.ok).map(([U,ee])=>`
  - ${U}: ${ee.error}`).join("");throw new Pm(H,$)}}async function zG({fs:t,http:e,onProgress:r,onMessage:n,onAuth:s,onAuthSuccess:i,onAuthFailure:o,onPrePush:a,dir:l,gitdir:c=Ne(l,".git"),ref:u,remoteRef:d,remote:h="origin",url:f,force:b=!1,delete:m=!1,corsProxy:g,headers:y={},cache:v={}}){try{me("fs",t),me("http",e),me("gitdir",c);const _=new st(t),x=await ot({fsp:_,dotgit:c});return await J4e({fs:_,cache:v,http:e,onProgress:r,onMessage:n,onAuth:s,onAuthSuccess:i,onAuthFailure:o,onPrePush:a,gitdir:x,ref:u,remoteRef:d,remote:h,url:f,force:b,delete:m,corsProxy:g,headers:y})}catch(_){throw _.caller="git.push",_}}async function WG({fs:t,cache:e,gitdir:r,oid:n}){const{type:s,object:i}=await mr({fs:t,cache:e,gitdir:r,oid:n});if(s==="tag")return n=Kn.from(i).parse().object,WG({fs:t,cache:e,gitdir:r,oid:n});if(s!=="blob")throw new es(n,s,"blob");return{oid:n,blob:new Uint8Array(i)}}async function VG({fs:t,cache:e,gitdir:r,oid:n,filepath:s=void 0}){return s!==void 0&&(n=await Bm({fs:t,cache:e,gitdir:r,oid:n,filepath:s})),await WG({fs:t,cache:e,gitdir:r,oid:n})}async function GG({fs:t,dir:e,gitdir:r=Ne(e,".git"),oid:n,filepath:s,cache:i={}}){try{me("fs",t),me("gitdir",r),me("oid",n);const o=new st(t),a=await ot({fsp:o,dotgit:r});return await VG({fs:o,cache:i,gitdir:a,oid:n,filepath:s})}catch(o){throw o.caller="git.readBlob",o}}async function b2({fs:t,dir:e,gitdir:r=Ne(e,".git"),oid:n,cache:s={}}){try{me("fs",t),me("gitdir",r),me("oid",n);const i=new st(t),o=await ot({fsp:i,dotgit:r});return await xo({fs:i,cache:s,gitdir:o,oid:n})}catch(i){throw i.caller="git.readCommit",i}}async function Z4e({fs:t,cache:e,gitdir:r,ref:n="refs/notes/commits",oid:s}){const i=await $e.resolve({gitdir:r,fs:t,ref:n}),{blob:o}=await VG({fs:t,cache:e,gitdir:r,oid:i,filepath:s});return o}async function qG({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n="refs/notes/commits",oid:s,cache:i={}}){try{me("fs",t),me("gitdir",r),me("ref",n),me("oid",s);const o=new st(t),a=await ot({fsp:o,dotgit:r});return await Z4e({fs:o,cache:i,gitdir:a,ref:n,oid:s})}catch(o){throw o.caller="git.readNote",o}}async function KG({fs:t,dir:e,gitdir:r=Ne(e,".git"),oid:n,format:s="parsed",filepath:i=void 0,encoding:o=void 0,cache:a={}}){try{me("fs",t),me("gitdir",r),me("oid",n);const l=new st(t),c=await ot({fsp:l,dotgit:r});i!==void 0&&(n=await Bm({fs:l,cache:a,gitdir:c,oid:n,filepath:i}));const d=await mr({fs:l,cache:a,gitdir:c,oid:n,format:s==="parsed"?"content":s});if(d.oid=n,s==="parsed")switch(d.format="parsed",d.type){case"commit":d.object=_r.from(d.object).parse();break;case"tree":d.object=ys.from(d.object).entries();break;case"blob":o?d.object=d.object.toString(o):(d.object=new Uint8Array(d.object),d.format="content");break;case"tag":d.object=Kn.from(d.object).parse();break;default:throw new es(d.oid,d.type,"blob|commit|tag|tree")}else(d.format==="deflated"||d.format==="wrapped")&&(d.type=d.format);return d}catch(l){throw l.caller="git.readObject",l}}async function Q4e({fs:t,cache:e,gitdir:r,oid:n}){const{type:s,object:i}=await mr({fs:t,cache:e,gitdir:r,oid:n,format:"content"});if(s!=="tag")throw new es(n,s,"tag");const o=Kn.from(i);return{oid:n,tag:o.parse(),payload:o.payload()}}async function YG({fs:t,dir:e,gitdir:r=Ne(e,".git"),oid:n,cache:s={}}){try{me("fs",t),me("gitdir",r),me("oid",n);const i=new st(t),o=await ot({fsp:i,dotgit:r});return await Q4e({fs:i,cache:s,gitdir:o,oid:n})}catch(i){throw i.caller="git.readTag",i}}async function XG({fs:t,dir:e,gitdir:r=Ne(e,".git"),oid:n,filepath:s=void 0,cache:i={}}){try{me("fs",t),me("gitdir",r),me("oid",n);const o=new st(t),a=await ot({fsp:o,dotgit:r});return await ih({fs:o,cache:i,gitdir:a,oid:n,filepath:s})}catch(o){throw o.caller="git.readTree",o}}async function JG({fs:t,dir:e,gitdir:r=Ne(e,".git"),filepath:n,cache:s={}}){try{me("fs",t),me("gitdir",r),me("filepath",n);const i=new st(t),o=await ot({fsp:i,dotgit:r});await Wr.acquire({fs:i,gitdir:o,cache:s},async function(a){a.delete({filepath:n})})}catch(i){throw i.caller="git.remove",i}}async function eFe({fs:t,cache:e,onSign:r,gitdir:n,ref:s="refs/notes/commits",oid:i,author:o,committer:a,signingKey:l}){let c;try{c=await $e.resolve({gitdir:n,fs:t,ref:s})}catch(b){if(!(b instanceof Zt))throw b}let d=(await ih({fs:t,cache:e,gitdir:n,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;d=d.filter(b=>b.path!==i);const h=await $m({fs:t,gitdir:n,tree:d});return await Fm({fs:t,cache:e,onSign:r,gitdir:n,ref:s,tree:h,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:a,signingKey:l})}async function ZG({fs:t,onSign:e,dir:r,gitdir:n=Ne(r,".git"),ref:s="refs/notes/commits",oid:i,author:o,committer:a,signingKey:l,cache:c={}}){try{me("fs",t),me("gitdir",n),me("oid",i);const u=new st(t),d=await ot({fsp:u,dotgit:n}),h=await pl({fs:u,gitdir:d,author:o});if(!h)throw new wn("author");const f=await Nc({fs:u,gitdir:d,author:h,committer:a});if(!f)throw new wn("committer");return await eFe({fs:u,cache:c,onSign:e,gitdir:d,ref:s,oid:i,author:h,committer:f,signingKey:l})}catch(u){throw u.caller="git.removeNote",u}}async function tFe({fs:t,gitdir:e,oldref:r,ref:n,checkout:s=!1}){if(!Ip(n))throw new Ri(n,Rp.clean(n));if(!Ip(r))throw new Ri(r,Rp.clean(r));const i=`refs/heads/${r}`,o=`refs/heads/${n}`;if(await $e.exists({fs:t,gitdir:e,ref:o}))throw new Mi("branch",n,!1);const l=await $e.resolve({fs:t,gitdir:e,ref:i,depth:1});await $e.writeRef({fs:t,gitdir:e,ref:o,value:l}),await $e.deleteRef({fs:t,gitdir:e,ref:i});const u=await kl({fs:t,gitdir:e,fullname:!0})===i;(s||u)&&await $e.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:o})}async function QG({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n,oldref:s,checkout:i=!1}){try{me("fs",t),me("gitdir",r),me("ref",n),me("oldref",s);const o=new st(t),a=await ot({fsp:o,dotgit:r});return await tFe({fs:o,gitdir:a,ref:n,oldref:s,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function eq({gitdir:t,type:e,object:r}){return da(eh.wrap({type:e,object:r}))}async function tq({fs:t,dir:e,gitdir:r=Ne(e,".git"),filepath:n,ref:s,cache:i={}}){try{me("fs",t),me("gitdir",r),me("filepath",n);const o=new st(t),a=await ot({fsp:o,dotgit:r});let l,c;try{l=await $e.resolve({fs:o,gitdir:a,ref:s||"HEAD"})}catch(h){if(s)throw h}if(l)try{l=await Bm({fs:o,cache:i,gitdir:a,oid:l,filepath:n})}catch{l=null}let u={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const d=e&&await o.read(Ne(e,n));d&&(c=await eq({gitdir:a,type:"blob",object:d}),l===c&&(u=await o.lstat(Ne(e,n)))),await Wr.acquire({fs:o,gitdir:a,cache:i},async function(h){h.delete({filepath:n}),l&&h.insert({filepath:n,stats:u,oid:l})})}catch(o){throw o.caller="git.reset",o}}async function rq({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n,depth:s}){try{me("fs",t),me("gitdir",r),me("ref",n);const i=new st(t),o=await ot({fsp:i,dotgit:r});return await $e.resolve({fs:i,gitdir:o,ref:n,depth:s})}catch(i){throw i.caller="git.resolveRef",i}}async function nq({fs:t,dir:e,gitdir:r=Ne(e,".git"),path:n,value:s,append:i=!1}){try{me("fs",t),me("gitdir",r),me("path",n);const o=new st(t),a=await ot({fsp:o,dotgit:r}),l=await Gr.get({fs:o,gitdir:a});i?await l.append(n,s):await l.set(n,s),await Gr.save({fs:o,gitdir:a,config:l})}catch(o){throw o.caller="git.setConfig",o}}async function sq({fs:t,gitdir:e,commit:r}){const n=_r.from(r).toObject();return await _s({fs:t,gitdir:e,type:"commit",object:n,format:"content"})}class Zy{static get timezoneOffsetForRefLogEntry(){const e=new Date().getTimezoneOffset(),r=Math.abs(Math.floor(e/60)),n=Math.abs(e%60).toString().padStart(2,"0");return`${e>0?"-":"+"}${r.toString().padStart(2,"0")}${n}`}static createStashReflogEntry(e,r,n){const s=e.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),a=Zy.timezoneOffsetForRefLogEntry;return`${i} ${r} ${s} ${e.email} ${o} ${a}	${n}
`}static getStashReflogEntry(e,r=!1){return e.split(`
`).filter(i=>i).reverse().map((i,o)=>r?`stash@{${o}}: ${i.split("	")[1]}`:i)}}class ea{constructor({fs:e,dir:r,gitdir:n=Ne(r,".git")}){Object.assign(this,{fs:e,dir:r,gitdir:n,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Ne(this.gitdir,ea.refStash)}get refLogsStashPath(){return Ne(this.gitdir,ea.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await pl({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new wn("author");return this._author}async getStashSHA(e,r){return await this.fs.exists(this.refStashPath)?(r||await this.readStashReflogs({parsed:!1}))[e].split(" ")[1]:null}async writeStashCommit({message:e,tree:r,parent:n}){return sq({fs:this.fs,gitdir:this.gitdir,commit:{message:e,tree:r,parent:n,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(e){const r=await this.readStashReflogs({parsed:!1});if(e!==0&&(e<0||e>r.length-1))throw new Ri(`stash@${e}`,"number that is in range of [0, num of stash pushed]");const n=await this.getStashSHA(e,r);return n?xo({fs:this.fs,cache:{},gitdir:this.gitdir,oid:n}):{}}async writeStashRef(e){return $e.writeRef({fs:this.fs,gitdir:this.gitdir,ref:ea.refStash,value:e})}async writeStashReflogEntry({stashCommit:e,message:r}){const n=await this.getAuthor(),s=Zy.createStashReflogEntry(n,e,r),i=this.refLogsStashPath;await Rd({filepath:i,entry:s},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+s,"utf8")})}async readStashReflogs({parsed:e=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=await this.fs.read(this.refLogsStashPath,"utf8");return Zy.getStashReflogEntry(r,e)}}async function iq({fs:t,dir:e,gitdir:r,message:n=""}){const s=new ea({fs:t,dir:e,gitdir:r});await s.getAuthor();const i=await kl({fs:t,gitdir:r,fullname:!1}),o=await $e.resolve({fs:t,gitdir:r,ref:"HEAD"}),l=(await b2({fs:t,dir:e,gitdir:r,oid:o})).commit.message,c=[o];let u=null,d=Ns({ref:"HEAD"});const h=await oM({fs:t,dir:e,gitdir:r,treePair:[Ns({ref:"HEAD"}),"stage"]});if(h){const g=await s.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:h,parent:c});c.push(g),u=h,d=zc()}const f=await oM({fs:t,dir:e,gitdir:r,treePair:[d,"workdir"]});if(f){const g=await s.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:f,parent:[c[c.length-1]]});c.push(g),u=f}if(!u||!h&&!f)throw new Zt("changes, nothing to stash");const b=(n.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${l}`;return{stashCommit:await s.writeStashCommit({message:b,tree:u,parent:c}),stashMsg:b,branch:i,stashMgr:s}}async function rFe({fs:t,dir:e,gitdir:r,message:n=""}){const{stashCommit:s,stashMsg:i,branch:o,stashMgr:a}=await iq({fs:t,dir:e,gitdir:r,message:n});return await a.writeStashRef(s),await a.writeStashReflogEntry({stashCommit:s,message:i}),await p2({fs:t,dir:e,gitdir:r,ref:o,track:!1,force:!0}),s}async function nFe({fs:t,dir:e,gitdir:r,message:n=""}){const{stashCommit:s}=await iq({fs:t,dir:e,gitdir:r,message:n});return s}async function oq({fs:t,dir:e,gitdir:r,refIdx:n=0}){const i=await new ea({fs:t,dir:e,gitdir:r}).readStashCommit(n),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let a=0;a<o.length-1;a++){const c=(await xo({fs:t,cache:{},gitdir:r,oid:o[a+1]})).commit.message.startsWith("stash-Index");await YV({fs:t,dir:e,gitdir:r,stashCommit:o[a+1],parentCommit:o[a],wasStaged:c})}}async function aq({fs:t,dir:e,gitdir:r,refIdx:n=0}){const s=new ea({fs:t,dir:e,gitdir:r});if(!(await s.readStashCommit(n)).commit)return;const o=s.refStashPath;await Rd(o,async()=>{await t.exists(o)&&await t.rm(o)});const a=await s.readStashReflogs({parsed:!1});if(!a.length)return;a.splice(n,1);const l=s.refLogsStashPath;await Rd({reflogEntries:a,stashReflogPath:l,stashMgr:s},async()=>{if(a.length){await t.write(l,a.reverse().join(`
`)+`
`,"utf8");const c=a[a.length-1].split(" ")[1];await s.writeStashRef(c)}else await t.rm(l)})}async function sFe({fs:t,dir:e,gitdir:r}){return new ea({fs:t,dir:e,gitdir:r}).readStashReflogs({parsed:!0})}async function iFe({fs:t,dir:e,gitdir:r}){const n=new ea({fs:t,dir:e,gitdir:r}),s=[n.refStashPath,n.refLogsStashPath];await Rd(s,async()=>{await Promise.all(s.map(async i=>{if(await t.exists(i))return t.rm(i)}))})}async function oFe({fs:t,dir:e,gitdir:r,refIdx:n=0}){await oq({fs:t,dir:e,gitdir:r,refIdx:n}),await aq({fs:t,dir:e,gitdir:r,refIdx:n})}async function lq({fs:t,dir:e,gitdir:r=Ne(e,".git"),op:n="push",message:s="",refIdx:i=0}){me("fs",t),me("dir",e),me("gitdir",r),me("op",n);const o={push:rFe,apply:oq,drop:aq,list:sFe,clear:iFe,pop:oFe,create:nFe},a=["apply","drop","pop"];try{const l=new st(t),c=await ot({fsp:l,dotgit:r});["refs","logs","logs/refs"].map(h=>Ne(c,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const d=o[n];if(d){if(a.includes(n)&&i<0)throw new Ri(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await d({fs:l,dir:e,gitdir:c,message:s,refIdx:i})}throw new Error(`To be implemented: ${n}`)}catch(l){throw l.caller="git.stash",l}}async function cq({fs:t,dir:e,gitdir:r=Ne(e,".git"),filepath:n,cache:s={}}){try{me("fs",t),me("gitdir",r),me("filepath",n);const i=new st(t),o=await ot({fsp:i,dotgit:r});if(await sh.isIgnored({fs:i,gitdir:o,dir:e,filepath:n}))return"ignored";const l=await aFe({fs:i,cache:s,gitdir:o}),c=await uq({fs:i,cache:s,gitdir:o,tree:l,path:n}),u=await Wr.acquire({fs:i,gitdir:o,cache:s},async function(g){for(const y of g)if(y.path===n)return y;return null}),d=await i.lstat(Ne(e,n)),h=c!==null,f=u!==null,b=d!==null,m=async()=>{if(f&&!Wy(u,d))return u.oid;{const g=await i.read(Ne(e,n)),y=await eq({gitdir:o,type:"blob",object:g});return f&&u.oid===y&&d.size!==-1&&Wr.acquire({fs:i,gitdir:o,cache:s},async function(v){v.insert({filepath:n,stats:d,oid:y})}),y}};if(!h&&!b&&!f)return"absent";if(!h&&!b&&f)return"*absent";if(!h&&b&&!f)return"*added";if(!h&&b&&f)return await m()===u.oid?"added":"*added";if(h&&!b&&!f)return"deleted";if(h&&!b&&f)return c===u.oid,"*deleted";if(h&&b&&!f)return await m()===c?"*undeleted":"*undeletemodified";if(h&&b&&f){const g=await m();return g===c?g===u.oid?"unmodified":"*unmodified":g===u.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function uq({fs:t,cache:e,gitdir:r,tree:n,path:s}){typeof s=="string"&&(s=s.split("/"));const i=s.shift();for(const o of n)if(o.path===i){if(s.length===0)return o.oid;const{type:a,object:l}=await mr({fs:t,cache:e,gitdir:r,oid:o.oid});if(a==="tree"){const c=ys.from(l);return uq({fs:t,cache:e,gitdir:r,tree:c,path:s})}if(a==="blob")throw new es(o.oid,a,"blob",s.join("/"))}return null}async function aFe({fs:t,cache:e,gitdir:r}){let n;try{n=await $e.resolve({fs:t,gitdir:r,ref:"HEAD"})}catch(i){if(i instanceof Zt)return[]}const{tree:s}=await ih({fs:t,cache:e,gitdir:r,oid:n});return s}async function dq({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n="HEAD",filepaths:s=["."],filter:i,cache:o={},ignored:a=!1}){try{me("fs",t),me("gitdir",r),me("ref",n);const l=new st(t),c=await ot({fsp:l,dotgit:r});return await fl({fs:l,cache:o,dir:e,gitdir:c,trees:[Ns({ref:n}),nh(),zc()],map:async function(u,[d,h,f]){if(!d&&!f&&h&&!a&&await sh.isIgnored({fs:l,dir:e,filepath:u})||!s.some(T=>qV(u,T)))return null;if(i&&!i(u))return;const[b,m,g]=await Promise.all([d&&d.type(),h&&h.type(),f&&f.type()]),y=[b,m,g].includes("blob");if((b==="tree"||b==="special")&&!y)return;if(b==="commit")return null;if((m==="tree"||m==="special")&&!y)return;if(g==="commit")return null;if((g==="tree"||g==="special")&&!y)return;const v=b==="blob"?await d.oid():void 0,_=g==="blob"?await f.oid():void 0;let x;b!=="blob"&&m==="blob"&&g!=="blob"?x="42":m==="blob"&&(x=await h.oid());const w=[void 0,v,x,_],S=w.map(T=>w.indexOf(T));return S.shift(),[u,...S]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function hq({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n,object:s,force:i=!1}){try{me("fs",t),me("gitdir",r),me("ref",n);const o=new st(t);if(n===void 0)throw new ms("ref");n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`;const a=await ot({fsp:o,dotgit:r}),l=await $e.resolve({fs:o,gitdir:a,ref:s||"HEAD"});if(!i&&await $e.exists({fs:o,gitdir:a,ref:n}))throw new Mi("tag",n);await $e.writeRef({fs:o,gitdir:a,ref:n,value:l})}catch(o){throw o.caller="git.tag",o}}async function fq({fs:t,dir:e,gitdir:r=Ne(e,".git"),cache:n={},filepath:s,oid:i,mode:o,add:a,remove:l,force:c}){try{me("fs",t),me("gitdir",r),me("filepath",s);const u=new st(t),d=await ot({fsp:u,dotgit:r});if(l)return await Wr.acquire({fs:u,gitdir:d,cache:n},async function(f){if(!c){const b=await u.lstat(Ne(e,s));if(b){if(b.isDirectory())throw new hl("directory");return}}f.has({filepath:s})&&f.delete({filepath:s})});let h;if(!i){if(h=await u.lstat(Ne(e,s)),!h)throw new Zt(`file at "${s}" on disk and "remove" not set`);if(h.isDirectory())throw new hl("directory")}return await Wr.acquire({fs:u,gitdir:d,cache:n},async function(f){if(!a&&!f.has({filepath:s}))throw new Zt(`file at "${s}" in index and "add" not set`);let b;if(i)b={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{b=h;const m=b.isSymbolicLink()?await u.readlink(Ne(e,s)):await u.read(Ne(e,s));i=await _s({fs:u,gitdir:d,type:"blob",format:"content",object:m})}return f.insert({filepath:s,oid:i,stats:b}),i})}catch(u){throw u.caller="git.updateIndex",u}}function pq(){try{return R_.version}catch(t){throw t.caller="git.version",t}}async function mq({fs:t,dir:e,gitdir:r=Ne(e,".git"),trees:n,map:s,reduce:i,iterate:o,cache:a={}}){try{me("fs",t),me("gitdir",r),me("trees",n);const l=new st(t),c=await ot({fsp:l,dotgit:r});return await fl({fs:l,cache:a,dir:e,gitdir:c,trees:n,map:s,reduce:i,iterate:o})}catch(l){throw l.caller="git.walk",l}}async function gq({fs:t,dir:e,gitdir:r=Ne(e,".git"),blob:n}){try{me("fs",t),me("gitdir",r),me("blob",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});return await _s({fs:s,gitdir:i,type:"blob",object:n,format:"content"})}catch(s){throw s.caller="git.writeBlob",s}}async function bq({fs:t,dir:e,gitdir:r=Ne(e,".git"),commit:n}){try{me("fs",t),me("gitdir",r),me("commit",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});return await sq({fs:s,gitdir:i,commit:n})}catch(s){throw s.caller="git.writeCommit",s}}async function yq({fs:t,dir:e,gitdir:r=Ne(e,".git"),type:n,object:s,format:i="parsed",oid:o,encoding:a=void 0}){try{const l=new st(t),c=await ot({fsp:l,dotgit:r});if(i==="parsed"){switch(n){case"commit":s=_r.from(s).toObject();break;case"tree":s=ys.from(s).toObject();break;case"blob":s=qe.from(s,a);break;case"tag":s=Kn.from(s).toObject();break;default:throw new es(o||"",n,"blob|commit|tag|tree")}i="content"}return o=await _s({fs:l,gitdir:c,type:n,object:s,oid:o,format:i}),o}catch(l){throw l.caller="git.writeObject",l}}async function vq({fs:t,dir:e,gitdir:r=Ne(e,".git"),ref:n,value:s,force:i=!1,symbolic:o=!1}){try{me("fs",t),me("gitdir",r),me("ref",n),me("value",s);const a=new st(t);if(!Ip(n,!0))throw new Ri(n,Rp.clean(n));const l=await ot({fsp:a,dotgit:r});if(!i&&await $e.exists({fs:a,gitdir:l,ref:n}))throw new Mi("ref",n);o?await $e.writeSymbolicRef({fs:a,gitdir:l,ref:n,value:s}):(s=await $e.resolve({fs:a,gitdir:l,ref:s}),await $e.writeRef({fs:a,gitdir:l,ref:n,value:s}))}catch(a){throw a.caller="git.writeRef",a}}async function lFe({fs:t,gitdir:e,tag:r}){const n=Kn.from(r).toObject();return await _s({fs:t,gitdir:e,type:"tag",object:n,format:"content"})}async function _q({fs:t,dir:e,gitdir:r=Ne(e,".git"),tag:n}){try{me("fs",t),me("gitdir",r),me("tag",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});return await lFe({fs:s,gitdir:i,tag:n})}catch(s){throw s.caller="git.writeTag",s}}async function xq({fs:t,dir:e,gitdir:r=Ne(e,".git"),tree:n}){try{me("fs",t),me("gitdir",r),me("tree",n);const s=new st(t),i=await ot({fsp:s,dotgit:r});return await $m({fs:s,gitdir:i,tree:n})}catch(s){throw s.caller="git.writeTree",s}}var cFe={Errors:NV,STAGE:zc,TREE:Ns,WORKDIR:nh,add:jV,abortMerge:OV,addNote:HV,addRemote:WV,annotatedTag:VV,branch:GV,cherryPick:XV,checkout:p2,clone:rG,commit:nG,getConfig:yG,getConfigAll:vG,setConfig:nq,currentBranch:sG,deleteBranch:iG,deleteRef:oG,deleteRemote:aG,deleteTag:lG,expandOid:cG,expandRef:uG,fastForward:fG,fetch:pG,findMergeBase:mG,findRoot:bG,getRemoteInfo:_G,getRemoteInfo2:wG,hashBlob:SG,indexPack:EG,init:CG,isDescendent:kG,isIgnored:AG,listBranches:RG,listFiles:IG,listNotes:NG,listRefs:DG,listRemotes:OG,listServerRefs:LG,listTags:MG,log:FG,merge:BG,packObjects:UG,pull:HG,push:zG,readBlob:GG,readCommit:b2,readNote:qG,readObject:KG,readTag:YG,readTree:XG,remove:JG,removeNote:ZG,renameBranch:QG,resetIndex:tq,updateIndex:fq,resolveRef:rq,status:cq,statusMatrix:dq,tag:hq,version:pq,walk:mq,writeBlob:gq,writeCommit:bq,writeObject:yq,writeRef:vq,writeTag:_q,writeTree:xq,stash:lq};Xe.Errors=NV;Xe.STAGE=zc;Xe.TREE=Ns;Xe.WORKDIR=nh;Xe.abortMerge=OV;Xe.add=jV;Xe.addNote=HV;Xe.addRemote=WV;Xe.annotatedTag=VV;Xe.branch=GV;Xe.checkout=p2;Xe.cherryPick=XV;Xe.clone=rG;Xe.commit=nG;Xe.currentBranch=sG;var uFe=Xe.default=cFe;Xe.deleteBranch=iG;Xe.deleteRef=oG;Xe.deleteRemote=aG;Xe.deleteTag=lG;Xe.expandOid=cG;Xe.expandRef=uG;Xe.fastForward=fG;Xe.fetch=pG;Xe.findMergeBase=mG;Xe.findRoot=bG;Xe.getConfig=yG;Xe.getConfigAll=vG;Xe.getRemoteInfo=_G;Xe.getRemoteInfo2=wG;Xe.hashBlob=SG;Xe.indexPack=EG;Xe.init=CG;Xe.isDescendent=kG;Xe.isIgnored=AG;Xe.listBranches=RG;Xe.listFiles=IG;Xe.listNotes=NG;Xe.listRefs=DG;Xe.listRemotes=OG;Xe.listServerRefs=LG;Xe.listTags=MG;Xe.log=FG;Xe.merge=BG;Xe.packObjects=UG;Xe.pull=HG;Xe.push=zG;Xe.readBlob=GG;Xe.readCommit=b2;Xe.readNote=qG;Xe.readObject=KG;Xe.readTag=YG;Xe.readTree=XG;Xe.remove=JG;Xe.removeNote=ZG;Xe.renameBranch=QG;Xe.resetIndex=tq;Xe.resolveRef=rq;Xe.setConfig=nq;Xe.stash=lq;Xe.status=cq;Xe.statusMatrix=dq;Xe.tag=hq;Xe.updateIndex=fq;Xe.version=pq;Xe.walk=mq;Xe.writeBlob=gq;Xe.writeCommit=bq;Xe.writeObject=yq;Xe.writeRef=vq;Xe.writeTag=_q;Xe.writeTree=xq;function dFe(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function hFe(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:dFe(t)}async function fFe(t,e){const r=hFe(t);for(;;){const{value:n,done:s}=await r.next();if(n&&await e(n),s)break}r.return&&r.return()}async function pFe(t){let e=0;const r=[];await fFe(t,i=>{r.push(i),e+=i.byteLength});const n=new Uint8Array(e);let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}function mFe(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{next(){return e.read()},return(){return e.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function gFe({onProgress:t,url:e,method:r="GET",headers:n={},body:s}){s&&(s=await pFe(s));const i=await fetch(e,{method:r,headers:n,body:s}),o=i.body&&i.body.getReader?mFe(i.body):[new Uint8Array(await i.arrayBuffer())];n={};for(const[a,l]of i.headers.entries())n[a]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:n}}var bFe={request:gFe};const mM=t=>{const e=t.split("/")[2],r=Et.get(`git:${e}`);if(!r)return null;try{const{username:n,password:s}=JSON.parse(r||"{}");return{username:n,password:s}}catch(n){return console.log(`Failed to parse Git Cookie ${n}`),null}},yFe=(t,e)=>{const r=t.split("/")[2];Et.set(`git:${r}`,JSON.stringify(e))};function vFe(){const[t,e]=k.useState(!1),[r,n]=k.useState(),[s,i]=k.useState(),o=k.useRef({});k.useEffect(()=>{ls.then(l=>{o.current={},n(l),i(wq(l,o)),e(!0)})},[]);const a=k.useCallback(async(l,c=0)=>{if(!r||!s||!t)throw new Error("Webcontainer not initialized. Please try again later.");o.current={};let u,d=l;l.includes("#")&&([d,u]=l.split("#"));const h={"User-Agent":"bolt.diy"},f=mM(l);f&&(h.Authorization=`Basic ${qe.from(`${f.username}:${f.password}`).toString("base64")}`);try{c>0&&(await new Promise(m=>setTimeout(m,1e3*c)),console.log(`Retrying git clone (attempt ${c+1})...`)),await uFe.clone({fs:s,http:bFe,dir:r.workdir,url:d,depth:1,singleBranch:!0,ref:u,corsProxy:"/api/git-proxy",headers:h,onProgress:m=>{console.log("Git clone progress:",m)},onAuth:m=>{let g=mM(m);return g?(console.log("Using saved authentication for",m),g):(console.log("Repository requires authentication:",m),confirm("This repository requires authentication. Would you like to enter your GitHub credentials?")?(g={username:prompt("Enter username")||"",password:prompt("Enter password or personal access token")||""},g):{cancel:!0})},onAuthFailure:(m,g)=>{throw console.error(`Authentication failed for ${m}`),Ie.error(`Authentication failed for ${m.split("/")[2]}. Please check your credentials and try again.`),new Error(`Authentication failed for ${m.split("/")[2]}. Please check your credentials and try again.`)},onAuthSuccess:(m,g)=>{console.log(`Authentication successful for ${m}`),yFe(m,g)}});const b={};for(const[m,g]of Object.entries(o.current))b[m]=g;return{workdir:r.workdir,data:b}}catch(b){console.error("Git clone error:",b);const m=b instanceof Error?b.message:String(b);if(m.includes("Authentication failed"))throw Ie.error("Authentication failed. Please check your GitHub credentials and try again."),b;if(m.includes("ENOTFOUND")||m.includes("ETIMEDOUT")||m.includes("ECONNREFUSED")){if(Ie.error("Network error while connecting to repository. Please check your internet connection."),c<3)return a(l,c+1);throw new Error("Failed to connect to repository after multiple attempts. Please check your internet connection.")}else throw m.includes("404")?(Ie.error("Repository not found. Please check the URL and make sure the repository exists."),new Error("Repository not found. Please check the URL and make sure the repository exists.")):m.includes("401")?(Ie.error("Unauthorized access to repository. Please connect your GitHub account with proper permissions."),new Error("Unauthorized access to repository. Please connect your GitHub account with proper permissions.")):(Ie.error(`Failed to clone repository: ${m}`),b)}},[r,s,t]);return{ready:t,gitClone:a}}const wq=(t,e)=>({promises:{readFile:async(r,n)=>{const s=n?.encoding,i=Gi.relative(t.workdir,r);try{return await t.fs.readFile(i,s)}catch(o){throw o}},writeFile:async(r,n,s={})=>{const i=Gi.relative(t.workdir,r);e.current&&(e.current[i]={data:n,encoding:s?.encoding});try{if(n instanceof Uint8Array)return await t.fs.writeFile(i,n);{const o=s?.encoding||"utf8";return await t.fs.writeFile(i,n,o)}}catch(o){throw o}},mkdir:async(r,n)=>{const s=Gi.relative(t.workdir,r);try{return await t.fs.mkdir(s,{...n,recursive:!0})}catch(i){throw i}},readdir:async(r,n)=>{const s=Gi.relative(t.workdir,r);try{return await t.fs.readdir(s,n)}catch(i){throw i}},rm:async(r,n)=>{const s=Gi.relative(t.workdir,r);try{return await t.fs.rm(s,{...n||{}})}catch(i){throw i}},rmdir:async(r,n)=>{const s=Gi.relative(t.workdir,r);try{return await t.fs.rm(s,{recursive:!0,...n})}catch(i){throw i}},unlink:async r=>{const n=Gi.relative(t.workdir,r);try{return await t.fs.rm(n,{recursive:!1})}catch(s){throw s}},stat:async r=>{try{const n=Gi.relative(t.workdir,r),s=Gi.dirname(n),i=Gi.basename(n);if(n===".git/index")return{isFile:()=>!0,isDirectory:()=>!1,isSymbolicLink:()=>!1,size:12,mode:33188,mtimeMs:Date.now(),ctimeMs:Date.now(),birthtimeMs:Date.now(),atimeMs:Date.now(),uid:1e3,gid:1e3,dev:1,ino:1,nlink:1,rdev:0,blksize:4096,blocks:1,mtime:new Date,ctime:new Date,birthtime:new Date,atime:new Date};const a=(await t.fs.readdir(s,{withFileTypes:!0})).find(l=>l.name===i);if(!a){const l=new Error(`ENOENT: no such file or directory, stat '${r}'`);throw l.code="ENOENT",l.errno=-2,l.syscall="stat",l.path=r,l}return{isFile:()=>a.isFile(),isDirectory:()=>a.isDirectory(),isSymbolicLink:()=>!1,size:a.isDirectory()?4096:1,mode:a.isDirectory()?16877:33188,mtimeMs:Date.now(),ctimeMs:Date.now(),birthtimeMs:Date.now(),atimeMs:Date.now(),uid:1e3,gid:1e3,dev:1,ino:1,nlink:1,rdev:0,blksize:4096,blocks:8,mtime:new Date,ctime:new Date,birthtime:new Date,atime:new Date}}catch(n){throw n.code||(n.code="ENOENT",n.errno=-2,n.syscall="stat",n.path=r),n}},lstat:async r=>await wq(t,e).promises.stat(r),readlink:async r=>{throw new Error(`EINVAL: invalid argument, readlink '${r}'`)},symlink:async(r,n)=>{throw new Error(`EPERM: operation not permitted, symlink '${r}' -> '${n}'`)},chmod:async(r,n)=>await Promise.resolve()}}),Gi={dirname:t=>!t||!t.includes("/")?".":(t=t.replace(/\/+$/,""),t.split("/").slice(0,-1).join("/")||"/"),basename:(t,e)=>{t=t.replace(/\/+$/,"");const r=t.split("/").pop()||"";return e&&r.endsWith(e)?r.slice(0,-e.length):r},relative:(t,e)=>{if(!t||!e)return".";const r=u=>u.replace(/\/+$/,"").split("/").filter(Boolean),n=r(t),s=r(e);let i=0;const o=Math.min(n.length,s.length);for(let u=0;u<o&&n[u]===s[u];u++)i++;const a=n.length-i,l=s.slice(i),c=[...Array(a).fill(".."),...l];return c.length===0?".":c.join("/")}},_Fe=({message:t="Loading...",progress:e,progressText:r})=>p.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/80 z-50 backdrop-blur-sm",children:p.jsxs("div",{className:"relative flex flex-col items-center gap-4 p-8 rounded-lg bg-bolt-elements-background-depth-2 shadow-lg",children:[p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress",style:{fontSize:"2rem"}}),p.jsx("p",{className:"text-lg text-bolt-elements-textTertiary",children:t}),e!==void 0&&p.jsxs("div",{className:"w-64 flex flex-col gap-2",children:[p.jsx("div",{className:"w-full h-2 bg-bolt-elements-background-depth-1 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-bolt-elements-loader-progress transition-all duration-300 ease-out rounded-full",style:{width:`${Math.min(100,Math.max(0,e))}%`}})}),r&&p.jsx("p",{className:"text-sm text-bolt-elements-textTertiary text-center",children:r})]})]})});function Sq({provider:t,repoOwner:e,repoName:r,projectId:n,token:s,gitlabUrl:i,defaultBranch:o,onBranchSelect:a,onClose:l,isOpen:c,className:u}){const[d,h]=k.useState([]),[f,b]=k.useState(!1),[m,g]=k.useState(null),[y,v]=k.useState(""),[_,x]=k.useState(""),w=d.filter(C=>C.name.toLowerCase().includes(y.toLowerCase())),S=async()=>{b(!0),g(null);try{let C;if(t==="github")C=await fetch("/api/github-branches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({owner:e,repo:r,token:s})});else{if(!n)throw new Error("Project ID is required for GitLab repositories");C=await fetch("/api/gitlab-branches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,gitlabUrl:i||"https://gitlab.com",projectId:n})})}if(!C.ok){const P=await C.json().catch(()=>({error:"Failed to fetch branches"}));throw new Error(P.error||`HTTP ${C.status}`)}const A=await C.json();h(A.branches||[]);const I=A.defaultBranch||o||"main";x(I)}catch(C){console.error("Failed to fetch branches:",C),g(C instanceof Error?C.message:"Failed to fetch branches"),h([])}finally{b(!1)}},T=C=>{x(C)},E=()=>{a(_),l()};return k.useEffect(()=>{c&&!d.length&&S()},[c,e,r,n]),k.useEffect(()=>{c||v("")},[c]),c?p.jsx(Nr,{children:p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs(rt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:ye("bg-white dark:bg-gray-950 rounded-xl shadow-xl border border-bolt-elements-borderColor max-w-md w-full max-h-[80vh] flex flex-col",u),children:[p.jsxs("div",{className:"p-6 border-b border-bolt-elements-borderColor flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center",children:p.jsx("div",{className:"i-ph:git-branch size-6 text-blue-600"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary",children:"Select Branch"}),p.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary",children:[e,"/",r]})]})]}),p.jsx("button",{onClick:l,className:"p-2 rounded-lg hover:bg-bolt-elements-background-depth-1 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-all",children:p.jsx("div",{className:"i-ph:x size-5"})})]}),p.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:f?p.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-4",children:[p.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-bolt-elements-borderColorActive border-t-transparent rounded-full"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Loading branches..."})]}):m?p.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-4",children:[p.jsx("div",{className:"text-red-500 mb-2",children:p.jsx("div",{className:"i-ph:git-branch size-8 mx-auto"})}),p.jsx("p",{className:"text-sm text-red-600 text-center",children:m}),p.jsxs(Rt,{onClick:S,variant:"outline",size:"sm",children:[p.jsx("div",{className:"i-ph:arrows-clockwise size-4 mr-2"}),"Retry"]})]}):p.jsxs(p.Fragment,{children:[d.length>10&&p.jsx("div",{className:"p-4 border-b border-bolt-elements-borderColor",children:p.jsx("input",{type:"text",placeholder:"Search branches...",value:y,onChange:C=>v(C.target.value),className:"w-full px-3 py-2 rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary focus:outline-none focus:ring-1 focus:ring-bolt-elements-borderColorActive"})}),p.jsx("div",{className:"flex-1 overflow-y-auto",children:w.length>0?p.jsx("div",{className:"p-4 space-y-1",children:w.map(C=>p.jsxs("button",{onClick:()=>T(C.name),className:ye("w-full text-left p-3 rounded-lg transition-all duration-200 border",_===C.name?"bg-blue-50 border-blue-200 text-blue-900 dark:bg-blue-950 dark:border-blue-800 dark:text-blue-100":"bg-bolt-elements-background-depth-1 border-transparent hover:bg-bolt-elements-background-depth-2"),children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[p.jsx("div",{className:"i-ph:git-branch size-4 flex-shrink-0 text-bolt-elements-textSecondary"}),p.jsx("span",{className:"font-medium text-bolt-elements-textPrimary truncate",children:C.name}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[C.isDefault&&p.jsx("div",{className:"i-ph:star size-3 text-yellow-500"}),C.protected&&p.jsx("div",{className:"i-ph:shield size-3 text-red-500"})]})]}),_===C.name&&p.jsx("div",{className:"i-ph:check size-4 text-blue-600"})]}),p.jsx("div",{className:"text-xs text-bolt-elements-textSecondary mt-1 truncate",children:C.sha.substring(0,8)})]},C.name))}):p.jsx("div",{className:"flex items-center justify-center p-8",children:p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:y?"No branches found matching your search.":"No branches available."})})})]})}),!f&&!m&&d.length>0&&p.jsxs("div",{className:"p-6 border-t border-bolt-elements-borderColor flex items-center justify-between",children:[p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:_&&p.jsxs(p.Fragment,{children:["Selected: ",p.jsx("span",{className:"font-medium",children:_})]})}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Rt,{onClick:l,variant:"outline",size:"sm",children:"Cancel"}),p.jsx(Rt,{onClick:E,disabled:!_,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Clone Branch"})]})]})]})})}):null}function xFe({repo:t,onClone:e}){return p.jsx("a",{href:t.html_url,target:"_blank",rel:"noopener noreferrer",className:"group block p-4 rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive transition-all duration-200",children:p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"flex-1 space-y-3",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-fork w-4 h-4 text-bolt-elements-icon-info"}),p.jsx("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-bolt-elements-item-contentAccent transition-colors",children:t.name}),t.private&&p.jsx("div",{className:"i-ph:lock w-3 h-3 text-bolt-elements-textTertiary",title:"Private repository"}),t.fork&&p.jsx("div",{className:"i-ph:git-fork w-3 h-3 text-bolt-elements-textTertiary",title:"Forked repository"}),t.archived&&p.jsx("div",{className:"i-ph:archive w-3 h-3 text-bolt-elements-textTertiary",title:"Archived repository"})]}),p.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[p.jsxs("span",{className:"flex items-center gap-1",title:"Stars",children:[p.jsx("div",{className:"i-ph:star w-3.5 h-3.5 text-bolt-elements-icon-warning"}),t.stargazers_count.toLocaleString()]}),p.jsxs("span",{className:"flex items-center gap-1",title:"Forks",children:[p.jsx("div",{className:"i-ph:git-fork w-3.5 h-3.5 text-bolt-elements-icon-info"}),t.forks_count.toLocaleString()]})]})]}),t.description&&p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary line-clamp-2",children:t.description}),p.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[p.jsxs("span",{className:"flex items-center gap-1",title:"Default Branch",children:[p.jsx("div",{className:"i-ph:git-branch w-3.5 h-3.5"}),t.default_branch]}),t.language&&p.jsxs("span",{className:"flex items-center gap-1",title:"Primary Language",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-current opacity-60"}),t.language]}),p.jsxs("span",{className:"flex items-center gap-1",title:"Last Updated",children:[p.jsx("div",{className:"i-ph:clock w-3.5 h-3.5"}),new Date(t.updated_at).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})]})]}),t.topics&&t.topics.length>0&&p.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.topics.slice(0,3).map(r=>p.jsx("span",{className:"px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",title:`Topic: ${r}`,children:r},r)),t.topics.length>3&&p.jsxs("span",{className:"text-bolt-elements-textTertiary",children:["+",t.topics.length-3," more"]})]}),t.size&&p.jsxs("div",{className:"text-xs text-bolt-elements-textTertiary",children:["Size: ",(t.size/1024).toFixed(1)," MB"]})]}),p.jsxs("div",{className:"flex items-center justify-between pt-3 mt-auto",children:[p.jsxs("span",{className:"flex items-center gap-1 text-xs text-bolt-elements-textSecondary group-hover:text-bolt-elements-item-contentAccent transition-colors",children:[p.jsx("div",{className:"i-ph:arrow-square-out w-3.5 h-3.5"}),"View"]}),e&&p.jsxs("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),e(t)},className:"flex items-center gap-1 px-2 py-1 rounded text-xs bg-bolt-elements-background-depth-2 hover:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors",title:"Clone repository",children:[p.jsx("div",{className:"i-ph:git-branch w-3.5 h-3.5"}),"Clone"]})]})]})},t.name)}function wFe({onClone:t,className:e}){const{connection:r,isConnected:n}=Lde(),{stats:s,isLoading:i,refreshStats:o}=Fde(r,{autoFetch:!0,cacheTimeout:30*60*1e3}),[a,l]=k.useState(""),[c,u]=k.useState("updated"),[d,h]=k.useState("all"),[f,b]=k.useState(1),[m,g]=k.useState(null),[y,v]=k.useState(!1),[_,x]=k.useState(!1),[w,S]=k.useState(null),T=s?.repos||[],E=12,C=k.useMemo(()=>{if(!T)return[];const z=T.filter(K=>{const L=!a||K.name.toLowerCase().includes(a.toLowerCase())||K.description?.toLowerCase().includes(a.toLowerCase())||K.full_name.toLowerCase().includes(a.toLowerCase());let O=!0;switch(d){case"own":O=!K.fork;break;case"forks":O=K.fork===!0;break;case"archived":O=K.archived===!0;break;case"all":default:O=!0;break}return L&&O});return z.sort((K,L)=>{switch(c){case"name":return K.name.localeCompare(L.name);case"stars":return L.stargazers_count-K.stargazers_count;case"created":return new Date(L.updated_at).getTime()-new Date(K.updated_at).getTime();case"updated":default:return new Date(L.updated_at).getTime()-new Date(K.updated_at).getTime()}}),z},[T,a,c,d]),A=Math.ceil(C.length/E),I=(f-1)*E,P=C.slice(I,I+E),D=async()=>{v(!0),S(null);try{await o()}catch(z){console.error("Failed to refresh GitHub repositories:",z),S(z instanceof Error?z.message:"Failed to refresh repositories")}finally{v(!1)}},R=z=>{g(z),x(!0)},F=z=>{if(t&&m){const K=m.html_url+".git";t(K,z)}g(null)},G=()=>{x(!1),g(null)};return k.useEffect(()=>{b(1)},[a,c,d]),!n||!r?p.jsxs("div",{className:"text-center p-8",children:[p.jsx("p",{className:"text-bolt-elements-textSecondary mb-4",children:"Please connect to GitHub first to browse repositories"}),p.jsx(Rt,{variant:"outline",onClick:()=>window.location.reload(),children:"Refresh Connection"})]}):i&&!s?p.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-4",children:[p.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-bolt-elements-borderColorActive border-t-transparent rounded-full"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Loading repositories..."})]}):T.length?p.jsxs(rt.div,{className:ye("space-y-6",e),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary",children:"Select Repository to Clone"}),p.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary",children:[C.length," of ",T.length," repositories"]})]}),p.jsxs(Rt,{onClick:D,disabled:y,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[p.jsx("div",{className:ye("i-ph:arrows-clockwise size-4",{"animate-spin":y})}),"Refresh"]})]}),w&&T.length>0&&p.jsx("div",{className:"p-3 rounded-lg bg-yellow-50 border border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-700",children:p.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["Warning: ",w,". Showing cached data."]})}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx("div",{className:"i-ph:magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 size-4 text-bolt-elements-textTertiary"}),p.jsx("input",{type:"text",placeholder:"Search repositories...",value:a,onChange:z=>l(z.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary focus:outline-none focus:ring-1 focus:ring-bolt-elements-borderColorActive"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:calendar size-4 text-bolt-elements-textTertiary"}),p.jsxs("select",{value:c,onChange:z=>u(z.target.value),className:"px-3 py-2 rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor text-bolt-elements-textPrimary text-sm focus:outline-none focus:ring-1 focus:ring-bolt-elements-borderColorActive",children:[p.jsx("option",{value:"updated",children:"Recently updated"}),p.jsx("option",{value:"stars",children:"Most starred"}),p.jsx("option",{value:"name",children:"Name (A-Z)"}),p.jsx("option",{value:"created",children:"Recently created"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:funnel size-4 text-bolt-elements-textTertiary"}),p.jsxs("select",{value:d,onChange:z=>h(z.target.value),className:"px-3 py-2 rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor text-bolt-elements-textPrimary text-sm focus:outline-none focus:ring-1 focus:ring-bolt-elements-borderColorActive",children:[p.jsx("option",{value:"all",children:"All repositories"}),p.jsx("option",{value:"own",children:"Own repositories"}),p.jsx("option",{value:"forks",children:"Forked repositories"}),p.jsx("option",{value:"archived",children:"Archived repositories"})]})]})]}),P.length>0?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(z=>p.jsx(xFe,{repo:z,onClone:()=>R(z)},z.id))}),A>1&&p.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-bolt-elements-borderColor",children:[p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary",children:["Showing ",Math.min(I+1,C.length)," to"," ",Math.min(I+E,C.length)," of ",C.length," ","repositories"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Rt,{onClick:()=>b(z=>Math.max(1,z-1)),disabled:f===1,variant:"outline",size:"sm",children:"Previous"}),p.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary px-3",children:[f," of ",A]}),p.jsx(Rt,{onClick:()=>b(z=>Math.min(A,z+1)),disabled:f===A,variant:"outline",size:"sm",children:"Next"})]})]})]}):p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{className:"text-bolt-elements-textSecondary",children:"No repositories found matching your search criteria."})}),m&&p.jsx(Sq,{provider:"github",repoOwner:m.full_name.split("/")[0],repoName:m.full_name.split("/")[1],token:r?.token||"",defaultBranch:m.default_branch,onBranchSelect:F,onClose:G,isOpen:_})]}):p.jsxs("div",{className:"text-center p-8",children:[p.jsx("div",{className:"i-ph:git-branch size-12 text-bolt-elements-textTertiary mx-auto mb-4"}),p.jsx("p",{className:"text-bolt-elements-textSecondary mb-4",children:"No repositories found"}),p.jsxs(Rt,{variant:"outline",onClick:D,disabled:y,children:[p.jsx("div",{className:ye("i-ph:arrows-clockwise size-4 mr-2",{"animate-spin":y})}),"Refresh"]})]})}function SFe({repo:t,onClone:e}){return p.jsx("a",{href:t.http_url_to_repo,target:"_blank",rel:"noopener noreferrer",className:"group block p-4 rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive transition-all duration-200",children:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-fork w-4 h-4 text-bolt-elements-icon-info"}),p.jsx("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-bolt-elements-item-contentAccent transition-colors",children:t.name})]}),p.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[p.jsxs("span",{className:"flex items-center gap-1",title:"Stars",children:[p.jsx("div",{className:"i-ph:star w-3.5 h-3.5 text-bolt-elements-icon-warning"}),t.star_count.toLocaleString()]}),p.jsxs("span",{className:"flex items-center gap-1",title:"Forks",children:[p.jsx("div",{className:"i-ph:git-fork w-3.5 h-3.5 text-bolt-elements-icon-info"}),t.forks_count.toLocaleString()]})]})]}),t.description&&p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary line-clamp-2",children:t.description}),p.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[p.jsxs("span",{className:"flex items-center gap-1",title:"Default Branch",children:[p.jsx("div",{className:"i-ph:git-branch w-3.5 h-3.5"}),t.default_branch]}),p.jsxs("span",{className:"flex items-center gap-1",title:"Last Updated",children:[p.jsx("div",{className:"i-ph:clock w-3.5 h-3.5"}),new Date(t.updated_at).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})]}),p.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e&&p.jsxs("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),e(t)},className:"flex items-center gap-1 px-2 py-1 rounded text-xs bg-bolt-elements-background-depth-2 hover:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors",title:"Clone repository",children:[p.jsx("div",{className:"i-ph:git-branch w-3.5 h-3.5"}),"Clone"]}),p.jsxs("span",{className:"flex items-center gap-1 group-hover:text-bolt-elements-item-contentAccent transition-colors",children:[p.jsx("div",{className:"i-ph:arrow-square-out w-3.5 h-3.5"}),"View"]})]})]})]})},t.name)}function EFe({onClone:t,className:e}){const{connection:r,isConnected:n}=Yde(),[s,i]=k.useState([]),[o,a]=k.useState(!1),[l,c]=k.useState(""),[u,d]=k.useState("updated"),[h,f]=k.useState("all"),[b,m]=k.useState(1),[g,y]=k.useState(null),[v,_]=k.useState(!1),[x,w]=k.useState(null),[S,T]=k.useState(!1),E=12,C=async(K=!1)=>{if(!n||!r?.token)return;const L=K?_:a;L(!0),y(null);try{const O=await fetch("/api/gitlab-projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r.token,gitlabUrl:r.gitlabUrl||"https://gitlab.com"})});if(!O.ok){const H=await O.json().catch(()=>({error:"Failed to fetch repositories"}));throw new Error(H.error||"Failed to fetch repositories")}const $=await O.json();i($.projects||[])}catch(O){console.error("Failed to fetch GitLab repositories:",O),y(O instanceof Error?O.message:"Failed to fetch repositories"),i([])}finally{L(!1)}},A=k.useMemo(()=>{if(!s)return[];const K=s.filter(L=>{const O=!l||L.name.toLowerCase().includes(l.toLowerCase())||L.description?.toLowerCase().includes(l.toLowerCase())||L.path_with_namespace.toLowerCase().includes(l.toLowerCase());let $=!0;switch(h){case"owned":$=!0;break;case"member":$=!0;break;case"all":default:$=!0;break}return O&&$});return K.sort((L,O)=>{switch(u){case"name":return L.name.localeCompare(O.name);case"stars":return O.star_count-L.star_count;case"created":return new Date(O.updated_at).getTime()-new Date(L.updated_at).getTime();case"updated":default:return new Date(O.updated_at).getTime()-new Date(L.updated_at).getTime()}}),K},[s,l,u,h]),I=Math.ceil(A.length/E),P=(b-1)*E,D=A.slice(P,P+E),R=()=>{C(!0)},F=K=>{w(K),T(!0)},G=K=>{t&&x&&t(x.http_url_to_repo,K),w(null)},z=()=>{T(!1),w(null)};return k.useEffect(()=>{m(1)},[l,u,h]),k.useEffect(()=>{n&&r?.token&&C()},[n,r?.token]),!n||!r?p.jsxs("div",{className:"text-center p-8",children:[p.jsx("p",{className:"text-bolt-elements-textSecondary mb-4",children:"Please connect to GitLab first to browse repositories"}),p.jsx(Rt,{variant:"outline",onClick:()=>window.location.reload(),children:"Refresh Connection"})]}):g&&!s.length?p.jsxs("div",{className:"text-center p-8",children:[p.jsxs("div",{className:"text-red-500 mb-4",children:[p.jsx("div",{className:"i-ph:git-branch w-12 h-12 mx-auto mb-2"}),p.jsx("p",{className:"font-medium",children:"Failed to load repositories"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-1",children:g})]}),p.jsxs(Rt,{variant:"outline",onClick:R,disabled:v,children:[p.jsx("div",{className:ye("i-ph:arrows-clockwise w-4 h-4 mr-2",{"animate-spin":v})}),"Try Again"]})]}):o&&!s.length?p.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-4",children:[p.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-bolt-elements-borderColorActive border-t-transparent rounded-full"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Loading repositories..."})]}):!s.length&&!o?p.jsxs("div",{className:"text-center p-8",children:[p.jsx("div",{className:"i-ph:git-branch w-12 h-12 text-bolt-elements-textTertiary mx-auto mb-4"}),p.jsx("p",{className:"text-bolt-elements-textSecondary mb-4",children:"No repositories found"}),p.jsxs(Rt,{variant:"outline",onClick:R,disabled:v,children:[p.jsx("div",{className:ye("i-ph:arrows-clockwise w-4 h-4 mr-2",{"animate-spin":v})}),"Refresh"]})]}):p.jsxs(rt.div,{className:ye("space-y-6",e),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary",children:"Select Repository to Clone"}),p.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary",children:[A.length," of ",s.length," repositories"]})]}),p.jsxs(Rt,{onClick:R,disabled:v,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[p.jsx("div",{className:ye("i-ph:arrows-clockwise w-4 h-4",{"animate-spin":v})}),"Refresh"]})]}),g&&s.length>0&&p.jsx("div",{className:"p-3 rounded-lg bg-yellow-50 border border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-700",children:p.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["Warning: ",g,". Showing cached data."]})}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx("div",{className:"i-ph:magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-bolt-elements-textTertiary"}),p.jsx("input",{type:"text",placeholder:"Search repositories...",value:l,onChange:K=>c(K.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary focus:outline-none focus:ring-1 focus:ring-bolt-elements-borderColorActive"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:calendar w-4 h-4 text-bolt-elements-textTertiary"}),p.jsxs("select",{value:u,onChange:K=>d(K.target.value),className:"px-3 py-2 rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor text-bolt-elements-textPrimary text-sm focus:outline-none focus:ring-1 focus:ring-bolt-elements-borderColorActive",children:[p.jsx("option",{value:"updated",children:"Recently updated"}),p.jsx("option",{value:"stars",children:"Most starred"}),p.jsx("option",{value:"name",children:"Name (A-Z)"}),p.jsx("option",{value:"created",children:"Recently created"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:funnel w-4 h-4 text-bolt-elements-textTertiary"}),p.jsxs("select",{value:h,onChange:K=>f(K.target.value),className:"px-3 py-2 rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor text-bolt-elements-textPrimary text-sm focus:outline-none focus:ring-1 focus:ring-bolt-elements-borderColorActive",children:[p.jsx("option",{value:"all",children:"All repositories"}),p.jsx("option",{value:"owned",children:"Owned repositories"}),p.jsx("option",{value:"member",children:"Member repositories"})]})]})]}),D.length>0?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(K=>p.jsx("div",{className:"relative",children:p.jsx(SFe,{repo:K,onClone:()=>F(K)})},K.id))}),I>1&&p.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-bolt-elements-borderColor",children:[p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary",children:["Showing ",Math.min(P+1,A.length)," to"," ",Math.min(P+E,A.length)," of ",A.length," ","repositories"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Rt,{onClick:()=>m(K=>Math.max(1,K-1)),disabled:b===1,variant:"outline",size:"sm",children:"Previous"}),p.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary px-3",children:[b," of ",I]}),p.jsx(Rt,{onClick:()=>m(K=>Math.min(I,K+1)),disabled:b===I,variant:"outline",size:"sm",children:"Next"})]})]})]}):p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{className:"text-bolt-elements-textSecondary",children:"No repositories found matching your search criteria."})}),x&&p.jsx(Sq,{provider:"gitlab",repoOwner:x.path_with_namespace.split("/")[0],repoName:x.path_with_namespace.split("/")[1],projectId:x.id,token:r?.token||"",gitlabUrl:r?.gitlabUrl,defaultBranch:x.default_branch,onBranchSelect:G,onClose:z,isOpen:S})]})}const CFe=["node_modules/**",".git/**",".github/**",".vscode/**","dist/**","build/**",".next/**","coverage/**",".cache/**",".idea/**","**/*.log","**/.DS_Store","**/npm-debug.log*","**/yarn-debug.log*","**/yarn-error.log*","**/*lock.yaml"],TFe=QA().add(CFe),kFe=100*1024,AFe=500*1024;function RFe({importChat:t,className:e,style:r}){const{ready:n,gitClone:s}=vFe(),[i,o]=k.useState(!1),[a,l]=k.useState(!1),[c,u]=k.useState(null),d=async h=>{if(n){o(!0),l(!1),u(null);try{const{workdir:f,data:b}=await s(h);if(t){const m=Object.keys(b).filter(E=>!TFe.ignores(E)),g=new TextDecoder("utf-8");let y=0;const v=[],_=[];for(const E of m){const{data:C,encoding:A}=b[E];if(C instanceof Uint8Array&&!E.match(/\.(txt|md|astro|mjs|js|jsx|ts|tsx|json|html|css|scss|less|yml|yaml|xml|svg|vue|svelte)$/i)){v.push(E);continue}try{const I=A==="utf8"?C:C instanceof Uint8Array?g.decode(C):"";if(!I)continue;const P=new TextEncoder().encode(I).length;if(P>kFe){v.push(`${E} (too large: ${Math.round(P/1024)}KB)`);continue}if(y+P>AFe){v.push(`${E} (would exceed total size limit)`);continue}y+=P,_.push({path:E,content:I})}catch(I){v.push(`${E} (error: ${I.message})`)}}const x=await TW(_),w=kW(x),T=[{role:"assistant",content:`Cloning the repo ${h} into ${f}
${v.length>0?`
Skipped files (${v.length}):
${v.map(E=>`- ${E}`).join(`
`)}`:""}

<boltArtifact id="imported-files" title="Git Cloned Files" type="bundled">
${_.map(E=>`<boltAction type="file" filePath="${E.path}">
${AW(E.content)}
</boltAction>`).join(`
`)}
</boltArtifact>`,id:Ef(),createdAt:new Date}];w&&T.push(w),await t(`Git Project:${h.split("/").slice(-1)[0]}`,T)}}catch(f){console.error("Error during import:",f),Ie.error("Failed to import repository")}finally{o(!1)}}};return p.jsxs(p.Fragment,{children:[p.jsxs(Rt,{onClick:()=>{u(null),l(!0)},title:"Clone a repo",variant:"default",size:"lg",className:ye("flex gap-2","text-gray-300 hover:text-white","border border-[#333333] hover:border-purple-500/50","h-10 px-4 py-2 justify-center","transition-all duration-200 ease-in-out","hover:shadow-[0_0_12px_rgba(168,85,247,0.15)]",e),style:{backgroundColor:"#2a2a2a",...r},disabled:!n||i,children:["Clone a repo",p.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[p.jsx("div",{className:"i-ph:github-logo size-4"}),p.jsx("div",{className:"i-ph:git-branch size-4"})]})]}),a&&!c&&p.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsx("div",{className:"rounded-xl shadow-2xl border border-[#333333] max-w-md w-full",style:{backgroundColor:"#1a2332"},children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h3",{className:"text-lg font-semibold text-white",children:"Choose Repository Provider"}),p.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-lg bg-transparent hover:bg-[#2a2a2a] text-gray-400 hover:text-white transition-all duration-200 hover:scale-105 active:scale-95",children:p.jsx("div",{className:"i-ph:x size-5 transition-transform duration-200 hover:rotate-90"})})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:()=>u("github"),className:"w-full p-4 rounded-lg border border-[#333333] hover:border-purple-500/50 transition-all duration-200 text-left group hover:shadow-[0_0_15px_rgba(168,85,247,0.1)]",style:{backgroundColor:"#2a2a2a"},children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/30 transition-colors",children:p.jsx("div",{className:"i-ph:github-logo size-6 text-purple-400"})}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium text-white",children:"GitHub"}),p.jsx("div",{className:"text-sm text-gray-400",children:"Clone from GitHub repositories"})]})]})}),p.jsx("button",{onClick:()=>u("gitlab"),className:"w-full p-4 rounded-lg border border-[#333333] hover:border-purple-500/50 transition-all duration-200 text-left group hover:shadow-[0_0_15px_rgba(168,85,247,0.1)]",style:{backgroundColor:"#2a2a2a"},children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/20 flex items-center justify-center group-hover:bg-orange-500/30 transition-colors",children:p.jsx("div",{className:"i-ph:git-branch size-6 text-orange-400"})}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium text-white",children:"GitLab"}),p.jsx("div",{className:"text-sm text-gray-400",children:"Clone from GitLab repositories"})]})]})})]})]})})}),a&&c==="github"&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white dark:bg-gray-950 rounded-xl shadow-xl border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[p.jsxs("div",{className:"p-6 border-b border-bolt-elements-borderColor dark:border-bolt-elements-borderColor flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 dark:bg-blue-500/20 flex items-center justify-center",children:p.jsx("div",{className:"i-ph:github-logo size-6 text-blue-600 dark:text-blue-400"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:"Import GitHub Repository"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:"Clone a repository from GitHub to your workspace"})]})]}),p.jsx("button",{onClick:()=>{l(!1),u(null)},className:"p-2 rounded-lg bg-transparent hover:bg-bolt-elements-background-depth-1 dark:hover:bg-bolt-elements-background-depth-1 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary dark:hover:text-bolt-elements-textPrimary transition-all duration-200 hover:scale-105 active:scale-95",children:p.jsx("div",{className:"i-ph:x size-5 transition-transform duration-200 hover:rotate-90"})})]}),p.jsx("div",{className:"p-6 max-h-[calc(90vh-140px)] overflow-y-auto",children:p.jsx(wFe,{onClone:d})})]})}),a&&c==="gitlab"&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white dark:bg-gray-950 rounded-xl shadow-xl border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[p.jsxs("div",{className:"p-6 border-b border-bolt-elements-borderColor dark:border-bolt-elements-borderColor flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/10 dark:bg-orange-500/20 flex items-center justify-center",children:p.jsx("div",{className:"i-ph:git-branch size-6 text-orange-600 dark:text-orange-400"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:"Import GitLab Repository"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:"Clone a repository from GitLab to your workspace"})]})]}),p.jsx("button",{onClick:()=>{l(!1),u(null)},className:"p-2 rounded-lg bg-transparent hover:bg-bolt-elements-background-depth-1 dark:hover:bg-bolt-elements-background-depth-1 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary dark:hover:text-bolt-elements-textPrimary transition-all duration-200 hover:scale-105 active:scale-95",children:p.jsx("div",{className:"i-ph:x size-5 transition-transform duration-200 hover:rotate-90"})})]}),p.jsx("div",{className:"p-6 max-h-[calc(90vh-140px)] overflow-y-auto",children:p.jsx(EFe,{onClone:d})})]})}),i&&p.jsx(_Fe,{message:"Please wait while we clone the repository..."})]})}function PFe({importChat:t}){const e=async s=>{const i=s.target.files?.[0];if(i&&t){try{const o=new FileReader;o.onload=async a=>{try{const l=a.target?.result,c=JSON.parse(l);if(Array.isArray(c.messages)){await t(c.description||"Imported Chat",c.messages),Ie.success("Chat imported successfully");return}Ie.error("Invalid chat file format")}catch(l){l instanceof Error?Ie.error("Failed to parse chat file: "+l.message):Ie.error("Failed to parse chat file")}},o.onerror=()=>Ie.error("Failed to read chat file"),o.readAsText(i)}catch(o){Ie.error(o instanceof Error?o.message:"Failed to import chat")}s.target.value=""}else Ie.error("Something went wrong")},r=ye("!flex w-full items-center gap-2 justify-center","text-gray-300 hover:text-white","border border-[#333333] hover:border-[#4a5568]","h-10 px-4 py-2","transition-all duration-200 ease-in-out","rounded-lg text-sm font-medium","hover:bg-[#2a2a2a]"),n=ye("!flex w-full items-center gap-2 justify-center","text-white","bg-gradient-to-r from-[#1e3a5f] to-[#2d4a6f]","border border-[#3d5a7f] hover:border-[#4d6a8f]","h-10 px-4 py-2","transition-all duration-200 ease-in-out","rounded-lg text-sm font-medium","hover:from-[#2a4a6f] hover:to-[#3d5a7f]","shadow-[0_2px_8px_rgba(30,58,95,0.3)]");return p.jsxs("div",{className:"grid grid-cols-3 gap-3 w-full max-w-xl items-stretch",children:[p.jsx("input",{type:"file",id:"chat-import-left",className:"hidden",accept:".json",onChange:e}),p.jsx("div",{className:"flex h-10",children:p.jsxs(Rt,{onClick:()=>{document.getElementById("chat-import-left")?.click()},variant:"default",className:r,style:{backgroundColor:"#1a2332",width:"100%",height:"100%"},children:[p.jsx("span",{className:"i-ph:upload-simple w-4 h-4"}),p.jsx("span",{children:"Import Chat"})]})}),p.jsx("div",{className:"flex h-10",children:p.jsx(a3e,{importChat:t,className:r,style:{backgroundColor:"#1a2332",width:"100%",height:"100%"}})}),p.jsx("div",{className:"flex h-10",children:p.jsx(RFe,{importChat:t,className:n,style:{width:"100%",height:"100%"}})})]})}const gM=[{text:"AI Landing Page Builder",icon:"i-ph:globe-duotone",color:"text-cyan-400"},{text:"AI Customer Support Chatbot Platform",icon:"i-ph:globe-duotone",color:"text-cyan-400"},{text:"AI Interview Screening Platform",icon:"i-ph:monitor-duotone",color:"text-purple-400"},{text:"Sales Pitch Presentation",icon:"i-ph:presentation-chart-duotone",color:"text-pink-400"},{text:"Referral Program Platform",icon:"i-ph:users-duotone",color:"text-purple-400"},{text:"AI Social Media Manager",icon:"i-ph:globe-duotone",color:"text-cyan-400"},{text:"E-commerce Dashboard",icon:"i-ph:storefront-duotone",color:"text-green-400"},{text:"Project Management Tool",icon:"i-ph:kanban-duotone",color:"text-blue-400"},{text:"AI Content Generator",icon:"i-ph:article-duotone",color:"text-orange-400"},{text:"Portfolio Website",icon:"i-ph:briefcase-duotone",color:"text-indigo-400"},{text:"Real-time Chat Application",icon:"i-ph:chat-circle-dots-duotone",color:"text-teal-400"},{text:"Invoice Generator Tool",icon:"i-ph:receipt-duotone",color:"text-yellow-400"}];function bM(t){const e=[...t];for(let r=e.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[e[r],e[n]]=[e[n],e[r]]}return e}function IFe({sendMessage:t}){const[e,r]=k.useState(()=>bM(gM).slice(0,3)),n=k.useCallback(()=>{r(bM(gM).slice(0,3))},[]),s={backgroundColor:"#1a2332",color:"#9ca3af",border:"1px solid #333333"},i=a=>{a.currentTarget.style.backgroundColor="#2a2a2a",a.currentTarget.style.color="#ffffff"},o=a=>{a.currentTarget.style.backgroundColor="#1a2332",a.currentTarget.style.color="#9ca3af"};return p.jsxs("div",{className:"flex items-center gap-2 w-full max-w-3xl mx-auto px-3 py-2",children:[e.map((a,l)=>p.jsxs("button",{onClick:c=>t?.(c,a.text),className:"flex items-center gap-1.5 px-2.5 py-1 text-xs transition-colors whitespace-nowrap rounded",style:s,onMouseEnter:i,onMouseLeave:o,children:[p.jsx("div",{className:`${a.icon} ${a.color} text-sm flex-shrink-0`}),p.jsx("span",{children:a.text})]},`${a.text}-${l}`)),p.jsx("button",{onClick:n,className:"ml-auto flex-shrink-0 p-1.5 transition-colors rounded",style:s,onMouseEnter:i,onMouseLeave:o,title:"Try different ideas",children:p.jsx("div",{className:"i-ph:arrows-clockwise text-sm"})})]})}const NFe=({template:t,isSpotlight:e})=>p.jsx("a",{href:`/git?url=https://github.com/${t.githubRepo}.git`,"data-state":"closed","data-discover":"true",className:"group relative flex-shrink-0",title:t.label,children:p.jsx("div",{className:`inline-block ${t.icon} w-8 h-8 text-2xl transition-all duration-500 ease-in-out ${e?"text-[#4d6a8f] opacity-100 scale-125 grayscale-0 drop-shadow-[0_0_12px_rgba(61,90,127,0.8)]":"text-gray-400 opacity-50 grayscale scale-100"} group-hover:text-[#4d6a8f] group-hover:opacity-100 group-hover:scale-125 group-hover:grayscale-0 group-hover:drop-shadow-[0_0_12px_rgba(61,90,127,0.8)]`})}),DFe=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState(0),s=k.useRef(null),i=k.useRef(null),o=k.useRef(),a=k.useRef(0),l=k.useRef(0),c=k.useRef(1),u=[...Mo,...Mo,...Mo],d=56,h=Mo.length*d,f=1,b=.15,m=.05,g=k.useCallback(()=>{if(!s.current||!i.current)return;const v=s.current.offsetWidth,_=i.current.getBoundingClientRect(),S=s.current.getBoundingClientRect().left+v/2-_.left,T=Math.floor(S/d)%Mo.length;n(Math.max(0,Math.min(T,Mo.length-1)))},[]),y=k.useCallback(v=>{if(!i.current){o.current=requestAnimationFrame(y);return}l.current||(l.current=v);const _=v-l.current;l.current=v;const x=t?b:f;c.current+=(x-c.current)*m;const w=.03;a.current+=w*_*c.current,a.current>=h&&(a.current-=h),i.current.style.transform=`translateX(-${a.current}px)`,g(),o.current=requestAnimationFrame(y)},[t,h,g]);return k.useEffect(()=>(o.current=requestAnimationFrame(y),()=>{o.current&&cancelAnimationFrame(o.current)}),[y]),p.jsxs("div",{ref:s,className:"relative flex items-center justify-center w-full overflow-hidden",onMouseEnter:()=>e(!0),onMouseLeave:()=>e(!1),children:[p.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-16 bg-gradient-to-r from-[#0b0d13] via-[#0b0d13]/80 to-transparent z-[1] pointer-events-none"}),p.jsx("div",{ref:i,className:"flex items-center gap-6 py-3",style:{willChange:"transform"},children:u.map((v,_)=>p.jsx(NFe,{template:v,isSpotlight:_%Mo.length===r},`${v.name}-${_}`))}),p.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-16 bg-gradient-to-l from-[#0b0d13] via-[#0b0d13]/80 to-transparent z-[1] pointer-events-none"})]})},OFe=({maxItems:t=10})=>{const e=jC(),[r,n]=k.useState([]),[s,i]=k.useState(!0),o=k.useCallback(async()=>{const u=Db.get();if(!u){i(!1);return}try{const h=(await aF(u,{index:"timestamp",direction:"prev",limit:t})).filter(f=>f.urlId&&f.description);n(h)}catch(d){console.error("Failed to load chat history:",d)}finally{i(!1)}},[t]);if(k.useEffect(()=>{o()},[o]),s)return p.jsx("div",{className:"w-full max-w-4xl mx-auto mt-8 px-4",children:p.jsx("div",{className:"flex items-center justify-center py-8",children:p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-2xl text-bolt-elements-loader-progress"})})});if(r.length===0)return null;const a=u=>{e(`/chat/${u.urlId}`)},l=u=>{try{return ffe(new Date(u),{addSuffix:!0})}catch{return u}},c=u=>{const d=u.messages.find(h=>h.role==="user");return d&&typeof d.content=="string"?d.content.slice(0,120)+(d.content.length>120?"...":""):"No preview available"};return p.jsxs("div",{className:"w-full max-w-4xl mx-auto mt-8 px-4 pb-8",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"i-ph:clock-counter-clockwise text-xl text-[#6b8bb8]"}),p.jsx("h2",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Recent Chats"}),p.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-[#3d5a7f]/40 to-transparent"})]}),p.jsxs("div",{className:ye("rounded-xl overflow-hidden","border border-[#3d5a7f]/30","bg-gradient-to-b from-[#1e3a5f]/10 to-[#0b0d13]/90"),children:[p.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-4 px-4 py-3 border-b border-[#3d5a7f]/20 bg-[#1e3a5f]/10",children:[p.jsx("div",{className:"text-xs font-medium text-[#6b8bb8] uppercase tracking-wider",children:"Task"}),p.jsx("div",{className:"text-xs font-medium text-[#6b8bb8] uppercase tracking-wider text-right",children:"Last Modified"})]}),p.jsx("div",{className:"divide-y divide-[#3d5a7f]/10",children:r.map(u=>p.jsxs("div",{onClick:()=>a(u),className:ye("grid grid-cols-[1fr_auto] gap-4 px-4 py-3","cursor-pointer transition-all duration-200","hover:bg-[#1e3a5f]/20","group"),children:[p.jsxs("div",{className:"min-w-0",children:[p.jsx("div",{className:"font-medium text-bolt-elements-textPrimary truncate group-hover:text-[#8badd4] transition-colors",children:u.description||"Untitled Chat"}),p.jsx("div",{className:"text-xs text-bolt-elements-textTertiary truncate mt-0.5",children:c(u)})]}),p.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:l(u.timestamp)}),p.jsx("div",{className:"i-ph:arrow-right text-bolt-elements-textTertiary opacity-0 group-hover:opacity-100 transition-opacity"})]})]},u.id))}),r.length>=t&&p.jsx("div",{className:"px-4 py-3 border-t border-[#3d5a7f]/20 bg-[#0b0d13]/50",children:p.jsxs("button",{onClick:()=>{},className:"text-sm text-[#6b8bb8] hover:text-[#8badd4] transition-colors flex items-center gap-1",children:["View all chats",p.jsx("div",{className:"i-ph:arrow-right text-xs"})]})})]})]})};class LFe{_proxyEndpoint="/api/vercel-proxy";async get(e,r){return this._request("GET",e,r)}async post(e,r,n){return this._request("POST",e,r,n)}async put(e,r,n){return this._request("PUT",e,r,n)}async delete(e,r){return this._request("DELETE",e,r)}async _request(e,r,n,s){try{const i={"Content-Type":"application/json",Authorization:`Bearer ${n}`},o=await fetch(this._proxyEndpoint,{method:"POST",headers:i,body:JSON.stringify({endpoint:r,method:e,body:s})}),a=await o.json();return o.ok?{success:!0,data:a}:{success:!1,error:a.error||`Vercel API error: ${o.status}`}}catch(i){return{success:!1,error:i instanceof Error?i.message:"Request failed"}}}async testConnection(e){try{const r=await fetch(this._proxyEndpoint,{method:"GET",headers:{Authorization:`Bearer ${e}`}});return r.ok?{success:!0,data:await r.json()}:{success:!1,error:(await r.json()).error||"Connection failed"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Connection failed"}}}async listDomains(e,r){try{const n=await fetch(`/api/vercel-domains?projectId=${encodeURIComponent(e)}`,{method:"GET",headers:{Authorization:`Bearer ${r}`}}),s=await n.json();return n.ok?{success:!0,domains:s.domains||[]}:{success:!1,error:s.error||"Failed to list domains"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to list domains"}}}async addDomain(e,r,n){try{const s=await fetch("/api/vercel-domains",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({projectId:e,action:"add",domain:r})}),i=await s.json();return s.ok?{success:!0,domain:i.domain}:{success:!1,error:i.error||"Failed to add domain"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to add domain"}}}async removeDomain(e,r,n){try{const s=await fetch("/api/vercel-domains",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({projectId:e,action:"remove",domain:r})}),i=await s.json();return s.ok?{success:!0}:{success:!1,error:i.error||"Failed to remove domain"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to remove domain"}}}}const Pf=new LFe,m0="your_vercel_access_token_here",yM=typeof window<"u"?localStorage.getItem("vercel_connection"):null;let qh;if(yM)try{const t=JSON.parse(yM);!t.user&&!t.token&&m0?(typeof window<"u"&&localStorage.removeItem("vercel_connection"),qh={user:null,token:m0,stats:void 0}):qh=t}catch(t){console.error("Error parsing saved Vercel connection:",t),qh={user:null,token:m0,stats:void 0}}else qh={user:null,token:m0,stats:void 0};const Pd=bt(qh),k8e=bt(!1),vM=bt(!1),Eq=t=>{const r={...Pd.get(),...t};Pd.set(r),typeof window<"u"&&localStorage.setItem("vercel_connection",JSON.stringify(r))};function A8e(){const t="your_vercel_access_token_here";Pd.get().token||(Eq({token:t}),Cq(t).catch(console.error))}const R8e=Cq;async function Cq(t){try{vM.set(!0);const e=await Pf.get("/v9/projects",t);if(!e.success||!e.data)throw new Error(e.error||"Failed to fetch projects");const r=e.data.projects||[],n=await Promise.all(r.map(async i=>{try{const o=await Pf.get(`/v6/deployments?projectId=${i.id}&limit=1`,t);return o.success&&o.data?{...i,latestDeployments:o.data.deployments||[]}:i}catch(o){return console.error(`Error fetching deployments for project ${i.id}:`,o),i}})),s=Pd.get();Eq({...s,stats:{projects:n,totalProjects:n.length}})}catch(e){console.error("Vercel API Error:",e),Jt.logError("Failed to fetch Vercel stats",{error:e}),Ie.error("Failed to fetch Vercel statistics")}finally{vM.set(!1)}}function Tq({isOpen:t,onClose:e,projectId:r,currentUrl:n}){const s=He(Pd),i=He(zn),[o,a]=k.useState([]),[l,c]=k.useState(!1),[u,d]=k.useState(!1),[h,f]=k.useState(""),[b,m]=k.useState(null),g=r||(i?localStorage.getItem(`vercel-project-${i}`):null),y=k.useCallback(async()=>{if(!(!g||!s.token)){c(!0),m(null);try{const x=await Pf.listDomains(g,s.token);x.success&&x.domains?a(x.domains):m(x.error||"Failed to fetch domains")}catch(x){m(x instanceof Error?x.message:"Failed to fetch domains")}finally{c(!1)}}},[g,s.token]);k.useEffect(()=>{t&&y()},[t,y]);const v=async()=>{if(!g||!s.token||!h.trim())return;if(!/^[a-z0-9][a-z0-9-]*[a-z0-9]$|^[a-z0-9]$/i.test(h)){m("Invalid subdomain format. Use only letters, numbers, and hyphens.");return}d(!0),m(null);const w=`${h}.vercel.app`;try{const S=await Pf.addDomain(g,w,s.token);S.success?(Ie.success(`Domain ${w} added successfully!`),f(""),await y()):m(S.error||"Failed to add domain")}catch(S){m(S instanceof Error?S.message:"Failed to add domain")}finally{d(!1)}},_=async x=>{if(!(!g||!s.token)){d(!0),m(null);try{const w=await Pf.removeDomain(g,x,s.token);w.success?(Ie.success(`Domain ${x} removed successfully!`),await y()):m(w.error||"Failed to remove domain")}catch(w){m(w instanceof Error?w.message:"Failed to remove domain")}finally{d(!1)}}};return g?p.jsx(Nr,{children:t&&p.jsx(Ii,{open:t,onOpenChange:x=>!x&&e(),children:p.jsxs(mv,{children:[p.jsx(gv,{asChild:!0,children:p.jsx(rt.div,{className:"fixed inset-0 z-[9999] dark",style:{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)"},initial:"closed",animate:"open",exit:"closed",variants:NT})}),p.jsx(bv,{asChild:!0,children:p.jsxs(rt.div,{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[9999] w-[520px] max-w-[90vw] focus:outline-none rounded-xl shadow-2xl dark",style:{backgroundColor:"#1a2332",border:"1px solid #333333"},initial:"closed",animate:"open",exit:"closed",variants:j4,children:[p.jsxs("div",{className:"flex items-center justify-between px-6 py-4",style:{borderBottom:"1px solid #333333"},children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"#2a2a2a"},children:p.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 76 65",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M37.5274 0L75.0548 65H0L37.5274 0Z",fill:"#ffffff"})})}),p.jsxs("div",{children:[p.jsx(RT,{className:"text-lg font-semibold",style:{color:"#ffffff"},children:"Domain Settings"}),p.jsx(PT,{className:"text-sm",style:{color:"#9ca3af"},children:"Customize your Vercel deployment domain"})]})]}),p.jsx(Bf,{asChild:!0,children:p.jsx(Kt,{icon:"i-ph:x",className:"text-[#9ca3af] hover:text-white"})})]}),p.jsxs("div",{className:"p-6 space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium mb-3",style:{color:"#ffffff"},children:"Add Custom Subdomain"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"flex items-center flex-1 rounded-lg overflow-hidden",style:{backgroundColor:"#131a24",border:"1px solid #333333"},children:[p.jsx("input",{type:"text",value:h,onChange:x=>{f(x.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")),m(null)},placeholder:"my-custom-domain",className:"flex-1 px-4 py-2.5 bg-transparent text-sm focus:outline-none",style:{color:"#ffffff"},disabled:u}),p.jsx("span",{className:"px-3 py-2.5 text-sm",style:{color:"#6b7280",backgroundColor:"#0b0d13"},children:".vercel.app"})]}),p.jsx("button",{onClick:v,disabled:u||!h.trim(),className:"px-4 py-2.5 rounded-lg text-sm font-medium transition-all",style:{backgroundColor:u||!h.trim()?"#2a2a2a":"#333333",color:u||!h.trim()?"#6b7280":"#ffffff",border:"1px solid #444444",opacity:u||!h.trim()?.5:1,cursor:u||!h.trim()?"not-allowed":"pointer"},children:u?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg w-4 h-4"}),"Saving..."]}):"Add"})]}),p.jsx("p",{className:"mt-2 text-xs",style:{color:"#6b7280"},children:"Add a custom .vercel.app subdomain for your project"})]}),b&&p.jsxs("div",{className:"px-4 py-3 rounded-lg text-sm flex items-center gap-2",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[p.jsx("div",{className:"i-ph:warning-circle text-red-400 w-5 h-5 flex-shrink-0"}),p.jsx("span",{style:{color:"#f87171"},children:b})]}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-medium mb-3 flex items-center justify-between",style:{color:"#ffffff"},children:["Connected Domains",p.jsx("button",{onClick:y,disabled:l,className:"text-xs px-2 py-1 rounded transition-colors",style:{color:"#9ca3af",backgroundColor:"#2a2a2a",border:"1px solid #444444"},children:l?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg w-3 h-3"}):p.jsx("div",{className:"i-ph:arrows-clockwise w-3 h-3"})})]}),l?p.jsx("div",{className:"flex items-center justify-center py-8 rounded-lg",style:{backgroundColor:"#131a24"},children:p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg w-6 h-6",style:{color:"#9ca3af"}})}):o.length===0?p.jsxs("div",{className:"text-center py-8 rounded-lg",style:{backgroundColor:"#131a24",color:"#6b7280"},children:[p.jsx("div",{className:"i-ph:globe-simple w-8 h-8 mx-auto mb-2 opacity-50"}),p.jsx("p",{className:"text-sm",children:"No domains configured"})]}):p.jsx("div",{className:"space-y-2",children:o.map(x=>p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 rounded-lg group",style:{backgroundColor:"#131a24"},children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:ye("w-2 h-2 rounded-full",x.verified?"bg-green-500":"bg-yellow-500")}),p.jsx("span",{className:"text-sm",style:{color:"#ffffff"},children:x.name}),x.verified&&p.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:"rgba(34, 197, 94, 0.1)",color:"#22c55e"},children:"Verified"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("a",{href:`https://${x.name}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity hover:bg-[#2a2a2a]",style:{color:"#9ca3af"},children:p.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})}),p.jsx("button",{onClick:()=>_(x.name),disabled:u,className:"p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500/10",style:{color:"#ef4444"},children:p.jsx("div",{className:"i-ph:trash w-4 h-4"})})]})]},x.name))})]}),n&&p.jsxs("div",{className:"pt-4",style:{borderTop:"1px solid #333333"},children:[p.jsx("h3",{className:"text-sm font-medium mb-2",style:{color:"#ffffff"},children:"Current Deployment"}),p.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:underline",style:{color:"#60a5fa"},children:[p.jsx("div",{className:"i-ph:link w-4 h-4"}),n]})]})]}),p.jsx("div",{className:"flex justify-end gap-3 px-6 py-4",style:{borderTop:"1px solid #333333"},children:p.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"#2a2a2a",color:"#ffffff",border:"1px solid #444444"},children:"Close"})})]})})]})})}):null}const MFe=Object.freeze(Object.defineProperty({__proto__:null,VercelDomainModal:Tq},Symbol.toStringTag,{value:"Module"}));function jFe({alert:t,clearAlert:e,postMessage:r}){const{type:n,title:s,description:i,content:o,url:a,stage:l,buildStatus:c,deployStatus:u,source:d}=t,[h,f]=k.useState(!1),b=l&&(c||u),m=n==="success"&&d==="vercel";return p.jsxs(p.Fragment,{children:[p.jsx(Nr,{children:p.jsx(rt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-background-depth-2 p-4 mb-2",children:p.jsxs("div",{className:"flex items-start",children:[p.jsx(rt.div,{className:"flex-shrink-0",initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:p.jsx("div",{className:ye("text-xl",n==="success"?"i-ph:check-circle-duotone text-bolt-elements-icon-success":n==="error"?"i-ph:warning-duotone text-bolt-elements-button-danger-text":"i-ph:info-duotone text-bolt-elements-loader-progress")})}),p.jsxs("div",{className:"ml-3 flex-1",children:[p.jsx(rt.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm font-medium text-bolt-elements-textPrimary",children:s}),p.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-2 text-sm text-bolt-elements-textSecondary",children:[p.jsx("p",{children:i}),b&&p.jsx("div",{className:"mt-4 mb-2",children:p.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:ye("w-6 h-6 rounded-full flex items-center justify-center",c==="running"?"bg-bolt-elements-loader-progress":c==="complete"?"bg-bolt-elements-icon-success":c==="failed"?"bg-bolt-elements-button-danger-background":"bg-bolt-elements-textTertiary"),children:c==="running"?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-white text-xs"}):c==="complete"?p.jsx("div",{className:"i-ph:check text-white text-xs"}):c==="failed"?p.jsx("div",{className:"i-ph:x text-white text-xs"}):p.jsx("span",{className:"text-white text-xs",children:"1"})}),p.jsx("span",{className:"ml-2",children:"Build"})]}),p.jsx("div",{className:ye("h-0.5 w-8",c==="complete"?"bg-bolt-elements-icon-success":"bg-bolt-elements-textTertiary")}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:ye("w-6 h-6 rounded-full flex items-center justify-center",u==="running"?"bg-bolt-elements-loader-progress":u==="complete"?"bg-bolt-elements-icon-success":u==="failed"?"bg-bolt-elements-button-danger-background":"bg-bolt-elements-textTertiary"),children:u==="running"?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-white text-xs"}):u==="complete"?p.jsx("div",{className:"i-ph:check text-white text-xs"}):u==="failed"?p.jsx("div",{className:"i-ph:x text-white text-xs"}):p.jsx("span",{className:"text-white text-xs",children:"2"})}),p.jsx("span",{className:"ml-2",children:"Deploy"})]})]})}),o&&p.jsx("div",{className:"text-xs text-bolt-elements-textSecondary p-2 bg-bolt-elements-background-depth-3 rounded mt-4 mb-4",children:o}),a&&n==="success"&&p.jsxs("div",{className:"mt-3 space-y-2",children:[p.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-bolt-elements-item-contentAccent hover:underline flex items-center",children:[p.jsx("span",{className:"mr-1",children:"View deployed site"}),p.jsx("div",{className:"i-ph:arrow-square-out"})]}),m&&p.jsxs("button",{onClick:()=>f(!0),className:ye("flex items-center gap-1.5 text-sm px-3 py-1.5 rounded-md","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary","hover:bg-bolt-elements-background-depth-4 hover:border-accent-500/50","transition-all"),children:[p.jsx("div",{className:"i-ph:globe w-4 h-4"}),p.jsx("span",{children:"Customize Domain"})]})]})]}),p.jsx(rt.div,{className:"mt-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:p.jsxs("div",{className:ye("flex gap-2"),children:[n==="error"&&p.jsxs("button",{onClick:()=>r(`*Fix this deployment error*
\`\`\`
${o||i}
\`\`\`
`),className:ye("px-2 py-1.5 rounded-md text-sm font-medium","bg-bolt-elements-button-primary-background","hover:bg-bolt-elements-button-primary-backgroundHover","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolt-elements-button-danger-background","text-bolt-elements-button-primary-text","flex items-center gap-1.5"),children:[p.jsx("div",{className:"i-ph:chat-circle-duotone"}),"Ask Devonz"]}),p.jsx("button",{onClick:e,className:ye("px-2 py-1.5 rounded-md text-sm font-medium","bg-bolt-elements-button-secondary-background","hover:bg-bolt-elements-button-secondary-backgroundHover","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolt-elements-button-secondary-background","text-bolt-elements-button-secondary-text"),children:"Dismiss"})]})})]})]})})}),m&&p.jsx(Tq,{isOpen:h,onClose:()=>f(!1),currentUrl:a})]})}function FFe({alert:t,clearAlert:e,postMessage:r}){const{description:n,content:s,source:i}=t,o=i==="preview",a=o?"Preview Error":"Terminal Error",l=o?"We encountered an error while running the preview. Would you like Devonz to analyze and help resolve this issue?":"We encountered an error while running terminal commands. Would you like Devonz to analyze and help resolve this issue?",c=()=>{o?n6():(y6(),Pe.interruptTerminal()),r(`*Fix this ${o?"preview":"terminal"} error* 
\`\`\`${o?"js":"sh"}
${s}
\`\`\`
`)};return p.jsx(Nr,{children:p.jsx(rt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-background-depth-2 p-4 mb-2",children:p.jsxs("div",{className:"flex items-start",children:[p.jsx(rt.div,{className:"flex-shrink-0",initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:p.jsx("div",{className:"i-ph:warning-duotone text-xl text-bolt-elements-button-danger-text"})}),p.jsxs("div",{className:"ml-3 flex-1",children:[p.jsx(rt.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm font-medium text-bolt-elements-textPrimary",children:a}),p.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-2 text-sm text-bolt-elements-textSecondary",children:[p.jsx("p",{children:l}),n&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary p-2 bg-bolt-elements-background-depth-3 rounded mt-4 mb-4",children:["Error: ",n]})]}),p.jsx(rt.div,{className:"mt-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:p.jsxs("div",{className:ye(" flex gap-2"),children:[p.jsxs("button",{onClick:c,className:ye("px-2 py-1.5 rounded-md text-sm font-medium","bg-bolt-elements-button-primary-background","hover:bg-bolt-elements-button-primary-backgroundHover","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolt-elements-button-danger-background","text-bolt-elements-button-primary-text","flex items-center gap-1.5"),children:[p.jsx("div",{className:"i-ph:chat-circle-duotone"}),"Ask Devonz"]}),p.jsx("button",{onClick:e,className:ye("px-2 py-1.5 rounded-md text-sm font-medium","bg-bolt-elements-button-secondary-background","hover:bg-bolt-elements-button-secondary-backgroundHover","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolt-elements-button-secondary-background","text-bolt-elements-button-secondary-text"),children:"Dismiss"})]})})]})]})})})}function BFe({data:t}){const[e,r]=Yr.useState([]),[n,s]=k.useState(!1);return Yr.useEffect(()=>{if(!t||t.length==0){r([]);return}const i=new Map;t.forEach(a=>{const l=i.get(a.label);l&&l.status==="complete"||i.set(a.label,a)});const o=Array.from(i.values());o.sort((a,l)=>a.order-l.order),r(o)},[t]),e.length===0?p.jsx(p.Fragment,{}):p.jsx(Nr,{children:p.jsx("div",{className:ye("bg-bolt-elements-background-depth-2","border border-bolt-elements-borderColor","shadow-lg rounded-lg  relative w-full max-w-chat mx-auto z-prompt","p-1"),children:p.jsxs("div",{className:ye("bg-bolt-elements-item-backgroundAccent","p-1 rounded-lg text-bolt-elements-item-contentAccent","flex "),children:[p.jsx("div",{className:"flex-1",children:p.jsx(Nr,{children:n?p.jsx(rt.div,{className:"actions",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:e.map((i,o)=>p.jsx(_M,{progress:i},o))}):p.jsx(_M,{progress:e.slice(-1)[0]})})}),p.jsx(rt.button,{initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.15,ease:Dn},className:" p-1 rounded-lg bg-bolt-elements-item-backgroundAccent hover:bg-bolt-elements-artifacts-backgroundHover",onClick:()=>s(i=>!i),children:p.jsx("div",{className:n?"i-ph:caret-up-bold":"i-ph:caret-down-bold"})})]})})})}const _M=({progress:t})=>p.jsxs(rt.div,{className:ye("flex text-sm gap-3"),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:[p.jsx("div",{className:"flex items-center gap-1.5 ",children:p.jsx("div",{children:t.status==="in-progress"?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg"}):t.status==="complete"?p.jsx("div",{className:"i-ph:check text-green-500"}):t.status==="failed"?p.jsx("div",{className:"i-ph:x-circle text-red-500"}):null})}),t.message]});function $Fe({alert:t,clearAlert:e,postMessage:r}){const{content:n}=t,s=He(Ja),[i,o]=k.useState(!1),[a,l]=k.useState(!0),c=!!(s.token&&s.selectedProjectId),u=c?"Supabase Query":"Supabase Connection Required",d=c?"Execute database query":"Supabase connection required",h=c?"Please review the proposed changes and apply them to your database.":"Please connect to Supabase to continue with this operation.",f=()=>{document.dispatchEvent(new CustomEvent("open-supabase-connection"))},b=!c,m=async y=>{if(!s.token||!s.selectedProjectId){console.error("No Supabase token or project selected");return}o(!0);try{const v=await fetch("/api/supabase/query",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.token}`},body:JSON.stringify({projectId:s.selectedProjectId,query:y})});if(!v.ok){const x=await v.json();throw new Error(`Supabase query failed: ${x.error?.message||v.statusText}`)}const _=await v.json();console.log("Supabase query executed successfully:",_),e()}catch(v){console.error("Failed to execute Supabase action:",v),r(`*Error executing Supabase query please fix and return the query again*
\`\`\`
${v instanceof Error?v.message:String(v)}
\`\`\`
`)}finally{o(!1)}},g=y=>{if(!y)return"";let v=y.replace(/\/\*[\s\S]*?\*\//g,"");return v=v.replace(/(--).*$/gm,"").replace(/(#).*$/gm,""),v.split(";").map(x=>x.trim()).filter(x=>x.length>0).join(`;

`)};return p.jsx(Nr,{children:p.jsxs(rt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"max-w-chat rounded-lg border-l-2 border-l-[#098F5F] border border-bolt-elements-borderColor bg-bolt-elements-background-depth-2",children:[p.jsx("div",{className:"p-4 pb-2",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("img",{height:"10",width:"18",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/supabase"}),p.jsx("h3",{className:"text-sm font-medium text-[#3DCB8F]",children:u})]})}),p.jsx("div",{className:"px-4",children:c?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center p-2 rounded-md bg-bolt-elements-background-depth-3 cursor-pointer",onClick:()=>l(!a),children:[p.jsx("div",{className:"i-ph:database text-bolt-elements-textPrimary mr-2"}),p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary flex-grow",children:d}),p.jsx("div",{className:`i-ph:caret-up text-bolt-elements-textPrimary transition-transform ${a?"rotate-180":""}`})]}),!a&&n&&p.jsx("div",{className:"mt-2 p-3 bg-bolt-elements-background-depth-4 rounded-md overflow-auto max-h-60 font-mono text-xs text-bolt-elements-textSecondary",children:p.jsx("pre",{children:g(n)})})]}):p.jsx("div",{className:"p-3 rounded-md bg-bolt-elements-background-depth-3",children:p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"You must first connect to Supabase and select a project."})})}),p.jsxs("div",{className:"p-4",children:[p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mb-4",children:h}),p.jsxs("div",{className:"flex gap-2",children:[b?p.jsx("button",{onClick:f,className:ye("px-3 py-2 rounded-md text-sm font-medium","bg-[#098F5F]","hover:bg-[#0aa06c]","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500","text-white","flex items-center gap-1.5"),children:"Connect to Supabase"}):p.jsx("button",{onClick:()=>m(n),disabled:i,className:ye("px-3 py-2 rounded-md text-sm font-medium","bg-[#098F5F]","hover:bg-[#0aa06c]","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500","text-white","flex items-center gap-1.5",i?"opacity-70 cursor-not-allowed":""),children:i?"Applying...":"Apply Changes"}),p.jsx("button",{onClick:e,disabled:i,className:ye("px-3 py-2 rounded-md text-sm font-medium","bg-[#503B26]","hover:bg-[#774f28]","focus:outline-none","text-[#F79007]",i?"opacity-70 cursor-not-allowed":""),children:"Dismiss"})]})]})]})})}function y2(){const t=He(lc),e=He(GP),r=He(eF),n=He(tF),s=He(J4),i=He(Z4),o=He(MT),[a,l]=k.useState([]),c=He(Q4),u=He(jT),d=He(pS),[h,f]=k.useState(()=>{const I=$se("settings");return{theme:I?.theme||"system",language:I?.language||"en",notifications:I?.notifications??!0,eventLogs:I?.eventLogs??!0,timezone:I?.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,tabConfiguration:u}});k.useEffect(()=>{const I=Object.entries(t).filter(([P,D])=>D.settings.enabled).map(([P,D])=>D);l(I)},[t]);const b=k.useCallback(I=>{f(P=>{const D={...P,...I};return Use("settings",D),D})},[]),m=k.useCallback((I,P)=>{cse(I,P)},[]),g=k.useCallback(I=>{GP.set(I),Jt.logSystem(`Debug mode ${I?"enabled":"disabled"}`),Et.set("isDebugEnabled",String(I))},[]),y=k.useCallback(I=>{gse(I),Jt.logSystem(`Event logs ${I?"enabled":"disabled"}`)},[]),v=k.useCallback(I=>{bse(I),Jt.logSystem(`Prompt template updated to ${I}`)},[]),_=k.useCallback(I=>{hse(I),Jt.logSystem(`Main branch updates ${I?"enabled":"disabled"}`)},[]),x=k.useCallback(I=>{pse(I),Jt.logSystem(`Auto select template ${I?"enabled":"disabled"}`)},[]),w=k.useCallback(I=>{mse(I),Jt.logSystem(`Context optimization ${I?"enabled":"disabled"}`)},[]),S=k.useCallback(I=>{fse(I),Jt.logSystem(`Auto-switch to file during AI edits ${I?"enabled":"disabled"}`)},[]),T=k.useCallback(I=>{b({theme:I})},[b]),E=k.useCallback(I=>{b({language:I})},[b]),C=k.useCallback(I=>{b({notifications:I})},[b]),A=k.useCallback(I=>{b({timezone:I})},[b]);return k.useEffect(()=>{const I=lc.get(),P={};Object.keys(I).forEach(D=>{P[D]=I[D].settings}),Et.set("providers",JSON.stringify(P))},[t]),{...h,providers:t,activeProviders:a,updateProviderSettings:m,debug:e,enableDebugMode:g,eventLogs:r,setEventLogs:y,promptId:n,setPromptId:v,isLatestBranch:s,enableLatestBranch:_,autoSelectTemplate:i,setAutoSelectTemplate:x,contextOptimizationEnabled:c,enableContextOptimization:w,autoSwitchToFile:o,setAutoSwitchToFile:S,setTheme:T,setLanguage:E,setNotifications:C,setTimezone:A,settings:h,tabConfiguration:u,resetTabConfiguration:rF,orchestratorSettings:d,updateOrchestratorSettings:yse}}const UFe=(t,e)=>{const r=[];for(let n=0;n<=e.length;n++)r[n]=[n];for(let n=0;n<=t.length;n++)r[0][n]=n;for(let n=1;n<=e.length;n++)for(let s=1;s<=t.length;s++)e.charAt(n-1)===t.charAt(s-1)?r[n][s]=r[n-1][s-1]:r[n][s]=Math.min(r[n-1][s-1]+1,r[n][s-1]+1,r[n-1][s]+1);return r[e.length][t.length]},g0=(t,e)=>{if(!t)return{score:0,matches:!0};if(!e)return{score:0,matches:!1};const r=t.toLowerCase(),n=e.toLowerCase();if(n.includes(r))return{score:100-n.indexOf(r)/n.length*20,matches:!0};const s=UFe(r,n),i=Math.max(r.length,n.length),o=1-s/i;return{score:o>.6?o*80:0,matches:o>.6}},xM=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),N1=(t,e)=>{if(!e)return xM(t);const r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=new RegExp(`(${r})`,"gi");return xM(t).replace(n,'<mark class="bg-[#3d5a7f]/40 text-current rounded px-0.5">$1</mark>')},wM=t=>t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(0)}K`:t.toString(),SM=(t,e)=>!!(e==="OpenRouter"&&t.label.includes("in:$0.00")&&t.label.includes("out:$0.00")||t.name.toLowerCase().includes("free")||t.label.toLowerCase().includes("free")),HFe=({model:t,setModel:e,provider:r,setProvider:n,modelList:s,providerList:i,apiKeys:o,modelLoading:a,isOpen:l,onOpenChange:c,hideTrigger:u=!1})=>{const[d,h]=k.useState(!1),f=l!==void 0?l:d,b=L=>{c?c(L):h(L)},[m,g]=k.useState("provider"),[y,v]=k.useState(""),[_,x]=k.useState(""),[w,S]=k.useState(-1),[T,E]=k.useState(!1),C=k.useRef(null),A=k.useRef(null),I=k.useRef([]),{orchestratorSettings:P}=y2();k.useEffect(()=>{const L=setTimeout(()=>{x(y)},150);return()=>clearTimeout(L)},[y]),k.useEffect(()=>{const L=O=>{C.current&&!C.current.contains(O.target)&&(b(!1),v(""))};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]),k.useEffect(()=>{f&&A.current&&A.current.focus()},[f,m]),k.useEffect(()=>{S(-1)},[_,m,T]),k.useEffect(()=>{E(!1)},[r?.name]);const D=k.useMemo(()=>_?i.map(L=>{const O=g0(_,L.name);return{...L,searchScore:O.score,searchMatches:O.matches,highlightedName:N1(L.name,_)}}).filter(L=>L.searchMatches).sort((L,O)=>O.searchScore-L.searchScore):i,[i,_]),R=k.useMemo(()=>[...s].filter(O=>O.provider===r?.name&&O.name).filter(O=>!(T&&!SM(O,r?.name))).map(O=>{const $=g0(_,O.label),H=g0(_,O.name),U=g0(_,wM(O.maxTokenAllowed)),ee=Math.max($.score,H.score,U.score),X=$.matches||H.matches||U.matches||!_;return{...O,searchScore:ee,searchMatches:X,highlightedLabel:N1(O.label,_),highlightedName:N1(O.name,_)}}).filter(O=>O.searchMatches).sort((O,$)=>_?$.searchScore-O.searchScore:O.label.localeCompare($.label)),[s,r?.name,T,_]),F=m==="provider"?D:R,G=k.useCallback(()=>{v(""),x(""),A.current&&A.current.focus()},[]),z=L=>{if(f)switch(L.key){case"ArrowDown":L.preventDefault(),S(O=>O+1>=F.length?0:O+1);break;case"ArrowUp":L.preventDefault(),S(O=>O-1<0?F.length-1:O-1);break;case"ArrowLeft":m==="model"&&(L.preventDefault(),g("provider"),v(""),S(-1));break;case"ArrowRight":m==="provider"&&(L.preventDefault(),g("model"),v(""),S(-1));break;case"Enter":if(L.preventDefault(),w>=0&&w<F.length)if(m==="provider"){const O=D[w];n?.(O);const $=s.find(H=>H.provider===O.name);$&&e?.($.name),g("model"),v(""),S(-1)}else{const O=R[w];e?.(O.name),b(!1),v("")}break;case"Escape":L.preventDefault(),b(!1),v("");break;case"Tab":L.preventDefault(),g(m==="provider"?"model":"provider"),v(""),S(-1);break;case"k":(L.ctrlKey||L.metaKey)&&(L.preventDefault(),G());break}};if(k.useEffect(()=>{w>=0&&I.current[w]&&I.current[w]?.scrollIntoView({block:"nearest"})},[w]),k.useEffect(()=>{if(i.length!==0&&r&&!i.some(L=>L.name===r.name)){const L=i[0];n?.(L);const O=s.find($=>$.provider===L.name);O&&e?.(O.name)}},[i,r,n,s,e]),i.length===0)return p.jsx("div",{className:"mb-2 p-4 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary",children:p.jsx("p",{className:"text-center",children:"No providers are currently enabled. Please enable at least one provider in the settings to start using the chat."})});const K=s.find(L=>L.name===t);return p.jsxs("div",{className:ye("relative",u?"":"mb-2"),onKeyDown:z,ref:C,children:[!u&&p.jsxs("div",{className:ye("flex items-stretch rounded-full overflow-hidden cursor-pointer","border border-bolt-elements-borderColor","bg-[#1a2332]","transition-all duration-200","hover:border-[#4d6a8f]",f?"ring-2 ring-[#4d6a8f]/50 border-[#4d6a8f]":""),onClick:()=>b(!f),role:"combobox","aria-expanded":f,"aria-haspopup":"listbox","aria-controls":"model-selector-listbox","aria-label":"Select AI model and provider",title:"Select AI model and provider",tabIndex:0,onKeyDown:L=>{(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),b(!f))},children:[p.jsxs("div",{className:ye("flex items-center gap-2 px-4 py-2.5","bg-[#0b0d13]","border-r border-bolt-elements-borderColor/50"),onClick:L=>{L.stopPropagation(),b(!0),g("provider")},children:[p.jsx("span",{className:"i-ph:cube-duotone text-[#6b8bb8] text-lg"}),p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:r?.name||"Provider"})]}),p.jsxs("div",{className:ye("flex-1 flex items-center justify-between gap-2 px-4 py-2.5","min-w-0"),onClick:L=>{L.stopPropagation(),b(!0),g("model")},children:[p.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[p.jsx("span",{className:"i-ph:brain-duotone text-[#6b8bb8] text-lg flex-shrink-0"}),p.jsxs("span",{className:"text-sm text-bolt-elements-textPrimary truncate",children:[K?.label||"Select model",P.enabled&&p.jsx("span",{className:"ml-1.5 text-[10px] font-bold text-purple-400 uppercase tracking-tight",children:"Multi-Agent"})]})]}),p.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[a&&p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-[#6b8bb8] text-sm animate-spin"}),p.jsx("span",{className:ye("i-ph:caret-down text-bolt-elements-textSecondary transition-transform duration-200",f?"rotate-180":"")})]})]})]}),f&&p.jsxs("div",{className:ye("z-50 w-full rounded-xl overflow-hidden","border border-bolt-elements-borderColor","bg-[#0b0d13]","shadow-xl shadow-black/50","max-h-[400px] flex flex-col"),children:[p.jsxs("div",{className:"flex border-b border-bolt-elements-borderColor bg-[#0b0d13]",children:[p.jsxs("button",{type:"button",className:ye("flex-1 px-4 py-2.5 text-sm font-medium transition-all","flex items-center justify-center gap-2",m==="provider"?"bg-[#1e3a5f]/40 text-[#8badd4] border-b-2 border-[#4d6a8f]":"bg-[#0b0d13] text-bolt-elements-textSecondary hover:bg-[#1a2332] hover:text-bolt-elements-textPrimary"),onClick:()=>{g("provider"),v(""),S(-1)},children:[p.jsx("span",{className:"i-ph:cube-duotone"}),"Provider"]}),p.jsxs("button",{type:"button",className:ye("flex-1 px-4 py-2.5 text-sm font-medium transition-all","flex items-center justify-center gap-2",m==="model"?"bg-[#1e3a5f]/40 text-[#8badd4] border-b-2 border-[#4d6a8f]":"bg-[#0b0d13] text-bolt-elements-textSecondary hover:bg-[#1a2332] hover:text-bolt-elements-textPrimary"),onClick:()=>{g("model"),v(""),S(-1)},children:[p.jsx("span",{className:"i-ph:brain-duotone"}),"Model"]}),r&&p.jsx("div",{className:"flex items-center px-3",children:o[r.name]?p.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-green-500/10 text-green-400 text-xs",children:[p.jsx("div",{className:"i-ph:check-circle-fill text-sm"}),p.jsx("span",{className:"whitespace-nowrap",children:"API Key"})]}):p.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-green-500/10 text-green-400 text-xs",children:[p.jsx("div",{className:"i-ph:check-circle-fill text-sm"}),p.jsx("span",{className:"whitespace-nowrap",children:"ENV Key"})]})})]}),p.jsxs("div",{className:"p-3 border-b border-bolt-elements-borderColor/50",children:[p.jsxs("div",{className:"relative",children:[p.jsx("input",{ref:A,type:"text",value:y,onChange:L=>v(L.target.value),placeholder:`Search ${m==="provider"?"providers":"models"}... (K to clear)`,className:ye("w-full pl-9 pr-9 py-2 rounded-lg text-sm","bg-[#1a2332] border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder:text-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-[#4d6a8f]/50 focus:border-[#4d6a8f]","transition-all"),onClick:L=>L.stopPropagation(),role:"searchbox","aria-label":`Search ${m}`}),p.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:p.jsx("span",{className:"i-ph:magnifying-glass text-bolt-elements-textTertiary"})}),y&&p.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),G()},className:"absolute right-3 top-1/2 -translate-y-1/2 p-0.5 rounded hover:bg-[#2a2a2a] transition-colors","aria-label":"Clear search",children:p.jsx("span",{className:"i-ph:x text-bolt-elements-textTertiary text-sm"})})]}),m==="model"&&r?.name==="OpenRouter"&&p.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[p.jsxs("button",{type:"button",onClick:L=>{L.stopPropagation(),E(!T)},className:ye("flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all",T?"bg-[#1e3a5f]/30 text-[#8badd4] border border-[#4d6a8f]/30":"bg-[#1a2332] text-bolt-elements-textSecondary border border-bolt-elements-borderColor hover:border-[#4d6a8f]/30"),children:[p.jsx("span",{className:"i-ph:gift"}),"Free models only"]}),T&&p.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary",children:[R.length," free model",R.length!==1?"s":""]})]}),_&&F.length>0&&p.jsxs("div",{className:"text-xs text-bolt-elements-textTertiary mt-2",children:[F.length," ",m,F.length!==1?"s":""," found"]}),m==="model"&&P.enabled&&p.jsxs("div",{className:"flex items-center gap-2 mt-2 px-1 py-1 rounded bg-purple-500/10 border border-purple-500/20",children:[p.jsx("span",{className:"i-ph:users-three-duotone text-purple-400 text-xs"}),p.jsxs("span",{className:"text-[10px] font-medium text-purple-300",children:["Multi-Agent Orchestration Active: ",P.coordinatorModel,"/",P.researcherModel,"/",P.architectModel]}),p.jsx("span",{className:"ml-auto px-1 rounded bg-purple-500/20 text-[9px] text-purple-400 font-bold",children:P.mode.toUpperCase()})]})]}),p.jsx("div",{role:"listbox",id:"model-selector-listbox","aria-label":`Select ${m}`,className:ye("flex-1 overflow-y-auto","[&::-webkit-scrollbar]:w-1.5","[&::-webkit-scrollbar-thumb]:bg-bolt-elements-borderColor","[&::-webkit-scrollbar-thumb]:hover:bg-[#4d6a8f]/50","[&::-webkit-scrollbar-thumb]:rounded-full","[&::-webkit-scrollbar-track]:bg-transparent"),children:F.length===0?p.jsxs("div",{className:"px-4 py-6 text-center",children:[p.jsx("div",{className:"text-bolt-elements-textTertiary text-sm mb-1",children:_?`No ${m}s match "${_}"`:`No ${m}s found`}),_&&p.jsx("div",{className:"text-xs text-bolt-elements-textTertiary",children:"Try a different search term"})]}):m==="provider"?D.map((L,O)=>p.jsxs("div",{ref:$=>I.current[O]=$,role:"option","aria-selected":r?.name===L.name,className:ye("px-4 py-3 cursor-pointer transition-all","flex items-center gap-3",r?.name===L.name?"bg-[#1e3a5f]/20 text-[#8badd4]":"text-bolt-elements-textPrimary hover:bg-[#1a2332]",w===O?"ring-1 ring-inset ring-[#4d6a8f]/50 bg-[#1a2332]":""),onClick:$=>{$.stopPropagation(),n?.(L);const H=s.find(U=>U.provider===L.name);H&&e?.(H.name),g("model"),v(""),S(-1)},tabIndex:w===O?0:-1,children:[p.jsx("span",{className:"i-ph:cube text-lg"}),p.jsx("span",{className:"text-sm",dangerouslySetInnerHTML:{__html:L.highlightedName||L.name}}),r?.name===L.name&&p.jsx("span",{className:"i-ph:check ml-auto text-[#8badd4]"})]},L.name)):R.map((L,O)=>p.jsx("div",{ref:$=>I.current[O]=$,role:"option","aria-selected":t===L.name?"true":"false",className:ye("px-4 py-3 cursor-pointer transition-all",t===L.name?"bg-[#1e3a5f]/20 text-[#8badd4]":"text-bolt-elements-textPrimary hover:bg-[#1a2332]",w===O?"ring-1 ring-inset ring-[#4d6a8f]/50 bg-[#1a2332]":""),onClick:$=>{$.stopPropagation(),e?.(L.name),b(!1),v("")},tabIndex:w===O?0:-1,children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"i-ph:brain text-lg flex-shrink-0"}),p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsx("div",{className:"text-sm truncate",dangerouslySetInnerHTML:{__html:L.highlightedLabel||L.label}}),L.maxTokenAllowed>0&&p.jsxs("div",{className:"text-xs text-bolt-elements-textTertiary mt-0.5",children:[wM(L.maxTokenAllowed)," context"]})]}),SM(L,r?.name)&&p.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-green-500/20 text-green-400 flex-shrink-0",children:"Free"}),t===L.name&&p.jsx("span",{className:"i-ph:check text-[#8badd4] flex-shrink-0"})]})},L.name))}),p.jsx("div",{className:"px-4 py-2 border-t border-bolt-elements-borderColor/50 bg-[#0b0d13]",children:p.jsxs("div",{className:"flex items-center justify-between text-xs text-bolt-elements-textTertiary",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-[#1a2332] border border-bolt-elements-borderColor",children:""}),"navigate"]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-[#1a2332] border border-bolt-elements-borderColor",children:"Tab"}),"switch"]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-[#1a2332] border border-bolt-elements-borderColor",children:""}),"select"]})]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-[#1a2332] border border-bolt-elements-borderColor",children:"Esc"}),"close"]})]})})]})]})},zFe=({files:t,imageDataList:e,onRemove:r})=>!t||t.length===0?null:p.jsx("div",{className:"flex flex-row overflow-x-auto mx-2 -mt-1 p-2 bg-bolt-elements-background-depth-3 border border-b-none border-bolt-elements-borderColor rounded-lg rounded-b-none",children:t.map((n,s)=>p.jsx("div",{className:"mr-2 relative",children:e[s]&&p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:e[s],alt:n.name,className:"max-h-20 rounded-lg"}),p.jsx("button",{onClick:()=>r(s),className:"absolute -top-1 -right-1 z-10 bg-black rounded-full w-5 h-5 shadow-md hover:bg-gray-900 transition-colors flex items-center justify-center",children:p.jsx("div",{className:"i-ph:x w-3 h-3 text-gray-200"})}),p.jsx("div",{className:"absolute bottom-0 w-full h-5 flex items-center px-2 rounded-b-lg text-bolt-elements-textTertiary font-thin text-xs bg-bolt-elements-background-depth-2",children:p.jsx("span",{className:"truncate",children:n.name})})]})},n.name+n.size))}),WFe=Oc(.4,0,.2,1),VFe=({show:t,isStreaming:e,disabled:r,onClick:n})=>p.jsx(Nr,{children:t?p.jsx(rt.button,{className:"absolute flex justify-center items-center top-[18px] right-[22px] p-1 bg-accent-500 hover:brightness-94 color-white rounded-md w-[34px] h-[34px] transition-theme disabled:opacity-50 disabled:cursor-not-allowed",transition:{ease:WFe,duration:.17},initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},disabled:r,onClick:s=>{s.preventDefault(),r||n?.(s)},children:p.jsx("div",{className:"text-lg",children:e?p.jsx("div",{className:"i-ph:stop-circle-bold"}):p.jsx("div",{className:"i-ph:arrow-right"})})}):null}),GFe=({isListening:t,onStart:e,onStop:r,disabled:n})=>p.jsx(Kt,{title:t?"Stop listening":"Start speech recognition",disabled:n,className:ye("transition-all",{"text-bolt-elements-item-contentAccent":t}),onClick:t?r:e,children:t?p.jsx("div",{className:"i-ph:microphone-slash text-xl"}):p.jsx("div",{className:"i-ph:microphone text-xl"})});function qFe(){const{connection:t,connecting:e,fetchingStats:r,isProjectsExpanded:n,setIsProjectsExpanded:s,isDropdownOpen:i,setIsDropdownOpen:o,handleConnect:a,handleDisconnect:l,selectProject:c,handleCreateProject:u,updateToken:d,isConnected:h,fetchProjectApiKeys:f}=Jde(),b=He(zn);return k.useEffect(()=>{const m=()=>{o(!0)};return document.addEventListener("open-supabase-connection",m),()=>{document.removeEventListener("open-supabase-connection",m)}},[o]),k.useEffect(()=>{if(h&&b){const m=localStorage.getItem(`supabase-project-${b}`);!m&&t.selectedProjectId?localStorage.setItem(`supabase-project-${b}`,t.selectedProjectId):m&&m!==t.selectedProjectId&&c(m)}},[h,b]),k.useEffect(()=>{b&&t.selectedProjectId?localStorage.setItem(`supabase-project-${b}`,t.selectedProjectId):b&&!t.selectedProjectId&&localStorage.removeItem(`supabase-project-${b}`)},[b,t.selectedProjectId]),k.useEffect(()=>{h&&t.token&&$b(t.token).catch(console.error)},[h,t.token]),k.useEffect(()=>{h&&t.selectedProjectId&&t.token&&!t.credentials&&f(t.selectedProjectId).catch(console.error)},[h,t.selectedProjectId,t.token,t.credentials]),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden mr-2 text-sm",children:p.jsxs(KFe,{active:!0,disabled:e,onClick:()=>o(!i),className:"hover:bg-bolt-elements-item-backgroundActive !text-white flex items-center gap-2",children:[p.jsx("img",{className:"w-4 h-4",height:"20",width:"20",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/supabase"}),h&&t.project&&p.jsx("span",{className:"ml-1 text-xs max-w-[100px] truncate",children:t.project.name})]})}),p.jsx(Ii,{open:i,onOpenChange:o,children:i&&p.jsx(vl,{className:"max-w-[520px] p-6",children:h?p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"flex items-center justify-between mb-2",children:p.jsxs(Ci,{children:[p.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/supabase"}),"Supabase Connection"]})}),p.jsx("div",{className:"flex items-center gap-4 p-3 bg-[#F8F8F8] dark:bg-[#1a2332] rounded-lg",children:p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:t.user?.email}),p.jsxs("p",{className:"text-xs text-bolt-elements-textSecondary",children:["Role: ",t.user?.role]})]})}),r?p.jsxs("div",{className:"flex items-center gap-2 text-sm text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),"Fetching projects..."]}):p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("button",{onClick:()=>s(!n),className:"bg-transparent text-left text-sm font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:database w-4 h-4"}),"Your Projects (",t.stats?.totalProjects||0,")",p.jsx("div",{className:ye("i-ph:caret-down w-4 h-4 transition-transform",n?"rotate-180":"")})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:()=>$b(t.token),className:"px-2 py-1 rounded-md text-xs bg-[#F0F0F0] dark:bg-[#252525] text-bolt-elements-textSecondary hover:bg-[#E5E5E5] dark:hover:bg-[#333333] flex items-center gap-1",title:"Refresh projects list",children:[p.jsx("div",{className:"i-ph:arrows-clockwise w-3 h-3"}),"Refresh"]}),p.jsxs("button",{onClick:()=>u(),className:"px-2 py-1 rounded-md text-xs bg-[#3ECF8E] text-white hover:bg-[#3BBF84] flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:plus w-3 h-3"}),"New Project"]})]})]}),n&&p.jsxs(p.Fragment,{children:[!t.selectedProjectId&&p.jsx("div",{className:"mb-2 p-3 bg-[#F8F8F8] dark:bg-[#1a2332] rounded-lg text-sm text-bolt-elements-textSecondary",children:"Select a project or create a new one for this chat"}),t.stats?.projects?.length?p.jsx("div",{className:"grid gap-2 max-h-60 overflow-y-auto",children:t.stats.projects.map(m=>p.jsx("div",{className:"block p-3 rounded-lg border border-[#E5E5E5] dark:border-[#1a2332] hover:border-[#3ECF8E] dark:hover:border-[#3ECF8E] transition-colors",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:database w-3 h-3 text-[#3ECF8E]"}),m.name]}),p.jsx("div",{className:"text-xs text-bolt-elements-textSecondary mt-1",children:m.region})]}),p.jsx("button",{onClick:()=>c(m.id),className:ye("px-3 py-1 rounded-md text-xs",t.selectedProjectId===m.id?"bg-[#3ECF8E] text-white":"bg-[#F0F0F0] dark:bg-[#252525] text-bolt-elements-textSecondary hover:bg-[#3ECF8E] hover:text-white"),children:t.selectedProjectId===m.id?p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:check w-3 h-3"}),"Selected"]}):"Select"})]})},m.id))}):p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:info w-4 h-4"}),"No projects found"]})]})]}),p.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[p.jsx(Bf,{asChild:!0,children:p.jsx(Ha,{type:"secondary",children:"Close"})}),p.jsxs(Ha,{type:"danger",onClick:l,children:[p.jsx("div",{className:"i-ph:plugs w-4 h-4"}),"Disconnect"]})]})]}):p.jsxs("div",{className:"space-y-4",children:[p.jsxs(Ci,{children:[p.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/supabase"}),"Connect to Supabase"]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Access Token"}),p.jsx("input",{type:"password",value:t.token,onChange:m=>d(m.target.value),disabled:e,placeholder:"Enter your Supabase access token",className:ye("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1a2332]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-[#3ECF8E]","disabled:opacity-50")}),p.jsx("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:p.jsxs("a",{href:"https://app.supabase.com/account/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-[#3ECF8E] hover:underline inline-flex items-center gap-1",children:["Get your token",p.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})]})})]}),p.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[p.jsx(Bf,{asChild:!0,children:p.jsx(Ha,{type:"secondary",children:"Cancel"})}),p.jsx("button",{onClick:a,disabled:e||!t.token,className:ye("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-[#3ECF8E] text-white","hover:bg-[#3BBF84]","disabled:opacity-50 disabled:cursor-not-allowed"),children:e?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})})]})]})})})]})}function KFe({active:t=!1,disabled:e=!1,children:r,onClick:n,className:s}){return p.jsx("button",{className:ye("flex items-center p-1.5",{"bg-bolt-elements-item-backgroundDefault hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!t,"bg-bolt-elements-item-backgroundDefault text-bolt-elements-item-contentAccent":t&&!e,"bg-bolt-elements-item-backgroundDefault text-alpha-gray-20 dark:text-alpha-white-20 cursor-not-allowed":e},s),onClick:n,children:r})}const os={palette:{primary:"#9E7FFF",secondary:"#38bdf8",accent:"#f472b6",background:"#171717",surface:"#262626",text:"#FFFFFF",textSecondary:"#A3A3A3",border:"#2F2F2F",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},features:["rounded"],font:["sans-serif"]},YFe=[{key:"primary",label:"Primary",description:"Main brand color - use for primary buttons, active links, and key interactive elements"},{key:"secondary",label:"Secondary",description:"Supporting brand color - use for secondary buttons, inactive states, and complementary elements"},{key:"accent",label:"Accent",description:"Highlight color - use for badges, notifications, focus states, and call-to-action elements"},{key:"background",label:"Background",description:"Page backdrop - use for the main application/website background behind all content"},{key:"surface",label:"Surface",description:"Elevated content areas - use for cards, modals, dropdowns, and panels that sit above the background"},{key:"text",label:"Text",description:"Primary text - use for headings, body text, and main readable content"},{key:"textSecondary",label:"Text Secondary",description:"Muted text - use for captions, placeholders, timestamps, and less important information"},{key:"border",label:"Border",description:"Separators - use for input borders, dividers, table lines, and element outlines"},{key:"success",label:"Success",description:"Positive feedback - use for success messages, completed states, and positive indicators"},{key:"warning",label:"Warning",description:"Caution alerts - use for warning messages, pending states, and attention-needed indicators"},{key:"error",label:"Error",description:"Error states - use for error messages, failed states, and destructive action indicators"}],XFe=[{key:"rounded",label:"Rounded Corners"},{key:"border",label:"Subtle Border"},{key:"gradient",label:"Gradient Accent"},{key:"shadow",label:"Soft Shadow"},{key:"frosted-glass",label:"Frosted Glass"}],JFe=[{key:"sans-serif",label:"Sans Serif",preview:"Aa"},{key:"serif",label:"Serif",preview:"Aa"},{key:"monospace",label:"Monospace",preview:"Aa"},{key:"cursive",label:"Cursive",preview:"Aa"},{key:"fantasy",label:"Fantasy",preview:"Aa"}],kq=k.forwardRef(({className:t,type:e,...r},n)=>p.jsx("input",{type:e,className:ye("flex h-10 w-full rounded-md border border-bolt-elements-border bg-bolt-elements-background px-3 py-2 text-sm ring-offset-bolt-elements-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-bolt-elements-textSecondary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-bolt-elements-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));kq.displayName="Input";const Aq=k.forwardRef(({className:t,onClear:e,showClearButton:r=!0,iconClassName:n,containerClassName:s,loading:i=!1,...o},a)=>{const l=!!o.value;return p.jsxs("div",{className:ye("relative flex items-center w-full",s),children:[p.jsx("div",{className:ye("absolute left-3 top-1/2 -translate-y-1/2 text-bolt-elements-textTertiary",n),children:i?p.jsx("span",{className:"i-ph:spinner-gap animate-spin w-4 h-4"}):p.jsx("span",{className:"i-ph:magnifying-glass w-4 h-4"})}),p.jsx(kq,{ref:a,className:ye("pl-10",l&&r?"pr-10":"",t),...o}),p.jsx(Nr,{children:l&&r&&p.jsx(rt.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},type:"button",onClick:e,className:"absolute right-3 top-1/2 -translate-y-1/2 text-bolt-elements-textTertiary hover:text-bolt-elements-textSecondary p-1 rounded-full hover:bg-bolt-elements-background-depth-2","aria-label":"Clear search",children:p.jsx("span",{className:"i-ph:x w-3.5 h-3.5"})})})]})});Aq.displayName="SearchInput";const Rq=k.memo(({asset:t,selected:e=!1,onSelect:r,compact:n=!1})=>{const[s,i]=k.useState(!1),[o,a]=k.useState(!1),[l,c]=k.useState(!1),u=k.useCallback(()=>{r&&r(t)},[t,r]),d=k.useCallback(h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),u())},[u]);return p.jsxs(rt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:ye("group relative rounded-lg border cursor-pointer transition-all duration-200","bg-bolt-elements-background-depth-2 hover:bg-bolt-elements-background-depth-3",e?"border-purple-500 ring-2 ring-purple-500/30":"border-bolt-elements-borderColor hover:border-purple-400",n?"p-2":"p-3"),onClick:u,onKeyDown:d,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),role:"button",tabIndex:0,"aria-pressed":e,"aria-label":`Select ${t.name}`,children:[p.jsxs("div",{className:ye("relative rounded-md overflow-hidden bg-bolt-elements-background-depth-1","flex items-center justify-center",n?"h-16 mb-2":"h-24 mb-3"),children:[t.thumbnailUrl&&!l?p.jsx("img",{src:t.thumbnailUrl,alt:t.name,className:ye("w-full h-full object-cover transition-opacity duration-300",o?"opacity-100":"opacity-0"),onLoad:()=>a(!0),onError:()=>c(!0)}):null,(!t.thumbnailUrl||l||!o)&&p.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-bolt-elements-textTertiary",children:[p.jsx("span",{className:ye("i-ph:cube-duotone",n?"w-6 h-6":"w-8 h-8")}),!n&&p.jsx("span",{className:"text-xs mt-1 opacity-60",children:"3D Preview"})]}),t.interactive&&p.jsxs("div",{className:"absolute top-1 right-1 bg-purple-500/80 text-white text-xs px-1.5 py-0.5 rounded-full flex items-center gap-1",children:[p.jsx("span",{className:"i-ph:cursor-click w-3 h-3"}),!n&&p.jsx("span",{children:"Interactive"})]}),p.jsx(rt.div,{initial:{opacity:0},animate:{opacity:s?1:0},className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end justify-center pb-2",children:p.jsx("span",{className:"text-white text-xs font-medium",children:"Click to select"})})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("h4",{className:ye("font-medium text-bolt-elements-textPrimary truncate",n?"text-xs":"text-sm"),children:t.name}),!n&&p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary line-clamp-2",children:t.description}),!n&&t.tags.length>0&&p.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[t.tags.slice(0,3).map(h=>p.jsx("span",{className:"text-xs bg-bolt-elements-background-depth-1 text-bolt-elements-textTertiary px-1.5 py-0.5 rounded",children:h},h)),t.tags.length>3&&p.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary",children:["+",t.tags.length-3]})]})]}),e&&p.jsx("div",{className:"absolute top-2 left-2 bg-purple-500 text-white rounded-full p-0.5",children:p.jsx("span",{className:"i-ph:check-bold w-3 h-3"})})]})});Rq.displayName="SplineAssetCard";const v2=[{id:"interactive-cube",name:"Interactive Cube",description:"A colorful interactive 3D cube that responds to mouse movement. Great for testing and simple decorative elements.",category:"abstract",sceneUrl:"https://prod.spline.design/6Wq1Q7YGyM-iab9i/scene.splinecode",tags:["cube","interactive","colorful","simple","example","beginner"],verified:!0,verifiedDate:"2026-01-23",license:"CC0",interactive:!0,keywords:["cube","box","3d shape","interactive","hover effect","simple 3d","demo"]},{id:"abstract-shapes",name:"Abstract Shapes",description:"A collection of floating abstract 3D shapes with smooth animations. Perfect for hero sections and backgrounds.",category:"abstract",sceneUrl:"https://prod.spline.design/KFonZGtsoUXP-qx7/scene.splinecode",tags:["abstract","shapes","floating","hero","background","animated"],verified:!0,verifiedDate:"2026-01-23",license:"CC0",interactive:!1,keywords:["abstract","geometric","floating","hero section","background","modern","minimal"]},{id:"3d-dashboard-hero",name:"3D Dashboard Hero",description:"A sleek 3D scene designed for dashboard hero sections. Modern and professional look with subtle animations.",category:"ui-elements",sceneUrl:"https://prod.spline.design/i8eNphGELT2tDQVT/scene.splinecode",tags:["dashboard","hero","ui","modern","professional","business"],verified:!0,verifiedDate:"2026-01-23",license:"CC0",interactive:!0,keywords:["dashboard","hero section","ui design","saas","startup","landing page","business"]}];function EM(){return v2.filter(t=>t.verified)}function ZFe(t){return v2.filter(e=>e.category===t&&e.verified)}function QFe(t){const e=t.toLowerCase();return v2.filter(r=>r.verified?r.name.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)||r.tags.some(n=>n.toLowerCase().includes(e))||r.keywords?.some(n=>n.toLowerCase().includes(e))||r.category.toLowerCase().includes(e):!1)}const Pq=k.memo(({onSelect:t,onCancel:e,selectedAssetId:r,compact:n=!1,className:s})=>{const[i,o]=k.useState(""),[a,l]=k.useState("all"),[c,u]=k.useState(null),d=k.useMemo(()=>{let y=EM();return a!=="all"&&(y=ZFe(a)),i.trim()&&(y=QFe(i),a!=="all"&&(y=y.filter(v=>v.category===a))),y},[i,a]),h=k.useMemo(()=>{const y=new Set;return EM().forEach(v=>y.add(v.category)),Array.from(y)},[]),f=k.useCallback(y=>{o(y.target.value)},[]),b=k.useCallback(()=>{o("")},[]),m=k.useCallback(y=>{l(y)},[]),g=k.useCallback(y=>{t(y)},[t]);return p.jsxs("div",{className:ye("flex flex-col",n?"gap-3":"gap-4",s),children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:ye("i-ph:cube-duotone text-purple-500",n?"w-4 h-4":"w-5 h-5")}),p.jsx("h3",{className:ye("font-semibold text-bolt-elements-textPrimary",n?"text-sm":"text-lg"),children:"Spline 3D Assets"}),p.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary bg-bolt-elements-background-depth-2 px-2 py-0.5 rounded-full",children:[d.length," available"]})]}),e&&p.jsx("button",{onClick:e,className:"text-bolt-elements-textTertiary hover:text-bolt-elements-textSecondary transition-colors p-1","aria-label":"Close picker",children:p.jsx("span",{className:"i-ph:x w-5 h-5"})})]}),p.jsxs("div",{className:ye("flex gap-3",n?"flex-col":"flex-row"),children:[p.jsx(Aq,{value:i,onChange:f,onClear:b,placeholder:"Search assets...",className:"flex-1"}),p.jsxs("div",{className:"flex gap-1.5 flex-wrap",children:[p.jsx("button",{onClick:()=>m("all"),className:ye("px-3 py-1.5 rounded-full text-xs font-medium transition-colors",a==="all"?"bg-purple-500 text-white":"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-background-depth-3"),children:"All"}),h.map(y=>p.jsx("button",{onClick:()=>m(y),className:ye("px-3 py-1.5 rounded-full text-xs font-medium transition-colors capitalize",a===y?"bg-purple-500 text-white":"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-background-depth-3"),children:y},y))]})]}),p.jsx("div",{className:ye("overflow-y-auto",n?"max-h-48":"max-h-80"),children:d.length>0?p.jsx("div",{className:ye("grid gap-3",n?"grid-cols-3 sm:grid-cols-4":"grid-cols-2 sm:grid-cols-3 lg:grid-cols-4"),children:p.jsx(Nr,{mode:"popLayout",children:d.map(y=>p.jsx(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},onMouseEnter:()=>u(y),onMouseLeave:()=>u(null),children:p.jsx(Rq,{asset:y,selected:y.id===r,onSelect:g,compact:n})},y.id))})}):p.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-bolt-elements-textTertiary",children:[p.jsx("span",{className:"i-ph:cube-transparent w-12 h-12 mb-2 opacity-50"}),p.jsx("p",{className:"text-sm",children:"No assets found"}),i&&p.jsx("button",{onClick:b,className:"text-purple-500 text-sm mt-2 hover:underline",children:"Clear search"})]})}),!n&&c&&p.jsx(rt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"w-12 h-12 rounded bg-bolt-elements-background-depth-1 flex items-center justify-center",children:p.jsx("span",{className:"i-ph:cube-duotone w-6 h-6 text-purple-500"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h4",{className:"font-medium text-bolt-elements-textPrimary text-sm",children:c.name}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:c.description}),p.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-bolt-elements-textTertiary",children:[c.interactive&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"i-ph:cursor-click w-3 h-3"})," Interactive"]}),p.jsx("span",{className:"capitalize",children:c.category})]})]})]})}),p.jsxs("div",{className:"text-xs text-bolt-elements-textTertiary flex items-center gap-1",children:[p.jsx("span",{className:"i-ph:info w-3 h-3"}),"Click an asset to add it to your project. All assets are verified to work."]})]})});Pq.displayName="SplineAssetPicker";const e6e=({setDesignScheme:t,designScheme:e})=>{const[r,n]=k.useState(()=>e?.palette?{...os.palette,...e.palette}:os.palette),[s,i]=k.useState(e?.features||os.features),[o,a]=k.useState(e?.font||os.font),[l,c]=k.useState(!1),[u,d]=k.useState("colors"),[h,f]=k.useState(null);k.useEffect(()=>{e?(n(()=>({...os.palette,...e.palette})),i(e.features||os.features),a(e.font||os.font)):(n(os.palette),i(os.features),a(os.font))},[e]);const b=(C,A)=>{n(I=>({...I,[C]:A}))},m=C=>{i(A=>A.includes(C)?A.filter(I=>I!==C):[...A,C])},g=C=>{a(A=>A.includes(C)?A.filter(I=>I!==C):[...A,C])},y=k.useCallback(C=>{f(C)},[]),v=k.useCallback(()=>{h&&navigator.clipboard.writeText(h.sceneUrl)},[h]),_=()=>{t?.({palette:r,features:s,font:o}),c(!1)},x=()=>{n(os.palette),i(os.features),a(os.font)},w=()=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary flex items-center gap-2",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-bolt-elements-item-contentAccent"}),"Color Palette"]}),p.jsxs("button",{onClick:x,className:"text-sm bg-transparent hover:bg-bolt-elements-bg-depth-2 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary rounded-lg flex items-center gap-2 transition-all duration-200",children:[p.jsx("span",{className:"i-ph:arrow-clockwise text-sm"}),"Reset"]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:YFe.map(C=>p.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-xl bg-bolt-elements-bg-depth-3 hover:bg-bolt-elements-bg-depth-2 border border-transparent hover:border-bolt-elements-borderColor transition-all duration-200",children:[p.jsxs("div",{className:"relative flex-shrink-0",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl shadow-md cursor-pointer transition-all duration-200 hover:scale-110 ring-2 ring-transparent hover:ring-bolt-elements-borderColorActive",style:{backgroundColor:r[C.key]},onClick:()=>document.getElementById(`color-input-${C.key}`)?.click(),role:"button",tabIndex:0,"aria-label":`Change ${C.label} color`}),p.jsx("input",{id:`color-input-${C.key}`,type:"color",value:r[C.key],onChange:A=>b(C.key,A.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",tabIndex:-1}),p.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-bolt-elements-bg-depth-1 rounded-full flex items-center justify-center shadow-sm",children:p.jsx("span",{className:"i-ph:pencil-simple text-xs text-bolt-elements-textSecondary"})})]}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"font-semibold text-bolt-elements-textPrimary transition-colors",children:C.label}),p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary line-clamp-2 leading-relaxed",children:C.description}),p.jsx("div",{className:"text-xs text-bolt-elements-textTertiary font-mono mt-1 px-2 py-1 bg-bolt-elements-bg-depth-1 rounded-md inline-block",children:r[C.key]})]})]},C.key))})]}),S=()=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary flex items-center gap-2",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-bolt-elements-item-contentAccent"}),"Typography"]}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:JFe.map(C=>p.jsx("button",{type:"button",onClick:()=>g(C.key),className:`group p-4 rounded-xl border-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColorActive ${o.includes(C.key)?"bg-bolt-elements-item-backgroundAccent border-bolt-elements-borderColorActive shadow-lg":"bg-bolt-elements-background-depth-3 border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive hover:bg-bolt-elements-bg-depth-2"}`,children:p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("div",{className:`text-2xl font-medium transition-colors ${o.includes(C.key)?"text-bolt-elements-item-contentAccent":"text-bolt-elements-textPrimary"}`,style:{fontFamily:C.key},children:C.preview}),p.jsx("div",{className:`text-sm font-medium transition-colors ${o.includes(C.key)?"text-bolt-elements-item-contentAccent":"text-bolt-elements-textSecondary"}`,children:C.label}),o.includes(C.key)&&p.jsx("div",{className:"w-6 h-6 mx-auto bg-bolt-elements-item-contentAccent rounded-full flex items-center justify-center",children:p.jsx("span",{className:"i-ph:check text-white text-sm"})})]})},C.key))})]}),T=()=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary flex items-center gap-2",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-bolt-elements-item-contentAccent"}),"Design Features"]}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:XFe.map(C=>{const A=s.includes(C.key);return p.jsx("div",{className:"feature-card-container p-2",children:p.jsx("button",{type:"button",onClick:()=>m(C.key),className:`group relative w-full p-6 text-sm font-medium transition-all duration-200 bg-bolt-elements-background-depth-3 text-bolt-elements-item-textSecondary ${C.key==="rounded"?A?"rounded-3xl":"rounded-xl":C.key==="border"?"rounded-lg":"rounded-xl"} ${C.key==="border"?A?"border-3 border-bolt-elements-borderColorActive bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":"border-2 border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive text-bolt-elements-textSecondary":C.key==="gradient"?"":A?"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent shadow-lg":"bg-bolt-elements-bg-depth-3 hover:bg-bolt-elements-bg-depth-2 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary"} ${C.key==="shadow"?A?"shadow-xl":"shadow-lg":"shadow-md"}`,style:{...C.key==="gradient"&&{background:A?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"var(--bolt-elements-bg-depth-3)",color:A?"white":"var(--bolt-elements-textSecondary)"}},children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsxs("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-bolt-elements-bg-depth-1 bg-opacity-20",children:[C.key==="rounded"&&p.jsx("div",{className:`w-6 h-6 bg-current transition-all duration-200 ${A?"rounded-full":"rounded"} opacity-80`}),C.key==="border"&&p.jsx("div",{className:`w-6 h-6 rounded-lg transition-all duration-200 ${A?"border-3 border-current opacity-90":"border-2 border-current opacity-70"}`}),C.key==="gradient"&&p.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-purple-400 via-pink-400 to-indigo-400 opacity-90"}),C.key==="shadow"&&p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:`w-6 h-6 bg-current rounded-lg transition-all duration-200 ${A?"opacity-90":"opacity-70"}`}),p.jsx("div",{className:`absolute top-1 left-1 w-6 h-6 bg-current rounded-lg transition-all duration-200 ${A?"opacity-40":"opacity-30"}`})]}),C.key==="frosted-glass"&&p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:`w-6 h-6 rounded-lg transition-all duration-200 backdrop-blur-sm bg-white/20 border border-white/30 ${A?"opacity-90":"opacity-70"}`}),p.jsx("div",{className:`absolute inset-0 w-6 h-6 rounded-lg transition-all duration-200 backdrop-blur-md bg-gradient-to-br from-white/10 to-transparent ${A?"opacity-60":"opacity-40"}`})]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-semibold",children:C.label}),A&&p.jsx("div",{className:"mt-2 w-8 h-1 bg-current rounded-full mx-auto opacity-60"})]})]})})},C.key)})})]}),E=()=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary flex items-center gap-2",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-bolt-elements-item-contentAccent"}),"3D Assets"]}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Browse and select pre-verified Spline 3D scenes to add to your project. These assets are tested and ready to use."}),p.jsx(Pq,{onSelect:y,selectedAssetId:h?.id,compact:!0}),h&&p.jsxs("div",{className:"p-4 rounded-xl bg-bolt-elements-bg-depth-3 border border-bolt-elements-borderColor",children:[p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h4",{className:"font-semibold text-bolt-elements-textPrimary",children:h.name}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-1",children:h.description}),p.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-bolt-elements-textTertiary",children:[h.interactive&&p.jsxs("span",{className:"flex items-center gap-1 bg-purple-500/20 text-purple-400 px-2 py-0.5 rounded-full",children:[p.jsx("span",{className:"i-ph:cursor-click w-3 h-3"})," Interactive"]}),p.jsx("span",{className:"capitalize bg-bolt-elements-bg-depth-1 px-2 py-0.5 rounded-full",children:h.category})]})]}),p.jsxs(Rt,{variant:"secondary",onClick:v,className:"flex-shrink-0",children:[p.jsx("span",{className:"i-ph:copy mr-1"}),"Copy URL"]})]}),p.jsx("div",{className:"mt-3 p-2 bg-bolt-elements-bg-depth-1 rounded-lg",children:p.jsx("code",{className:"text-xs text-bolt-elements-textSecondary break-all",children:h.sceneUrl})}),p.jsxs("p",{className:"text-xs text-bolt-elements-textTertiary mt-2",children:[' Tip: Ask Devonz to "add a 3D element using ',h.name,'" and it will use this asset!']})]})]});return p.jsxs("div",{children:[p.jsx(Kt,{title:"Design Palette",className:"transition-all",onClick:()=>c(!l),children:p.jsx("div",{className:"i-ph:palette text-xl"})}),p.jsx(Ii,{open:l,onOpenChange:c,children:p.jsx(vl,{children:p.jsxs("div",{className:"py-4 px-4 min-w-[480px] max-w-[90vw] max-h-[85vh] flex flex-col gap-6 overflow-hidden",children:[p.jsxs("div",{className:"",children:[p.jsx(Ci,{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:"Design Palette & Features"}),p.jsx(mc,{className:"text-bolt-elements-textSecondary leading-relaxed",children:"Customize your color palette, typography, and design features. These preferences will guide the AI in creating designs that match your style."})]}),p.jsx("div",{className:"flex gap-1 p-1 bg-bolt-elements-bg-depth-3 rounded-xl",children:[{key:"colors",label:"Colors",icon:"i-ph:palette"},{key:"typography",label:"Typography",icon:"i-ph:text-aa"},{key:"features",label:"Features",icon:"i-ph:magic-wand"},{key:"3d-assets",label:"3D Assets",icon:"i-ph:cube"}].map(C=>p.jsxs("button",{onClick:()=>d(C.key),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${u===C.key?"bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary shadow-md":"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary hover:bg-bolt-elements-bg-depth-2"}`,children:[p.jsx("span",{className:`${C.icon} text-lg`}),p.jsx("span",{children:C.label})]},C.key))}),p.jsxs("div",{className:" min-h-92 overflow-y-auto",children:[u==="colors"&&w(),u==="typography"&&S(),u==="features"&&T(),u==="3d-assets"&&E()]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary",children:[Object.keys(r).length," colors  ",o.length," fonts  ",s.length," features",h&&"  1 3D asset"]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx(Rt,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),p.jsx(Rt,{variant:"ghost",onClick:_,className:"bg-bolt-elements-button-primary-background hover:bg-bolt-elements-button-primary-backgroundHover text-bolt-elements-button-primary-text",children:"Save Changes"})]})]})]})})}),p.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: var(--bolt-elements-textTertiary) transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: var(--bolt-elements-textTertiary);
          border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background-color: var(--bolt-elements-textSecondary);
        }
        .line-clamp-2 {
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }
        .feature-card-container {
          min-height: 140px;
          display: flex;
          align-items: stretch;
        }
        .feature-card-container button {
          flex: 1;
        }
      `})]})},CM=t=>{let e;const r=new Set,n=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),r.forEach(f=>f(e,h))}},s=()=>e,a={setState:n,getState:s,getInitialState:()=>l,subscribe:c=>(r.add(c),()=>r.delete(c))},l=e=t(n,s,a);return a},t6e=t=>t?CM(t):CM,r6e=t=>t;function n6e(t,e=r6e){const r=Yr.useSyncExternalStore(t.subscribe,Yr.useCallback(()=>e(t.getState()),[t,e]),Yr.useCallback(()=>e(t.getInitialState()),[t,e]));return Yr.useDebugValue(r),r}const TM=t=>{const e=t6e(t),r=n=>n6e(e,n);return Object.assign(r,e),r},s6e=t=>t?TM(t):TM,D1="mcp_settings",kM=typeof window<"u",AM={maxLLMSteps:5,mcpConfig:{mcpServers:{}}},Kh=s6e((t,e)=>({isInitialized:!1,settings:AM,serverTools:{},error:null,isUpdatingConfig:!1,initialize:async()=>{if(!e().isInitialized){if(kM){const r=localStorage.getItem(D1);if(r)try{const n=JSON.parse(r),s=await RM(n.mcpConfig);t(()=>({settings:n,serverTools:s}))}catch(n){console.error("Error parsing saved mcp config:",n),t(()=>({error:`Error parsing saved mcp config: ${n instanceof Error?n.message:String(n)}`}))}else localStorage.setItem(D1,JSON.stringify(AM))}t(()=>({isInitialized:!0}))}},updateSettings:async r=>{if(!e().isUpdatingConfig)try{t(()=>({isUpdatingConfig:!0}));const n=await RM(r.mcpConfig);kM&&localStorage.setItem(D1,JSON.stringify(r)),t(()=>({settings:r,serverTools:n}))}catch(n){throw n}finally{t(()=>({isUpdatingConfig:!1}))}},checkServersAvailabilities:async()=>{const r=await fetch("/api/mcp-check",{method:"GET"});if(!r.ok)throw new Error(`Server responded with ${r.status}: ${r.statusText}`);const n=await r.json();t(()=>({serverTools:n}))}}));async function RM(t){const e=await fetch("/api/mcp-update-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Server responded with ${e.status}: ${e.statusText}`);return await e.json()}function PM({status:t}){const{styles:e,label:r,icon:n,ariaLabel:s}=k.useMemo(()=>{const i="px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1 transition-colors";return{checking:{styles:`${i} bg-blue-100 text-blue-800 dark:bg-blue-900/80 dark:text-blue-200`,label:"Checking...",ariaLabel:"Checking server status",icon:p.jsx("span",{className:"i-svg-spinners:90-ring-with-bg w-3 h-3 text-current animate-spin","aria-hidden":"true"})},available:{styles:`${i} bg-green-100 text-green-800 dark:bg-green-900/80 dark:text-green-200`,label:"Available",ariaLabel:"Server available",icon:p.jsx("span",{className:"i-ph:check-circle w-3 h-3 text-current","aria-hidden":"true"})},unavailable:{styles:`${i} bg-red-100 text-red-800 dark:bg-red-900/80 dark:text-red-200`,label:"Unavailable",ariaLabel:"Server unavailable",icon:p.jsx("span",{className:"i-ph:warning-circle w-3 h-3 text-current","aria-hidden":"true"})}}[t]},[t]);return p.jsxs("span",{className:e,role:"status","aria-live":"polite","aria-label":s,children:[n,r]})}function i6e({toolName:t,toolSchema:e}){if(!e)return null;const r=e.parameters?.jsonSchema.properties||{},n=e.parameters?.jsonSchema.required||[];return p.jsx("div",{className:"mt-2 ml-4 p-3 rounded-md bg-bolt-elements-background-depth-2 text-xs",children:p.jsxs("div",{className:"flex flex-col gap-1.5",children:[p.jsx("h3",{className:"text-bolt-elements-textPrimary font-semibold truncate",title:t,children:t}),p.jsx("p",{className:"text-bolt-elements-textSecondary",children:e.description||"No description available"}),Object.keys(r).length>0&&p.jsxs("div",{className:"mt-2.5",children:[p.jsx("h4",{className:"text-bolt-elements-textSecondary font-semibold mb-1.5",children:"Parameters:"}),p.jsx("ul",{className:"ml-1 space-y-2",children:Object.entries(r).map(([s,i])=>p.jsx("li",{className:"break-words",children:p.jsxs("div",{className:"flex items-start",children:[p.jsxs("span",{className:"font-medium text-bolt-elements-textPrimary",children:[s,n.includes(s)&&p.jsx("span",{className:"text-red-600 dark:text-red-400 ml-1",children:"*"})]}),p.jsx("span",{className:"mx-2 text-bolt-elements-textSecondary",children:""}),p.jsxs("div",{className:"flex-1",children:[i.type&&p.jsx("span",{className:"text-bolt-elements-textSecondary italic",children:i.type}),i.description&&p.jsx("div",{className:"mt-0.5 text-bolt-elements-textSecondary",children:i.description})]})]})},s))})]})]})})}function o6e({serverEntries:t,expandedServer:e,checkingServers:r,onlyShowAvailableServers:n=!1,toggleServerExpanded:s}){if(t.length===0)return p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"No MCP servers configured"});const i=n?t.filter(([,o])=>o.status==="available"):t;return p.jsx("div",{className:"space-y-2",children:i.map(([o,a])=>{const l=a.status==="available",c=e===o,u=l?Object.entries(a.tools):[];return p.jsxs("div",{className:"flex flex-col p-2 rounded-md bg-bolt-elements-background-depth-1",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[p.jsxs("div",{onClick:()=>s(o),className:"flex items-center gap-1.5 text-bolt-elements-textPrimary","aria-expanded":c,children:[p.jsx("div",{className:`i-ph:${c?"caret-down":"caret-right"} w-3 h-3 transition-transform duration-150`}),p.jsx("span",{className:"font-medium truncate text-left",children:o})]}),p.jsx("div",{className:"flex-1 min-w-0 truncate",children:a.config.type==="sse"||a.config.type==="streamable-http"?p.jsx("span",{className:"text-xs text-bolt-elements-textSecondary truncate",children:a.config.url}):p.jsxs("span",{className:"text-xs text-bolt-elements-textSecondary truncate",children:[a.config.command," ",a.config.args?.join(" ")]})})]}),p.jsx("div",{className:"ml-2 flex-shrink-0",children:r?p.jsx(PM,{status:"checking"}):p.jsx(PM,{status:l?"available":"unavailable"})})]}),!l&&a.error&&p.jsxs("div",{className:"mt-1.5 ml-6 text-xs text-red-600 dark:text-red-400",children:["Error: ",a.error]}),c&&l&&p.jsxs("div",{className:"mt-2",children:[p.jsx("div",{className:"text-bolt-elements-textSecondary text-xs font-medium ml-1 mb-1.5",children:"Available Tools:"}),u.length===0?p.jsx("div",{className:"ml-4 text-xs text-bolt-elements-textSecondary",children:"No tools available"}):p.jsx("div",{className:"mt-1 space-y-2",children:u.map(([d,h])=>p.jsx(i6e,{toolName:d,toolSchema:h},`${o}-${d}`))})]})]},o)})})}function a6e(){const t=Kh(g=>g.isInitialized),e=Kh(g=>g.serverTools),r=Kh(g=>g.initialize),n=Kh(g=>g.checkServersAvailabilities),[s,i]=k.useState(!1),[o,a]=k.useState(null),[l,c]=k.useState(!1),[u,d]=k.useState(null);k.useEffect(()=>{t||r()},[t]);const h=async()=>{c(!0),a(null);try{await n()}catch(g){a(`Failed to check server availability: ${g instanceof Error?g.message:String(g)}`)}finally{c(!1)}},f=g=>{d(u===g?null:g)},b=g=>{i(g)},m=k.useMemo(()=>Object.entries(e),[e]);return p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"flex",children:p.jsx(Kt,{onClick:()=>i(!s),title:"MCP Tools Available",disabled:!t,className:"transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:t?p.jsx("div",{className:"i-bolt:mcp text-xl"}):p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress text-xl animate-spin"})})}),p.jsx(Ii,{open:s,onOpenChange:b,children:s&&p.jsx(vl,{className:"max-w-4xl w-full p-6",children:p.jsxs("div",{className:"space-y-4 max-h-[80vh] overflow-y-auto pr-2",children:[p.jsxs(Ci,{children:[p.jsx("div",{className:"i-bolt:mcp text-xl"}),"MCP tools"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("div",{className:"flex justify-end items-center mb-2",children:p.jsxs("button",{onClick:h,disabled:l||m.length===0,className:ye("px-3 py-1.5 rounded-lg text-sm","bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-4","text-bolt-elements-textPrimary","transition-all duration-200","flex items-center gap-2","disabled:opacity-50 disabled:cursor-not-allowed"),children:[l?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg w-3 h-3 text-bolt-elements-loader-progress animate-spin"}):p.jsx("div",{className:"i-ph:arrow-counter-clockwise w-3 h-3"}),"Check availability"]})}),m.length>0?p.jsx(o6e,{checkingServers:l,expandedServer:u,serverEntries:m,onlyShowAvailableServers:!0,toggleServerExpanded:f}):p.jsxs("div",{className:"py-4 text-center text-bolt-elements-textSecondary",children:[p.jsx("p",{children:"No MCP servers configured"}),p.jsx("p",{className:"text-xs mt-1",children:"Configure servers in Settings  MCP Servers"})]})]}),p.jsx("div",{children:o&&p.jsx("p",{className:"mt-2 text-sm text-bolt-elements-icon-error",children:o})})]}),p.jsx("div",{className:"flex justify-end gap-2 mt-6",children:p.jsx("div",{className:"flex gap-2",children:p.jsx(Bf,{asChild:!0,children:p.jsx(Ha,{type:"secondary",children:"Close"})})})})]})})})]})}const l6e=t=>{const{t:e}=Ms(),[r,n]=k.useState(!1),{orchestratorSettings:s}=y2();return p.jsxs("div",{className:ye("relative p-4 rounded-xl w-full max-w-chat mx-auto z-prompt","border border-[#3d5a7f]/40","shadow-xl shadow-[#1e3a5f]/20","bg-[linear-gradient(145deg,rgba(30,58,95,0.15),rgba(26,26,26,0.95))] backdrop-blur-[24px]"),children:[p.jsx(Ii,{open:r,onOpenChange:n,children:p.jsxs(vl,{className:"w-[90vw] max-w-[500px] p-0 overflow-hidden",showCloseButton:!1,onBackdrop:()=>n(!1),children:[p.jsx(Ci,{className:"sr-only",children:e("chat.select_model_title","Select AI Model and Provider")}),p.jsx(mc,{className:"sr-only",children:e("chat.select_model_desc","Choose an AI provider and model for your chat session")}),p.jsx(HFe,{model:t.model,setModel:t.setModel,modelList:t.modelList,provider:t.provider,setProvider:t.setProvider,providerList:t.providerList||ev,apiKeys:t.apiKeys,modelLoading:t.isModelLoading,isOpen:r,onOpenChange:n,hideTrigger:!0},t.provider?.name+":"+t.modelList.length)]})}),p.jsxs("svg",{className:ye(Sf.PromptEffectContainer),children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"line-gradient",x1:"20%",y1:"0%",x2:"-14%",y2:"10%",gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(-45)",children:[p.jsx("stop",{offset:"0%",stopColor:"#3d5a7f",stopOpacity:"0%"}),p.jsx("stop",{offset:"40%",stopColor:"#3d5a7f",stopOpacity:"40%"}),p.jsx("stop",{offset:"50%",stopColor:"#4d6a8f",stopOpacity:"40%"}),p.jsx("stop",{offset:"100%",stopColor:"#3d5a7f",stopOpacity:"0%"})]}),p.jsxs("linearGradient",{id:"shine-gradient",children:[p.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0%"}),p.jsx("stop",{offset:"40%",stopColor:"#ffffff",stopOpacity:"40%"}),p.jsx("stop",{offset:"50%",stopColor:"#ffffff",stopOpacity:"40%"}),p.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0%"})]})]}),p.jsx("rect",{className:ye(Sf.PromptEffectLine),pathLength:"100",strokeLinecap:"round"}),p.jsx("rect",{className:ye(Sf.PromptShine),x:"48",y:"24",width:"70",height:"1"})]}),p.jsx(zFe,{files:t.uploadedFiles,imageDataList:t.imageDataList,onRemove:i=>{t.setUploadedFiles?.(t.uploadedFiles.filter((o,a)=>a!==i)),t.setImageDataList?.(t.imageDataList.filter((o,a)=>a!==i))}}),t.selectedElement&&p.jsxs("div",{className:"flex mx-1.5 gap-2 items-center justify-between rounded-lg rounded-b-none border border-b-none border-bolt-elements-borderColor text-bolt-elements-textPrimary flex py-1 px-2.5 font-medium text-xs",children:[p.jsxs("div",{className:"flex gap-2 items-center lowercase",children:[p.jsx("code",{className:"bg-accent-500 rounded-4px px-1.5 py-1 mr-0.5 text-white",children:t?.selectedElement?.tagName}),e("chat.selected_for_inspection","selected for inspection")]}),p.jsx("button",{className:"bg-transparent text-accent-500 pointer-auto",onClick:()=>t.setSelectedElement?.(null),children:e("chat.clear","Clear")})]}),p.jsxs("div",{className:ye("relative shadow-xs border border-bolt-elements-borderColor backdrop-blur rounded-lg"),children:[p.jsx("textarea",{ref:t.textareaRef,className:ye("w-full pl-4 pt-4 pr-16 outline-none resize-none text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary bg-transparent text-sm","transition-all duration-200","hover:border-bolt-elements-focus"),"aria-label":e("chat.input_label","Chat input"),onDragEnter:i=>{i.preventDefault(),i.currentTarget.classList.add("border-accent-500","border-2")},onDragOver:i=>{i.preventDefault()},onDragLeave:i=>{i.preventDefault(),i.currentTarget.classList.remove("border-accent-500","border-2")},onDrop:i=>{i.preventDefault(),i.currentTarget.classList.remove("border-accent-500","border-2"),Array.from(i.dataTransfer.files).forEach(a=>{if(a.type.startsWith("image/")){const l=new FileReader;l.onload=c=>{const u=c.target?.result;t.setUploadedFiles?.([...t.uploadedFiles,a]),t.setImageDataList?.([...t.imageDataList,u])},l.readAsDataURL(a)}})},onKeyDown:i=>{if(i.key==="Enter"){if(i.shiftKey)return;if(i.preventDefault(),t.isStreaming){t.handleStop?.();return}if(i.nativeEvent.isComposing)return;t.handleSendMessage?.(i)}},value:t.input,onChange:i=>{t.handleInputChange?.(i)},onPaste:t.handlePaste,style:{minHeight:t.TEXTAREA_MIN_HEIGHT,maxHeight:t.TEXTAREA_MAX_HEIGHT},placeholder:t.chatMode==="build"?e("chat.ask_build","Ask Devonz to build..."):e("chat.ask_discuss","What would you like to discuss?"),translate:"no"}),p.jsx(Yl,{children:()=>p.jsx(VFe,{show:t.input.length>0||t.isStreaming||t.uploadedFiles.length>0,isStreaming:t.isStreaming,disabled:!t.providerList||t.providerList.length===0,onClick:i=>{if(t.isStreaming){t.handleStop?.();return}(t.input.length>0||t.uploadedFiles.length>0)&&t.handleSendMessage?.(i)}})}),p.jsxs("div",{className:"flex justify-between items-center text-sm p-4 pt-2",children:[p.jsxs("div",{className:"flex gap-1 items-center",children:[p.jsx(e6e,{designScheme:t.designScheme,setDesignScheme:t.setDesignScheme}),p.jsx(a6e,{}),p.jsx(Kt,{title:e("chat.upload_file","Upload file"),className:"transition-all",onClick:()=>t.handleFileUpload(),children:p.jsx("div",{className:"i-ph:paperclip text-xl"})}),p.jsx(Kt,{title:e("chat.enhance_prompt","Enhance prompt"),disabled:t.input.length===0||t.enhancingPrompt,className:ye("transition-all",t.enhancingPrompt?"opacity-100":""),onClick:()=>{t.enhancePrompt?.(),Ie.success(e("chat.prompt_enhanced","Prompt enhanced!"))},children:t.enhancingPrompt?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress text-xl animate-spin"}):p.jsx("div",{className:"i-bolt:stars text-xl"})}),p.jsx(GFe,{isListening:t.isListening,onStart:t.startListening,onStop:t.stopListening,disabled:t.isStreaming}),t.chatStarted&&p.jsxs(Kt,{title:e("chat.discuss","Discuss"),className:ye("transition-all flex items-center gap-1 px-1.5",t.chatMode==="discuss"?"!bg-bolt-elements-item-backgroundAccent !text-bolt-elements-item-contentAccent":"bg-bolt-elements-item-backgroundDefault text-bolt-elements-item-contentDefault"),onClick:()=>{t.setChatMode?.(t.chatMode==="discuss"?"build":"discuss")},children:[p.jsx("div",{className:"i-ph:chats text-xl"}),t.chatMode==="discuss"?p.jsx("span",{children:e("chat.discuss","Discuss")}):p.jsx("span",{})]}),p.jsxs("div",{className:"flex items-center ml-1",children:[p.jsx(Kt,{title:e("chat.select_model","Select Model"),className:ye("transition-all flex items-center gap-1",{"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":r,"bg-bolt-elements-item-backgroundDefault text-bolt-elements-item-contentDefault":!r}),onClick:()=>n(!r),disabled:!t.providerList||t.providerList.length===0,children:p.jsx("div",{className:"i-ph:robot text-lg"})}),t.model&&p.jsxs("button",{onClick:()=>n(!0),className:"flex flex-col items-start ml-1.5 px-2 py-0.5 rounded-md bg-bolt-elements-item-backgroundDefault border border-bolt-elements-borderColor shadow-sm hover:bg-bolt-elements-item-backgroundActive transition-colors cursor-pointer",children:[p.jsx("span",{className:"text-[9px] uppercase font-bold text-bolt-elements-textTertiary leading-tight cursor-inherit",children:t.provider?.name||e("common.ai","AI")}),p.jsxs("div",{className:"flex items-center gap-1.5 leading-tight",children:[p.jsx("span",{className:"text-[10px] font-medium text-bolt-elements-textPrimary truncate max-w-[120px] cursor-inherit",children:t.model}),s.enabled&&p.jsx("span",{className:"text-[8px] font-black text-purple-400 uppercase tracking-tighter px-1 rounded bg-purple-500/10 border border-purple-500/20",children:e("chat.multi_agent","Multi-Agent")})]})]})]})]}),t.input.length>3?p.jsx("div",{className:"text-xs text-bolt-elements-textTertiary",dangerouslySetInnerHTML:{__html:e("chat.shift_return_new_line",'Use <kbd className="kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2">Shift</kbd> + <kbd className="kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2">Return</kbd> for a new line')}}):null,p.jsx(qFe,{}),p.jsx(a9,{open:t.qrModalOpen,onClose:()=>t.setQrModalOpen(!1)})]})]})]})};function c6e({alert:t,clearAlert:e}){const{title:r,description:n,provider:s,errorType:i}=t,o=()=>{switch(i){case"authentication":return"i-ph:key-duotone";case"rate_limit":return"i-ph:clock-duotone";case"quota":return"i-ph:warning-circle-duotone";default:return"i-ph:warning-duotone"}},a=()=>{switch(i){case"authentication":return`Authentication failed with ${s}. Please check your API key.`;case"rate_limit":return`Rate limit exceeded for ${s}. Please wait before retrying.`;case"quota":return`Quota exceeded for ${s}. Please check your account limits.`;default:return"An error occurred while processing your request."}};return p.jsx(Nr,{children:p.jsx(rt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-background-depth-2 p-4 mb-2",children:p.jsxs("div",{className:"flex items-start",children:[p.jsx(rt.div,{className:"flex-shrink-0",initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:p.jsx("div",{className:`${o()} text-xl text-bolt-elements-button-danger-text`})}),p.jsxs("div",{className:"ml-3 flex-1",children:[p.jsx(rt.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm font-medium text-bolt-elements-textPrimary",children:r}),p.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-2 text-sm text-bolt-elements-textSecondary",children:[p.jsx("p",{children:a()}),n&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary p-2 bg-bolt-elements-background-depth-3 rounded mt-4 mb-4",children:["Error Details: ",n]})]}),p.jsx(rt.div,{className:"mt-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:p.jsx("div",{className:"flex gap-2",children:p.jsx("button",{onClick:e,className:ye("px-2 py-1.5 rounded-md text-sm font-medium","bg-bolt-elements-button-secondary-background","hover:bg-bolt-elements-button-secondary-backgroundHover","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolt-elements-button-secondary-background","text-bolt-elements-button-secondary-text"),children:"Dismiss"})})})]})]})})})}const u6e=k.memo(({onResize:t,onResizeStart:e,onResizeEnd:r,disabled:n=!1,className:s})=>{const[i,o]=k.useState(!1),a=k.useRef(0),l=k.useCallback(u=>{n||(u.preventDefault(),a.current=u.clientX,o(!0),e?.())},[n,e]),c=k.useCallback(u=>{if(n)return;const d=u.touches[0];a.current=d.clientX,o(!0),e?.()},[n,e]);return k.useEffect(()=>{if(!i)return;const u=b=>{const m=b.clientX-a.current;a.current=b.clientX,t(m)},d=b=>{const m=b.touches[0],g=m.clientX-a.current;a.current=m.clientX,t(g)},h=()=>{o(!1),r?.()};return document.addEventListener("mousemove",u),document.addEventListener("mouseup",h),document.addEventListener("touchmove",d,{passive:!0}),document.addEventListener("touchend",h),document.addEventListener("touchcancel",h),document.body.style.cursor="col-resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",h),document.removeEventListener("touchcancel",h),document.body.style.cursor="",document.body.style.userSelect=""}},[i,t,r]),p.jsxs("div",{className:ye("flex-shrink-0 w-1 relative cursor-col-resize group hover:w-1 transition-all duration-150",{"opacity-50 cursor-not-allowed":n},s),onMouseDown:l,onTouchStart:c,onKeyDown:u=>{n||(u.key==="ArrowLeft"?(u.preventDefault(),t(-10)):u.key==="ArrowRight"&&(u.preventDefault(),t(10)))},role:"separator","aria-orientation":"vertical","aria-label":"Resize handle",tabIndex:n?-1:0,children:[p.jsx("div",{className:ye("absolute inset-y-0 left-1/2 -translate-x-1/2 w-[3px] rounded-full transition-all duration-150","bg-bolt-elements-borderColor",{"bg-accent-500 w-[4px]":i,"group-hover:bg-accent-500/70 group-hover:w-[4px]":!n&&!i})}),p.jsx("div",{className:"absolute inset-y-0 -left-2 -right-2"}),p.jsxs("div",{className:ye("absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","flex flex-col gap-1 opacity-0 transition-opacity duration-150",{"opacity-100":i,"group-hover:opacity-70":!n&&!i}),children:[p.jsx("div",{className:"w-1 h-1 rounded-full bg-accent-500"}),p.jsx("div",{className:"w-1 h-1 rounded-full bg-accent-500"}),p.jsx("div",{className:"w-1 h-1 rounded-full bg-accent-500"})]})]})}),Iq=k.memo(({status:t})=>{switch(t){case"completed":return p.jsx("span",{className:"text-green-500",children:""});case"in-progress":return p.jsx("span",{className:"text-blue-500 animate-pulse",children:""});default:return p.jsx("span",{className:"text-bolt-elements-textSecondary",children:""})}});Iq.displayName="StatusIcon";const Nq=k.memo(({onApprove:t,onReject:e,postMessage:r})=>{const n=He(ri),s=He(DF),i=k.useCallback(()=>{OF(),t?.(),r?.("Plan approved. Please proceed with the implementation.")},[t,r]),o=k.useCallback(()=>{LF(),e?.()},[e]),a=k.useCallback(()=>{r?.("I would like to modify the plan. Please adjust the following tasks before proceeding...")},[r]);return!n.isActive||n.tasks.length===0||n.approvedByUser?null:p.jsx(Nr,{children:p.jsxs(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:ye("rounded-lg border-2 border-blue-500/50 bg-blue-500/10","p-4 mb-4"),children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:list-checks-fill text-xl text-blue-500"}),p.jsx("h3",{className:"font-semibold text-bolt-elements-textPrimary",children:n.planTitle||"Implementation Plan"})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary",children:[n.tasks.length," tasks"]})})]}),p.jsx("div",{className:"space-y-1 mb-4 max-h-48 overflow-y-auto",children:n.tasks.map((l,c)=>p.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[p.jsxs("span",{className:"text-bolt-elements-textSecondary font-mono w-5",children:[c+1,"."]}),p.jsx(Iq,{status:l.status}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("span",{className:"text-bolt-elements-textPrimary",children:l.title}),l.description&&p.jsxs("span",{className:"text-bolt-elements-textSecondary text-xs ml-1",children:[" ",l.description]})]})]},l.id))}),s>0&&p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex justify-between text-xs text-bolt-elements-textSecondary mb-1",children:[p.jsx("span",{children:"Progress"}),p.jsxs("span",{children:[s,"%"]})]}),p.jsx(gA,{value:s})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Review the plan before execution"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:o,className:"text-red-500 hover:text-red-600 hover:bg-red-500/10",children:[p.jsx("div",{className:"i-ph:x-bold mr-1"}),"Cancel"]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:a,children:[p.jsx("div",{className:"i-ph:pencil-simple mr-1"}),"Modify"]}),p.jsxs(Rt,{variant:"default",size:"sm",onClick:i,className:"bg-green-600 hover:bg-green-700 text-white",children:[p.jsx("div",{className:"i-ph:check-bold mr-1"}),"Approve & Execute"]})]})]})]})})});Nq.displayName="PlanApprovalAlert";/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6e=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6e=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase());/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=t=>{const e=h6e(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f6e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6e=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6e=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>k.createElement("svg",{ref:l,...f6e,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Dq("lucide",s),...!i&&!p6e(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>k.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=(t,e)=>{const r=k.forwardRef(({className:n,...s},i)=>k.createElement(m6e,{ref:i,iconNode:e,className:Dq(`lucide-${d6e(IM(t))}`,`lucide-${t}`,n),...s}));return r.displayName=IM(t),r};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6e=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],O1=ji("activity",g6e);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6e=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],NM=ji("book-open",b6e);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],v6e=ji("check",y6e);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],x6e=ji("circle-check",_6e);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],S6e=ji("file-code",w6e);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6e=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],C6e=ji("git-commit-horizontal",E6e);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6e=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],k6e=ji("layers",T6e);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6e=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],R6e=ji("rotate-cw",A6e);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],I6e=ji("shield-check",P6e);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6e=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],D6e=ji("triangle-alert",N6e);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Oq=ji("x",O6e),L6e=({agent:t})=>{const e=r=>{switch(r){case"working":return"bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.6)] animate-pulse";case"done":return"bg-green-500";case"error":return"bg-red-500";default:return"bg-gray-400"}};return p.jsxs("div",{className:"flex items-center gap-2 bg-[#0A0A0A] border border-[#333] px-3 py-1.5 rounded-full text-xs",children:[p.jsx("div",{className:`w-2 h-2 rounded-full ${e(t.status)}`}),p.jsxs("div",{className:"flex flex-col",children:[p.jsxs("span",{className:"font-medium text-gray-200 uppercase tracking-wider text-[10px]",children:[t.agentId," ",p.jsx("span",{className:"text-gray-500 ml-1",children:t.model})]}),p.jsx("span",{className:"text-gray-400 truncate max-w-[120px]",children:t.currentTask||"Idle"})]})]})},M6e=({progress:t,stageLabel:e,iteration:r,activeAgents:n,stats:s,onToggleExpert:i,isExpertOpen:o})=>p.jsxs(rt.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"sticky top-0 z-50 w-full bg-[#111]/90 backdrop-blur-md border-b border-[#333] shadow-xl",children:[p.jsx("div",{className:"h-1 bg-[#222] w-full mt-14 absolute top-0",children:" "}),p.jsxs("div",{className:"flex flex-col gap-2 p-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-lg bg-[#222] border border-[#333]",children:t>=100?p.jsx(x6e,{className:"w-5 h-5 text-green-400"}):p.jsx(R6e,{className:"w-5 h-5 text-blue-400 animate-spin-slow"})}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h3",{className:"tex-sm font-semibold text-white tracking-wide",children:e}),r&&p.jsxs("span",{className:"text-xs bg-yellow-500/10 text-yellow-500 px-2 py-0.5 rounded border border-yellow-500/20",children:["Fix Loop ",r.current,"/",r.max]})]}),p.jsx("div",{className:"w-[300px] h-1.5 bg-[#222] rounded-full mt-1.5 overflow-hidden",children:p.jsx(rt.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500",initial:{width:0},animate:{width:`${t}%`},transition:{duration:.5}})})]})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[p.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400",title:"Files Touched",children:[p.jsx(k6e,{className:"w-3.5 h-3.5"}),p.jsx("span",{children:s.filesTouched})]}),p.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400",title:"QC Issues",children:[p.jsx(D6e,{className:`w-3.5 h-3.5 ${s.qcIssues.critical>0?"text-red-500":"text-gray-400"}`}),p.jsxs("div",{className:"flex gap-1",children:[s.qcIssues.critical>0&&p.jsxs("span",{className:"text-red-400 font-bold",children:[s.qcIssues.critical,"C"]}),s.qcIssues.high>0&&p.jsxs("span",{className:"text-orange-400",children:[s.qcIssues.high,"H"]}),s.qcIssues.critical===0&&s.qcIssues.high===0&&p.jsx("span",{children:"0 issues"})]})]})]}),p.jsx("button",{onClick:i,className:`px-3 py-1.5 rounded-md text-xs font-medium border transition-colors ${o?"bg-blue-500/10 text-blue-400 border-blue-500/30":"bg-[#222] text-gray-400 border-[#333] hover:text-white"}`,children:"Expert View"})]})]}),p.jsx("div",{className:"flex items-center gap-3 overflow-x-auto pb-1 no-scrollbar",children:n.map(a=>p.jsx(L6e,{agent:a},a.agentId))})]})]}),j6e=({isOpen:t,onClose:e,events:r,qcReport:n})=>{const[s,i]=k.useState("timeline"),{researchData:o,patchEvents:a,qcEvents:l}=Yr.useMemo(()=>{const c=[...r].reverse().find(h=>h.type==="artifact_ready"&&h.agent==="researcher"),u=r.filter(h=>h.type==="patch_applied"),d=r.filter(h=>h.type==="qc_issues_found"||h.type==="qc_passed"||h.type==="qc_failed");return{researchData:c?.details,patchEvents:u,qcEvents:d}},[r]);return t?p.jsxs(rt.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},className:"fixed top-0 right-0 h-full w-[500px] bg-[#0A0A0A] border-l border-[#333] shadow-2xl z-[60] flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#222]",children:[p.jsxs("h2",{className:"text-sm font-bold text-gray-200 flex items-center gap-2",children:[p.jsx(O1,{className:"w-4 h-4 text-blue-500"}),"RUN DETAILS (EXPERT)"]}),p.jsx("button",{onClick:e,className:"p-1 hover:bg-[#222] rounded text-gray-400",title:"Close",children:p.jsx(Oq,{className:"w-4 h-4"})})]}),p.jsx("div",{className:"flex border-b border-[#222]",children:[{id:"timeline",icon:O1,label:"Timeline"},{id:"qc",icon:I6e,label:"QC Report"},{id:"research",icon:NM,label:"Research"},{id:"changes",icon:C6e,label:"Changes"}].map(c=>p.jsxs("button",{onClick:()=>i(c.id),className:`flex-1 py-3 text-xs font-medium flex items-center justify-center gap-2 border-b-2 transition-colors ${s===c.id?"border-blue-500 text-blue-400 bg-blue-500/5":"border-transparent text-gray-500 hover:text-gray-300"}`,children:[p.jsx(c.icon,{className:"w-3.5 h-3.5"}),c.label]},c.id))}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[s==="timeline"&&p.jsxs("div",{className:"space-y-2",children:[r.map((c,u)=>p.jsxs("div",{className:"flex gap-3 text-xs p-2 hover:bg-[#111] rounded border border-transparent hover:border-[#222]",children:[p.jsx("span",{className:"text-gray-600 font-mono w-[60px]",children:new Date(c.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[p.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold uppercase
                                ${c.type==="error"?"bg-red-500/20 text-red-500":c.type==="qc_issues_found"?"bg-orange-500/20 text-orange-500":"bg-gray-800 text-gray-400"}`,children:c.type.replace("_"," ")}),p.jsx("span",{className:"text-gray-500",children:c.agent})]}),p.jsx("p",{className:"text-gray-300",children:c.summary})]})]},u)),r.length===0&&p.jsx("div",{className:"text-gray-600 text-center py-10",children:"No events recorded yet."})]}),s==="qc"&&p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-widest font-bold mb-2",children:"Issue List"}),l.length>0?l.map((c,u)=>p.jsxs("div",{className:"p-3 border border-[#222] bg-[#111] rounded space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs font-bold text-orange-400 capitalize",children:c.summary}),p.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(c.timestamp).toLocaleTimeString()})]}),c.details?.issues?.map((d,h)=>p.jsxs("div",{className:"text-xs text-gray-300 pl-2 border-l border-orange-500/30",children:[p.jsx("div",{className:"font-bold",children:d.title}),p.jsx("div",{className:"text-gray-500",children:d.description})]},h))]},u)):p.jsx("div",{className:"p-10 border border-dashed border-[#222] rounded text-gray-500 text-center text-sm",children:"No QC findings recorded yet."})]}),s==="research"&&p.jsx("div",{className:"space-y-6",children:o?p.jsxs(p.Fragment,{children:[o.techReality&&p.jsxs("section",{className:"space-y-2",children:[p.jsxs("h3",{className:"text-xs font-bold text-blue-400 flex items-center gap-2 uppercase tracking-tight",children:[p.jsx(NM,{className:"w-3 h-3"})," Tech Reality"]}),p.jsxs("div",{className:"p-3 bg-blue-500/5 border border-blue-500/20 rounded",children:[p.jsx("p",{className:"text-xs text-blue-100/70 mb-2",children:o.techReality.stackSummary}),p.jsx("ul",{className:"space-y-1",children:o.techReality.recommendedPins?.map((c,u)=>p.jsxs("li",{className:"text-[11px] text-gray-400",children:[p.jsxs("span",{className:"text-blue-300 font-mono",children:[c.name,"@",c.recommended]}),": ",c.reason]},u))})]})]}),o.codebaseAnalysis&&p.jsxs("section",{className:"space-y-2",children:[p.jsxs("h3",{className:"text-xs font-bold text-green-400 flex items-center gap-2 uppercase tracking-tight",children:[p.jsx(O1,{className:"w-3 h-3"})," Codebase Analysis"]}),p.jsxs("div",{className:"p-3 bg-green-500/5 border border-green-500/20 rounded",children:[p.jsx("p",{className:"text-xs text-green-100/70",children:o.codebaseAnalysis.architecturalNotes}),p.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:o.codebaseAnalysis.bottlenecks?.map((c,u)=>p.jsx("div",{className:"text-[10px] bg-red-500/10 text-red-400 px-2 py-1 rounded border border-red-500/20",children:c},u))})]})]})]}):p.jsx("div",{className:"text-gray-500 text-sm text-center py-10",children:"Research artifacts will appear here."})}),s==="changes"&&p.jsx("div",{className:"space-y-4",children:a.length>0?a.map((c,u)=>p.jsxs("div",{className:"p-3 border border-[#222] bg-[#111] rounded space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs font-bold text-gray-200",children:c.summary}),p.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(c.timestamp).toLocaleTimeString()})]}),p.jsxs("div",{className:"text-[10px] font-mono text-gray-500 bg-black/50 p-2 rounded max-h-[150px] overflow-y-auto",children:[c.details?.patchCount," file(s) modified"]})]},u)):p.jsx("div",{className:"text-gray-500 text-sm text-center py-10",children:"File changes will appear here."})})]})]}):null},F6e=({statusLines:t,stages:e,lastQC:r,onAction:n})=>p.jsxs("div",{className:"w-full max-w-3xl mx-auto my-4 bg-[#0A0A0A] border border-[#333] rounded-xl overflow-hidden shadow-lg",children:[p.jsxs("div",{className:"bg-[#111] p-4 border-b border-[#222]",children:[p.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Live Activity"}),p.jsxs("div",{className:"space-y-2 font-mono text-sm h-[80px] overflow-hidden",children:[t.length===0&&p.jsx("span",{className:"text-gray-600 italic",children:"Initializing..."}),t.map((s,i)=>p.jsxs(rt.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-start gap-2 text-gray-300",children:[p.jsx("span",{className:"text-blue-500 mt-1",children:""}),p.jsx("span",{children:s})]},i))]})]}),p.jsx("div",{className:"p-4 space-y-4",children:e.map((s,i)=>p.jsxs("div",{className:`flex gap-3 ${s.status==="pending"?"opacity-40":"opacity-100"}`,children:[p.jsxs("div",{className:"mt-1",children:[s.status==="completed"&&p.jsx("div",{className:"w-5 h-5 rounded-full bg-green-900/30 border border-green-500/50 flex items-center justify-center",children:p.jsx(v6e,{className:"w-3 h-3 text-green-400"})}),s.status==="running"&&p.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-blue-500 border-t-transparent animate-spin"}),s.status==="pending"&&p.jsx("div",{className:"w-5 h-5 rounded-full border border-gray-700"}),s.status==="failed"&&p.jsx("div",{className:"w-5 h-5 rounded-full bg-red-900/30 border border-red-500/50 flex items-center justify-center",children:p.jsx(Oq,{className:"w-3 h-3 text-red-400"})})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-medium text-gray-200",children:s.name}),s.summary&&p.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:s.summary})]})]},i))}),(r||n)&&p.jsxs("div",{className:"bg-[#111] p-3 border-t border-[#222] flex items-center justify-between",children:[r?p.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[p.jsx("span",{className:"text-gray-500 font-medium",children:"LATEST QC"}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("span",{className:`${r.critical>0?"text-red-400 font-bold":"text-gray-400"}`,children:[r.critical," Critical"]}),p.jsxs("span",{className:`${r.high>0?"text-orange-400":"text-gray-400"}`,children:[r.high," High"]}),p.jsxs("span",{className:"text-gray-400",children:[r.medium," Med"]})]})]}):p.jsx("div",{}),n&&p.jsx("div",{className:"flex gap-2",children:p.jsxs("button",{onClick:()=>n("view_changes"),className:"flex items-center gap-1.5 px-3 py-1.5 bg-[#222] hover:bg-[#333] border border-[#333] rounded text-xs text-gray-300 transition-colors",children:[p.jsx(S6e,{className:"w-3.5 h-3.5"})," Changes"]})})]})]}),B6e=76,$6e=k.memo(k.forwardRef(({textareaRef:t,messageRef:e,scrollRef:r,showChat:n=!0,chatStarted:s=!1,isStreaming:i=!1,onStreamingChange:o,model:a,setModel:l,provider:c,setProvider:u,providerList:d,input:h="",enhancingPrompt:f,handleInputChange:b,enhancePrompt:m,sendMessage:g,handleStop:y,importChat:v,exportChat:_,uploadedFiles:x=[],setUploadedFiles:w,imageDataList:S=[],setImageDataList:T,messages:E,actionAlert:C,clearAlert:A,deployAlert:I,clearDeployAlert:P,supabaseAlert:D,clearSupabaseAlert:R,llmErrorAlert:F,clearLlmErrorAlert:G,data:z,chatMode:K,setChatMode:L,append:O,designScheme:$,setDesignScheme:H,selectedElement:U,setSelectedElement:ee,addToolResult:X=()=>{throw new Error("addToolResult not implemented")},runUIState:ge},J)=>{const{t:j}=Ms(),Y=k.useMemo(()=>s?400:200,[s]),[Q,ie]=k.useState(VL()),[re,pe]=k.useState([]),[M,oe]=k.useState(!1),[le,q]=k.useState(!1),[V,ae]=k.useState(null),[xe,Te]=k.useState(""),[fe,ke]=k.useState(void 0),[Me,Re]=k.useState([]),de=He(Kf),be=He(Pe.showWorkbench),Se=He(Pe.workbenchWidth),[ze,Ye]=k.useState(!1),[ut,at]=k.useState(!1),[pt,er]=k.useState(!1),qt=k.useCallback(Ce=>{const Ve=Se-Ce;Pe.setWorkbenchWidth(Ve)},[Se]);k.useEffect(()=>{de&&Ye(!0)},[de]),k.useEffect(()=>{if(z){const Ce=z.filter(Ve=>typeof Ve=="object"&&Ve?.type==="progress");Re(Ce)}},[z]),k.useEffect(()=>{console.log(xe)},[xe]),k.useEffect(()=>{o?.(i)},[i,o]),k.useEffect(()=>{if(typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window)){const Ce=window.SpeechRecognition||window.webkitSpeechRecognition,Ve=new Ce;Ve.continuous=!0,Ve.interimResults=!0,Ve.onresult=ct=>{const Ke=Array.from(ct.results).map(mt=>mt[0]).map(mt=>mt.transcript).join("");Te(Ke),b&&b({target:{value:Ke}})},Ve.onerror=ct=>{console.error("Speech recognition error:",ct.error),q(!1)},ae(Ve)}},[]),k.useEffect(()=>{if(typeof window<"u"){let Ce={};try{Ce=VL(),ie(Ce)}catch(Ve){console.error("Error loading API keys from cookies:",Ve),Et.remove("apiKeys")}console.log("[BaseChat] Fetching model list..."),ke("all"),fetch("/api/models").then(Ve=>(console.log("[BaseChat] Model list response received:",Ve.status),Ve.json())).then(Ve=>{const ct=Ve;console.log("[BaseChat] Model list loaded, count:",ct.modelList?.length),pe(ct.modelList)}).catch(Ve=>{console.error("[BaseChat] Error fetching model list:",Ve)}).finally(()=>{console.log("[BaseChat] Model loading complete"),ke(void 0)})}},[d,c]);const Tt=k.useCallback(async(Ce,Ve)=>{const ct={...Q,[Ce]:Ve};ie(ct),Et.set("apiKeys",JSON.stringify(ct)),ke(Ce);let Ke=[];try{Ke=(await(await fetch(`/api/models/${encodeURIComponent(Ce)}`)).json()).modelList}catch(mt){console.error("Error loading dynamic models for:",Ce,mt)}pe(mt=>[...mt.filter(yt=>yt.provider!==Ce),...Ke]),ke(void 0)},[Q]),gr=k.useCallback(()=>{V&&(V.start(),q(!0))},[V]),ir=k.useCallback(()=>{V&&(V.stop(),q(!1))},[V]),Dr=k.useCallback((Ce,Ve)=>{g&&(g(Ce,Ve),ee?.(null),V&&(V.abort(),Te(""),q(!1),b&&b({target:{value:""}})))},[g,ee,V,b]),jn=k.useCallback(()=>{const Ce=document.createElement("input");Ce.type="file",Ce.accept="image/*",Ce.onchange=async Ve=>{const ct=Ve.target.files?.[0];if(ct){const Ke=new FileReader;Ke.onload=mt=>{const je=mt.target?.result;w?.([...x,ct]),T?.([...S,je])},Ke.readAsDataURL(ct)}},Ce.click()},[x,S,w,T]),Fn=k.useCallback(async Ce=>{const Ve=Ce.clipboardData?.items;if(Ve){for(const ct of Ve)if(ct.type.startsWith("image/")){Ce.preventDefault();const Ke=ct.getAsFile();if(Ke){const mt=new FileReader;mt.onload=je=>{const yt=je.target?.result;w?.([...x,Ke]),T?.([...S,yt])},mt.readAsDataURL(Ke)}break}}},[x,S,w,T]),Ee=p.jsxs("div",{ref:J,className:ye(Sf.BaseChat,"relative flex h-full w-full overflow-hidden"),"data-chat-visible":n,children:[p.jsx(Yl,{children:()=>p.jsx(Tfe,{})}),p.jsxs("div",{className:"flex flex-row w-full h-full overflow-hidden",children:[n&&p.jsxs("div",{className:ye(Sf.Chat,"flex flex-col flex-grow min-w-[300px] h-full",{"select-none":ut,"overflow-hidden":s,"overflow-y-auto":!s}),children:[ge&&p.jsx(M6e,{progress:ge.progress,stageLabel:ge.stageLabel,activeAgents:ge.activeAgents,iteration:ge.iteration,stats:ge.stats,onToggleExpert:()=>er(!pt),isExpertOpen:pt}),!s&&p.jsxs("div",{id:"intro",className:"mt-[8vh] max-w-2xl mx-auto text-center px-4 lg:px-0 relative",children:[p.jsx("div",{className:"liquid-metal-container",children:p.jsx("h1",{className:"liquid-metal-text",children:j("header.devonz","Devonz")})}),p.jsx("p",{className:"text-base lg:text-lg text-[#8badd4] animate-fade-in animation-delay-200",children:j("chat.intro_subtitle","Build anything with AI. Just describe what you want.")})]}),p.jsxs(NS,{className:ye("pt-6 px-2 sm:px-6 relative",{"h-full flex flex-col modern-scrollbar":s}),resize:"smooth",initial:"smooth",children:[p.jsxs(NS.Content,{className:"flex flex-col gap-4 relative ",children:[ge&&ge.statusLines.length>0&&p.jsx(F6e,{statusLines:ge.statusLines,stages:ge.runStages,lastQC:ge.stats.qcIssues}),p.jsx(Yl,{children:()=>s?p.jsx(wLe,{className:"flex flex-col w-full flex-1 max-w-chat pb-4 mx-auto z-1",messages:E,isStreaming:i,append:O,chatMode:K,setChatMode:L,provider:c,model:a,addToolResult:X},"messages-component"):null}),p.jsx(U6e,{})]}),p.jsxs("div",{className:ye("my-auto flex flex-col gap-2 w-full max-w-chat mx-auto z-prompt mb-6",{"sticky bottom-2":s}),children:[p.jsxs("div",{className:"flex flex-col gap-2",children:[I&&p.jsx(jFe,{alert:I,clearAlert:()=>P?.(),postMessage:Ce=>{g?.({},Ce),R?.()}}),D&&p.jsx($Fe,{alert:D,clearAlert:()=>R?.(),postMessage:Ce=>{g?.({},Ce),R?.()}}),C&&p.jsx(FFe,{alert:C,clearAlert:()=>A?.(),postMessage:Ce=>{g?.({},Ce),A?.()}}),F&&p.jsx(c6e,{alert:F,clearAlert:()=>G?.()}),p.jsx(Nq,{postMessage:Ce=>{g?.({},Ce)}})]}),Me&&p.jsx(BFe,{data:Me}),!s&&p.jsx("div",{className:"flex justify-center gap-3 mb-4 max-w-chat mx-auto w-full",children:p.jsx(PFe,{importChat:v})}),p.jsx("div",{className:"flex items-center justify-center gap-4 lg:gap-6 w-full",children:p.jsx("div",{className:"w-full max-w-chat",children:p.jsx(l6e,{isModelSettingsCollapsed:M,setIsModelSettingsCollapsed:oe,provider:c,setProvider:u,providerList:d||ev,model:a,setModel:l,modelList:re,apiKeys:Q,isModelLoading:fe,onApiKeysChange:Tt,uploadedFiles:x,setUploadedFiles:w,imageDataList:S,setImageDataList:T,textareaRef:t,input:h,handleInputChange:b,handlePaste:Fn,TEXTAREA_MIN_HEIGHT:B6e,TEXTAREA_MAX_HEIGHT:Y,isStreaming:i,handleStop:y,handleSendMessage:Dr,enhancingPrompt:f,enhancePrompt:m,isListening:le,startListening:gr,stopListening:ir,chatStarted:s,exportChat:_,qrModalOpen:ze,setQrModalOpen:Ye,handleFileUpload:jn,chatMode:K,setChatMode:L,designScheme:$,setDesignScheme:H,selectedElement:U,setSelectedElement:ee})})}),!s&&p.jsx("div",{className:"flex justify-center mt-4 max-w-chat mx-auto w-full",children:p.jsx(DFe,{})}),!s&&p.jsx("div",{className:"flex flex-col items-center gap-4 mt-4 max-w-chat mx-auto w-full",children:p.jsx(IFe,{sendMessage:(Ce,Ve)=>{if(i){y?.();return}Dr?.(Ce,Ve)}})})]})]}),!s&&p.jsx(Yl,{children:()=>p.jsx(OFe,{maxItems:10})})]}),s&&be&&n&&p.jsx(u6e,{onResize:qt,onResizeStart:()=>at(!0),onResizeEnd:()=>at(!1)}),p.jsx(Yl,{children:()=>p.jsx(r1e,{chatStarted:s,isStreaming:i,setSelectedElement:ee,width:n?Se:void 0,fullWidth:!n})})]}),p.jsx(j6e,{isOpen:pt,onClose:()=>er(!1),events:ge?.events||[],qcReport:ge?.lastQCReport})]});return p.jsx(uB,{delayDuration:200,children:Ee})}));function U6e(){const{t}=Ms(),{isAtBottom:e,scrollToBottom:r}=pB();return!e&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"sticky bottom-0 left-0 right-0 bg-gradient-to-t from-bolt-elements-background-depth-1 to-transparent h-20 z-10"}),p.jsxs("button",{className:"sticky z-50 bottom-0 left-0 right-0 text-4xl rounded-lg px-1.5 py-0.5 flex items-center justify-center mx-auto gap-2 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor text-bolt-elements-textPrimary text-sm",onClick:()=>r(),children:[t("chat.go_to_last_message","Go to last message"),p.jsx("span",{className:"i-ph:arrow-down animate-bounce"})]})]})}const Lq=0,Mq=1,jq=2,DM=3;var OM=Object.prototype.hasOwnProperty;function AC(t,e){var r,n;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&AC(t[n],e[n]););return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(OM.call(t,r)&&++n&&!OM.call(e,r)||!(r in e)||!AC(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}const Ko=new WeakMap,Jo=()=>{},Pn=Jo(),RC=Object,Lt=t=>t===Pn,lo=t=>typeof t=="function",ml=(t,e)=>({...t,...e}),Fq=t=>lo(t.then),L1={},b0={},_2="undefined",Hm=typeof window!=_2,PC=typeof document!=_2,H6e=Hm&&"Deno"in window,z6e=()=>Hm&&typeof window.requestAnimationFrame!=_2,Bq=(t,e)=>{const r=Ko.get(t);return[()=>!Lt(e)&&t.get(e)||L1,n=>{if(!Lt(e)){const s=t.get(e);e in b0||(b0[e]=s),r[5](e,ml(s,n),s||L1)}},r[6],()=>!Lt(e)&&e in b0?b0[e]:!Lt(e)&&t.get(e)||L1]};let IC=!0;const W6e=()=>IC,[NC,DC]=Hm&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Jo,Jo],V6e=()=>{const t=PC&&document.visibilityState;return Lt(t)||t!=="hidden"},G6e=t=>(PC&&document.addEventListener("visibilitychange",t),NC("focus",t),()=>{PC&&document.removeEventListener("visibilitychange",t),DC("focus",t)}),q6e=t=>{const e=()=>{IC=!0,t()},r=()=>{IC=!1};return NC("online",e),NC("offline",r),()=>{DC("online",e),DC("offline",r)}},K6e={isOnline:W6e,isVisible:V6e},Y6e={initFocus:G6e,initReconnect:q6e},LM=!Yr.useId,nd=!Hm||H6e,X6e=t=>z6e()?window.requestAnimationFrame(t):setTimeout(t,1),M1=nd?k.useEffect:k.useLayoutEffect,j1=typeof navigator<"u"&&navigator.connection,MM=!nd&&j1&&(["slow-2g","2g"].includes(j1.effectiveType)||j1.saveData),y0=new WeakMap,J6e=t=>RC.prototype.toString.call(t),F1=(t,e)=>t===`[object ${e}]`;let Z6e=0;const OC=t=>{const e=typeof t,r=J6e(t),n=F1(r,"Date"),s=F1(r,"RegExp"),i=F1(r,"Object");let o,a;if(RC(t)===t&&!n&&!s){if(o=y0.get(t),o)return o;if(o=++Z6e+"~",y0.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=OC(t[a])+",";y0.set(t,o)}if(i){o="#";const l=RC.keys(t).sort();for(;!Lt(a=l.pop());)Lt(t[a])||(o+=a+":"+OC(t[a])+",");y0.set(t,o)}}else o=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},x2=t=>{if(lo(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?OC(t):"",[t,e]};let Q6e=0;const LC=()=>++Q6e;async function $q(...t){const[e,r,n,s]=t,i=ml({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let l=i.optimisticData;const c=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(lo(r)){const h=r,f=[],b=e.keys();for(const m of b)!/^\$(inf|sub)\$/.test(m)&&h(e.get(m)._k)&&f.push(m);return Promise.all(f.map(d))}return d(r);async function d(h){const[f]=x2(h);if(!f)return;const[b,m]=Bq(e,f),[g,y,v,_]=Ko.get(e),x=()=>{const R=g[f];return(lo(i.revalidate)?i.revalidate(b().data,h):i.revalidate!==!1)&&(delete v[f],delete _[f],R&&R[0])?R[0](jq).then(()=>b().data):b().data};if(t.length<3)return x();let w=n,S,T=!1;const E=LC();y[f]=[E,0];const C=!Lt(l),A=b(),I=A.data,P=A._c,D=Lt(P)?I:P;if(C&&(l=lo(l)?l(D,I):l,m({data:l,_c:D})),lo(w))try{w=w(D)}catch(R){S=R,T=!0}if(w&&Fq(w))if(w=await w.catch(R=>{S=R,T=!0}),E!==y[f][0]){if(T)throw S;return w}else T&&C&&c(S)&&(o=!0,m({data:D,_c:Pn}));if(o&&!T)if(lo(o)){const R=o(w,D);m({data:R,error:Pn,_c:Pn})}else m({data:w,error:Pn,_c:Pn});if(y[f][1]=LC(),Promise.resolve(x()).then(()=>{m({_c:Pn})}),T){if(u)throw S;return}return w}}const jM=(t,e)=>{for(const r in t)t[r][0]&&t[r][0](e)},eBe=(t,e)=>{if(!Ko.has(t)){const r=ml(Y6e,e),n=Object.create(null),s=$q.bind(Pn,t);let i=Jo;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},l=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const b of f)b(d,h)},c=()=>{if(!Ko.has(t)&&(Ko.set(t,[n,Object.create(null),Object.create(null),Object.create(null),s,l,a]),!nd)){const u=r.initFocus(setTimeout.bind(Pn,jM.bind(Pn,n,Lq))),d=r.initReconnect(setTimeout.bind(Pn,jM.bind(Pn,n,Mq)));i=()=>{u&&u(),d&&d(),Ko.delete(t)}}};return c(),[t,s,c,i]}return[t,Ko.get(t)[4]]},tBe=(t,e,r,n,s)=>{const i=r.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*r.errorRetryInterval;!Lt(i)&&o>i||setTimeout(n,a,s)},rBe=AC,[Uq,nBe]=eBe(new Map),sBe=ml({onLoadingSlow:Jo,onSuccess:Jo,onError:Jo,onErrorRetry:tBe,onDiscarded:Jo,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:MM?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:MM?5e3:3e3,compare:rBe,isPaused:()=>!1,cache:Uq,mutate:nBe,fallback:{}},K6e),iBe=(t,e)=>{const r=ml(t,e);if(e){const{use:n,fallback:s}=t,{use:i,fallback:o}=e;n&&i&&(r.use=n.concat(i)),s&&o&&(r.fallback=ml(s,o))}return r},oBe=k.createContext({}),aBe="$inf$",Hq=Hm&&window.__SWR_DEVTOOLS_USE__,lBe=Hq?window.__SWR_DEVTOOLS_USE__:[],cBe=()=>{Hq&&(window.__SWR_DEVTOOLS_REACT__=Yr)},uBe=t=>lo(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],dBe=()=>{const t=k.useContext(oBe);return k.useMemo(()=>ml(sBe,t),[t])},hBe=t=>(e,r,n)=>t(e,r&&((...i)=>{const[o]=x2(e),[,,,a]=Ko.get(Uq);if(o.startsWith(aBe))return r(...i);const l=a[o];return Lt(l)?r(...i):(delete a[o],l)}),n),fBe=lBe.concat(hBe),pBe=t=>function(...r){const n=dBe(),[s,i,o]=uBe(r),a=iBe(n,o);let l=t;const{use:c}=a,u=(c||[]).concat(fBe);for(let d=u.length;d--;)l=u[d](l);return l(s,i||a.fetcher||null,a)},mBe=(t,e,r)=>{const n=e[t]||(e[t]=[]);return n.push(r),()=>{const s=n.indexOf(r);s>=0&&(n[s]=n[n.length-1],n.pop())}};cBe();const B1=Yr.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),$1={dedupe:!0},FM=Promise.resolve(Pn),gBe=()=>Jo,bBe=(t,e,r)=>{const{cache:n,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h,strictServerPrefetchWarning:f}=r,[b,m,g,y]=Ko.get(n),[v,_]=x2(t),x=k.useRef(!1),w=k.useRef(!1),S=k.useRef(v),T=k.useRef(e),E=k.useRef(r),C=()=>E.current,A=()=>C().isVisible()&&C().isOnline(),[I,P,D,R]=Bq(n,v),F=k.useRef({}).current,G=Lt(o)?Lt(r.fallback)?Pn:r.fallback[v]:o,z=(le,q)=>{for(const V in F){const ae=V;if(ae==="data"){if(!s(le[ae],q[ae])&&(!Lt(le[ae])||!s(ge,q[ae])))return!1}else if(q[ae]!==le[ae])return!1}return!0},K=!x.current,L=k.useMemo(()=>{const le=I(),q=R(),V=fe=>{const ke=ml(fe);return delete ke._k,(()=>{if(!v||!e||C().isPaused())return!1;if(K&&!Lt(a))return a;const Re=Lt(G)?ke.data:G;return Lt(Re)||l})()?{isValidating:!0,isLoading:!0,...ke}:ke},ae=V(le),xe=le===q?ae:V(q);let Te=ae;return[()=>{const fe=V(I());return z(fe,Te)?(Te.data=fe.data,Te.isLoading=fe.isLoading,Te.isValidating=fe.isValidating,Te.error=fe.error,Te):(Te=fe,fe)},()=>xe]},[n,v]),O=N2.useSyncExternalStore(k.useCallback(le=>D(v,(q,V)=>{z(V,q)||le()}),[n,v]),L[0],L[1]),$=b[v]&&b[v].length>0,H=O.data,U=Lt(H)?G&&Fq(G)?B1(G):G:H,ee=O.error,X=k.useRef(U),ge=h?Lt(H)?Lt(X.current)?U:X.current:H:U,J=v&&Lt(U),j=k.useRef(null);!nd&&N2.useSyncExternalStore(gBe,()=>(j.current=!1,j),()=>(j.current=!0,j));const Y=j.current;f&&Y&&!i&&J&&console.warn(`Missing pre-initiated data for serialized key "${v}" during server-side rendering. Data fetching should be initiated on the server and provided to SWR via fallback data. You can set "strictServerPrefetchWarning: false" to disable this warning.`);const Q=!v||!e||C().isPaused()||$&&!Lt(ee)?!1:K&&!Lt(a)?a:i?Lt(U)?!1:l:Lt(U)||l,ie=Lt(O.isValidating)?Q:O.isValidating,re=Lt(O.isLoading)?Q:O.isLoading,pe=k.useCallback(async le=>{const q=T.current;if(!v||!q||w.current||C().isPaused())return!1;let V,ae,xe=!0;const Te=le||{},fe=!g[v]||!Te.dedupe,ke=()=>LM?!w.current&&v===S.current&&x.current:v===S.current,Me={isValidating:!1,isLoading:!1},Re=()=>{P(Me)},de=()=>{const Se=g[v];Se&&Se[1]===ae&&delete g[v]},be={isValidating:!0};Lt(I().data)&&(be.isLoading=!0);try{if(fe&&(P(be),r.loadingTimeout&&Lt(I().data)&&setTimeout(()=>{xe&&ke()&&C().onLoadingSlow(v,r)},r.loadingTimeout),g[v]=[q(_),LC()]),[V,ae]=g[v],V=await V,fe&&setTimeout(de,r.dedupingInterval),!g[v]||g[v][1]!==ae)return fe&&ke()&&C().onDiscarded(v),!1;Me.error=Pn;const Se=m[v];if(!Lt(Se)&&(ae<=Se[0]||ae<=Se[1]||Se[1]===0))return Re(),fe&&ke()&&C().onDiscarded(v),!1;const ze=I().data;Me.data=s(ze,V)?ze:V,fe&&ke()&&C().onSuccess(V,v,r)}catch(Se){de();const ze=C(),{shouldRetryOnError:Ye}=ze;ze.isPaused()||(Me.error=Se,fe&&ke()&&(ze.onError(Se,v,ze),(Ye===!0||lo(Ye)&&Ye(Se))&&(!C().revalidateOnFocus||!C().revalidateOnReconnect||A())&&ze.onErrorRetry(Se,v,ze,ut=>{const at=b[v];at&&at[0]&&at[0](DM,ut)},{retryCount:(Te.retryCount||0)+1,dedupe:!0})))}return xe=!1,Re(),!0},[v,n]),M=k.useCallback((...le)=>$q(n,S.current,...le),[]);if(M1(()=>{T.current=e,E.current=r,Lt(H)||(X.current=H)}),M1(()=>{if(!v)return;const le=pe.bind(Pn,$1);let q=0;C().revalidateOnFocus&&(q=Date.now()+C().focusThrottleInterval);const ae=mBe(v,b,(xe,Te={})=>{if(xe==Lq){const fe=Date.now();C().revalidateOnFocus&&fe>q&&A()&&(q=fe+C().focusThrottleInterval,le())}else if(xe==Mq)C().revalidateOnReconnect&&A()&&le();else{if(xe==jq)return pe();if(xe==DM)return pe(Te)}});return w.current=!1,S.current=v,x.current=!0,P({_k:_}),Q&&(g[v]||(Lt(U)||nd?le():X6e(le))),()=>{w.current=!0,ae()}},[v]),M1(()=>{let le;function q(){const ae=lo(c)?c(I().data):c;ae&&le!==-1&&(le=setTimeout(V,ae))}function V(){!I().error&&(u||C().isVisible())&&(d||C().isOnline())?pe($1).then(q):q()}return q(),()=>{le&&(clearTimeout(le),le=-1)}},[c,u,d,v]),k.useDebugValue(ge),i){if(!LM&&nd&&J)throw new Error("Fallback data is required when using Suspense in SSR.");J&&(T.current=e,E.current=r,w.current=!1);const le=y[v],q=!Lt(le)&&J?M(le):FM;if(B1(q),!Lt(ee)&&J)throw ee;const V=J?pe($1):FM;!Lt(ge)&&J&&(V.status="fulfilled",V.value=!0),B1(V)}return{mutate:M,get data(){return F.data=!0,ge},get error(){return F.error=!0,ee},get isValidating(){return F.isValidating=!0,ie},get isLoading(){return F.isLoading=!0,re}}},v0=pBe(bBe);function yBe(t,e){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let r,n=0;return function(...i){clearTimeout(r);const o=Date.now(),a=o-n,l=e-a;l<=0?(n=o,t.apply(this,i)):r=setTimeout(()=>{n=Date.now(),t.apply(this,i)},l)}}var vBe=yBe;const _Be=gl(vBe);function BM(t,e){return e!=null?_Be(t,e):t}function xBe(t){const[e,r]=k.useState(t);return k.useEffect(()=>{bS(t,e)||r(t)},[t,e]),e}function wBe({api:t="/api/chat",id:e,initialMessages:r,initialInput:n="",sendExtraMessageFields:s,onToolCall:i,experimental_prepareRequestBody:o,maxSteps:a=1,streamProtocol:l="data",onResponse:c,onFinish:u,onError:d,credentials:h,headers:f,body:b,generateId:m=$T,fetch:g,keepLastMessageOnError:y=!0,experimental_throttle:v}={}){const[_]=k.useState(m),x=e??_,w=typeof t=="string"?[t,x]:x,S=xBe(r??[]),T=k.useMemo(()=>ux(S),[S]),{data:E,mutate:C}=v0([w,"messages"],null,{fallbackData:T}),A=k.useRef(E||[]);k.useEffect(()=>{A.current=E||[]},[E]);const{data:I,mutate:P}=v0([w,"streamData"],null),D=k.useRef(I);k.useEffect(()=>{D.current=I},[I]);const{data:R="ready",mutate:F}=v0([w,"status"],null),{data:G=void 0,mutate:z}=v0([w,"error"],null),K=k.useRef(null),L=k.useRef({credentials:h,headers:f,body:b});k.useEffect(()=>{L.current={credentials:h,headers:f,body:b}},[h,f,b]);const O=k.useCallback(async(re,pe="generate")=>{var M,oe;F("submitted"),z(void 0);const le=ux(re.messages),q=le.length,V=gS((M=le[le.length-1])==null?void 0:M.toolInvocations);try{const xe=new AbortController;K.current=xe;const Te=BM(C,v),fe=BM(P,v),ke=A.current;Te(le,!1);const Me=s?le:le.map(({role:de,content:be,experimental_attachments:Se,data:ze,annotations:Ye,toolInvocations:ut,parts:at})=>({role:de,content:be,...Se!==void 0&&{experimental_attachments:Se},...ze!==void 0&&{data:ze},...Ye!==void 0&&{annotations:Ye},...ut!==void 0&&{toolInvocations:ut},...at!==void 0&&{parts:at}})),Re=D.current;await Aoe({api:t,body:(oe=o?.({id:x,messages:le,requestData:re.data,requestBody:re.body}))!=null?oe:{id:x,messages:Me,data:re.data,...L.current.body,...re.body},streamProtocol:l,credentials:L.current.credentials,headers:{...L.current.headers,...re.headers},abortController:()=>K.current,restoreMessagesOnFailure(){y||Te(ke,!1)},onResponse:c,onUpdate({message:de,data:be,replaceLastMessage:Se}){F("streaming"),Te([...Se?le.slice(0,le.length-1):le,de],!1),be?.length&&fe([...Re??[],...be],!1)},onToolCall:i,onFinish:u,generateId:m,fetch:g,lastMessage:le[le.length-1],requestType:pe}),K.current=null,F("ready")}catch(xe){if(xe.name==="AbortError")return K.current=null,F("ready"),null;d&&xe instanceof Error&&d(xe),z(xe),F("error")}const ae=A.current;Noe({originalMaxToolInvocationStep:V,originalMessageCount:q,maxSteps:a,messages:ae})&&await O({messages:ae})},[C,F,t,L,c,u,d,z,P,D,l,s,o,i,a,A,K,m,g,y,v,x]),$=k.useCallback(async(re,{data:pe,headers:M,body:oe,experimental_attachments:le=re.experimental_attachments}={})=>{var q,V;const ae=await sI(le),xe=A.current.concat({...re,id:(q=re.id)!=null?q:m(),createdAt:(V=re.createdAt)!=null?V:new Date,experimental_attachments:ae.length>0?ae:void 0,parts:PF(re)});return O({messages:xe,headers:M,body:oe,data:pe})},[O,m]),H=k.useCallback(async({data:re,headers:pe,body:M}={})=>{const oe=A.current;if(oe.length===0)return null;const le=oe[oe.length-1];return O({messages:le.role==="assistant"?oe.slice(0,-1):oe,headers:pe,body:M,data:re})},[O]),U=k.useCallback(()=>{K.current&&(K.current.abort(),K.current=null)},[]),ee=k.useCallback(async()=>{const re=A.current;O({messages:re},"resume")},[O]),X=k.useCallback(re=>{typeof re=="function"&&(re=re(A.current));const pe=ux(re);C(pe,!1),A.current=pe},[C]),ge=k.useCallback(re=>{typeof re=="function"&&(re=re(D.current)),P(re,!1),D.current=re},[P]),[J,j]=k.useState(n),Y=k.useCallback(async(re,pe={},M)=>{var oe;if((oe=re?.preventDefault)==null||oe.call(re),!J&&!pe.allowEmptySubmit)return;M&&(L.current={...L.current,...M});const le=await sI(pe.experimental_attachments),V={messages:A.current.concat({id:m(),createdAt:new Date,role:"user",content:J,experimental_attachments:le.length>0?le:void 0,parts:[{type:"text",text:J}]}),headers:pe.headers,body:pe.body,data:pe.data};O(V),j("")},[J,m,O]),Q=re=>{j(re.target.value)},ie=k.useCallback(({toolCallId:re,result:pe})=>{const M=A.current;if(Doe({messages:M,toolCallId:re,toolResult:pe}),C([...M.slice(0,M.length-1),{...M[M.length-1]}],!1),R==="submitted"||R==="streaming")return;const oe=M[M.length-1];IF(oe)&&O({messages:M})},[C,R,O]);return{messages:E??[],id:x,setMessages:X,data:I,setData:ge,error:G,append:$,reload:H,stop:U,experimental_resume:ee,input:J,setInput:j,handleInputChange:Q,handleSubmit:Y,isLoading:R==="submitted"||R==="streaming",status:R,addToolResult:ie}}const SBe=t=>`
You are an experienced developer who helps people choose the best starter template for their projects.
IMPORTANT: Vite is preferred
IMPORTANT: Only choose shadcn templates if the user explicitly asks for shadcn.

Available templates:
<template>
  <name>blank</name>
  <description>Empty starter for simple scripts and trivial tasks that don't require a full template setup</description>
  <tags>basic, script</tags>
</template>
${t.map(e=>`
<template>
  <name>${e.name}</name>
  <description>${e.description}</description>
  ${e.tags?`<tags>${e.tags.join(", ")}</tags>`:""}
</template>
`).join(`
`)}

Response Format:
<selection>
  <templateName>{selected template name}</templateName>
  <title>{a proper title for the project}</title>
</selection>

Examples:

<example>
User: I need to build a todo app
Response:
<selection>
  <templateName>react-basic-starter</templateName>
  <title>Simple React todo application</title>
</selection>
</example>

<example>
User: Write a script to generate numbers from 1 to 100
Response:
<selection>
  <templateName>blank</templateName>
  <title>script to generate numbers from 1 to 100</title>
</selection>
</example>

Instructions:
1. For trivial tasks and simple scripts, always recommend the blank template
2. For more complex projects, recommend templates from the provided list
3. Follow the exact XML format
4. Consider both technical requirements and tags
5. If no perfect match exists, recommend the closest option

Important: Provide only the selection tags in your response, no additional text.
MOST IMPORTANT: YOU DONT HAVE TIME TO THINK JUST START RESPONDING BASED ON HUNCH 
`,EBe=Mo.filter(t=>!t.name.includes("shadcn")),CBe=t=>{try{const e=t.match(/<templateName>(.*?)<\/templateName>/),r=t.match(/<title>(.*?)<\/title>/);return e?{template:e[1].trim(),title:r?.[1].trim()||"Untitled Project"}:null}catch(e){return console.error("Error parsing template selection:",e),null}},TBe=async t=>{const{message:e,model:r,provider:n}=t,s={message:e,model:r,provider:n,system:SBe(EBe)},o=await(await fetch("/api/llmcall",{method:"POST",body:JSON.stringify(s)})).json();console.log(o);const{text:a}=o,l=CBe(a);return l||(console.log("No template selected, using blank template"),{template:"blank",title:""})},kBe=async t=>{try{const e=await fetch(`/api/github-template?repo=${encodeURIComponent(t)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error fetching release contents:",e),e}};async function ABe(t,e){const r=Mo.find(d=>d.name==t);if(!r)return null;const n=r.githubRepo,s=await kBe(n);let i=s;i=i.filter(d=>d.path.startsWith(".git")==!1),i=i.filter(d=>d.path.startsWith(".bolt")==!1);const o=s.find(d=>d.path.startsWith(".bolt")&&d.name=="ignore"),a={files:i,ignoreFile:[]};if(o){const d=o.content.split(`
`).map(b=>b.trim()),h=QA().add(d),f=i.filter(b=>h.ignores(b.path));a.files=i,a.ignoreFile=f}const l=`
Devonz is initializing your project with the required files using the ${r.name} template.
<boltArtifact id="imported-files" title="${e||"Create initial files"}" type="bundled">
${a.files.map(d=>`<boltAction type="file" filePath="${d.path}">
${d.content}
</boltAction>`).join(`
`)}
</boltArtifact>
`;let c="";const u=s.filter(d=>d.path.startsWith(".bolt")).find(d=>d.name=="prompt");return u&&(c=`
TEMPLATE INSTRUCTIONS:
${u.content}

---
`),a.ignoreFile.length>0&&(c=c+`
STRICT FILE ACCESS RULES - READ CAREFULLY:

The following files are READ-ONLY and must never be modified:
${a.ignoreFile.map(d=>`- ${d.path}`).join(`
`)}

Permitted actions:
 Import these files as dependencies
 Read from these files
 Reference these files

Strictly forbidden actions:
 Modify any content within these files
 Delete these files
 Rename these files
 Move these files
 Create new versions of these files
 Suggest changes to these files

Any attempt to modify these protected files will result in immediate termination of the operation.

If you need to make changes to functionality, create new files instead of modifying the protected ones listed above.
---
`),c+=`
---
template import is done, and you can now use the imported files,
edit only the files that need to be changed, and you can create new files as needed.
NO NOT EDIT/WRITE ANY FILES THAT ALREADY EXIST IN THE PROJECT AND DOES NOT NEED TO BE MODIFIED
---
Now that the Template is imported please continue with my original request

IMPORTANT: Dont Forget to install the dependencies before running the app by using \`npm install && npm run dev\`
`,{assistantMessage:l,userMessage:c}}const MC=Qt("AutoFixService");function RBe(t){const e=r6(),r=wae(),n=t.source==="terminal"?"terminal":t.source==="preview"?"preview":"build",s=[];return s.push(`[Auto-Fix Attempt ${e.currentAttempt}/${e.maxAttempts}]`),s.push(""),s.push(`*Automatically fixing ${n} error*`),s.push(""),s.push(`**Error Type**: ${t.type}`),s.push("**Error Message**:"),s.push("```"+(t.source==="preview"?"js":"sh")),s.push(t.content.slice(0,2e3)),s.push("```"),r&&(s.push(""),s.push(r)),s.push(""),s.push("Please analyze and fix this error."),{text:s.join(`
`),isAutoFix:!0,attemptNumber:e.currentAttempt,maxAttempts:e.maxAttempts}}function PBe(){MC.info("Auto-fix successful - error resolved"),xae(),dn.get().settings.showNotifications&&MC.info("Fix completed successfully")}function $M(){return r6().isActive}function IBe(t){return async e=>{MC.info("Auto-fix handler triggered",{type:e.type,source:e.source});const r=RBe(e);t(r.text)}}const NBe=[{name:"Planning",status:"pending"},{name:"Implementation",status:"pending"},{name:"Review",status:"pending"}];function DBe(t){const e={progress:0,stageLabel:"Initializing",activeAgents:[],stats:{filesTouched:0,qcIssues:{critical:0,high:0,medium:0,low:0}},runStages:[...NBe],statusLines:[],events:[]};if(!t||!Array.isArray(t))return e;const r=t.filter(n=>n&&n.type==="event_log"&&n.payload).map(n=>n.payload);e.events=r;for(const n of r){if(n.type==="run_started"&&(e.progress=5,e.stageLabel="Starting Run"),n.type==="stage_started"&&(e.stageLabel=n.stage,n.stage.includes("PLAN")?(uu(e.runStages,"Planning","running"),e.progress=10):n.stage.includes("EXEC")||n.stage.includes("FIX")?(uu(e.runStages,"Implementation","running"),e.progress=40):n.stage.includes("QC")&&(uu(e.runStages,"Review","running"),e.progress=80)),n.type==="stage_completed"&&(n.stage.includes("PLAN")?(uu(e.runStages,"Planning","completed",n.summary),e.progress=30):n.stage.includes("EXEC")?(uu(e.runStages,"Implementation","completed",n.summary),e.progress=70):n.stage.includes("QC")&&(uu(e.runStages,"Review","completed",n.summary),e.progress=100),e.statusLines.unshift(`Completed: ${n.stage}`)),n.type==="iteration_started"&&(e.iteration={current:(e.iteration?.current||0)+1,max:n.details?.max_iterations||3},e.statusLines.unshift(`Starting Fix Loop ${e.iteration.current}`)),n.type==="agent_status"){const s=e.activeAgents.find(i=>i.agentId===n.agent);s?(s.currentTask=n.summary,s.status="working"):e.activeAgents.push({agentId:n.agent,status:"working",currentTask:n.summary,model:"GPT-4o"}),e.statusLines.unshift(`[${n.agent}] ${n.summary}`)}(n.type==="patch_applied"||n.type==="artifact_ready")&&(e.stats.filesTouched++,e.statusLines.unshift(`Generated: ${n.summary}`)),n.type==="qc_issues_found"&&(n.details?.issues&&(e.stats.qcIssues.critical+=1),e.statusLines.unshift(`QC Issues Found: ${n.summary}`)),e.statusLines.length>5&&(e.statusLines=e.statusLines.slice(0,5))}return e}function uu(t,e,r,n){const s=t.find(i=>i.name===e);s&&(s.status=r,n&&(s.summary=n))}const _0=Qt("Chat");function P8e(){Id.trace("Chat");const{ready:t,initialMessages:e,storeMessageHistory:r,importChat:n,exportChat:s}=ek(),i=He(ro);return k.useEffect(()=>{Pe.setReloadedMessages(e.map(o=>o.id))},[e]),p.jsx(LBe,{ready:t,description:i,initialMessages:e,exportChat:s,storeMessageHistory:r,importChat:n})}const OBe=N6(t=>{const{messages:e,initialMessages:r,isLoading:n,parseMessages:s,storeMessageHistory:i}=t;s(e,n),e.length>r.length&&i(e).catch(o=>Ie.error(o.message))},50),LBe=k.memo(({ready:t,description:e,initialMessages:r,storeMessageHistory:n,importChat:s,exportChat:i})=>{Cde();const o=k.useRef(null),[a,l]=k.useState(r.length>0),[c,u]=k.useState([]),[d,h]=k.useState([]),[f,b]=HM(),[m,g]=k.useState(!1),y=He(Pe.files),[v,_]=k.useState(os),x=He(Pe.alert),w=He(Pe.deployAlert),S=He(Ja),T=S.stats?.projects?.find(je=>je.id===S.selectedProjectId),E=He(Pe.supabaseAlert),{activeProviders:C,promptId:A,autoSelectTemplate:I,contextOptimizationEnabled:P,orchestratorSettings:D}=y2(),[R,F]=k.useState(void 0),[G,z]=k.useState(()=>Et.get("selectedModel")||AK),[K,L]=k.useState(()=>{const je=Et.get("selectedProvider");return ev.find(yt=>yt.name===je)||RK}),{showChat:O,pendingMessage:$}=He(Gs),[H,U]=Tte(),[ee,X]=k.useState({}),[ge,J]=k.useState("build"),[j,Y]=k.useState(null),Q=Kh(je=>je.settings),{messages:ie,isLoading:re,input:pe,handleInputChange:M,setInput:oe,stop:le,append:q,setMessages:V,reload:ae,error:xe,data:Te,setData:fe,addToolResult:ke}=wBe({api:"/api/chat",body:{apiKeys:ee,files:y,promptId:A,contextOptimization:P,chatMode:ge,designScheme:v,supabase:{isConnected:S.isConnected,hasSelectedProject:!!T,credentials:{supabaseUrl:S?.credentials?.supabaseUrl,anonKey:S?.credentials?.anonKey}},maxLLMSteps:Q.maxLLMSteps,orchestratorMode:D.enabled},sendExtraMessageFields:!0,onError:je=>{g(!1),qt(je,"chat")},onFinish:(je,yt)=>{const dt=yt.usage;if(fe(void 0),dt&&(console.log("Token usage:",dt),Jt.logProvider("Chat response completed",{component:"Chat",action:"response",model:G,provider:K.name,usage:dt,messageLength:je.content.length})),_0.debug("Finished streaming"),$M()){const Ut=dn.get().settings;setTimeout(()=>{$M()&&(Pe.actionAlert.get()?(ZF(!1),_0.debug("Auto-fix attempt completed, error still present")):(PBe(),_0.info("Auto-fix successful - no new errors detected")))},Ut.delayBetweenAttempts+2e3)}},initialMessages:r,initialInput:Et.get(ch)||""});k.useEffect(()=>{console.log("[ChatImpl] State update:",{ready:t,chatStarted:a,messagesCount:ie.length,isLoading:re,fakeLoading:m})},[t,a,ie.length,re,m]),k.useEffect(()=>{t&&r.length>0&&ie.length===0&&(console.log("[ChatImpl] History loaded, syncing messages"),V(r))},[t,r,V,ie.length]),k.useEffect(()=>{t&&r.length>0&&!a&&l(!0)},[t,r,a]);const Me=k.useMemo(()=>DBe(Te),[Te]);k.useEffect(()=>{$&&(oe($),fwe(),O||Gs.setKey("showChat",!0))},[$,oe,O]),k.useEffect(()=>{const je=f.get("prompt");je&&(b({}),gr(),q({role:"user",content:`[Model: ${G}]

[Provider: ${K.name}]

${je}`}))},[G,K,f]);const{enhancingPrompt:Re,promptEnhanced:de,enhancePrompt:be,resetEnhancer:Se}=wde(),{parsedMessages:ze,parseMessages:Ye}=xde(),ut=a?400:200,at=k.useRef(!1);k.useEffect(()=>{Gs.setKey("started",r.length>0)},[]),k.useEffect(()=>{OBe({messages:ie,initialMessages:r,isLoading:re,parseMessages:Ye,storeMessageHistory:n}),!at.current&&r.length>0&&(at.current=!0,Pe.clearReloadedMessages(),Pe.isRestoringSession.set(!1))},[ie,re,Ye]);const pt=()=>{const je=o.current;je&&(je.scrollTop=je.scrollHeight)},er=()=>{le(),Gs.setKey("aborted",!0),Pe.abortAllActions(),Jt.logProvider("Chat response aborted",{component:"Chat",action:"abort",model:G,provider:K.name})},qt=k.useCallback((je,yt="chat")=>{_0.error(`${yt} request failed`,je),le(),g(!1);let dt={message:"An unexpected error occurred",isRetryable:!0,statusCode:500,provider:K.name,type:"unknown",retryDelay:0};if(je.message)try{const qr=JSON.parse(je.message);qr.error||qr.message?dt={...dt,...qr}:dt.message=je.message}catch{dt.message=je.message}let Ut="unknown",dr="Request Failed";dt.statusCode===401||dt.message.toLowerCase().includes("api key")?(Ut="authentication",dr="Authentication Error"):dt.statusCode===429||dt.message.toLowerCase().includes("rate limit")?(Ut="rate_limit",dr="Rate Limit Exceeded"):dt.message.toLowerCase().includes("quota")?(Ut="quota",dr="Quota Exceeded"):dt.statusCode>=500&&(Ut="network",dr="Server Error"),Jt.logError(`${yt} request failed`,je,{component:"Chat",action:"request",error:dt.message,context:yt,retryable:dt.isRetryable,errorType:Ut,provider:K.name}),F({type:"error",title:dr,description:dt.message,provider:K.name,errorType:Ut}),fe([])},[K.name,le]),Tt=k.useCallback(()=>{F(void 0)},[]);k.useEffect(()=>{const je=o.current;if(je){je.style.height="auto";const yt=je.scrollHeight;je.style.height=`${Math.min(yt,ut)}px`,je.style.overflowY=yt>ut?"auto":"hidden"}},[pe,o]);const gr=async()=>{if(a)return;document.querySelector("#intro")&&await U("#intro",{opacity:0,flex:1},{duration:.2,ease:Dn}),k.startTransition(()=>{l(!0),Gs.setKey("started",!0)})},ir=(je,yt=[])=>{const dt=[{type:"text",text:je}];return yt.forEach(Ut=>{const dr=Ut.split(";")[0].split(":")[1]||"image/jpeg";dt.push({type:"file",mimeType:dr,data:Ut.replace(/^data:image\/[^;]+;base64,/,"")})}),dt},Dr=async je=>je.length===0?void 0:await Promise.all(je.map(dt=>new Promise(Ut=>{const dr=new FileReader;dr.onloadend=()=>{Ut({name:dt.name,contentType:dt.type,url:dr.result})},dr.readAsDataURL(dt)}))),jn=async(je,yt)=>{const dt=yt||pe;if(!dt?.trim())return;if(re){er();return}let Ut=dt;if(j){console.log("Selected Element:",j);const qr=`<div class="__boltSelectedElement__" data-element='${JSON.stringify(j)}'>${JSON.stringify(`${j.displayText}`)}</div>`;Ut=dt+qr}if(await gr(),!a){if(g(!0),I){const{template:Qr,title:ts}=await TBe({message:Ut,model:G,provider:K});if(Qr!=="blank"){const Po=await ABe(Qr,ts).catch(ci=>(ci.message.includes("rate limit")?Ie.warning(`Rate limit exceeded. Skipping starter template
 Continuing with blank template`):Ie.warning(`Failed to import starter template
 Continuing with blank template`),null));if(Po){const{assistantMessage:ci,userMessage:ga}=Po,Sn=`[Model: ${G}]

[Provider: ${K.name}]

${Ut}`;V([{id:`1-${new Date().getTime()}`,role:"user",content:Sn,parts:ir(Sn,d)},{id:`2-${new Date().getTime()}`,role:"assistant",content:ci},{id:`3-${new Date().getTime()}`,role:"user",content:`[Model: ${G}]

[Provider: ${K.name}]

${ga}`,annotations:["hidden"]}]);const ba=c.length>0?{experimental_attachments:await Dr(c)}:void 0;ae(ba),oe(""),Et.remove(ch),u([]),h([]),Se(),o.current?.blur(),g(!1);return}}}const qr=`[Model: ${G}]

[Provider: ${K.name}]

${Ut}`,br=c.length>0?await Dr(c):void 0;V([{id:`${new Date().getTime()}`,role:"user",content:qr,parts:ir(qr,d),experimental_attachments:br}]),ae(br?{experimental_attachments:br}:void 0),g(!1),oe(""),Et.remove(ch),u([]),h([]),Se(),o.current?.blur();return}xe!=null&&V(ie.slice(0,-1));const dr=Pe.getModifiedFiles();if(Gs.setKey("aborted",!1),dr!==void 0){const qr=ZLe(dr,`${Date.now()}`),br=`[Model: ${G}]

[Provider: ${K.name}]

${qr}${Ut}`,Qr=c.length>0?{experimental_attachments:await Dr(c)}:void 0;q({role:"user",content:br,parts:ir(br,d)},Qr),Pe.resetAllFileModifications()}else{const qr=`[Model: ${G}]

[Provider: ${K.name}]

${Ut}`,br=c.length>0?{experimental_attachments:await Dr(c)}:void 0;q({role:"user",content:qr,parts:ir(qr,d)},br)}oe(""),Et.remove(ch),u([]),h([]),Se(),o.current?.blur()},Fn=je=>{M(je)},Ee=k.useCallback(Yp(je=>{const yt=je.target.value.trim();Et.set(ch,yt,{expires:30})},1e3),[]),Ce=k.useRef(G),Ve=k.useRef(K),ct=k.useRef(q);k.useEffect(()=>{Ce.current=G},[G]),k.useEffect(()=>{Ve.current=K},[K]),k.useEffect(()=>{ct.current=q},[q]),k.useEffect(()=>{const yt=IBe(dt=>{y6(),n6();const Ut=`[Model: ${Ce.current}]

[Provider: ${Ve.current.name}]

${dt}`;gr(),ct.current({role:"user",content:Ut})});return ole(yt),Sae(yt),()=>{ale(),Eae()}},[]),k.useEffect(()=>{const je=Et.get("apiKeys");je&&X(JSON.parse(je))},[]);const Ke=je=>{z(je),Et.set("selectedModel",je,{expires:30})},mt=je=>{L(je),Et.set("selectedProvider",je.name,{expires:30})};return p.jsx($6e,{ref:H,textareaRef:o,input:pe,showChat:O,chatStarted:a,isStreaming:re||m,onStreamingChange:je=>{A9.set(je)},enhancingPrompt:Re,promptEnhanced:de,sendMessage:jn,model:G,setModel:Ke,provider:K,setProvider:mt,providerList:C,handleInputChange:je=>{Fn(je),Ee(je)},handleStop:er,description:e,importChat:s,exportChat:i,messages:k.useMemo(()=>ie.map((je,yt)=>je.role==="user"?je:{...je,content:ze[yt]||""}),[ie,ze]),enhancePrompt:()=>{be(pe,je=>{oe(je),pt()},G,K,ee)},uploadedFiles:c,setUploadedFiles:u,imageDataList:d,setImageDataList:h,actionAlert:x,clearAlert:()=>Pe.clearAlert(),supabaseAlert:E,clearSupabaseAlert:()=>Pe.clearSupabaseAlert(),deployAlert:w,clearDeployAlert:()=>Pe.clearDeployAlert(),llmErrorAlert:R,clearLlmErrorAlert:Tt,data:Te,chatMode:ge,setChatMode:J,append:q,designScheme:v,setDesignScheme:_,selectedElement:j,setSelectedElement:Y,addToolResult:ke,runUIState:Me})});function MBe(){const t=He(Bu),[e,r]=k.useState(!1),n=()=>{r(!0)};return p.jsxs(p.Fragment,{children:[p.jsxs(t_,{children:[p.jsx(r_,{asChild:!0,children:p.jsx(rt.button,{className:"w-8 h-8 rounded-full bg-transparent flex items-center justify-center focus:outline-none",whileHover:{scale:1.05},whileTap:{scale:.95},children:t?.avatar?p.jsx("img",{src:t.avatar,alt:t?.username||"Profile",className:"w-full h-full rounded-full object-cover ring-2 ring-bolt-elements-borderColor",loading:"eager",decoding:"sync"}):p.jsx("div",{className:"w-full h-full rounded-full flex items-center justify-center bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary ring-2 ring-bolt-elements-borderColor",children:p.jsx("div",{className:"i-ph:user w-4 h-4"})})})}),p.jsx(n_,{children:p.jsxs(s_,{className:ye("min-w-[180px] z-[9999]","bg-bolt-elements-background-depth-2","rounded-lg shadow-lg","border border-bolt-elements-borderColor","animate-in fade-in-0 zoom-in-95","py-1"),sideOffset:5,align:"end",children:[p.jsx("div",{className:"px-3 py-2 border-b border-bolt-elements-borderColor",children:p.jsx("p",{className:"text-sm font-medium text-bolt-elements-textPrimary truncate",children:t?.username||"Guest User"})}),p.jsxs(Ju,{className:ye("flex items-center gap-2 px-3 py-2","text-sm text-bolt-elements-textPrimary","hover:bg-bolt-elements-item-backgroundActive","cursor-pointer transition-colors","outline-none"),onClick:()=>n(),children:[p.jsx("div",{className:"i-ph:user-circle w-4 h-4 text-bolt-elements-textSecondary"}),"Edit Profile"]}),p.jsxs(Ju,{className:ye("flex items-center gap-2 px-3 py-2","text-sm text-bolt-elements-textPrimary","hover:bg-bolt-elements-item-backgroundActive","cursor-pointer transition-colors","outline-none"),onClick:()=>n(),children:[p.jsx("div",{className:"i-ph:gear-six w-4 h-4 text-bolt-elements-textSecondary"}),"Settings"]}),p.jsx("div",{className:"my-1 border-t border-bolt-elements-borderColor"}),p.jsxs(Ju,{className:ye("flex items-center gap-2 px-3 py-2","text-sm text-bolt-elements-textPrimary","hover:bg-bolt-elements-item-backgroundActive","cursor-pointer transition-colors","outline-none"),onClick:()=>window.open("https://github.com/zebbern/Devonz/issues/new?template=bug_report.yml","_blank"),children:[p.jsx("div",{className:"i-ph:bug w-4 h-4 text-bolt-elements-textSecondary"}),"Report Bug"]})]})})]}),p.jsx(nF,{open:e,onClose:()=>r(!1)})]})}function jBe(){const t=He(dn),e=He(YF),r=He(XF);if(!t.settings.isEnabled||!e&&t.fixHistory.length===0)return null;const s=t.fixHistory[t.fixHistory.length-1]?.wasSuccessful,i=t.settings.maxRetries,o=()=>{e||QF()};return p.jsx(Nr,{children:p.jsxs(rt.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:o,className:ye("flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-medium transition-colors",e?"bg-amber-500/20 text-amber-400 border border-amber-500/30":s?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30 hover:bg-red-500/30"),title:e?`Auto-fixing... Attempt ${r}/${i}`:s?"Auto-fix successful! Click to dismiss":`Auto-fix failed after ${r} attempts. Click to dismiss`,children:[p.jsx(rt.div,{className:ye("text-sm",e?"i-ph:wrench-duotone":s?"i-ph:check-circle-duotone":"i-ph:x-circle-duotone"),animate:e?{rotate:[0,15,-15,0]}:{},transition:e?{duration:.5,repeat:1/0}:{}}),p.jsx("span",{children:e?p.jsxs(p.Fragment,{children:["Fixing"," ",p.jsxs("span",{className:"opacity-75",children:["(",r,"/",i,")"]})]}):s?"Fixed!":"Failed"}),e&&p.jsx(rt.span,{className:"w-1.5 h-1.5 rounded-full bg-amber-400",animate:{opacity:[1,.3,1]},transition:{duration:1,repeat:1/0}})]})})}const FBe=k.lazy(()=>Z(()=>import("./DeployButton-Fl2eF0d8.js"),__vite__mapDeps([134,3,1,2,21,4])).then(t=>({default:t.DeployButton}))),BBe=k.lazy(()=>Z(()=>Promise.resolve().then(()=>MFe),void 0).then(t=>({default:t.VercelDomainModal})));function $Be({chatStarted:t}){const[e]=k.useState(0),[r,n]=k.useState(!1),s=He(Pe.previews),i=He(Pe.currentView),o=He(Pd),a=He(zn),l=s[e],c=a&&typeof localStorage<"u"?localStorage.getItem(`vercel-project-${a}`)!==null:!1,u=l,d=u&&o.user&&c,h=()=>{i==="versions"?Pe.currentView.set("code"):Pe.currentView.set("versions")};return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(jBe,{}),u&&p.jsxs("button",{onClick:h,className:`rounded-md items-center justify-center px-3 py-1.5 text-xs bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary border border-bolt-elements-borderColor hover:bg-bolt-elements-background-depth-4 hover:text-accent-400 outline-accent-500 flex gap-1.5 transition-colors ${i==="versions"?"text-accent-400 border-accent-500/50":""}`,children:[p.jsx("div",{className:"i-ph:clock-counter-clockwise"}),"Versions"]}),d&&p.jsx("button",{onClick:()=>n(!0),className:"rounded-md items-center justify-center px-2 py-1.5 text-xs bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary border border-bolt-elements-borderColor hover:bg-bolt-elements-background-depth-4 hover:text-bolt-elements-textPrimary hover:border-accent-500/50 outline-accent-500 flex gap-1 transition-colors",title:"Vercel Domain Settings","aria-label":"Vercel Domain Settings",children:p.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 76 65",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M37.5274 0L75.0548 65H0L37.5274 0Z"})})}),u&&p.jsx(k.Suspense,{fallback:p.jsx("div",{className:"w-20 h-8 bg-bolt-elements-background-depth-3 animate-pulse rounded-md"}),children:p.jsx(FBe,{})}),p.jsx(MBe,{}),p.jsx(k.Suspense,{fallback:null,children:p.jsx(BBe,{isOpen:r,onClose:()=>n(!1)})})]})}function UBe(){const t=He(ro),{editing:e,handleChange:r,handleBlur:n,handleSubmit:s,handleKeyDown:i,currentDescription:o,toggleEditMode:a}=mB({initialDescription:t,syncWithGlobalStore:!0});return t?p.jsx("div",{className:"flex items-center justify-center",children:e?p.jsxs("form",{onSubmit:s,className:"flex items-center justify-center",children:[p.jsx("input",{type:"text",className:"bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary rounded px-2 mr-2 w-fit",autoFocus:!0,value:o,onChange:r,onBlur:n,onKeyDown:i,style:{width:`${Math.max(o.length*8,100)}px`}}),p.jsx(Fb,{children:p.jsx(fd,{tooltip:"Save title",children:p.jsx("div",{className:"flex justify-between items-center p-2 rounded-md bg-bolt-elements-item-backgroundAccent",children:p.jsx("button",{type:"submit",className:"i-ph:check-bold scale-110 hover:text-bolt-elements-item-contentAccent",onMouseDown:s})})})})]}):p.jsxs(p.Fragment,{children:[o,p.jsx(Fb,{children:p.jsx(fd,{tooltip:"Rename chat",children:p.jsx("button",{type:"button",className:"ml-2 i-ph:pencil-fill scale-110 hover:text-bolt-elements-item-contentAccent",onClick:l=>{l.preventDefault(),a()}})})})]})}):null}function I8e(){const{t}=Ms(),e=He(Gs),r=He(nf.open),n=e.showChat;return p.jsxs("header",{className:ye("flex items-center px-5 border-b h-[var(--header-height)] bg-transparent",{"border-transparent":!e.started,"border-bolt-elements-borderColor":e.started}),children:[p.jsx("div",{className:"flex items-center gap-3 z-logo text-bolt-elements-textPrimary",children:!r&&p.jsx("button",{type:"button",className:"i-ph:sidebar-simple text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors bg-transparent border-none cursor-pointer p-1 rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-bolt-elements-ring focus-visible:ring-offset-2",onClick:()=>nf.toggle(),"aria-label":t("header.show_sidebar","Show Sidebar"),title:t("header.show_sidebar","Show Sidebar")})}),e.started&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"flex-1 px-4 truncate text-center text-bolt-elements-textSecondary text-sm",children:p.jsx(Yl,{children:()=>p.jsx(UBe,{})})}),p.jsx(Yl,{children:()=>p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("button",{type:"button",className:ye("text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors cursor-pointer bg-transparent border-none p-1 rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-bolt-elements-ring focus-visible:ring-offset-2",{"i-ph:chat-circle-dots-fill":n,"i-ph:chat-circle-dots":!n}),onClick:()=>{Gs.setKey("showChat",!n)},"aria-label":n?t("header.hide_chat","Hide Chat"):t("header.show_chat","Show Chat"),title:n?t("header.hide_chat","Hide Chat"):t("header.show_chat","Show Chat")}),p.jsx($Be,{chatStarted:e.started})]})})]})]})}export{Ft as $,ud as A,ls as B,s_ as C,d8e as D,l8e as E,Mge as F,we as G,Ege as H,Ju as I,bs as J,bge as K,yE as L,o6e as M,K8 as N,Ot as O,n_ as P,zr as Q,t_ as R,nr as S,r_ as T,JBe as U,Gge as V,h8e as W,r0e as X,m8e as Y,Sr as Z,yl as _,t8e as a,uB as a$,it as a0,une as a1,S4 as a2,ai as a3,tt as a4,xn as a5,De as a6,S0e as a7,g8e as a8,P0e as a9,Bf as aA,Aq as aB,wce as aC,Yde as aD,j0 as aE,ek as aF,vFe as aG,P8e as aH,_Fe as aI,$6e as aJ,QA as aK,TW as aL,kW as aM,$T as aN,AW as aO,I8e as aP,vl as aQ,Ci as aR,SFe as aS,Pd as aT,k8e as aU,vM as aV,Pf as aW,Cq as aX,Eq as aY,A8e as aZ,R8e as a_,f8e as aa,p8e as ab,Hge as ac,b8e as ad,Uge as ae,o8e as af,Vs as ag,Iv as ah,xl as ai,Fv as aj,_i as ak,Fd as al,t0e as am,u$ as an,Bt as ao,Pu as ap,mn as aq,sy as ar,Lde as as,Ii as at,mv as au,gv as av,bv as aw,zn as ax,$se as ay,RT as az,fie as b,cde as b0,ude as b1,dde as b2,hde as b3,fde as b4,$r as b5,Gde as b6,A9 as b7,w7 as b8,gt as b9,dn as ba,r8e as bb,XBe as bc,Fde as bd,Nr as be,KBe as bf,YBe as bg,Gse as bh,gA as bi,LT as bj,Sd as bk,lie as c,QBe as d,Bu as e,e8e as f,Yp as g,ffe as h,Ja as i,Lx as j,LS as k,MS as l,rt as m,Xde as n,$b as o,toe as p,Fo as q,jwe as r,eI as s,Fwe as t,ZBe as u,Bwe as v,Mx as w,y2 as x,Kh as y,Pe as z};
