import{r as m,j as e}from"./components-BmgQfFUx.js";import{b as p,B as u,c as i,a as d}from"./Button-BQzjmXH6.js";import{i as P,j as v,k as U,l as H,m as y,n as K,o as A,q as g,r as M,t as R,v as G,w as E}from"./Header-C4AWQck-.js";import"./logs-DZu2vR68.js";import"./mobile-BXmnRaCS.js";const O=()=>e.jsxs("svg",{viewBox:"0 0 109 113",className:"w-5 h-5",children:[e.jsx("path",{fill:"currentColor",d:"M63.7076 110.284C60.8481 113.885 55.0502 111.912 54.9813 107.314L53.9738 40.0627L99.1935 40.0627C107.384 40.0627 111.952 49.5228 106.859 55.9374L63.7076 110.284Z"}),e.jsx("path",{fillOpacity:"0.2",fill:"currentColor",d:"M63.7076 110.284C60.8481 113.885 55.0502 111.912 54.9813 107.314L53.9738 40.0627L99.1935 40.0627C107.384 40.0627 111.952 49.5228 106.859 55.9374L63.7076 110.284Z"}),e.jsx("path",{fill:"currentColor",d:"M45.317 2.07103C48.1765 -1.53037 53.9745 0.442937 54.0434 5.041L54.4849 72.2922H9.83113C1.64038 72.2922 -2.92775 62.8321 2.1655 56.4175L45.317 2.07103Z"})]});function Q(){const a=p(P),j=p(v),T=p(U),N=p(H),[b,f]=m.useState(""),[w,_]=m.useState(!1),[l,h]=m.useState(null),[$,k]=m.useState(!1),[C,S]=m.useState(""),D=async()=>{h({status:"testing",message:"Testing connection..."});try{const t=await fetch("/api/supabase-user",{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){const s=await t.json();h({status:"success",message:`Connected successfully using environment token. Found ${s.projects?.length||0} projects`,timestamp:Date.now()})}else{const s=await t.json().catch(()=>({}));h({status:"error",message:`Connection failed: ${s.error||`${t.status} ${t.statusText}`}`,timestamp:Date.now()})}}catch(t){h({status:"error",message:`Connection failed: ${t instanceof Error?t.message:"Unknown error"}`,timestamp:Date.now()})}},I=[{name:"Get API Keys",icon:"i-ph:key",action:async t=>{try{await E(t,a.token),d.success("API keys fetched successfully")}catch(s){const n=s instanceof Error?s.message:"Unknown error";d.error(`Failed to fetch API keys: ${n}`)}}},{name:"View Dashboard",icon:"i-ph:layout",action:async t=>{window.open(`https://supabase.com/dashboard/project/${t}`,"_blank")}},{name:"View Database",icon:"i-ph:database",action:async t=>{window.open(`https://supabase.com/dashboard/project/${t}/editor`,"_blank")}},{name:"View Auth",icon:"i-ph:user-circle",action:async t=>{window.open(`https://supabase.com/dashboard/project/${t}/auth/users`,"_blank")}},{name:"View Storage",icon:"i-ph:folder",action:async t=>{window.open(`https://supabase.com/dashboard/project/${t}/storage/buckets`,"_blank")}},{name:"View Functions",icon:"i-ph:code",action:async t=>{window.open(`https://supabase.com/dashboard/project/${t}/functions`,"_blank")}},{name:"View Logs",icon:"i-ph:scroll",action:async t=>{window.open(`https://supabase.com/dashboard/project/${t}/logs`,"_blank")}},{name:"View Settings",icon:"i-ph:gear",action:async t=>{window.open(`https://supabase.com/dashboard/project/${t}/settings`,"_blank")}},{name:"View API Docs",icon:"i-ph:book",action:async t=>{window.open(`https://supabase.com/dashboard/project/${t}/api`,"_blank")}},{name:"View Realtime",icon:"i-ph:radio",action:async t=>{window.open(`https://supabase.com/dashboard/project/${t}/realtime`,"_blank")}},{name:"View Edge Functions",icon:"i-ph:terminal",action:async t=>{window.open(`https://supabase.com/dashboard/project/${t}/functions`,"_blank")}}];m.useEffect(()=>{(async()=>{try{await K(),P.get().user||console.log("No server-side Supabase token available, manual connection required")}catch(s){console.error("Failed to initialize Supabase connection:",s)}})()},[]),m.useEffect(()=>{(async()=>{a.user&&a.token&&!a.stats&&await A(a.token)})()},[a.user,a.token]);const F=async()=>{if(!b){d.error("Please enter a Supabase access token");return}v.set(!0);try{await A(b),g({token:b,isConnected:!0}),d.success("Successfully connected to Supabase"),f("")}catch(t){console.error("Auth error:",t),d.error("Failed to connect to Supabase"),g({user:null,token:""})}finally{v.set(!1)}},L=()=>{g({user:null,token:"",stats:void 0,selectedProjectId:void 0,isConnected:!1,project:void 0,credentials:void 0}),h(null),S(""),d.success("Disconnected from Supabase")},z=async(t,s)=>{s.requiresConfirmation&&!confirm(`Are you sure you want to ${s.name.toLowerCase()}?`)||(k(!0),await s.action(t),k(!1))},V=async t=>{if(S(t),g({selectedProjectId:t}),t&&a.token)try{await E(t,a.token)}catch(s){console.error("Failed to fetch API keys:",s)}},B=()=>T?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-bolt-elements-textSecondary",children:[e.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),"Fetching Supabase projects..."]}):e.jsxs(M,{open:w,onOpenChange:_,children:[e.jsx(R,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-bolt-elements-background dark:bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive/70 dark:hover:border-bolt-elements-borderColorActive/70 transition-all duration-200 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:database w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsxs("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:["Your Projects (",a.stats?.totalProjects||0,")"]})]}),e.jsx("div",{className:i("i-ph:caret-down w-4 h-4 transform transition-transform duration-200 text-bolt-elements-textSecondary",w?"rotate-180":"")})]})}),e.jsx(G,{className:"overflow-hidden",children:e.jsxs("div",{className:"space-y-4 mt-4",children:[a.stats?.projects?.length?e.jsxs("div",{className:"mb-6 p-4 bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor",children:[e.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Supabase Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:a.stats.totalProjects}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Total Projects"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:a.stats.projects.filter(t=>t.status==="ACTIVE_HEALTHY").length}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Active Projects"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:new Set(a.stats.projects.map(t=>t.region)).size}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Regions Used"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:a.stats.projects.filter(t=>t.status!=="ACTIVE_HEALTHY").length}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Inactive Projects"})]})]})]}):null,a.stats?.projects?.length?e.jsx("div",{className:"grid gap-3",children:a.stats.projects.map(t=>e.jsxs("div",{className:i("p-4 rounded-lg border transition-colors bg-bolt-elements-background-depth-1 cursor-pointer",C===t.id?"border-bolt-elements-item-contentAccent bg-bolt-elements-item-backgroundActive/10":"border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive/70"),onClick:()=>V(t.id),children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:database w-4 h-4 text-bolt-elements-borderColorActive"}),t.name]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-bolt-elements-textSecondary",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:globe w-3 h-3"}),t.region]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:clock w-3 h-3"}),new Date(t.created_at).toLocaleDateString()]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:i("flex items-center gap-1 px-2 py-0.5 rounded-full text-xs",t.status==="ACTIVE_HEALTHY"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":t.status==="SUSPENDED"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":t.status==="INACTIVE"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"),children:[e.jsx("div",{className:i("w-2 h-2 rounded-full",t.status==="ACTIVE_HEALTHY"?"bg-green-500":t.status==="SUSPENDED"?"bg-red-500":t.status==="INACTIVE"?"bg-yellow-500":"bg-gray-500")}),t.status.replace("_"," ")]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-3 pt-3 border-t border-bolt-elements-borderColor",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-bolt-elements-textPrimary",children:t.stats?.database?.tables??"--"}),e.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary flex items-center justify-center gap-1",children:[e.jsx("div",{className:"i-ph:table w-3 h-3"}),"Tables"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-bolt-elements-textPrimary",children:t.stats?.storage?.buckets??"--"}),e.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary flex items-center justify-center gap-1",children:[e.jsx("div",{className:"i-ph:folder w-3 h-3"}),"Buckets"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-bolt-elements-textPrimary",children:t.stats?.functions?.deployed??"--"}),e.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary flex items-center justify-center gap-1",children:[e.jsx("div",{className:"i-ph:code w-3 h-3"}),"Functions"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-bolt-elements-textPrimary",children:t.stats?.database?.size_mb?`${t.stats.database.size_mb} MB`:"--"}),e.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary flex items-center justify-center gap-1",children:[e.jsx("div",{className:"i-ph:database w-3 h-3"}),"DB Size"]})]})]})]})}),C===t.id&&e.jsxs("div",{className:"space-y-4 mt-4 pt-4 border-t border-bolt-elements-borderColor",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-1",children:I.map(s=>e.jsxs(u,{variant:s.variant||"outline",size:"sm",onClick:n=>{n.stopPropagation(),z(t.id,s)},disabled:$||s.name==="Get API Keys"&&N,className:"flex items-center gap-1 text-xs px-2 py-1 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:`${s.icon} w-2.5 h-2.5`}),s.name==="Get API Keys"&&N?"Fetching...":s.name]},s.name))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg space-y-2",children:[e.jsxs("h6",{className:"text-xs font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:database w-4 h-4 text-bolt-elements-item-contentAccent"}),"Database Schema"]}),e.jsxs("div",{className:"space-y-1 text-xs text-bolt-elements-textSecondary",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tables:"}),e.jsx("span",{children:t.stats?.database?.tables??"--"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Views:"}),e.jsx("span",{children:t.stats?.database?.views??"--"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Functions:"}),e.jsx("span",{children:t.stats?.database?.functions??"--"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Size:"}),e.jsx("span",{children:t.stats?.database?.size_mb?`${t.stats.database.size_mb} MB`:"--"})]})]})]}),e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg space-y-2",children:[e.jsxs("h6",{className:"text-xs font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:folder w-4 h-4 text-bolt-elements-item-contentAccent"}),"Storage"]}),e.jsxs("div",{className:"space-y-1 text-xs text-bolt-elements-textSecondary",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Buckets:"}),e.jsx("span",{children:t.stats?.storage?.buckets??"--"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Files:"}),e.jsx("span",{children:t.stats?.storage?.files??"--"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Used:"}),e.jsx("span",{children:t.stats?.storage?.used_gb?`${t.stats.storage.used_gb} GB`:"--"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Available:"}),e.jsx("span",{children:t.stats?.storage?.available_gb?`${t.stats.storage.available_gb} GB`:"--"})]})]})]})]}),a.credentials&&e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg space-y-2",children:[e.jsxs("h6",{className:"text-xs font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:key w-4 h-4 text-bolt-elements-item-contentAccent"}),"Project Credentials"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-bolt-elements-textSecondary",children:"Supabase URL:"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"text",value:a.credentials.supabaseUrl||"",readOnly:!0,className:"flex-1 px-2 py-1 text-xs bg-bolt-elements-background border border-bolt-elements-borderColor rounded"}),e.jsx(u,{size:"icon",variant:"outline",onClick:s=>{s.stopPropagation(),a.credentials?.supabaseUrl&&(navigator.clipboard.writeText(a.credentials.supabaseUrl),d.success("URL copied to clipboard"))},className:"w-8 h-8",children:e.jsx("div",{className:"i-ph:copy w-3 h-3"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-bolt-elements-textSecondary",children:"Anon Key:"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"password",value:a.credentials.anonKey||"",readOnly:!0,className:"flex-1 px-2 py-1 text-xs bg-bolt-elements-background border border-bolt-elements-borderColor rounded"}),e.jsx(u,{size:"icon",variant:"outline",onClick:s=>{s.stopPropagation(),a.credentials?.anonKey&&(navigator.clipboard.writeText(a.credentials.anonKey),d.success("Key copied to clipboard"))},className:"w-8 h-8",children:e.jsx("div",{className:"i-ph:copy w-3 h-3"})})]})]})]})]})]})]},t.id))}):e.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-2 p-4",children:[e.jsx("div",{className:"i-ph:info w-4 h-4"}),"No projects found in your Supabase account"]})]})})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y.div,{className:"flex items-center justify-between gap-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-[#3ECF8E]",children:e.jsx(O,{})}),e.jsx("h2",{className:"text-lg font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:"Supabase Integration"})]}),e.jsx("div",{className:"flex items-center gap-2",children:a.user&&e.jsx(u,{onClick:D,disabled:l?.status==="testing",variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-bolt-elements-item-backgroundActive/10 hover:text-bolt-elements-textPrimary dark:hover:bg-bolt-elements-item-backgroundActive/10 dark:hover:text-bolt-elements-textPrimary transition-colors",children:l?.status==="testing"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Test Connection"]})})})]}),e.jsx("p",{className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:"Connect and manage your Supabase projects with database access, authentication, and storage controls"}),l&&e.jsxs(y.div,{className:i("p-4 rounded-lg border",{"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-700":l.status==="success","bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":l.status==="error","bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-700":l.status==="testing"}),initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[l.status==="success"&&e.jsx("div",{className:"i-ph:check-circle w-5 h-5 text-green-600 dark:text-green-400"}),l.status==="error"&&e.jsx("div",{className:"i-ph:warning-circle w-5 h-5 text-red-600 dark:text-red-400"}),l.status==="testing"&&e.jsx("div",{className:"i-ph:spinner-gap w-5 h-5 animate-spin text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:i("text-sm font-medium",{"text-green-800 dark:text-green-200":l.status==="success","text-red-800 dark:text-red-200":l.status==="error","text-blue-800 dark:text-blue-200":l.status==="testing"}),children:l.message})]}),l.timestamp&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(l.timestamp).toLocaleString()})]}),e.jsx(y.div,{className:"bg-bolt-elements-background dark:bg-bolt-elements-background border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx("div",{className:"p-6 space-y-6",children:a.user?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:L,className:i("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-red-500 text-white","hover:bg-red-600"),children:[e.jsx("div",{className:"i-ph:plug w-4 h-4"}),"Disconnect"]}),e.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:check-circle w-4 h-4 text-green-500"}),"Connected to Supabase"]})]})}),a.user&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-1 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center",children:e.jsx("div",{className:"i-ph:user w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:a.user.email}),e.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary",children:[a.user.role," • Member since"," ",new Date(a.user.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-bolt-elements-textSecondary",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:buildings w-3 h-3"}),a.stats?.totalProjects||0," Projects"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:globe w-3 h-3"}),new Set(a.stats?.projects?.map(t=>t.region)||[]).size," ","Regions"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:activity w-3 h-3"}),a.stats?.projects?.filter(t=>t.status==="ACTIVE_HEALTHY").length||0," ","Active"]})]})]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Performance Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg border border-bolt-elements-borderColor",children:[e.jsxs("h6",{className:"text-xs font-medium text-bolt-elements-textPrimary flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"i-ph:chart-line w-4 h-4 text-bolt-elements-item-contentAccent"}),"Database Health"]}),e.jsx("div",{className:"space-y-1",children:(()=>{const t=a.stats?.totalProjects||0,s=a.stats?.projects?.filter(o=>o.status==="ACTIVE_HEALTHY").length||0,n=t>0?Math.round(s/t*100):0,x=t>0?Math.round((a.stats?.projects?.reduce((o,r)=>o+(r.stats?.database?.tables||0),0)||0)/t):0;return[{label:"Health Rate",value:`${n}%`},{label:"Active Projects",value:s},{label:"Avg Tables/Project",value:x}]})().map((t,s)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-bolt-elements-textSecondary",children:[t.label,":"]}),e.jsx("span",{className:"text-bolt-elements-textPrimary font-medium",children:t.value})]},s))})]}),e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg border border-bolt-elements-borderColor",children:[e.jsxs("h6",{className:"text-xs font-medium text-bolt-elements-textPrimary flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"i-ph:shield-check w-4 h-4 text-bolt-elements-item-contentAccent"}),"Auth & Security"]}),e.jsx("div",{className:"space-y-1",children:(()=>{const t=a.stats?.totalProjects||0,s=a.stats?.projects?.filter(o=>o.stats?.auth?.users!==void 0).length||0,n=t>0?Math.round(s/t*100):0,x=a.stats?.projects?.reduce((o,r)=>o+(r.stats?.auth?.users||0),0)||0;return[{label:"Auth Enabled",value:`${n}%`},{label:"Total Users",value:x},{label:"Avg Users/Project",value:t>0?Math.round(x/t):0}]})().map((t,s)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-bolt-elements-textSecondary",children:[t.label,":"]}),e.jsx("span",{className:"text-bolt-elements-textPrimary font-medium",children:t.value})]},s))})]}),e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg border border-bolt-elements-borderColor",children:[e.jsxs("h6",{className:"text-xs font-medium text-bolt-elements-textPrimary flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"i-ph:globe w-4 h-4 text-bolt-elements-item-contentAccent"}),"Regional Distribution"]}),e.jsx("div",{className:"space-y-1",children:(()=>{const t=a.stats?.projects?.reduce((s,n)=>(s[n.region]=(s[n.region]||0)+1,s),{})||{};return Object.entries(t).sort(([,s],[,n])=>n-s).slice(0,3).map(([s,n])=>({label:s.toUpperCase(),value:n}))})().map((t,s)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-bolt-elements-textSecondary",children:[t.label,":"]}),e.jsx("span",{className:"text-bolt-elements-textPrimary font-medium",children:t.value})]},s))})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-2",children:"Resource Overview"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:(()=>{const t=a.stats?.projects?.reduce((r,c)=>r+(c.stats?.database?.size_mb||0),0)||0,s=a.stats?.projects?.reduce((r,c)=>r+(c.stats?.storage?.used_gb||0),0)||0,n=a.stats?.projects?.reduce((r,c)=>r+(c.stats?.functions?.deployed||0),0)||0,x=a.stats?.projects?.reduce((r,c)=>r+(c.stats?.database?.tables||0),0)||0,o=a.stats?.projects?.reduce((r,c)=>r+(c.stats?.storage?.buckets||0),0)||0;return[{label:"Database",value:t>0?`${t} MB`:"--",icon:"i-ph:database",color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900/20",textColor:"text-blue-800 dark:text-blue-400"},{label:"Storage",value:s>0?`${s} GB`:"--",icon:"i-ph:folder",color:"text-green-500",bgColor:"bg-green-100 dark:bg-green-900/20",textColor:"text-green-800 dark:text-green-400"},{label:"Functions",value:n,icon:"i-ph:code",color:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/20",textColor:"text-purple-800 dark:text-purple-400"},{label:"Tables",value:x,icon:"i-ph:table",color:"text-orange-500",bgColor:"bg-orange-100 dark:bg-orange-900/20",textColor:"text-orange-800 dark:text-orange-400"},{label:"Buckets",value:o,icon:"i-ph:archive",color:"text-teal-500",bgColor:"bg-teal-100 dark:bg-teal-900/20",textColor:"text-teal-800 dark:text-teal-400"}]})().map((t,s)=>e.jsxs("div",{className:`flex flex-col p-3 rounded-lg border border-bolt-elements-borderColor ${t.bgColor}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`${t.icon} w-4 h-4 ${t.color}`}),e.jsx("span",{className:"text-xs text-bolt-elements-textSecondary",children:t.label})]}),e.jsx("span",{className:`text-lg font-medium ${t.textColor}`,children:t.value})]},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-3 bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"i-ph:database w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsx("span",{className:"text-xs font-medium text-bolt-elements-textPrimary",children:"Database"})]}),e.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary",children:[e.jsxs("div",{children:["Tables:"," ",a.stats?.projects?.reduce((t,s)=>t+(s.stats?.database?.tables||0),0)||"--"]}),e.jsxs("div",{children:["Size:"," ",(()=>{const t=a.stats?.projects?.reduce((s,n)=>s+(n.stats?.database?.size_mb||0),0)||0;return t>0?`${t} MB`:"--"})()]})]})]}),e.jsxs("div",{className:"p-3 bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"i-ph:folder w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsx("span",{className:"text-xs font-medium text-bolt-elements-textPrimary",children:"Storage"})]}),e.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary",children:[e.jsxs("div",{children:["Buckets:"," ",a.stats?.projects?.reduce((t,s)=>t+(s.stats?.storage?.buckets||0),0)||"--"]}),e.jsxs("div",{children:["Used:"," ",(()=>{const t=a.stats?.projects?.reduce((s,n)=>s+(n.stats?.storage?.used_gb||0),0)||0;return t>0?`${t} GB`:"--"})()]})]})]}),e.jsxs("div",{className:"p-3 bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"i-ph:code w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsx("span",{className:"text-xs font-medium text-bolt-elements-textPrimary",children:"Functions"})]}),e.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary",children:[e.jsxs("div",{children:["Deployed:"," ",a.stats?.projects?.reduce((t,s)=>t+(s.stats?.functions?.deployed||0),0)||"--"]}),e.jsxs("div",{children:["Invocations:"," ",a.stats?.projects?.reduce((t,s)=>t+(s.stats?.functions?.invocations||0),0)||"--"]})]})]})]})]}),B()]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-1 p-3 rounded-lg mb-4",children:e.jsxs("p",{className:"flex items-center gap-1 mb-1",children:[e.jsx("span",{className:"i-ph:lightbulb w-3.5 h-3.5 text-bolt-elements-icon-success dark:text-bolt-elements-icon-success"}),e.jsx("span",{className:"font-medium",children:"Tip:"})," You can also set the"," ",e.jsx("code",{className:"px-1 py-0.5 bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-2 rounded",children:"VITE_SUPABASE_ACCESS_TOKEN"})," ","environment variable to connect automatically."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Access Token"}),e.jsx("input",{type:"password",value:b,onChange:t=>f(t.target.value),disabled:j,placeholder:"Enter your Supabase access token",className:i("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1a2332]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-bolt-elements-borderColorActive","disabled:opacity-50")}),e.jsx("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:e.jsxs("a",{href:"https://supabase.com/dashboard/account/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-bolt-elements-borderColorActive hover:underline inline-flex items-center gap-1",children:["Get your token",e.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})]})})]}),e.jsx("button",{onClick:F,disabled:j||!b,className:i("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-[#303030] text-white","hover:bg-[#5E41D0] hover:text-white","disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200","transform active:scale-95"),children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})})]})})})]})}export{Q as default};
