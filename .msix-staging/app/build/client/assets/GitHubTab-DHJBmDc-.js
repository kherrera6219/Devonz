import{j as e,w as T,r as p}from"./components-BmgQfFUx.js";import{as as A,m as N,bd as _,r as P,t as L,v as H,be as $}from"./Header-C4AWQck-.js";import{c as x,B as j}from"./Button-BQzjmXH6.js";import{f as B}from"./formatSize-D-zwpqud.js";import"./logs-DZu2vR68.js";import"./mobile-BXmnRaCS.js";function I({repository:t,variant:a="default",onSelect:s,showHealthScore:n=!1,showExtendedMetrics:l=!1,className:i=""}){const o=Math.floor((Date.now()-new Date(t.updated_at).getTime())/864e5),r=()=>o===0?"Today":o===1?"1 day ago":o<7?`${o} days ago`:o<30?`${Math.floor(o/7)} weeks ago`:new Date(t.updated_at).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),c=()=>{const d=t.stargazers_count>0,m=o<30,k=(t.contributors_count||0)>1,G=!!t.description,D=(t.topics||[]).length>0,R=!!t.license,w=[d,m,k,G,D,R].filter(Boolean).length,C=6;return{percentage:Math.round(w/C*100),color:(S=>S>=5?"text-green-500":S>=3?"text-yellow-500":"text-red-500")(w),score:w,maxScore:C}},h=()=>{const d=o<7,m=o<30&&!t.archived&&t.stargazers_count>0;return t.archived?"bg-gray-500":d?"bg-green-500":m?"bg-blue-500":"bg-yellow-500"},b=()=>t.archived?"Archived":o<7?"Very Active":o<30&&t.stargazers_count>0?"Healthy":"Needs Attention",g=n?c():null;if(a==="compact")return e.jsxs("button",{onClick:s,className:x("w-full text-left p-3 rounded-lg border border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive hover:bg-bolt-elements-background-depth-1 transition-all duration-200",i),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:t.name}),t.private&&e.jsx("div",{className:"i-ph:lock size-3 text-bolt-elements-textTertiary"}),t.fork&&e.jsx("div",{className:"i-ph:git-fork size-3 text-bolt-elements-textTertiary"}),t.archived&&e.jsx("div",{className:"i-ph:archive size-3 text-bolt-elements-textTertiary"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:star size-3"}),t.stargazers_count]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:git-fork size-3"}),t.forks_count]})]})]}),t.description&&e.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mb-2 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textTertiary",children:[t.language&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-current opacity-60"}),t.language]}),t.size&&e.jsx("span",{children:B(t.size*1024)})]}),e.jsxs("span",{className:"flex items-center gap-1 text-xs text-bolt-elements-textTertiary",children:[e.jsx("div",{className:"i-ph:clock size-3"}),r()]})]})]});const f=s?"button":"div",u=s?{onClick:s,className:x("group cursor-pointer hover:border-bolt-elements-borderColorActive dark:hover:border-bolt-elements-borderColorActive transition-all duration-200",i)}:{className:i};return e.jsxs(f,{...u,className:x("block p-4 rounded-lg bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor relative",u.className),children:[a==="detailed"&&e.jsx("div",{className:`absolute top-2 right-2 w-2 h-2 rounded-full ${h()}`,title:`Repository Health: ${b()}`}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:git-branch size-4 text-bolt-elements-icon-tertiary"}),e.jsx("h5",{className:x("text-sm font-medium text-bolt-elements-textPrimary",s&&"group-hover:text-bolt-elements-item-contentAccent transition-colors"),children:t.name}),t.fork&&e.jsx("span",{title:"Forked repository",children:e.jsx("div",{className:"i-ph:git-fork size-3 text-bolt-elements-textTertiary"})}),t.archived&&e.jsx("span",{title:"Archived repository",children:e.jsx("div",{className:"i-ph:archive size-3 text-bolt-elements-textTertiary"})})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[e.jsxs("span",{className:"flex items-center gap-1",title:"Stars",children:[e.jsx("div",{className:"i-ph:star size-3.5 text-bolt-elements-icon-warning"}),t.stargazers_count.toLocaleString()]}),e.jsxs("span",{className:"flex items-center gap-1",title:"Forks",children:[e.jsx("div",{className:"i-ph:git-fork size-3.5 text-bolt-elements-icon-info"}),t.forks_count.toLocaleString()]}),l&&t.issues_count!==void 0&&e.jsxs("span",{className:"flex items-center gap-1",title:"Open Issues",children:[e.jsx("div",{className:"i-ph:circle size-3.5 text-bolt-elements-icon-error"}),t.issues_count]}),l&&t.pull_requests_count!==void 0&&e.jsxs("span",{className:"flex items-center gap-1",title:"Pull Requests",children:[e.jsx("div",{className:"i-ph:git-pull-request size-3.5 text-bolt-elements-icon-success"}),t.pull_requests_count]})]})]}),e.jsxs("div",{className:"space-y-2",children:[t.description&&e.jsx("p",{className:"text-xs text-bolt-elements-textSecondary line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.license&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-bolt-elements-background-depth-2 text-bolt-elements-textTertiary",children:t.license.spdx_id||t.license.name}),t.topics&&t.topics.slice(0,2).map(d=>e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:d},d)),t.archived&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",children:"Archived"}),t.fork&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:"Fork"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[e.jsxs("span",{className:"flex items-center gap-1",title:"Default Branch",children:[e.jsx("div",{className:"i-ph:git-branch size-3.5"}),t.default_branch]}),l&&t.branches_count&&e.jsxs("span",{className:"flex items-center gap-1",title:"Total Branches",children:[e.jsx("div",{className:"i-ph:git-fork size-3.5"}),t.branches_count]}),l&&t.contributors_count&&e.jsxs("span",{className:"flex items-center gap-1",title:"Contributors",children:[e.jsx("div",{className:"i-ph:users size-3.5"}),t.contributors_count]}),t.size&&e.jsxs("span",{className:"flex items-center gap-1",title:"Size",children:[e.jsx("div",{className:"i-ph:database size-3.5"}),(t.size/1024).toFixed(1),"MB"]}),e.jsxs("span",{className:"flex items-center gap-1",title:"Last Updated",children:[e.jsx("div",{className:"i-ph:clock size-3.5"}),r()]}),t.topics&&t.topics.length>0&&e.jsxs("span",{className:"flex items-center gap-1",title:`Topics: ${t.topics.join(", ")}`,children:[e.jsx("div",{className:"i-ph:tag size-3.5"}),t.topics.length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[g&&e.jsxs("div",{className:"flex items-center gap-1",title:`Health Score: ${g.percentage}% (${g.score}/${g.maxScore})`,children:[e.jsx("div",{className:`i-ph:heart size-3.5 ${g.color}`}),e.jsxs("span",{className:`text-xs font-medium ${g.color}`,children:[g.percentage,"%"]})]}),s&&e.jsxs("span",{className:x("flex items-center gap-1 ml-2 transition-colors","group-hover:text-bolt-elements-item-contentAccent"),children:[e.jsx("div",{className:"i-ph:arrow-square-out size-3.5"}),"View"]})]})]})]})]})}function M({message:t="Loading...",size:a="md",className:s=""}){const n={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"},l={sm:"text-sm",md:"text-base",lg:"text-lg"};return e.jsxs("div",{className:x("flex flex-col items-center justify-center py-8 text-bolt-elements-textSecondary",s),children:[e.jsx("div",{className:x("i-ph:spinner animate-spin mb-2",n[a])}),e.jsx("p",{className:x("text-bolt-elements-textSecondary",l[a]),children:t})]})}function z({title:t="Error",message:a,onRetry:s,retryLabel:n="Try Again",size:l="md",className:i=""}){const o={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"},r={sm:"text-sm",md:"text-base",lg:"text-lg"};return e.jsxs("div",{className:x("flex flex-col items-center justify-center py-8 text-center",i),children:[e.jsx("div",{className:x("i-ph:warning-circle text-red-500 mb-2",o[l])}),e.jsx("h3",{className:x("font-medium text-bolt-elements-textPrimary mb-1",r[l]),children:t}),e.jsx("p",{className:x("text-bolt-elements-textSecondary mb-4",r[l]),children:a}),s&&e.jsx("button",{onClick:s,className:"px-4 py-2 bg-bolt-elements-item-contentAccent text-white rounded-lg hover:bg-bolt-elements-item-contentAccent/90 transition-colors",children:n})]})}function O({status:t,message:a,timestamp:s,className:n=""}){if(!t)return null;const l=()=>{switch(t){case"success":return"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-700";case"error":return"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700";case"testing":return"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-700";default:return"bg-gray-50 border-gray-200 dark:bg-gray-900/20 dark:border-gray-700"}},i=()=>{switch(t){case"success":return e.jsx("div",{className:"i-ph:check-circle size-5 text-green-600 dark:text-green-400"});case"error":return e.jsx("div",{className:"i-ph:warning-circle size-5 text-red-600 dark:text-red-400"});case"testing":return e.jsx("div",{className:"i-ph:spinner size-5 animate-spin text-blue-600 dark:text-blue-400"});default:return e.jsx("div",{className:"i-ph:info size-5 text-gray-600 dark:text-gray-400"})}},o=()=>{switch(t){case"success":return"text-green-800 dark:text-green-200";case"error":return"text-red-800 dark:text-red-200";case"testing":return"text-blue-800 dark:text-blue-200";default:return"text-gray-800 dark:text-gray-200"}};return e.jsxs("div",{className:x(`p-4 rounded-lg border ${l()}`,n),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i(),e.jsx("span",{className:x("text-sm font-medium",o()),children:a||t})]}),s&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(s).toLocaleString()})]})}function E({connectionTest:t,onTestConnection:a}){const{isConnected:s,isLoading:n,isConnecting:l,connect:i,disconnect:o,error:r}=A(),[c,h]=T.useState(""),[b,g]=T.useState("classic"),f=async u=>{if(u.preventDefault(),console.log("handleConnect called with token:",c?"token provided":"no token","tokenType:",b),!c.trim()){console.log("No token provided, returning early");return}try{console.log("Calling connect function..."),await i(c,b),console.log("Connect function completed successfully"),h("")}catch(d){console.log("Connect function failed:",d)}};return n?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),e.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Loading connection..."})]})}):e.jsx(N.div,{className:"bg-bolt-elements-background dark:bg-bolt-elements-background border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs("div",{className:"p-6 space-y-6",children:[!s&&e.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-1 p-3 rounded-lg mb-4",children:[e.jsxs("p",{className:"flex items-center gap-1 mb-1",children:[e.jsx("span",{className:"i-ph:lightbulb w-3.5 h-3.5 text-bolt-elements-icon-success dark:text-bolt-elements-icon-success"}),e.jsx("span",{className:"font-medium",children:"Tip:"})," You can also set the"," ",e.jsx("code",{className:"px-1 py-0.5 bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-2 rounded",children:"VITE_GITHUB_ACCESS_TOKEN"})," ","environment variable to connect automatically."]}),e.jsxs("p",{children:["For fine-grained tokens, also set"," ",e.jsx("code",{className:"px-1 py-0.5 bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-2 rounded",children:"VITE_GITHUB_TOKEN_TYPE=fine-grained"})]})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary mb-2",children:"Token Type"}),e.jsxs("select",{value:b,onChange:u=>g(u.target.value),disabled:l||s,className:x("w-full px-3 py-2 rounded-lg text-sm","bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-1","border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor","text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary","focus:outline-none focus:ring-1 focus:ring-bolt-elements-item-contentAccent dark:focus:ring-bolt-elements-item-contentAccent","disabled:opacity-50"),children:[e.jsx("option",{value:"classic",children:"Personal Access Token (Classic)"}),e.jsx("option",{value:"fine-grained",children:"Fine-grained Token"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary mb-2",children:b==="classic"?"Personal Access Token":"Fine-grained Token"}),e.jsx("input",{type:"password",value:c,onChange:u=>h(u.target.value),disabled:l||s,placeholder:`Enter your GitHub ${b==="classic"?"personal access token":"fine-grained token"}`,className:x("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1a2332]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-bolt-elements-borderColorActive","disabled:opacity-50")}),e.jsxs("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:[e.jsxs("a",{href:`https://github.com/settings/tokens${b==="fine-grained"?"/beta":"/new"}`,target:"_blank",rel:"noopener noreferrer",className:"text-bolt-elements-borderColorActive hover:underline inline-flex items-center gap-1",children:["Get your token",e.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})]}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsxs("span",{children:["Required scopes:"," ",b==="classic"?"repo, read:org, read:user":"Repository access, Organization access"]})]})]})]}),r&&e.jsx("div",{className:"p-4 rounded-lg bg-red-50 border border-red-200 dark:bg-red-900/20 dark:border-red-700",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:r})}),e.jsx("div",{className:"flex items-center justify-between",children:s?e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:o,type:"button",className:x("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-red-500 text-white","hover:bg-red-600"),children:[e.jsx("div",{className:"i-ph:plug w-4 h-4"}),"Disconnect"]}),e.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:check-circle w-4 h-4 text-green-500"}),"Connected to GitHub"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{variant:"outline",onClick:()=>window.open("https://github.com/dashboard","_blank","noopener,noreferrer"),className:"flex items-center gap-2 hover:bg-bolt-elements-item-backgroundActive/10 hover:text-bolt-elements-textPrimary dark:hover:text-bolt-elements-textPrimary transition-colors",children:[e.jsx("div",{className:"i-ph:layout w-4 h-4"}),"Dashboard"]}),e.jsx(j,{onClick:a,disabled:t?.status==="testing",variant:"outline",className:"flex items-center gap-2 hover:bg-bolt-elements-item-backgroundActive/10 hover:text-bolt-elements-textPrimary dark:hover:text-bolt-elements-textPrimary transition-colors",children:t?.status==="testing"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Test Connection"]})})]})]}):e.jsx("button",{type:"submit",disabled:l||!c.trim(),className:x("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-[#303030] text-white","hover:bg-[#5E41D0] hover:text-white","disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200","transform active:scale-95"),children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})})})]})]})})}function U({user:t,className:a=""}){return e.jsxs("div",{className:`flex items-center gap-4 p-4 bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-1 rounded-lg ${a}`,children:[e.jsx("img",{src:t.avatar_url,alt:t.login,className:"w-12 h-12 rounded-full border-2 border-bolt-elements-item-contentAccent dark:border-bolt-elements-item-contentAccent"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:t.name||t.login}),e.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:["@",t.login]}),t.bio&&e.jsx("p",{className:"text-xs text-bolt-elements-textTertiary dark:text-bolt-elements-textTertiary mt-1",children:t.bio}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-bolt-elements-textSecondary",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:users w-3 h-3"}),t.followers," followers"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:folder w-3 h-3"}),t.public_repos," public repos"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:file-text w-3 h-3"}),t.public_gists," gists"]})]})]})]})}class F extends p.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,s){console.error("GitHub Error Boundary caught an error:",a,s),this.props.onError&&this.props.onError(a,s)}handleRetry=()=>{this.setState({hasError:!1,error:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center space-y-4 bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-50 dark:bg-red-900/20 flex items-center justify-center",children:e.jsx("div",{className:"i-ph:warning w-6 h-6 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary mb-2",children:"GitHub Integration Error"}),e.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mb-4 max-w-md",children:"Something went wrong while loading GitHub data. This could be due to network issues, API limits, or a temporary problem."}),this.state.error&&e.jsxs("details",{className:"text-xs text-bolt-elements-textTertiary mb-4",children:[e.jsx("summary",{className:"cursor-pointer hover:text-bolt-elements-textSecondary",children:"Show error details"}),e.jsx("pre",{className:"mt-2 p-2 bg-bolt-elements-background-depth-2 rounded text-left overflow-auto",children:this.state.error.message})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"outline",size:"sm",onClick:this.handleRetry,children:"Try Again"}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"Reload Page"})]})]}):this.props.children}}function q({connection:t,isExpanded:a,onToggleExpanded:s}){const{stats:n,isLoading:l,isRefreshing:i,refreshStats:o,isStale:r}=_(t,{autoFetch:!0,cacheTimeout:18e5},!t?.token);return e.jsx(F,{children:e.jsx(K,{stats:n,isLoading:l,isRefreshing:i,refreshStats:o,isStale:r,isExpanded:a,onToggleExpanded:s})})}function K({stats:t,isLoading:a,isRefreshing:s,refreshStats:n,isStale:l,isExpanded:i,onToggleExpanded:o}){return t?e.jsx("div",{className:"mt-6 border-t border-bolt-elements-borderColor dark:border-bolt-elements-borderColor pt-6",children:e.jsxs(P,{open:i,onOpenChange:o,children:[e.jsx(L,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-bolt-elements-background dark:bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive/70 dark:hover:border-bolt-elements-borderColorActive/70 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:chart-bar w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsxs("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:["GitHub Stats",l&&e.jsx("span",{className:"text-bolt-elements-textTertiary ml-1",children:"(Stale)"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{onClick:r=>{r.stopPropagation(),n()},disabled:s,variant:"outline",size:"sm",className:"text-xs",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap w-3 h-3 animate-spin"}),"Refreshing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:arrows-clockwise w-3 h-3"}),"Refresh"]})}),e.jsx("div",{className:x("i-ph:caret-down w-4 h-4 transform transition-transform duration-200 text-bolt-elements-textSecondary",i?"rotate-180":"")})]})]})}),e.jsx(H,{className:"overflow-hidden",children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Top Languages"}),t.mostUsedLanguages&&t.mostUsedLanguages.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:t.mostUsedLanguages.slice(0,15).map(({language:r,bytes:c,repos:h})=>e.jsxs("span",{className:"px-3 py-1 text-xs rounded-full bg-bolt-elements-sidebar-buttonBackgroundDefault text-bolt-elements-sidebar-buttonText",title:`${r}: ${(c/1024/1024).toFixed(2)}MB across ${h} repos`,children:[r," (",h,")"]},r))}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Based on actual codebase size across repositories"})]}):e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(t.languages).sort(([,r],[,c])=>c-r).slice(0,5).map(([r])=>e.jsx("span",{className:"px-3 py-1 text-xs rounded-full bg-bolt-elements-sidebar-buttonBackgroundDefault text-bolt-elements-sidebar-buttonText",children:r},r))})]}),e.jsxs("div",{className:"mb-6 p-4 bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor",children:[e.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"GitHub Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:(t.publicRepos||0)+(t.privateRepos||0)}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Total Repositories"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:t.totalBranches||0}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Total Branches"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:t.organizations?.length||0}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Organizations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:Object.keys(t.languages).length}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Languages Used"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-2",children:"Activity Summary"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{label:"Total Branches",value:t.totalBranches||0,icon:"i-ph:git-branch",iconColor:"text-bolt-elements-icon-info"},{label:"Contributors",value:t.totalContributors||0,icon:"i-ph:users",iconColor:"text-bolt-elements-icon-success"},{label:"Issues",value:t.totalIssues||0,icon:"i-ph:circle",iconColor:"text-bolt-elements-icon-warning"},{label:"Pull Requests",value:t.totalPullRequests||0,icon:"i-ph:git-pull-request",iconColor:"text-bolt-elements-icon-accent"}].map((r,c)=>e.jsxs("div",{className:"flex flex-col p-3 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor",children:[e.jsx("span",{className:"text-xs text-bolt-elements-textSecondary",children:r.label}),e.jsxs("span",{className:"text-lg font-medium text-bolt-elements-textPrimary flex items-center gap-1",children:[e.jsx("div",{className:`${r.icon} w-4 h-4 ${r.iconColor}`}),r.value.toLocaleString()]})]},c))})]}),t.organizations&&t.organizations.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-2",children:"Organizations"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.organizations.map(r=>e.jsxs("a",{href:r.html_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive dark:hover:border-bolt-elements-borderColorActive transition-all duration-200",children:[e.jsx("img",{src:r.avatar_url,alt:r.login,className:"w-8 h-8 rounded-full border border-bolt-elements-borderColor"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h6",{className:"text-sm font-medium text-bolt-elements-textPrimary truncate",children:r.name||r.login}),e.jsx("p",{className:"text-xs text-bolt-elements-textSecondary truncate",children:r.login}),r.description&&e.jsx("p",{className:"text-xs text-bolt-elements-textTertiary truncate",children:r.description})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-bolt-elements-textSecondary",children:[r.public_repos&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:folder w-3 h-3"}),r.public_repos]}),r.followers&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:users w-3 h-3"}),r.followers]})]})]},r.login))})]}),e.jsx("div",{className:"pt-2 border-t border-bolt-elements-borderColor",children:e.jsxs("span",{className:"text-xs text-bolt-elements-textSecondary",children:["Last updated: ",t.lastUpdated?new Date(t.lastUpdated).toLocaleString():"Never"]})})]})})]})}):e.jsx("div",{className:"mt-6 border-t border-bolt-elements-borderColor dark:border-bolt-elements-borderColor pt-6",children:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"flex items-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),e.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Loading GitHub stats..."})]}):e.jsx("span",{className:"text-bolt-elements-textSecondary",children:"No stats available"})})})})}function V({isLoading:t,isRefreshing:a=!1,error:s,onRetry:n,onRefresh:l,children:i,className:o="",loadingMessage:r="Loading...",refreshingMessage:c="Refreshing...",showProgress:h=!1,progressSteps:b=[]}){const[g,f]=p.useState(!1),u=p.useMemo(()=>{if(!h||b.length===0)return 0;const m=b.filter(k=>k.completed).length;return Math.round(m/b.length*100)},[h,b]),d=p.useCallback(()=>{f(m=>!m)},[]);return t?e.jsxs("div",{className:x("flex flex-col items-center justify-center py-8",o),children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"i-ph:spinner w-8 h-8 animate-spin text-bolt-elements-item-contentAccent"}),h&&u>0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-medium text-bolt-elements-item-contentAccent",children:[u,"%"]})})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:r}),h&&b.length>0&&e.jsxs("div",{className:"w-full max-w-sm",children:[e.jsx("div",{className:"w-full bg-bolt-elements-background-depth-2 rounded-full h-2 mb-3",children:e.jsx(N.div,{className:"bg-bolt-elements-item-contentAccent h-2 rounded-full",initial:{width:0},animate:{width:`${u}%`},transition:{duration:.5,ease:"easeOut"}})}),e.jsxs("button",{onClick:d,className:"flex items-center justify-center gap-2 text-xs text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors",children:[e.jsx("span",{children:"Show details"}),e.jsx("div",{className:x("i-ph:caret-down w-3 h-3 transform transition-transform duration-200",g?"rotate-180":"")})]}),e.jsx($,{children:g&&e.jsx(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-3 space-y-2 overflow-hidden",children:b.map(m=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[m.error?e.jsx("div",{className:"i-ph:warning-circle w-3 h-3 text-red-500 flex-shrink-0"}):m.completed?e.jsx("div",{className:"i-ph:check-circle w-3 h-3 text-green-500 flex-shrink-0"}):m.loading?e.jsx("div",{className:"i-ph:spinner w-3 h-3 animate-spin text-bolt-elements-item-contentAccent flex-shrink-0"}):e.jsx("div",{className:"w-3 h-3 rounded-full border border-bolt-elements-borderColor flex-shrink-0"}),e.jsx("span",{className:x(m.error?"text-red-500":m.completed?"text-green-600 dark:text-green-400":m.loading?"text-bolt-elements-textPrimary":"text-bolt-elements-textSecondary"),children:m.label})]},m.key))})})]})]})]}):s?e.jsxs("div",{className:x("flex flex-col items-center justify-center py-8 text-center space-y-4",o),children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-50 dark:bg-red-900/20 flex items-center justify-center",children:e.jsx("div",{className:"i-ph:warning-circle w-5 h-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-1",children:"Failed to Load"}),e.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mb-4 max-w-sm",children:s})]}),e.jsxs("div",{className:"flex gap-2",children:[n&&e.jsxs(j,{variant:"outline",size:"sm",onClick:n,className:"text-xs",children:[e.jsx("div",{className:"i-ph:arrows-clockwise w-3 h-3 mr-1"}),"Try Again"]}),l&&e.jsxs(j,{variant:"outline",size:"sm",onClick:l,className:"text-xs",children:[e.jsx("div",{className:"i-ph:arrows-clockwise w-3 h-3 mr-1"}),"Refresh"]})]})]}):e.jsxs("div",{className:x("relative",o),children:[a&&e.jsx("div",{className:"absolute top-0 right-0 z-10",children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor rounded-lg shadow-sm",children:[e.jsx("div",{className:"i-ph:spinner w-3 h-3 animate-spin text-bolt-elements-item-contentAccent"}),e.jsx("span",{className:"text-xs text-bolt-elements-textSecondary",children:c})]})}),i]})}class v{static _cachePrefix="github_";static _cacheKeys=["github_connection","github_stats_cache","github_repositories_cache","github_user_cache","github_rate_limits"];static getCacheEntries(){const a=[];for(const s of this._cacheKeys)try{const n=localStorage.getItem(s);if(n){const l=JSON.parse(n);a.push({key:s,size:new Blob([n]).size,timestamp:l.timestamp||Date.now(),lastAccessed:l.lastAccessed||Date.now(),data:l})}}catch(n){console.warn(`Failed to parse cache entry: ${s}`,n)}return a.sort((s,n)=>n.lastAccessed-s.lastAccessed)}static getCacheStats(){const a=this.getCacheEntries();if(a.length===0)return{totalSize:0,totalEntries:0,oldestEntry:0,newestEntry:0};const s=a.reduce((l,i)=>l+i.size,0),n=a.map(l=>l.timestamp);return{totalSize:s,totalEntries:a.length,oldestEntry:Math.min(...n),newestEntry:Math.max(...n)}}static clearCache(a){const s=a||this._cacheKeys;for(const n of s)localStorage.removeItem(n)}static clearExpiredCache(a=24*60*60*1e3){const s=this.getCacheEntries(),n=Date.now();let l=0;for(const i of s)n-i.timestamp>a&&(localStorage.removeItem(i.key),l++);return l}static compactCache(){const a=this.getCacheEntries();for(const s of a)try{const n={...s.data,lastAccessed:Date.now()};localStorage.setItem(s.key,JSON.stringify(n))}catch(n){console.warn(`Failed to compact cache entry: ${s.key}`,n)}}static formatSize(a){if(a===0)return"0 B";const s=1024,n=["B","KB","MB","GB"],l=Math.floor(Math.log(a)/Math.log(s));return parseFloat((a/Math.pow(s,l)).toFixed(1))+" "+n[l]}}function J({className:t="",showStats:a=!0}){const[s,n]=p.useState([]),[l,i]=p.useState(!1),[o,r]=p.useState(null),c=p.useCallback(()=>{n(v.getCacheEntries())},[]);p.useEffect(()=>{c()},[c]);const h=p.useMemo(()=>v.getCacheStats(),[s]),b=p.useCallback(async()=>{i(!0);try{v.clearCache(),r(Date.now()),c(),setTimeout(()=>{window.location.reload()},1e3)}catch(d){console.error("Failed to clear cache:",d)}finally{i(!1)}},[c]),g=p.useCallback(()=>{i(!0);try{const d=v.clearExpiredCache();c(),d>0&&console.log(`Removed ${d} expired cache entries`)}catch(d){console.error("Failed to clear expired cache:",d)}finally{i(!1)}},[c]),f=p.useCallback(()=>{i(!0);try{v.compactCache(),c()}catch(d){console.error("Failed to compact cache:",d)}finally{i(!1)}},[c]),u=p.useCallback(d=>{i(!0);try{v.clearCache([d]),c()}catch(m){console.error(`Failed to clear cache key: ${d}`,m)}finally{i(!1)}},[c]);return!a&&s.length===0?null:e.jsxs("div",{className:x("space-y-4 p-4 bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor rounded-lg",t),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:database w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsx("h3",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"GitHub Cache Management"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(j,{variant:"outline",size:"sm",onClick:c,disabled:l,children:e.jsx("div",{className:x("i-ph:arrows-clockwise w-3 h-3",l?"animate-spin":"")})})})]}),a&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"i-ph:hard-drive w-3 h-3 text-bolt-elements-textSecondary"}),e.jsx("span",{className:"text-xs font-medium text-bolt-elements-textSecondary",children:"Total Size"})]}),e.jsx("p",{className:"text-sm font-semibold text-bolt-elements-textPrimary",children:v.formatSize(h.totalSize)})]}),e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"i-ph:database w-3 h-3 text-bolt-elements-textSecondary"}),e.jsx("span",{className:"text-xs font-medium text-bolt-elements-textSecondary",children:"Entries"})]}),e.jsx("p",{className:"text-sm font-semibold text-bolt-elements-textPrimary",children:h.totalEntries})]}),e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"i-ph:clock w-3 h-3 text-bolt-elements-textSecondary"}),e.jsx("span",{className:"text-xs font-medium text-bolt-elements-textSecondary",children:"Oldest"})]}),e.jsx("p",{className:"text-xs text-bolt-elements-textSecondary",children:h.oldestEntry?new Date(h.oldestEntry).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"i-ph:check-circle w-3 h-3 text-bolt-elements-textSecondary"}),e.jsx("span",{className:"text-xs font-medium text-bolt-elements-textSecondary",children:"Status"})]}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:h.totalEntries>0?"Active":"Empty"})]})]}),s.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-xs font-medium text-bolt-elements-textSecondary",children:["Cache Entries (",s.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-bolt-elements-background-depth-2 rounded border border-bolt-elements-borderColor",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-bolt-elements-textPrimary truncate",children:d.key.replace("github_","")}),e.jsxs("p",{className:"text-xs text-bolt-elements-textSecondary",children:[v.formatSize(d.size)," • ",new Date(d.lastAccessed).toLocaleString()]})]}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>u(d.key),disabled:l,className:"ml-2",children:e.jsx("div",{className:"i-ph:trash w-3 h-3 text-red-500"})})]},d.key))})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-bolt-elements-borderColor",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:g,disabled:l,className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:clock w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"Clear Expired"})]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:f,disabled:l,className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:arrows-clockwise w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"Compact"})]}),s.length>0&&e.jsxs(j,{variant:"outline",size:"sm",onClick:b,disabled:l,className:"flex items-center gap-1 text-red-600 hover:text-red-700 border-red-200 hover:border-red-300",children:[e.jsx("div",{className:"i-ph:trash w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"Clear All"})]})]}),o&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded text-xs text-green-700 dark:text-green-400",children:[e.jsx("div",{className:"i-ph:check-circle w-3 h-3"}),e.jsxs("span",{children:["Cache cleared successfully at ",new Date(o).toLocaleTimeString()]})]})]})}const y=()=>e.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:e.jsx("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})});function ae(){const{connection:t,isConnected:a,isLoading:s,error:n,testConnection:l}=A(),{stats:i,isLoading:o,error:r}=_(t,{autoFetch:!0,cacheTimeout:30*60*1e3},a&&t?!t.token:!1),[c,h]=p.useState(null),[b,g]=p.useState(!1),[f,u]=p.useState(!1),d=async()=>{if(!t?.user){h({status:"error",message:"No connection established",timestamp:Date.now()});return}h({status:"testing",message:"Testing connection..."});try{const m=await l();h(m?{status:"success",message:`Connected successfully as ${t.user.login}`,timestamp:Date.now()}:{status:"error",message:"Connection test failed",timestamp:Date.now()})}catch(m){h({status:"error",message:`Connection failed: ${m instanceof Error?m.message:"Unknown error"}`,timestamp:Date.now()})}};return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{}),e.jsx("h2",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"GitHub Integration"})]}),e.jsx(M,{message:"Checking GitHub connection..."})]}):n&&!t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{}),e.jsx("h2",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"GitHub Integration"})]}),e.jsx(z,{title:"Connection Error",message:n,onRetry:()=>window.location.reload(),retryLabel:"Reload Page"})]}):!a||!t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{}),e.jsx("h2",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"GitHub Integration"})]}),e.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Connect your GitHub account to enable advanced repository management features, statistics, and seamless integration."}),e.jsx(E,{connectionTest:c,onTestConnection:d})]}):e.jsx(F,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(N.div,{className:"flex items-center justify-between gap-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{}),e.jsx("h2",{className:"text-lg font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:"GitHub Integration"})]}),e.jsx("div",{className:"flex items-center gap-2",children:t?.rateLimit&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-bolt-elements-background-depth-1 rounded-lg text-xs",children:[e.jsx("div",{className:"i-ph:cloud w-4 h-4 text-bolt-elements-textSecondary"}),e.jsxs("span",{className:"text-bolt-elements-textSecondary",children:["API: ",t.rateLimit.remaining,"/",t.rateLimit.limit]})]})})]}),e.jsx("p",{className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:"Manage your GitHub integration with advanced repository features and comprehensive statistics"}),e.jsx(O,{status:c?.status||null,message:c?.message,timestamp:c?.timestamp}),e.jsx(E,{connectionTest:c,onTestConnection:d}),t.user&&e.jsx(U,{user:t.user}),e.jsx(q,{connection:t,isExpanded:b,onToggleExpanded:g}),i?.repos&&i.repos.length>0&&e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"border-t border-bolt-elements-borderColor pt-6",children:e.jsxs(P,{open:f,onOpenChange:u,children:[e.jsx(L,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-bolt-elements-background dark:bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive/70 dark:hover:border-bolt-elements-borderColorActive/70 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:folder w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsxs("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:["All Repositories (",i.repos.length,")"]})]}),e.jsx("div",{className:x("i-ph:caret-down w-4 h-4 transform transition-transform duration-200 text-bolt-elements-textSecondary",f?"rotate-180":"")})]})}),e.jsx(H,{className:"overflow-hidden",children:e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(f?i.repos:i.repos.slice(0,12)).map(m=>e.jsx(I,{repository:m,variant:"detailed",showHealthScore:!0,showExtendedMetrics:!0,onSelect:()=>window.open(m.html_url,"_blank","noopener,noreferrer")},m.full_name))}),i.repos.length>12&&!f&&e.jsx("div",{className:"text-center",children:e.jsxs(j,{variant:"outline",onClick:()=>u(!0),className:"text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary",children:["Show ",i.repos.length-12," more repositories"]})})]})})]})}),r&&!i&&e.jsx(z,{title:"Failed to Load Statistics",message:r,onRetry:()=>window.location.reload(),retryLabel:"Retry"}),o&&!i&&e.jsx(V,{isLoading:o,loadingMessage:"Loading GitHub statistics...",showProgress:!0,progressSteps:[{key:"user",label:"Fetching user info",completed:!!t?.user,loading:!t?.user},{key:"repos",label:"Loading repositories",completed:!1,loading:!0},{key:"stats",label:"Calculating statistics",completed:!1},{key:"cache",label:"Updating cache",completed:!1}],children:e.jsx("div",{})}),a&&t&&e.jsx("div",{className:"mt-8 pt-6 border-t border-bolt-elements-borderColor",children:e.jsx(J,{showStats:!0})})]})})}export{ae as default};
