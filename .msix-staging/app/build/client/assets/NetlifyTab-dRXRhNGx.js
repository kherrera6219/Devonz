import{r as m,j as e}from"./components-BmgQfFUx.js";import{b as le,a as r,B as v,c as u}from"./Button-BQzjmXH6.js";import{n as re,i as oe,u as T}from"./netlify-chCXiqNy.js";import{m as E,r as ie,t as ce,v as de,h as S}from"./Header-C4AWQck-.js";import{B as f}from"./Badge-Bv7eozhH.js";import"./logs-DZu2vR68.js";import"./mobile-BXmnRaCS.js";const me=()=>e.jsx("svg",{viewBox:"0 0 40 40",className:"w-5 h-5",children:e.jsx("path",{fill:"currentColor",d:"M28.589 14.135l-.014-.006c-.008-.003-.016-.006-.023-.013a.11.11 0 0 1-.028-.093l.773-4.726 3.625 3.626-3.77 1.604a.083.083 0 0 1-.033.006h-.015c-.005-.003-.01-.007-.02-.017a1.716 1.716 0 0 0-.495-.381zm5.258-.288l3.876 3.876c.805.806 1.208 1.208 1.674 1.355a2 2 0 0 1 1.206 0c.466-.148.869-.55 1.674-1.356L8.73 28.73l2.349-3.643c.011-.018.022-.034.04-.047.025-.018.061-.01.091 0a2.434 2.434 0 0 0 1.638-.083c.027-.01.054-.017.075.002a.19.19 0 0 1 .028.032L21.95 38.05zM7.863 27.863L5.8 25.8l4.074-1.738a.084.084 0 0 1 .033-.007c.034 0 .054.034.072.065a2.91 2.91 0 0 0 .13.184l.013.016c.012.017.004.034-.008.05l-2.25 3.493zm-2.976-2.976l-2.61-2.61c-.444-.444-.766-.766-.99-1.043l7.936 1.646a.84.84 0 0 0 .03.005c.049.008.103.017.103.063 0 .05-.059.073-.109.092l-.023.01-4.337 1.837zM.831 19.892a2 2 0 0 1 .09-.495c.148-.466.55-.868 1.356-1.674l3.34-3.34a2175.525 2175.525 0 0 0 4.626 6.687c.027.036.057.076.026.106-.146.161-.292.337-.395.528a.16.16 0 0 1-.05.062c-.013.008-.027.005-.042.002H9.78L.831 19.892zm5.68-6.403l4.491-4.491c.422.185 1.958.834 3.332 1.414 1.04.44 1.988.84 2.286.97.03.012.057.024.07.054.008.018.004.041 0 .06a2.003 2.003 0 0 0 .523 1.828c.03.03 0 .073-.026.11l-.014.021-4.56 7.063c-.012.02-.023.037-.043.05-.024.015-.058.008-.086.001a2.274 2.274 0 0 0-.543-.074c-.164 0-.342.03-.522.063h-.001c-.02.003-.038.007-.054-.005a.21.21 0 0 1-.045-.051l-4.808-7.013zm5.398-5.398l5.814-5.814c.805-.805 1.208-1.208 1.674-1.355a2 2 0 0 1 1.206 0c.466.147.869.55 1.674 1.355l1.26 1.26-4.135 6.404a.155.155 0 0 1-.041.048c-.025.017-.06.01-.09 0a2.097 2.097 0 0 0-1.92.37c-.027.028-.067.012-.101-.003-.54-.235-4.74-2.01-5.341-2.265zm12.506-3.676l3.818 3.818-.92 5.698v.015a.135.135 0 0 1-.008.038c-.01.02-.03.024-.05.03a1.83 1.83 0 0 0-.548.273.154.154 0 0 0-.02.017c-.011.012-.022.023-.04.025a.114.114 0 0 1-.043-.007l-5.818-2.472-.011-.005c-.037-.015-.081-.033-.081-.071a2.198 2.198 0 0 0-.31-.915c-.028-.046-.059-.094-.035-.141l4.066-6.303zm-3.932 8.606l5.454 2.31c.03.014.063.027.076.058a.106.106 0 0 1 0 .057c-.016.08-.03.171-.03.263v.153c0 .038-.039.054-.075.069l-.011.004c-.864.369-12.13 5.173-12.147 5.173-.017 0-.035 0-.052-.017-.03-.03 0-.072.027-.11a.76.76 0 0 0 .014-.02l4.482-6.94.008-.012c.026-.042.056-.089.104-.089l.045.007c.102.014.192.027.283.027.68 0 1.31-.331 1.69-.897a.16.16 0 0 1 .034-.04c.027-.02.067-.01.098.004zm-6.246 9.185l12.28-5.237s.018 0 .035.017c.067.067.124.112.179.154l.027.017c.025.014.05.03.052.056 0 .01 0 .016-.002.025L25.756 23.7l-.004.026c-.007.05-.014.107-.061.107a1.729 1.729 0 0 0-1.373.847l-.005.008c-.014.023-.027.045-.05.057-.021.01-.048.006-.07.001l-9.793-2.02c-.01-.002-.152-.519-.163-.52z"})});function ve(){const n=le(re),[g,F]=m.useState(""),[A,B]=m.useState(!1),[c,z]=m.useState([]),[h,R]=m.useState([]),[L,U]=m.useState(0),[I,O]=m.useState(""),[H,K]=m.useState(!1),[M,Q]=m.useState(0),[C,W]=m.useState(!1),[$,X]=m.useState(!1),[k,x]=m.useState(!1),[q,V]=m.useState(!1),[d,y]=m.useState(null),Z=async()=>{if(!n.token){y({status:"error",message:"No token provided",timestamp:Date.now()});return}y({status:"testing",message:"Testing connection..."});try{const t=await fetch("https://api.netlify.com/api/v1/user",{headers:{Authorization:`Bearer ${n.token}`}});if(t.ok){const s=await t.json();y({status:"success",message:`Connected successfully as ${s.email}`,timestamp:Date.now()})}else y({status:"error",message:`Connection failed: ${t.status} ${t.statusText}`,timestamp:Date.now()})}catch(t){y({status:"error",message:`Connection failed: ${t instanceof Error?t.message:"Unknown error"}`,timestamp:Date.now()})}},ee=[{name:"Clear Cache",icon:"i-ph:arrows-clockwise",action:async t=>{try{x(!0);const s=await fetch(`https://api.netlify.com/api/v1/sites/${t}`,{headers:{Authorization:`Bearer ${n.token}`}});if(!s.ok){const l=await s.text();if(s.status===404){r.error("Site not found. This may be a free account limitation.");return}throw new Error(`Failed to get site details: ${l}`)}const a=await s.json(),i=!a.plan||a.plan==="free"||a.plan==="starter";if(a.build_settings&&a.build_settings.repo_url){const l=await fetch(`https://api.netlify.com/api/v1/sites/${t}/builds`,{method:"POST",headers:{Authorization:`Bearer ${n.token}`,"Content-Type":"application/json"},body:JSON.stringify({clear_cache:!0})});if(l.ok){r.success("Build triggered with cache clear");return}else if(l.status===422){r.warning("Build trigger failed. This feature may not be available on free accounts.");return}}const o=await fetch(`https://api.netlify.com/api/v1/sites/${t}/purge_cache`,{method:"POST",headers:{Authorization:`Bearer ${n.token}`}});if(!o.ok){if(o.status===404){i?r.warning("Cache purge not available on free accounts. Try triggering a build instead."):r.error("Cache purge endpoint not found. This feature may not be available.");return}const l=await o.text();throw new Error(`Cache purge failed: ${l}`)}r.success("Site cache cleared successfully")}catch(s){const a=s instanceof Error?s.message:"Unknown error";r.error(`Failed to clear site cache: ${a}`)}finally{x(!1)}}},{name:"Manage Environment",icon:"i-ph:gear",action:async t=>{try{x(!0);const s=await fetch(`https://api.netlify.com/api/v1/sites/${t}`,{headers:{Authorization:`Bearer ${n.token}`}});if(!s.ok)throw new Error("Failed to get site details");const a=await s.json(),i=!a.plan||a.plan==="free"||a.plan==="starter",o=await fetch(`https://api.netlify.com/api/v1/sites/${t}/env`,{headers:{Authorization:`Bearer ${n.token}`}});if(o.ok){const l=await o.json();r.success(`Environment variables loaded: ${l.length} variables`)}else if(o.status===404)i?r.info("Environment variables management is limited on free accounts"):r.info("Site has no environment variables configured");else{const l=await o.text();r.error(`Failed to load environment variables: ${l}`)}}catch(s){const a=s instanceof Error?s.message:"Unknown error";r.error(`Failed to load environment variables: ${a}`)}finally{x(!1)}}},{name:"Trigger Build",icon:"i-ph:rocket-launch",action:async t=>{try{x(!0);const s=await fetch(`https://api.netlify.com/api/v1/sites/${t}/builds`,{method:"POST",headers:{Authorization:`Bearer ${n.token}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to trigger build");const a=await s.json();r.success(`Build triggered successfully! ID: ${a.id}`)}catch(s){const a=s instanceof Error?s.message:"Unknown error";r.error(`Failed to trigger build: ${a}`)}finally{x(!1)}}},{name:"View Functions",icon:"i-ph:code",action:async t=>{try{x(!0);const s=await fetch(`https://api.netlify.com/api/v1/sites/${t}`,{headers:{Authorization:`Bearer ${n.token}`}});if(!s.ok)throw new Error("Failed to get site details");const a=await s.json(),i=!a.plan||a.plan==="free"||a.plan==="starter",o=await fetch(`https://api.netlify.com/api/v1/sites/${t}/functions`,{headers:{Authorization:`Bearer ${n.token}`}});if(o.ok){const l=await o.json();r.success(`Site has ${l.length} serverless functions`)}else if(o.status===404)i?r.info("Functions may be limited or unavailable on free accounts"):r.info("Site has no serverless functions");else{const l=await o.text();r.error(`Failed to load functions: ${l}`)}}catch(s){const a=s instanceof Error?s.message:"Unknown error";r.error(`Failed to load functions: ${a}`)}finally{x(!1)}}},{name:"Site Analytics",icon:"i-ph:chart-bar",action:async t=>{try{x(!0);const s=await fetch(`https://api.netlify.com/api/v1/sites/${t}`,{headers:{Authorization:`Bearer ${n.token}`}});if(!s.ok)throw new Error("Failed to get site details");const a=await s.json(),i=!a.plan||a.plan==="free"||a.plan==="starter",o=await fetch(`https://api.netlify.com/api/v1/sites/${t}/traffic`,{headers:{Authorization:`Bearer ${n.token}`}});if(o.ok)await o.json(),r.success("Site analytics loaded successfully");else if(o.status===404)i&&r.info("Analytics not available on free accounts. Showing basic site info instead."),r.info(`Site: ${a.name} - Status: ${a.state||"Unknown"}`);else{const l=await o.text();i?r.info(`Analytics unavailable on free accounts. Site info: ${a.name} (${a.state||"Unknown"})`):r.error(`Failed to load analytics: ${l}`)}}catch(s){const a=s instanceof Error?s.message:"Unknown error";r.error(`Failed to load site analytics: ${a}`)}finally{x(!1)}}},{name:"Delete Site",icon:"i-ph:trash",action:async t=>{try{if(!(await fetch(`https://api.netlify.com/api/v1/sites/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${n.token}`}})).ok)throw new Error("Failed to delete site");r.success("Site deleted successfully"),j(n.token)}catch(s){const a=s instanceof Error?s.message:"Unknown error";r.error(`Failed to delete site: ${a}`)}},requiresConfirmation:!0,variant:"destructive"}],P=async(t,s,a)=>{try{x(!0);const i=a==="publish"?`https://api.netlify.com/api/v1/sites/${t}/deploys/${s}/restore`:`https://api.netlify.com/api/v1/deploys/${s}/${a}`;if(!(await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${n.token}`}})).ok)throw new Error(`Failed to ${a} deploy`);r.success(`Deploy ${a}ed successfully`),j(n.token)}catch(i){const o=i instanceof Error?i.message:"Unknown error";r.error(`Failed to ${a} deploy: ${o}`)}finally{x(!1)}};m.useEffect(()=>{oe()},[]),m.useEffect(()=>{n.user&&n.token&&(!n.stats||!n.stats.sites)&&j(n.token),n.stats&&(z(n.stats.sites||[]),R(n.stats.deploys||[]),U(n.stats.deploys?.length||0),O(n.stats.lastDeployTime||""))},[n]);const te=async()=>{if(!g){r.error("Please enter a Netlify API token");return}V(!0);try{const t=await fetch("https://api.netlify.com/api/v1/user",{headers:{Authorization:`Bearer ${g}`}});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const s=await t.json();T({user:s,token:g}),r.success("Connected to Netlify successfully"),j(g)}catch(t){console.error("Error connecting to Netlify:",t),r.error(`Failed to connect to Netlify: ${t instanceof Error?t.message:"Unknown error"}`)}finally{V(!1),F("")}},se=()=>{localStorage.removeItem("netlify_connection"),document.cookie="netlifyToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",T({user:null,token:""}),y(null),r.success("Disconnected from Netlify")},j=async t=>{B(!0);try{const s=await fetch("https://api.netlify.com/api/v1/sites",{headers:{Authorization:`Bearer ${t}`}});if(!s.ok)throw new Error(`Failed to fetch sites: ${s.statusText}`);const a=await s.json();z(a);const i=[],o=[];let l="",D=0;if(a&&a.length>0){const N=[];for(let p=0;p<a.length;p+=3)N.push(a.slice(p,p+3));for(const p of N){const _=p.map(async b=>{try{const w=await fetch(`https://api.netlify.com/api/v1/sites/${b.id}/deploys?per_page=20`,{headers:{Authorization:`Bearer ${t}`}});let Y=[];w.ok&&(Y=await w.json());const J=await fetch(`https://api.netlify.com/api/v1/sites/${b.id}/builds?per_page=10`,{headers:{Authorization:`Bearer ${t}`}});let G=[];return J.ok&&(G=await J.json()),{site:b,deploys:Y,builds:G}}catch(w){return console.error(`Failed to fetch data for site ${b.name}:`,w),{site:b,deploys:[],builds:[]}}}),ne=await Promise.all(_);for(const b of ne)i.push(...b.deploys),o.push(...b.builds),D+=b.deploys.length;p!==N[N.length-1]&&await new Promise(b=>setTimeout(b,200))}i.sort((p,_)=>new Date(_.created_at).getTime()-new Date(p.created_at).getTime()),i.length>0&&(l=i[0].created_at,O(l)),R(i),U(D)}T({stats:{sites:a,deploys:i,builds:o,lastDeployTime:l,totalSites:a.length,totalDeploys:D,totalBuilds:o.length}}),r.success("Netlify stats updated")}catch(s){console.error("Error fetching Netlify stats:",s),r.error(`Failed to fetch Netlify stats: ${s instanceof Error?s.message:"Unknown error"}`)}finally{B(!1)}},ae=()=>!n.user||!n.stats?null:e.jsx("div",{className:"mt-6",children:e.jsxs(ie,{open:H,onOpenChange:K,children:[e.jsx(ce,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-bolt-elements-background dark:bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive/70 dark:hover:border-bolt-elements-borderColorActive/70 transition-all duration-200 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:chart-bar w-4 h-4 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),e.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:"Netlify Stats"})]}),e.jsx("div",{className:u("i-ph:caret-down w-4 h-4 transform transition-transform duration-200 text-bolt-elements-textSecondary",H?"rotate-180":"")})]})}),e.jsx(de,{className:"overflow-hidden",children:e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"mb-6 p-4 bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor",children:[e.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Netlify Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:n.stats.totalSites}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Total Sites"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:n.stats.totalDeploys||L}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Total Deployments"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:n.stats.totalBuilds||0}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Total Builds"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-bolt-elements-textPrimary",children:c.filter(t=>t.published_deploy?.state==="ready").length}),e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary",children:"Live Sites"})]})]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Deployment Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg border border-bolt-elements-borderColor",children:[e.jsxs("h6",{className:"text-xs font-medium text-bolt-elements-textPrimary flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"i-ph:chart-pie w-4 h-4 text-bolt-elements-item-contentAccent"}),"Success Rate"]}),e.jsx("div",{className:"space-y-1",children:(()=>{const t=h.filter(i=>i.state==="ready").length,s=h.filter(i=>i.state==="error").length;return[{label:"Success Rate",value:`${h.length>0?Math.round(t/h.length*100):0}%`},{label:"Successful",value:t},{label:"Failed",value:s}]})().map((t,s)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-bolt-elements-textSecondary",children:[t.label,":"]}),e.jsx("span",{className:"text-bolt-elements-textPrimary font-medium",children:t.value})]},s))})]}),e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-3 rounded-lg border border-bolt-elements-borderColor",children:[e.jsxs("h6",{className:"text-xs font-medium text-bolt-elements-textPrimary flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"i-ph:clock w-4 h-4 text-bolt-elements-item-contentAccent"}),"Recent Activity"]}),e.jsx("div",{className:"space-y-1",children:(()=>{const t=Date.now(),s=h.filter(o=>t-new Date(o.created_at).getTime()<24*60*60*1e3).length,a=h.filter(o=>t-new Date(o.created_at).getTime()<7*24*60*60*1e3).length,i=c.filter(o=>{const l=o.published_deploy?.published_at;return l&&t-new Date(l).getTime()<7*24*60*60*1e3}).length;return[{label:"Last 24 hours",value:s},{label:"Last 7 days",value:a},{label:"Active sites",value:i}]})().map((t,s)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-bolt-elements-textSecondary",children:[t.label,":"]}),e.jsx("span",{className:"text-bolt-elements-textPrimary font-medium",children:t.value})]},s))})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-2",children:"Site Health Overview"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:(()=>{const t=c.filter(l=>l.published_deploy?.state==="ready"&&l.ssl_url).length,s=c.filter(l=>!!l.ssl_url).length,a=c.filter(l=>!!l.custom_domain).length,i=c.filter(l=>l.published_deploy?.state==="error"||!l.published_deploy).length,o=c.filter(l=>l.published_deploy?.state==="building"||l.published_deploy?.state==="processing").length;return[{label:"Healthy",value:t,icon:"i-ph:heart",color:"text-green-500",bgColor:"bg-green-100 dark:bg-green-900/20",textColor:"text-green-800 dark:text-green-400"},{label:"SSL Enabled",value:s,icon:"i-ph:lock",color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900/20",textColor:"text-blue-800 dark:text-blue-400"},{label:"Custom Domain",value:a,icon:"i-ph:globe",color:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/20",textColor:"text-purple-800 dark:text-purple-400"},{label:"Building",value:o,icon:"i-ph:gear",color:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900/20",textColor:"text-yellow-800 dark:text-yellow-400"},{label:"Needs Attention",value:i,icon:"i-ph:warning",color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900/20",textColor:"text-red-800 dark:text-red-400"}]})().map((t,s)=>e.jsxs("div",{className:`flex flex-col p-3 rounded-lg border border-bolt-elements-borderColor ${t.bgColor}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`${t.icon} w-4 h-4 ${t.color}`}),e.jsx("span",{className:"text-xs text-bolt-elements-textSecondary",children:t.label})]}),e.jsx("span",{className:`text-lg font-medium ${t.textColor}`,children:t.value})]},s))})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs(f,{variant:"outline",className:"flex items-center gap-1 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:"i-ph:buildings w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsxs("span",{children:[n.stats.totalSites," Sites"]})]}),e.jsxs(f,{variant:"outline",className:"flex items-center gap-1 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:"i-ph:rocket-launch w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsxs("span",{children:[L," Deployments"]})]}),e.jsxs(f,{variant:"outline",className:"flex items-center gap-1 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:"i-ph:hammer w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsxs("span",{children:[n.stats.totalBuilds||0," Builds"]})]}),I&&e.jsxs(f,{variant:"outline",className:"flex items-center gap-1 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:"i-ph:clock w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsxs("span",{children:["Updated ",S(new Date(I))," ago"]})]})]}),c.length>0&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"bg-bolt-elements-background dark:bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:"i-ph:buildings w-4 h-4 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),"Your Sites (",c.length,")"]}),c.length>8&&e.jsx("button",{onClick:()=>W(!C),className:"text-xs text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors",children:C?"Show Less":`Show All ${c.length}`})]}),e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>j(n.token),disabled:A,className:"flex items-center gap-2 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive/10",children:[e.jsx("div",{className:u("i-ph:arrows-clockwise w-4 h-4 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent",{"animate-spin":A})}),A?"Refreshing...":"Refresh"]})]}),e.jsx("div",{className:"space-y-3",children:(C?c:c.slice(0,8)).map((t,s)=>e.jsxs("div",{className:u("bg-bolt-elements-background dark:bg-bolt-elements-background-depth-1 border rounded-lg p-4 transition-all cursor-pointer",M===s?"border-bolt-elements-item-contentAccent bg-bolt-elements-item-backgroundActive/10":"border-bolt-elements-borderColor hover:border-bolt-elements-borderColorActive/70"),onClick:()=>{Q(s)},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:cloud w-5 h-5 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),e.jsx("span",{className:"font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:t.name})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(f,{variant:t.published_deploy?.state==="ready"?"default":"destructive",className:"flex items-center gap-1 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[t.published_deploy?.state==="ready"?e.jsx("div",{className:"i-ph:check-circle w-4 h-4 text-green-500"}):e.jsx("div",{className:"i-ph:x-circle w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:t.published_deploy?.state||"Unknown"})]})})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("a",{href:t.ssl_url||t.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm flex items-center gap-1 transition-colors text-bolt-elements-link-text hover:text-bolt-elements-link-textHover dark:text-white dark:hover:text-bolt-elements-link-textHover",onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"i-ph:cloud w-3 h-3 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),e.jsx("span",{className:"underline decoration-1 underline-offset-2",children:t.ssl_url||t.url})]})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-bolt-elements-textSecondary",children:[t.published_deploy?.framework&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:cube w-3 h-3 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),e.jsx("span",{children:t.published_deploy.framework})]}),t.custom_domain&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:globe w-3 h-3 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),e.jsx("span",{children:"Custom Domain"})]}),t.branch&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:code w-3 h-3 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),e.jsx("span",{children:t.branch})]})]})]}),M===s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4 pt-3 border-t border-bolt-elements-borderColor",children:e.jsx("div",{className:"flex items-center gap-2",children:ee.map(a=>e.jsxs(v,{variant:a.variant||"outline",size:"sm",onClick:async i=>{i.stopPropagation(),!(a.requiresConfirmation&&!confirm(`Are you sure you want to ${a.name.toLowerCase()}?`))&&(x(!0),await a.action(t.id),x(!1))},disabled:k,className:"flex items-center gap-1 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:`${a.icon} w-4 h-4 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent`}),a.name]},a.name))})}),t.published_deploy&&e.jsxs("div",{className:"mt-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:clock w-4 h-4 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),e.jsxs("span",{className:"text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:["Published ",S(new Date(t.published_deploy.published_at))," ago"]})]}),t.published_deploy.branch&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"i-ph:code w-4 h-4 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),e.jsxs("span",{className:"text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:["Branch: ",t.published_deploy.branch]})]})]})]})]},t.id))})]}),h.length>0&&e.jsxs("div",{className:"bg-bolt-elements-background dark:bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:"i-ph:buildings w-4 h-4 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),"All Deployments (",h.length,")"]}),h.length>10&&e.jsx("button",{onClick:()=>X(!$),className:"text-xs text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors",children:$?"Show Less":`Show All ${h.length}`})]})}),e.jsx("div",{className:"space-y-2",children:($?h:h.slice(0,10)).map(t=>e.jsxs("div",{className:"bg-bolt-elements-background dark:bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(f,{variant:t.state==="ready"?"default":t.state==="error"?"destructive":"outline",className:"flex items-center gap-1",children:[t.state==="ready"?e.jsx("div",{className:"i-ph:check-circle w-4 h-4 text-green-500"}):t.state==="error"?e.jsx("div",{className:"i-ph:x-circle w-4 h-4 text-red-500"}):e.jsx("div",{className:"i-ph:buildings w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsx("span",{className:"text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:t.state})]})}),e.jsxs("span",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:[S(new Date(t.created_at))," ago"]})]}),t.branch&&e.jsxs("div",{className:"mt-2 text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:code w-3 h-3 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),e.jsxs("span",{className:"text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:["Branch: ",t.branch]})]}),t.deploy_url&&e.jsx("div",{className:"mt-2 text-xs",children:e.jsxs("a",{href:t.deploy_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 transition-colors text-bolt-elements-link-text hover:text-bolt-elements-link-textHover dark:text-white dark:hover:text-bolt-elements-link-textHover",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"i-ph:cloud w-3 h-3 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),e.jsx("span",{className:"underline decoration-1 underline-offset-2",children:t.deploy_url})]})}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>{const s=c.find(a=>a.id===t.site_id);s&&P(s.id,t.id,"publish")},disabled:k,className:"flex items-center gap-1 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:"i-ph:buildings w-4 h-4 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),"Publish"]}),t.state==="ready"?e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>{const s=c.find(a=>a.id===t.site_id);s&&P(s.id,t.id,"lock")},disabled:k,className:"flex items-center gap-1 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:"i-ph:lock-simple w-4 h-4 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),"Lock"]}):e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>{const s=c.find(a=>a.id===t.site_id);s&&P(s.id,t.id,"unlock")},disabled:k,className:"flex items-center gap-1 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:"i-ph:lock-open w-4 h-4 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),"Unlock"]})]})]},t.id))})]}),n.stats.builds&&n.stats.builds.length>0&&e.jsxs("div",{className:"bg-bolt-elements-background dark:bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:[e.jsx("div",{className:"i-ph:hammer w-4 h-4 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),"Recent Builds (",n.stats.builds.length,")"]})}),e.jsx("div",{className:"space-y-2",children:n.stats.builds.slice(0,8).map(t=>e.jsxs("div",{className:"bg-bolt-elements-background dark:bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(f,{variant:t.done?"default":"outline",className:"flex items-center gap-1",children:[t.done?e.jsx("div",{className:"i-ph:check-circle w-4 h-4 text-green-500"}):e.jsx("div",{className:"i-ph:buildings w-4 h-4 text-bolt-elements-item-contentAccent"}),e.jsx("span",{className:"text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:t.done?"Completed":"Building"})]})}),e.jsxs("span",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:[S(new Date(t.created_at))," ago"]})]}),t.commit_ref&&e.jsxs("div",{className:"mt-2 text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:code w-3 h-3 text-bolt-elements-item-contentAccent dark:text-bolt-elements-item-contentAccent"}),e.jsx("span",{className:"text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:t.commit_ref.substring(0,7)})]})]},t.id))})]})]})]})})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E.div,{className:"flex items-center justify-between gap-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-[#00AD9F]",children:e.jsx(me,{})}),e.jsx("h2",{className:"text-lg font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary",children:"Netlify Integration"})]}),e.jsx("div",{className:"flex items-center gap-2",children:n.user&&e.jsx(v,{onClick:Z,disabled:d?.status==="testing",variant:"outline",className:"flex items-center gap-2 hover:bg-bolt-elements-item-backgroundActive/10 hover:text-bolt-elements-textPrimary dark:hover:bg-bolt-elements-item-backgroundActive/10 dark:hover:text-bolt-elements-textPrimary transition-colors",children:d?.status==="testing"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Test Connection"]})})})]}),e.jsx("p",{className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary",children:"Connect and manage your Netlify sites with advanced deployment controls and site management"}),d&&e.jsxs(E.div,{className:u("p-4 rounded-lg border",{"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-700":d.status==="success","bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":d.status==="error","bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-700":d.status==="testing"}),initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d.status==="success"&&e.jsx("div",{className:"i-ph:check-circle w-5 h-5 text-green-600 dark:text-green-400"}),d.status==="error"&&e.jsx("div",{className:"i-ph:warning-circle w-5 h-5 text-red-600 dark:text-red-400"}),d.status==="testing"&&e.jsx("div",{className:"i-ph:spinner-gap w-5 h-5 animate-spin text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:u("text-sm font-medium",{"text-green-800 dark:text-green-200":d.status==="success","text-red-800 dark:text-red-200":d.status==="error","text-blue-800 dark:text-blue-200":d.status==="testing"}),children:d.message})]}),d.timestamp&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(d.timestamp).toLocaleString()})]}),e.jsx(E.div,{className:"bg-bolt-elements-background dark:bg-bolt-elements-background border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx("div",{className:"p-6",children:n.user?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:se,className:u("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-red-500 text-white","hover:bg-red-600"),children:[e.jsx("div",{className:"i-ph:plug w-4 h-4"}),"Disconnect"]}),e.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-1",children:[e.jsx("div",{className:"i-ph:check-circle w-4 h-4 text-green-500"}),"Connected to Netlify"]})]}),ae()]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-xs text-bolt-elements-textSecondary bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-1 p-3 rounded-lg mb-4",children:e.jsxs("p",{className:"flex items-center gap-1 mb-1",children:[e.jsx("span",{className:"i-ph:lightbulb w-3.5 h-3.5 text-bolt-elements-icon-success dark:text-bolt-elements-icon-success"}),e.jsx("span",{className:"font-medium",children:"Tip:"})," You can also set the"," ",e.jsx("code",{className:"px-1 py-0.5 bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-2 rounded",children:"VITE_NETLIFY_ACCESS_TOKEN"})," ","environment variable to connect automatically."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary mb-2",children:"API Token"}),e.jsx("input",{type:"password",value:g,onChange:t=>F(t.target.value),placeholder:"Enter your Netlify API token",className:u("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1a2332]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-bolt-elements-borderColorActive","disabled:opacity-50")}),e.jsx("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:e.jsxs("a",{href:"https://app.netlify.com/user/applications#personal-access-tokens",target:"_blank",rel:"noopener noreferrer",className:"text-bolt-elements-borderColorActive hover:underline inline-flex items-center gap-1",children:["Get your token",e.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})]})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{onClick:te,disabled:q||!g,className:u("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-[#303030] text-white","hover:bg-[#5E41D0] hover:text-white","disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200","transform active:scale-95"),children:q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})})})]})})})]})}export{ve as default};
