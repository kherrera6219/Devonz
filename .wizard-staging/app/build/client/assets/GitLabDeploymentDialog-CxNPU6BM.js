import{r as o,j as e}from"./components-BmgQfFUx.js";import{aD as ne,at as R,au as _,av as z,m as a,aw as U,az as D,ax as ie,ay as I,aE as X,aA as O,aB as de}from"./Header-C4AWQck-.js";import{c as E,a as n,b as ce}from"./Button-BQzjmXH6.js";import{l as G}from"./logs-DZu2vR68.js";import{B as T}from"./Badge-Bv7eozhH.js";import"./Card-BJ5ZEwCc.js";import"./Switch-Ce5GRzG7.js";import{E as ee,S as be}from"./StatusIndicator-BVCqogRq.js";import{f as me}from"./formatSize-D-zwpqud.js";import"./mobile-BXmnRaCS.js";function te({isOpen:u,onClose:v}){const{isConnecting:b,error:y,connect:g}=ne(),[c,m]=o.useState(""),[f,k]=o.useState("https://gitlab.com"),N=async r=>{if(r.preventDefault(),!c.trim()){n.error("Please enter your GitLab access token");return}try{await g(c,f),n.success("Successfully connected to GitLab!"),m(""),v()}catch(L){console.error("GitLab connect failed:",L)}};return e.jsx(R,{open:u,onOpenChange:r=>!r&&v(),children:e.jsxs(_,{children:[e.jsx(z,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[10000]"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[10000]",children:e.jsx(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:e.jsxs(U,{className:"bg-white dark:bg-bolt-elements-background-depth-1 rounded-lg p-6 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark shadow-xl","aria-describedby":"gitlab-auth-description",children:[e.jsx(D,{className:"text-lg font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark mb-4",children:"Connect to GitLab"}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-500/10 flex items-center justify-center text-orange-500",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:e.jsx("path",{fill:"currentColor",d:"M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"GitLab Connection"}),e.jsx("p",{id:"gitlab-auth-description",className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:"Connect your GitLab account to deploy your projects"})]})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark mb-2",children:"GitLab URL"}),e.jsx("input",{type:"url",value:f,onChange:r=>k(r.target.value),disabled:b,placeholder:"https://gitlab.com",className:E("w-full px-3 py-2 rounded-lg text-sm","bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3","border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark","text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark","placeholder-bolt-elements-textTertiary dark:placeholder-bolt-elements-textTertiary-dark","focus:outline-none focus:ring-2 focus:ring-orange-500","disabled:opacity-50 disabled:cursor-not-allowed")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark mb-2",children:"Access Token"}),e.jsx("input",{type:"password",value:c,onChange:r=>m(r.target.value),disabled:b,placeholder:"Enter your GitLab access token",className:E("w-full px-3 py-2 rounded-lg text-sm","bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3","border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark","text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark","placeholder-bolt-elements-textTertiary dark:placeholder-bolt-elements-textTertiary-dark","focus:outline-none focus:ring-2 focus:ring-orange-500","disabled:opacity-50 disabled:cursor-not-allowed"),required:!0}),e.jsxs("div",{className:"mt-2 text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:[e.jsxs("a",{href:`${f}/-/user_settings/personal_access_tokens`,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:text-orange-600 hover:underline inline-flex items-center gap-1",children:["Get your token",e.jsx("div",{className:"i-ph:arrow-square-out w-3 h-3"})]}),e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx("span",{children:"Required scopes: api, read_repository"})]})]}),y&&e.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:y})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(a.button,{type:"button",onClick:v,className:"px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 text-sm border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",whileHover:{scale:1.02},whileTap:{scale:.98},disabled:b,children:"Cancel"}),e.jsx(a.button,{type:"submit",disabled:b||!c.trim(),className:E("px-4 py-2 rounded-lg text-sm inline-flex items-center gap-2","bg-orange-500 text-white hover:bg-orange-600","disabled:opacity-50 disabled:cursor-not-allowed"),whileHover:!b&&c.trim()?{scale:1.02}:{},whileTap:!b&&c.trim()?{scale:.98}:{},children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap animate-spin w-4 h-4"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect to GitLab"]})})]})]})]})})})]})})}function Ne({isOpen:u,onClose:v,projectName:b,files:y}){const[g,c]=o.useState(""),[m,f]=o.useState(!1),[k,N]=o.useState(!1),[r,L]=o.useState(null),[j,re]=o.useState([]),[F,$]=o.useState([]),[w,B]=o.useState(""),[M,W]=o.useState(!1),[se,Q]=o.useState(!1),[C,q]=o.useState(""),[P,ae]=o.useState([]),[V,Y]=o.useState(!1),oe=ce(ie);o.useEffect(()=>{if(u){const t=I("gitlab_connection");c(b.replace(/\s+/g,"-").toLowerCase()),t?.user&&t?.token&&(L(t.user),t.token.trim()&&J(t.token,t.gitlabUrl||"https://gitlab.com"))}},[u,b]),o.useEffect(()=>{if(j.length===0){$([]);return}if(!w.trim()){$(j);return}const t=w.toLowerCase().trim(),l=j.filter(s=>s.name.toLowerCase().includes(t)||s.description&&s.description.toLowerCase().includes(t));$(l)},[j,w]);const J=async(t,l="https://gitlab.com")=>{if(!t){G.logError("No GitLab token available"),n.error("GitLab authentication required");return}try{W(!0);const h=await new X(t,l).getProjects();re(h)}catch(s){console.error("Failed to fetch GitLab repositories:",s),G.logError("Failed to fetch GitLab repositories",{error:s}),n.error("Failed to fetch recent repositories")}finally{W(!1)}},le=async t=>{t.preventDefault();const l=I("gitlab_connection");if(!l?.token||!l?.user){n.error("Please connect your GitLab account in Settings > Connections first");return}if(!g.trim()){n.error("Repository name is required");return}N(!0);const s=g.replace(/[^a-zA-Z0-9-_.]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").toLowerCase();try{const h=l.gitlabUrl||"https://gitlab.com",d=new X(l.token,h);s!==g&&s!==g.toLowerCase()&&n.info(`Repository name sanitized to "${s}" to meet GitLab requirements`);const i=`${l.user.username}/${s}`,p=await d.getProjectByPath(i),A=p!==null;if(A&&p){const S=p.visibility!==(m?"private":"public")?`

This will also change the repository from ${p.visibility} to ${m?"private":"public"}.`:"";if(!window.confirm(`Repository "${s}" already exists. Do you want to update it? This will add or modify files in the repository.${S}`)){N(!1);return}p.visibility!==(m?"private":"public")&&(n.info("Updating repository visibility..."),await d.updateProjectVisibility(p.id,m?"private":"public")),n.info("Uploading files to existing repository..."),await d.updateProjectWithFiles(p.id,y),q(p.http_url_to_repo),n.success("Repository updated successfully!")}else{n.info("Creating new repository...");const S=await d.createProjectWithFiles(s,m,y);q(S.http_url_to_repo),n.success("Repository created successfully!")}const H=Object.entries(y).map(([S,K])=>({path:S,size:new TextEncoder().encode(K).length}));ae(H),Q(!0),localStorage.setItem(`gitlab-repo-${oe}`,JSON.stringify({owner:l.user.username,name:s,url:C})),G.logInfo("GitLab deployment completed successfully",{type:"system",message:`Successfully deployed ${H.length} files to ${A?"existing":"new"} GitLab repository: ${i}`,repoName:s,projectPath:i,filesCount:H.length,isNewProject:!A})}catch(h){console.error("Error pushing to GitLab:",h),G.logError("GitLab deployment failed",{error:h,repoName:s,projectPath:`${l.user.username}/${s}`});let d="Failed to push to GitLab";if(h instanceof Error){const i=h.message.toLowerCase();i.includes("404")||i.includes("not found")?d="Repository or GitLab instance not found. Please check your GitLab URL and repository permissions.":i.includes("401")||i.includes("unauthorized")?d="GitLab authentication failed. Please check your access token and permissions.":i.includes("403")||i.includes("forbidden")?d="Access denied. Your GitLab token may not have sufficient permissions to create/modify repositories.":i.includes("network")||i.includes("fetch")?d="Network error. Please check your internet connection and try again.":i.includes("timeout")?d="Request timed out. Please try again or check your connection.":i.includes("rate limit")?d="GitLab API rate limit exceeded. Please wait a moment and try again.":d=`GitLab error: ${h.message}`}n.error(d)}finally{N(!1)}},x=()=>{c(""),f(!1),Q(!1),q(""),v()},Z=()=>{Y(!1);const t=I("gitlab_connection");t?.user&&t?.token&&(L(t.user),J(t.token,t.gitlabUrl||"https://gitlab.com"))};return se?e.jsx(R,{open:u,onOpenChange:t=>!t&&x(),children:e.jsxs(_,{children:[e.jsx(z,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:e.jsx(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[600px] max-h-[85vh] overflow-y-auto",children:e.jsxs(U,{className:"bg-white dark:bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark shadow-xl","aria-describedby":"success-dialog-description",children:[e.jsx(D,{className:"sr-only",children:"Successfully pushed to GitLab"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-500/10 flex items-center justify-center text-green-500",children:e.jsx("div",{className:"i-ph:check-circle w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"Successfully pushed to GitLab"}),e.jsx("p",{id:"success-dialog-description",className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:"Your code is now available on GitLab"})]})]}),e.jsx(O,{asChild:!0,children:e.jsxs("button",{onClick:x,className:"p-2 rounded-lg transition-all duration-200 ease-in-out bg-transparent text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary dark:text-bolt-elements-textTertiary-dark dark:hover:text-bolt-elements-textPrimary-dark hover:bg-bolt-elements-background-depth-2 dark:hover:bg-bolt-elements-background-depth-3 focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark",children:[e.jsx("span",{className:"i-ph:x block w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Close dialog"})]})})]}),e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg p-4 text-left border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",children:[e.jsxs("p",{className:"text-sm font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"i-ph:gitlab-logo w-4 h-4 text-orange-500"}),"Repository URL"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 text-sm bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-4 px-3 py-2 rounded border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark font-mono",children:C}),e.jsx(a.button,{onClick:()=>{navigator.clipboard.writeText(C),n.success("URL copied to clipboard")},className:"p-2 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary dark:text-bolt-elements-textSecondary-dark dark:hover:text-bolt-elements-textPrimary-dark bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-4 rounded-lg border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("div",{className:"i-ph:copy w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg p-4 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",children:[e.jsxs("p",{className:"text-sm font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"i-ph:files w-4 h-4 text-purple-500"}),"Pushed Files (",P.length,")"]}),e.jsxs("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar pr-2",children:[P.slice(0,100).map(t=>e.jsxs("div",{className:"flex items-center justify-between py-1.5 text-sm text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark border-b border-bolt-elements-borderColor/30 dark:border-bolt-elements-borderColor-dark/30 last:border-0",children:[e.jsx("span",{className:"font-mono truncate flex-1 text-xs",children:t.path}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-bolt-elements-background-depth-3 dark:bg-bolt-elements-background-depth-4 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark ml-2",children:me(t.size)})]},t.path)),P.length>100&&e.jsxs("div",{className:"py-2 text-center text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:["+",P.length-100," more files"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsxs(a.a,{href:C,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-lg bg-orange-500 text-white hover:bg-orange-600 text-sm inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("div",{className:"i-ph:gitlab-logo w-4 h-4"}),"View Repository"]}),e.jsxs(a.button,{onClick:()=>{navigator.clipboard.writeText(C),n.success("URL copied to clipboard")},className:"px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 text-sm inline-flex items-center gap-2 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("div",{className:"i-ph:copy w-4 h-4"}),"Copy URL"]}),e.jsx(a.button,{onClick:x,className:"px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 text-sm border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Close"})]})]})]})})})]})}):r?e.jsxs(R,{open:u,onOpenChange:t=>!t&&x(),children:[e.jsxs(_,{children:[e.jsx(z,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:e.jsx(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:e.jsx(U,{className:"bg-white dark:bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark shadow-xl","aria-describedby":"push-dialog-description",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(a.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.1},className:"w-10 h-10 rounded-xl bg-bolt-elements-background-depth-3 flex items-center justify-center text-orange-500",children:e.jsx("div",{className:"i-ph:gitlab-logo w-5 h-5"})}),e.jsxs("div",{children:[e.jsx(D,{className:"text-lg font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"Deploy to GitLab"}),e.jsx("p",{id:"push-dialog-description",className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:"Deploy your code to a new or existing GitLab repository"})]}),e.jsx(O,{asChild:!0,children:e.jsxs("button",{onClick:x,className:"ml-auto p-2 rounded-lg transition-all duration-200 ease-in-out bg-transparent text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary dark:text-bolt-elements-textTertiary-dark dark:hover:text-bolt-elements-textPrimary-dark hover:bg-bolt-elements-background-depth-2 dark:hover:bg-bolt-elements-background-depth-3 focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark",children:[e.jsx("span",{className:"i-ph:x block w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Close dialog"})]})})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",children:[e.jsxs("div",{className:"relative",children:[r.avatar_url&&r.avatar_url!=="null"&&r.avatar_url!==""?e.jsx("img",{src:r.avatar_url,alt:r.username,className:"w-10 h-10 rounded-full object-cover",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onError:t=>{const l=t.target;l.style.display="none";const s=l.parentElement?.querySelector(".avatar-fallback");s&&(s.style.display="flex")},onLoad:t=>{const s=t.target.parentElement?.querySelector(".avatar-fallback");s&&(s.style.display="none")}}):null,e.jsx("div",{className:"avatar-fallback w-10 h-10 rounded-full bg-bolt-elements-background-depth-4 flex items-center justify-center text-bolt-elements-textSecondary font-semibold text-sm",style:{display:r.avatar_url&&r.avatar_url!=="null"&&r.avatar_url!==""?"none":"flex"},children:r.name?r.name.charAt(0).toUpperCase():r.username?r.username.charAt(0).toUpperCase():e.jsx("div",{className:"i-ph:user w-5 h-5"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full bg-orange-500 flex items-center justify-center text-white",children:e.jsx("div",{className:"i-ph:gitlab-logo w-3 h-3"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:r.name||r.username}),e.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:["@",r.username]})]})]}),e.jsxs("form",{onSubmit:le,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"repoName",className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:"Repository Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-bolt-elements-textTertiary dark:text-bolt-elements-textTertiary-dark",children:e.jsx("span",{className:"i-ph:git-branch w-4 h-4"})}),e.jsx("input",{id:"repoName",type:"text",value:g,onChange:t=>c(t.target.value),placeholder:"my-awesome-project",className:"w-full pl-10 px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark placeholder-bolt-elements-textTertiary dark:placeholder-bolt-elements-textTertiary-dark focus:outline-none focus:ring-2 focus:ring-orange-500",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:"Recent Repositories"}),e.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary dark:text-bolt-elements-textTertiary-dark",children:[F.length," of ",j.length]})]}),e.jsx("div",{className:"mb-2",children:e.jsx(de,{placeholder:"Search repositories...",value:w,onChange:t=>B(t.target.value),onClear:()=>B(""),className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-sm"})}),j.length===0&&!M?e.jsx(ee,{icon:"i-ph:gitlab-logo",title:"No repositories found",description:"We couldn't find any repositories in your GitLab account.",variant:"compact"}):e.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto pr-2 custom-scrollbar",children:F.length===0&&w.trim()!==""?e.jsx(ee,{icon:"i-ph:magnifying-glass",title:"No matching repositories",description:"Try a different search term",variant:"compact"}):F.map(t=>e.jsxs(a.button,{type:"button",onClick:()=>c(t.name),className:"w-full p-3 text-left rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 transition-colors group border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark hover:border-orange-500/30",whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:git-branch w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark group-hover:text-orange-500",children:t.name})]}),t.visibility==="private"&&e.jsx(T,{variant:"primary",size:"sm",icon:"i-ph:lock w-3 h-3",children:"Private"})]}),t.description&&e.jsx("p",{className:"mt-1 text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark line-clamp-2",children:t.description}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[e.jsx(T,{variant:"subtle",size:"sm",icon:"i-ph:star w-3 h-3",children:t.star_count.toLocaleString()}),e.jsx(T,{variant:"subtle",size:"sm",icon:"i-ph:git-fork w-3 h-3",children:t.forks_count.toLocaleString()}),e.jsx(T,{variant:"subtle",size:"sm",icon:"i-ph:clock w-3 h-3",children:new Date(t.updated_at).toLocaleDateString()})]})]},t.id))})]}),M&&e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(be,{status:"loading",pulse:!0,label:"Loading repositories..."})}),e.jsxs("div",{className:"p-3 bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"private",checked:m,onChange:t=>f(t.target.checked),className:"rounded border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-orange-500 focus:ring-orange-500 dark:bg-bolt-elements-background-depth-3"}),e.jsx("label",{htmlFor:"private",className:"text-sm text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"Make repository private"})]}),e.jsx("p",{className:"text-xs text-bolt-elements-textTertiary dark:text-bolt-elements-textTertiary-dark mt-2 ml-6",children:"Private repositories are only visible to you and people you share them with"})]}),e.jsxs("div",{className:"pt-4 flex gap-2",children:[e.jsx(a.button,{type:"button",onClick:x,className:"px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 text-sm border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancel"}),e.jsx(a.button,{type:"submit",disabled:k,className:E("flex-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 text-sm inline-flex items-center justify-center gap-2",k?"opacity-50 cursor-not-allowed":""),whileHover:k?{}:{scale:1.02},whileTap:k?{}:{scale:.98},children:k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap animate-spin w-4 h-4"}),"Deploying..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:gitlab-logo w-4 h-4"}),"Deploy to GitLab"]})})]})]})]})})})})]}),e.jsx(te,{isOpen:V,onClose:Z})]}):e.jsxs(R,{open:u,onOpenChange:t=>!t&&x(),children:[e.jsxs(_,{children:[e.jsx(z,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:e.jsx(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:e.jsxs(U,{className:"bg-white dark:bg-bolt-elements-background-depth-1 rounded-lg p-6 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark shadow-xl","aria-describedby":"connection-required-description",children:[e.jsx(D,{className:"sr-only",children:"GitLab Connection Required"}),e.jsxs("div",{className:"relative text-center space-y-4",children:[e.jsx(O,{asChild:!0,children:e.jsxs("button",{onClick:x,className:"absolute right-0 top-0 p-2 rounded-lg transition-all duration-200 ease-in-out bg-transparent text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary dark:text-bolt-elements-textTertiary-dark dark:hover:text-bolt-elements-textPrimary-dark hover:bg-bolt-elements-background-depth-2 dark:hover:bg-bolt-elements-background-depth-3 focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark",children:[e.jsx("span",{className:"i-ph:x block w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Close dialog"})]})}),e.jsx(a.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.1},className:"mx-auto w-16 h-16 rounded-xl bg-bolt-elements-background-depth-3 flex items-center justify-center text-orange-500",children:e.jsx("div",{className:"i-ph:gitlab-logo w-8 h-8"})}),e.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"GitLab Connection Required"}),e.jsx("p",{id:"connection-required-description",className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark max-w-md mx-auto",children:"To deploy your code to GitLab, you need to connect your GitLab account first."}),e.jsxs("div",{className:"pt-2 flex justify-center gap-3",children:[e.jsx(a.button,{className:"px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark text-sm hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:x,children:"Close"}),e.jsxs(a.button,{onClick:()=>Y(!0),className:"px-4 py-2 rounded-lg bg-orange-500 text-white text-sm hover:bg-orange-600 inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("div",{className:"i-ph:gitlab-logo w-4 h-4"}),"Connect GitLab Account"]})]})]})]})})})]}),e.jsx(te,{isOpen:V,onClose:Z})]})}export{Ne as GitLabDeploymentDialog};
