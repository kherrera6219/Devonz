import{r as s,j as t}from"./components-BmgQfFUx.js";import{a as x,c as b}from"./Button-BQzjmXH6.js";import{y as n,M as F}from"./Header-C4AWQck-.js";import"./logs-DZu2vR68.js";import"./mobile-BXmnRaCS.js";const A={mcpServers:{everything:{type:"stdio",command:"npx",args:["-y","@modelcontextprotocol/server-everything"]},deepwiki:{type:"streamable-http",url:"https://mcp.deepwiki.com/mcp"},"local-sse":{type:"sse",url:"http://localhost:8000/sse",headers:{Authorization:"Bearer mytoken123"}}}};function q(){const l=n(e=>e.settings),g=n(e=>e.isInitialized),p=n(e=>e.serverTools),k=n(e=>e.initialize),C=n(e=>e.updateSettings),j=n(e=>e.checkServersAvailabilities),[o,h]=s.useState(!1),[i,c]=s.useState(""),[f,v]=s.useState(1),[d,r]=s.useState(null),[m,y]=s.useState(!1),[S,N]=s.useState(null);s.useEffect(()=>{g||k().catch(e=>{r(`Failed to initialize MCP settings: ${e instanceof Error?e.message:String(e)}`),x.error("Failed to load MCP configuration")})},[g]),s.useEffect(()=>{c(JSON.stringify(l.mcpConfig,null,2)),v(l.maxLLMSteps),r(null)},[l]);const a=s.useMemo(()=>{try{return r(null),JSON.parse(i)}catch(e){return r(`Invalid JSON format: ${e instanceof Error?e.message:String(e)}`),null}},[i]),M=e=>{v(parseInt(e,10))},w=async()=>{if(a){h(!0);try{await C({mcpConfig:a,maxLLMSteps:f}),x.success("MCP configuration saved"),r(null)}catch(e){r(e instanceof Error?e.message:"Failed to save configuration"),x.error("Failed to save MCP configuration")}finally{h(!1)}}},E=()=>{c(JSON.stringify(A,null,2)),r(null)},L=async()=>{if(u.length!==0){y(!0),r(null);try{await j()}catch(e){r(`Failed to check server availability: ${e instanceof Error?e.message:String(e)}`)}finally{y(!1)}}},P=e=>{N(S===e?null:e)},u=s.useMemo(()=>Object.entries(p),[p]);return t.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[t.jsxs("section",{"aria-labelledby":"server-status-heading",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsx("h2",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"MCP Servers Configured"})," ",t.jsxs("button",{onClick:L,disabled:m||!a||u.length===0,className:b("px-3 py-1.5 rounded-lg text-sm","bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-4","text-bolt-elements-textPrimary","transition-all duration-200","flex items-center gap-2","disabled:opacity-50 disabled:cursor-not-allowed"),children:[m?t.jsx("div",{className:"i-svg-spinners:90-ring-with-bg w-3 h-3 text-bolt-elements-loader-progress animate-spin"}):t.jsx("div",{className:"i-ph:arrow-counter-clockwise w-3 h-3"}),"Check availability"]})]}),t.jsx(F,{checkingServers:m,expandedServer:S,serverEntries:u,toggleServerExpanded:P})]}),t.jsxs("section",{"aria-labelledby":"config-section-heading",children:[t.jsx("h2",{className:"text-base font-medium text-bolt-elements-textPrimary mb-3",children:"Configuration"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"mcp-config",className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Configuration JSON"}),t.jsx("textarea",{id:"mcp-config",value:i,onChange:e=>c(e.target.value),className:b("w-full px-3 py-2 rounded-lg text-sm font-mono h-72","bg-[#F8F8F8] dark:bg-[#1a2332]","border",d?"border-bolt-elements-icon-error":"border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary","focus:outline-none focus:ring-1 focus:ring-bolt-elements-focus")})]}),t.jsx("div",{children:d&&t.jsx("p",{className:"mt-2 mb-2 text-sm text-bolt-elements-icon-error",children:d})}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"max-llm-steps",className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Maximum number of sequential LLM calls (steps)"}),t.jsx("input",{id:"max-llm-steps",type:"number",placeholder:"Maximum number of sequential LLM calls",min:"1",max:"20",value:f,onChange:e=>M(e.target.value),className:"w-full px-3 py-2 text-bolt-elements-textPrimary text-sm rounded-lg bg-white dark:bg-bolt-elements-background-depth-4 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:["The MCP configuration format is identical to the one used in Claude Desktop.",t.jsxs("a",{href:"https://modelcontextprotocol.io/examples",target:"_blank",rel:"noopener noreferrer",className:"text-bolt-elements-link hover:underline inline-flex items-center gap-1",children:["View example servers",t.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})]})]})]})]}),t.jsxs("div",{className:"flex flex-wrap justify-between gap-3 mt-6",children:[t.jsx("button",{onClick:E,className:`px-4 py-2 rounded-lg text-sm border border-bolt-elements-borderColor
                    bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary
                    hover:bg-bolt-elements-background-depth-3`,children:"Load Example"}),t.jsx("div",{className:"flex gap-2",children:t.jsxs("button",{onClick:w,disabled:o||!a,"aria-disabled":o||!a,className:b("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent","hover:bg-bolt-elements-item-backgroundActive","disabled:opacity-50 disabled:cursor-not-allowed"),children:[t.jsx("div",{className:"i-ph:floppy-disk w-4 h-4"}),o?"Saving...":"Save Configuration"]})})]})]})}export{q as default};
