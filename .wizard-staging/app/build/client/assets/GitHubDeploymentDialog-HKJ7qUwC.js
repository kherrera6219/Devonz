import{r as m,j as e}from"./components-BmgQfFUx.js";import{as as xe,at as I,au as U,av as q,aw as B,m as b,ax as pe,ay as _,az as W,aA as J,aB as he,aC as ge}from"./Header-C4AWQck-.js";import{c as M,b as fe,a as u}from"./Button-BQzjmXH6.js";import{l as L}from"./logs-DZu2vR68.js";import{B as E}from"./Badge-Bv7eozhH.js";import"./Card-BJ5ZEwCc.js";import"./Switch-Ce5GRzG7.js";import{E as ne,S as ye}from"./StatusIndicator-BVCqogRq.js";import"./mobile-BXmnRaCS.js";function ie({isOpen:S,onClose:$,onSuccess:D}){const{connect:O,isConnecting:l,error:v}=xe(),[g,T]=m.useState(""),[f,H]=m.useState("classic"),w=async p=>{if(p.preventDefault(),!!g.trim())try{await O(g,f),T(""),D?.(),$()}catch{}},N=()=>{T(""),$()};return e.jsx(I,{open:S,children:e.jsxs(U,{children:[e.jsx(q,{className:"fixed inset-0 bg-black/50 z-[200]"}),e.jsx(B,{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-[201] w-full max-w-md",onEscapeKeyDown:N,onPointerDownOutside:N,children:e.jsx(b.div,{className:"bg-bolt-elements-background border border-bolt-elements-borderColor rounded-lg shadow-lg",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-bolt-elements-textPrimary",children:"Connect to GitHub"}),e.jsx("button",{onClick:N,className:"p-1 rounded-md hover:bg-bolt-elements-item-backgroundActive/10",children:e.jsx("div",{className:"i-ph:x w-4 h-4 text-bolt-elements-textSecondary"})})]}),e.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary bg-bolt-elements-background-depth-1 p-3 rounded-lg",children:[e.jsxs("p",{className:"flex items-center gap-1 mb-1",children:[e.jsx("span",{className:"i-ph:lightbulb w-3.5 h-3.5 text-bolt-elements-icon-success"}),e.jsx("span",{className:"font-medium",children:"Tip:"})," You need a GitHub token to deploy repositories."]}),e.jsx("p",{children:"Required scopes: repo, read:org, read:user"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Token Type"}),e.jsxs("select",{value:f,onChange:p=>H(p.target.value),disabled:l,className:M("w-full px-3 py-2 rounded-lg text-sm","bg-bolt-elements-background-depth-1","border border-bolt-elements-borderColor","text-bolt-elements-textPrimary","focus:outline-none focus:ring-1 focus:ring-bolt-elements-item-contentAccent","disabled:opacity-50"),children:[e.jsx("option",{value:"classic",children:"Personal Access Token (Classic)"}),e.jsx("option",{value:"fine-grained",children:"Fine-grained Token"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:f==="classic"?"Personal Access Token":"Fine-grained Token"}),e.jsx("input",{type:"password",value:g,onChange:p=>T(p.target.value),disabled:l,placeholder:`Enter your GitHub ${f==="classic"?"personal access token":"fine-grained token"}`,className:M("w-full px-3 py-2 rounded-lg text-sm","bg-bolt-elements-background-depth-1","border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-bolt-elements-borderColorActive","disabled:opacity-50")}),e.jsx("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:e.jsxs("a",{href:`https://github.com/settings/tokens${f==="fine-grained"?"/beta":"/new"}`,target:"_blank",rel:"noopener noreferrer",className:"text-bolt-elements-borderColorActive hover:underline inline-flex items-center gap-1",children:["Get your token",e.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})]})})]}),v&&e.jsx("div",{className:"p-4 rounded-lg bg-red-50 border border-red-200 dark:bg-red-900/20 dark:border-red-700",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:v})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-sm text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!g.trim(),className:M("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-[#303030] text-white","hover:bg-[#5E41D0] hover:text-white","disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"),children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})})]})]})]})})})]})})}function Te({isOpen:S,onClose:$,projectName:D,files:O}){const[l,v]=m.useState(""),[g,T]=m.useState(!1),[f,H]=m.useState(!1),[w,N]=m.useState(null),[p,V]=m.useState([]),[Y,K]=m.useState([]),[G,Z]=m.useState(""),[X,ee]=m.useState(!1),[de,te]=m.useState(!1),[F,Q]=m.useState(""),[A,ce]=m.useState([]),[re,se]=m.useState(!1),me=fe(pe),h=t=>t.toLowerCase().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-+|-+$/g,"").substring(0,100)||"my-project";m.useEffect(()=>{if(S){const t=_("github_connection");v(h(D)),t?.user&&t?.token&&(N(t.user),t.token.trim()&&oe(t.token))}},[S,D]),m.useEffect(()=>{if(p.length===0){K([]);return}if(!G.trim()){K(p);return}const t=G.toLowerCase().trim(),r=p.filter(d=>d.name.toLowerCase().includes(t)||d.description&&d.description.toLowerCase().includes(t)||d.language&&d.language.toLowerCase().includes(t));K(r)},[p,G]);const oe=async t=>{if(!t){L.logError("No GitHub token available"),u.error("GitHub authentication required");return}try{ee(!0);let r=[],d=1,o=!0;for(;o;){const i=`https://api.github.com/user/repos?sort=updated&per_page=100&page=${d}&affiliation=owner,organization_member`,n=await fetch(i,{headers:{Accept:"application/vnd.github.v3+json",Authorization:`Bearer ${t.trim()}`}});if(!n.ok){let x={};try{x=await n.json()}catch{x={message:"Could not parse error response"}}if(n.status===401)u.error("GitHub token expired. Please reconnect your account."),_("github_connection")&&(localStorage.removeItem("github_connection"),N(null));else if(n.status===403&&n.headers.get("x-ratelimit-remaining")==="0"){const s=n.headers.get("x-ratelimit-reset"),y=s?new Date(parseInt(s)*1e3).toLocaleTimeString():"soon";u.error(`GitHub API rate limit exceeded. Limit resets at ${y}`)}else L.logError("Failed to fetch GitHub repositories",{status:n.status,statusText:n.statusText,error:x}),u.error(`Failed to fetch repositories: ${x.message||n.statusText}`);return}try{const x=await n.json();r=r.concat(x),x.length<100?o=!1:d+=1}catch(x){L.logError("Failed to parse GitHub repositories response",{parseError:x}),u.error("Failed to parse repository data"),V([]);return}}V(r)}catch(r){L.logError("Failed to fetch GitHub repositories",{error:r}),u.error("Failed to fetch recent repositories")}finally{ee(!1)}},be=async t=>{t.preventDefault();const r=_("github_connection");if(!r?.token||!r?.user){u.error("Please connect your GitHub account in Settings > Connections first");return}if(!l.trim()){u.error("Repository name is required");return}const d=h(l);if(d.length<1){u.error("Repository name must contain at least one alphanumeric character");return}if(d.length>100){u.error("Repository name is too long (maximum 100 characters)");return}d!==l&&(v(d),u.info(`Repository name sanitized to: ${d}`)),H(!0);try{const o=new ge({auth:r.token});let i=!1;try{const a=h(l),{data:c}=await o.repos.get({owner:r.user.login,repo:a});i=!0;let k=`Repository "${l}" already exists. Do you want to update it? This will add or modify files in the repository.`;if(c.private!==g&&(k+=`

${g?"This will also change the repository from public to private.":"This will also change the repository from private to public."}`),!window.confirm(k)){H(!1);return}c.private!==g&&await o.repos.update({owner:r.user.login,repo:a,private:g})}catch(a){if(a.status!==404)throw a}if(i){const a=h(l);Q(`https://github.com/${r.user.login}/${a}`)}else{const a=h(l),{data:c}=await o.repos.createForAuthenticatedUser({name:a,private:g,auto_init:!0,gitignore_template:"Node"});Q(c.html_url),console.log("Created new repository with auto_init, waiting for GitHub to initialize it..."),await new Promise(k=>setTimeout(k,2e3))}const n=Object.entries(O),x=n.map(([a,c])=>({path:a,size:new TextEncoder().encode(c).length}));ce(x);let s,y=null;try{const a=h(l),{data:c}=await o.repos.get({owner:r.user.login,repo:a});s=c.default_branch||"main",console.log(`Repository default branch: ${s}`);try{const{data:k}=await o.git.getRef({owner:r.user.login,repo:a,ref:`heads/${s}`});y=k.object.sha,console.log(`Found existing reference with SHA: ${y}`);const{data:C}=await o.git.getCommit({owner:r.user.login,repo:a,commit_sha:y});y=C.tree.sha,console.log(`Using base tree SHA: ${y}`)}catch(k){console.error("Error getting reference:",k),y=null}}catch(a){console.error("Error getting repository info:",a),s="main",y=null}try{console.log("Creating tree for repository");const a=n.map(([P,R])=>({path:P,mode:"100644",type:"blob",content:R}));console.log(`Creating tree with ${a.length} files using base: ${y||"none"}`);const c=h(l),{data:k}=await o.git.createTree({owner:r.user.login,repo:c,tree:a,base_tree:y||void 0});console.log("Tree created successfully",k.sha);let C=null;try{const{data:P}=await o.git.getRef({owner:r.user.login,repo:c,ref:`heads/${s}`});C=P.object.sha,console.log(`Found parent commit: ${C}`)}catch(P){console.log("No reference found, this is a brand new repo",P),C=null}console.log("Creating commit");const{data:z}=await o.git.createCommit({owner:r.user.login,repo:c,message:i?"Update from Bolt.diy":"Initial commit from Bolt.diy",tree:k.sha,parents:C?[C]:[]});console.log("Commit created successfully",z.sha);try{console.log(`Updating reference: heads/${s} to ${z.sha}`),await o.git.updateRef({owner:r.user.login,repo:c,ref:`heads/${s}`,sha:z.sha,force:!0}),console.log("Reference updated successfully")}catch(P){console.log("Failed to update reference, attempting to create it",P);try{await o.git.createRef({owner:r.user.login,repo:c,ref:`refs/heads/${s}`,sha:z.sha}),console.log("Reference created successfully")}catch(R){console.error("Error creating reference:",R);const ue=typeof R=="object"&&R!==null&&"message"in R?String(R.message):"Unknown error";throw new Error(`Failed to create Git reference: ${ue}`)}}}catch(a){console.error("Error with git operations:",a);const c=typeof a=="object"&&a!==null&&"message"in a?String(a.message):"Unknown error";throw new Error(`Failed during git operations: ${c}`)}const le=h(l);localStorage.setItem(`github-repo-${me}`,JSON.stringify({owner:r.user.login,name:le,url:`https://github.com/${r.user.login}/${le}`})),te(!0)}catch(o){console.error("Error pushing to GitHub:",o);let i="Failed to push to GitHub",n=!1;if(o instanceof Error){const s=o.message.toLowerCase();s.includes("network")||s.includes("fetch failed")||s.includes("connection")?(i="Network error. Please check your internet connection and try again.",n=!0):s.includes("401")||s.includes("unauthorized")?i="GitHub authentication failed. Please check your access token in Settings > Connections.":s.includes("403")||s.includes("forbidden")?i="Access denied. Your GitHub token may not have sufficient permissions to create/modify repositories.":s.includes("404")||s.includes("not found")?i="Repository or resource not found. Please check the repository name and your permissions.":s.includes("422")||s.includes("validation failed")?s.includes("name already exists")?i="A repository with this name already exists in your account. Please choose a different name.":i="Repository validation failed. Please check the repository name and settings.":s.includes("rate limit")||s.includes("429")?(i="GitHub API rate limit exceeded. Please wait a moment and try again.",n=!0):s.includes("timeout")?(i="Request timed out. Please check your connection and try again.",n=!0):i=`GitHub error: ${o.message}`}else typeof o=="object"&&o!==null&&("message"in o&&(i=`GitHub API error: ${o.message}`),"documentation_url"in o&&console.log("GitHub API documentation:",o.documentation_url));const x=n?`${i} Click to retry.`:i;u.error(x),console.error("Detailed GitHub deployment error:",{error:o,repoName:h(l),user:r?.user?.login,isRetryable:n})}finally{H(!1)}},j=()=>{v(""),T(!1),te(!1),Q(""),$()},ae=()=>{se(!1);const t=_("github_connection");t?.user&&t?.token&&(N(t.user),oe(t.token))};return de?e.jsx(I,{open:S,onOpenChange:t=>!t&&j(),children:e.jsxs(U,{children:[e.jsx(q,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:e.jsx(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[600px] max-h-[85vh] overflow-y-auto",children:e.jsxs(B,{className:"bg-white dark:bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark shadow-xl","aria-describedby":"success-dialog-description",children:[e.jsx(W,{className:"sr-only",children:"Successfully pushed to GitHub"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-500/10 flex items-center justify-center text-green-500",children:e.jsx("div",{className:"i-ph:check-circle w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"Successfully pushed to GitHub"}),e.jsx("p",{id:"success-dialog-description",className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:"Your code is now available on GitHub"})]})]}),e.jsx(J,{asChild:!0,children:e.jsxs("button",{onClick:j,className:"p-2 rounded-lg transition-all duration-200 ease-in-out bg-transparent text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary dark:text-bolt-elements-textTertiary-dark dark:hover:text-bolt-elements-textPrimary-dark hover:bg-bolt-elements-background-depth-2 dark:hover:bg-bolt-elements-background-depth-3 focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark",children:[e.jsx("span",{className:"i-ph:x block w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Close dialog"})]})})]}),e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg p-4 text-left border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",children:[e.jsxs("p",{className:"text-sm font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"i-ph:github-logo w-4 h-4 text-purple-500"}),"Repository URL"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 text-sm bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-4 px-3 py-2 rounded border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark font-mono",children:F}),e.jsx(b.button,{onClick:()=>{navigator.clipboard.writeText(F),u.success("URL copied to clipboard")},className:"p-2 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary dark:text-bolt-elements-textSecondary-dark dark:hover:text-bolt-elements-textPrimary-dark bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-4 rounded-lg border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("div",{className:"i-ph:copy w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg p-4 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",children:[e.jsxs("p",{className:"text-sm font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"i-ph:files w-4 h-4 text-purple-500"}),"Pushed Files (",A.length,")"]}),e.jsxs("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar pr-2",children:[A.slice(0,100).map(t=>e.jsxs("div",{className:"flex items-center justify-between py-1.5 text-sm text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark border-b border-bolt-elements-borderColor/30 dark:border-bolt-elements-borderColor-dark/30 last:border-0",children:[e.jsx("span",{className:"font-mono truncate flex-1 text-xs",children:t.path}),e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-bolt-elements-background-depth-3 dark:bg-bolt-elements-background-depth-4 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark ml-2",children:[(t.size/1024).toFixed(1)," KB"]})]},t.path)),A.length>100&&e.jsxs("div",{className:"py-2 text-center text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:["+",A.length-100," more files"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsxs(b.a,{href:F,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-lg bg-purple-500 text-white hover:bg-purple-600 text-sm inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Repository"]}),e.jsxs(b.button,{onClick:()=>{navigator.clipboard.writeText(F),u.success("URL copied to clipboard")},className:"px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 text-sm inline-flex items-center gap-2 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("div",{className:"i-ph:copy w-4 h-4"}),"Copy URL"]}),e.jsx(b.button,{onClick:j,className:"px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 text-sm border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Close"})]})]})]})})})]})}):w?e.jsxs(I,{open:S,onOpenChange:t=>!t&&j(),children:[e.jsxs(U,{children:[e.jsx(q,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:e.jsx(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:e.jsx(B,{className:"bg-white dark:bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark shadow-xl","aria-describedby":"push-dialog-description",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(b.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.1},className:"w-10 h-10 rounded-xl bg-bolt-elements-background-depth-3 flex items-center justify-center text-purple-500",children:e.jsx("div",{className:"i-ph:github-logo w-5 h-5"})}),e.jsxs("div",{children:[e.jsx(W,{className:"text-lg font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"Deploy to GitHub"}),e.jsx("p",{id:"push-dialog-description",className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:"Deploy your code to a new or existing GitHub repository"})]}),e.jsx(J,{asChild:!0,children:e.jsxs("button",{onClick:j,className:"ml-auto p-2 rounded-lg transition-all duration-200 ease-in-out bg-transparent text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary dark:text-bolt-elements-textTertiary-dark dark:hover:text-bolt-elements-textPrimary-dark hover:bg-bolt-elements-background-depth-2 dark:hover:bg-bolt-elements-background-depth-3 focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark",children:[e.jsx("span",{className:"i-ph:x block w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Close dialog"})]})})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:w.avatar_url,alt:w.login,className:"w-10 h-10 rounded-full"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full bg-purple-500 flex items-center justify-center text-white",children:e.jsx("div",{className:"i-ph:github-logo w-3 h-3"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:w.name||w.login}),e.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:["@",w.login]})]})]}),e.jsxs("form",{onSubmit:be,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"repoName",className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:"Repository Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-bolt-elements-textTertiary dark:text-bolt-elements-textTertiary-dark",children:e.jsx("span",{className:"i-ph:git-branch w-4 h-4"})}),e.jsx("input",{id:"repoName",type:"text",value:l,onChange:t=>{const r=t.target.value;v(r);const d=h(r);r&&r!==d?t.target.setAttribute("data-sanitized",d):t.target.removeAttribute("data-sanitized")},placeholder:"my-awesome-project",className:"w-full pl-10 px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark placeholder-bolt-elements-textTertiary dark:placeholder-bolt-elements-textTertiary-dark focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0,maxLength:100,pattern:"[a-zA-Z0-9\\-_\\s]+",title:"Repository name can contain letters, numbers, hyphens, underscores, and spaces"})]}),l&&h(l)!==l&&e.jsxs("p",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark mt-1",children:["Will be created as:"," ",e.jsx("span",{className:"font-mono text-purple-600 dark:text-purple-400",children:h(l)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark",children:"Recent Repositories"}),e.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary dark:text-bolt-elements-textTertiary-dark",children:[Y.length," of ",p.length]})]}),e.jsx("div",{className:"mb-2",children:e.jsx(he,{placeholder:"Search repositories...",value:G,onChange:t=>Z(t.target.value),onClear:()=>Z(""),className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-sm"})}),p.length===0&&!X?e.jsx(ne,{icon:"i-ph:github-logo",title:"No repositories found",description:"We couldn't find any repositories in your GitHub account.",variant:"compact"}):e.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto pr-2 custom-scrollbar",children:Y.length===0&&G.trim()!==""?e.jsx(ne,{icon:"i-ph:magnifying-glass",title:"No matching repositories",description:"Try a different search term",variant:"compact"}):Y.map(t=>e.jsxs(b.button,{type:"button",onClick:()=>v(t.name),className:"w-full p-3 text-left rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 transition-colors group border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark hover:border-purple-500/30",whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"i-ph:git-branch w-4 h-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark group-hover:text-purple-500",children:t.name})]}),t.private&&e.jsx(E,{variant:"primary",size:"sm",icon:"i-ph:lock w-3 h-3",children:"Private"})]}),t.description&&e.jsx("p",{className:"mt-1 text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark line-clamp-2",children:t.description}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[t.language&&e.jsx(E,{variant:"subtle",size:"sm",icon:"i-ph:code w-3 h-3",children:t.language}),e.jsx(E,{variant:"subtle",size:"sm",icon:"i-ph:star w-3 h-3",children:t.stargazers_count.toLocaleString()}),e.jsx(E,{variant:"subtle",size:"sm",icon:"i-ph:git-fork w-3 h-3",children:t.forks_count.toLocaleString()}),e.jsx(E,{variant:"subtle",size:"sm",icon:"i-ph:clock w-3 h-3",children:new Date(t.updated_at).toLocaleDateString()})]})]},t.full_name))})]}),X&&e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(ye,{status:"loading",pulse:!0,label:"Loading repositories..."})}),e.jsxs("div",{className:"p-3 bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"private",checked:g,onChange:t=>T(t.target.checked),className:"rounded border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-purple-500 focus:ring-purple-500 dark:bg-bolt-elements-background-depth-3"}),e.jsx("label",{htmlFor:"private",className:"text-sm text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"Make repository private"})]}),e.jsx("p",{className:"text-xs text-bolt-elements-textTertiary dark:text-bolt-elements-textTertiary-dark mt-2 ml-6",children:"Private repositories are only visible to you and people you share them with"})]}),e.jsxs("div",{className:"pt-4 flex gap-2",children:[e.jsx(b.button,{type:"button",onClick:j,className:"px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 text-sm border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancel"}),e.jsx(b.button,{type:"submit",disabled:f,className:M("flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm inline-flex items-center justify-center gap-2",f?"opacity-50 cursor-not-allowed":""),whileHover:f?{}:{scale:1.02},whileTap:f?{}:{scale:.98},children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:spinner-gap animate-spin w-4 h-4"}),"Deploying..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"Deploy to GitHub"]})})]})]})]})})})})]}),e.jsx(ie,{isOpen:re,onClose:ae})]}):e.jsxs(I,{open:S,onOpenChange:t=>!t&&j(),children:[e.jsxs(U,{children:[e.jsx(q,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:e.jsx(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:e.jsxs(B,{className:"bg-white dark:bg-bolt-elements-background-depth-1 rounded-lg p-6 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark shadow-xl","aria-describedby":"connection-required-description",children:[e.jsx(W,{className:"sr-only",children:"GitHub Connection Required"}),e.jsxs("div",{className:"relative text-center space-y-4",children:[e.jsx(J,{asChild:!0,children:e.jsxs("button",{onClick:j,className:"absolute right-0 top-0 p-2 rounded-lg transition-all duration-200 ease-in-out bg-transparent text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary dark:text-bolt-elements-textTertiary-dark dark:hover:text-bolt-elements-textPrimary-dark hover:bg-bolt-elements-background-depth-2 dark:hover:bg-bolt-elements-background-depth-3 focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark",children:[e.jsx("span",{className:"i-ph:x block w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Close dialog"})]})}),e.jsx(b.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.1},className:"mx-auto w-16 h-16 rounded-xl bg-bolt-elements-background-depth-3 flex items-center justify-center text-purple-500",children:e.jsx("div",{className:"i-ph:github-logo w-8 h-8"})}),e.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"GitHub Connection Required"}),e.jsx("p",{id:"connection-required-description",className:"text-sm text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark max-w-md mx-auto",children:"To deploy your code to GitHub, you need to connect your GitHub account first."}),e.jsxs("div",{className:"pt-2 flex justify-center gap-3",children:[e.jsx(b.button,{className:"px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark text-sm hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:j,children:"Close"}),e.jsxs(b.button,{onClick:()=>se(!0),className:"px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600 inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"Connect GitHub Account"]})]})]})]})})})]}),e.jsx(ie,{isOpen:re,onClose:ae})]})}export{Te as GitHubDeploymentDialog};
